var $pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Lnt=$pe(($s,el)=>{function eme(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function OU(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var ZQ={exports:{}},YO={},$Q={exports:{}},Hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eM=Symbol.for("react.element"),tme=Symbol.for("react.portal"),rme=Symbol.for("react.fragment"),nme=Symbol.for("react.strict_mode"),ime=Symbol.for("react.profiler"),ome=Symbol.for("react.provider"),ame=Symbol.for("react.context"),sme=Symbol.for("react.forward_ref"),lme=Symbol.for("react.suspense"),ume=Symbol.for("react.memo"),cme=Symbol.for("react.lazy"),RG=Symbol.iterator;function dme(e){return e===null||typeof e!="object"?null:(e=RG&&e[RG]||e["@@iterator"],typeof e=="function"?e:null)}var eZ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tZ=Object.assign,rZ={};function n1(e,t,r){this.props=e,this.context=t,this.refs=rZ,this.updater=r||eZ}n1.prototype.isReactComponent={};n1.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};n1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nZ(){}nZ.prototype=n1.prototype;function RU(e,t,r){this.props=e,this.context=t,this.refs=rZ,this.updater=r||eZ}var IU=RU.prototype=new nZ;IU.constructor=RU;tZ(IU,n1.prototype);IU.isPureReactComponent=!0;var IG=Array.isArray,iZ=Object.prototype.hasOwnProperty,LU={current:null},oZ={key:!0,ref:!0,__self:!0,__source:!0};function aZ(e,t,r){var n,i={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)iZ.call(t,n)&&!oZ.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:eM,type:e,key:o,ref:a,props:i,_owner:LU.current}}function hme(e,t){return{$$typeof:eM,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function BU(e){return typeof e=="object"&&e!==null&&e.$$typeof===eM}function fme(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var LG=/\/+/g;function h3(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fme(""+e.key):t.toString(36)}function e2(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case eM:case tme:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+h3(a,0):n,IG(i)?(r="",e!=null&&(r=e.replace(LG,"$&/")+"/"),e2(i,t,r,"",function(u){return u})):i!=null&&(BU(i)&&(i=hme(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(LG,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",IG(e))for(var s=0;s<e.length;s++){o=e[s];var l=n+h3(o,s);a+=e2(o,t,r,l,i)}else if(l=dme(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=n+h3(o,s++),a+=e2(o,t,r,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function uT(e,t,r){if(e==null)return e;var n=[],i=0;return e2(e,n,"","",function(o){return t.call(r,o,i++)}),n}function pme(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qa={current:null},t2={transition:null},mme={ReactCurrentDispatcher:qa,ReactCurrentBatchConfig:t2,ReactCurrentOwner:LU};Hr.Children={map:uT,forEach:function(e,t,r){uT(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return uT(e,function(){t++}),t},toArray:function(e){return uT(e,function(t){return t})||[]},only:function(e){if(!BU(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Hr.Component=n1;Hr.Fragment=rme;Hr.Profiler=ime;Hr.PureComponent=RU;Hr.StrictMode=nme;Hr.Suspense=lme;Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mme;Hr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=tZ({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=LU.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)iZ.call(t,l)&&!oZ.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:eM,type:e.type,key:i,ref:o,props:n,_owner:a}};Hr.createContext=function(e){return e={$$typeof:ame,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ome,_context:e},e.Consumer=e};Hr.createElement=aZ;Hr.createFactory=function(e){var t=aZ.bind(null,e);return t.type=e,t};Hr.createRef=function(){return{current:null}};Hr.forwardRef=function(e){return{$$typeof:sme,render:e}};Hr.isValidElement=BU;Hr.lazy=function(e){return{$$typeof:cme,_payload:{_status:-1,_result:e},_init:pme}};Hr.memo=function(e,t){return{$$typeof:ume,type:e,compare:t===void 0?null:t}};Hr.startTransition=function(e){var t=t2.transition;t2.transition={};try{e()}finally{t2.transition=t}};Hr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Hr.useCallback=function(e,t){return qa.current.useCallback(e,t)};Hr.useContext=function(e){return qa.current.useContext(e)};Hr.useDebugValue=function(){};Hr.useDeferredValue=function(e){return qa.current.useDeferredValue(e)};Hr.useEffect=function(e,t){return qa.current.useEffect(e,t)};Hr.useId=function(){return qa.current.useId()};Hr.useImperativeHandle=function(e,t,r){return qa.current.useImperativeHandle(e,t,r)};Hr.useInsertionEffect=function(e,t){return qa.current.useInsertionEffect(e,t)};Hr.useLayoutEffect=function(e,t){return qa.current.useLayoutEffect(e,t)};Hr.useMemo=function(e,t){return qa.current.useMemo(e,t)};Hr.useReducer=function(e,t,r){return qa.current.useReducer(e,t,r)};Hr.useRef=function(e){return qa.current.useRef(e)};Hr.useState=function(e){return qa.current.useState(e)};Hr.useSyncExternalStore=function(e,t,r){return qa.current.useSyncExternalStore(e,t,r)};Hr.useTransition=function(){return qa.current.useTransition()};Hr.version="18.2.0";$Q.exports=Hr;var te=$Q.exports;const i1=OU(te),NU=eme({__proto__:null,default:i1},[te]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gme=te,vme=Symbol.for("react.element"),yme=Symbol.for("react.fragment"),bme=Object.prototype.hasOwnProperty,xme=gme.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wme={key:!0,ref:!0,__self:!0,__source:!0};function sZ(e,t,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)bme.call(t,n)&&!wme.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:vme,type:e,key:o,ref:a,props:i,_owner:xme.current}}YO.Fragment=yme;YO.jsx=sZ;YO.jsxs=sZ;ZQ.exports=YO;var Qe=ZQ.exports,fk={},lZ={exports:{}},ul={},uZ={exports:{}},cZ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,V){var j=z.length;z.push(V);e:for(;0<j;){var H=j-1>>>1,Y=z[H];if(0<i(Y,V))z[H]=V,z[j]=Y,j=H;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var V=z[0],j=z.pop();if(j!==V){z[0]=j;e:for(var H=0,Y=z.length,Q=Y>>>1;H<Q;){var $=2*(H+1)-1,ne=z[$],Z=$+1,ce=z[Z];if(0>i(ne,j))Z<Y&&0>i(ce,ne)?(z[H]=ce,z[Z]=j,H=Z):(z[H]=ne,z[$]=j,H=$);else if(Z<Y&&0>i(ce,j))z[H]=ce,z[Z]=j,H=Z;else break e}}return V}function i(z,V){var j=z.sortIndex-V.sortIndex;return j!==0?j:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],d=1,c=null,h=3,f=!1,g=!1,y=!1,m=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var V=r(u);V!==null;){if(V.callback===null)n(u);else if(V.startTime<=z)n(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=r(u)}}function x(z){if(y=!1,b(z),!g)if(r(l)!==null)g=!0,W(_);else{var V=r(u);V!==null&&G(x,V.startTime-z)}}function _(z,V){g=!1,y&&(y=!1,p(T),T=-1),f=!0;var j=h;try{for(b(V),c=r(l);c!==null&&(!(c.expirationTime>V)||z&&!D());){var H=c.callback;if(typeof H=="function"){c.callback=null,h=c.priorityLevel;var Y=H(c.expirationTime<=V);V=e.unstable_now(),typeof Y=="function"?c.callback=Y:c===r(l)&&n(l),b(V)}else n(l);c=r(l)}if(c!==null)var Q=!0;else{var $=r(u);$!==null&&G(x,$.startTime-V),Q=!1}return Q}finally{c=null,h=j,f=!1}}var A=!1,M=null,T=-1,C=5,E=-1;function D(){return!(e.unstable_now()-E<C)}function I(){if(M!==null){var z=e.unstable_now();E=z;var V=!0;try{V=M(!0,z)}finally{V?k():(A=!1,M=null)}}else A=!1}var k;if(typeof v=="function")k=function(){v(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,U=L.port2;L.port1.onmessage=I,k=function(){U.postMessage(null)}}else k=function(){m(I,0)};function W(z){M=z,A||(A=!0,k())}function G(z,V){T=m(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,W(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var j=h;h=V;try{return z()}finally{h=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=h;h=z;try{return V()}finally{h=j}},e.unstable_scheduleCallback=function(z,V,j){var H=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=j+Y,z={id:d++,callback:V,priorityLevel:z,startTime:j,expirationTime:Y,sortIndex:-1},j>H?(z.sortIndex=j,t(u,z),r(l)===null&&z===r(u)&&(y?(p(T),T=-1):y=!0,G(x,j-H))):(z.sortIndex=Y,t(l,z),g||f||(g=!0,W(_))),z},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(z){var V=h;return function(){var j=h;h=V;try{return z.apply(this,arguments)}finally{h=j}}}})(cZ);uZ.exports=cZ;var _me=uZ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dZ=te,ol=_me;function vt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hZ=new Set,WS={};function M0(e,t){hx(e,t),hx(e+"Capture",t)}function hx(e,t){for(WS[e]=t,e=0;e<t.length;e++)hZ.add(t[e])}var Mh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pk=Object.prototype.hasOwnProperty,Sme=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BG={},NG={};function Ame(e){return pk.call(NG,e)?!0:pk.call(BG,e)?!1:Sme.test(e)?NG[e]=!0:(BG[e]=!0,!1)}function Mme(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Cme(e,t,r,n){if(t===null||typeof t>"u"||Mme(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xa(e,t,r,n,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Uo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Uo[e]=new Xa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Uo[t]=new Xa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Uo[e]=new Xa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Uo[e]=new Xa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Uo[e]=new Xa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Uo[e]=new Xa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Uo[e]=new Xa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Uo[e]=new Xa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Uo[e]=new Xa(e,5,!1,e.toLowerCase(),null,!1,!1)});var kU=/[\-:]([a-z])/g;function FU(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kU,FU);Uo[t]=new Xa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kU,FU);Uo[t]=new Xa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kU,FU);Uo[t]=new Xa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Uo[e]=new Xa(e,1,!1,e.toLowerCase(),null,!1,!1)});Uo.xlinkHref=new Xa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Uo[e]=new Xa(e,1,!1,e.toLowerCase(),null,!0,!0)});function zU(e,t,r,n){var i=Uo.hasOwnProperty(t)?Uo[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Cme(t,r,i,n)&&(r=null),n||i===null?Ame(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var zh=dZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cT=Symbol.for("react.element"),nb=Symbol.for("react.portal"),ib=Symbol.for("react.fragment"),UU=Symbol.for("react.strict_mode"),mk=Symbol.for("react.profiler"),fZ=Symbol.for("react.provider"),pZ=Symbol.for("react.context"),VU=Symbol.for("react.forward_ref"),gk=Symbol.for("react.suspense"),vk=Symbol.for("react.suspense_list"),jU=Symbol.for("react.memo"),Wf=Symbol.for("react.lazy"),mZ=Symbol.for("react.offscreen"),kG=Symbol.iterator;function zw(e){return e===null||typeof e!="object"?null:(e=kG&&e[kG]||e["@@iterator"],typeof e=="function"?e:null)}var ni=Object.assign,f3;function W_(e){if(f3===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);f3=t&&t[1]||""}return`
`+f3+e}var p3=!1;function m3(e,t){if(!e||p3)return"";p3=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{p3=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?W_(e):""}function Tme(e){switch(e.tag){case 5:return W_(e.type);case 16:return W_("Lazy");case 13:return W_("Suspense");case 19:return W_("SuspenseList");case 0:case 2:case 15:return e=m3(e.type,!1),e;case 11:return e=m3(e.type.render,!1),e;case 1:return e=m3(e.type,!0),e;default:return""}}function yk(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ib:return"Fragment";case nb:return"Portal";case mk:return"Profiler";case UU:return"StrictMode";case gk:return"Suspense";case vk:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pZ:return(e.displayName||"Context")+".Consumer";case fZ:return(e._context.displayName||"Context")+".Provider";case VU:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jU:return t=e.displayName||null,t!==null?t:yk(e.type)||"Memo";case Wf:t=e._payload,e=e._init;try{return yk(e(t))}catch{}}return null}function Eme(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yk(t);case 8:return t===UU?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bp(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gZ(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pme(e){var t=gZ(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dT(e){e._valueTracker||(e._valueTracker=Pme(e))}function vZ(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=gZ(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function G2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bk(e,t){var r=t.checked;return ni({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function FG(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Bp(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yZ(e,t){t=t.checked,t!=null&&zU(e,"checked",t,!1)}function xk(e,t){yZ(e,t);var r=Bp(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wk(e,t.type,r):t.hasOwnProperty("defaultValue")&&wk(e,t.type,Bp(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zG(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function wk(e,t,r){(t!=="number"||G2(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var q_=Array.isArray;function Bb(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Bp(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function _k(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(vt(91));return ni({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function UG(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(vt(92));if(q_(r)){if(1<r.length)throw Error(vt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Bp(r)}}function bZ(e,t){var r=Bp(t.value),n=Bp(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function VG(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xZ(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sk(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xZ(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hT,wZ=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hT=hT||document.createElement("div"),hT.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hT.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qS(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var uS={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dme=["Webkit","ms","Moz","O"];Object.keys(uS).forEach(function(e){Dme.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uS[t]=uS[e]})});function _Z(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||uS.hasOwnProperty(e)&&uS[e]?(""+t).trim():t+"px"}function SZ(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=_Z(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Ome=ni({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ak(e,t){if(t){if(Ome[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(vt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(vt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(vt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(vt(62))}}function Mk(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ck=null;function HU(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tk=null,Nb=null,kb=null;function jG(e){if(e=nM(e)){if(typeof Tk!="function")throw Error(vt(280));var t=e.stateNode;t&&(t=$O(t),Tk(e.stateNode,e.type,t))}}function AZ(e){Nb?kb?kb.push(e):kb=[e]:Nb=e}function MZ(){if(Nb){var e=Nb,t=kb;if(kb=Nb=null,jG(e),t)for(e=0;e<t.length;e++)jG(t[e])}}function CZ(e,t){return e(t)}function TZ(){}var g3=!1;function EZ(e,t,r){if(g3)return e(t,r);g3=!0;try{return CZ(e,t,r)}finally{g3=!1,(Nb!==null||kb!==null)&&(TZ(),MZ())}}function XS(e,t){var r=e.stateNode;if(r===null)return null;var n=$O(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(vt(231,t,typeof r));return r}var Ek=!1;if(Mh)try{var Uw={};Object.defineProperty(Uw,"passive",{get:function(){Ek=!0}}),window.addEventListener("test",Uw,Uw),window.removeEventListener("test",Uw,Uw)}catch{Ek=!1}function Rme(e,t,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var cS=!1,W2=null,q2=!1,Pk=null,Ime={onError:function(e){cS=!0,W2=e}};function Lme(e,t,r,n,i,o,a,s,l){cS=!1,W2=null,Rme.apply(Ime,arguments)}function Bme(e,t,r,n,i,o,a,s,l){if(Lme.apply(this,arguments),cS){if(cS){var u=W2;cS=!1,W2=null}else throw Error(vt(198));q2||(q2=!0,Pk=u)}}function C0(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function PZ(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function HG(e){if(C0(e)!==e)throw Error(vt(188))}function Nme(e){var t=e.alternate;if(!t){if(t=C0(e),t===null)throw Error(vt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return HG(i),e;if(o===n)return HG(i),t;o=o.sibling}throw Error(vt(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(vt(189))}}if(r.alternate!==n)throw Error(vt(190))}if(r.tag!==3)throw Error(vt(188));return r.stateNode.current===r?e:t}function DZ(e){return e=Nme(e),e!==null?OZ(e):null}function OZ(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OZ(e);if(t!==null)return t;e=e.sibling}return null}var RZ=ol.unstable_scheduleCallback,GG=ol.unstable_cancelCallback,kme=ol.unstable_shouldYield,Fme=ol.unstable_requestPaint,Ti=ol.unstable_now,zme=ol.unstable_getCurrentPriorityLevel,GU=ol.unstable_ImmediatePriority,IZ=ol.unstable_UserBlockingPriority,X2=ol.unstable_NormalPriority,Ume=ol.unstable_LowPriority,LZ=ol.unstable_IdlePriority,KO=null,Hc=null;function Vme(e){if(Hc&&typeof Hc.onCommitFiberRoot=="function")try{Hc.onCommitFiberRoot(KO,e,void 0,(e.current.flags&128)===128)}catch{}}var ku=Math.clz32?Math.clz32:Gme,jme=Math.log,Hme=Math.LN2;function Gme(e){return e>>>=0,e===0?32:31-(jme(e)/Hme|0)|0}var fT=64,pT=4194304;function X_(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Y2(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=X_(s):(o&=a,o!==0&&(n=X_(o)))}else a=r&~i,a!==0?n=X_(a):o!==0&&(n=X_(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ku(t),i=1<<r,n|=e[r],t&=~i;return n}function Wme(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qme(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ku(o),s=1<<a,l=i[a];l===-1?(!(s&r)||s&n)&&(i[a]=Wme(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function Dk(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BZ(){var e=fT;return fT<<=1,!(fT&4194240)&&(fT=64),e}function v3(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function tM(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ku(t),e[t]=r}function Xme(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ku(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function WU(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ku(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var yn=0;function NZ(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var kZ,qU,FZ,zZ,UZ,Ok=!1,mT=[],mp=null,gp=null,vp=null,YS=new Map,KS=new Map,Qf=[],Yme="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WG(e,t){switch(e){case"focusin":case"focusout":mp=null;break;case"dragenter":case"dragleave":gp=null;break;case"mouseover":case"mouseout":vp=null;break;case"pointerover":case"pointerout":YS.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":KS.delete(t.pointerId)}}function Vw(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=nM(t),t!==null&&qU(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Kme(e,t,r,n,i){switch(t){case"focusin":return mp=Vw(mp,e,t,r,n,i),!0;case"dragenter":return gp=Vw(gp,e,t,r,n,i),!0;case"mouseover":return vp=Vw(vp,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return YS.set(o,Vw(YS.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,KS.set(o,Vw(KS.get(o)||null,e,t,r,n,i)),!0}return!1}function VZ(e){var t=Cg(e.target);if(t!==null){var r=C0(t);if(r!==null){if(t=r.tag,t===13){if(t=PZ(r),t!==null){e.blockedOn=t,UZ(e.priority,function(){FZ(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function r2(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Rk(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ck=n,r.target.dispatchEvent(n),Ck=null}else return t=nM(r),t!==null&&qU(t),e.blockedOn=r,!1;t.shift()}return!0}function qG(e,t,r){r2(e)&&r.delete(t)}function Jme(){Ok=!1,mp!==null&&r2(mp)&&(mp=null),gp!==null&&r2(gp)&&(gp=null),vp!==null&&r2(vp)&&(vp=null),YS.forEach(qG),KS.forEach(qG)}function jw(e,t){e.blockedOn===t&&(e.blockedOn=null,Ok||(Ok=!0,ol.unstable_scheduleCallback(ol.unstable_NormalPriority,Jme)))}function JS(e){function t(i){return jw(i,e)}if(0<mT.length){jw(mT[0],e);for(var r=1;r<mT.length;r++){var n=mT[r];n.blockedOn===e&&(n.blockedOn=null)}}for(mp!==null&&jw(mp,e),gp!==null&&jw(gp,e),vp!==null&&jw(vp,e),YS.forEach(t),KS.forEach(t),r=0;r<Qf.length;r++)n=Qf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qf.length&&(r=Qf[0],r.blockedOn===null);)VZ(r),r.blockedOn===null&&Qf.shift()}var Fb=zh.ReactCurrentBatchConfig,K2=!0;function Qme(e,t,r,n){var i=yn,o=Fb.transition;Fb.transition=null;try{yn=1,XU(e,t,r,n)}finally{yn=i,Fb.transition=o}}function Zme(e,t,r,n){var i=yn,o=Fb.transition;Fb.transition=null;try{yn=4,XU(e,t,r,n)}finally{yn=i,Fb.transition=o}}function XU(e,t,r,n){if(K2){var i=Rk(e,t,r,n);if(i===null)T3(e,t,n,J2,r),WG(e,n);else if(Kme(i,e,t,r,n))n.stopPropagation();else if(WG(e,n),t&4&&-1<Yme.indexOf(e)){for(;i!==null;){var o=nM(i);if(o!==null&&kZ(o),o=Rk(e,t,r,n),o===null&&T3(e,t,n,J2,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else T3(e,t,n,null,r)}}var J2=null;function Rk(e,t,r,n){if(J2=null,e=HU(n),e=Cg(e),e!==null)if(t=C0(e),t===null)e=null;else if(r=t.tag,r===13){if(e=PZ(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return J2=e,null}function jZ(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zme()){case GU:return 1;case IZ:return 4;case X2:case Ume:return 16;case LZ:return 536870912;default:return 16}default:return 16}}var ip=null,YU=null,n2=null;function HZ(){if(n2)return n2;var e,t=YU,r=t.length,n,i="value"in ip?ip.value:ip.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[o-n];n++);return n2=i.slice(e,1<n?1-n:void 0)}function i2(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gT(){return!0}function XG(){return!1}function cl(e){function t(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gT:XG,this.isPropagationStopped=XG,this}return ni(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=gT)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=gT)},persist:function(){},isPersistent:gT}),t}var o1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KU=cl(o1),rM=ni({},o1,{view:0,detail:0}),$me=cl(rM),y3,b3,Hw,JO=ni({},rM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JU,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hw&&(Hw&&e.type==="mousemove"?(y3=e.screenX-Hw.screenX,b3=e.screenY-Hw.screenY):b3=y3=0,Hw=e),y3)},movementY:function(e){return"movementY"in e?e.movementY:b3}}),YG=cl(JO),ege=ni({},JO,{dataTransfer:0}),tge=cl(ege),rge=ni({},rM,{relatedTarget:0}),x3=cl(rge),nge=ni({},o1,{animationName:0,elapsedTime:0,pseudoElement:0}),ige=cl(nge),oge=ni({},o1,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),age=cl(oge),sge=ni({},o1,{data:0}),KG=cl(sge),lge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dge(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cge[e])?!!t[e]:!1}function JU(){return dge}var hge=ni({},rM,{key:function(e){if(e.key){var t=lge[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=i2(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uge[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JU,charCode:function(e){return e.type==="keypress"?i2(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?i2(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fge=cl(hge),pge=ni({},JO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JG=cl(pge),mge=ni({},rM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JU}),gge=cl(mge),vge=ni({},o1,{propertyName:0,elapsedTime:0,pseudoElement:0}),yge=cl(vge),bge=ni({},JO,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xge=cl(bge),wge=[9,13,27,32],QU=Mh&&"CompositionEvent"in window,dS=null;Mh&&"documentMode"in document&&(dS=document.documentMode);var _ge=Mh&&"TextEvent"in window&&!dS,GZ=Mh&&(!QU||dS&&8<dS&&11>=dS),QG=" ",ZG=!1;function WZ(e,t){switch(e){case"keyup":return wge.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qZ(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ob=!1;function Sge(e,t){switch(e){case"compositionend":return qZ(t);case"keypress":return t.which!==32?null:(ZG=!0,QG);case"textInput":return e=t.data,e===QG&&ZG?null:e;default:return null}}function Age(e,t){if(ob)return e==="compositionend"||!QU&&WZ(e,t)?(e=HZ(),n2=YU=ip=null,ob=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return GZ&&t.locale!=="ko"?null:t.data;default:return null}}var Mge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $G(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mge[e.type]:t==="textarea"}function XZ(e,t,r,n){AZ(n),t=Q2(t,"onChange"),0<t.length&&(r=new KU("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var hS=null,QS=null;function Cge(e){i$(e,0)}function QO(e){var t=lb(e);if(vZ(t))return e}function Tge(e,t){if(e==="change")return t}var YZ=!1;if(Mh){var w3;if(Mh){var _3="oninput"in document;if(!_3){var e6=document.createElement("div");e6.setAttribute("oninput","return;"),_3=typeof e6.oninput=="function"}w3=_3}else w3=!1;YZ=w3&&(!document.documentMode||9<document.documentMode)}function t6(){hS&&(hS.detachEvent("onpropertychange",KZ),QS=hS=null)}function KZ(e){if(e.propertyName==="value"&&QO(QS)){var t=[];XZ(t,QS,e,HU(e)),EZ(Cge,t)}}function Ege(e,t,r){e==="focusin"?(t6(),hS=t,QS=r,hS.attachEvent("onpropertychange",KZ)):e==="focusout"&&t6()}function Pge(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return QO(QS)}function Dge(e,t){if(e==="click")return QO(t)}function Oge(e,t){if(e==="input"||e==="change")return QO(t)}function Rge(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ju=typeof Object.is=="function"?Object.is:Rge;function ZS(e,t){if(ju(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!pk.call(t,i)||!ju(e[i],t[i]))return!1}return!0}function r6(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function n6(e,t){var r=r6(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=r6(r)}}function JZ(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?JZ(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QZ(){for(var e=window,t=G2();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=G2(e.document)}return t}function ZU(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ige(e){var t=QZ(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&JZ(r.ownerDocument.documentElement,r)){if(n!==null&&ZU(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=n6(r,o);var a=n6(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Lge=Mh&&"documentMode"in document&&11>=document.documentMode,ab=null,Ik=null,fS=null,Lk=!1;function i6(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lk||ab==null||ab!==G2(n)||(n=ab,"selectionStart"in n&&ZU(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),fS&&ZS(fS,n)||(fS=n,n=Q2(Ik,"onSelect"),0<n.length&&(t=new KU("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ab)))}function vT(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var sb={animationend:vT("Animation","AnimationEnd"),animationiteration:vT("Animation","AnimationIteration"),animationstart:vT("Animation","AnimationStart"),transitionend:vT("Transition","TransitionEnd")},S3={},ZZ={};Mh&&(ZZ=document.createElement("div").style,"AnimationEvent"in window||(delete sb.animationend.animation,delete sb.animationiteration.animation,delete sb.animationstart.animation),"TransitionEvent"in window||delete sb.transitionend.transition);function ZO(e){if(S3[e])return S3[e];if(!sb[e])return e;var t=sb[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ZZ)return S3[e]=t[r];return e}var $Z=ZO("animationend"),e$=ZO("animationiteration"),t$=ZO("animationstart"),r$=ZO("transitionend"),n$=new Map,o6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yp(e,t){n$.set(e,t),M0(t,[e])}for(var A3=0;A3<o6.length;A3++){var M3=o6[A3],Bge=M3.toLowerCase(),Nge=M3[0].toUpperCase()+M3.slice(1);Yp(Bge,"on"+Nge)}Yp($Z,"onAnimationEnd");Yp(e$,"onAnimationIteration");Yp(t$,"onAnimationStart");Yp("dblclick","onDoubleClick");Yp("focusin","onFocus");Yp("focusout","onBlur");Yp(r$,"onTransitionEnd");hx("onMouseEnter",["mouseout","mouseover"]);hx("onMouseLeave",["mouseout","mouseover"]);hx("onPointerEnter",["pointerout","pointerover"]);hx("onPointerLeave",["pointerout","pointerover"]);M0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));M0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));M0("onBeforeInput",["compositionend","keypress","textInput","paste"]);M0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));M0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));M0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Y_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kge=new Set("cancel close invalid load scroll toggle".split(" ").concat(Y_));function a6(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Bme(n,t,void 0,e),e.currentTarget=null}function i$(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;a6(i,s,u),o=l}else for(a=0;a<n.length;a++){if(s=n[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;a6(i,s,u),o=l}}}if(q2)throw e=Pk,q2=!1,Pk=null,e}function In(e,t){var r=t[zk];r===void 0&&(r=t[zk]=new Set);var n=e+"__bubble";r.has(n)||(o$(t,e,2,!1),r.add(n))}function C3(e,t,r){var n=0;t&&(n|=4),o$(r,e,n,t)}var yT="_reactListening"+Math.random().toString(36).slice(2);function $S(e){if(!e[yT]){e[yT]=!0,hZ.forEach(function(r){r!=="selectionchange"&&(kge.has(r)||C3(r,!1,e),C3(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yT]||(t[yT]=!0,C3("selectionchange",!1,t))}}function o$(e,t,r,n){switch(jZ(t)){case 1:var i=Qme;break;case 4:i=Zme;break;default:i=XU}r=i.bind(null,t,r,e),i=void 0,!Ek||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function T3(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Cg(s),a===null)return;if(l=a.tag,l===5||l===6){n=o=a;continue e}s=s.parentNode}}n=n.return}EZ(function(){var u=o,d=HU(r),c=[];e:{var h=n$.get(e);if(h!==void 0){var f=KU,g=e;switch(e){case"keypress":if(i2(r)===0)break e;case"keydown":case"keyup":f=fge;break;case"focusin":g="focus",f=x3;break;case"focusout":g="blur",f=x3;break;case"beforeblur":case"afterblur":f=x3;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=YG;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=tge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=gge;break;case $Z:case e$:case t$:f=ige;break;case r$:f=yge;break;case"scroll":f=$me;break;case"wheel":f=xge;break;case"copy":case"cut":case"paste":f=age;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=JG}var y=(t&4)!==0,m=!y&&e==="scroll",p=y?h!==null?h+"Capture":null:h;y=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,p!==null&&(x=XS(v,p),x!=null&&y.push(eA(v,x,b)))),m)break;v=v.return}0<y.length&&(h=new f(h,g,null,r,d),c.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&r!==Ck&&(g=r.relatedTarget||r.fromElement)&&(Cg(g)||g[Ch]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=r.relatedTarget||r.toElement,f=u,g=g?Cg(g):null,g!==null&&(m=C0(g),g!==m||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(y=YG,x="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=JG,x="onPointerLeave",p="onPointerEnter",v="pointer"),m=f==null?h:lb(f),b=g==null?h:lb(g),h=new y(x,v+"leave",f,r,d),h.target=m,h.relatedTarget=b,x=null,Cg(d)===u&&(y=new y(p,v+"enter",g,r,d),y.target=b,y.relatedTarget=m,x=y),m=x,f&&g)t:{for(y=f,p=g,v=0,b=y;b;b=Hv(b))v++;for(b=0,x=p;x;x=Hv(x))b++;for(;0<v-b;)y=Hv(y),v--;for(;0<b-v;)p=Hv(p),b--;for(;v--;){if(y===p||p!==null&&y===p.alternate)break t;y=Hv(y),p=Hv(p)}y=null}else y=null;f!==null&&s6(c,h,f,y,!1),g!==null&&m!==null&&s6(c,m,g,y,!0)}}e:{if(h=u?lb(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=Tge;else if($G(h))if(YZ)_=Oge;else{_=Pge;var A=Ege}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Dge);if(_&&(_=_(e,u))){XZ(c,_,r,d);break e}A&&A(e,h,u),e==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&wk(h,"number",h.value)}switch(A=u?lb(u):window,e){case"focusin":($G(A)||A.contentEditable==="true")&&(ab=A,Ik=u,fS=null);break;case"focusout":fS=Ik=ab=null;break;case"mousedown":Lk=!0;break;case"contextmenu":case"mouseup":case"dragend":Lk=!1,i6(c,r,d);break;case"selectionchange":if(Lge)break;case"keydown":case"keyup":i6(c,r,d)}var M;if(QU)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ob?WZ(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(GZ&&r.locale!=="ko"&&(ob||T!=="onCompositionStart"?T==="onCompositionEnd"&&ob&&(M=HZ()):(ip=d,YU="value"in ip?ip.value:ip.textContent,ob=!0)),A=Q2(u,T),0<A.length&&(T=new KG(T,e,null,r,d),c.push({event:T,listeners:A}),M?T.data=M:(M=qZ(r),M!==null&&(T.data=M)))),(M=_ge?Sge(e,r):Age(e,r))&&(u=Q2(u,"onBeforeInput"),0<u.length&&(d=new KG("onBeforeInput","beforeinput",null,r,d),c.push({event:d,listeners:u}),d.data=M))}i$(c,t)})}function eA(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Q2(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=XS(e,r),o!=null&&n.unshift(eA(e,o,i)),o=XS(e,t),o!=null&&n.push(eA(e,o,i))),e=e.return}return n}function Hv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function s6(e,t,r,n,i){for(var o=t._reactName,a=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=XS(r,o),l!=null&&a.unshift(eA(r,l,s))):i||(l=XS(r,o),l!=null&&a.push(eA(r,l,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var Fge=/\r\n?/g,zge=/\u0000|\uFFFD/g;function l6(e){return(typeof e=="string"?e:""+e).replace(Fge,`
`).replace(zge,"")}function bT(e,t,r){if(t=l6(t),l6(e)!==t&&r)throw Error(vt(425))}function Z2(){}var Bk=null,Nk=null;function kk(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fk=typeof setTimeout=="function"?setTimeout:void 0,Uge=typeof clearTimeout=="function"?clearTimeout:void 0,u6=typeof Promise=="function"?Promise:void 0,Vge=typeof queueMicrotask=="function"?queueMicrotask:typeof u6<"u"?function(e){return u6.resolve(null).then(e).catch(jge)}:Fk;function jge(e){setTimeout(function(){throw e})}function E3(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),JS(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);JS(t)}function yp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function c6(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var a1=Math.random().toString(36).slice(2),Nc="__reactFiber$"+a1,tA="__reactProps$"+a1,Ch="__reactContainer$"+a1,zk="__reactEvents$"+a1,Hge="__reactListeners$"+a1,Gge="__reactHandles$"+a1;function Cg(e){var t=e[Nc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ch]||r[Nc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=c6(e);e!==null;){if(r=e[Nc])return r;e=c6(e)}return t}e=r,r=e.parentNode}return null}function nM(e){return e=e[Nc]||e[Ch],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function lb(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(vt(33))}function $O(e){return e[tA]||null}var Uk=[],ub=-1;function Kp(e){return{current:e}}function Fn(e){0>ub||(e.current=Uk[ub],Uk[ub]=null,ub--)}function Dn(e,t){ub++,Uk[ub]=e.current,e.current=t}var Np={},la=Kp(Np),_s=Kp(!1),o0=Np;function fx(e,t){var r=e.type.contextTypes;if(!r)return Np;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ss(e){return e=e.childContextTypes,e!=null}function $2(){Fn(_s),Fn(la)}function d6(e,t,r){if(la.current!==Np)throw Error(vt(168));Dn(la,t),Dn(_s,r)}function a$(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(vt(108,Eme(e)||"Unknown",i));return ni({},r,n)}function eD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Np,o0=la.current,Dn(la,e),Dn(_s,_s.current),!0}function h6(e,t,r){var n=e.stateNode;if(!n)throw Error(vt(169));r?(e=a$(e,t,o0),n.__reactInternalMemoizedMergedChildContext=e,Fn(_s),Fn(la),Dn(la,e)):Fn(_s),Dn(_s,r)}var eh=null,eR=!1,P3=!1;function s$(e){eh===null?eh=[e]:eh.push(e)}function Wge(e){eR=!0,s$(e)}function Jp(){if(!P3&&eh!==null){P3=!0;var e=0,t=yn;try{var r=eh;for(yn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}eh=null,eR=!1}catch(i){throw eh!==null&&(eh=eh.slice(e+1)),RZ(GU,Jp),i}finally{yn=t,P3=!1}}return null}var cb=[],db=0,tD=null,rD=0,kl=[],Fl=0,a0=null,sh=1,lh="";function sg(e,t){cb[db++]=rD,cb[db++]=tD,tD=e,rD=t}function l$(e,t,r){kl[Fl++]=sh,kl[Fl++]=lh,kl[Fl++]=a0,a0=e;var n=sh;e=lh;var i=32-ku(n)-1;n&=~(1<<i),r+=1;var o=32-ku(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,sh=1<<32-ku(t)+i|r<<i|n,lh=o+e}else sh=1<<o|r<<i|n,lh=e}function $U(e){e.return!==null&&(sg(e,1),l$(e,1,0))}function e4(e){for(;e===tD;)tD=cb[--db],cb[db]=null,rD=cb[--db],cb[db]=null;for(;e===a0;)a0=kl[--Fl],kl[Fl]=null,lh=kl[--Fl],kl[Fl]=null,sh=kl[--Fl],kl[Fl]=null}var tl=null,Ks=null,Gn=!1,Mu=null;function u$(e,t){var r=jl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function f6(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tl=e,Ks=yp(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tl=e,Ks=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=a0!==null?{id:sh,overflow:lh}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=jl(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,tl=e,Ks=null,!0):!1;default:return!1}}function Vk(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jk(e){if(Gn){var t=Ks;if(t){var r=t;if(!f6(e,t)){if(Vk(e))throw Error(vt(418));t=yp(r.nextSibling);var n=tl;t&&f6(e,t)?u$(n,r):(e.flags=e.flags&-4097|2,Gn=!1,tl=e)}}else{if(Vk(e))throw Error(vt(418));e.flags=e.flags&-4097|2,Gn=!1,tl=e}}}function p6(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tl=e}function xT(e){if(e!==tl)return!1;if(!Gn)return p6(e),Gn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kk(e.type,e.memoizedProps)),t&&(t=Ks)){if(Vk(e))throw c$(),Error(vt(418));for(;t;)u$(e,t),t=yp(t.nextSibling)}if(p6(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(vt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ks=yp(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ks=null}}else Ks=tl?yp(e.stateNode.nextSibling):null;return!0}function c$(){for(var e=Ks;e;)e=yp(e.nextSibling)}function px(){Ks=tl=null,Gn=!1}function t4(e){Mu===null?Mu=[e]:Mu.push(e)}var qge=zh.ReactCurrentBatchConfig;function _u(e,t){if(e&&e.defaultProps){t=ni({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var nD=Kp(null),iD=null,hb=null,r4=null;function n4(){r4=hb=iD=null}function i4(e){var t=nD.current;Fn(nD),e._currentValue=t}function Hk(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function zb(e,t){iD=e,r4=hb=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vs=!0),e.firstContext=null)}function Jl(e){var t=e._currentValue;if(r4!==e)if(e={context:e,memoizedValue:t,next:null},hb===null){if(iD===null)throw Error(vt(308));hb=e,iD.dependencies={lanes:0,firstContext:e}}else hb=hb.next=e;return t}var Tg=null;function o4(e){Tg===null?Tg=[e]:Tg.push(e)}function d$(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,o4(t)):(r.next=i.next,i.next=r),t.interleaved=r,Th(e,n)}function Th(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var qf=!1;function a4(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bp(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,$r&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Th(e,r)}return i=n.interleaved,i===null?(t.next=t,o4(n)):(t.next=i.next,i.next=t),n.interleaved=t,Th(e,r)}function o2(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,WU(e,r)}}function m6(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function oD(e,t,r,n){var i=e.updateQueue;qf=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==a&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(o!==null){var c=i.baseState;a=0,d=u=l=null,s=o;do{var h=s.lane,f=s.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,y=s;switch(h=t,f=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){c=g.call(f,c,h);break e}c=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(f,c,h):g,h==null)break e;c=ni({},c,h);break e;case 2:qf=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=f,l=c):d=d.next=f,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);l0|=a,e.lanes=a,e.memoizedState=c}}function g6(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(vt(191,i));i.call(n)}}}var f$=new dZ.Component().refs;function Gk(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ni({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var tR={isMounted:function(e){return(e=e._reactInternals)?C0(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Va(),i=wp(e),o=mh(n,i);o.payload=t,r!=null&&(o.callback=r),t=bp(e,o,i),t!==null&&(Fu(t,e,i,n),o2(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Va(),i=wp(e),o=mh(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=bp(e,o,i),t!==null&&(Fu(t,e,i,n),o2(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Va(),n=wp(e),i=mh(r,n);i.tag=2,t!=null&&(i.callback=t),t=bp(e,i,n),t!==null&&(Fu(t,e,n,r),o2(t,e,n))}};function v6(e,t,r,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!ZS(r,n)||!ZS(i,o):!0}function p$(e,t,r){var n=!1,i=Np,o=t.contextType;return typeof o=="object"&&o!==null?o=Jl(o):(i=Ss(t)?o0:la.current,n=t.contextTypes,o=(n=n!=null)?fx(e,i):Np),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=tR,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function y6(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&tR.enqueueReplaceState(t,t.state,null)}function Wk(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=f$,a4(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Jl(o):(o=Ss(t)?o0:la.current,i.context=fx(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Gk(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&tR.enqueueReplaceState(i,i.state,null),oD(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Gw(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(vt(309));var n=r.stateNode}if(!n)throw Error(vt(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;s===f$&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(vt(284));if(!r._owner)throw Error(vt(290,e))}return e}function wT(e,t){throw e=Object.prototype.toString.call(t),Error(vt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function b6(e){var t=e._init;return t(e._payload)}function m$(e){function t(p,v){if(e){var b=p.deletions;b===null?(p.deletions=[v],p.flags|=16):b.push(v)}}function r(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function n(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=_p(p,v),p.index=0,p.sibling=null,p}function o(p,v,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<v?(p.flags|=2,v):b):(p.flags|=2,v)):(p.flags|=1048576,v)}function a(p){return e&&p.alternate===null&&(p.flags|=2),p}function s(p,v,b,x){return v===null||v.tag!==6?(v=N3(b,p.mode,x),v.return=p,v):(v=i(v,b),v.return=p,v)}function l(p,v,b,x){var _=b.type;return _===ib?d(p,v,b.props.children,x,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Wf&&b6(_)===v.type)?(x=i(v,b.props),x.ref=Gw(p,v,b),x.return=p,x):(x=d2(b.type,b.key,b.props,null,p.mode,x),x.ref=Gw(p,v,b),x.return=p,x)}function u(p,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=k3(b,p.mode,x),v.return=p,v):(v=i(v,b.children||[]),v.return=p,v)}function d(p,v,b,x,_){return v===null||v.tag!==7?(v=Hg(b,p.mode,x,_),v.return=p,v):(v=i(v,b),v.return=p,v)}function c(p,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=N3(""+v,p.mode,b),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cT:return b=d2(v.type,v.key,v.props,null,p.mode,b),b.ref=Gw(p,null,v),b.return=p,b;case nb:return v=k3(v,p.mode,b),v.return=p,v;case Wf:var x=v._init;return c(p,x(v._payload),b)}if(q_(v)||zw(v))return v=Hg(v,p.mode,b,null),v.return=p,v;wT(p,v)}return null}function h(p,v,b,x){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:s(p,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cT:return b.key===_?l(p,v,b,x):null;case nb:return b.key===_?u(p,v,b,x):null;case Wf:return _=b._init,h(p,v,_(b._payload),x)}if(q_(b)||zw(b))return _!==null?null:d(p,v,b,x,null);wT(p,b)}return null}function f(p,v,b,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(b)||null,s(v,p,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cT:return p=p.get(x.key===null?b:x.key)||null,l(v,p,x,_);case nb:return p=p.get(x.key===null?b:x.key)||null,u(v,p,x,_);case Wf:var A=x._init;return f(p,v,b,A(x._payload),_)}if(q_(x)||zw(x))return p=p.get(b)||null,d(v,p,x,_,null);wT(v,x)}return null}function g(p,v,b,x){for(var _=null,A=null,M=v,T=v=0,C=null;M!==null&&T<b.length;T++){M.index>T?(C=M,M=null):C=M.sibling;var E=h(p,M,b[T],x);if(E===null){M===null&&(M=C);break}e&&M&&E.alternate===null&&t(p,M),v=o(E,v,T),A===null?_=E:A.sibling=E,A=E,M=C}if(T===b.length)return r(p,M),Gn&&sg(p,T),_;if(M===null){for(;T<b.length;T++)M=c(p,b[T],x),M!==null&&(v=o(M,v,T),A===null?_=M:A.sibling=M,A=M);return Gn&&sg(p,T),_}for(M=n(p,M);T<b.length;T++)C=f(M,p,T,b[T],x),C!==null&&(e&&C.alternate!==null&&M.delete(C.key===null?T:C.key),v=o(C,v,T),A===null?_=C:A.sibling=C,A=C);return e&&M.forEach(function(D){return t(p,D)}),Gn&&sg(p,T),_}function y(p,v,b,x){var _=zw(b);if(typeof _!="function")throw Error(vt(150));if(b=_.call(b),b==null)throw Error(vt(151));for(var A=_=null,M=v,T=v=0,C=null,E=b.next();M!==null&&!E.done;T++,E=b.next()){M.index>T?(C=M,M=null):C=M.sibling;var D=h(p,M,E.value,x);if(D===null){M===null&&(M=C);break}e&&M&&D.alternate===null&&t(p,M),v=o(D,v,T),A===null?_=D:A.sibling=D,A=D,M=C}if(E.done)return r(p,M),Gn&&sg(p,T),_;if(M===null){for(;!E.done;T++,E=b.next())E=c(p,E.value,x),E!==null&&(v=o(E,v,T),A===null?_=E:A.sibling=E,A=E);return Gn&&sg(p,T),_}for(M=n(p,M);!E.done;T++,E=b.next())E=f(M,p,T,E.value,x),E!==null&&(e&&E.alternate!==null&&M.delete(E.key===null?T:E.key),v=o(E,v,T),A===null?_=E:A.sibling=E,A=E);return e&&M.forEach(function(I){return t(p,I)}),Gn&&sg(p,T),_}function m(p,v,b,x){if(typeof b=="object"&&b!==null&&b.type===ib&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case cT:e:{for(var _=b.key,A=v;A!==null;){if(A.key===_){if(_=b.type,_===ib){if(A.tag===7){r(p,A.sibling),v=i(A,b.props.children),v.return=p,p=v;break e}}else if(A.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Wf&&b6(_)===A.type){r(p,A.sibling),v=i(A,b.props),v.ref=Gw(p,A,b),v.return=p,p=v;break e}r(p,A);break}else t(p,A);A=A.sibling}b.type===ib?(v=Hg(b.props.children,p.mode,x,b.key),v.return=p,p=v):(x=d2(b.type,b.key,b.props,null,p.mode,x),x.ref=Gw(p,v,b),x.return=p,p=x)}return a(p);case nb:e:{for(A=b.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(p,v.sibling),v=i(v,b.children||[]),v.return=p,p=v;break e}else{r(p,v);break}else t(p,v);v=v.sibling}v=k3(b,p.mode,x),v.return=p,p=v}return a(p);case Wf:return A=b._init,m(p,v,A(b._payload),x)}if(q_(b))return g(p,v,b,x);if(zw(b))return y(p,v,b,x);wT(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(p,v.sibling),v=i(v,b),v.return=p,p=v):(r(p,v),v=N3(b,p.mode,x),v.return=p,p=v),a(p)):r(p,v)}return m}var mx=m$(!0),g$=m$(!1),iM={},Gc=Kp(iM),rA=Kp(iM),nA=Kp(iM);function Eg(e){if(e===iM)throw Error(vt(174));return e}function s4(e,t){switch(Dn(nA,t),Dn(rA,e),Dn(Gc,iM),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sk(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sk(t,e)}Fn(Gc),Dn(Gc,t)}function gx(){Fn(Gc),Fn(rA),Fn(nA)}function v$(e){Eg(nA.current);var t=Eg(Gc.current),r=Sk(t,e.type);t!==r&&(Dn(rA,e),Dn(Gc,r))}function l4(e){rA.current===e&&(Fn(Gc),Fn(rA))}var Jn=Kp(0);function aD(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var D3=[];function u4(){for(var e=0;e<D3.length;e++)D3[e]._workInProgressVersionPrimary=null;D3.length=0}var a2=zh.ReactCurrentDispatcher,O3=zh.ReactCurrentBatchConfig,s0=0,ri=null,to=null,_o=null,sD=!1,pS=!1,iA=0,Xge=0;function Wo(){throw Error(vt(321))}function c4(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ju(e[r],t[r]))return!1;return!0}function d4(e,t,r,n,i,o){if(s0=o,ri=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,a2.current=e===null||e.memoizedState===null?Qge:Zge,e=r(n,i),pS){o=0;do{if(pS=!1,iA=0,25<=o)throw Error(vt(301));o+=1,_o=to=null,t.updateQueue=null,a2.current=$ge,e=r(n,i)}while(pS)}if(a2.current=lD,t=to!==null&&to.next!==null,s0=0,_o=to=ri=null,sD=!1,t)throw Error(vt(300));return e}function h4(){var e=iA!==0;return iA=0,e}function Dc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _o===null?ri.memoizedState=_o=e:_o=_o.next=e,_o}function Ql(){if(to===null){var e=ri.alternate;e=e!==null?e.memoizedState:null}else e=to.next;var t=_o===null?ri.memoizedState:_o.next;if(t!==null)_o=t,to=e;else{if(e===null)throw Error(vt(310));to=e,e={memoizedState:to.memoizedState,baseState:to.baseState,baseQueue:to.baseQueue,queue:to.queue,next:null},_o===null?ri.memoizedState=_o=e:_o=_o.next=e}return _o}function oA(e,t){return typeof t=="function"?t(e):t}function R3(e){var t=Ql(),r=t.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=e;var n=to,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,l=null,u=o;do{var d=u.lane;if((s0&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=c,a=n):l=l.next=c,ri.lanes|=d,l0|=d}u=u.next}while(u!==null&&u!==o);l===null?a=n:l.next=s,ju(n,t.memoizedState)||(vs=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,ri.lanes|=o,l0|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function I3(e){var t=Ql(),r=t.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ju(o,t.memoizedState)||(vs=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function y$(){}function b$(e,t){var r=ri,n=Ql(),i=t(),o=!ju(n.memoizedState,i);if(o&&(n.memoizedState=i,vs=!0),n=n.queue,f4(_$.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||_o!==null&&_o.memoizedState.tag&1){if(r.flags|=2048,aA(9,w$.bind(null,r,n,i,t),void 0,null),Co===null)throw Error(vt(349));s0&30||x$(r,t,i)}return i}function x$(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ri.updateQueue,t===null?(t={lastEffect:null,stores:null},ri.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function w$(e,t,r,n){t.value=r,t.getSnapshot=n,S$(t)&&A$(e)}function _$(e,t,r){return r(function(){S$(t)&&A$(e)})}function S$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ju(e,r)}catch{return!0}}function A$(e){var t=Th(e,1);t!==null&&Fu(t,e,1,-1)}function x6(e){var t=Dc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oA,lastRenderedState:e},t.queue=e,e=e.dispatch=Jge.bind(null,ri,e),[t.memoizedState,e]}function aA(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ri.updateQueue,t===null?(t={lastEffect:null,stores:null},ri.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function M$(){return Ql().memoizedState}function s2(e,t,r,n){var i=Dc();ri.flags|=e,i.memoizedState=aA(1|t,r,void 0,n===void 0?null:n)}function rR(e,t,r,n){var i=Ql();n=n===void 0?null:n;var o=void 0;if(to!==null){var a=to.memoizedState;if(o=a.destroy,n!==null&&c4(n,a.deps)){i.memoizedState=aA(t,r,o,n);return}}ri.flags|=e,i.memoizedState=aA(1|t,r,o,n)}function w6(e,t){return s2(8390656,8,e,t)}function f4(e,t){return rR(2048,8,e,t)}function C$(e,t){return rR(4,2,e,t)}function T$(e,t){return rR(4,4,e,t)}function E$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function P$(e,t,r){return r=r!=null?r.concat([e]):null,rR(4,4,E$.bind(null,t,e),r)}function p4(){}function D$(e,t){var r=Ql();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&c4(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function O$(e,t){var r=Ql();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&c4(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function R$(e,t,r){return s0&21?(ju(r,t)||(r=BZ(),ri.lanes|=r,l0|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vs=!0),e.memoizedState=r)}function Yge(e,t){var r=yn;yn=r!==0&&4>r?r:4,e(!0);var n=O3.transition;O3.transition={};try{e(!1),t()}finally{yn=r,O3.transition=n}}function I$(){return Ql().memoizedState}function Kge(e,t,r){var n=wp(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},L$(e))B$(t,r);else if(r=d$(e,t,r,n),r!==null){var i=Va();Fu(r,e,n,i),N$(r,t,n)}}function Jge(e,t,r){var n=wp(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(L$(e))B$(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,ju(s,a)){var l=t.interleaved;l===null?(i.next=i,o4(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=d$(e,t,i,n),r!==null&&(i=Va(),Fu(r,e,n,i),N$(r,t,n))}}function L$(e){var t=e.alternate;return e===ri||t!==null&&t===ri}function B$(e,t){pS=sD=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function N$(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,WU(e,r)}}var lD={readContext:Jl,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useInsertionEffect:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useDeferredValue:Wo,useTransition:Wo,useMutableSource:Wo,useSyncExternalStore:Wo,useId:Wo,unstable_isNewReconciler:!1},Qge={readContext:Jl,useCallback:function(e,t){return Dc().memoizedState=[e,t===void 0?null:t],e},useContext:Jl,useEffect:w6,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,s2(4194308,4,E$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return s2(4194308,4,e,t)},useInsertionEffect:function(e,t){return s2(4,2,e,t)},useMemo:function(e,t){var r=Dc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Dc();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Kge.bind(null,ri,e),[n.memoizedState,e]},useRef:function(e){var t=Dc();return e={current:e},t.memoizedState=e},useState:x6,useDebugValue:p4,useDeferredValue:function(e){return Dc().memoizedState=e},useTransition:function(){var e=x6(!1),t=e[0];return e=Yge.bind(null,e[1]),Dc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ri,i=Dc();if(Gn){if(r===void 0)throw Error(vt(407));r=r()}else{if(r=t(),Co===null)throw Error(vt(349));s0&30||x$(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,w6(_$.bind(null,n,o,e),[e]),n.flags|=2048,aA(9,w$.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Dc(),t=Co.identifierPrefix;if(Gn){var r=lh,n=sh;r=(n&~(1<<32-ku(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=iA++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Xge++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zge={readContext:Jl,useCallback:D$,useContext:Jl,useEffect:f4,useImperativeHandle:P$,useInsertionEffect:C$,useLayoutEffect:T$,useMemo:O$,useReducer:R3,useRef:M$,useState:function(){return R3(oA)},useDebugValue:p4,useDeferredValue:function(e){var t=Ql();return R$(t,to.memoizedState,e)},useTransition:function(){var e=R3(oA)[0],t=Ql().memoizedState;return[e,t]},useMutableSource:y$,useSyncExternalStore:b$,useId:I$,unstable_isNewReconciler:!1},$ge={readContext:Jl,useCallback:D$,useContext:Jl,useEffect:f4,useImperativeHandle:P$,useInsertionEffect:C$,useLayoutEffect:T$,useMemo:O$,useReducer:I3,useRef:M$,useState:function(){return I3(oA)},useDebugValue:p4,useDeferredValue:function(e){var t=Ql();return to===null?t.memoizedState=e:R$(t,to.memoizedState,e)},useTransition:function(){var e=I3(oA)[0],t=Ql().memoizedState;return[e,t]},useMutableSource:y$,useSyncExternalStore:b$,useId:I$,unstable_isNewReconciler:!1};function vx(e,t){try{var r="",n=t;do r+=Tme(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function L3(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function qk(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var e0e=typeof WeakMap=="function"?WeakMap:Map;function k$(e,t,r){r=mh(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){cD||(cD=!0,rF=n),qk(e,t)},r}function F$(e,t,r){r=mh(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){qk(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){qk(e,t),typeof n!="function"&&(xp===null?xp=new Set([this]):xp.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function _6(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new e0e;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=p0e.bind(null,e,t,r),t.then(e,e))}function S6(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function A6(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=mh(-1,1),t.tag=2,bp(r,t,1))),r.lanes|=1),e)}var t0e=zh.ReactCurrentOwner,vs=!1;function Pa(e,t,r,n){t.child=e===null?g$(t,null,r,n):mx(t,e.child,r,n)}function M6(e,t,r,n,i){r=r.render;var o=t.ref;return zb(t,i),n=d4(e,t,r,n,o,i),r=h4(),e!==null&&!vs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Eh(e,t,i)):(Gn&&r&&$U(t),t.flags|=1,Pa(e,t,n,i),t.child)}function C6(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!_4(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,z$(e,t,o,n,i)):(e=d2(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:ZS,r(a,n)&&e.ref===t.ref)return Eh(e,t,i)}return t.flags|=1,e=_p(o,n),e.ref=t.ref,e.return=t,t.child=e}function z$(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(ZS(o,n)&&e.ref===t.ref)if(vs=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(vs=!0);else return t.lanes=e.lanes,Eh(e,t,i)}return Xk(e,t,r,n,i)}function U$(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dn(pb,Gs),Gs|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Dn(pb,Gs),Gs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Dn(pb,Gs),Gs|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Dn(pb,Gs),Gs|=n;return Pa(e,t,i,r),t.child}function V$(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Xk(e,t,r,n,i){var o=Ss(r)?o0:la.current;return o=fx(t,o),zb(t,i),r=d4(e,t,r,n,o,i),n=h4(),e!==null&&!vs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Eh(e,t,i)):(Gn&&n&&$U(t),t.flags|=1,Pa(e,t,r,i),t.child)}function T6(e,t,r,n,i){if(Ss(r)){var o=!0;eD(t)}else o=!1;if(zb(t,i),t.stateNode===null)l2(e,t),p$(t,r,n),Wk(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Jl(u):(u=Ss(r)?o0:la.current,u=fx(t,u));var d=r.getDerivedStateFromProps,c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||l!==u)&&y6(t,a,n,u),qf=!1;var h=t.memoizedState;a.state=h,oD(t,n,a,i),l=t.memoizedState,s!==n||h!==l||_s.current||qf?(typeof d=="function"&&(Gk(t,r,d,n),l=t.memoizedState),(s=qf||v6(t,r,s,n,h,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,h$(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:_u(t.type,s),a.props=u,c=t.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Jl(l):(l=Ss(r)?o0:la.current,l=fx(t,l));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==c||h!==l)&&y6(t,a,n,l),qf=!1,h=t.memoizedState,a.state=h,oD(t,n,a,i);var g=t.memoizedState;s!==c||h!==g||_s.current||qf?(typeof f=="function"&&(Gk(t,r,f,n),g=t.memoizedState),(u=qf||v6(t,r,u,n,h,g,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Yk(e,t,r,n,o,i)}function Yk(e,t,r,n,i,o){V$(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&h6(t,r,!1),Eh(e,t,o);n=t.stateNode,t0e.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=mx(t,e.child,null,o),t.child=mx(t,null,s,o)):Pa(e,t,s,o),t.memoizedState=n.state,i&&h6(t,r,!0),t.child}function j$(e){var t=e.stateNode;t.pendingContext?d6(e,t.pendingContext,t.pendingContext!==t.context):t.context&&d6(e,t.context,!1),s4(e,t.containerInfo)}function E6(e,t,r,n,i){return px(),t4(i),t.flags|=256,Pa(e,t,r,n),t.child}var Kk={dehydrated:null,treeContext:null,retryLane:0};function Jk(e){return{baseLanes:e,cachePool:null,transitions:null}}function H$(e,t,r){var n=t.pendingProps,i=Jn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Dn(Jn,i&1),e===null)return jk(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=oR(a,n,0,null),e=Hg(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Jk(r),t.memoizedState=Kk,e):m4(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return r0e(e,t,a,n,s,i,r);if(o){o=n.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=_p(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=_p(s,o):(o=Hg(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?Jk(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=Kk,n}return o=e.child,e=o.sibling,n=_p(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function m4(e,t){return t=oR({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _T(e,t,r,n){return n!==null&&t4(n),mx(t,e.child,null,r),e=m4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function r0e(e,t,r,n,i,o,a){if(r)return t.flags&256?(t.flags&=-257,n=L3(Error(vt(422))),_T(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=oR({mode:"visible",children:n.children},i,0,null),o=Hg(o,i,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&mx(t,e.child,null,a),t.child.memoizedState=Jk(a),t.memoizedState=Kk,o);if(!(t.mode&1))return _T(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(vt(419)),n=L3(o,n,void 0),_T(e,t,a,n)}if(s=(a&e.childLanes)!==0,vs||s){if(n=Co,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Th(e,i),Fu(n,e,i,-1))}return w4(),n=L3(Error(vt(421))),_T(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=m0e.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ks=yp(i.nextSibling),tl=t,Gn=!0,Mu=null,e!==null&&(kl[Fl++]=sh,kl[Fl++]=lh,kl[Fl++]=a0,sh=e.id,lh=e.overflow,a0=t),t=m4(t,n.children),t.flags|=4096,t)}function P6(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Hk(e.return,t,r)}function B3(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function G$(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Pa(e,t,n.children,r),n=Jn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&P6(e,r,t);else if(e.tag===19)P6(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Dn(Jn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&aD(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),B3(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&aD(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}B3(t,!0,r,null,o);break;case"together":B3(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function l2(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Eh(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),l0|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(vt(153));if(t.child!==null){for(e=t.child,r=_p(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_p(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function n0e(e,t,r){switch(t.tag){case 3:j$(t),px();break;case 5:v$(t);break;case 1:Ss(t.type)&&eD(t);break;case 4:s4(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Dn(nD,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Dn(Jn,Jn.current&1),t.flags|=128,null):r&t.child.childLanes?H$(e,t,r):(Dn(Jn,Jn.current&1),e=Eh(e,t,r),e!==null?e.sibling:null);Dn(Jn,Jn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return G$(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Dn(Jn,Jn.current),n)break;return null;case 22:case 23:return t.lanes=0,U$(e,t,r)}return Eh(e,t,r)}var W$,Qk,q$,X$;W$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Qk=function(){};q$=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Eg(Gc.current);var o=null;switch(r){case"input":i=bk(e,i),n=bk(e,n),o=[];break;case"select":i=ni({},i,{value:void 0}),n=ni({},n,{value:void 0}),o=[];break;case"textarea":i=_k(e,i),n=_k(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Z2)}Ak(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(WS.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(WS.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&In("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};X$=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ww(e,t){if(!Gn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function i0e(e,t,r){var n=t.pendingProps;switch(e4(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:return Ss(t.type)&&$2(),qo(t),null;case 3:return n=t.stateNode,gx(),Fn(_s),Fn(la),u4(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(xT(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mu!==null&&(oF(Mu),Mu=null))),Qk(e,t),qo(t),null;case 5:l4(t);var i=Eg(nA.current);if(r=t.type,e!==null&&t.stateNode!=null)q$(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(vt(166));return qo(t),null}if(e=Eg(Gc.current),xT(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Nc]=t,n[tA]=o,e=(t.mode&1)!==0,r){case"dialog":In("cancel",n),In("close",n);break;case"iframe":case"object":case"embed":In("load",n);break;case"video":case"audio":for(i=0;i<Y_.length;i++)In(Y_[i],n);break;case"source":In("error",n);break;case"img":case"image":case"link":In("error",n),In("load",n);break;case"details":In("toggle",n);break;case"input":FG(n,o),In("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},In("invalid",n);break;case"textarea":UG(n,o),In("invalid",n)}Ak(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&bT(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&bT(n.textContent,s,e),i=["children",""+s]):WS.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&In("scroll",n)}switch(r){case"input":dT(n),zG(n,o,!0);break;case"textarea":dT(n),VG(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Z2)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xZ(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Nc]=t,e[tA]=n,W$(e,t,!1,!1),t.stateNode=e;e:{switch(a=Mk(r,n),r){case"dialog":In("cancel",e),In("close",e),i=n;break;case"iframe":case"object":case"embed":In("load",e),i=n;break;case"video":case"audio":for(i=0;i<Y_.length;i++)In(Y_[i],e);i=n;break;case"source":In("error",e),i=n;break;case"img":case"image":case"link":In("error",e),In("load",e),i=n;break;case"details":In("toggle",e),i=n;break;case"input":FG(e,n),i=bk(e,n),In("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ni({},n,{value:void 0}),In("invalid",e);break;case"textarea":UG(e,n),i=_k(e,n),In("invalid",e);break;default:i=n}Ak(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?SZ(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wZ(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&qS(e,l):typeof l=="number"&&qS(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(WS.hasOwnProperty(o)?l!=null&&o==="onScroll"&&In("scroll",e):l!=null&&zU(e,o,l,a))}switch(r){case"input":dT(e),zG(e,n,!1);break;case"textarea":dT(e),VG(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bp(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Bb(e,!!n.multiple,o,!1):n.defaultValue!=null&&Bb(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Z2)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&t.stateNode!=null)X$(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(vt(166));if(r=Eg(nA.current),Eg(Gc.current),xT(t)){if(n=t.stateNode,r=t.memoizedProps,n[Nc]=t,(o=n.nodeValue!==r)&&(e=tl,e!==null))switch(e.tag){case 3:bT(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bT(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Nc]=t,t.stateNode=n}return qo(t),null;case 13:if(Fn(Jn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gn&&Ks!==null&&t.mode&1&&!(t.flags&128))c$(),px(),t.flags|=98560,o=!1;else if(o=xT(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(vt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(vt(317));o[Nc]=t}else px(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qo(t),o=!1}else Mu!==null&&(oF(Mu),Mu=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Jn.current&1?no===0&&(no=3):w4())),t.updateQueue!==null&&(t.flags|=4),qo(t),null);case 4:return gx(),Qk(e,t),e===null&&$S(t.stateNode.containerInfo),qo(t),null;case 10:return i4(t.type._context),qo(t),null;case 17:return Ss(t.type)&&$2(),qo(t),null;case 19:if(Fn(Jn),o=t.memoizedState,o===null)return qo(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Ww(o,!1);else{if(no!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=aD(e),a!==null){for(t.flags|=128,Ww(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Dn(Jn,Jn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ti()>yx&&(t.flags|=128,n=!0,Ww(o,!1),t.lanes=4194304)}else{if(!n)if(e=aD(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ww(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Gn)return qo(t),null}else 2*Ti()-o.renderingStartTime>yx&&r!==1073741824&&(t.flags|=128,n=!0,Ww(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ti(),t.sibling=null,r=Jn.current,Dn(Jn,n?r&1|2:r&1),t):(qo(t),null);case 22:case 23:return x4(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Gs&1073741824&&(qo(t),t.subtreeFlags&6&&(t.flags|=8192)):qo(t),null;case 24:return null;case 25:return null}throw Error(vt(156,t.tag))}function o0e(e,t){switch(e4(t),t.tag){case 1:return Ss(t.type)&&$2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gx(),Fn(_s),Fn(la),u4(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return l4(t),null;case 13:if(Fn(Jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(vt(340));px()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fn(Jn),null;case 4:return gx(),null;case 10:return i4(t.type._context),null;case 22:case 23:return x4(),null;case 24:return null;default:return null}}var ST=!1,$o=!1,a0e=typeof WeakSet=="function"?WeakSet:Set,zt=null;function fb(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){hi(e,t,n)}else r.current=null}function Zk(e,t,r){try{r()}catch(n){hi(e,t,n)}}var D6=!1;function s0e(e,t){if(Bk=K2,e=QZ(),ZU(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,l=-1,u=0,d=0,c=e,h=null;t:for(;;){for(var f;c!==r||i!==0&&c.nodeType!==3||(s=a+i),c!==o||n!==0&&c.nodeType!==3||(l=a+n),c.nodeType===3&&(a+=c.nodeValue.length),(f=c.firstChild)!==null;)h=c,c=f;for(;;){if(c===e)break t;if(h===r&&++u===i&&(s=a),h===o&&++d===n&&(l=a),(f=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=f}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nk={focusedElem:e,selectionRange:r},K2=!1,zt=t;zt!==null;)if(t=zt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,zt=e;else for(;zt!==null;){t=zt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,m=g.memoizedState,p=t.stateNode,v=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:_u(t.type,y),m);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vt(163))}}catch(x){hi(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,zt=e;break}zt=t.return}return g=D6,D6=!1,g}function mS(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Zk(t,r,o)}i=i.next}while(i!==n)}}function nR(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function $k(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Y$(e){var t=e.alternate;t!==null&&(e.alternate=null,Y$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nc],delete t[tA],delete t[zk],delete t[Hge],delete t[Gge])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function K$(e){return e.tag===5||e.tag===3||e.tag===4}function O6(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||K$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function eF(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Z2));else if(n!==4&&(e=e.child,e!==null))for(eF(e,t,r),e=e.sibling;e!==null;)eF(e,t,r),e=e.sibling}function tF(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(tF(e,t,r),e=e.sibling;e!==null;)tF(e,t,r),e=e.sibling}var Bo=null,Au=!1;function gf(e,t,r){for(r=r.child;r!==null;)J$(e,t,r),r=r.sibling}function J$(e,t,r){if(Hc&&typeof Hc.onCommitFiberUnmount=="function")try{Hc.onCommitFiberUnmount(KO,r)}catch{}switch(r.tag){case 5:$o||fb(r,t);case 6:var n=Bo,i=Au;Bo=null,gf(e,t,r),Bo=n,Au=i,Bo!==null&&(Au?(e=Bo,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Bo.removeChild(r.stateNode));break;case 18:Bo!==null&&(Au?(e=Bo,r=r.stateNode,e.nodeType===8?E3(e.parentNode,r):e.nodeType===1&&E3(e,r),JS(e)):E3(Bo,r.stateNode));break;case 4:n=Bo,i=Au,Bo=r.stateNode.containerInfo,Au=!0,gf(e,t,r),Bo=n,Au=i;break;case 0:case 11:case 14:case 15:if(!$o&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Zk(r,t,a),i=i.next}while(i!==n)}gf(e,t,r);break;case 1:if(!$o&&(fb(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){hi(r,t,s)}gf(e,t,r);break;case 21:gf(e,t,r);break;case 22:r.mode&1?($o=(n=$o)||r.memoizedState!==null,gf(e,t,r),$o=n):gf(e,t,r);break;default:gf(e,t,r)}}function R6(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new a0e),t.forEach(function(n){var i=g0e.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function su(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Bo=s.stateNode,Au=!1;break e;case 3:Bo=s.stateNode.containerInfo,Au=!0;break e;case 4:Bo=s.stateNode.containerInfo,Au=!0;break e}s=s.return}if(Bo===null)throw Error(vt(160));J$(o,a,i),Bo=null,Au=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){hi(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Q$(t,e),t=t.sibling}function Q$(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(su(t,e),gc(e),n&4){try{mS(3,e,e.return),nR(3,e)}catch(y){hi(e,e.return,y)}try{mS(5,e,e.return)}catch(y){hi(e,e.return,y)}}break;case 1:su(t,e),gc(e),n&512&&r!==null&&fb(r,r.return);break;case 5:if(su(t,e),gc(e),n&512&&r!==null&&fb(r,r.return),e.flags&32){var i=e.stateNode;try{qS(i,"")}catch(y){hi(e,e.return,y)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&yZ(i,o),Mk(s,a);var u=Mk(s,o);for(a=0;a<l.length;a+=2){var d=l[a],c=l[a+1];d==="style"?SZ(i,c):d==="dangerouslySetInnerHTML"?wZ(i,c):d==="children"?qS(i,c):zU(i,d,c,u)}switch(s){case"input":xk(i,o);break;case"textarea":bZ(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Bb(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Bb(i,!!o.multiple,o.defaultValue,!0):Bb(i,!!o.multiple,o.multiple?[]:"",!1))}i[tA]=o}catch(y){hi(e,e.return,y)}}break;case 6:if(su(t,e),gc(e),n&4){if(e.stateNode===null)throw Error(vt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){hi(e,e.return,y)}}break;case 3:if(su(t,e),gc(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{JS(t.containerInfo)}catch(y){hi(e,e.return,y)}break;case 4:su(t,e),gc(e);break;case 13:su(t,e),gc(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(y4=Ti())),n&4&&R6(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?($o=(u=$o)||d,su(t,e),$o=u):su(t,e),gc(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(zt=e,d=e.child;d!==null;){for(c=zt=d;zt!==null;){switch(h=zt,f=h.child,h.tag){case 0:case 11:case 14:case 15:mS(4,h,h.return);break;case 1:fb(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){hi(n,r,y)}}break;case 5:fb(h,h.return);break;case 22:if(h.memoizedState!==null){L6(c);continue}}f!==null?(f.return=h,zt=f):L6(c)}d=d.sibling}e:for(d=null,c=e;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=c.stateNode,l=c.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=_Z("display",a))}catch(y){hi(e,e.return,y)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(y){hi(e,e.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:su(t,e),gc(e),n&4&&R6(e);break;case 21:break;default:su(t,e),gc(e)}}function gc(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(K$(r)){var n=r;break e}r=r.return}throw Error(vt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(qS(i,""),n.flags&=-33);var o=O6(e);tF(e,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=O6(e);eF(e,s,a);break;default:throw Error(vt(161))}}catch(l){hi(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function l0e(e,t,r){zt=e,Z$(e)}function Z$(e,t,r){for(var n=(e.mode&1)!==0;zt!==null;){var i=zt,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||ST;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||$o;s=ST;var u=$o;if(ST=a,($o=l)&&!u)for(zt=i;zt!==null;)a=zt,l=a.child,a.tag===22&&a.memoizedState!==null?B6(i):l!==null?(l.return=a,zt=l):B6(i);for(;o!==null;)zt=o,Z$(o),o=o.sibling;zt=i,ST=s,$o=u}I6(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,zt=o):I6(e)}}function I6(e){for(;zt!==null;){var t=zt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$o||nR(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!$o)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:_u(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&g6(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}g6(t,a,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&JS(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vt(163))}$o||t.flags&512&&$k(t)}catch(h){hi(t,t.return,h)}}if(t===e){zt=null;break}if(r=t.sibling,r!==null){r.return=t.return,zt=r;break}zt=t.return}}function L6(e){for(;zt!==null;){var t=zt;if(t===e){zt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,zt=r;break}zt=t.return}}function B6(e){for(;zt!==null;){var t=zt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nR(4,t)}catch(l){hi(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){hi(t,i,l)}}var o=t.return;try{$k(t)}catch(l){hi(t,o,l)}break;case 5:var a=t.return;try{$k(t)}catch(l){hi(t,a,l)}}}catch(l){hi(t,t.return,l)}if(t===e){zt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,zt=s;break}zt=t.return}}var u0e=Math.ceil,uD=zh.ReactCurrentDispatcher,g4=zh.ReactCurrentOwner,ql=zh.ReactCurrentBatchConfig,$r=0,Co=null,Ui=null,Fo=0,Gs=0,pb=Kp(0),no=0,sA=null,l0=0,iR=0,v4=0,gS=null,us=null,y4=0,yx=1/0,Jd=null,cD=!1,rF=null,xp=null,AT=!1,op=null,dD=0,vS=0,nF=null,u2=-1,c2=0;function Va(){return $r&6?Ti():u2!==-1?u2:u2=Ti()}function wp(e){return e.mode&1?$r&2&&Fo!==0?Fo&-Fo:qge.transition!==null?(c2===0&&(c2=BZ()),c2):(e=yn,e!==0||(e=window.event,e=e===void 0?16:jZ(e.type)),e):1}function Fu(e,t,r,n){if(50<vS)throw vS=0,nF=null,Error(vt(185));tM(e,r,n),(!($r&2)||e!==Co)&&(e===Co&&(!($r&2)&&(iR|=r),no===4&&Zf(e,Fo)),As(e,n),r===1&&$r===0&&!(t.mode&1)&&(yx=Ti()+500,eR&&Jp()))}function As(e,t){var r=e.callbackNode;qme(e,t);var n=Y2(e,e===Co?Fo:0);if(n===0)r!==null&&GG(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&GG(r),t===1)e.tag===0?Wge(N6.bind(null,e)):s$(N6.bind(null,e)),Vge(function(){!($r&6)&&Jp()}),r=null;else{switch(NZ(n)){case 1:r=GU;break;case 4:r=IZ;break;case 16:r=X2;break;case 536870912:r=LZ;break;default:r=X2}r=aee(r,$$.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function $$(e,t){if(u2=-1,c2=0,$r&6)throw Error(vt(327));var r=e.callbackNode;if(Ub()&&e.callbackNode!==r)return null;var n=Y2(e,e===Co?Fo:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=hD(e,n);else{t=n;var i=$r;$r|=2;var o=tee();(Co!==e||Fo!==t)&&(Jd=null,yx=Ti()+500,jg(e,t));do try{h0e();break}catch(s){eee(e,s)}while(!0);n4(),uD.current=o,$r=i,Ui!==null?t=0:(Co=null,Fo=0,t=no)}if(t!==0){if(t===2&&(i=Dk(e),i!==0&&(n=i,t=iF(e,i))),t===1)throw r=sA,jg(e,0),Zf(e,n),As(e,Ti()),r;if(t===6)Zf(e,n);else{if(i=e.current.alternate,!(n&30)&&!c0e(i)&&(t=hD(e,n),t===2&&(o=Dk(e),o!==0&&(n=o,t=iF(e,o))),t===1))throw r=sA,jg(e,0),Zf(e,n),As(e,Ti()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(vt(345));case 2:lg(e,us,Jd);break;case 3:if(Zf(e,n),(n&130023424)===n&&(t=y4+500-Ti(),10<t)){if(Y2(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Va(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Fk(lg.bind(null,e,us,Jd),t);break}lg(e,us,Jd);break;case 4:if(Zf(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-ku(n);o=1<<a,a=t[a],a>i&&(i=a),n&=~o}if(n=i,n=Ti()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*u0e(n/1960))-n,10<n){e.timeoutHandle=Fk(lg.bind(null,e,us,Jd),n);break}lg(e,us,Jd);break;case 5:lg(e,us,Jd);break;default:throw Error(vt(329))}}}return As(e,Ti()),e.callbackNode===r?$$.bind(null,e):null}function iF(e,t){var r=gS;return e.current.memoizedState.isDehydrated&&(jg(e,t).flags|=256),e=hD(e,t),e!==2&&(t=us,us=r,t!==null&&oF(t)),e}function oF(e){us===null?us=e:us.push.apply(us,e)}function c0e(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!ju(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zf(e,t){for(t&=~v4,t&=~iR,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ku(t),n=1<<r;e[r]=-1,t&=~n}}function N6(e){if($r&6)throw Error(vt(327));Ub();var t=Y2(e,0);if(!(t&1))return As(e,Ti()),null;var r=hD(e,t);if(e.tag!==0&&r===2){var n=Dk(e);n!==0&&(t=n,r=iF(e,n))}if(r===1)throw r=sA,jg(e,0),Zf(e,t),As(e,Ti()),r;if(r===6)throw Error(vt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lg(e,us,Jd),As(e,Ti()),null}function b4(e,t){var r=$r;$r|=1;try{return e(t)}finally{$r=r,$r===0&&(yx=Ti()+500,eR&&Jp())}}function u0(e){op!==null&&op.tag===0&&!($r&6)&&Ub();var t=$r;$r|=1;var r=ql.transition,n=yn;try{if(ql.transition=null,yn=1,e)return e()}finally{yn=n,ql.transition=r,$r=t,!($r&6)&&Jp()}}function x4(){Gs=pb.current,Fn(pb)}function jg(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Uge(r)),Ui!==null)for(r=Ui.return;r!==null;){var n=r;switch(e4(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$2();break;case 3:gx(),Fn(_s),Fn(la),u4();break;case 5:l4(n);break;case 4:gx();break;case 13:Fn(Jn);break;case 19:Fn(Jn);break;case 10:i4(n.type._context);break;case 22:case 23:x4()}r=r.return}if(Co=e,Ui=e=_p(e.current,null),Fo=Gs=t,no=0,sA=null,v4=iR=l0=0,us=gS=null,Tg!==null){for(t=0;t<Tg.length;t++)if(r=Tg[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}Tg=null}return e}function eee(e,t){do{var r=Ui;try{if(n4(),a2.current=lD,sD){for(var n=ri.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}sD=!1}if(s0=0,_o=to=ri=null,pS=!1,iA=0,g4.current=null,r===null||r.return===null){no=1,sA=t,Ui=null;break}e:{var o=e,a=r.return,s=r,l=t;if(t=Fo,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=S6(a);if(f!==null){f.flags&=-257,A6(f,a,s,o,t),f.mode&1&&_6(o,u,t),t=f,l=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(l),t.updateQueue=y}else g.add(l);break e}else{if(!(t&1)){_6(o,u,t),w4();break e}l=Error(vt(426))}}else if(Gn&&s.mode&1){var m=S6(a);if(m!==null){!(m.flags&65536)&&(m.flags|=256),A6(m,a,s,o,t),t4(vx(l,s));break e}}o=l=vx(l,s),no!==4&&(no=2),gS===null?gS=[o]:gS.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=k$(o,l,t);m6(o,p);break e;case 1:s=l;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(xp===null||!xp.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=F$(o,s,t);m6(o,x);break e}}o=o.return}while(o!==null)}nee(r)}catch(_){t=_,Ui===r&&r!==null&&(Ui=r=r.return);continue}break}while(!0)}function tee(){var e=uD.current;return uD.current=lD,e===null?lD:e}function w4(){(no===0||no===3||no===2)&&(no=4),Co===null||!(l0&268435455)&&!(iR&268435455)||Zf(Co,Fo)}function hD(e,t){var r=$r;$r|=2;var n=tee();(Co!==e||Fo!==t)&&(Jd=null,jg(e,t));do try{d0e();break}catch(i){eee(e,i)}while(!0);if(n4(),$r=r,uD.current=n,Ui!==null)throw Error(vt(261));return Co=null,Fo=0,no}function d0e(){for(;Ui!==null;)ree(Ui)}function h0e(){for(;Ui!==null&&!kme();)ree(Ui)}function ree(e){var t=oee(e.alternate,e,Gs);e.memoizedProps=e.pendingProps,t===null?nee(e):Ui=t,g4.current=null}function nee(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=o0e(r,t),r!==null){r.flags&=32767,Ui=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{no=6,Ui=null;return}}else if(r=i0e(r,t,Gs),r!==null){Ui=r;return}if(t=t.sibling,t!==null){Ui=t;return}Ui=t=e}while(t!==null);no===0&&(no=5)}function lg(e,t,r){var n=yn,i=ql.transition;try{ql.transition=null,yn=1,f0e(e,t,r,n)}finally{ql.transition=i,yn=n}return null}function f0e(e,t,r,n){do Ub();while(op!==null);if($r&6)throw Error(vt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(vt(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Xme(e,o),e===Co&&(Ui=Co=null,Fo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||AT||(AT=!0,aee(X2,function(){return Ub(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=ql.transition,ql.transition=null;var a=yn;yn=1;var s=$r;$r|=4,g4.current=null,s0e(e,r),Q$(r,e),Ige(Nk),K2=!!Bk,Nk=Bk=null,e.current=r,l0e(r),Fme(),$r=s,yn=a,ql.transition=o}else e.current=r;if(AT&&(AT=!1,op=e,dD=i),o=e.pendingLanes,o===0&&(xp=null),Vme(r.stateNode),As(e,Ti()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(cD)throw cD=!1,e=rF,rF=null,e;return dD&1&&e.tag!==0&&Ub(),o=e.pendingLanes,o&1?e===nF?vS++:(vS=0,nF=e):vS=0,Jp(),null}function Ub(){if(op!==null){var e=NZ(dD),t=ql.transition,r=yn;try{if(ql.transition=null,yn=16>e?16:e,op===null)var n=!1;else{if(e=op,op=null,dD=0,$r&6)throw Error(vt(331));var i=$r;for($r|=4,zt=e.current;zt!==null;){var o=zt,a=o.child;if(zt.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(zt=u;zt!==null;){var d=zt;switch(d.tag){case 0:case 11:case 15:mS(8,d,o)}var c=d.child;if(c!==null)c.return=d,zt=c;else for(;zt!==null;){d=zt;var h=d.sibling,f=d.return;if(Y$(d),d===u){zt=null;break}if(h!==null){h.return=f,zt=h;break}zt=f}}}var g=o.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(y!==null)}}zt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,zt=a;else e:for(;zt!==null;){if(o=zt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:mS(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,zt=p;break e}zt=o.return}}var v=e.current;for(zt=v;zt!==null;){a=zt;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,zt=b;else e:for(a=v;zt!==null;){if(s=zt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:nR(9,s)}}catch(_){hi(s,s.return,_)}if(s===a){zt=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,zt=x;break e}zt=s.return}}if($r=i,Jp(),Hc&&typeof Hc.onPostCommitFiberRoot=="function")try{Hc.onPostCommitFiberRoot(KO,e)}catch{}n=!0}return n}finally{yn=r,ql.transition=t}}return!1}function k6(e,t,r){t=vx(r,t),t=k$(e,t,1),e=bp(e,t,1),t=Va(),e!==null&&(tM(e,1,t),As(e,t))}function hi(e,t,r){if(e.tag===3)k6(e,e,r);else for(;t!==null;){if(t.tag===3){k6(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xp===null||!xp.has(n))){e=vx(r,e),e=F$(t,e,1),t=bp(t,e,1),e=Va(),t!==null&&(tM(t,1,e),As(t,e));break}}t=t.return}}function p0e(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Va(),e.pingedLanes|=e.suspendedLanes&r,Co===e&&(Fo&r)===r&&(no===4||no===3&&(Fo&130023424)===Fo&&500>Ti()-y4?jg(e,0):v4|=r),As(e,t)}function iee(e,t){t===0&&(e.mode&1?(t=pT,pT<<=1,!(pT&130023424)&&(pT=4194304)):t=1);var r=Va();e=Th(e,t),e!==null&&(tM(e,t,r),As(e,r))}function m0e(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),iee(e,r)}function g0e(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(vt(314))}n!==null&&n.delete(t),iee(e,r)}var oee;oee=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||_s.current)vs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return vs=!1,n0e(e,t,r);vs=!!(e.flags&131072)}else vs=!1,Gn&&t.flags&1048576&&l$(t,rD,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;l2(e,t),e=t.pendingProps;var i=fx(t,la.current);zb(t,r),i=d4(null,t,n,e,i,r);var o=h4();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ss(n)?(o=!0,eD(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,a4(t),i.updater=tR,t.stateNode=i,i._reactInternals=t,Wk(t,n,e,r),t=Yk(null,t,n,!0,o,r)):(t.tag=0,Gn&&o&&$U(t),Pa(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(l2(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=y0e(n),e=_u(n,e),i){case 0:t=Xk(null,t,n,e,r);break e;case 1:t=T6(null,t,n,e,r);break e;case 11:t=M6(null,t,n,e,r);break e;case 14:t=C6(null,t,n,_u(n.type,e),r);break e}throw Error(vt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:_u(n,i),Xk(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:_u(n,i),T6(e,t,n,i,r);case 3:e:{if(j$(t),e===null)throw Error(vt(387));n=t.pendingProps,o=t.memoizedState,i=o.element,h$(e,t),oD(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=vx(Error(vt(423)),t),t=E6(e,t,n,r,i);break e}else if(n!==i){i=vx(Error(vt(424)),t),t=E6(e,t,n,r,i);break e}else for(Ks=yp(t.stateNode.containerInfo.firstChild),tl=t,Gn=!0,Mu=null,r=g$(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(px(),n===i){t=Eh(e,t,r);break e}Pa(e,t,n,r)}t=t.child}return t;case 5:return v$(t),e===null&&jk(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,kk(n,i)?a=null:o!==null&&kk(n,o)&&(t.flags|=32),V$(e,t),Pa(e,t,a,r),t.child;case 6:return e===null&&jk(t),null;case 13:return H$(e,t,r);case 4:return s4(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=mx(t,null,n,r):Pa(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:_u(n,i),M6(e,t,n,i,r);case 7:return Pa(e,t,t.pendingProps,r),t.child;case 8:return Pa(e,t,t.pendingProps.children,r),t.child;case 12:return Pa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Dn(nD,n._currentValue),n._currentValue=a,o!==null)if(ju(o.value,a)){if(o.children===i.children&&!_s.current){t=Eh(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=mh(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Hk(o.return,r,t),s.lanes|=r;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(vt(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),Hk(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Pa(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,zb(t,r),i=Jl(i),n=n(i),t.flags|=1,Pa(e,t,n,r),t.child;case 14:return n=t.type,i=_u(n,t.pendingProps),i=_u(n.type,i),C6(e,t,n,i,r);case 15:return z$(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:_u(n,i),l2(e,t),t.tag=1,Ss(n)?(e=!0,eD(t)):e=!1,zb(t,r),p$(t,n,i),Wk(t,n,i,r),Yk(null,t,n,!0,e,r);case 19:return G$(e,t,r);case 22:return U$(e,t,r)}throw Error(vt(156,t.tag))};function aee(e,t){return RZ(e,t)}function v0e(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(e,t,r,n){return new v0e(e,t,r,n)}function _4(e){return e=e.prototype,!(!e||!e.isReactComponent)}function y0e(e){if(typeof e=="function")return _4(e)?1:0;if(e!=null){if(e=e.$$typeof,e===VU)return 11;if(e===jU)return 14}return 2}function _p(e,t){var r=e.alternate;return r===null?(r=jl(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function d2(e,t,r,n,i,o){var a=2;if(n=e,typeof e=="function")_4(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ib:return Hg(r.children,i,o,t);case UU:a=8,i|=8;break;case mk:return e=jl(12,r,t,i|2),e.elementType=mk,e.lanes=o,e;case gk:return e=jl(13,r,t,i),e.elementType=gk,e.lanes=o,e;case vk:return e=jl(19,r,t,i),e.elementType=vk,e.lanes=o,e;case mZ:return oR(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fZ:a=10;break e;case pZ:a=9;break e;case VU:a=11;break e;case jU:a=14;break e;case Wf:a=16,n=null;break e}throw Error(vt(130,e==null?e:typeof e,""))}return t=jl(a,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Hg(e,t,r,n){return e=jl(7,e,n,t),e.lanes=r,e}function oR(e,t,r,n){return e=jl(22,e,n,t),e.elementType=mZ,e.lanes=r,e.stateNode={isHidden:!1},e}function N3(e,t,r){return e=jl(6,e,null,t),e.lanes=r,e}function k3(e,t,r){return t=jl(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function b0e(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=v3(0),this.expirationTimes=v3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=v3(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function S4(e,t,r,n,i,o,a,s,l){return e=new b0e(e,t,r,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=jl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},a4(o),e}function x0e(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nb,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function see(e){if(!e)return Np;e=e._reactInternals;e:{if(C0(e)!==e||e.tag!==1)throw Error(vt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ss(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(vt(171))}if(e.tag===1){var r=e.type;if(Ss(r))return a$(e,r,t)}return t}function lee(e,t,r,n,i,o,a,s,l){return e=S4(r,n,!0,e,i,o,a,s,l),e.context=see(null),r=e.current,n=Va(),i=wp(r),o=mh(n,i),o.callback=t??null,bp(r,o,i),e.current.lanes=i,tM(e,i,n),As(e,n),e}function aR(e,t,r,n){var i=t.current,o=Va(),a=wp(i);return r=see(r),t.context===null?t.context=r:t.pendingContext=r,t=mh(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=bp(i,t,a),e!==null&&(Fu(e,i,a,o),o2(e,i,a)),a}function fD(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function F6(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function A4(e,t){F6(e,t),(e=e.alternate)&&F6(e,t)}function w0e(){return null}var uee=typeof reportError=="function"?reportError:function(e){console.error(e)};function M4(e){this._internalRoot=e}sR.prototype.render=M4.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(vt(409));aR(e,t,null,null)};sR.prototype.unmount=M4.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;u0(function(){aR(null,e,null,null)}),t[Ch]=null}};function sR(e){this._internalRoot=e}sR.prototype.unstable_scheduleHydration=function(e){if(e){var t=zZ();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qf.length&&t!==0&&t<Qf[r].priority;r++);Qf.splice(r,0,e),r===0&&VZ(e)}};function C4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function z6(){}function _0e(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var u=fD(a);o.call(u)}}var a=lee(t,n,e,0,null,!1,!1,"",z6);return e._reactRootContainer=a,e[Ch]=a.current,$S(e.nodeType===8?e.parentNode:e),u0(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=fD(l);s.call(u)}}var l=S4(e,0,!1,null,null,!1,!1,"",z6);return e._reactRootContainer=l,e[Ch]=l.current,$S(e.nodeType===8?e.parentNode:e),u0(function(){aR(t,l,r,n)}),l}function uR(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=fD(a);s.call(l)}}aR(t,a,e,i)}else a=_0e(r,t,e,i,n);return fD(a)}kZ=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=X_(t.pendingLanes);r!==0&&(WU(t,r|1),As(t,Ti()),!($r&6)&&(yx=Ti()+500,Jp()))}break;case 13:u0(function(){var n=Th(e,1);if(n!==null){var i=Va();Fu(n,e,1,i)}}),A4(e,1)}};qU=function(e){if(e.tag===13){var t=Th(e,134217728);if(t!==null){var r=Va();Fu(t,e,134217728,r)}A4(e,134217728)}};FZ=function(e){if(e.tag===13){var t=wp(e),r=Th(e,t);if(r!==null){var n=Va();Fu(r,e,t,n)}A4(e,t)}};zZ=function(){return yn};UZ=function(e,t){var r=yn;try{return yn=e,t()}finally{yn=r}};Tk=function(e,t,r){switch(t){case"input":if(xk(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=$O(n);if(!i)throw Error(vt(90));vZ(n),xk(n,i)}}}break;case"textarea":bZ(e,r);break;case"select":t=r.value,t!=null&&Bb(e,!!r.multiple,t,!1)}};CZ=b4;TZ=u0;var S0e={usingClientEntryPoint:!1,Events:[nM,lb,$O,AZ,MZ,b4]},qw={findFiberByHostInstance:Cg,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},A0e={bundleType:qw.bundleType,version:qw.version,rendererPackageName:qw.rendererPackageName,rendererConfig:qw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=DZ(e),e===null?null:e.stateNode},findFiberByHostInstance:qw.findFiberByHostInstance||w0e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var MT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!MT.isDisabled&&MT.supportsFiber)try{KO=MT.inject(A0e),Hc=MT}catch{}}ul.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S0e;ul.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C4(t))throw Error(vt(200));return x0e(e,t,null,r)};ul.createRoot=function(e,t){if(!C4(e))throw Error(vt(299));var r=!1,n="",i=uee;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=S4(e,1,!1,null,null,r,!1,n,i),e[Ch]=t.current,$S(e.nodeType===8?e.parentNode:e),new M4(t)};ul.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(vt(188)):(e=Object.keys(e).join(","),Error(vt(268,e)));return e=DZ(t),e=e===null?null:e.stateNode,e};ul.flushSync=function(e){return u0(e)};ul.hydrate=function(e,t,r){if(!lR(t))throw Error(vt(200));return uR(null,e,t,!0,r)};ul.hydrateRoot=function(e,t,r){if(!C4(e))throw Error(vt(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=uee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=lee(t,null,e,1,r??null,i,!1,o,a),e[Ch]=t.current,$S(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new sR(t)};ul.render=function(e,t,r){if(!lR(t))throw Error(vt(200));return uR(null,e,t,!1,r)};ul.unmountComponentAtNode=function(e){if(!lR(e))throw Error(vt(40));return e._reactRootContainer?(u0(function(){uR(null,null,e,!1,function(){e._reactRootContainer=null,e[Ch]=null})}),!0):!1};ul.unstable_batchedUpdates=b4;ul.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!lR(r))throw Error(vt(200));if(e==null||e._reactInternals===void 0)throw Error(vt(38));return uR(e,t,r,!1,n)};ul.version="18.2.0-next-9e3b772b8-20220608";function cee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cee)}catch(e){console.error(e)}}cee(),lZ.exports=ul;var Ph=lZ.exports,dee,U6=Ph;dee=fk.createRoot=U6.createRoot,fk.hydrateRoot=U6.hydrateRoot;/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lA(){return lA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lA.apply(this,arguments)}var Pg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pg||(Pg={}));const V6="popstate";function M0e(e){e===void 0&&(e={});function t(n,i){let{pathname:o,search:a,hash:s}=n.location;return aF("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:pD(i)}return T0e(t,r,null,e)}function zu(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function C0e(){return Math.random().toString(36).substr(2,8)}function j6(e,t){return{usr:e.state,key:e.key,idx:t}}function aF(e,t,r,n){return r===void 0&&(r=null),lA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?cR(t):t,{state:r,key:t&&t.key||n||C0e()})}function pD(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function cR(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function T0e(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=Pg.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(lA({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function c(){s=Pg.Pop;let m=d(),p=m==null?null:m-u;u=m,l&&l({action:s,location:y.location,delta:p})}function h(m,p){s=Pg.Push;let v=aF(y.location,m,p);r&&r(v,m),u=d()+1;let b=j6(v,u),x=y.createHref(v);try{a.pushState(b,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(x)}o&&l&&l({action:s,location:y.location,delta:1})}function f(m,p){s=Pg.Replace;let v=aF(y.location,m,p);r&&r(v,m),u=d();let b=j6(v,u),x=y.createHref(v);a.replaceState(b,"",x),o&&l&&l({action:s,location:y.location,delta:0})}function g(m){let p=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof m=="string"?m:pD(m);return zu(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let y={get action(){return s},get location(){return e(i,a)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(V6,c),l=m,()=>{i.removeEventListener(V6,c),l=null}},createHref(m){return t(i,m)},createURL:g,encodeLocation(m){let p=g(m);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:f,go(m){return a.go(m)}};return y}var H6;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(H6||(H6={}));function hee(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function E0e(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?cR(e):e;return{pathname:r?r.startsWith("/")?r:P0e(r,t):t,search:D0e(n),hash:O0e(i)}}function P0e(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function F3(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fee(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function pee(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=cR(e):(i=lA({},e),zu(!i.pathname||!i.pathname.includes("?"),F3("?","pathname","search",i)),zu(!i.pathname||!i.pathname.includes("#"),F3("#","pathname","hash",i)),zu(!i.search||!i.search.includes("#"),F3("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=r;else if(n){let c=t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),c.pop();i.pathname=h.join("/")}s="/"+c.join("/")}else{let c=t.length-1;if(a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),c-=1;i.pathname=h.join("/")}s=c>=0?t[c]:"/"}let l=E0e(i,s),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const mee=e=>e.join("/").replace(/\/\/+/g,"/"),D0e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,O0e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,gee=["post","put","patch","delete"];new Set(gee);const R0e=["get",...gee];new Set(R0e);/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sF(){return sF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sF.apply(this,arguments)}const vee=te.createContext(null),oM=te.createContext(null),T4=te.createContext(null),dR=te.createContext({outlet:null,matches:[],isDataRoute:!1});function I0e(e,t){let{relative:r}=t===void 0?{}:t;hR()||zu(!1);let{basename:n,navigator:i}=te.useContext(oM),{hash:o,pathname:a,search:s}=bee(e,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:mee([n,a])),i.createHref({pathname:l,search:s,hash:o})}function hR(){return te.useContext(T4)!=null}function E4(){return hR()||zu(!1),te.useContext(T4).location}function yee(e){te.useContext(oM).static||te.useLayoutEffect(e)}function L0e(){let{isDataRoute:e}=te.useContext(dR);return e?z0e():B0e()}function B0e(){hR()||zu(!1);let e=te.useContext(vee),{basename:t,navigator:r}=te.useContext(oM),{matches:n}=te.useContext(dR),{pathname:i}=E4(),o=JSON.stringify(fee(n).map(l=>l.pathnameBase)),a=te.useRef(!1);return yee(()=>{a.current=!0}),te.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=pee(l,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:mee([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,o,i,e])}function bee(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=te.useContext(dR),{pathname:i}=E4(),o=JSON.stringify(fee(n).map(a=>a.pathnameBase));return te.useMemo(()=>pee(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}var xee=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xee||{}),wee=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(wee||{});function N0e(e){let t=te.useContext(vee);return t||zu(!1),t}function k0e(e){let t=te.useContext(dR);return t||zu(!1),t}function F0e(e){let t=k0e(),r=t.matches[t.matches.length-1];return r.route.id||zu(!1),r.route.id}function z0e(){let{router:e}=N0e(xee.UseNavigateStable),t=F0e(wee.UseNavigateStable),r=te.useRef(!1);return yee(()=>{r.current=!0}),te.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,sF({fromRouteId:t},o)))},[e,t])}function U0e(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Pg.Pop,navigator:o,static:a=!1}=e;hR()&&zu(!1);let s=t.replace(/^\/*/,"/"),l=te.useMemo(()=>({basename:s,navigator:o,static:a}),[s,o,a]);typeof n=="string"&&(n=cR(n));let{pathname:u="/",search:d="",hash:c="",state:h=null,key:f="default"}=n,g=te.useMemo(()=>{let y=hee(u,s);return y==null?null:{location:{pathname:y,search:d,hash:c,state:h,key:f},navigationType:i}},[s,u,d,c,h,f,i]);return g==null?null:te.createElement(oM.Provider,{value:l},te.createElement(T4.Provider,{children:r,value:g}))}new Promise(()=>{});/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lF(){return lF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lF.apply(this,arguments)}function V0e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function j0e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function H0e(e,t){return e.button===0&&(!t||t==="_self")&&!j0e(e)}const G0e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],W0e="startTransition",G6=NU[W0e];function q0e(e){let{basename:t,children:r,future:n,window:i}=e,o=te.useRef();o.current==null&&(o.current=M0e({window:i,v5Compat:!0}));let a=o.current,[s,l]=te.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=te.useCallback(c=>{u&&G6?G6(()=>l(c)):l(c)},[l,u]);return te.useLayoutEffect(()=>a.listen(d),[a,d]),te.createElement(U0e,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a})}const X0e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y0e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K0e=te.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:u,preventScrollReset:d,unstable_viewTransition:c}=t,h=V0e(t,G0e),{basename:f}=te.useContext(oM),g,y=!1;if(typeof u=="string"&&Y0e.test(u)&&(g=u,X0e))try{let b=new URL(window.location.href),x=u.startsWith("//")?new URL(b.protocol+u):new URL(u),_=hee(x.pathname,f);x.origin===b.origin&&_!=null?u=_+x.search+x.hash:y=!0}catch{}let m=I0e(u,{relative:i}),p=J0e(u,{replace:a,state:s,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:c});function v(b){n&&n(b),b.defaultPrevented||p(b)}return te.createElement("a",lF({},h,{href:g||m,onClick:y||o?n:v,ref:r,target:l}))});var W6;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(W6||(W6={}));var q6;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(q6||(q6={}));function J0e(e,t){let{target:r,replace:n,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s}=t===void 0?{}:t,l=L0e(),u=E4(),d=bee(e,{relative:a});return te.useCallback(c=>{if(H0e(c,r)){c.preventDefault();let h=n!==void 0?n:pD(u)===pD(d);l(e,{replace:h,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s})}},[u,l,d,n,i,r,e,o,a,s])}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const s1="159",ug={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},cg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_ee=0,uF=1,See=2,Q0e=3,Aee=0,fR=1,yS=2,Su=3,Zc=0,ja=1,Ul=2,Z0e=2,gh=0,Gg=1,cF=2,dF=3,hF=4,Mee=5,$f=100,Cee=101,Tee=102,fF=103,pF=104,Eee=200,Pee=201,Dee=202,Oee=203,mD=204,gD=205,Ree=206,Iee=207,Lee=208,Bee=209,Nee=210,kee=211,Fee=212,zee=213,Uee=214,Vee=0,jee=1,Hee=2,uA=3,Gee=4,Wee=5,qee=6,Xee=7,aM=0,Yee=1,Kee=2,Wc=0,Jee=1,Qee=2,Zee=3,P4=4,$ee=5,mF="attached",ete="detached",pR=300,Dh=301,kp=302,cA=303,dA=304,l1=306,Fp=1e3,ko=1001,bx=1002,fi=1003,hA=1004,$0e=1004,Vb=1005,eve=1005,Qn=1006,mR=1007,tve=1007,$c=1008,rve=1008,qc=1009,tte=1010,rte=1011,gR=1012,D4=1013,uh=1014,Pu=1015,xx=1016,O4=1017,R4=1018,Sp=1020,nte=1021,Ia=1023,ite=1024,ote=1025,Ap=1026,c0=1027,ate=1028,I4=1029,ste=1030,L4=1031,B4=1033,h2=33776,f2=33777,p2=33778,m2=33779,gF=35840,vF=35841,yF=35842,bF=35843,N4=36196,xF=37492,wF=37496,_F=37808,SF=37809,AF=37810,MF=37811,CF=37812,TF=37813,EF=37814,PF=37815,DF=37816,OF=37817,RF=37818,IF=37819,LF=37820,BF=37821,g2=36492,NF=36494,kF=36495,lte=36283,FF=36284,zF=36285,UF=36286,ute=2200,cte=2201,dte=2202,wx=2300,d0=2301,v2=2302,Dg=2400,Og=2401,fA=2402,vR=2500,k4=2501,hte=0,F4=1,vD=2,z4=3e3,Mp=3001,fte=3200,pte=3201,Qp=0,mte=1,Xs="",ro="srgb",ed="srgb-linear",yR="display-p3",sM="display-p3-linear",pA="linear",En="srgb",mA="rec709",gA="p3",nve=0,dg=7680,ive=7681,ove=7682,ave=7683,sve=34055,lve=34056,uve=5386,cve=512,dve=513,hve=514,fve=515,pve=516,mve=517,gve=518,VF=519,gte=512,vte=513,yte=514,U4=515,bte=516,xte=517,wte=518,_te=519,vA=35044,Wg=35048,vve=35040,yve=35045,bve=35049,xve=35041,wve=35046,_ve=35050,Sve=35042,Ave="100",jF="300 es",yD=1035,Du=2e3,_x=2001;class ud{addEventListener(t,r){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(r)===-1&&n[t].push(r)}hasEventListener(t,r){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(r)!==-1}removeEventListener(t,r){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const o=i.indexOf(r);o!==-1&&i.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const i=n.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,t);t.target=null}}}const Xo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let X6=1234567;const qg=Math.PI/180,Sx=180/Math.PI;function rl(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Xo[e&255]+Xo[e>>8&255]+Xo[e>>16&255]+Xo[e>>24&255]+"-"+Xo[t&255]+Xo[t>>8&255]+"-"+Xo[t>>16&15|64]+Xo[t>>24&255]+"-"+Xo[r&63|128]+Xo[r>>8&255]+"-"+Xo[r>>16&255]+Xo[r>>24&255]+Xo[n&255]+Xo[n>>8&255]+Xo[n>>16&255]+Xo[n>>24&255]).toLowerCase()}function pi(e,t,r){return Math.max(t,Math.min(r,e))}function V4(e,t){return(e%t+t)%t}function Mve(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)}function Cve(e,t,r){return e!==t?(r-e)/(t-e):0}function bS(e,t,r){return(1-r)*e+r*t}function Tve(e,t,r,n){return bS(e,t,1-Math.exp(-r*n))}function Eve(e,t=1){return t-Math.abs(V4(e,t*2)-t)}function Pve(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function Dve(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function Ove(e,t){return e+Math.floor(Math.random()*(t-e+1))}function Rve(e,t){return e+Math.random()*(t-e)}function Ive(e){return e*(.5-Math.random())}function Lve(e){e!==void 0&&(X6=e);let t=X6+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Bve(e){return e*qg}function Nve(e){return e*Sx}function HF(e){return(e&e-1)===0&&e!==0}function kve(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function bD(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Fve(e,t,r,n,i){const o=Math.cos,a=Math.sin,s=o(r/2),l=a(r/2),u=o((t+n)/2),d=a((t+n)/2),c=o((t-n)/2),h=a((t-n)/2),f=o((n-t)/2),g=a((n-t)/2);switch(i){case"XYX":e.set(s*d,l*c,l*h,s*u);break;case"YZY":e.set(l*h,s*d,l*c,s*u);break;case"ZXZ":e.set(l*c,l*h,s*d,s*u);break;case"XZX":e.set(s*d,l*g,l*f,s*u);break;case"YXY":e.set(l*f,s*d,l*g,s*u);break;case"ZYZ":e.set(l*g,l*f,s*d,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function fs(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Ir(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(e*4294967295);case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int32Array:return Math.round(e*2147483647);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}const Ste={DEG2RAD:qg,RAD2DEG:Sx,generateUUID:rl,clamp:pi,euclideanModulo:V4,mapLinear:Mve,inverseLerp:Cve,lerp:bS,damp:Tve,pingpong:Eve,smoothstep:Pve,smootherstep:Dve,randInt:Ove,randFloat:Rve,randFloatSpread:Ive,seededRandom:Lve,degToRad:Bve,radToDeg:Nve,isPowerOfTwo:HF,ceilPowerOfTwo:kve,floorPowerOfTwo:bD,setQuaternionFromProperEuler:Fve,normalize:Ir,denormalize:fs};class lt{constructor(t=0,r=0){lt.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,n=this.y,i=t.elements;return this.x=i[0]*r+i[3]*n+i[6],this.y=i[1]*r+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this}clampLength(t,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(t)/r;return Math.acos(pi(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,n=this.y-t.y;return r*r+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const n=Math.cos(r),i=Math.sin(r),o=this.x-t.x,a=this.y-t.y;return this.x=o*n-a*i+t.x,this.y=o*i+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Br{constructor(t,r,n,i,o,a,s,l,u){Br.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,r,n,i,o,a,s,l,u)}set(t,r,n,i,o,a,s,l,u){const d=this.elements;return d[0]=t,d[1]=i,d[2]=s,d[3]=r,d[4]=o,d[5]=l,d[6]=n,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,n=t.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this}extractBasis(t,r,n){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const n=t.elements,i=r.elements,o=this.elements,a=n[0],s=n[3],l=n[6],u=n[1],d=n[4],c=n[7],h=n[2],f=n[5],g=n[8],y=i[0],m=i[3],p=i[6],v=i[1],b=i[4],x=i[7],_=i[2],A=i[5],M=i[8];return o[0]=a*y+s*v+l*_,o[3]=a*m+s*b+l*A,o[6]=a*p+s*x+l*M,o[1]=u*y+d*v+c*_,o[4]=u*m+d*b+c*A,o[7]=u*p+d*x+c*M,o[2]=h*y+f*v+g*_,o[5]=h*m+f*b+g*A,o[8]=h*p+f*x+g*M,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],d=t[8];return r*a*d-r*s*u-n*o*d+n*s*l+i*o*u-i*a*l}invert(){const t=this.elements,r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],d=t[8],c=d*a-s*u,h=s*l-d*o,f=u*o-a*l,g=r*c+n*h+i*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return t[0]=c*y,t[1]=(i*u-d*n)*y,t[2]=(s*n-i*a)*y,t[3]=h*y,t[4]=(d*r-i*l)*y,t[5]=(i*o-s*r)*y,t[6]=f*y,t[7]=(n*l-u*r)*y,t[8]=(a*r-n*o)*y,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,n,i,o,a,s){const l=Math.cos(o),u=Math.sin(o);return this.set(n*l,n*u,-n*(l*a+u*s)+a+t,-i*u,i*l,-i*(-u*a+l*s)+s+r,0,0,1),this}scale(t,r){return this.premultiply(z3.makeScale(t,r)),this}rotate(t){return this.premultiply(z3.makeRotation(-t)),this}translate(t,r){return this.premultiply(z3.makeTranslation(t,r)),this}makeTranslation(t,r){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){const r=Math.cos(t),n=Math.sin(t);return this.set(r,-n,0,n,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){const r=this.elements,n=t.elements;for(let i=0;i<9;i++)if(r[i]!==n[i])return!1;return!0}fromArray(t,r=0){for(let n=0;n<9;n++)this.elements[n]=t[n+r];return this}toArray(t=[],r=0){const n=this.elements;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const z3=new Br;function Ate(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const zve={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function mb(e,t){return new zve[e](t)}function yA(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Mte(){const e=yA("canvas");return e.style.display="block",e}const Y6={};function xS(e){e in Y6||(Y6[e]=!0,console.warn(e))}const K6=new Br().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),J6=new Br().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),CT={[ed]:{transfer:pA,primaries:mA,toReference:e=>e,fromReference:e=>e},[ro]:{transfer:En,primaries:mA,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[sM]:{transfer:pA,primaries:gA,toReference:e=>e.applyMatrix3(J6),fromReference:e=>e.applyMatrix3(K6)},[yR]:{transfer:En,primaries:gA,toReference:e=>e.convertSRGBToLinear().applyMatrix3(J6),fromReference:e=>e.applyMatrix3(K6).convertLinearToSRGB()}},Uve=new Set([ed,sM]),pn={enabled:!0,_workingColorSpace:ed,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Uve.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,r){if(this.enabled===!1||t===r||!t||!r)return e;const n=CT[t].toReference,i=CT[r].fromReference;return i(n(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return CT[e].primaries},getTransfer:function(e){return e===Xs?pA:CT[e].transfer}};function jb(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function U3(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}let Gv;class j4{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{Gv===void 0&&(Gv=yA("canvas")),Gv.width=t.width,Gv.height=t.height;const n=Gv.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),r=Gv}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=yA("canvas");r.width=t.width,r.height=t.height;const n=r.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),o=i.data;for(let a=0;a<o.length;a++)o[a]=jb(o[a]/255)*255;return n.putImageData(i,0,0),r}else if(t.data){const r=t.data.slice(0);for(let n=0;n<r.length;n++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[n]=Math.floor(jb(r[n]/255)*255):r[n]=jb(r[n]);return{data:r,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Vve=0;class Rg{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Vve++}),this.uuid=rl(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const r=t===void 0||typeof t=="string";if(!r&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(V3(i[a].image)):o.push(V3(i[a]))}else o=V3(i);n.url=o}return r||(t.images[this.uuid]=n),n}}function V3(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?j4.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let jve=0;class Wn extends ud{constructor(t=Wn.DEFAULT_IMAGE,r=Wn.DEFAULT_MAPPING,n=ko,i=ko,o=Qn,a=$c,s=Ia,l=qc,u=Wn.DEFAULT_ANISOTROPY,d=Xs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jve++}),this.uuid=rl(),this.name="",this.source=new Rg(t),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Br,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(xS("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===Mp?ro:Xs),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=t===void 0||typeof t=="string";if(!r&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),r||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==pR)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Fp:t.x=t.x-Math.floor(t.x);break;case ko:t.x=t.x<0?0:1;break;case bx:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Fp:t.y=t.y-Math.floor(t.y);break;case ko:t.y=t.y<0?0:1;break;case bx:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return xS("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ro?Mp:z4}set encoding(t){xS("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Mp?ro:Xs}}Wn.DEFAULT_IMAGE=null;Wn.DEFAULT_MAPPING=pR;Wn.DEFAULT_ANISOTROPY=1;class mn{constructor(t=0,r=0,n=0,i=1){mn.prototype.isVector4=!0,this.x=t,this.y=r,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,n,i){return this.x=t,this.y=r,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,n=this.y,i=this.z,o=this.w,a=t.elements;return this.x=a[0]*r+a[4]*n+a[8]*i+a[12]*o,this.y=a[1]*r+a[5]*n+a[9]*i+a[13]*o,this.z=a[2]*r+a[6]*n+a[10]*i+a[14]*o,this.w=a[3]*r+a[7]*n+a[11]*i+a[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,n,i,o;const l=t.elements,u=l[0],d=l[4],c=l[8],h=l[1],f=l[5],g=l[9],y=l[2],m=l[6],p=l[10];if(Math.abs(d-h)<.01&&Math.abs(c-y)<.01&&Math.abs(g-m)<.01){if(Math.abs(d+h)<.1&&Math.abs(c+y)<.1&&Math.abs(g+m)<.1&&Math.abs(u+f+p-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const b=(u+1)/2,x=(f+1)/2,_=(p+1)/2,A=(d+h)/4,M=(c+y)/4,T=(g+m)/4;return b>x&&b>_?b<.01?(n=0,i=.707106781,o=.707106781):(n=Math.sqrt(b),i=A/n,o=M/n):x>_?x<.01?(n=.707106781,i=0,o=.707106781):(i=Math.sqrt(x),n=A/i,o=T/i):_<.01?(n=.707106781,i=.707106781,o=0):(o=Math.sqrt(_),n=M/o,i=T/o),this.set(n,i,o,r),this}let v=Math.sqrt((m-g)*(m-g)+(c-y)*(c-y)+(h-d)*(h-d));return Math.abs(v)<.001&&(v=1),this.x=(m-g)/v,this.y=(c-y)/v,this.z=(h-d)/v,this.w=Math.acos((u+f+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this.w=Math.max(t.w,Math.min(r.w,this.w)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this.w=Math.max(t,Math.min(r,this.w)),this}clampLength(t,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this.z=t.z+(r.z-t.z)*n,this.w=t.w+(r.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Cte extends ud{constructor(t=1,r=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new mn(0,0,t,r),this.scissorTest=!1,this.viewport=new mn(0,0,t,r);const i={width:t,height:r,depth:1};n.encoding!==void 0&&(xS("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Mp?ro:Xs),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Qn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Wn(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(t,r,n=1){(this.width!==t||this.height!==r||this.depth!==n)&&(this.width=t,this.height=r,this.depth=n,this.texture.image.width=t,this.texture.image.height=r,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const r=Object.assign({},t.texture.image);return this.texture.source=new Rg(r),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hu extends Cte{constructor(t=1,r=1,n={}){super(t,r,n),this.isWebGLRenderTarget=!0}}class bR extends Wn{constructor(t=null,r=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:n,depth:i},this.magFilter=fi,this.minFilter=fi,this.wrapR=ko,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hve extends Hu{constructor(t=1,r=1,n=1,i={}){super(t,r,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new bR(null,t,r,n),this.texture.isRenderTargetTexture=!0}}class H4 extends Wn{constructor(t=null,r=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:n,depth:i},this.magFilter=fi,this.minFilter=fi,this.wrapR=ko,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gve extends Hu{constructor(t=1,r=1,n=1,i={}){super(t,r,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new H4(null,t,r,n),this.texture.isRenderTargetTexture=!0}}class Wve extends Hu{constructor(t=1,r=1,n=1,i={}){super(t,r,i),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=o.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(t,r,n=1){if(this.width!==t||this.height!==r||this.depth!==n){this.width=t,this.height=r,this.depth=n;for(let i=0,o=this.texture.length;i<o;i++)this.texture[i].image.width=t,this.texture[i].image.height=r,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let r=0,n=t.texture.length;r<n;r++)this.texture[r]=t.texture[r].clone(),this.texture[r].isRenderTargetTexture=!0;return this}}class To{constructor(t=0,r=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=n,this._w=i}static slerpFlat(t,r,n,i,o,a,s){let l=n[i+0],u=n[i+1],d=n[i+2],c=n[i+3];const h=o[a+0],f=o[a+1],g=o[a+2],y=o[a+3];if(s===0){t[r+0]=l,t[r+1]=u,t[r+2]=d,t[r+3]=c;return}if(s===1){t[r+0]=h,t[r+1]=f,t[r+2]=g,t[r+3]=y;return}if(c!==y||l!==h||u!==f||d!==g){let m=1-s;const p=l*h+u*f+d*g+c*y,v=p>=0?1:-1,b=1-p*p;if(b>Number.EPSILON){const _=Math.sqrt(b),A=Math.atan2(_,p*v);m=Math.sin(m*A)/_,s=Math.sin(s*A)/_}const x=s*v;if(l=l*m+h*x,u=u*m+f*x,d=d*m+g*x,c=c*m+y*x,m===1-s){const _=1/Math.sqrt(l*l+u*u+d*d+c*c);l*=_,u*=_,d*=_,c*=_}}t[r]=l,t[r+1]=u,t[r+2]=d,t[r+3]=c}static multiplyQuaternionsFlat(t,r,n,i,o,a){const s=n[i],l=n[i+1],u=n[i+2],d=n[i+3],c=o[a],h=o[a+1],f=o[a+2],g=o[a+3];return t[r]=s*g+d*c+l*f-u*h,t[r+1]=l*g+d*h+u*c-s*f,t[r+2]=u*g+d*f+s*h-l*c,t[r+3]=d*g-s*c-l*h-u*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,n,i){return this._x=t,this._y=r,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r){const n=t._x,i=t._y,o=t._z,a=t._order,s=Math.cos,l=Math.sin,u=s(n/2),d=s(i/2),c=s(o/2),h=l(n/2),f=l(i/2),g=l(o/2);switch(a){case"XYZ":this._x=h*d*c+u*f*g,this._y=u*f*c-h*d*g,this._z=u*d*g+h*f*c,this._w=u*d*c-h*f*g;break;case"YXZ":this._x=h*d*c+u*f*g,this._y=u*f*c-h*d*g,this._z=u*d*g-h*f*c,this._w=u*d*c+h*f*g;break;case"ZXY":this._x=h*d*c-u*f*g,this._y=u*f*c+h*d*g,this._z=u*d*g+h*f*c,this._w=u*d*c-h*f*g;break;case"ZYX":this._x=h*d*c-u*f*g,this._y=u*f*c+h*d*g,this._z=u*d*g-h*f*c,this._w=u*d*c+h*f*g;break;case"YZX":this._x=h*d*c+u*f*g,this._y=u*f*c+h*d*g,this._z=u*d*g-h*f*c,this._w=u*d*c-h*f*g;break;case"XZY":this._x=h*d*c-u*f*g,this._y=u*f*c-h*d*g,this._z=u*d*g+h*f*c,this._w=u*d*c+h*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return r!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const n=r/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,n=r[0],i=r[4],o=r[8],a=r[1],s=r[5],l=r[9],u=r[2],d=r[6],c=r[10],h=n+s+c;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(o-u)*f,this._z=(a-i)*f}else if(n>s&&n>c){const f=2*Math.sqrt(1+n-s-c);this._w=(d-l)/f,this._x=.25*f,this._y=(i+a)/f,this._z=(o+u)/f}else if(s>c){const f=2*Math.sqrt(1+s-n-c);this._w=(o-u)/f,this._x=(i+a)/f,this._y=.25*f,this._z=(l+d)/f}else{const f=2*Math.sqrt(1+c-n-s);this._w=(a-i)/f,this._x=(o+u)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let n=t.dot(r)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(pi(this.dot(t),-1,1)))}rotateTowards(t,r){const n=this.angleTo(t);if(n===0)return this;const i=Math.min(1,r/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const n=t._x,i=t._y,o=t._z,a=t._w,s=r._x,l=r._y,u=r._z,d=r._w;return this._x=n*d+a*s+i*u-o*l,this._y=i*d+a*l+o*s-n*u,this._z=o*d+a*u+n*l-i*s,this._w=a*d-n*s-i*l-o*u,this._onChangeCallback(),this}slerp(t,r){if(r===0)return this;if(r===1)return this.copy(t);const n=this._x,i=this._y,o=this._z,a=this._w;let s=a*t._w+n*t._x+i*t._y+o*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=n,this._y=i,this._z=o,this;const l=1-s*s;if(l<=Number.EPSILON){const f=1-r;return this._w=f*a+r*this._w,this._x=f*n+r*this._x,this._y=f*i+r*this._y,this._z=f*o+r*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),d=Math.atan2(u,s),c=Math.sin((1-r)*d)/u,h=Math.sin(r*d)/u;return this._w=a*c+this._w*h,this._x=n*c+this._x*h,this._y=i*c+this._y*h,this._z=o*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,r,n){return this.copy(t).slerp(r,n)}random(){const t=Math.random(),r=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(r*Math.cos(i),n*Math.sin(o),n*Math.cos(o),r*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pe{constructor(t=0,r=0,n=0){pe.prototype.isVector3=!0,this.x=t,this.y=r,this.z=n}set(t,r,n){return n===void 0&&(n=this.z),this.x=t,this.y=r,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(Q6.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(Q6.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,n=this.y,i=this.z,o=t.elements;return this.x=o[0]*r+o[3]*n+o[6]*i,this.y=o[1]*r+o[4]*n+o[7]*i,this.z=o[2]*r+o[5]*n+o[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,n=this.y,i=this.z,o=t.elements,a=1/(o[3]*r+o[7]*n+o[11]*i+o[15]);return this.x=(o[0]*r+o[4]*n+o[8]*i+o[12])*a,this.y=(o[1]*r+o[5]*n+o[9]*i+o[13])*a,this.z=(o[2]*r+o[6]*n+o[10]*i+o[14])*a,this}applyQuaternion(t){const r=this.x,n=this.y,i=this.z,o=t.x,a=t.y,s=t.z,l=t.w,u=2*(a*i-s*n),d=2*(s*r-o*i),c=2*(o*n-a*r);return this.x=r+l*u+a*c-s*d,this.y=n+l*d+s*u-o*c,this.z=i+l*c+o*d-a*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,n=this.y,i=this.z,o=t.elements;return this.x=o[0]*r+o[4]*n+o[8]*i,this.y=o[1]*r+o[5]*n+o[9]*i,this.z=o[2]*r+o[6]*n+o[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this}clampLength(t,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this.z=t.z+(r.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){const n=t.x,i=t.y,o=t.z,a=r.x,s=r.y,l=r.z;return this.x=i*l-o*s,this.y=o*a-n*l,this.z=n*s-i*a,this}projectOnVector(t){const r=t.lengthSq();if(r===0)return this.set(0,0,0);const n=t.dot(this)/r;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return j3.copy(this).projectOnVector(t),this.sub(j3)}reflect(t){return this.sub(j3.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(t)/r;return Math.acos(pi(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return r*r+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,n){const i=Math.sin(r)*t;return this.x=i*Math.sin(n),this.y=Math.cos(r)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,n){return this.x=t*Math.sin(r),this.y=n,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=n,this.z=i,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,r*4)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,r*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(r),this.y=n*Math.sin(r),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const j3=new pe,Q6=new To;class oa{constructor(t=new pe(1/0,1/0,1/0),r=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){this.makeEmpty();for(let r=0,n=t.length;r<n;r+=3)this.expandByPoint(lu.fromArray(t,r));return this}setFromBufferAttribute(t){this.makeEmpty();for(let r=0,n=t.count;r<n;r++)this.expandByPoint(lu.fromBufferAttribute(t,r));return this}setFromPoints(t){this.makeEmpty();for(let r=0,n=t.length;r<n;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const n=lu.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const o=n.getAttribute("position");if(r===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let a=0,s=o.count;a<s;a++)t.isMesh===!0?t.getVertexPosition(a,lu):lu.fromBufferAttribute(o,a),lu.applyMatrix4(t.matrixWorld),this.expandByPoint(lu);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),TT.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),TT.copy(n.boundingBox)),TT.applyMatrix4(t.matrixWorld),this.union(TT)}const i=t.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],r);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,lu),lu.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,n;return t.normal.x>0?(r=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),r<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Xw),ET.subVectors(this.max,Xw),Wv.subVectors(t.a,Xw),qv.subVectors(t.b,Xw),Xv.subVectors(t.c,Xw),vf.subVectors(qv,Wv),yf.subVectors(Xv,qv),Um.subVectors(Wv,Xv);let r=[0,-vf.z,vf.y,0,-yf.z,yf.y,0,-Um.z,Um.y,vf.z,0,-vf.x,yf.z,0,-yf.x,Um.z,0,-Um.x,-vf.y,vf.x,0,-yf.y,yf.x,0,-Um.y,Um.x,0];return!H3(r,Wv,qv,Xv,ET)||(r=[1,0,0,0,1,0,0,0,1],!H3(r,Wv,qv,Xv,ET))?!1:(PT.crossVectors(vf,yf),r=[PT.x,PT.y,PT.z],H3(r,Wv,qv,Xv,ET))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,lu).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(lu).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Ed[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ed[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ed[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ed[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ed[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ed[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ed[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ed[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ed),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ed=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],lu=new pe,TT=new oa,Wv=new pe,qv=new pe,Xv=new pe,vf=new pe,yf=new pe,Um=new pe,Xw=new pe,ET=new pe,PT=new pe,Vm=new pe;function H3(e,t,r,n,i){for(let o=0,a=e.length-3;o<=a;o+=3){Vm.fromArray(e,o);const s=i.x*Math.abs(Vm.x)+i.y*Math.abs(Vm.y)+i.z*Math.abs(Vm.z),l=t.dot(Vm),u=r.dot(Vm),d=n.dot(Vm);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>s)return!1}return!0}const qve=new oa,Yw=new pe,G3=new pe;class zo{constructor(t=new pe,r=-1){this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const n=this.center;r!==void 0?n.copy(r):qve.setFromPoints(t).getCenter(n);let i=0;for(let o=0,a=t.length;o<a;o++)i=Math.max(i,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const n=this.center.distanceToSquared(t);return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Yw.subVectors(t,this.center);const r=Yw.lengthSq();if(r>this.radius*this.radius){const n=Math.sqrt(r),i=(n-this.radius)*.5;this.center.addScaledVector(Yw,i/n),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(G3.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Yw.copy(t.center).add(G3)),this.expandByPoint(Yw.copy(t.center).sub(G3))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Pd=new pe,W3=new pe,DT=new pe,bf=new pe,q3=new pe,OT=new pe,X3=new pe;class T0{constructor(t=new pe,r=new pe(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Pd)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=Pd.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(Pd.copy(this.origin).addScaledVector(this.direction,r),Pd.distanceToSquared(t))}distanceSqToSegment(t,r,n,i){W3.copy(t).add(r).multiplyScalar(.5),DT.copy(r).sub(t).normalize(),bf.copy(this.origin).sub(W3);const o=t.distanceTo(r)*.5,a=-this.direction.dot(DT),s=bf.dot(this.direction),l=-bf.dot(DT),u=bf.lengthSq(),d=Math.abs(1-a*a);let c,h,f,g;if(d>0)if(c=a*l-s,h=a*s-l,g=o*d,c>=0)if(h>=-g)if(h<=g){const y=1/d;c*=y,h*=y,f=c*(c+a*h+2*s)+h*(a*c+h+2*l)+u}else h=o,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*l)+u;else h=-o,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*l)+u;else h<=-g?(c=Math.max(0,-(-a*o+s)),h=c>0?-o:Math.min(Math.max(-o,-l),o),f=-c*c+h*(h+2*l)+u):h<=g?(c=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+u):(c=Math.max(0,-(a*o+s)),h=c>0?o:Math.min(Math.max(-o,-l),o),f=-c*c+h*(h+2*l)+u);else h=a>0?-o:o,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,c),i&&i.copy(W3).addScaledVector(DT,h),f}intersectSphere(t,r){Pd.subVectors(t.center,this.origin);const n=Pd.dot(this.direction),i=Pd.dot(Pd)-n*n,o=t.radius*t.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=n-a,l=n+a;return l<0?null:s<0?this.at(l,r):this.at(s,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(r===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/r;return n>=0?n:null}intersectPlane(t,r){const n=this.distanceToPlane(t);return n===null?null:this.at(n,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);return r===0||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let n,i,o,a,s,l;const u=1/this.direction.x,d=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,i=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,i=(t.min.x-h.x)*u),d>=0?(o=(t.min.y-h.y)*d,a=(t.max.y-h.y)*d):(o=(t.max.y-h.y)*d,a=(t.min.y-h.y)*d),n>a||o>i||((o>n||isNaN(n))&&(n=o),(a<i||isNaN(i))&&(i=a),c>=0?(s=(t.min.z-h.z)*c,l=(t.max.z-h.z)*c):(s=(t.max.z-h.z)*c,l=(t.min.z-h.z)*c),n>l||s>i)||((s>n||n!==n)&&(n=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,r)}intersectsBox(t){return this.intersectBox(t,Pd)!==null}intersectTriangle(t,r,n,i,o){q3.subVectors(r,t),OT.subVectors(n,t),X3.crossVectors(q3,OT);let a=this.direction.dot(X3),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;bf.subVectors(this.origin,t);const l=s*this.direction.dot(OT.crossVectors(bf,OT));if(l<0)return null;const u=s*this.direction.dot(q3.cross(bf));if(u<0||l+u>a)return null;const d=-s*bf.dot(X3);return d<0?null:this.at(d/a,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pr{constructor(t,r,n,i,o,a,s,l,u,d,c,h,f,g,y,m){pr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,r,n,i,o,a,s,l,u,d,c,h,f,g,y,m)}set(t,r,n,i,o,a,s,l,u,d,c,h,f,g,y,m){const p=this.elements;return p[0]=t,p[4]=r,p[8]=n,p[12]=i,p[1]=o,p[5]=a,p[9]=s,p[13]=l,p[2]=u,p[6]=d,p[10]=c,p[14]=h,p[3]=f,p[7]=g,p[11]=y,p[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pr().fromArray(this.elements)}copy(t){const r=this.elements,n=t.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this}copyPosition(t){const r=this.elements,n=t.elements;return r[12]=n[12],r[13]=n[13],r[14]=n[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,n){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,r,n){return this.set(t.x,r.x,n.x,0,t.y,r.y,n.y,0,t.z,r.z,n.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,n=t.elements,i=1/Yv.setFromMatrixColumn(t,0).length(),o=1/Yv.setFromMatrixColumn(t,1).length(),a=1/Yv.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=0,r[8]=n[8]*a,r[9]=n[9]*a,r[10]=n[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){const r=this.elements,n=t.x,i=t.y,o=t.z,a=Math.cos(n),s=Math.sin(n),l=Math.cos(i),u=Math.sin(i),d=Math.cos(o),c=Math.sin(o);if(t.order==="XYZ"){const h=a*d,f=a*c,g=s*d,y=s*c;r[0]=l*d,r[4]=-l*c,r[8]=u,r[1]=f+g*u,r[5]=h-y*u,r[9]=-s*l,r[2]=y-h*u,r[6]=g+f*u,r[10]=a*l}else if(t.order==="YXZ"){const h=l*d,f=l*c,g=u*d,y=u*c;r[0]=h+y*s,r[4]=g*s-f,r[8]=a*u,r[1]=a*c,r[5]=a*d,r[9]=-s,r[2]=f*s-g,r[6]=y+h*s,r[10]=a*l}else if(t.order==="ZXY"){const h=l*d,f=l*c,g=u*d,y=u*c;r[0]=h-y*s,r[4]=-a*c,r[8]=g+f*s,r[1]=f+g*s,r[5]=a*d,r[9]=y-h*s,r[2]=-a*u,r[6]=s,r[10]=a*l}else if(t.order==="ZYX"){const h=a*d,f=a*c,g=s*d,y=s*c;r[0]=l*d,r[4]=g*u-f,r[8]=h*u+y,r[1]=l*c,r[5]=y*u+h,r[9]=f*u-g,r[2]=-u,r[6]=s*l,r[10]=a*l}else if(t.order==="YZX"){const h=a*l,f=a*u,g=s*l,y=s*u;r[0]=l*d,r[4]=y-h*c,r[8]=g*c+f,r[1]=c,r[5]=a*d,r[9]=-s*d,r[2]=-u*d,r[6]=f*c+g,r[10]=h-y*c}else if(t.order==="XZY"){const h=a*l,f=a*u,g=s*l,y=s*u;r[0]=l*d,r[4]=-c,r[8]=u*d,r[1]=h*c+y,r[5]=a*d,r[9]=f*c-g,r[2]=g*c-f,r[6]=s*d,r[10]=y*c+h}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Xve,t,Yve)}lookAt(t,r,n){const i=this.elements;return zs.subVectors(t,r),zs.lengthSq()===0&&(zs.z=1),zs.normalize(),xf.crossVectors(n,zs),xf.lengthSq()===0&&(Math.abs(n.z)===1?zs.x+=1e-4:zs.z+=1e-4,zs.normalize(),xf.crossVectors(n,zs)),xf.normalize(),RT.crossVectors(zs,xf),i[0]=xf.x,i[4]=RT.x,i[8]=zs.x,i[1]=xf.y,i[5]=RT.y,i[9]=zs.y,i[2]=xf.z,i[6]=RT.z,i[10]=zs.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const n=t.elements,i=r.elements,o=this.elements,a=n[0],s=n[4],l=n[8],u=n[12],d=n[1],c=n[5],h=n[9],f=n[13],g=n[2],y=n[6],m=n[10],p=n[14],v=n[3],b=n[7],x=n[11],_=n[15],A=i[0],M=i[4],T=i[8],C=i[12],E=i[1],D=i[5],I=i[9],k=i[13],L=i[2],U=i[6],W=i[10],G=i[14],z=i[3],V=i[7],j=i[11],H=i[15];return o[0]=a*A+s*E+l*L+u*z,o[4]=a*M+s*D+l*U+u*V,o[8]=a*T+s*I+l*W+u*j,o[12]=a*C+s*k+l*G+u*H,o[1]=d*A+c*E+h*L+f*z,o[5]=d*M+c*D+h*U+f*V,o[9]=d*T+c*I+h*W+f*j,o[13]=d*C+c*k+h*G+f*H,o[2]=g*A+y*E+m*L+p*z,o[6]=g*M+y*D+m*U+p*V,o[10]=g*T+y*I+m*W+p*j,o[14]=g*C+y*k+m*G+p*H,o[3]=v*A+b*E+x*L+_*z,o[7]=v*M+b*D+x*U+_*V,o[11]=v*T+b*I+x*W+_*j,o[15]=v*C+b*k+x*G+_*H,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],n=t[4],i=t[8],o=t[12],a=t[1],s=t[5],l=t[9],u=t[13],d=t[2],c=t[6],h=t[10],f=t[14],g=t[3],y=t[7],m=t[11],p=t[15];return g*(+o*l*c-i*u*c-o*s*h+n*u*h+i*s*f-n*l*f)+y*(+r*l*f-r*u*h+o*a*h-i*a*f+i*u*d-o*l*d)+m*(+r*u*c-r*s*f-o*a*c+n*a*f+o*s*d-n*u*d)+p*(-i*s*d-r*l*c+r*s*h+i*a*c-n*a*h+n*l*d)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=r,i[14]=n),this}invert(){const t=this.elements,r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],d=t[8],c=t[9],h=t[10],f=t[11],g=t[12],y=t[13],m=t[14],p=t[15],v=c*m*u-y*h*u+y*l*f-s*m*f-c*l*p+s*h*p,b=g*h*u-d*m*u-g*l*f+a*m*f+d*l*p-a*h*p,x=d*y*u-g*c*u+g*s*f-a*y*f-d*s*p+a*c*p,_=g*c*l-d*y*l-g*s*h+a*y*h+d*s*m-a*c*m,A=r*v+n*b+i*x+o*_;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/A;return t[0]=v*M,t[1]=(y*h*o-c*m*o-y*i*f+n*m*f+c*i*p-n*h*p)*M,t[2]=(s*m*o-y*l*o+y*i*u-n*m*u-s*i*p+n*l*p)*M,t[3]=(c*l*o-s*h*o-c*i*u+n*h*u+s*i*f-n*l*f)*M,t[4]=b*M,t[5]=(d*m*o-g*h*o+g*i*f-r*m*f-d*i*p+r*h*p)*M,t[6]=(g*l*o-a*m*o-g*i*u+r*m*u+a*i*p-r*l*p)*M,t[7]=(a*h*o-d*l*o+d*i*u-r*h*u-a*i*f+r*l*f)*M,t[8]=x*M,t[9]=(g*c*o-d*y*o-g*n*f+r*y*f+d*n*p-r*c*p)*M,t[10]=(a*y*o-g*s*o+g*n*u-r*y*u-a*n*p+r*s*p)*M,t[11]=(d*s*o-a*c*o-d*n*u+r*c*u+a*n*f-r*s*f)*M,t[12]=_*M,t[13]=(d*y*i-g*c*i+g*n*h-r*y*h-d*n*m+r*c*m)*M,t[14]=(g*s*i-a*y*i-g*n*l+r*y*l+a*n*m-r*s*m)*M,t[15]=(a*c*i-d*s*i+d*n*l-r*c*l-a*n*h+r*s*h)*M,this}scale(t){const r=this.elements,n=t.x,i=t.y,o=t.z;return r[0]*=n,r[4]*=i,r[8]*=o,r[1]*=n,r[5]*=i,r[9]*=o,r[2]*=n,r[6]*=i,r[10]*=o,r[3]*=n,r[7]*=i,r[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,n,i))}makeTranslation(t,r,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,r,0,0,1,n,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),n=Math.sin(t);return this.set(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),n=Math.sin(t);return this.set(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const n=Math.cos(r),i=Math.sin(r),o=1-n,a=t.x,s=t.y,l=t.z,u=o*a,d=o*s;return this.set(u*a+n,u*s-i*l,u*l+i*s,0,u*s+i*l,d*s+n,d*l-i*a,0,u*l-i*s,d*l+i*a,o*l*l+n,0,0,0,0,1),this}makeScale(t,r,n){return this.set(t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,r,n,i,o,a){return this.set(1,n,o,0,t,1,a,0,r,i,1,0,0,0,0,1),this}compose(t,r,n){const i=this.elements,o=r._x,a=r._y,s=r._z,l=r._w,u=o+o,d=a+a,c=s+s,h=o*u,f=o*d,g=o*c,y=a*d,m=a*c,p=s*c,v=l*u,b=l*d,x=l*c,_=n.x,A=n.y,M=n.z;return i[0]=(1-(y+p))*_,i[1]=(f+x)*_,i[2]=(g-b)*_,i[3]=0,i[4]=(f-x)*A,i[5]=(1-(h+p))*A,i[6]=(m+v)*A,i[7]=0,i[8]=(g+b)*M,i[9]=(m-v)*M,i[10]=(1-(h+y))*M,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,r,n){const i=this.elements;let o=Yv.set(i[0],i[1],i[2]).length();const a=Yv.set(i[4],i[5],i[6]).length(),s=Yv.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),t.x=i[12],t.y=i[13],t.z=i[14],uu.copy(this);const u=1/o,d=1/a,c=1/s;return uu.elements[0]*=u,uu.elements[1]*=u,uu.elements[2]*=u,uu.elements[4]*=d,uu.elements[5]*=d,uu.elements[6]*=d,uu.elements[8]*=c,uu.elements[9]*=c,uu.elements[10]*=c,r.setFromRotationMatrix(uu),n.x=o,n.y=a,n.z=s,this}makePerspective(t,r,n,i,o,a,s=Du){const l=this.elements,u=2*o/(r-t),d=2*o/(n-i),c=(r+t)/(r-t),h=(n+i)/(n-i);let f,g;if(s===Du)f=-(a+o)/(a-o),g=-2*a*o/(a-o);else if(s===_x)f=-a/(a-o),g=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=u,l[4]=0,l[8]=c,l[12]=0,l[1]=0,l[5]=d,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,r,n,i,o,a,s=Du){const l=this.elements,u=1/(r-t),d=1/(n-i),c=1/(a-o),h=(r+t)*u,f=(n+i)*d;let g,y;if(s===Du)g=(a+o)*c,y=-2*c;else if(s===_x)g=o*c,y=-1*c;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=y,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const r=this.elements,n=t.elements;for(let i=0;i<16;i++)if(r[i]!==n[i])return!1;return!0}fromArray(t,r=0){for(let n=0;n<16;n++)this.elements[n]=t[n+r];return this}toArray(t=[],r=0){const n=this.elements;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t[r+9]=n[9],t[r+10]=n[10],t[r+11]=n[11],t[r+12]=n[12],t[r+13]=n[13],t[r+14]=n[14],t[r+15]=n[15],t}}const Yv=new pe,uu=new pr,Xve=new pe(0,0,0),Yve=new pe(1,1,1),xf=new pe,RT=new pe,zs=new pe,Z6=new pr,$6=new To;class lM{constructor(t=0,r=0,n=0,i=lM.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=r,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,n,i=this._order){return this._x=t,this._y=r,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,n=!0){const i=t.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],d=i[9],c=i[2],h=i[6],f=i[10];switch(r){case"XYZ":this._y=Math.asin(pi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-d,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-pi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-c,o),this._z=0);break;case"ZXY":this._x=Math.asin(pi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-pi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(pi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-c,o)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-pi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-d,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,r,n){return Z6.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Z6,r,n)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return $6.setFromEuler(this),this.setFromQuaternion($6,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}lM.DEFAULT_ORDER="XYZ";class Xg{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Kve=0;const eW=new pe,Kv=new To,Dd=new pr,IT=new pe,Kw=new pe,Jve=new pe,Qve=new To,tW=new pe(1,0,0),rW=new pe(0,1,0),nW=new pe(0,0,1),Zve={type:"added"},$ve={type:"removed"};class Qr extends ud{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Kve++}),this.uuid=rl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qr.DEFAULT_UP.clone();const t=new pe,r=new lM,n=new To,i=new pe(1,1,1);function o(){n.setFromEuler(r,!1)}function a(){r.setFromQuaternion(n,void 0,!1)}r._onChange(o),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new pr},normalMatrix:{value:new Br}}),this.matrix=new pr,this.matrixWorld=new pr,this.matrixAutoUpdate=Qr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Qr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Xg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return Kv.setFromAxisAngle(t,r),this.quaternion.multiply(Kv),this}rotateOnWorldAxis(t,r){return Kv.setFromAxisAngle(t,r),this.quaternion.premultiply(Kv),this}rotateX(t){return this.rotateOnAxis(tW,t)}rotateY(t){return this.rotateOnAxis(rW,t)}rotateZ(t){return this.rotateOnAxis(nW,t)}translateOnAxis(t,r){return eW.copy(t).applyQuaternion(this.quaternion),this.position.add(eW.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(tW,t)}translateY(t){return this.translateOnAxis(rW,t)}translateZ(t){return this.translateOnAxis(nW,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Dd.copy(this.matrixWorld).invert())}lookAt(t,r,n){t.isVector3?IT.copy(t):IT.set(t,r,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Kw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dd.lookAt(Kw,IT,this.up):Dd.lookAt(IT,Kw,this.up),this.quaternion.setFromRotationMatrix(Dd),i&&(Dd.extractRotation(i.matrixWorld),Kv.setFromRotationMatrix(Dd),this.quaternion.premultiply(Kv.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Zve)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent($ve)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Dd.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Dd.multiply(t.parent.matrixWorld)),t.applyMatrix4(Dd),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(t,r);if(a!==void 0)return a}}getObjectsByProperty(t,r,n=[]){this[t]===r&&n.push(this);const i=this.children;for(let o=0,a=i.length;o<a;o++)i[o].getObjectsByProperty(t,r,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kw,t,Jve),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kw,Qve,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverseVisible(t)}traverseAncestors(t){const r=this.parent;r!==null&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let n=0,i=r.length;n<i;n++){const o=r[n];(o.matrixWorldAutoUpdate===!0||t===!0)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,r){const n=this.parent;if(t===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0){const i=this.children;for(let o=0,a=i.length;o<a;o++){const s=i[o];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(t){const r=t===void 0||typeof t=="string",n={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(t.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){const c=l[u];o(t.shapes,c)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(o(t.materials,this.material[l]));i.material=s}else i.material=o(t.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(o(t.animations,l))}}if(r){const s=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),c=a(t.shapes),h=a(t.skeletons),f=a(t.animations),g=a(t.nodes);s.length>0&&(n.geometries=s),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),d.length>0&&(n.images=d),c.length>0&&(n.shapes=c),h.length>0&&(n.skeletons=h),f.length>0&&(n.animations=f),g.length>0&&(n.nodes=g)}return n.object=i,n;function a(s){const l=[];for(const u in s){const d=s[u];delete d.metadata,l.push(d)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let n=0;n<t.children.length;n++){const i=t.children[n];this.add(i.clone())}return this}}Qr.DEFAULT_UP=new pe(0,1,0);Qr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Qr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const cu=new pe,Od=new pe,Y3=new pe,Rd=new pe,Jv=new pe,Qv=new pe,iW=new pe,K3=new pe,J3=new pe,Q3=new pe;let LT=!1;class cs{constructor(t=new pe,r=new pe,n=new pe){this.a=t,this.b=r,this.c=n}static getNormal(t,r,n,i){i.subVectors(n,r),cu.subVectors(t,r),i.cross(cu);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(t,r,n,i,o){cu.subVectors(i,r),Od.subVectors(n,r),Y3.subVectors(t,r);const a=cu.dot(cu),s=cu.dot(Od),l=cu.dot(Y3),u=Od.dot(Od),d=Od.dot(Y3),c=a*u-s*s;if(c===0)return o.set(-2,-1,-1);const h=1/c,f=(u*l-s*d)*h,g=(a*d-s*l)*h;return o.set(1-f-g,g,f)}static containsPoint(t,r,n,i){return this.getBarycoord(t,r,n,i,Rd),Rd.x>=0&&Rd.y>=0&&Rd.x+Rd.y<=1}static getUV(t,r,n,i,o,a,s,l){return LT===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),LT=!0),this.getInterpolation(t,r,n,i,o,a,s,l)}static getInterpolation(t,r,n,i,o,a,s,l){return this.getBarycoord(t,r,n,i,Rd),l.setScalar(0),l.addScaledVector(o,Rd.x),l.addScaledVector(a,Rd.y),l.addScaledVector(s,Rd.z),l}static isFrontFacing(t,r,n,i){return cu.subVectors(n,r),Od.subVectors(t,r),cu.cross(Od).dot(i)<0}set(t,r,n){return this.a.copy(t),this.b.copy(r),this.c.copy(n),this}setFromPointsAndIndices(t,r,n,i){return this.a.copy(t[r]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,r,n,i){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return cu.subVectors(this.c,this.b),Od.subVectors(this.a,this.b),cu.cross(Od).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return cs.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return cs.getBarycoord(t,this.a,this.b,this.c,r)}getUV(t,r,n,i,o){return LT===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),LT=!0),cs.getInterpolation(t,this.a,this.b,this.c,r,n,i,o)}getInterpolation(t,r,n,i,o){return cs.getInterpolation(t,this.a,this.b,this.c,r,n,i,o)}containsPoint(t){return cs.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return cs.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const n=this.a,i=this.b,o=this.c;let a,s;Jv.subVectors(i,n),Qv.subVectors(o,n),K3.subVectors(t,n);const l=Jv.dot(K3),u=Qv.dot(K3);if(l<=0&&u<=0)return r.copy(n);J3.subVectors(t,i);const d=Jv.dot(J3),c=Qv.dot(J3);if(d>=0&&c<=d)return r.copy(i);const h=l*c-d*u;if(h<=0&&l>=0&&d<=0)return a=l/(l-d),r.copy(n).addScaledVector(Jv,a);Q3.subVectors(t,o);const f=Jv.dot(Q3),g=Qv.dot(Q3);if(g>=0&&f<=g)return r.copy(o);const y=f*u-l*g;if(y<=0&&u>=0&&g<=0)return s=u/(u-g),r.copy(n).addScaledVector(Qv,s);const m=d*g-f*c;if(m<=0&&c-d>=0&&f-g>=0)return iW.subVectors(o,i),s=(c-d)/(c-d+(f-g)),r.copy(i).addScaledVector(iW,s);const p=1/(m+y+h);return a=y*p,s=h*p,r.copy(n).addScaledVector(Jv,a).addScaledVector(Qv,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Tte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wf={h:0,s:0,l:0},BT={h:0,s:0,l:0};function Z3(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}class Dt{constructor(t,r,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,r,n)}set(t,r,n){if(r===void 0&&n===void 0){const i=t;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(t,r,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=ro){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,pn.toWorkingColorSpace(this,r),this}setRGB(t,r,n,i=pn.workingColorSpace){return this.r=t,this.g=r,this.b=n,pn.toWorkingColorSpace(this,i),this}setHSL(t,r,n,i=pn.workingColorSpace){if(t=V4(t,1),r=pi(r,0,1),n=pi(n,0,1),r===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+r):n+r-n*r,a=2*n-o;this.r=Z3(a,o,t+1/3),this.g=Z3(a,o,t),this.b=Z3(a,o,t-1/3)}return pn.toWorkingColorSpace(this,i),this}setStyle(t,r=ro){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,r);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,r);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=i[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,r);if(a===6)return this.setHex(parseInt(o,16),r);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,r);return this}setColorName(t,r=ro){const n=Tte[t.toLowerCase()];return n!==void 0?this.setHex(n,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=jb(t.r),this.g=jb(t.g),this.b=jb(t.b),this}copyLinearToSRGB(t){return this.r=U3(t.r),this.g=U3(t.g),this.b=U3(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ro){return pn.fromWorkingColorSpace(Yo.copy(this),t),Math.round(pi(Yo.r*255,0,255))*65536+Math.round(pi(Yo.g*255,0,255))*256+Math.round(pi(Yo.b*255,0,255))}getHexString(t=ro){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=pn.workingColorSpace){pn.fromWorkingColorSpace(Yo.copy(this),r);const n=Yo.r,i=Yo.g,o=Yo.b,a=Math.max(n,i,o),s=Math.min(n,i,o);let l,u;const d=(s+a)/2;if(s===a)l=0,u=0;else{const c=a-s;switch(u=d<=.5?c/(a+s):c/(2-a-s),a){case n:l=(i-o)/c+(i<o?6:0);break;case i:l=(o-n)/c+2;break;case o:l=(n-i)/c+4;break}l/=6}return t.h=l,t.s=u,t.l=d,t}getRGB(t,r=pn.workingColorSpace){return pn.fromWorkingColorSpace(Yo.copy(this),r),t.r=Yo.r,t.g=Yo.g,t.b=Yo.b,t}getStyle(t=ro){pn.fromWorkingColorSpace(Yo.copy(this),t);const r=Yo.r,n=Yo.g,i=Yo.b;return t!==ro?`color(${t} ${r.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(t,r,n){return this.getHSL(wf),this.setHSL(wf.h+t,wf.s+r,wf.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,n){return this.r=t.r+(r.r-t.r)*n,this.g=t.g+(r.g-t.g)*n,this.b=t.b+(r.b-t.b)*n,this}lerpHSL(t,r){this.getHSL(wf),t.getHSL(BT);const n=bS(wf.h,BT.h,r),i=bS(wf.s,BT.s,r),o=bS(wf.l,BT.l,r);return this.setHSL(n,i,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const r=this.r,n=this.g,i=this.b,o=t.elements;return this.r=o[0]*r+o[3]*n+o[6]*i,this.g=o[1]*r+o[4]*n+o[7]*i,this.b=o[2]*r+o[5]*n+o[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Yo=new Dt;Dt.NAMES=Tte;let eye=0;class Hi extends ud{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:eye++}),this.uuid=rl(),this.name="",this.type="Material",this.blending=Gg,this.side=Zc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=mD,this.blendDst=gD,this.blendEquation=$f,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Dt(0,0,0),this.blendAlpha=0,this.depthFunc=uA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=VF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=dg,this.stencilZFail=dg,this.stencilZPass=dg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const r in t){const n=t[r];if(n===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const i=this[r];if(i===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[r]=n}}toJSON(t){const r=t===void 0||typeof t=="string";r&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Gg&&(n.blending=this.blending),this.side!==Zc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==mD&&(n.blendSrc=this.blendSrc),this.blendDst!==gD&&(n.blendDst=this.blendDst),this.blendEquation!==$f&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==uA&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==VF&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==dg&&(n.stencilFail=this.stencilFail),this.stencilZFail!==dg&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==dg&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(o){const a=[];for(const s in o){const l=o[s];delete l.metadata,a.push(l)}return a}if(r){const o=i(t.textures),a=i(t.images);o.length>0&&(n.textures=o),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let n=null;if(r!==null){const i=r.length;n=new Array(i);for(let o=0;o!==i;++o)n[o]=r[o].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Js extends Hi{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=aM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ih=tye();function tye(){const e=new ArrayBuffer(4),t=new Float32Array(e),r=new Uint32Array(e),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,o[l]=u|d}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:t,uint32View:r,baseTable:n,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}function as(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=pi(e,-65504,65504),ih.floatView[0]=e;const t=ih.uint32View[0],r=t>>23&511;return ih.baseTable[r]+((t&8388607)>>ih.shiftTable[r])}function K_(e){const t=e>>10;return ih.uint32View[0]=ih.mantissaTable[ih.offsetTable[t]+(e&1023)]+ih.exponentTable[t],ih.floatView[0]}const rye={toHalfFloat:as,fromHalfFloat:K_},Li=new pe,NT=new lt;class Zr{constructor(t,r,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=r,this.count=t!==void 0?t.length/r:0,this.normalized=n,this.usage=vA,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Pu,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return console.warn('THREE.BufferAttribute: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,r,n){t*=this.itemSize,n*=r.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[t+i]=r.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let r=0,n=this.count;r<n;r++)NT.fromBufferAttribute(this,r),NT.applyMatrix3(t),this.setXY(r,NT.x,NT.y);else if(this.itemSize===3)for(let r=0,n=this.count;r<n;r++)Li.fromBufferAttribute(this,r),Li.applyMatrix3(t),this.setXYZ(r,Li.x,Li.y,Li.z);return this}applyMatrix4(t){for(let r=0,n=this.count;r<n;r++)Li.fromBufferAttribute(this,r),Li.applyMatrix4(t),this.setXYZ(r,Li.x,Li.y,Li.z);return this}applyNormalMatrix(t){for(let r=0,n=this.count;r<n;r++)Li.fromBufferAttribute(this,r),Li.applyNormalMatrix(t),this.setXYZ(r,Li.x,Li.y,Li.z);return this}transformDirection(t){for(let r=0,n=this.count;r<n;r++)Li.fromBufferAttribute(this,r),Li.transformDirection(t),this.setXYZ(r,Li.x,Li.y,Li.z);return this}set(t,r=0){return this.array.set(t,r),this}getComponent(t,r){let n=this.array[t*this.itemSize+r];return this.normalized&&(n=fs(n,this.array)),n}setComponent(t,r,n){return this.normalized&&(n=Ir(n,this.array)),this.array[t*this.itemSize+r]=n,this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=fs(r,this.array)),r}setX(t,r){return this.normalized&&(r=Ir(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=fs(r,this.array)),r}setY(t,r){return this.normalized&&(r=Ir(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=fs(r,this.array)),r}setZ(t,r){return this.normalized&&(r=Ir(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=fs(r,this.array)),r}setW(t,r){return this.normalized&&(r=Ir(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,n){return t*=this.itemSize,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array)),this.array[t+0]=r,this.array[t+1]=n,this}setXYZ(t,r,n,i){return t*=this.itemSize,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array),i=Ir(i,this.array)),this.array[t+0]=r,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,r,n,i,o){return t*=this.itemSize,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array),i=Ir(i,this.array),o=Ir(o,this.array)),this.array[t+0]=r,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==vA&&(t.usage=this.usage),t}}class nye extends Zr{constructor(t,r,n){super(new Int8Array(t),r,n)}}class iye extends Zr{constructor(t,r,n){super(new Uint8Array(t),r,n)}}class oye extends Zr{constructor(t,r,n){super(new Uint8ClampedArray(t),r,n)}}class aye extends Zr{constructor(t,r,n){super(new Int16Array(t),r,n)}}class G4 extends Zr{constructor(t,r,n){super(new Uint16Array(t),r,n)}}class sye extends Zr{constructor(t,r,n){super(new Int32Array(t),r,n)}}class W4 extends Zr{constructor(t,r,n){super(new Uint32Array(t),r,n)}}class lye extends Zr{constructor(t,r,n){super(new Uint16Array(t),r,n),this.isFloat16BufferAttribute=!0}getX(t){let r=K_(this.array[t*this.itemSize]);return this.normalized&&(r=fs(r,this.array)),r}setX(t,r){return this.normalized&&(r=Ir(r,this.array)),this.array[t*this.itemSize]=as(r),this}getY(t){let r=K_(this.array[t*this.itemSize+1]);return this.normalized&&(r=fs(r,this.array)),r}setY(t,r){return this.normalized&&(r=Ir(r,this.array)),this.array[t*this.itemSize+1]=as(r),this}getZ(t){let r=K_(this.array[t*this.itemSize+2]);return this.normalized&&(r=fs(r,this.array)),r}setZ(t,r){return this.normalized&&(r=Ir(r,this.array)),this.array[t*this.itemSize+2]=as(r),this}getW(t){let r=K_(this.array[t*this.itemSize+3]);return this.normalized&&(r=fs(r,this.array)),r}setW(t,r){return this.normalized&&(r=Ir(r,this.array)),this.array[t*this.itemSize+3]=as(r),this}setXY(t,r,n){return t*=this.itemSize,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array)),this.array[t+0]=as(r),this.array[t+1]=as(n),this}setXYZ(t,r,n,i){return t*=this.itemSize,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array),i=Ir(i,this.array)),this.array[t+0]=as(r),this.array[t+1]=as(n),this.array[t+2]=as(i),this}setXYZW(t,r,n,i,o){return t*=this.itemSize,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array),i=Ir(i,this.array),o=Ir(o,this.array)),this.array[t+0]=as(r),this.array[t+1]=as(n),this.array[t+2]=as(i),this.array[t+3]=as(o),this}}class Wt extends Zr{constructor(t,r,n){super(new Float32Array(t),r,n)}}class uye extends Zr{constructor(t,r,n){super(new Float64Array(t),r,n)}}let cye=0;const xl=new pr,$3=new Qr,Zv=new pe,Us=new oa,Jw=new oa,go=new pe;class Er extends ud{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cye++}),this.uuid=rl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ate(t)?W4:G4)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,r,n=0){this.groups.push({start:t,count:r,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(t),r.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new Br().getNormalMatrix(t);n.applyNormalMatrix(o),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return xl.makeRotationFromQuaternion(t),this.applyMatrix4(xl),this}rotateX(t){return xl.makeRotationX(t),this.applyMatrix4(xl),this}rotateY(t){return xl.makeRotationY(t),this.applyMatrix4(xl),this}rotateZ(t){return xl.makeRotationZ(t),this.applyMatrix4(xl),this}translate(t,r,n){return xl.makeTranslation(t,r,n),this.applyMatrix4(xl),this}scale(t,r,n){return xl.makeScale(t,r,n),this.applyMatrix4(xl),this}lookAt(t){return $3.lookAt(t),$3.updateMatrix(),this.applyMatrix4($3.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zv).negate(),this.translate(Zv.x,Zv.y,Zv.z),this}setFromPoints(t){const r=[];for(let n=0,i=t.length;n<i;n++){const o=t[n];r.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Wt(r,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new oa);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),r)for(let n=0,i=r.length;n<i;n++){const o=r[n];Us.setFromBufferAttribute(o),this.morphTargetsRelative?(go.addVectors(this.boundingBox.min,Us.min),this.boundingBox.expandByPoint(go),go.addVectors(this.boundingBox.max,Us.max),this.boundingBox.expandByPoint(go)):(this.boundingBox.expandByPoint(Us.min),this.boundingBox.expandByPoint(Us.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zo);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new pe,1/0);return}if(t){const n=this.boundingSphere.center;if(Us.setFromBufferAttribute(t),r)for(let o=0,a=r.length;o<a;o++){const s=r[o];Jw.setFromBufferAttribute(s),this.morphTargetsRelative?(go.addVectors(Us.min,Jw.min),Us.expandByPoint(go),go.addVectors(Us.max,Jw.max),Us.expandByPoint(go)):(Us.expandByPoint(Jw.min),Us.expandByPoint(Jw.max))}Us.getCenter(n);let i=0;for(let o=0,a=t.count;o<a;o++)go.fromBufferAttribute(t,o),i=Math.max(i,n.distanceToSquared(go));if(r)for(let o=0,a=r.length;o<a;o++){const s=r[o],l=this.morphTargetsRelative;for(let u=0,d=s.count;u<d;u++)go.fromBufferAttribute(s,u),l&&(Zv.fromBufferAttribute(t,u),go.add(Zv)),i=Math.max(i,n.distanceToSquared(go))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,r=this.attributes;if(t===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.array,i=r.position.array,o=r.normal.array,a=r.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Zr(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,u=[],d=[];for(let E=0;E<s;E++)u[E]=new pe,d[E]=new pe;const c=new pe,h=new pe,f=new pe,g=new lt,y=new lt,m=new lt,p=new pe,v=new pe;function b(E,D,I){c.fromArray(i,E*3),h.fromArray(i,D*3),f.fromArray(i,I*3),g.fromArray(a,E*2),y.fromArray(a,D*2),m.fromArray(a,I*2),h.sub(c),f.sub(c),y.sub(g),m.sub(g);const k=1/(y.x*m.y-m.x*y.y);isFinite(k)&&(p.copy(h).multiplyScalar(m.y).addScaledVector(f,-y.y).multiplyScalar(k),v.copy(f).multiplyScalar(y.x).addScaledVector(h,-m.x).multiplyScalar(k),u[E].add(p),u[D].add(p),u[I].add(p),d[E].add(v),d[D].add(v),d[I].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:n.length}]);for(let E=0,D=x.length;E<D;++E){const I=x[E],k=I.start,L=I.count;for(let U=k,W=k+L;U<W;U+=3)b(n[U+0],n[U+1],n[U+2])}const _=new pe,A=new pe,M=new pe,T=new pe;function C(E){M.fromArray(o,E*3),T.copy(M);const D=u[E];_.copy(D),_.sub(M.multiplyScalar(M.dot(D))).normalize(),A.crossVectors(T,D);const k=A.dot(d[E])<0?-1:1;l[E*4]=_.x,l[E*4+1]=_.y,l[E*4+2]=_.z,l[E*4+3]=k}for(let E=0,D=x.length;E<D;++E){const I=x[E],k=I.start,L=I.count;for(let U=k,W=k+L;U<W;U+=3)C(n[U+0]),C(n[U+1]),C(n[U+2])}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(r!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Zr(new Float32Array(r.count*3),3),this.setAttribute("normal",n);else for(let h=0,f=n.count;h<f;h++)n.setXYZ(h,0,0,0);const i=new pe,o=new pe,a=new pe,s=new pe,l=new pe,u=new pe,d=new pe,c=new pe;if(t)for(let h=0,f=t.count;h<f;h+=3){const g=t.getX(h+0),y=t.getX(h+1),m=t.getX(h+2);i.fromBufferAttribute(r,g),o.fromBufferAttribute(r,y),a.fromBufferAttribute(r,m),d.subVectors(a,o),c.subVectors(i,o),d.cross(c),s.fromBufferAttribute(n,g),l.fromBufferAttribute(n,y),u.fromBufferAttribute(n,m),s.add(d),l.add(d),u.add(d),n.setXYZ(g,s.x,s.y,s.z),n.setXYZ(y,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z)}else for(let h=0,f=r.count;h<f;h+=3)i.fromBufferAttribute(r,h+0),o.fromBufferAttribute(r,h+1),a.fromBufferAttribute(r,h+2),d.subVectors(a,o),c.subVectors(i,o),d.cross(c),n.setXYZ(h+0,d.x,d.y,d.z),n.setXYZ(h+1,d.x,d.y,d.z),n.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let r=0,n=t.count;r<n;r++)go.fromBufferAttribute(t,r),go.normalize(),t.setXYZ(r,go.x,go.y,go.z)}toNonIndexed(){function t(s,l){const u=s.array,d=s.itemSize,c=s.normalized,h=new u.constructor(l.length*d);let f=0,g=0;for(let y=0,m=l.length;y<m;y++){s.isInterleavedBufferAttribute?f=l[y]*s.data.stride+s.offset:f=l[y]*d;for(let p=0;p<d;p++)h[g++]=u[f++]}return new Zr(h,d,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Er,n=this.index.array,i=this.attributes;for(const s in i){const l=i[s],u=t(l,n);r.setAttribute(s,u)}const o=this.morphAttributes;for(const s in o){const l=[],u=o[s];for(let d=0,c=u.length;d<c;d++){const h=u[d],f=t(h,n);l.push(f)}r.morphAttributes[s]=l}r.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,l=a.length;s<l;s++){const u=a[s];r.addGroup(u.start,u.count,u.materialIndex)}return r}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};const r=this.index;r!==null&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const n=this.attributes;for(const l in n){const u=n[l];t.data.attributes[l]=u.toJSON(t.data)}const i={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],d=[];for(let c=0,h=u.length;c<h;c++){const f=u[c];d.push(f.toJSON(t.data))}d.length>0&&(i[l]=d,o=!0)}o&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(r));const i=t.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(r))}const o=t.morphAttributes;for(const u in o){const d=[],c=o[u];for(let h=0,f=c.length;h<f;h++)d.push(c[h].clone(r));this.morphAttributes[u]=d}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let u=0,d=a.length;u<d;u++){const c=a[u];this.addGroup(c.start,c.count,c.materialIndex)}const s=t.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const oW=new pr,jm=new T0,kT=new zo,aW=new pe,$v=new pe,ey=new pe,ty=new pe,eL=new pe,FT=new pe,zT=new lt,UT=new lt,VT=new lt,sW=new pe,lW=new pe,uW=new pe,jT=new pe,HT=new pe;class ji extends Qr{constructor(t=new Er,r=new Js){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,n=Object.keys(r);if(n.length>0){const i=r[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(t,r){const n=this.geometry,i=n.attributes.position,o=n.morphAttributes.position,a=n.morphTargetsRelative;r.fromBufferAttribute(i,t);const s=this.morphTargetInfluences;if(o&&s){FT.set(0,0,0);for(let l=0,u=o.length;l<u;l++){const d=s[l],c=o[l];d!==0&&(eL.fromBufferAttribute(c,t),a?FT.addScaledVector(eL,d):FT.addScaledVector(eL.sub(r),d))}r.add(FT)}return r}raycast(t,r){const n=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),kT.copy(n.boundingSphere),kT.applyMatrix4(o),jm.copy(t.ray).recast(t.near),!(kT.containsPoint(jm.origin)===!1&&(jm.intersectSphere(kT,aW)===null||jm.origin.distanceToSquared(aW)>(t.far-t.near)**2))&&(oW.copy(o).invert(),jm.copy(t.ray).applyMatrix4(oW),!(n.boundingBox!==null&&jm.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,r,jm)))}_computeIntersections(t,r,n){let i;const o=this.geometry,a=this.material,s=o.index,l=o.attributes.position,u=o.attributes.uv,d=o.attributes.uv1,c=o.attributes.normal,h=o.groups,f=o.drawRange;if(s!==null)if(Array.isArray(a))for(let g=0,y=h.length;g<y;g++){const m=h[g],p=a[m.materialIndex],v=Math.max(m.start,f.start),b=Math.min(s.count,Math.min(m.start+m.count,f.start+f.count));for(let x=v,_=b;x<_;x+=3){const A=s.getX(x),M=s.getX(x+1),T=s.getX(x+2);i=GT(this,p,t,n,u,d,c,A,M,T),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=m.materialIndex,r.push(i))}}else{const g=Math.max(0,f.start),y=Math.min(s.count,f.start+f.count);for(let m=g,p=y;m<p;m+=3){const v=s.getX(m),b=s.getX(m+1),x=s.getX(m+2);i=GT(this,a,t,n,u,d,c,v,b,x),i&&(i.faceIndex=Math.floor(m/3),r.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let g=0,y=h.length;g<y;g++){const m=h[g],p=a[m.materialIndex],v=Math.max(m.start,f.start),b=Math.min(l.count,Math.min(m.start+m.count,f.start+f.count));for(let x=v,_=b;x<_;x+=3){const A=x,M=x+1,T=x+2;i=GT(this,p,t,n,u,d,c,A,M,T),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=m.materialIndex,r.push(i))}}else{const g=Math.max(0,f.start),y=Math.min(l.count,f.start+f.count);for(let m=g,p=y;m<p;m+=3){const v=m,b=m+1,x=m+2;i=GT(this,a,t,n,u,d,c,v,b,x),i&&(i.faceIndex=Math.floor(m/3),r.push(i))}}}}function dye(e,t,r,n,i,o,a,s){let l;if(t.side===ja?l=n.intersectTriangle(a,o,i,!0,s):l=n.intersectTriangle(i,o,a,t.side===Zc,s),l===null)return null;HT.copy(s),HT.applyMatrix4(e.matrixWorld);const u=r.ray.origin.distanceTo(HT);return u<r.near||u>r.far?null:{distance:u,point:HT.clone(),object:e}}function GT(e,t,r,n,i,o,a,s,l,u){e.getVertexPosition(s,$v),e.getVertexPosition(l,ey),e.getVertexPosition(u,ty);const d=dye(e,t,r,n,$v,ey,ty,jT);if(d){i&&(zT.fromBufferAttribute(i,s),UT.fromBufferAttribute(i,l),VT.fromBufferAttribute(i,u),d.uv=cs.getInterpolation(jT,$v,ey,ty,zT,UT,VT,new lt)),o&&(zT.fromBufferAttribute(o,s),UT.fromBufferAttribute(o,l),VT.fromBufferAttribute(o,u),d.uv1=cs.getInterpolation(jT,$v,ey,ty,zT,UT,VT,new lt),d.uv2=d.uv1),a&&(sW.fromBufferAttribute(a,s),lW.fromBufferAttribute(a,l),uW.fromBufferAttribute(a,u),d.normal=cs.getInterpolation(jT,$v,ey,ty,sW,lW,uW,new pe),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const c={a:s,b:l,c:u,normal:new pe,materialIndex:0};cs.getNormal($v,ey,ty,c.normal),d.face=c}return d}class E0 extends Er{constructor(t=1,r=1,n=1,i=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:n,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const l=[],u=[],d=[],c=[];let h=0,f=0;g("z","y","x",-1,-1,n,r,t,a,o,0),g("z","y","x",1,-1,n,r,-t,a,o,1),g("x","z","y",1,1,t,n,r,i,a,2),g("x","z","y",1,-1,t,n,-r,i,a,3),g("x","y","z",1,-1,t,r,n,i,o,4),g("x","y","z",-1,-1,t,r,-n,i,o,5),this.setIndex(l),this.setAttribute("position",new Wt(u,3)),this.setAttribute("normal",new Wt(d,3)),this.setAttribute("uv",new Wt(c,2));function g(y,m,p,v,b,x,_,A,M,T,C){const E=x/M,D=_/T,I=x/2,k=_/2,L=A/2,U=M+1,W=T+1;let G=0,z=0;const V=new pe;for(let j=0;j<W;j++){const H=j*D-k;for(let Y=0;Y<U;Y++){const Q=Y*E-I;V[y]=Q*v,V[m]=H*b,V[p]=L,u.push(V.x,V.y,V.z),V[y]=0,V[m]=0,V[p]=A>0?1:-1,d.push(V.x,V.y,V.z),c.push(Y/M),c.push(1-j/T),G+=1}}for(let j=0;j<T;j++)for(let H=0;H<M;H++){const Y=h+H+U*j,Q=h+H+U*(j+1),$=h+(H+1)+U*(j+1),ne=h+(H+1)+U*j;l.push(Y,Q,ne),l.push(Q,$,ne),z+=6}s.addGroup(f,z,C),f+=z,h+=G}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new E0(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ax(e){const t={};for(const r in e){t[r]={};for(const n in e[r]){const i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[r][n]=null):t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}}return t}function Ca(e){const t={};for(let r=0;r<e.length;r++){const n=Ax(e[r]);for(const i in n)t[i]=n[i]}return t}function hye(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}function Ete(e){return e.getRenderTarget()===null?e.outputColorSpace:pn.workingColorSpace}const Pte={clone:Ax,merge:Ca};var fye=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pye=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class td extends Hi{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=fye,this.fragmentShader=pye,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ax(t.uniforms),this.uniformsGroups=hye(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?r.uniforms[i]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?r.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?r.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?r.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?r.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?r.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?r.uniforms[i]={type:"m4",value:a.toArray()}:r.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(r.extensions=n),r}}class uM extends Qr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pr,this.projectionMatrix=new pr,this.projectionMatrixInverse=new pr,this.coordinateSystem=Du}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class kn extends uM{constructor(t=50,r=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=Sx*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(qg*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Sx*2*Math.atan(Math.tan(qg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,r,n,i,o,a){this.aspect=t/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(qg*.5*this.fov)/this.zoom,n=2*r,i=this.aspect*n,o=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;o+=a.offsetX*i/l,r-=a.offsetY*n/u,i*=a.width/l,n*=a.height/u}const s=this.filmOffset;s!==0&&(o+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,r,r-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const ry=-90,ny=1;class q4 extends Qr{constructor(t,r,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new kn(ry,ny,t,r);i.layers=this.layers,this.add(i);const o=new kn(ry,ny,t,r);o.layers=this.layers,this.add(o);const a=new kn(ry,ny,t,r);a.layers=this.layers,this.add(a);const s=new kn(ry,ny,t,r);s.layers=this.layers,this.add(s);const l=new kn(ry,ny,t,r);l.layers=this.layers,this.add(l);const u=new kn(ry,ny,t,r);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const t=this.coordinateSystem,r=this.children.concat(),[n,i,o,a,s,l]=r;for(const u of r)this.remove(u);if(t===Du)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(t===_x)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const u of r)this.add(u),u.updateMatrixWorld()}update(t,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,a,s,l,u,d]=this.children,c=t.getRenderTarget(),h=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),g=t.xr.enabled;t.xr.enabled=!1;const y=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,i),t.render(r,o),t.setRenderTarget(n,1,i),t.render(r,a),t.setRenderTarget(n,2,i),t.render(r,s),t.setRenderTarget(n,3,i),t.render(r,l),t.setRenderTarget(n,4,i),t.render(r,u),n.texture.generateMipmaps=y,t.setRenderTarget(n,5,i),t.render(r,d),t.setRenderTarget(c,h,f),t.xr.enabled=g,n.texture.needsPMREMUpdate=!0}}class cM extends Wn{constructor(t,r,n,i,o,a,s,l,u,d){t=t!==void 0?t:[],r=r!==void 0?r:Dh,super(t,r,n,i,o,a,s,l,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class X4 extends Hu{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];r.encoding!==void 0&&(xS("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Mp?ro:Xs),this.texture=new cM(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Qn}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new E0(5,5,5),o=new td({name:"CubemapFromEquirect",uniforms:Ax(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ja,blending:gh});o.uniforms.tEquirect.value=r;const a=new ji(i,o),s=r.minFilter;return r.minFilter===$c&&(r.minFilter=Qn),new q4(1,10,this).update(t,a),r.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(t,r,n,i){const o=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(r,n,i);t.setRenderTarget(o)}}const tL=new pe,mye=new pe,gye=new Br;class th{constructor(t=new pe(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,n,i){return this.normal.set(t,r,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,n){const i=tL.subVectors(n,r).cross(mye.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,r){const n=t.delta(tL),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?r.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:r.copy(t.start).addScaledVector(n,o)}intersectsLine(t){const r=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return r<0&&n>0||n<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const n=r||gye.getNormalMatrix(t),i=this.coplanarPoint(tL).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hm=new zo,WT=new pe;class dM{constructor(t=new th,r=new th,n=new th,i=new th,o=new th,a=new th){this.planes=[t,r,n,i,o,a]}set(t,r,n,i,o,a){const s=this.planes;return s[0].copy(t),s[1].copy(r),s[2].copy(n),s[3].copy(i),s[4].copy(o),s[5].copy(a),this}copy(t){const r=this.planes;for(let n=0;n<6;n++)r[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,r=Du){const n=this.planes,i=t.elements,o=i[0],a=i[1],s=i[2],l=i[3],u=i[4],d=i[5],c=i[6],h=i[7],f=i[8],g=i[9],y=i[10],m=i[11],p=i[12],v=i[13],b=i[14],x=i[15];if(n[0].setComponents(l-o,h-u,m-f,x-p).normalize(),n[1].setComponents(l+o,h+u,m+f,x+p).normalize(),n[2].setComponents(l+a,h+d,m+g,x+v).normalize(),n[3].setComponents(l-a,h-d,m-g,x-v).normalize(),n[4].setComponents(l-s,h-c,m-y,x-b).normalize(),r===Du)n[5].setComponents(l+s,h+c,m+y,x+b).normalize();else if(r===_x)n[5].setComponents(s,c,y,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Hm.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const r=t.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),Hm.copy(r.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Hm)}intersectsSprite(t){return Hm.center.set(0,0,0),Hm.radius=.7071067811865476,Hm.applyMatrix4(t.matrixWorld),this.intersectsSphere(Hm)}intersectsSphere(t){const r=this.planes,n=t.center,i=-t.radius;for(let o=0;o<6;o++)if(r[o].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){const r=this.planes;for(let n=0;n<6;n++){const i=r[n];if(WT.x=i.normal.x>0?t.max.x:t.min.x,WT.y=i.normal.y>0?t.max.y:t.min.y,WT.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(WT)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let n=0;n<6;n++)if(r[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Dte(){let e=null,t=!1,r=null,n=null;function i(o,a){r(o,a),n=e.requestAnimationFrame(i)}return{start:function(){t!==!0&&r!==null&&(n=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){r=o},setContext:function(o){e=o}}}function vye(e,t){const r=t.isWebGL2,n=new WeakMap;function i(u,d){const c=u.array,h=u.usage,f=c.byteLength,g=e.createBuffer();e.bindBuffer(d,g),e.bufferData(d,c,h),u.onUploadCallback();let y;if(c instanceof Float32Array)y=e.FLOAT;else if(c instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(r)y=e.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=e.UNSIGNED_SHORT;else if(c instanceof Int16Array)y=e.SHORT;else if(c instanceof Uint32Array)y=e.UNSIGNED_INT;else if(c instanceof Int32Array)y=e.INT;else if(c instanceof Int8Array)y=e.BYTE;else if(c instanceof Uint8Array)y=e.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)y=e.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:g,type:y,bytesPerElement:c.BYTES_PER_ELEMENT,version:u.version,size:f}}function o(u,d,c){const h=d.array,f=d._updateRange,g=d.updateRanges;if(e.bindBuffer(c,u),f.count===-1&&g.length===0&&e.bufferSubData(c,0,h),g.length!==0){for(let y=0,m=g.length;y<m;y++){const p=g[y];r?e.bufferSubData(c,p.start*h.BYTES_PER_ELEMENT,h,p.start,p.count):e.bufferSubData(c,p.start*h.BYTES_PER_ELEMENT,h.subarray(p.start,p.start+p.count))}d.clearUpdateRanges()}f.count!==-1&&(r?e.bufferSubData(c,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):e.bufferSubData(c,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),d.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=n.get(u);d&&(e.deleteBuffer(d.buffer),n.delete(u))}function l(u,d){if(u.isGLBufferAttribute){const h=n.get(u);(!h||h.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const c=n.get(u);if(c===void 0)n.set(u,i(u,d));else if(c.version<u.version){if(c.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(c.buffer,u,d),c.version=u.version}}return{get:a,remove:s,update:l}}class hM extends Er{constructor(t=1,r=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:n,heightSegments:i};const o=t/2,a=r/2,s=Math.floor(n),l=Math.floor(i),u=s+1,d=l+1,c=t/s,h=r/l,f=[],g=[],y=[],m=[];for(let p=0;p<d;p++){const v=p*h-a;for(let b=0;b<u;b++){const x=b*c-o;g.push(x,-v,0),y.push(0,0,1),m.push(b/s),m.push(1-p/l)}}for(let p=0;p<l;p++)for(let v=0;v<s;v++){const b=v+u*p,x=v+u*(p+1),_=v+1+u*(p+1),A=v+1+u*p;f.push(b,x,A),f.push(x,_,A)}this.setIndex(f),this.setAttribute("position",new Wt(g,3)),this.setAttribute("normal",new Wt(y,3)),this.setAttribute("uv",new Wt(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new hM(t.width,t.height,t.widthSegments,t.heightSegments)}}var yye=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bye=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,xye=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,wye=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_ye=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Sye=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Aye=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Mye=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Cye=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Tye=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Eye=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Pye=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Dye=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Oye=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Rye=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Iye=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Lye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Bye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Nye=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,kye=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Fye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Uye=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Vye=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jye=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Hye=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Gye=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Wye=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,qye=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Xye=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Yye="gl_FragColor = linearToOutputTexel( gl_FragColor );",Kye=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Jye=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Qye=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Zye=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$ye=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ebe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tbe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rbe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,nbe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ibe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,obe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,abe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,sbe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lbe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ube=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cbe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dbe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,hbe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,fbe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pbe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mbe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,gbe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,vbe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ybe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,bbe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xbe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,wbe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_be=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Sbe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Abe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Mbe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cbe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Tbe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Ebe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Pbe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Dbe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Obe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Rbe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Ibe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Lbe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Bbe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Nbe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,kbe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Fbe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zbe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Ube=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Vbe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,jbe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Hbe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Gbe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Wbe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qbe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Xbe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Ybe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Kbe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Jbe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Qbe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Zbe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$be=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,exe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,txe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,rxe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,nxe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ixe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,oxe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,axe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sxe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,lxe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,uxe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,cxe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,dxe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,hxe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,fxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,pxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,gxe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vxe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yxe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bxe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xxe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wxe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_xe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Sxe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Axe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Mxe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Cxe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Txe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Exe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Pxe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Dxe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Oxe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Rxe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ixe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lxe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bxe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Nxe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kxe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Fxe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zxe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Uxe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vxe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jxe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hxe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gxe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wxe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xxe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yxe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Kxe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Rr={alphahash_fragment:yye,alphahash_pars_fragment:bye,alphamap_fragment:xye,alphamap_pars_fragment:wye,alphatest_fragment:_ye,alphatest_pars_fragment:Sye,aomap_fragment:Aye,aomap_pars_fragment:Mye,batching_pars_vertex:Cye,batching_vertex:Tye,begin_vertex:Eye,beginnormal_vertex:Pye,bsdfs:Dye,iridescence_fragment:Oye,bumpmap_pars_fragment:Rye,clipping_planes_fragment:Iye,clipping_planes_pars_fragment:Lye,clipping_planes_pars_vertex:Bye,clipping_planes_vertex:Nye,color_fragment:kye,color_pars_fragment:Fye,color_pars_vertex:zye,color_vertex:Uye,common:Vye,cube_uv_reflection_fragment:jye,defaultnormal_vertex:Hye,displacementmap_pars_vertex:Gye,displacementmap_vertex:Wye,emissivemap_fragment:qye,emissivemap_pars_fragment:Xye,colorspace_fragment:Yye,colorspace_pars_fragment:Kye,envmap_fragment:Jye,envmap_common_pars_fragment:Qye,envmap_pars_fragment:Zye,envmap_pars_vertex:$ye,envmap_physical_pars_fragment:dbe,envmap_vertex:ebe,fog_vertex:tbe,fog_pars_vertex:rbe,fog_fragment:nbe,fog_pars_fragment:ibe,gradientmap_pars_fragment:obe,lightmap_fragment:abe,lightmap_pars_fragment:sbe,lights_lambert_fragment:lbe,lights_lambert_pars_fragment:ube,lights_pars_begin:cbe,lights_toon_fragment:hbe,lights_toon_pars_fragment:fbe,lights_phong_fragment:pbe,lights_phong_pars_fragment:mbe,lights_physical_fragment:gbe,lights_physical_pars_fragment:vbe,lights_fragment_begin:ybe,lights_fragment_maps:bbe,lights_fragment_end:xbe,logdepthbuf_fragment:wbe,logdepthbuf_pars_fragment:_be,logdepthbuf_pars_vertex:Sbe,logdepthbuf_vertex:Abe,map_fragment:Mbe,map_pars_fragment:Cbe,map_particle_fragment:Tbe,map_particle_pars_fragment:Ebe,metalnessmap_fragment:Pbe,metalnessmap_pars_fragment:Dbe,morphcolor_vertex:Obe,morphnormal_vertex:Rbe,morphtarget_pars_vertex:Ibe,morphtarget_vertex:Lbe,normal_fragment_begin:Bbe,normal_fragment_maps:Nbe,normal_pars_fragment:kbe,normal_pars_vertex:Fbe,normal_vertex:zbe,normalmap_pars_fragment:Ube,clearcoat_normal_fragment_begin:Vbe,clearcoat_normal_fragment_maps:jbe,clearcoat_pars_fragment:Hbe,iridescence_pars_fragment:Gbe,opaque_fragment:Wbe,packing:qbe,premultiplied_alpha_fragment:Xbe,project_vertex:Ybe,dithering_fragment:Kbe,dithering_pars_fragment:Jbe,roughnessmap_fragment:Qbe,roughnessmap_pars_fragment:Zbe,shadowmap_pars_fragment:$be,shadowmap_pars_vertex:exe,shadowmap_vertex:txe,shadowmask_pars_fragment:rxe,skinbase_vertex:nxe,skinning_pars_vertex:ixe,skinning_vertex:oxe,skinnormal_vertex:axe,specularmap_fragment:sxe,specularmap_pars_fragment:lxe,tonemapping_fragment:uxe,tonemapping_pars_fragment:cxe,transmission_fragment:dxe,transmission_pars_fragment:hxe,uv_pars_fragment:fxe,uv_pars_vertex:pxe,uv_vertex:mxe,worldpos_vertex:gxe,background_vert:vxe,background_frag:yxe,backgroundCube_vert:bxe,backgroundCube_frag:xxe,cube_vert:wxe,cube_frag:_xe,depth_vert:Sxe,depth_frag:Axe,distanceRGBA_vert:Mxe,distanceRGBA_frag:Cxe,equirect_vert:Txe,equirect_frag:Exe,linedashed_vert:Pxe,linedashed_frag:Dxe,meshbasic_vert:Oxe,meshbasic_frag:Rxe,meshlambert_vert:Ixe,meshlambert_frag:Lxe,meshmatcap_vert:Bxe,meshmatcap_frag:Nxe,meshnormal_vert:kxe,meshnormal_frag:Fxe,meshphong_vert:zxe,meshphong_frag:Uxe,meshphysical_vert:Vxe,meshphysical_frag:jxe,meshtoon_vert:Hxe,meshtoon_frag:Gxe,points_vert:Wxe,points_frag:qxe,shadow_vert:Xxe,shadow_frag:Yxe,sprite_vert:Kxe,sprite_frag:Jxe},Ct={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Br},alphaMap:{value:null},alphaMapTransform:{value:new Br},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Br}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Br}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Br}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Br},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Br},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Br},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Br}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Br}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Br}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Br},alphaTest:{value:0},uvTransform:{value:new Br}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Br},alphaMap:{value:null},alphaMapTransform:{value:new Br},alphaTest:{value:0}}},Cu={basic:{uniforms:Ca([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:Rr.meshbasic_vert,fragmentShader:Rr.meshbasic_frag},lambert:{uniforms:Ca([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new Dt(0)}}]),vertexShader:Rr.meshlambert_vert,fragmentShader:Rr.meshlambert_frag},phong:{uniforms:Ca([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:Rr.meshphong_vert,fragmentShader:Rr.meshphong_frag},standard:{uniforms:Ca([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag},toon:{uniforms:Ca([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new Dt(0)}}]),vertexShader:Rr.meshtoon_vert,fragmentShader:Rr.meshtoon_frag},matcap:{uniforms:Ca([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:Rr.meshmatcap_vert,fragmentShader:Rr.meshmatcap_frag},points:{uniforms:Ca([Ct.points,Ct.fog]),vertexShader:Rr.points_vert,fragmentShader:Rr.points_frag},dashed:{uniforms:Ca([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rr.linedashed_vert,fragmentShader:Rr.linedashed_frag},depth:{uniforms:Ca([Ct.common,Ct.displacementmap]),vertexShader:Rr.depth_vert,fragmentShader:Rr.depth_frag},normal:{uniforms:Ca([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:Rr.meshnormal_vert,fragmentShader:Rr.meshnormal_frag},sprite:{uniforms:Ca([Ct.sprite,Ct.fog]),vertexShader:Rr.sprite_vert,fragmentShader:Rr.sprite_frag},background:{uniforms:{uvTransform:{value:new Br},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Rr.background_vert,fragmentShader:Rr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Rr.backgroundCube_vert,fragmentShader:Rr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rr.cube_vert,fragmentShader:Rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Rr.equirect_vert,fragmentShader:Rr.equirect_frag},distanceRGBA:{uniforms:Ca([Ct.common,Ct.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Rr.distanceRGBA_vert,fragmentShader:Rr.distanceRGBA_frag},shadow:{uniforms:Ca([Ct.lights,Ct.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:Rr.shadow_vert,fragmentShader:Rr.shadow_frag}};Cu.physical={uniforms:Ca([Cu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Br},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Br},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Br},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Br},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Br},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Br},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Br},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Br},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Br},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Br},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Br},anisotropyVector:{value:new lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Br}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag};const qT={r:0,b:0,g:0};function Qxe(e,t,r,n,i,o,a){const s=new Dt(0);let l=o===!0?0:1,u,d,c=null,h=0,f=null;function g(m,p){let v=!1,b=p.isScene===!0?p.background:null;b&&b.isTexture&&(b=(p.backgroundBlurriness>0?r:t).get(b)),b===null?y(s,l):b&&b.isColor&&(y(b,1),v=!0);const x=e.xr.getEnvironmentBlendMode();x==="additive"?n.buffers.color.setClear(0,0,0,1,a):x==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),b&&(b.isCubeTexture||b.mapping===l1)?(d===void 0&&(d=new ji(new E0(1,1,1),new td({name:"BackgroundCubeMaterial",uniforms:Ax(Cu.backgroundCube.uniforms),vertexShader:Cu.backgroundCube.vertexShader,fragmentShader:Cu.backgroundCube.fragmentShader,side:ja,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(_,A,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=b,d.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,d.material.toneMapped=pn.getTransfer(b.colorSpace)!==En,(c!==b||h!==b.version||f!==e.toneMapping)&&(d.material.needsUpdate=!0,c=b,h=b.version,f=e.toneMapping),d.layers.enableAll(),m.unshift(d,d.geometry,d.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new ji(new hM(2,2),new td({name:"BackgroundMaterial",uniforms:Ax(Cu.background.uniforms),vertexShader:Cu.background.vertexShader,fragmentShader:Cu.background.fragmentShader,side:Zc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=pn.getTransfer(b.colorSpace)!==En,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(c!==b||h!==b.version||f!==e.toneMapping)&&(u.material.needsUpdate=!0,c=b,h=b.version,f=e.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null))}function y(m,p){m.getRGB(qT,Ete(e)),n.buffers.color.setClear(qT.r,qT.g,qT.b,p,a)}return{getClearColor:function(){return s},setClearColor:function(m,p=1){s.set(m),l=p,y(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,y(s,l)},render:g}}function Zxe(e,t,r,n){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=n.isWebGL2?null:t.get("OES_vertex_array_object"),a=n.isWebGL2||o!==null,s={},l=m(null);let u=l,d=!1;function c(L,U,W,G,z){let V=!1;if(a){const j=y(G,W,U);u!==j&&(u=j,f(u.object)),V=p(L,G,W,z),V&&v(L,G,W,z)}else{const j=U.wireframe===!0;(u.geometry!==G.id||u.program!==W.id||u.wireframe!==j)&&(u.geometry=G.id,u.program=W.id,u.wireframe=j,V=!0)}z!==null&&r.update(z,e.ELEMENT_ARRAY_BUFFER),(V||d)&&(d=!1,T(L,U,W,G),z!==null&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.get(z).buffer))}function h(){return n.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}function f(L){return n.isWebGL2?e.bindVertexArray(L):o.bindVertexArrayOES(L)}function g(L){return n.isWebGL2?e.deleteVertexArray(L):o.deleteVertexArrayOES(L)}function y(L,U,W){const G=W.wireframe===!0;let z=s[L.id];z===void 0&&(z={},s[L.id]=z);let V=z[U.id];V===void 0&&(V={},z[U.id]=V);let j=V[G];return j===void 0&&(j=m(h()),V[G]=j),j}function m(L){const U=[],W=[],G=[];for(let z=0;z<i;z++)U[z]=0,W[z]=0,G[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:W,attributeDivisors:G,object:L,attributes:{},index:null}}function p(L,U,W,G){const z=u.attributes,V=U.attributes;let j=0;const H=W.getAttributes();for(const Y in H)if(H[Y].location>=0){const $=z[Y];let ne=V[Y];if(ne===void 0&&(Y==="instanceMatrix"&&L.instanceMatrix&&(ne=L.instanceMatrix),Y==="instanceColor"&&L.instanceColor&&(ne=L.instanceColor)),$===void 0||$.attribute!==ne||ne&&$.data!==ne.data)return!0;j++}return u.attributesNum!==j||u.index!==G}function v(L,U,W,G){const z={},V=U.attributes;let j=0;const H=W.getAttributes();for(const Y in H)if(H[Y].location>=0){let $=V[Y];$===void 0&&(Y==="instanceMatrix"&&L.instanceMatrix&&($=L.instanceMatrix),Y==="instanceColor"&&L.instanceColor&&($=L.instanceColor));const ne={};ne.attribute=$,$&&$.data&&(ne.data=$.data),z[Y]=ne,j++}u.attributes=z,u.attributesNum=j,u.index=G}function b(){const L=u.newAttributes;for(let U=0,W=L.length;U<W;U++)L[U]=0}function x(L){_(L,0)}function _(L,U){const W=u.newAttributes,G=u.enabledAttributes,z=u.attributeDivisors;W[L]=1,G[L]===0&&(e.enableVertexAttribArray(L),G[L]=1),z[L]!==U&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,U),z[L]=U)}function A(){const L=u.newAttributes,U=u.enabledAttributes;for(let W=0,G=U.length;W<G;W++)U[W]!==L[W]&&(e.disableVertexAttribArray(W),U[W]=0)}function M(L,U,W,G,z,V,j){j===!0?e.vertexAttribIPointer(L,U,W,z,V):e.vertexAttribPointer(L,U,W,G,z,V)}function T(L,U,W,G){if(n.isWebGL2===!1&&(L.isInstancedMesh||G.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;b();const z=G.attributes,V=W.getAttributes(),j=U.defaultAttributeValues;for(const H in V){const Y=V[H];if(Y.location>=0){let Q=z[H];if(Q===void 0&&(H==="instanceMatrix"&&L.instanceMatrix&&(Q=L.instanceMatrix),H==="instanceColor"&&L.instanceColor&&(Q=L.instanceColor)),Q!==void 0){const $=Q.normalized,ne=Q.itemSize,Z=r.get(Q);if(Z===void 0)continue;const ce=Z.buffer,ae=Z.type,ie=Z.bytesPerElement,le=n.isWebGL2===!0&&(ae===e.INT||ae===e.UNSIGNED_INT||Q.gpuType===D4);if(Q.isInterleavedBufferAttribute){const se=Q.data,re=se.stride,ye=Q.offset;if(se.isInstancedInterleavedBuffer){for(let be=0;be<Y.locationSize;be++)_(Y.location+be,se.meshPerAttribute);L.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let be=0;be<Y.locationSize;be++)x(Y.location+be);e.bindBuffer(e.ARRAY_BUFFER,ce);for(let be=0;be<Y.locationSize;be++)M(Y.location+be,ne/Y.locationSize,ae,$,re*ie,(ye+ne/Y.locationSize*be)*ie,le)}else{if(Q.isInstancedBufferAttribute){for(let se=0;se<Y.locationSize;se++)_(Y.location+se,Q.meshPerAttribute);L.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let se=0;se<Y.locationSize;se++)x(Y.location+se);e.bindBuffer(e.ARRAY_BUFFER,ce);for(let se=0;se<Y.locationSize;se++)M(Y.location+se,ne/Y.locationSize,ae,$,ne*ie,ne/Y.locationSize*se*ie,le)}}else if(j!==void 0){const $=j[H];if($!==void 0)switch($.length){case 2:e.vertexAttrib2fv(Y.location,$);break;case 3:e.vertexAttrib3fv(Y.location,$);break;case 4:e.vertexAttrib4fv(Y.location,$);break;default:e.vertexAttrib1fv(Y.location,$)}}}}A()}function C(){I();for(const L in s){const U=s[L];for(const W in U){const G=U[W];for(const z in G)g(G[z].object),delete G[z];delete U[W]}delete s[L]}}function E(L){if(s[L.id]===void 0)return;const U=s[L.id];for(const W in U){const G=U[W];for(const z in G)g(G[z].object),delete G[z];delete U[W]}delete s[L.id]}function D(L){for(const U in s){const W=s[U];if(W[L.id]===void 0)continue;const G=W[L.id];for(const z in G)g(G[z].object),delete G[z];delete W[L.id]}}function I(){k(),d=!0,u!==l&&(u=l,f(u.object))}function k(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:c,reset:I,resetDefaultState:k,dispose:C,releaseStatesOfGeometry:E,releaseStatesOfProgram:D,initAttributes:b,enableAttribute:x,disableUnusedAttributes:A}}function $xe(e,t,r,n){const i=n.isWebGL2;let o;function a(d){o=d}function s(d,c){e.drawArrays(o,d,c),r.update(c,o,1)}function l(d,c,h){if(h===0)return;let f,g;if(i)f=e,g="drawArraysInstanced";else if(f=t.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[g](o,d,c,h),r.update(c,o,h)}function u(d,c,h){if(h===0)return;const f=t.get("WEBGL_multi_draw");if(f===null)for(let g=0;g<h;g++)this.render(d[g],c[g]);else{f.multiDrawArraysWEBGL(o,d,0,c,0,h);let g=0;for(let y=0;y<h;y++)g+=c[y];r.update(g,o,1)}}this.setMode=a,this.render=s,this.renderInstances=l,this.renderMultiDraw=u}function e1e(e,t,r){let n;function i(){if(n!==void 0)return n;if(t.has("EXT_texture_filter_anisotropic")===!0){const M=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function o(M){if(M==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&e.constructor.name==="WebGL2RenderingContext";let s=r.precision!==void 0?r.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const u=a||t.has("WEBGL_draw_buffers"),d=r.logarithmicDepthBuffer===!0,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),g=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),y=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),b=h>0,x=a||t.has("OES_texture_float"),_=b&&x,A=a?e.getParameter(e.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:d,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:g,maxAttributes:y,maxVertexUniforms:m,maxVaryings:p,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:_,maxSamples:A}}function t1e(e){const t=this;let r=null,n=0,i=!1,o=!1;const a=new th,s=new Br,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(c,h){const f=c.length!==0||h||n!==0||i;return i=h,n=c.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(c,h){r=d(c,h,0)},this.setState=function(c,h,f){const g=c.clippingPlanes,y=c.clipIntersection,m=c.clipShadows,p=e.get(c);if(!i||g===null||g.length===0||o&&!m)o?d(null):u();else{const v=o?0:n,b=v*4;let x=p.clippingState||null;l.value=x,x=d(g,h,b,f);for(let _=0;_!==b;++_)x[_]=r[_];p.clippingState=x,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=v}};function u(){l.value!==r&&(l.value=r,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function d(c,h,f,g){const y=c!==null?c.length:0;let m=null;if(y!==0){if(m=l.value,g!==!0||m===null){const p=f+y*4,v=h.matrixWorldInverse;s.getNormalMatrix(v),(m===null||m.length<p)&&(m=new Float32Array(p));for(let b=0,x=f;b!==y;++b,x+=4)a.copy(c[b]).applyMatrix4(v,s),a.normal.toArray(m,x),m[x+3]=a.constant}l.value=m,l.needsUpdate=!0}return t.numPlanes=y,t.numIntersection=0,m}}function r1e(e){let t=new WeakMap;function r(a,s){return s===cA?a.mapping=Dh:s===dA&&(a.mapping=kp),a}function n(a){if(a&&a.isTexture){const s=a.mapping;if(s===cA||s===dA)if(t.has(a)){const l=t.get(a).texture;return r(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new X4(l.height/2);return u.fromEquirectangularTexture(e,a),t.set(a,u),a.addEventListener("dispose",i),r(u.texture,a.mapping)}else return null}}return a}function i(a){const s=a.target;s.removeEventListener("dispose",i);const l=t.get(s);l!==void 0&&(t.delete(s),l.dispose())}function o(){t=new WeakMap}return{get:n,dispose:o}}class Hl extends uM{constructor(t=-1,r=1,n=1,i=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=n,this.bottom=i,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,r,n,i,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=n-t,a=n+t,s=i+r,l=i-r;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,a=o+u*this.view.width,s-=d*this.view.offsetY,l=s-d*this.view.height}this.projectionMatrix.makeOrthographic(o,a,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}const gb=4,cW=[.125,.215,.35,.446,.526,.582],xg=20,rL=new Hl,dW=new Dt;let nL=null,iL=0,oL=0;const hg=(1+Math.sqrt(5))/2,iy=1/hg,hW=[new pe(1,1,1),new pe(-1,1,1),new pe(1,1,-1),new pe(-1,1,-1),new pe(0,hg,iy),new pe(0,hg,-iy),new pe(iy,0,hg),new pe(-iy,0,hg),new pe(hg,iy,0),new pe(-hg,iy,0)];class GF{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,n=.1,i=100){nL=this._renderer.getRenderTarget(),iL=this._renderer.getActiveCubeFace(),oL=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,n,i,o),r>0&&this._blur(o,0,0,r),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=mW(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=pW(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(nL,iL,oL),t.scissorTest=!1,XT(t,0,0,t.width,t.height)}_fromTexture(t,r){t.mapping===Dh||t.mapping===kp?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),nL=this._renderer.getRenderTarget(),iL=this._renderer.getActiveCubeFace(),oL=this._renderer.getActiveMipmapLevel();const n=r||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,n={magFilter:Qn,minFilter:Qn,generateMipmaps:!1,type:xx,format:Ia,colorSpace:ed,depthBuffer:!1},i=fW(t,r,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=fW(t,r,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=n1e(o)),this._blurMaterial=i1e(o,t,r)}return i}_compileMaterial(t){const r=new ji(this._lodPlanes[0],t);this._renderer.compile(r,rL)}_sceneToCubeUV(t,r,n,i){const s=new kn(90,1,r,n),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,c=d.autoClear,h=d.toneMapping;d.getClearColor(dW),d.toneMapping=Wc,d.autoClear=!1;const f=new Js({name:"PMREM.Background",side:ja,depthWrite:!1,depthTest:!1}),g=new ji(new E0,f);let y=!1;const m=t.background;m?m.isColor&&(f.color.copy(m),t.background=null,y=!0):(f.color.copy(dW),y=!0);for(let p=0;p<6;p++){const v=p%3;v===0?(s.up.set(0,l[p],0),s.lookAt(u[p],0,0)):v===1?(s.up.set(0,0,l[p]),s.lookAt(0,u[p],0)):(s.up.set(0,l[p],0),s.lookAt(0,0,u[p]));const b=this._cubeSize;XT(i,v*b,p>2?b:0,b,b),d.setRenderTarget(i),y&&d.render(g,s),d.render(t,s)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=h,d.autoClear=c,t.background=m}_textureToCubeUV(t,r){const n=this._renderer,i=t.mapping===Dh||t.mapping===kp;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=mW()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=pW());const o=i?this._cubemapMaterial:this._equirectMaterial,a=new ji(this._lodPlanes[0],o),s=o.uniforms;s.envMap.value=t;const l=this._cubeSize;XT(r,0,0,3*l,2*l),n.setRenderTarget(r),n.render(a,rL)}_applyPMREM(t){const r=this._renderer,n=r.autoClear;r.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=hW[(i-1)%hW.length];this._blur(t,i-1,i,o,a)}r.autoClear=n}_blur(t,r,n,i,o){const a=this._pingPongRenderTarget;this._halfBlur(t,a,r,n,i,"latitudinal",o),this._halfBlur(a,t,n,n,i,"longitudinal",o)}_halfBlur(t,r,n,i,o,a,s){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,c=new ji(this._lodPlanes[i],u),h=u.uniforms,f=this._sizeLods[n]-1,g=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*xg-1),y=o/g,m=isFinite(o)?1+Math.floor(d*y):xg;m>xg&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${xg}`);const p=[];let v=0;for(let M=0;M<xg;++M){const T=M/y,C=Math.exp(-T*T/2);p.push(C),M===0?v+=C:M<m&&(v+=2*C)}for(let M=0;M<p.length;M++)p[M]=p[M]/v;h.envMap.value=t.texture,h.samples.value=m,h.weights.value=p,h.latitudinal.value=a==="latitudinal",s&&(h.poleAxis.value=s);const{_lodMax:b}=this;h.dTheta.value=g,h.mipInt.value=b-n;const x=this._sizeLods[i],_=3*x*(i>b-gb?i-b+gb:0),A=4*(this._cubeSize-x);XT(r,_,A,3*x,2*x),l.setRenderTarget(r),l.render(c,rL)}}function n1e(e){const t=[],r=[],n=[];let i=e;const o=e-gb+1+cW.length;for(let a=0;a<o;a++){const s=Math.pow(2,i);r.push(s);let l=1/s;a>e-gb?l=cW[a-e+gb-1]:a===0&&(l=0),n.push(l);const u=1/(s-2),d=-u,c=1+u,h=[d,d,c,d,c,c,d,d,c,c,d,c],f=6,g=6,y=3,m=2,p=1,v=new Float32Array(y*g*f),b=new Float32Array(m*g*f),x=new Float32Array(p*g*f);for(let A=0;A<f;A++){const M=A%3*2/3-1,T=A>2?0:-1,C=[M,T,0,M+2/3,T,0,M+2/3,T+1,0,M,T,0,M+2/3,T+1,0,M,T+1,0];v.set(C,y*g*A),b.set(h,m*g*A);const E=[A,A,A,A,A,A];x.set(E,p*g*A)}const _=new Er;_.setAttribute("position",new Zr(v,y)),_.setAttribute("uv",new Zr(b,m)),_.setAttribute("faceIndex",new Zr(x,p)),t.push(_),i>gb&&i--}return{lodPlanes:t,sizeLods:r,sigmas:n}}function fW(e,t,r){const n=new Hu(e,t,r);return n.texture.mapping=l1,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function XT(e,t,r,n,i){e.viewport.set(t,r,n,i),e.scissor.set(t,r,n,i)}function i1e(e,t,r){const n=new Float32Array(xg),i=new pe(0,1,0);return new td({name:"SphericalGaussianBlur",defines:{n:xg,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Y4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gh,depthTest:!1,depthWrite:!1})}function pW(){return new td({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Y4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gh,depthTest:!1,depthWrite:!1})}function mW(){return new td({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Y4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gh,depthTest:!1,depthWrite:!1})}function Y4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function o1e(e){let t=new WeakMap,r=null;function n(s){if(s&&s.isTexture){const l=s.mapping,u=l===cA||l===dA,d=l===Dh||l===kp;if(u||d)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let c=t.get(s);return r===null&&(r=new GF(e)),c=u?r.fromEquirectangular(s,c):r.fromCubemap(s,c),t.set(s,c),c.texture}else{if(t.has(s))return t.get(s).texture;{const c=s.image;if(u&&c&&c.height>0||d&&c&&i(c)){r===null&&(r=new GF(e));const h=u?r.fromEquirectangular(s):r.fromCubemap(s);return t.set(s,h),s.addEventListener("dispose",o),h.texture}else return null}}}return s}function i(s){let l=0;const u=6;for(let d=0;d<u;d++)s[d]!==void 0&&l++;return l===u}function o(s){const l=s.target;l.removeEventListener("dispose",o);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function a(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:n,dispose:a}}function a1e(e){const t={};function r(n){if(t[n]!==void 0)return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(n){return r(n)!==null},init:function(n){n.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(n){const i=r(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function s1e(e,t,r,n){const i={},o=new WeakMap;function a(c){const h=c.target;h.index!==null&&t.remove(h.index);for(const g in h.attributes)t.remove(h.attributes[g]);for(const g in h.morphAttributes){const y=h.morphAttributes[g];for(let m=0,p=y.length;m<p;m++)t.remove(y[m])}h.removeEventListener("dispose",a),delete i[h.id];const f=o.get(h);f&&(t.remove(f),o.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function s(c,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,r.memory.geometries++),h}function l(c){const h=c.attributes;for(const g in h)t.update(h[g],e.ARRAY_BUFFER);const f=c.morphAttributes;for(const g in f){const y=f[g];for(let m=0,p=y.length;m<p;m++)t.update(y[m],e.ARRAY_BUFFER)}}function u(c){const h=[],f=c.index,g=c.attributes.position;let y=0;if(f!==null){const v=f.array;y=f.version;for(let b=0,x=v.length;b<x;b+=3){const _=v[b+0],A=v[b+1],M=v[b+2];h.push(_,A,A,M,M,_)}}else if(g!==void 0){const v=g.array;y=g.version;for(let b=0,x=v.length/3-1;b<x;b+=3){const _=b+0,A=b+1,M=b+2;h.push(_,A,A,M,M,_)}}else return;const m=new(Ate(h)?W4:G4)(h,1);m.version=y;const p=o.get(c);p&&t.remove(p),o.set(c,m)}function d(c){const h=o.get(c);if(h){const f=c.index;f!==null&&h.version<f.version&&u(c)}else u(c);return o.get(c)}return{get:s,update:l,getWireframeAttribute:d}}function l1e(e,t,r,n){const i=n.isWebGL2;let o;function a(f){o=f}let s,l;function u(f){s=f.type,l=f.bytesPerElement}function d(f,g){e.drawElements(o,g,s,f*l),r.update(g,o,1)}function c(f,g,y){if(y===0)return;let m,p;if(i)m=e,p="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[p](o,g,s,f*l,y),r.update(g,o,y)}function h(f,g,y){if(y===0)return;const m=t.get("WEBGL_multi_draw");if(m===null)for(let p=0;p<y;p++)this.render(f[p]/l,g[p]);else{m.multiDrawElementsWEBGL(o,g,0,s,f,0,y);let p=0;for(let v=0;v<y;v++)p+=g[v];r.update(p,o,1)}}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=c,this.renderMultiDraw=h}function u1e(e){const t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,a,s){switch(r.calls++,a){case e.TRIANGLES:r.triangles+=s*(o/3);break;case e.LINES:r.lines+=s*(o/2);break;case e.LINE_STRIP:r.lines+=s*(o-1);break;case e.LINE_LOOP:r.lines+=s*o;break;case e.POINTS:r.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:i,update:n}}function c1e(e,t){return e[0]-t[0]}function d1e(e,t){return Math.abs(t[1])-Math.abs(e[1])}function h1e(e,t,r){const n={},i=new Float32Array(8),o=new WeakMap,a=new mn,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,d,c){const h=u.morphTargetInfluences;if(t.isWebGL2===!0){const g=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,y=g!==void 0?g.length:0;let m=o.get(d);if(m===void 0||m.count!==y){let U=function(){k.dispose(),o.delete(d),d.removeEventListener("dispose",U)};var f=U;m!==void 0&&m.texture.dispose();const b=d.morphAttributes.position!==void 0,x=d.morphAttributes.normal!==void 0,_=d.morphAttributes.color!==void 0,A=d.morphAttributes.position||[],M=d.morphAttributes.normal||[],T=d.morphAttributes.color||[];let C=0;b===!0&&(C=1),x===!0&&(C=2),_===!0&&(C=3);let E=d.attributes.position.count*C,D=1;E>t.maxTextureSize&&(D=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const I=new Float32Array(E*D*4*y),k=new bR(I,E,D,y);k.type=Pu,k.needsUpdate=!0;const L=C*4;for(let W=0;W<y;W++){const G=A[W],z=M[W],V=T[W],j=E*D*4*W;for(let H=0;H<G.count;H++){const Y=H*L;b===!0&&(a.fromBufferAttribute(G,H),I[j+Y+0]=a.x,I[j+Y+1]=a.y,I[j+Y+2]=a.z,I[j+Y+3]=0),x===!0&&(a.fromBufferAttribute(z,H),I[j+Y+4]=a.x,I[j+Y+5]=a.y,I[j+Y+6]=a.z,I[j+Y+7]=0),_===!0&&(a.fromBufferAttribute(V,H),I[j+Y+8]=a.x,I[j+Y+9]=a.y,I[j+Y+10]=a.z,I[j+Y+11]=V.itemSize===4?a.w:1)}}m={count:y,texture:k,size:new lt(E,D)},o.set(d,m),d.addEventListener("dispose",U)}let p=0;for(let b=0;b<h.length;b++)p+=h[b];const v=d.morphTargetsRelative?1:1-p;c.getUniforms().setValue(e,"morphTargetBaseInfluence",v),c.getUniforms().setValue(e,"morphTargetInfluences",h),c.getUniforms().setValue(e,"morphTargetsTexture",m.texture,r),c.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const g=h===void 0?0:h.length;let y=n[d.id];if(y===void 0||y.length!==g){y=[];for(let x=0;x<g;x++)y[x]=[x,0];n[d.id]=y}for(let x=0;x<g;x++){const _=y[x];_[0]=x,_[1]=h[x]}y.sort(d1e);for(let x=0;x<8;x++)x<g&&y[x][1]?(s[x][0]=y[x][0],s[x][1]=y[x][1]):(s[x][0]=Number.MAX_SAFE_INTEGER,s[x][1]=0);s.sort(c1e);const m=d.morphAttributes.position,p=d.morphAttributes.normal;let v=0;for(let x=0;x<8;x++){const _=s[x],A=_[0],M=_[1];A!==Number.MAX_SAFE_INTEGER&&M?(m&&d.getAttribute("morphTarget"+x)!==m[A]&&d.setAttribute("morphTarget"+x,m[A]),p&&d.getAttribute("morphNormal"+x)!==p[A]&&d.setAttribute("morphNormal"+x,p[A]),i[x]=M,v+=M):(m&&d.hasAttribute("morphTarget"+x)===!0&&d.deleteAttribute("morphTarget"+x),p&&d.hasAttribute("morphNormal"+x)===!0&&d.deleteAttribute("morphNormal"+x),i[x]=0)}const b=d.morphTargetsRelative?1:1-v;c.getUniforms().setValue(e,"morphTargetBaseInfluence",b),c.getUniforms().setValue(e,"morphTargetInfluences",i)}}return{update:l}}function f1e(e,t,r,n){let i=new WeakMap;function o(l){const u=n.render.frame,d=l.geometry,c=t.get(l,d);if(i.get(c)!==u&&(t.update(c),i.set(c,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==u&&(r.update(l.instanceMatrix,e.ARRAY_BUFFER),l.instanceColor!==null&&r.update(l.instanceColor,e.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==u&&(h.update(),i.set(h,u))}return c}function a(){i=new WeakMap}function s(l){const u=l.target;u.removeEventListener("dispose",s),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:o,dispose:a}}class K4 extends Wn{constructor(t,r,n,i,o,a,s,l,u,d){if(d=d!==void 0?d:Ap,d!==Ap&&d!==c0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&d===Ap&&(n=uh),n===void 0&&d===c0&&(n=Sp),super(null,i,o,a,s,l,d,n,u),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=s!==void 0?s:fi,this.minFilter=l!==void 0?l:fi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const r=super.toJSON(t);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}const Ote=new Wn,Rte=new K4(1,1);Rte.compareFunction=U4;const Ite=new bR,Lte=new H4,Bte=new cM,gW=[],vW=[],yW=new Float32Array(16),bW=new Float32Array(9),xW=new Float32Array(4);function u1(e,t,r){const n=e[0];if(n<=0||n>0)return e;const i=t*r;let o=gW[i];if(o===void 0&&(o=new Float32Array(i),gW[i]=o),t!==0){n.toArray(o,0);for(let a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function ao(e,t){if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function so(e,t){for(let r=0,n=t.length;r<n;r++)e[r]=t[r]}function xR(e,t){let r=vW[t];r===void 0&&(r=new Int32Array(t),vW[t]=r);for(let n=0;n!==t;++n)r[n]=e.allocateTextureUnit();return r}function p1e(e,t){const r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function m1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ao(r,t))return;e.uniform2fv(this.addr,t),so(r,t)}}function g1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(ao(r,t))return;e.uniform3fv(this.addr,t),so(r,t)}}function v1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ao(r,t))return;e.uniform4fv(this.addr,t),so(r,t)}}function y1e(e,t){const r=this.cache,n=t.elements;if(n===void 0){if(ao(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),so(r,t)}else{if(ao(r,n))return;xW.set(n),e.uniformMatrix2fv(this.addr,!1,xW),so(r,n)}}function b1e(e,t){const r=this.cache,n=t.elements;if(n===void 0){if(ao(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),so(r,t)}else{if(ao(r,n))return;bW.set(n),e.uniformMatrix3fv(this.addr,!1,bW),so(r,n)}}function x1e(e,t){const r=this.cache,n=t.elements;if(n===void 0){if(ao(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),so(r,t)}else{if(ao(r,n))return;yW.set(n),e.uniformMatrix4fv(this.addr,!1,yW),so(r,n)}}function w1e(e,t){const r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function _1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ao(r,t))return;e.uniform2iv(this.addr,t),so(r,t)}}function S1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(ao(r,t))return;e.uniform3iv(this.addr,t),so(r,t)}}function A1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ao(r,t))return;e.uniform4iv(this.addr,t),so(r,t)}}function M1e(e,t){const r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function C1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ao(r,t))return;e.uniform2uiv(this.addr,t),so(r,t)}}function T1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(ao(r,t))return;e.uniform3uiv(this.addr,t),so(r,t)}}function E1e(e,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ao(r,t))return;e.uniform4uiv(this.addr,t),so(r,t)}}function P1e(e,t,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i);const o=this.type===e.SAMPLER_2D_SHADOW?Rte:Ote;r.setTexture2D(t||o,i)}function D1e(e,t,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||Lte,i)}function O1e(e,t,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(t||Bte,i)}function R1e(e,t,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(t||Ite,i)}function I1e(e){switch(e){case 5126:return p1e;case 35664:return m1e;case 35665:return g1e;case 35666:return v1e;case 35674:return y1e;case 35675:return b1e;case 35676:return x1e;case 5124:case 35670:return w1e;case 35667:case 35671:return _1e;case 35668:case 35672:return S1e;case 35669:case 35673:return A1e;case 5125:return M1e;case 36294:return C1e;case 36295:return T1e;case 36296:return E1e;case 35678:case 36198:case 36298:case 36306:case 35682:return P1e;case 35679:case 36299:case 36307:return D1e;case 35680:case 36300:case 36308:case 36293:return O1e;case 36289:case 36303:case 36311:case 36292:return R1e}}function L1e(e,t){e.uniform1fv(this.addr,t)}function B1e(e,t){const r=u1(t,this.size,2);e.uniform2fv(this.addr,r)}function N1e(e,t){const r=u1(t,this.size,3);e.uniform3fv(this.addr,r)}function k1e(e,t){const r=u1(t,this.size,4);e.uniform4fv(this.addr,r)}function F1e(e,t){const r=u1(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function z1e(e,t){const r=u1(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function U1e(e,t){const r=u1(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function V1e(e,t){e.uniform1iv(this.addr,t)}function j1e(e,t){e.uniform2iv(this.addr,t)}function H1e(e,t){e.uniform3iv(this.addr,t)}function G1e(e,t){e.uniform4iv(this.addr,t)}function W1e(e,t){e.uniform1uiv(this.addr,t)}function q1e(e,t){e.uniform2uiv(this.addr,t)}function X1e(e,t){e.uniform3uiv(this.addr,t)}function Y1e(e,t){e.uniform4uiv(this.addr,t)}function K1e(e,t,r){const n=this.cache,i=t.length,o=xR(r,i);ao(n,o)||(e.uniform1iv(this.addr,o),so(n,o));for(let a=0;a!==i;++a)r.setTexture2D(t[a]||Ote,o[a])}function J1e(e,t,r){const n=this.cache,i=t.length,o=xR(r,i);ao(n,o)||(e.uniform1iv(this.addr,o),so(n,o));for(let a=0;a!==i;++a)r.setTexture3D(t[a]||Lte,o[a])}function Q1e(e,t,r){const n=this.cache,i=t.length,o=xR(r,i);ao(n,o)||(e.uniform1iv(this.addr,o),so(n,o));for(let a=0;a!==i;++a)r.setTextureCube(t[a]||Bte,o[a])}function Z1e(e,t,r){const n=this.cache,i=t.length,o=xR(r,i);ao(n,o)||(e.uniform1iv(this.addr,o),so(n,o));for(let a=0;a!==i;++a)r.setTexture2DArray(t[a]||Ite,o[a])}function $1e(e){switch(e){case 5126:return L1e;case 35664:return B1e;case 35665:return N1e;case 35666:return k1e;case 35674:return F1e;case 35675:return z1e;case 35676:return U1e;case 5124:case 35670:return V1e;case 35667:case 35671:return j1e;case 35668:case 35672:return H1e;case 35669:case 35673:return G1e;case 5125:return W1e;case 36294:return q1e;case 36295:return X1e;case 36296:return Y1e;case 35678:case 36198:case 36298:case 36306:case 35682:return K1e;case 35679:case 36299:case 36307:return J1e;case 35680:case 36300:case 36308:case 36293:return Q1e;case 36289:case 36303:case 36311:case 36292:return Z1e}}class ewe{constructor(t,r,n){this.id=t,this.addr=n,this.cache=[],this.type=r.type,this.setValue=I1e(r.type)}}class twe{constructor(t,r,n){this.id=t,this.addr=n,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=$1e(r.type)}}class rwe{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,n){const i=this.seq;for(let o=0,a=i.length;o!==a;++o){const s=i[o];s.setValue(t,r[s.id],n)}}}const aL=/(\w+)(\])?(\[|\.)?/g;function wW(e,t){e.seq.push(t),e.map[t.id]=t}function nwe(e,t,r){const n=e.name,i=n.length;for(aL.lastIndex=0;;){const o=aL.exec(n),a=aL.lastIndex;let s=o[1];const l=o[2]==="]",u=o[3];if(l&&(s=s|0),u===void 0||u==="["&&a+2===i){wW(r,u===void 0?new ewe(s,e,t):new twe(s,e,t));break}else{let c=r.map[s];c===void 0&&(c=new rwe(s),wW(r,c)),r=c}}}class y2{constructor(t,r){this.seq=[],this.map={};const n=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const o=t.getActiveUniform(r,i),a=t.getUniformLocation(r,o.name);nwe(o,a,this)}}setValue(t,r,n,i){const o=this.map[r];o!==void 0&&o.setValue(t,n,i)}setOptional(t,r,n){const i=r[n];i!==void 0&&this.setValue(t,n,i)}static upload(t,r,n,i){for(let o=0,a=r.length;o!==a;++o){const s=r[o],l=n[s.id];l.needsUpdate!==!1&&s.setValue(t,l.value,i)}}static seqWithValue(t,r){const n=[];for(let i=0,o=t.length;i!==o;++i){const a=t[i];a.id in r&&n.push(a)}return n}}function _W(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}const iwe=37297;let owe=0;function awe(e,t){const r=e.split(`
`),n=[],i=Math.max(t-6,0),o=Math.min(t+6,r.length);for(let a=i;a<o;a++){const s=a+1;n.push(`${s===t?">":" "} ${s}: ${r[a]}`)}return n.join(`
`)}function swe(e){const t=pn.getPrimaries(pn.workingColorSpace),r=pn.getPrimaries(e);let n;switch(t===r?n="":t===gA&&r===mA?n="LinearDisplayP3ToLinearSRGB":t===mA&&r===gA&&(n="LinearSRGBToLinearDisplayP3"),e){case ed:case sM:return[n,"LinearTransferOETF"];case ro:case yR:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[n,"LinearTransferOETF"]}}function SW(e,t,r){const n=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(n&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const a=parseInt(o[1]);return r.toUpperCase()+`

`+i+`

`+awe(e.getShaderSource(t),a)}else return i}function lwe(e,t){const r=swe(t);return`vec4 ${e}( vec4 value ) { return ${r[0]}( ${r[1]}( value ) ); }`}function uwe(e,t){let r;switch(t){case Jee:r="Linear";break;case Qee:r="Reinhard";break;case Zee:r="OptimizedCineon";break;case P4:r="ACESFilmic";break;case $ee:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function cwe(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(J_).join(`
`)}function dwe(e){const t=[];for(const r in e){const n=e[r];n!==!1&&t.push("#define "+r+" "+n)}return t.join(`
`)}function hwe(e,t){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const o=e.getActiveAttrib(t,i),a=o.name;let s=1;o.type===e.FLOAT_MAT2&&(s=2),o.type===e.FLOAT_MAT3&&(s=3),o.type===e.FLOAT_MAT4&&(s=4),r[a]={type:o.type,location:e.getAttribLocation(t,a),locationSize:s}}return r}function J_(e){return e!==""}function AW(e,t){const r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function MW(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const fwe=/^[ \t]*#include +<([\w\d./]+)>/gm;function WF(e){return e.replace(fwe,mwe)}const pwe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function mwe(e,t){let r=Rr[t];if(r===void 0){const n=pwe.get(t);if(n!==void 0)r=Rr[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return WF(r)}const gwe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CW(e){return e.replace(gwe,vwe)}function vwe(e,t,r,n){let i="";for(let o=parseInt(t);o<parseInt(r);o++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function TW(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function ywe(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===fR?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===yS?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Su&&(t="SHADOWMAP_TYPE_VSM"),t}function bwe(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Dh:case kp:t="ENVMAP_TYPE_CUBE";break;case l1:t="ENVMAP_TYPE_CUBE_UV";break}return t}function xwe(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case kp:t="ENVMAP_MODE_REFRACTION";break}return t}function wwe(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case aM:t="ENVMAP_BLENDING_MULTIPLY";break;case Yee:t="ENVMAP_BLENDING_MIX";break;case Kee:t="ENVMAP_BLENDING_ADD";break}return t}function _we(e){const t=e.envMapCubeUVHeight;if(t===null)return null;const r=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:n,maxMip:r}}function Swe(e,t,r,n){const i=e.getContext(),o=r.defines;let a=r.vertexShader,s=r.fragmentShader;const l=ywe(r),u=bwe(r),d=xwe(r),c=wwe(r),h=_we(r),f=r.isWebGL2?"":cwe(r),g=dwe(o),y=i.createProgram();let m,p,v=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(m=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(J_).join(`
`),m.length>0&&(m+=`
`),p=[f,"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(J_).join(`
`),p.length>0&&(p+=`
`)):(m=[TW(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.batching?"#define USE_BATCHING":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.useLegacyLights?"#define LEGACY_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(J_).join(`
`),p=[f,TW(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+d:"",r.envMap?"#define "+c:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.useLegacyLights?"#define LEGACY_LIGHTS":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Wc?"#define TONE_MAPPING":"",r.toneMapping!==Wc?Rr.tonemapping_pars_fragment:"",r.toneMapping!==Wc?uwe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Rr.colorspace_pars_fragment,lwe("linearToOutputTexel",r.outputColorSpace),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(J_).join(`
`)),a=WF(a),a=AW(a,r),a=MW(a,r),s=WF(s),s=AW(s,r),s=MW(s,r),a=CW(a),s=CW(s),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,p=["precision mediump sampler2DArray;","#define varying in",r.glslVersion===jF?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===jF?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const b=v+m+a,x=v+p+s,_=_W(i,i.VERTEX_SHADER,b),A=_W(i,i.FRAGMENT_SHADER,x);i.attachShader(y,_),i.attachShader(y,A),r.index0AttributeName!==void 0?i.bindAttribLocation(y,0,r.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function M(D){if(e.debug.checkShaderErrors){const I=i.getProgramInfoLog(y).trim(),k=i.getShaderInfoLog(_).trim(),L=i.getShaderInfoLog(A).trim();let U=!0,W=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(U=!1,typeof e.debug.onShaderError=="function")e.debug.onShaderError(i,y,_,A);else{const G=SW(i,_,"vertex"),z=SW(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+I+`
`+G+`
`+z)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(k===""||L==="")&&(W=!1);W&&(D.diagnostics={runnable:U,programLog:I,vertexShader:{log:k,prefix:m},fragmentShader:{log:L,prefix:p}})}i.deleteShader(_),i.deleteShader(A),T=new y2(i,y),C=hwe(i,y)}let T;this.getUniforms=function(){return T===void 0&&M(this),T};let C;this.getAttributes=function(){return C===void 0&&M(this),C};let E=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=i.getProgramParameter(y,iwe)),E},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=owe++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=_,this.fragmentShader=A,this}let Awe=0;class Mwe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const r=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(r),o=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(t){const r=this.materialCache.get(t);for(const n of r)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const r=this.materialCache;let n=r.get(t);return n===void 0&&(n=new Set,r.set(t,n)),n}_getShaderStage(t){const r=this.shaderCache;let n=r.get(t);return n===void 0&&(n=new Cwe(t),r.set(t,n)),n}}class Cwe{constructor(t){this.id=Awe++,this.code=t,this.usedTimes=0}}function Twe(e,t,r,n,i,o,a){const s=new Xg,l=new Mwe,u=[],d=i.isWebGL2,c=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(C){return C===0?"uv":`uv${C}`}function m(C,E,D,I,k){const L=I.fog,U=k.geometry,W=C.isMeshStandardMaterial?I.environment:null,G=(C.isMeshStandardMaterial?r:t).get(C.envMap||W),z=G&&G.mapping===l1?G.image.height:null,V=g[C.type];C.precision!==null&&(f=i.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));const j=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,H=j!==void 0?j.length:0;let Y=0;U.morphAttributes.position!==void 0&&(Y=1),U.morphAttributes.normal!==void 0&&(Y=2),U.morphAttributes.color!==void 0&&(Y=3);let Q,$,ne,Z;if(V){const Lr=Cu[V];Q=Lr.vertexShader,$=Lr.fragmentShader}else Q=C.vertexShader,$=C.fragmentShader,l.update(C),ne=l.getVertexShaderID(C),Z=l.getFragmentShaderID(C);const ce=e.getRenderTarget(),ae=k.isInstancedMesh===!0,ie=k.isBatchedMesh===!0,le=!!C.map,se=!!C.matcap,re=!!G,ye=!!C.aoMap,be=!!C.lightMap,_e=!!C.bumpMap,Se=!!C.normalMap,Fe=!!C.displacementMap,Re=!!C.emissiveMap,Le=!!C.metalnessMap,rt=!!C.roughnessMap,st=C.anisotropy>0,he=C.clearcoat>0,q=C.iridescence>0,J=C.sheen>0,ge=C.transmission>0,Pe=st&&!!C.anisotropyMap,De=he&&!!C.clearcoatMap,Ve=he&&!!C.clearcoatNormalMap,et=he&&!!C.clearcoatRoughnessMap,Ce=q&&!!C.iridescenceMap,Je=q&&!!C.iridescenceThicknessMap,ut=J&&!!C.sheenColorMap,pt=J&&!!C.sheenRoughnessMap,Ke=!!C.specularMap,gt=!!C.specularColorMap,we=!!C.specularIntensityMap,Xe=ge&&!!C.transmissionMap,nt=ge&&!!C.thicknessMap,fe=!!C.gradientMap,Be=!!C.alphaMap,de=C.alphaTest>0,Ye=!!C.alphaHash,$e=!!C.extensions,ze=!!U.attributes.uv1,ct=!!U.attributes.uv2,At=!!U.attributes.uv3;let rr=Wc;return C.toneMapped&&(ce===null||ce.isXRRenderTarget===!0)&&(rr=e.toneMapping),{isWebGL2:d,shaderID:V,shaderType:C.type,shaderName:C.name,vertexShader:Q,fragmentShader:$,defines:C.defines,customVertexShaderID:ne,customFragmentShaderID:Z,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:f,batching:ie,instancing:ae,instancingColor:ae&&k.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:ce===null?e.outputColorSpace:ce.isXRRenderTarget===!0?ce.texture.colorSpace:ed,map:le,matcap:se,envMap:re,envMapMode:re&&G.mapping,envMapCubeUVHeight:z,aoMap:ye,lightMap:be,bumpMap:_e,normalMap:Se,displacementMap:h&&Fe,emissiveMap:Re,normalMapObjectSpace:Se&&C.normalMapType===mte,normalMapTangentSpace:Se&&C.normalMapType===Qp,metalnessMap:Le,roughnessMap:rt,anisotropy:st,anisotropyMap:Pe,clearcoat:he,clearcoatMap:De,clearcoatNormalMap:Ve,clearcoatRoughnessMap:et,iridescence:q,iridescenceMap:Ce,iridescenceThicknessMap:Je,sheen:J,sheenColorMap:ut,sheenRoughnessMap:pt,specularMap:Ke,specularColorMap:gt,specularIntensityMap:we,transmission:ge,transmissionMap:Xe,thicknessMap:nt,gradientMap:fe,opaque:C.transparent===!1&&C.blending===Gg,alphaMap:Be,alphaTest:de,alphaHash:Ye,combine:C.combine,mapUv:le&&y(C.map.channel),aoMapUv:ye&&y(C.aoMap.channel),lightMapUv:be&&y(C.lightMap.channel),bumpMapUv:_e&&y(C.bumpMap.channel),normalMapUv:Se&&y(C.normalMap.channel),displacementMapUv:Fe&&y(C.displacementMap.channel),emissiveMapUv:Re&&y(C.emissiveMap.channel),metalnessMapUv:Le&&y(C.metalnessMap.channel),roughnessMapUv:rt&&y(C.roughnessMap.channel),anisotropyMapUv:Pe&&y(C.anisotropyMap.channel),clearcoatMapUv:De&&y(C.clearcoatMap.channel),clearcoatNormalMapUv:Ve&&y(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&y(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&y(C.iridescenceMap.channel),iridescenceThicknessMapUv:Je&&y(C.iridescenceThicknessMap.channel),sheenColorMapUv:ut&&y(C.sheenColorMap.channel),sheenRoughnessMapUv:pt&&y(C.sheenRoughnessMap.channel),specularMapUv:Ke&&y(C.specularMap.channel),specularColorMapUv:gt&&y(C.specularColorMap.channel),specularIntensityMapUv:we&&y(C.specularIntensityMap.channel),transmissionMapUv:Xe&&y(C.transmissionMap.channel),thicknessMapUv:nt&&y(C.thicknessMap.channel),alphaMapUv:Be&&y(C.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(Se||st),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,vertexUv1s:ze,vertexUv2s:ct,vertexUv3s:At,pointsUvs:k.isPoints===!0&&!!U.attributes.uv&&(le||Be),fog:!!L,useFog:C.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:c,skinning:k.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:Y,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:e.shadowMap.enabled&&D.length>0,shadowMapType:e.shadowMap.type,toneMapping:rr,useLegacyLights:e._useLegacyLights,decodeVideoTexture:le&&C.map.isVideoTexture===!0&&pn.getTransfer(C.map.colorSpace)===En,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Ul,flipSided:C.side===ja,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:$e&&C.extensions.derivatives===!0,extensionFragDepth:$e&&C.extensions.fragDepth===!0,extensionDrawBuffers:$e&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:$e&&C.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()}}function p(C){const E=[];if(C.shaderID?E.push(C.shaderID):(E.push(C.customVertexShaderID),E.push(C.customFragmentShaderID)),C.defines!==void 0)for(const D in C.defines)E.push(D),E.push(C.defines[D]);return C.isRawShaderMaterial===!1&&(v(E,C),b(E,C),E.push(e.outputColorSpace)),E.push(C.customProgramCacheKey),E.join()}function v(C,E){C.push(E.precision),C.push(E.outputColorSpace),C.push(E.envMapMode),C.push(E.envMapCubeUVHeight),C.push(E.mapUv),C.push(E.alphaMapUv),C.push(E.lightMapUv),C.push(E.aoMapUv),C.push(E.bumpMapUv),C.push(E.normalMapUv),C.push(E.displacementMapUv),C.push(E.emissiveMapUv),C.push(E.metalnessMapUv),C.push(E.roughnessMapUv),C.push(E.anisotropyMapUv),C.push(E.clearcoatMapUv),C.push(E.clearcoatNormalMapUv),C.push(E.clearcoatRoughnessMapUv),C.push(E.iridescenceMapUv),C.push(E.iridescenceThicknessMapUv),C.push(E.sheenColorMapUv),C.push(E.sheenRoughnessMapUv),C.push(E.specularMapUv),C.push(E.specularColorMapUv),C.push(E.specularIntensityMapUv),C.push(E.transmissionMapUv),C.push(E.thicknessMapUv),C.push(E.combine),C.push(E.fogExp2),C.push(E.sizeAttenuation),C.push(E.morphTargetsCount),C.push(E.morphAttributeCount),C.push(E.numDirLights),C.push(E.numPointLights),C.push(E.numSpotLights),C.push(E.numSpotLightMaps),C.push(E.numHemiLights),C.push(E.numRectAreaLights),C.push(E.numDirLightShadows),C.push(E.numPointLightShadows),C.push(E.numSpotLightShadows),C.push(E.numSpotLightShadowsWithMaps),C.push(E.numLightProbes),C.push(E.shadowMapType),C.push(E.toneMapping),C.push(E.numClippingPlanes),C.push(E.numClipIntersection),C.push(E.depthPacking)}function b(C,E){s.disableAll(),E.isWebGL2&&s.enable(0),E.supportsVertexTextures&&s.enable(1),E.instancing&&s.enable(2),E.instancingColor&&s.enable(3),E.matcap&&s.enable(4),E.envMap&&s.enable(5),E.normalMapObjectSpace&&s.enable(6),E.normalMapTangentSpace&&s.enable(7),E.clearcoat&&s.enable(8),E.iridescence&&s.enable(9),E.alphaTest&&s.enable(10),E.vertexColors&&s.enable(11),E.vertexAlphas&&s.enable(12),E.vertexUv1s&&s.enable(13),E.vertexUv2s&&s.enable(14),E.vertexUv3s&&s.enable(15),E.vertexTangents&&s.enable(16),E.anisotropy&&s.enable(17),E.alphaHash&&s.enable(18),E.batching&&s.enable(19),C.push(s.mask),s.disableAll(),E.fog&&s.enable(0),E.useFog&&s.enable(1),E.flatShading&&s.enable(2),E.logarithmicDepthBuffer&&s.enable(3),E.skinning&&s.enable(4),E.morphTargets&&s.enable(5),E.morphNormals&&s.enable(6),E.morphColors&&s.enable(7),E.premultipliedAlpha&&s.enable(8),E.shadowMapEnabled&&s.enable(9),E.useLegacyLights&&s.enable(10),E.doubleSided&&s.enable(11),E.flipSided&&s.enable(12),E.useDepthPacking&&s.enable(13),E.dithering&&s.enable(14),E.transmission&&s.enable(15),E.sheen&&s.enable(16),E.opaque&&s.enable(17),E.pointsUvs&&s.enable(18),E.decodeVideoTexture&&s.enable(19),C.push(s.mask)}function x(C){const E=g[C.type];let D;if(E){const I=Cu[E];D=Pte.clone(I.uniforms)}else D=C.uniforms;return D}function _(C,E){let D;for(let I=0,k=u.length;I<k;I++){const L=u[I];if(L.cacheKey===E){D=L,++D.usedTimes;break}}return D===void 0&&(D=new Swe(e,E,C,o),u.push(D)),D}function A(C){if(--C.usedTimes===0){const E=u.indexOf(C);u[E]=u[u.length-1],u.pop(),C.destroy()}}function M(C){l.remove(C)}function T(){l.dispose()}return{getParameters:m,getProgramCacheKey:p,getUniforms:x,acquireProgram:_,releaseProgram:A,releaseShaderCache:M,programs:u,dispose:T}}function Ewe(){let e=new WeakMap;function t(o){let a=e.get(o);return a===void 0&&(a={},e.set(o,a)),a}function r(o){e.delete(o)}function n(o,a,s){e.get(o)[a]=s}function i(){e=new WeakMap}return{get:t,remove:r,update:n,dispose:i}}function Pwe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function EW(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function PW(){const e=[];let t=0;const r=[],n=[],i=[];function o(){t=0,r.length=0,n.length=0,i.length=0}function a(c,h,f,g,y,m){let p=e[t];return p===void 0?(p={id:c.id,object:c,geometry:h,material:f,groupOrder:g,renderOrder:c.renderOrder,z:y,group:m},e[t]=p):(p.id=c.id,p.object=c,p.geometry=h,p.material=f,p.groupOrder=g,p.renderOrder=c.renderOrder,p.z=y,p.group=m),t++,p}function s(c,h,f,g,y,m){const p=a(c,h,f,g,y,m);f.transmission>0?n.push(p):f.transparent===!0?i.push(p):r.push(p)}function l(c,h,f,g,y,m){const p=a(c,h,f,g,y,m);f.transmission>0?n.unshift(p):f.transparent===!0?i.unshift(p):r.unshift(p)}function u(c,h){r.length>1&&r.sort(c||Pwe),n.length>1&&n.sort(h||EW),i.length>1&&i.sort(h||EW)}function d(){for(let c=t,h=e.length;c<h;c++){const f=e[c];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:r,transmissive:n,transparent:i,init:o,push:s,unshift:l,finish:d,sort:u}}function Dwe(){let e=new WeakMap;function t(n,i){const o=e.get(n);let a;return o===void 0?(a=new PW,e.set(n,[a])):i>=o.length?(a=new PW,o.push(a)):a=o[i],a}function r(){e=new WeakMap}return{get:t,dispose:r}}function Owe(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new pe,color:new Dt};break;case"SpotLight":r={position:new pe,direction:new pe,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new pe,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new pe,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":r={color:new Dt,position:new pe,halfWidth:new pe,halfHeight:new pe};break}return e[t.id]=r,r}}}function Rwe(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}let Iwe=0;function Lwe(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Bwe(e,t){const r=new Owe,n=Rwe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new pe);const o=new pe,a=new pr,s=new pr;function l(d,c){let h=0,f=0,g=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let y=0,m=0,p=0,v=0,b=0,x=0,_=0,A=0,M=0,T=0,C=0;d.sort(Lwe);const E=c===!0?Math.PI:1;for(let I=0,k=d.length;I<k;I++){const L=d[I],U=L.color,W=L.intensity,G=L.distance,z=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)h+=U.r*W*E,f+=U.g*W*E,g+=U.b*W*E;else if(L.isLightProbe){for(let V=0;V<9;V++)i.probe[V].addScaledVector(L.sh.coefficients[V],W);C++}else if(L.isDirectionalLight){const V=r.get(L);if(V.color.copy(L.color).multiplyScalar(L.intensity*E),L.castShadow){const j=L.shadow,H=n.get(L);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,i.directionalShadow[y]=H,i.directionalShadowMap[y]=z,i.directionalShadowMatrix[y]=L.shadow.matrix,x++}i.directional[y]=V,y++}else if(L.isSpotLight){const V=r.get(L);V.position.setFromMatrixPosition(L.matrixWorld),V.color.copy(U).multiplyScalar(W*E),V.distance=G,V.coneCos=Math.cos(L.angle),V.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),V.decay=L.decay,i.spot[p]=V;const j=L.shadow;if(L.map&&(i.spotLightMap[M]=L.map,M++,j.updateMatrices(L),L.castShadow&&T++),i.spotLightMatrix[p]=j.matrix,L.castShadow){const H=n.get(L);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,i.spotShadow[p]=H,i.spotShadowMap[p]=z,A++}p++}else if(L.isRectAreaLight){const V=r.get(L);V.color.copy(U).multiplyScalar(W),V.halfWidth.set(L.width*.5,0,0),V.halfHeight.set(0,L.height*.5,0),i.rectArea[v]=V,v++}else if(L.isPointLight){const V=r.get(L);if(V.color.copy(L.color).multiplyScalar(L.intensity*E),V.distance=L.distance,V.decay=L.decay,L.castShadow){const j=L.shadow,H=n.get(L);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,H.shadowCameraNear=j.camera.near,H.shadowCameraFar=j.camera.far,i.pointShadow[m]=H,i.pointShadowMap[m]=z,i.pointShadowMatrix[m]=L.shadow.matrix,_++}i.point[m]=V,m++}else if(L.isHemisphereLight){const V=r.get(L);V.skyColor.copy(L.color).multiplyScalar(W*E),V.groundColor.copy(L.groundColor).multiplyScalar(W*E),i.hemi[b]=V,b++}}v>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ct.LTC_FLOAT_1,i.rectAreaLTC2=Ct.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ct.LTC_HALF_1,i.rectAreaLTC2=Ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=g;const D=i.hash;(D.directionalLength!==y||D.pointLength!==m||D.spotLength!==p||D.rectAreaLength!==v||D.hemiLength!==b||D.numDirectionalShadows!==x||D.numPointShadows!==_||D.numSpotShadows!==A||D.numSpotMaps!==M||D.numLightProbes!==C)&&(i.directional.length=y,i.spot.length=p,i.rectArea.length=v,i.point.length=m,i.hemi.length=b,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=A+M-T,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=C,D.directionalLength=y,D.pointLength=m,D.spotLength=p,D.rectAreaLength=v,D.hemiLength=b,D.numDirectionalShadows=x,D.numPointShadows=_,D.numSpotShadows=A,D.numSpotMaps=M,D.numLightProbes=C,i.version=Iwe++)}function u(d,c){let h=0,f=0,g=0,y=0,m=0;const p=c.matrixWorldInverse;for(let v=0,b=d.length;v<b;v++){const x=d[v];if(x.isDirectionalLight){const _=i.directional[h];_.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),_.direction.sub(o),_.direction.transformDirection(p),h++}else if(x.isSpotLight){const _=i.spot[g];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(p),_.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),_.direction.sub(o),_.direction.transformDirection(p),g++}else if(x.isRectAreaLight){const _=i.rectArea[y];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(p),s.identity(),a.copy(x.matrixWorld),a.premultiply(p),s.extractRotation(a),_.halfWidth.set(x.width*.5,0,0),_.halfHeight.set(0,x.height*.5,0),_.halfWidth.applyMatrix4(s),_.halfHeight.applyMatrix4(s),y++}else if(x.isPointLight){const _=i.point[f];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(p),f++}else if(x.isHemisphereLight){const _=i.hemi[m];_.direction.setFromMatrixPosition(x.matrixWorld),_.direction.transformDirection(p),m++}}}return{setup:l,setupView:u,state:i}}function DW(e,t){const r=new Bwe(e,t),n=[],i=[];function o(){n.length=0,i.length=0}function a(c){n.push(c)}function s(c){i.push(c)}function l(c){r.setup(n,c)}function u(c){r.setupView(n,c)}return{init:o,state:{lightsArray:n,shadowsArray:i,lights:r},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:s}}function Nwe(e,t){let r=new WeakMap;function n(o,a=0){const s=r.get(o);let l;return s===void 0?(l=new DW(e,t),r.set(o,[l])):a>=s.length?(l=new DW(e,t),s.push(l)):l=s[a],l}function i(){r=new WeakMap}return{get:n,dispose:i}}class J4 extends Hi{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=fte,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Q4 extends Hi{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const kwe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Fwe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zwe(e,t,r){let n=new dM;const i=new lt,o=new lt,a=new mn,s=new J4({depthPacking:pte}),l=new Q4,u={},d=r.maxTextureSize,c={[Zc]:ja,[ja]:Zc,[Ul]:Ul},h=new td({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:kwe,fragmentShader:Fwe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const g=new Er;g.setAttribute("position",new Zr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new ji(g,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fR;let p=this.type;this.render=function(_,A,M){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||_.length===0)return;const T=e.getRenderTarget(),C=e.getActiveCubeFace(),E=e.getActiveMipmapLevel(),D=e.state;D.setBlending(gh),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const I=p!==Su&&this.type===Su,k=p===Su&&this.type!==Su;for(let L=0,U=_.length;L<U;L++){const W=_[L],G=W.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;i.copy(G.mapSize);const z=G.getFrameExtents();if(i.multiply(z),o.copy(G.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(o.x=Math.floor(d/z.x),i.x=o.x*z.x,G.mapSize.x=o.x),i.y>d&&(o.y=Math.floor(d/z.y),i.y=o.y*z.y,G.mapSize.y=o.y)),G.map===null||I===!0||k===!0){const j=this.type!==Su?{minFilter:fi,magFilter:fi}:{};G.map!==null&&G.map.dispose(),G.map=new Hu(i.x,i.y,j),G.map.texture.name=W.name+".shadowMap",G.camera.updateProjectionMatrix()}e.setRenderTarget(G.map),e.clear();const V=G.getViewportCount();for(let j=0;j<V;j++){const H=G.getViewport(j);a.set(o.x*H.x,o.y*H.y,o.x*H.z,o.y*H.w),D.viewport(a),G.updateMatrices(W,j),n=G.getFrustum(),x(A,M,G.camera,W,this.type)}G.isPointLightShadow!==!0&&this.type===Su&&v(G,M),G.needsUpdate=!1}p=this.type,m.needsUpdate=!1,e.setRenderTarget(T,C,E)};function v(_,A){const M=t.update(y);h.defines.VSM_SAMPLES!==_.blurSamples&&(h.defines.VSM_SAMPLES=_.blurSamples,f.defines.VSM_SAMPLES=_.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),_.mapPass===null&&(_.mapPass=new Hu(i.x,i.y)),h.uniforms.shadow_pass.value=_.map.texture,h.uniforms.resolution.value=_.mapSize,h.uniforms.radius.value=_.radius,e.setRenderTarget(_.mapPass),e.clear(),e.renderBufferDirect(A,null,M,h,y,null),f.uniforms.shadow_pass.value=_.mapPass.texture,f.uniforms.resolution.value=_.mapSize,f.uniforms.radius.value=_.radius,e.setRenderTarget(_.map),e.clear(),e.renderBufferDirect(A,null,M,f,y,null)}function b(_,A,M,T){let C=null;const E=M.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(E!==void 0)C=E;else if(C=M.isPointLight===!0?l:s,e.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const D=C.uuid,I=A.uuid;let k=u[D];k===void 0&&(k={},u[D]=k);let L=k[I];L===void 0&&(L=C.clone(),k[I]=L),C=L}if(C.visible=A.visible,C.wireframe=A.wireframe,T===Su?C.side=A.shadowSide!==null?A.shadowSide:A.side:C.side=A.shadowSide!==null?A.shadowSide:c[A.side],C.alphaMap=A.alphaMap,C.alphaTest=A.alphaTest,C.map=A.map,C.clipShadows=A.clipShadows,C.clippingPlanes=A.clippingPlanes,C.clipIntersection=A.clipIntersection,C.displacementMap=A.displacementMap,C.displacementScale=A.displacementScale,C.displacementBias=A.displacementBias,C.wireframeLinewidth=A.wireframeLinewidth,C.linewidth=A.linewidth,M.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const D=e.properties.get(C);D.light=M}return C}function x(_,A,M,T,C){if(_.visible===!1)return;if(_.layers.test(A.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&C===Su)&&(!_.frustumCulled||n.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,_.matrixWorld);const I=t.update(_),k=_.material;if(Array.isArray(k)){const L=I.groups;for(let U=0,W=L.length;U<W;U++){const G=L[U],z=k[G.materialIndex];if(z&&z.visible){const V=b(_,z,T,C);_.onBeforeShadow(e,_,A,M,I,V,G),e.renderBufferDirect(M,null,I,V,_,G),_.onAfterShadow(e,_,A,M,I,V,G)}}}else if(k.visible){const L=b(_,k,T,C);_.onBeforeShadow(e,_,A,M,I,L,null),e.renderBufferDirect(M,null,I,L,_,null),_.onAfterShadow(e,_,A,M,I,L,null)}}const D=_.children;for(let I=0,k=D.length;I<k;I++)x(D[I],A,M,T,C)}}function Uwe(e,t,r){const n=r.isWebGL2;function i(){let de=!1;const Ye=new mn;let $e=null;const ze=new mn(0,0,0,0);return{setMask:function(ct){$e!==ct&&!de&&(e.colorMask(ct,ct,ct,ct),$e=ct)},setLocked:function(ct){de=ct},setClear:function(ct,At,rr,Gt,Lr){Lr===!0&&(ct*=Gt,At*=Gt,rr*=Gt),Ye.set(ct,At,rr,Gt),ze.equals(Ye)===!1&&(e.clearColor(ct,At,rr,Gt),ze.copy(Ye))},reset:function(){de=!1,$e=null,ze.set(-1,0,0,0)}}}function o(){let de=!1,Ye=null,$e=null,ze=null;return{setTest:function(ct){ct?ie(e.DEPTH_TEST):le(e.DEPTH_TEST)},setMask:function(ct){Ye!==ct&&!de&&(e.depthMask(ct),Ye=ct)},setFunc:function(ct){if($e!==ct){switch(ct){case Vee:e.depthFunc(e.NEVER);break;case jee:e.depthFunc(e.ALWAYS);break;case Hee:e.depthFunc(e.LESS);break;case uA:e.depthFunc(e.LEQUAL);break;case Gee:e.depthFunc(e.EQUAL);break;case Wee:e.depthFunc(e.GEQUAL);break;case qee:e.depthFunc(e.GREATER);break;case Xee:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}$e=ct}},setLocked:function(ct){de=ct},setClear:function(ct){ze!==ct&&(e.clearDepth(ct),ze=ct)},reset:function(){de=!1,Ye=null,$e=null,ze=null}}}function a(){let de=!1,Ye=null,$e=null,ze=null,ct=null,At=null,rr=null,Gt=null,Lr=null;return{setTest:function(nr){de||(nr?ie(e.STENCIL_TEST):le(e.STENCIL_TEST))},setMask:function(nr){Ye!==nr&&!de&&(e.stencilMask(nr),Ye=nr)},setFunc:function(nr,on,bi){($e!==nr||ze!==on||ct!==bi)&&(e.stencilFunc(nr,on,bi),$e=nr,ze=on,ct=bi)},setOp:function(nr,on,bi){(At!==nr||rr!==on||Gt!==bi)&&(e.stencilOp(nr,on,bi),At=nr,rr=on,Gt=bi)},setLocked:function(nr){de=nr},setClear:function(nr){Lr!==nr&&(e.clearStencil(nr),Lr=nr)},reset:function(){de=!1,Ye=null,$e=null,ze=null,ct=null,At=null,rr=null,Gt=null,Lr=null}}}const s=new i,l=new o,u=new a,d=new WeakMap,c=new WeakMap;let h={},f={},g=new WeakMap,y=[],m=null,p=!1,v=null,b=null,x=null,_=null,A=null,M=null,T=null,C=new Dt(0,0,0),E=0,D=!1,I=null,k=null,L=null,U=null,W=null;const G=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,V=0;const j=e.getParameter(e.VERSION);j.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(j)[1]),z=V>=1):j.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),z=V>=2);let H=null,Y={};const Q=e.getParameter(e.SCISSOR_BOX),$=e.getParameter(e.VIEWPORT),ne=new mn().fromArray(Q),Z=new mn().fromArray($);function ce(de,Ye,$e,ze){const ct=new Uint8Array(4),At=e.createTexture();e.bindTexture(de,At),e.texParameteri(de,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(de,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let rr=0;rr<$e;rr++)n&&(de===e.TEXTURE_3D||de===e.TEXTURE_2D_ARRAY)?e.texImage3D(Ye,0,e.RGBA,1,1,ze,0,e.RGBA,e.UNSIGNED_BYTE,ct):e.texImage2D(Ye+rr,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,ct);return At}const ae={};ae[e.TEXTURE_2D]=ce(e.TEXTURE_2D,e.TEXTURE_2D,1),ae[e.TEXTURE_CUBE_MAP]=ce(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(ae[e.TEXTURE_2D_ARRAY]=ce(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),ae[e.TEXTURE_3D]=ce(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ie(e.DEPTH_TEST),l.setFunc(uA),Re(!1),Le(uF),ie(e.CULL_FACE),Se(gh);function ie(de){h[de]!==!0&&(e.enable(de),h[de]=!0)}function le(de){h[de]!==!1&&(e.disable(de),h[de]=!1)}function se(de,Ye){return f[de]!==Ye?(e.bindFramebuffer(de,Ye),f[de]=Ye,n&&(de===e.DRAW_FRAMEBUFFER&&(f[e.FRAMEBUFFER]=Ye),de===e.FRAMEBUFFER&&(f[e.DRAW_FRAMEBUFFER]=Ye)),!0):!1}function re(de,Ye){let $e=y,ze=!1;if(de)if($e=g.get(Ye),$e===void 0&&($e=[],g.set(Ye,$e)),de.isWebGLMultipleRenderTargets){const ct=de.texture;if($e.length!==ct.length||$e[0]!==e.COLOR_ATTACHMENT0){for(let At=0,rr=ct.length;At<rr;At++)$e[At]=e.COLOR_ATTACHMENT0+At;$e.length=ct.length,ze=!0}}else $e[0]!==e.COLOR_ATTACHMENT0&&($e[0]=e.COLOR_ATTACHMENT0,ze=!0);else $e[0]!==e.BACK&&($e[0]=e.BACK,ze=!0);ze&&(r.isWebGL2?e.drawBuffers($e):t.get("WEBGL_draw_buffers").drawBuffersWEBGL($e))}function ye(de){return m!==de?(e.useProgram(de),m=de,!0):!1}const be={[$f]:e.FUNC_ADD,[Cee]:e.FUNC_SUBTRACT,[Tee]:e.FUNC_REVERSE_SUBTRACT};if(n)be[fF]=e.MIN,be[pF]=e.MAX;else{const de=t.get("EXT_blend_minmax");de!==null&&(be[fF]=de.MIN_EXT,be[pF]=de.MAX_EXT)}const _e={[Eee]:e.ZERO,[Pee]:e.ONE,[Dee]:e.SRC_COLOR,[mD]:e.SRC_ALPHA,[Nee]:e.SRC_ALPHA_SATURATE,[Lee]:e.DST_COLOR,[Ree]:e.DST_ALPHA,[Oee]:e.ONE_MINUS_SRC_COLOR,[gD]:e.ONE_MINUS_SRC_ALPHA,[Bee]:e.ONE_MINUS_DST_COLOR,[Iee]:e.ONE_MINUS_DST_ALPHA,[kee]:e.CONSTANT_COLOR,[Fee]:e.ONE_MINUS_CONSTANT_COLOR,[zee]:e.CONSTANT_ALPHA,[Uee]:e.ONE_MINUS_CONSTANT_ALPHA};function Se(de,Ye,$e,ze,ct,At,rr,Gt,Lr,nr){if(de===gh){p===!0&&(le(e.BLEND),p=!1);return}if(p===!1&&(ie(e.BLEND),p=!0),de!==Mee){if(de!==v||nr!==D){if((b!==$f||A!==$f)&&(e.blendEquation(e.FUNC_ADD),b=$f,A=$f),nr)switch(de){case Gg:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case cF:e.blendFunc(e.ONE,e.ONE);break;case dF:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case hF:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case Gg:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case cF:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case dF:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case hF:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}x=null,_=null,M=null,T=null,C.set(0,0,0),E=0,v=de,D=nr}return}ct=ct||Ye,At=At||$e,rr=rr||ze,(Ye!==b||ct!==A)&&(e.blendEquationSeparate(be[Ye],be[ct]),b=Ye,A=ct),($e!==x||ze!==_||At!==M||rr!==T)&&(e.blendFuncSeparate(_e[$e],_e[ze],_e[At],_e[rr]),x=$e,_=ze,M=At,T=rr),(Gt.equals(C)===!1||Lr!==E)&&(e.blendColor(Gt.r,Gt.g,Gt.b,Lr),C.copy(Gt),E=Lr),v=de,D=!1}function Fe(de,Ye){de.side===Ul?le(e.CULL_FACE):ie(e.CULL_FACE);let $e=de.side===ja;Ye&&($e=!$e),Re($e),de.blending===Gg&&de.transparent===!1?Se(gh):Se(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),s.setMask(de.colorWrite);const ze=de.stencilWrite;u.setTest(ze),ze&&(u.setMask(de.stencilWriteMask),u.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),u.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),st(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?ie(e.SAMPLE_ALPHA_TO_COVERAGE):le(e.SAMPLE_ALPHA_TO_COVERAGE)}function Re(de){I!==de&&(de?e.frontFace(e.CW):e.frontFace(e.CCW),I=de)}function Le(de){de!==_ee?(ie(e.CULL_FACE),de!==k&&(de===uF?e.cullFace(e.BACK):de===See?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):le(e.CULL_FACE),k=de}function rt(de){de!==L&&(z&&e.lineWidth(de),L=de)}function st(de,Ye,$e){de?(ie(e.POLYGON_OFFSET_FILL),(U!==Ye||W!==$e)&&(e.polygonOffset(Ye,$e),U=Ye,W=$e)):le(e.POLYGON_OFFSET_FILL)}function he(de){de?ie(e.SCISSOR_TEST):le(e.SCISSOR_TEST)}function q(de){de===void 0&&(de=e.TEXTURE0+G-1),H!==de&&(e.activeTexture(de),H=de)}function J(de,Ye,$e){$e===void 0&&(H===null?$e=e.TEXTURE0+G-1:$e=H);let ze=Y[$e];ze===void 0&&(ze={type:void 0,texture:void 0},Y[$e]=ze),(ze.type!==de||ze.texture!==Ye)&&(H!==$e&&(e.activeTexture($e),H=$e),e.bindTexture(de,Ye||ae[de]),ze.type=de,ze.texture=Ye)}function ge(){const de=Y[H];de!==void 0&&de.type!==void 0&&(e.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function Pe(){try{e.compressedTexImage2D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function De(){try{e.compressedTexImage3D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ve(){try{e.texSubImage2D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function et(){try{e.texSubImage3D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ce(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Je(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ut(){try{e.texStorage2D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function pt(){try{e.texStorage3D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ke(){try{e.texImage2D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function gt(){try{e.texImage3D.apply(e,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function we(de){ne.equals(de)===!1&&(e.scissor(de.x,de.y,de.z,de.w),ne.copy(de))}function Xe(de){Z.equals(de)===!1&&(e.viewport(de.x,de.y,de.z,de.w),Z.copy(de))}function nt(de,Ye){let $e=c.get(Ye);$e===void 0&&($e=new WeakMap,c.set(Ye,$e));let ze=$e.get(de);ze===void 0&&(ze=e.getUniformBlockIndex(Ye,de.name),$e.set(de,ze))}function fe(de,Ye){const ze=c.get(Ye).get(de);d.get(Ye)!==ze&&(e.uniformBlockBinding(Ye,ze,de.__bindingPointIndex),d.set(Ye,ze))}function Be(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),n===!0&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},H=null,Y={},f={},g=new WeakMap,y=[],m=null,p=!1,v=null,b=null,x=null,_=null,A=null,M=null,T=null,C=new Dt(0,0,0),E=0,D=!1,I=null,k=null,L=null,U=null,W=null,ne.set(0,0,e.canvas.width,e.canvas.height),Z.set(0,0,e.canvas.width,e.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:ie,disable:le,bindFramebuffer:se,drawBuffers:re,useProgram:ye,setBlending:Se,setMaterial:Fe,setFlipSided:Re,setCullFace:Le,setLineWidth:rt,setPolygonOffset:st,setScissorTest:he,activeTexture:q,bindTexture:J,unbindTexture:ge,compressedTexImage2D:Pe,compressedTexImage3D:De,texImage2D:Ke,texImage3D:gt,updateUBOMapping:nt,uniformBlockBinding:fe,texStorage2D:ut,texStorage3D:pt,texSubImage2D:Ve,texSubImage3D:et,compressedTexSubImage2D:Ce,compressedTexSubImage3D:Je,scissor:we,viewport:Xe,reset:Be}}function Vwe(e,t,r,n,i,o,a){const s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,d=i.maxTextureSize,c=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let y;const m=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(q,J){return p?new OffscreenCanvas(q,J):yA("canvas")}function b(q,J,ge,Pe){let De=1;if((q.width>Pe||q.height>Pe)&&(De=Pe/Math.max(q.width,q.height)),De<1||J===!0)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap){const Ve=J?bD:Math.floor,et=Ve(De*q.width),Ce=Ve(De*q.height);y===void 0&&(y=v(et,Ce));const Je=ge?v(et,Ce):y;return Je.width=et,Je.height=Ce,Je.getContext("2d").drawImage(q,0,0,et,Ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+q.width+"x"+q.height+") to ("+et+"x"+Ce+")."),Je}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+q.width+"x"+q.height+")."),q;return q}function x(q){return HF(q.width)&&HF(q.height)}function _(q){return s?!1:q.wrapS!==ko||q.wrapT!==ko||q.minFilter!==fi&&q.minFilter!==Qn}function A(q,J){return q.generateMipmaps&&J&&q.minFilter!==fi&&q.minFilter!==Qn}function M(q){e.generateMipmap(q)}function T(q,J,ge,Pe,De=!1){if(s===!1)return J;if(q!==null){if(e[q]!==void 0)return e[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let Ve=J;if(J===e.RED&&(ge===e.FLOAT&&(Ve=e.R32F),ge===e.HALF_FLOAT&&(Ve=e.R16F),ge===e.UNSIGNED_BYTE&&(Ve=e.R8)),J===e.RED_INTEGER&&(ge===e.UNSIGNED_BYTE&&(Ve=e.R8UI),ge===e.UNSIGNED_SHORT&&(Ve=e.R16UI),ge===e.UNSIGNED_INT&&(Ve=e.R32UI),ge===e.BYTE&&(Ve=e.R8I),ge===e.SHORT&&(Ve=e.R16I),ge===e.INT&&(Ve=e.R32I)),J===e.RG&&(ge===e.FLOAT&&(Ve=e.RG32F),ge===e.HALF_FLOAT&&(Ve=e.RG16F),ge===e.UNSIGNED_BYTE&&(Ve=e.RG8)),J===e.RGBA){const et=De?pA:pn.getTransfer(Pe);ge===e.FLOAT&&(Ve=e.RGBA32F),ge===e.HALF_FLOAT&&(Ve=e.RGBA16F),ge===e.UNSIGNED_BYTE&&(Ve=et===En?e.SRGB8_ALPHA8:e.RGBA8),ge===e.UNSIGNED_SHORT_4_4_4_4&&(Ve=e.RGBA4),ge===e.UNSIGNED_SHORT_5_5_5_1&&(Ve=e.RGB5_A1)}return(Ve===e.R16F||Ve===e.R32F||Ve===e.RG16F||Ve===e.RG32F||Ve===e.RGBA16F||Ve===e.RGBA32F)&&t.get("EXT_color_buffer_float"),Ve}function C(q,J,ge){return A(q,ge)===!0||q.isFramebufferTexture&&q.minFilter!==fi&&q.minFilter!==Qn?Math.log2(Math.max(J.width,J.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?J.mipmaps.length:1}function E(q){return q===fi||q===hA||q===Vb?e.NEAREST:e.LINEAR}function D(q){const J=q.target;J.removeEventListener("dispose",D),k(J),J.isVideoTexture&&g.delete(J)}function I(q){const J=q.target;J.removeEventListener("dispose",I),U(J)}function k(q){const J=n.get(q);if(J.__webglInit===void 0)return;const ge=q.source,Pe=m.get(ge);if(Pe){const De=Pe[J.__cacheKey];De.usedTimes--,De.usedTimes===0&&L(q),Object.keys(Pe).length===0&&m.delete(ge)}n.remove(q)}function L(q){const J=n.get(q);e.deleteTexture(J.__webglTexture);const ge=q.source,Pe=m.get(ge);delete Pe[J.__cacheKey],a.memory.textures--}function U(q){const J=q.texture,ge=n.get(q),Pe=n.get(J);if(Pe.__webglTexture!==void 0&&(e.deleteTexture(Pe.__webglTexture),a.memory.textures--),q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let De=0;De<6;De++){if(Array.isArray(ge.__webglFramebuffer[De]))for(let Ve=0;Ve<ge.__webglFramebuffer[De].length;Ve++)e.deleteFramebuffer(ge.__webglFramebuffer[De][Ve]);else e.deleteFramebuffer(ge.__webglFramebuffer[De]);ge.__webglDepthbuffer&&e.deleteRenderbuffer(ge.__webglDepthbuffer[De])}else{if(Array.isArray(ge.__webglFramebuffer))for(let De=0;De<ge.__webglFramebuffer.length;De++)e.deleteFramebuffer(ge.__webglFramebuffer[De]);else e.deleteFramebuffer(ge.__webglFramebuffer);if(ge.__webglDepthbuffer&&e.deleteRenderbuffer(ge.__webglDepthbuffer),ge.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ge.__webglMultisampledFramebuffer),ge.__webglColorRenderbuffer)for(let De=0;De<ge.__webglColorRenderbuffer.length;De++)ge.__webglColorRenderbuffer[De]&&e.deleteRenderbuffer(ge.__webglColorRenderbuffer[De]);ge.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ge.__webglDepthRenderbuffer)}if(q.isWebGLMultipleRenderTargets)for(let De=0,Ve=J.length;De<Ve;De++){const et=n.get(J[De]);et.__webglTexture&&(e.deleteTexture(et.__webglTexture),a.memory.textures--),n.remove(J[De])}n.remove(J),n.remove(q)}let W=0;function G(){W=0}function z(){const q=W;return q>=l&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+l),W+=1,q}function V(q){const J=[];return J.push(q.wrapS),J.push(q.wrapT),J.push(q.wrapR||0),J.push(q.magFilter),J.push(q.minFilter),J.push(q.anisotropy),J.push(q.internalFormat),J.push(q.format),J.push(q.type),J.push(q.generateMipmaps),J.push(q.premultiplyAlpha),J.push(q.flipY),J.push(q.unpackAlignment),J.push(q.colorSpace),J.join()}function j(q,J){const ge=n.get(q);if(q.isVideoTexture&&st(q),q.isRenderTargetTexture===!1&&q.version>0&&ge.__version!==q.version){const Pe=q.image;if(Pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(ge,q,J);return}}r.bindTexture(e.TEXTURE_2D,ge.__webglTexture,e.TEXTURE0+J)}function H(q,J){const ge=n.get(q);if(q.version>0&&ge.__version!==q.version){ie(ge,q,J);return}r.bindTexture(e.TEXTURE_2D_ARRAY,ge.__webglTexture,e.TEXTURE0+J)}function Y(q,J){const ge=n.get(q);if(q.version>0&&ge.__version!==q.version){ie(ge,q,J);return}r.bindTexture(e.TEXTURE_3D,ge.__webglTexture,e.TEXTURE0+J)}function Q(q,J){const ge=n.get(q);if(q.version>0&&ge.__version!==q.version){le(ge,q,J);return}r.bindTexture(e.TEXTURE_CUBE_MAP,ge.__webglTexture,e.TEXTURE0+J)}const $={[Fp]:e.REPEAT,[ko]:e.CLAMP_TO_EDGE,[bx]:e.MIRRORED_REPEAT},ne={[fi]:e.NEAREST,[hA]:e.NEAREST_MIPMAP_NEAREST,[Vb]:e.NEAREST_MIPMAP_LINEAR,[Qn]:e.LINEAR,[mR]:e.LINEAR_MIPMAP_NEAREST,[$c]:e.LINEAR_MIPMAP_LINEAR},Z={[gte]:e.NEVER,[_te]:e.ALWAYS,[vte]:e.LESS,[U4]:e.LEQUAL,[yte]:e.EQUAL,[wte]:e.GEQUAL,[bte]:e.GREATER,[xte]:e.NOTEQUAL};function ce(q,J,ge){if(ge?(e.texParameteri(q,e.TEXTURE_WRAP_S,$[J.wrapS]),e.texParameteri(q,e.TEXTURE_WRAP_T,$[J.wrapT]),(q===e.TEXTURE_3D||q===e.TEXTURE_2D_ARRAY)&&e.texParameteri(q,e.TEXTURE_WRAP_R,$[J.wrapR]),e.texParameteri(q,e.TEXTURE_MAG_FILTER,ne[J.magFilter]),e.texParameteri(q,e.TEXTURE_MIN_FILTER,ne[J.minFilter])):(e.texParameteri(q,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(q,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(q===e.TEXTURE_3D||q===e.TEXTURE_2D_ARRAY)&&e.texParameteri(q,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),(J.wrapS!==ko||J.wrapT!==ko)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(q,e.TEXTURE_MAG_FILTER,E(J.magFilter)),e.texParameteri(q,e.TEXTURE_MIN_FILTER,E(J.minFilter)),J.minFilter!==fi&&J.minFilter!==Qn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),J.compareFunction&&(e.texParameteri(q,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(q,e.TEXTURE_COMPARE_FUNC,Z[J.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){const Pe=t.get("EXT_texture_filter_anisotropic");if(J.magFilter===fi||J.minFilter!==Vb&&J.minFilter!==$c||J.type===Pu&&t.has("OES_texture_float_linear")===!1||s===!1&&J.type===xx&&t.has("OES_texture_half_float_linear")===!1)return;(J.anisotropy>1||n.get(J).__currentAnisotropy)&&(e.texParameterf(q,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,i.getMaxAnisotropy())),n.get(J).__currentAnisotropy=J.anisotropy)}}function ae(q,J){let ge=!1;q.__webglInit===void 0&&(q.__webglInit=!0,J.addEventListener("dispose",D));const Pe=J.source;let De=m.get(Pe);De===void 0&&(De={},m.set(Pe,De));const Ve=V(J);if(Ve!==q.__cacheKey){De[Ve]===void 0&&(De[Ve]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,ge=!0),De[Ve].usedTimes++;const et=De[q.__cacheKey];et!==void 0&&(De[q.__cacheKey].usedTimes--,et.usedTimes===0&&L(J)),q.__cacheKey=Ve,q.__webglTexture=De[Ve].texture}return ge}function ie(q,J,ge){let Pe=e.TEXTURE_2D;(J.isDataArrayTexture||J.isCompressedArrayTexture)&&(Pe=e.TEXTURE_2D_ARRAY),J.isData3DTexture&&(Pe=e.TEXTURE_3D);const De=ae(q,J),Ve=J.source;r.bindTexture(Pe,q.__webglTexture,e.TEXTURE0+ge);const et=n.get(Ve);if(Ve.version!==et.__version||De===!0){r.activeTexture(e.TEXTURE0+ge);const Ce=pn.getPrimaries(pn.workingColorSpace),Je=J.colorSpace===Xs?null:pn.getPrimaries(J.colorSpace),ut=J.colorSpace===Xs||Ce===Je?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,J.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,J.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);const pt=_(J)&&x(J.image)===!1;let Ke=b(J.image,pt,!1,d);Ke=he(J,Ke);const gt=x(Ke)||s,we=o.convert(J.format,J.colorSpace);let Xe=o.convert(J.type),nt=T(J.internalFormat,we,Xe,J.colorSpace,J.isVideoTexture);ce(Pe,J,gt);let fe;const Be=J.mipmaps,de=s&&J.isVideoTexture!==!0&&nt!==N4,Ye=et.__version===void 0||De===!0,$e=C(J,Ke,gt);if(J.isDepthTexture)nt=e.DEPTH_COMPONENT,s?J.type===Pu?nt=e.DEPTH_COMPONENT32F:J.type===uh?nt=e.DEPTH_COMPONENT24:J.type===Sp?nt=e.DEPTH24_STENCIL8:nt=e.DEPTH_COMPONENT16:J.type===Pu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),J.format===Ap&&nt===e.DEPTH_COMPONENT&&J.type!==gR&&J.type!==uh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),J.type=uh,Xe=o.convert(J.type)),J.format===c0&&nt===e.DEPTH_COMPONENT&&(nt=e.DEPTH_STENCIL,J.type!==Sp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),J.type=Sp,Xe=o.convert(J.type))),Ye&&(de?r.texStorage2D(e.TEXTURE_2D,1,nt,Ke.width,Ke.height):r.texImage2D(e.TEXTURE_2D,0,nt,Ke.width,Ke.height,0,we,Xe,null));else if(J.isDataTexture)if(Be.length>0&&gt){de&&Ye&&r.texStorage2D(e.TEXTURE_2D,$e,nt,Be[0].width,Be[0].height);for(let ze=0,ct=Be.length;ze<ct;ze++)fe=Be[ze],de?r.texSubImage2D(e.TEXTURE_2D,ze,0,0,fe.width,fe.height,we,Xe,fe.data):r.texImage2D(e.TEXTURE_2D,ze,nt,fe.width,fe.height,0,we,Xe,fe.data);J.generateMipmaps=!1}else de?(Ye&&r.texStorage2D(e.TEXTURE_2D,$e,nt,Ke.width,Ke.height),r.texSubImage2D(e.TEXTURE_2D,0,0,0,Ke.width,Ke.height,we,Xe,Ke.data)):r.texImage2D(e.TEXTURE_2D,0,nt,Ke.width,Ke.height,0,we,Xe,Ke.data);else if(J.isCompressedTexture)if(J.isCompressedArrayTexture){de&&Ye&&r.texStorage3D(e.TEXTURE_2D_ARRAY,$e,nt,Be[0].width,Be[0].height,Ke.depth);for(let ze=0,ct=Be.length;ze<ct;ze++)fe=Be[ze],J.format!==Ia?we!==null?de?r.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,ze,0,0,0,fe.width,fe.height,Ke.depth,we,fe.data,0,0):r.compressedTexImage3D(e.TEXTURE_2D_ARRAY,ze,nt,fe.width,fe.height,Ke.depth,0,fe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):de?r.texSubImage3D(e.TEXTURE_2D_ARRAY,ze,0,0,0,fe.width,fe.height,Ke.depth,we,Xe,fe.data):r.texImage3D(e.TEXTURE_2D_ARRAY,ze,nt,fe.width,fe.height,Ke.depth,0,we,Xe,fe.data)}else{de&&Ye&&r.texStorage2D(e.TEXTURE_2D,$e,nt,Be[0].width,Be[0].height);for(let ze=0,ct=Be.length;ze<ct;ze++)fe=Be[ze],J.format!==Ia?we!==null?de?r.compressedTexSubImage2D(e.TEXTURE_2D,ze,0,0,fe.width,fe.height,we,fe.data):r.compressedTexImage2D(e.TEXTURE_2D,ze,nt,fe.width,fe.height,0,fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):de?r.texSubImage2D(e.TEXTURE_2D,ze,0,0,fe.width,fe.height,we,Xe,fe.data):r.texImage2D(e.TEXTURE_2D,ze,nt,fe.width,fe.height,0,we,Xe,fe.data)}else if(J.isDataArrayTexture)de?(Ye&&r.texStorage3D(e.TEXTURE_2D_ARRAY,$e,nt,Ke.width,Ke.height,Ke.depth),r.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,Ke.width,Ke.height,Ke.depth,we,Xe,Ke.data)):r.texImage3D(e.TEXTURE_2D_ARRAY,0,nt,Ke.width,Ke.height,Ke.depth,0,we,Xe,Ke.data);else if(J.isData3DTexture)de?(Ye&&r.texStorage3D(e.TEXTURE_3D,$e,nt,Ke.width,Ke.height,Ke.depth),r.texSubImage3D(e.TEXTURE_3D,0,0,0,0,Ke.width,Ke.height,Ke.depth,we,Xe,Ke.data)):r.texImage3D(e.TEXTURE_3D,0,nt,Ke.width,Ke.height,Ke.depth,0,we,Xe,Ke.data);else if(J.isFramebufferTexture){if(Ye)if(de)r.texStorage2D(e.TEXTURE_2D,$e,nt,Ke.width,Ke.height);else{let ze=Ke.width,ct=Ke.height;for(let At=0;At<$e;At++)r.texImage2D(e.TEXTURE_2D,At,nt,ze,ct,0,we,Xe,null),ze>>=1,ct>>=1}}else if(Be.length>0&&gt){de&&Ye&&r.texStorage2D(e.TEXTURE_2D,$e,nt,Be[0].width,Be[0].height);for(let ze=0,ct=Be.length;ze<ct;ze++)fe=Be[ze],de?r.texSubImage2D(e.TEXTURE_2D,ze,0,0,we,Xe,fe):r.texImage2D(e.TEXTURE_2D,ze,nt,we,Xe,fe);J.generateMipmaps=!1}else de?(Ye&&r.texStorage2D(e.TEXTURE_2D,$e,nt,Ke.width,Ke.height),r.texSubImage2D(e.TEXTURE_2D,0,0,0,we,Xe,Ke)):r.texImage2D(e.TEXTURE_2D,0,nt,we,Xe,Ke);A(J,gt)&&M(Pe),et.__version=Ve.version,J.onUpdate&&J.onUpdate(J)}q.__version=J.version}function le(q,J,ge){if(J.image.length!==6)return;const Pe=ae(q,J),De=J.source;r.bindTexture(e.TEXTURE_CUBE_MAP,q.__webglTexture,e.TEXTURE0+ge);const Ve=n.get(De);if(De.version!==Ve.__version||Pe===!0){r.activeTexture(e.TEXTURE0+ge);const et=pn.getPrimaries(pn.workingColorSpace),Ce=J.colorSpace===Xs?null:pn.getPrimaries(J.colorSpace),Je=J.colorSpace===Xs||et===Ce?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,J.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,J.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);const ut=J.isCompressedTexture||J.image[0].isCompressedTexture,pt=J.image[0]&&J.image[0].isDataTexture,Ke=[];for(let ze=0;ze<6;ze++)!ut&&!pt?Ke[ze]=b(J.image[ze],!1,!0,u):Ke[ze]=pt?J.image[ze].image:J.image[ze],Ke[ze]=he(J,Ke[ze]);const gt=Ke[0],we=x(gt)||s,Xe=o.convert(J.format,J.colorSpace),nt=o.convert(J.type),fe=T(J.internalFormat,Xe,nt,J.colorSpace),Be=s&&J.isVideoTexture!==!0,de=Ve.__version===void 0||Pe===!0;let Ye=C(J,gt,we);ce(e.TEXTURE_CUBE_MAP,J,we);let $e;if(ut){Be&&de&&r.texStorage2D(e.TEXTURE_CUBE_MAP,Ye,fe,gt.width,gt.height);for(let ze=0;ze<6;ze++){$e=Ke[ze].mipmaps;for(let ct=0;ct<$e.length;ct++){const At=$e[ct];J.format!==Ia?Xe!==null?Be?r.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ct,0,0,At.width,At.height,Xe,At.data):r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ct,fe,At.width,At.height,0,At.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Be?r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ct,0,0,At.width,At.height,Xe,nt,At.data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ct,fe,At.width,At.height,0,Xe,nt,At.data)}}}else{$e=J.mipmaps,Be&&de&&($e.length>0&&Ye++,r.texStorage2D(e.TEXTURE_CUBE_MAP,Ye,fe,Ke[0].width,Ke[0].height));for(let ze=0;ze<6;ze++)if(pt){Be?r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,0,0,Ke[ze].width,Ke[ze].height,Xe,nt,Ke[ze].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,fe,Ke[ze].width,Ke[ze].height,0,Xe,nt,Ke[ze].data);for(let ct=0;ct<$e.length;ct++){const rr=$e[ct].image[ze].image;Be?r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ct+1,0,0,rr.width,rr.height,Xe,nt,rr.data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ct+1,fe,rr.width,rr.height,0,Xe,nt,rr.data)}}else{Be?r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,0,0,Xe,nt,Ke[ze]):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,fe,Xe,nt,Ke[ze]);for(let ct=0;ct<$e.length;ct++){const At=$e[ct];Be?r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ct+1,0,0,Xe,nt,At.image[ze]):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ct+1,fe,Xe,nt,At.image[ze])}}}A(J,we)&&M(e.TEXTURE_CUBE_MAP),Ve.__version=De.version,J.onUpdate&&J.onUpdate(J)}q.__version=J.version}function se(q,J,ge,Pe,De,Ve){const et=o.convert(ge.format,ge.colorSpace),Ce=o.convert(ge.type),Je=T(ge.internalFormat,et,Ce,ge.colorSpace);if(!n.get(J).__hasExternalTextures){const pt=Math.max(1,J.width>>Ve),Ke=Math.max(1,J.height>>Ve);De===e.TEXTURE_3D||De===e.TEXTURE_2D_ARRAY?r.texImage3D(De,Ve,Je,pt,Ke,J.depth,0,et,Ce,null):r.texImage2D(De,Ve,Je,pt,Ke,0,et,Ce,null)}r.bindFramebuffer(e.FRAMEBUFFER,q),rt(J)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,Pe,De,n.get(ge).__webglTexture,0,Le(J)):(De===e.TEXTURE_2D||De>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,Pe,De,n.get(ge).__webglTexture,Ve),r.bindFramebuffer(e.FRAMEBUFFER,null)}function re(q,J,ge){if(e.bindRenderbuffer(e.RENDERBUFFER,q),J.depthBuffer&&!J.stencilBuffer){let Pe=s===!0?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(ge||rt(J)){const De=J.depthTexture;De&&De.isDepthTexture&&(De.type===Pu?Pe=e.DEPTH_COMPONENT32F:De.type===uh&&(Pe=e.DEPTH_COMPONENT24));const Ve=Le(J);rt(J)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,Ve,Pe,J.width,J.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,Ve,Pe,J.width,J.height)}else e.renderbufferStorage(e.RENDERBUFFER,Pe,J.width,J.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,q)}else if(J.depthBuffer&&J.stencilBuffer){const Pe=Le(J);ge&&rt(J)===!1?e.renderbufferStorageMultisample(e.RENDERBUFFER,Pe,e.DEPTH24_STENCIL8,J.width,J.height):rt(J)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,Pe,e.DEPTH24_STENCIL8,J.width,J.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,J.width,J.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,q)}else{const Pe=J.isWebGLMultipleRenderTargets===!0?J.texture:[J.texture];for(let De=0;De<Pe.length;De++){const Ve=Pe[De],et=o.convert(Ve.format,Ve.colorSpace),Ce=o.convert(Ve.type),Je=T(Ve.internalFormat,et,Ce,Ve.colorSpace),ut=Le(J);ge&&rt(J)===!1?e.renderbufferStorageMultisample(e.RENDERBUFFER,ut,Je,J.width,J.height):rt(J)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,ut,Je,J.width,J.height):e.renderbufferStorage(e.RENDERBUFFER,Je,J.width,J.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function ye(q,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(e.FRAMEBUFFER,q),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(J.depthTexture).__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),j(J.depthTexture,0);const Pe=n.get(J.depthTexture).__webglTexture,De=Le(J);if(J.depthTexture.format===Ap)rt(J)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,Pe,0,De):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,Pe,0);else if(J.depthTexture.format===c0)rt(J)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,Pe,0,De):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function be(q){const J=n.get(q),ge=q.isWebGLCubeRenderTarget===!0;if(q.depthTexture&&!J.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");ye(J.__webglFramebuffer,q)}else if(ge){J.__webglDepthbuffer=[];for(let Pe=0;Pe<6;Pe++)r.bindFramebuffer(e.FRAMEBUFFER,J.__webglFramebuffer[Pe]),J.__webglDepthbuffer[Pe]=e.createRenderbuffer(),re(J.__webglDepthbuffer[Pe],q,!1)}else r.bindFramebuffer(e.FRAMEBUFFER,J.__webglFramebuffer),J.__webglDepthbuffer=e.createRenderbuffer(),re(J.__webglDepthbuffer,q,!1);r.bindFramebuffer(e.FRAMEBUFFER,null)}function _e(q,J,ge){const Pe=n.get(q);J!==void 0&&se(Pe.__webglFramebuffer,q,q.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),ge!==void 0&&be(q)}function Se(q){const J=q.texture,ge=n.get(q),Pe=n.get(J);q.addEventListener("dispose",I),q.isWebGLMultipleRenderTargets!==!0&&(Pe.__webglTexture===void 0&&(Pe.__webglTexture=e.createTexture()),Pe.__version=J.version,a.memory.textures++);const De=q.isWebGLCubeRenderTarget===!0,Ve=q.isWebGLMultipleRenderTargets===!0,et=x(q)||s;if(De){ge.__webglFramebuffer=[];for(let Ce=0;Ce<6;Ce++)if(s&&J.mipmaps&&J.mipmaps.length>0){ge.__webglFramebuffer[Ce]=[];for(let Je=0;Je<J.mipmaps.length;Je++)ge.__webglFramebuffer[Ce][Je]=e.createFramebuffer()}else ge.__webglFramebuffer[Ce]=e.createFramebuffer()}else{if(s&&J.mipmaps&&J.mipmaps.length>0){ge.__webglFramebuffer=[];for(let Ce=0;Ce<J.mipmaps.length;Ce++)ge.__webglFramebuffer[Ce]=e.createFramebuffer()}else ge.__webglFramebuffer=e.createFramebuffer();if(Ve)if(i.drawBuffers){const Ce=q.texture;for(let Je=0,ut=Ce.length;Je<ut;Je++){const pt=n.get(Ce[Je]);pt.__webglTexture===void 0&&(pt.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&q.samples>0&&rt(q)===!1){const Ce=Ve?J:[J];ge.__webglMultisampledFramebuffer=e.createFramebuffer(),ge.__webglColorRenderbuffer=[],r.bindFramebuffer(e.FRAMEBUFFER,ge.__webglMultisampledFramebuffer);for(let Je=0;Je<Ce.length;Je++){const ut=Ce[Je];ge.__webglColorRenderbuffer[Je]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,ge.__webglColorRenderbuffer[Je]);const pt=o.convert(ut.format,ut.colorSpace),Ke=o.convert(ut.type),gt=T(ut.internalFormat,pt,Ke,ut.colorSpace,q.isXRRenderTarget===!0),we=Le(q);e.renderbufferStorageMultisample(e.RENDERBUFFER,we,gt,q.width,q.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+Je,e.RENDERBUFFER,ge.__webglColorRenderbuffer[Je])}e.bindRenderbuffer(e.RENDERBUFFER,null),q.depthBuffer&&(ge.__webglDepthRenderbuffer=e.createRenderbuffer(),re(ge.__webglDepthRenderbuffer,q,!0)),r.bindFramebuffer(e.FRAMEBUFFER,null)}}if(De){r.bindTexture(e.TEXTURE_CUBE_MAP,Pe.__webglTexture),ce(e.TEXTURE_CUBE_MAP,J,et);for(let Ce=0;Ce<6;Ce++)if(s&&J.mipmaps&&J.mipmaps.length>0)for(let Je=0;Je<J.mipmaps.length;Je++)se(ge.__webglFramebuffer[Ce][Je],q,J,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Je);else se(ge.__webglFramebuffer[Ce],q,J,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0);A(J,et)&&M(e.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Ve){const Ce=q.texture;for(let Je=0,ut=Ce.length;Je<ut;Je++){const pt=Ce[Je],Ke=n.get(pt);r.bindTexture(e.TEXTURE_2D,Ke.__webglTexture),ce(e.TEXTURE_2D,pt,et),se(ge.__webglFramebuffer,q,pt,e.COLOR_ATTACHMENT0+Je,e.TEXTURE_2D,0),A(pt,et)&&M(e.TEXTURE_2D)}r.unbindTexture()}else{let Ce=e.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(s?Ce=q.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(Ce,Pe.__webglTexture),ce(Ce,J,et),s&&J.mipmaps&&J.mipmaps.length>0)for(let Je=0;Je<J.mipmaps.length;Je++)se(ge.__webglFramebuffer[Je],q,J,e.COLOR_ATTACHMENT0,Ce,Je);else se(ge.__webglFramebuffer,q,J,e.COLOR_ATTACHMENT0,Ce,0);A(J,et)&&M(Ce),r.unbindTexture()}q.depthBuffer&&be(q)}function Fe(q){const J=x(q)||s,ge=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let Pe=0,De=ge.length;Pe<De;Pe++){const Ve=ge[Pe];if(A(Ve,J)){const et=q.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,Ce=n.get(Ve).__webglTexture;r.bindTexture(et,Ce),M(et),r.unbindTexture()}}}function Re(q){if(s&&q.samples>0&&rt(q)===!1){const J=q.isWebGLMultipleRenderTargets?q.texture:[q.texture],ge=q.width,Pe=q.height;let De=e.COLOR_BUFFER_BIT;const Ve=[],et=q.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,Ce=n.get(q),Je=q.isWebGLMultipleRenderTargets===!0;if(Je)for(let ut=0;ut<J.length;ut++)r.bindFramebuffer(e.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+ut,e.RENDERBUFFER,null),r.bindFramebuffer(e.FRAMEBUFFER,Ce.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+ut,e.TEXTURE_2D,null,0);r.bindFramebuffer(e.READ_FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),r.bindFramebuffer(e.DRAW_FRAMEBUFFER,Ce.__webglFramebuffer);for(let ut=0;ut<J.length;ut++){Ve.push(e.COLOR_ATTACHMENT0+ut),q.depthBuffer&&Ve.push(et);const pt=Ce.__ignoreDepthValues!==void 0?Ce.__ignoreDepthValues:!1;if(pt===!1&&(q.depthBuffer&&(De|=e.DEPTH_BUFFER_BIT),q.stencilBuffer&&(De|=e.STENCIL_BUFFER_BIT)),Je&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,Ce.__webglColorRenderbuffer[ut]),pt===!0&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[et]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[et])),Je){const Ke=n.get(J[ut]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,Ke,0)}e.blitFramebuffer(0,0,ge,Pe,0,0,ge,Pe,De,e.NEAREST),f&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,Ve)}if(r.bindFramebuffer(e.READ_FRAMEBUFFER,null),r.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),Je)for(let ut=0;ut<J.length;ut++){r.bindFramebuffer(e.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+ut,e.RENDERBUFFER,Ce.__webglColorRenderbuffer[ut]);const pt=n.get(J[ut]).__webglTexture;r.bindFramebuffer(e.FRAMEBUFFER,Ce.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+ut,e.TEXTURE_2D,pt,0)}r.bindFramebuffer(e.DRAW_FRAMEBUFFER,Ce.__webglMultisampledFramebuffer)}}function Le(q){return Math.min(c,q.samples)}function rt(q){const J=n.get(q);return s&&q.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function st(q){const J=a.render.frame;g.get(q)!==J&&(g.set(q,J),q.update())}function he(q,J){const ge=q.colorSpace,Pe=q.format,De=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||q.format===yD||ge!==ed&&ge!==Xs&&(pn.getTransfer(ge)===En?s===!1?t.has("EXT_sRGB")===!0&&Pe===Ia?(q.format=yD,q.minFilter=Qn,q.generateMipmaps=!1):J=j4.sRGBToLinear(J):(Pe!==Ia||De!==qc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ge)),J}this.allocateTextureUnit=z,this.resetTextureUnits=G,this.setTexture2D=j,this.setTexture2DArray=H,this.setTexture3D=Y,this.setTextureCube=Q,this.rebindTextures=_e,this.setupRenderTarget=Se,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=Re,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=se,this.useMultisampledRTT=rt}function Nte(e,t,r){const n=r.isWebGL2;function i(o,a=Xs){let s;const l=pn.getTransfer(a);if(o===qc)return e.UNSIGNED_BYTE;if(o===O4)return e.UNSIGNED_SHORT_4_4_4_4;if(o===R4)return e.UNSIGNED_SHORT_5_5_5_1;if(o===tte)return e.BYTE;if(o===rte)return e.SHORT;if(o===gR)return e.UNSIGNED_SHORT;if(o===D4)return e.INT;if(o===uh)return e.UNSIGNED_INT;if(o===Pu)return e.FLOAT;if(o===xx)return n?e.HALF_FLOAT:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===nte)return e.ALPHA;if(o===Ia)return e.RGBA;if(o===ite)return e.LUMINANCE;if(o===ote)return e.LUMINANCE_ALPHA;if(o===Ap)return e.DEPTH_COMPONENT;if(o===c0)return e.DEPTH_STENCIL;if(o===yD)return s=t.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(o===ate)return e.RED;if(o===I4)return e.RED_INTEGER;if(o===ste)return e.RG;if(o===L4)return e.RG_INTEGER;if(o===B4)return e.RGBA_INTEGER;if(o===h2||o===f2||o===p2||o===m2)if(l===En)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(o===h2)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===f2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===p2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===m2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===h2)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===f2)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===p2)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===m2)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===gF||o===vF||o===yF||o===bF)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===gF)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===vF)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===yF)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===bF)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===N4)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===xF||o===wF)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(o===xF)return l===En?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(o===wF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===_F||o===SF||o===AF||o===MF||o===CF||o===TF||o===EF||o===PF||o===DF||o===OF||o===RF||o===IF||o===LF||o===BF)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(o===_F)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===SF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===AF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===MF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===CF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===TF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===EF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===PF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===DF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===OF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===RF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===IF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===LF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===BF)return l===En?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===g2||o===NF||o===kF)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(o===g2)return l===En?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===NF)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===kF)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===lte||o===FF||o===zF||o===UF)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(o===g2)return s.COMPRESSED_RED_RGTC1_EXT;if(o===FF)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===zF)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===UF)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Sp?n?e.UNSIGNED_INT_24_8:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):e[o]!==void 0?e[o]:null}return{convert:i}}class kte extends kn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class ch extends Qr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jwe={type:"move"};class sL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ch,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ch,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ch,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const r=this._hand;if(r)for(const n of t.hand.values())this._getHandJoint(r,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,r,n){let i=null,o=null,a=null;const s=this._targetRay,l=this._grip,u=this._hand;if(t&&r.session.visibilityState!=="visible-blurred"){if(u&&t.hand){a=!0;for(const y of t.hand.values()){const m=r.getJointPose(y,n),p=this._getHandJoint(u,y);m!==null&&(p.matrix.fromArray(m.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=m.radius),p.visible=m!==null}const d=u.joints["index-finger-tip"],c=u.joints["thumb-tip"],h=d.position.distanceTo(c.position),f=.02,g=.005;u.inputState.pinching&&h>f+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&h<=f-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(o=r.getPose(t.gripSpace,n),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=r.getPose(t.targetRaySpace,n),i===null&&o!==null&&(i=o),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(jwe)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(t,r){if(t.joints[r.jointName]===void 0){const n=new ch;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[r.jointName]=n,t.add(n)}return t.joints[r.jointName]}}class Hwe extends ud{constructor(t,r){super();const n=this;let i=null,o=1,a=null,s="local-floor",l=1,u=null,d=null,c=null,h=null,f=null,g=null;const y=r.getContextAttributes();let m=null,p=null;const v=[],b=[],x=new lt;let _=null;const A=new kn;A.layers.enable(1),A.viewport=new mn;const M=new kn;M.layers.enable(2),M.viewport=new mn;const T=[A,M],C=new kte;C.layers.enable(1),C.layers.enable(2);let E=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let $=v[Q];return $===void 0&&($=new sL,v[Q]=$),$.getTargetRaySpace()},this.getControllerGrip=function(Q){let $=v[Q];return $===void 0&&($=new sL,v[Q]=$),$.getGripSpace()},this.getHand=function(Q){let $=v[Q];return $===void 0&&($=new sL,v[Q]=$),$.getHandSpace()};function I(Q){const $=b.indexOf(Q.inputSource);if($===-1)return;const ne=v[$];ne!==void 0&&(ne.update(Q.inputSource,Q.frame,u||a),ne.dispatchEvent({type:Q.type,data:Q.inputSource}))}function k(){i.removeEventListener("select",I),i.removeEventListener("selectstart",I),i.removeEventListener("selectend",I),i.removeEventListener("squeeze",I),i.removeEventListener("squeezestart",I),i.removeEventListener("squeezeend",I),i.removeEventListener("end",k),i.removeEventListener("inputsourceschange",L);for(let Q=0;Q<v.length;Q++){const $=b[Q];$!==null&&(b[Q]=null,v[Q].disconnect($))}E=null,D=null,t.setRenderTarget(m),f=null,h=null,c=null,i=null,p=null,Y.stop(),n.isPresenting=!1,t.setPixelRatio(_),t.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){o=Q,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){s=Q,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(Q){u=Q},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return c},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(Q){if(i=Q,i!==null){if(m=t.getRenderTarget(),i.addEventListener("select",I),i.addEventListener("selectstart",I),i.addEventListener("selectend",I),i.addEventListener("squeeze",I),i.addEventListener("squeezestart",I),i.addEventListener("squeezeend",I),i.addEventListener("end",k),i.addEventListener("inputsourceschange",L),y.xrCompatible!==!0&&await r.makeXRCompatible(),_=t.getPixelRatio(),t.getSize(x),i.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const $={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(i,r,$),i.updateRenderState({baseLayer:f}),t.setPixelRatio(1),t.setSize(f.framebufferWidth,f.framebufferHeight,!1),p=new Hu(f.framebufferWidth,f.framebufferHeight,{format:Ia,type:qc,colorSpace:t.outputColorSpace,stencilBuffer:y.stencil})}else{let $=null,ne=null,Z=null;y.depth&&(Z=y.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,$=y.stencil?c0:Ap,ne=y.stencil?Sp:uh);const ce={colorFormat:r.RGBA8,depthFormat:Z,scaleFactor:o};c=new XRWebGLBinding(i,r),h=c.createProjectionLayer(ce),i.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),p=new Hu(h.textureWidth,h.textureHeight,{format:Ia,type:qc,depthTexture:new K4(h.textureWidth,h.textureHeight,ne,void 0,void 0,void 0,void 0,void 0,void 0,$),stencilBuffer:y.stencil,colorSpace:t.outputColorSpace,samples:y.antialias?4:0});const ae=t.properties.get(p);ae.__ignoreDepthValues=h.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await i.requestReferenceSpace(s),Y.setContext(i),Y.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function L(Q){for(let $=0;$<Q.removed.length;$++){const ne=Q.removed[$],Z=b.indexOf(ne);Z>=0&&(b[Z]=null,v[Z].disconnect(ne))}for(let $=0;$<Q.added.length;$++){const ne=Q.added[$];let Z=b.indexOf(ne);if(Z===-1){for(let ae=0;ae<v.length;ae++)if(ae>=b.length){b.push(ne),Z=ae;break}else if(b[ae]===null){b[ae]=ne,Z=ae;break}if(Z===-1)break}const ce=v[Z];ce&&ce.connect(ne)}}const U=new pe,W=new pe;function G(Q,$,ne){U.setFromMatrixPosition($.matrixWorld),W.setFromMatrixPosition(ne.matrixWorld);const Z=U.distanceTo(W),ce=$.projectionMatrix.elements,ae=ne.projectionMatrix.elements,ie=ce[14]/(ce[10]-1),le=ce[14]/(ce[10]+1),se=(ce[9]+1)/ce[5],re=(ce[9]-1)/ce[5],ye=(ce[8]-1)/ce[0],be=(ae[8]+1)/ae[0],_e=ie*ye,Se=ie*be,Fe=Z/(-ye+be),Re=Fe*-ye;$.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(Re),Q.translateZ(Fe),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const Le=ie+Fe,rt=le+Fe,st=_e-Re,he=Se+(Z-Re),q=se*le/rt*Le,J=re*le/rt*Le;Q.projectionMatrix.makePerspective(st,he,q,J,Le,rt),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}function z(Q,$){$===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices($.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(i===null)return;C.near=M.near=A.near=Q.near,C.far=M.far=A.far=Q.far,(E!==C.near||D!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),E=C.near,D=C.far);const $=Q.parent,ne=C.cameras;z(C,$);for(let Z=0;Z<ne.length;Z++)z(ne[Z],$);ne.length===2?G(C,A,M):C.projectionMatrix.copy(A.projectionMatrix),V(Q,C,$)};function V(Q,$,ne){ne===null?Q.matrix.copy($.matrixWorld):(Q.matrix.copy(ne.matrixWorld),Q.matrix.invert(),Q.matrix.multiply($.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy($.projectionMatrix),Q.projectionMatrixInverse.copy($.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=Sx*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(Q){l=Q,h!==null&&(h.fixedFoveation=Q),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Q)};let j=null;function H(Q,$){if(d=$.getViewerPose(u||a),g=$,d!==null){const ne=d.views;f!==null&&(t.setRenderTargetFramebuffer(p,f.framebuffer),t.setRenderTarget(p));let Z=!1;ne.length!==C.cameras.length&&(C.cameras.length=0,Z=!0);for(let ce=0;ce<ne.length;ce++){const ae=ne[ce];let ie=null;if(f!==null)ie=f.getViewport(ae);else{const se=c.getViewSubImage(h,ae);ie=se.viewport,ce===0&&(t.setRenderTargetTextures(p,se.colorTexture,h.ignoreDepthValues?void 0:se.depthStencilTexture),t.setRenderTarget(p))}let le=T[ce];le===void 0&&(le=new kn,le.layers.enable(ce),le.viewport=new mn,T[ce]=le),le.matrix.fromArray(ae.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(ae.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(ie.x,ie.y,ie.width,ie.height),ce===0&&(C.matrix.copy(le.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),Z===!0&&C.cameras.push(le)}}for(let ne=0;ne<v.length;ne++){const Z=b[ne],ce=v[ne];Z!==null&&ce!==void 0&&ce.update(Z,$,u||a)}j&&j(Q,$),$.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:$}),g=null}const Y=new Dte;Y.setAnimationLoop(H),this.setAnimationLoop=function(Q){j=Q},this.dispose=function(){}}}function Gwe(e,t){function r(m,p){m.matrixAutoUpdate===!0&&m.updateMatrix(),p.value.copy(m.matrix)}function n(m,p){p.color.getRGB(m.fogColor.value,Ete(e)),p.isFog?(m.fogNear.value=p.near,m.fogFar.value=p.far):p.isFogExp2&&(m.fogDensity.value=p.density)}function i(m,p,v,b,x){p.isMeshBasicMaterial||p.isMeshLambertMaterial?o(m,p):p.isMeshToonMaterial?(o(m,p),c(m,p)):p.isMeshPhongMaterial?(o(m,p),d(m,p)):p.isMeshStandardMaterial?(o(m,p),h(m,p),p.isMeshPhysicalMaterial&&f(m,p,x)):p.isMeshMatcapMaterial?(o(m,p),g(m,p)):p.isMeshDepthMaterial?o(m,p):p.isMeshDistanceMaterial?(o(m,p),y(m,p)):p.isMeshNormalMaterial?o(m,p):p.isLineBasicMaterial?(a(m,p),p.isLineDashedMaterial&&s(m,p)):p.isPointsMaterial?l(m,p,v,b):p.isSpriteMaterial?u(m,p):p.isShadowMaterial?(m.color.value.copy(p.color),m.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function o(m,p){m.opacity.value=p.opacity,p.color&&m.diffuse.value.copy(p.color),p.emissive&&m.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(m.map.value=p.map,r(p.map,m.mapTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap,r(p.alphaMap,m.alphaMapTransform)),p.bumpMap&&(m.bumpMap.value=p.bumpMap,r(p.bumpMap,m.bumpMapTransform),m.bumpScale.value=p.bumpScale,p.side===ja&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,r(p.normalMap,m.normalMapTransform),m.normalScale.value.copy(p.normalScale),p.side===ja&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,r(p.displacementMap,m.displacementMapTransform),m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias),p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap,r(p.emissiveMap,m.emissiveMapTransform)),p.specularMap&&(m.specularMap.value=p.specularMap,r(p.specularMap,m.specularMapTransform)),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest);const v=t.get(p).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=p.reflectivity,m.ior.value=p.ior,m.refractionRatio.value=p.refractionRatio),p.lightMap){m.lightMap.value=p.lightMap;const b=e._useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=p.lightMapIntensity*b,r(p.lightMap,m.lightMapTransform)}p.aoMap&&(m.aoMap.value=p.aoMap,m.aoMapIntensity.value=p.aoMapIntensity,r(p.aoMap,m.aoMapTransform))}function a(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,p.map&&(m.map.value=p.map,r(p.map,m.mapTransform))}function s(m,p){m.dashSize.value=p.dashSize,m.totalSize.value=p.dashSize+p.gapSize,m.scale.value=p.scale}function l(m,p,v,b){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.size.value=p.size*v,m.scale.value=b*.5,p.map&&(m.map.value=p.map,r(p.map,m.uvTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap,r(p.alphaMap,m.alphaMapTransform)),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest)}function u(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.rotation.value=p.rotation,p.map&&(m.map.value=p.map,r(p.map,m.mapTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap,r(p.alphaMap,m.alphaMapTransform)),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest)}function d(m,p){m.specular.value.copy(p.specular),m.shininess.value=Math.max(p.shininess,1e-4)}function c(m,p){p.gradientMap&&(m.gradientMap.value=p.gradientMap)}function h(m,p){m.metalness.value=p.metalness,p.metalnessMap&&(m.metalnessMap.value=p.metalnessMap,r(p.metalnessMap,m.metalnessMapTransform)),m.roughness.value=p.roughness,p.roughnessMap&&(m.roughnessMap.value=p.roughnessMap,r(p.roughnessMap,m.roughnessMapTransform)),t.get(p).envMap&&(m.envMapIntensity.value=p.envMapIntensity)}function f(m,p,v){m.ior.value=p.ior,p.sheen>0&&(m.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),m.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(m.sheenColorMap.value=p.sheenColorMap,r(p.sheenColorMap,m.sheenColorMapTransform)),p.sheenRoughnessMap&&(m.sheenRoughnessMap.value=p.sheenRoughnessMap,r(p.sheenRoughnessMap,m.sheenRoughnessMapTransform))),p.clearcoat>0&&(m.clearcoat.value=p.clearcoat,m.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(m.clearcoatMap.value=p.clearcoatMap,r(p.clearcoatMap,m.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,r(p.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(m.clearcoatNormalMap.value=p.clearcoatNormalMap,r(p.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===ja&&m.clearcoatNormalScale.value.negate())),p.iridescence>0&&(m.iridescence.value=p.iridescence,m.iridescenceIOR.value=p.iridescenceIOR,m.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(m.iridescenceMap.value=p.iridescenceMap,r(p.iridescenceMap,m.iridescenceMapTransform)),p.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=p.iridescenceThicknessMap,r(p.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),p.transmission>0&&(m.transmission.value=p.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),p.transmissionMap&&(m.transmissionMap.value=p.transmissionMap,r(p.transmissionMap,m.transmissionMapTransform)),m.thickness.value=p.thickness,p.thicknessMap&&(m.thicknessMap.value=p.thicknessMap,r(p.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=p.attenuationDistance,m.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(m.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(m.anisotropyMap.value=p.anisotropyMap,r(p.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=p.specularIntensity,m.specularColor.value.copy(p.specularColor),p.specularColorMap&&(m.specularColorMap.value=p.specularColorMap,r(p.specularColorMap,m.specularColorMapTransform)),p.specularIntensityMap&&(m.specularIntensityMap.value=p.specularIntensityMap,r(p.specularIntensityMap,m.specularIntensityMapTransform))}function g(m,p){p.matcap&&(m.matcap.value=p.matcap)}function y(m,p){const v=t.get(p).light;m.referencePosition.value.setFromMatrixPosition(v.matrixWorld),m.nearDistance.value=v.shadow.camera.near,m.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Wwe(e,t,r,n){let i={},o={},a=[];const s=r.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(v,b){const x=b.program;n.uniformBlockBinding(v,x)}function u(v,b){let x=i[v.id];x===void 0&&(g(v),x=d(v),i[v.id]=x,v.addEventListener("dispose",m));const _=b.program;n.updateUBOMapping(v,_);const A=t.render.frame;o[v.id]!==A&&(h(v),o[v.id]=A)}function d(v){const b=c();v.__bindingPointIndex=b;const x=e.createBuffer(),_=v.__size,A=v.usage;return e.bindBuffer(e.UNIFORM_BUFFER,x),e.bufferData(e.UNIFORM_BUFFER,_,A),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,b,x),x}function c(){for(let v=0;v<s;v++)if(a.indexOf(v)===-1)return a.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){const b=i[v.id],x=v.uniforms,_=v.__cache;e.bindBuffer(e.UNIFORM_BUFFER,b);for(let A=0,M=x.length;A<M;A++){const T=x[A];if(f(T,A,_)===!0){const C=T.__offset,E=Array.isArray(T.value)?T.value:[T.value];let D=0;for(let I=0;I<E.length;I++){const k=E[I],L=y(k);typeof k=="number"?(T.__data[0]=k,e.bufferSubData(e.UNIFORM_BUFFER,C+D,T.__data)):k.isMatrix3?(T.__data[0]=k.elements[0],T.__data[1]=k.elements[1],T.__data[2]=k.elements[2],T.__data[3]=k.elements[0],T.__data[4]=k.elements[3],T.__data[5]=k.elements[4],T.__data[6]=k.elements[5],T.__data[7]=k.elements[0],T.__data[8]=k.elements[6],T.__data[9]=k.elements[7],T.__data[10]=k.elements[8],T.__data[11]=k.elements[0]):(k.toArray(T.__data,D),D+=L.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,C,T.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}function f(v,b,x){const _=v.value;if(x[b]===void 0){if(typeof _=="number")x[b]=_;else{const A=Array.isArray(_)?_:[_],M=[];for(let T=0;T<A.length;T++)M.push(A[T].clone());x[b]=M}return!0}else if(typeof _=="number"){if(x[b]!==_)return x[b]=_,!0}else{const A=Array.isArray(x[b])?x[b]:[x[b]],M=Array.isArray(_)?_:[_];for(let T=0;T<A.length;T++){const C=A[T];if(C.equals(M[T])===!1)return C.copy(M[T]),!0}}return!1}function g(v){const b=v.uniforms;let x=0;const _=16;let A=0;for(let M=0,T=b.length;M<T;M++){const C=b[M],E={boundary:0,storage:0},D=Array.isArray(C.value)?C.value:[C.value];for(let I=0,k=D.length;I<k;I++){const L=D[I],U=y(L);E.boundary+=U.boundary,E.storage+=U.storage}if(C.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=x,M>0){A=x%_;const I=_-A;A!==0&&I-E.boundary<0&&(x+=_-A,C.__offset=x)}x+=E.storage}return A=x%_,A>0&&(x+=_-A),v.__size=x,v.__cache={},this}function y(v){const b={boundary:0,storage:0};return typeof v=="number"?(b.boundary=4,b.storage=4):v.isVector2?(b.boundary=8,b.storage=8):v.isVector3||v.isColor?(b.boundary=16,b.storage=12):v.isVector4?(b.boundary=16,b.storage=16):v.isMatrix3?(b.boundary=48,b.storage=48):v.isMatrix4?(b.boundary=64,b.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),b}function m(v){const b=v.target;b.removeEventListener("dispose",m);const x=a.indexOf(b.__bindingPointIndex);a.splice(x,1),e.deleteBuffer(i[b.id]),delete i[b.id],delete o[b.id]}function p(){for(const v in i)e.deleteBuffer(i[v]);a=[],i={},o={}}return{bind:l,update:u,dispose:p}}class Z4{constructor(t={}){const{canvas:r=Mte(),context:n=null,depth:i=!0,stencil:o=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:c=!1}=t;this.isWebGLRenderer=!0;let h;n!==null?h=n.getContextAttributes().alpha:h=a;const f=new Uint32Array(4),g=new Int32Array(4);let y=null,m=null;const p=[],v=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ro,this._useLegacyLights=!1,this.toneMapping=Wc,this.toneMappingExposure=1;const b=this;let x=!1,_=0,A=0,M=null,T=-1,C=null;const E=new mn,D=new mn;let I=null;const k=new Dt(0);let L=0,U=r.width,W=r.height,G=1,z=null,V=null;const j=new mn(0,0,U,W),H=new mn(0,0,U,W);let Y=!1;const Q=new dM;let $=!1,ne=!1,Z=null;const ce=new pr,ae=new lt,ie=new pe,le={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return M===null?G:1}let re=n;function ye(ue,Ie){for(let Ne=0;Ne<ue.length;Ne++){const Ue=ue[Ne],Ge=r.getContext(Ue,Ie);if(Ge!==null)return Ge}return null}try{const ue={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:c};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${s1}`),r.addEventListener("webglcontextlost",Be,!1),r.addEventListener("webglcontextrestored",de,!1),r.addEventListener("webglcontextcreationerror",Ye,!1),re===null){const Ie=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Ie.shift(),re=ye(Ie,ue),re===null)throw ye(Ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&re instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}let be,_e,Se,Fe,Re,Le,rt,st,he,q,J,ge,Pe,De,Ve,et,Ce,Je,ut,pt,Ke,gt,we,Xe;function nt(){be=new a1e(re),_e=new e1e(re,be,t),be.init(_e),gt=new Nte(re,be,_e),Se=new Uwe(re,be,_e),Fe=new u1e(re),Re=new Ewe,Le=new Vwe(re,be,Se,Re,_e,gt,Fe),rt=new r1e(b),st=new o1e(b),he=new vye(re,_e),we=new Zxe(re,be,he,_e),q=new s1e(re,he,Fe,we),J=new f1e(re,q,he,Fe),ut=new h1e(re,_e,Le),et=new t1e(Re),ge=new Twe(b,rt,st,be,_e,we,et),Pe=new Gwe(b,Re),De=new Dwe,Ve=new Nwe(be,_e),Je=new Qxe(b,rt,st,Se,J,h,l),Ce=new zwe(b,J,_e),Xe=new Wwe(re,Fe,_e,Se),pt=new $xe(re,be,Fe,_e),Ke=new l1e(re,be,Fe,_e),Fe.programs=ge.programs,b.capabilities=_e,b.extensions=be,b.properties=Re,b.renderLists=De,b.shadowMap=Ce,b.state=Se,b.info=Fe}nt();const fe=new Hwe(b,re);this.xr=fe,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const ue=be.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=be.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(ue){ue!==void 0&&(G=ue,this.setSize(U,W,!1))},this.getSize=function(ue){return ue.set(U,W)},this.setSize=function(ue,Ie,Ne=!0){if(fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=ue,W=Ie,r.width=Math.floor(ue*G),r.height=Math.floor(Ie*G),Ne===!0&&(r.style.width=ue+"px",r.style.height=Ie+"px"),this.setViewport(0,0,ue,Ie)},this.getDrawingBufferSize=function(ue){return ue.set(U*G,W*G).floor()},this.setDrawingBufferSize=function(ue,Ie,Ne){U=ue,W=Ie,G=Ne,r.width=Math.floor(ue*Ne),r.height=Math.floor(Ie*Ne),this.setViewport(0,0,ue,Ie)},this.getCurrentViewport=function(ue){return ue.copy(E)},this.getViewport=function(ue){return ue.copy(j)},this.setViewport=function(ue,Ie,Ne,Ue){ue.isVector4?j.set(ue.x,ue.y,ue.z,ue.w):j.set(ue,Ie,Ne,Ue),Se.viewport(E.copy(j).multiplyScalar(G).floor())},this.getScissor=function(ue){return ue.copy(H)},this.setScissor=function(ue,Ie,Ne,Ue){ue.isVector4?H.set(ue.x,ue.y,ue.z,ue.w):H.set(ue,Ie,Ne,Ue),Se.scissor(D.copy(H).multiplyScalar(G).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(ue){Se.setScissorTest(Y=ue)},this.setOpaqueSort=function(ue){z=ue},this.setTransparentSort=function(ue){V=ue},this.getClearColor=function(ue){return ue.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(ue=!0,Ie=!0,Ne=!0){let Ue=0;if(ue){let Ge=!1;if(M!==null){const yt=M.texture.format;Ge=yt===B4||yt===L4||yt===I4}if(Ge){const yt=M.texture.type,It=yt===qc||yt===uh||yt===gR||yt===Sp||yt===O4||yt===R4,Ut=Je.getClearColor(),Ot=Je.getClearAlpha(),xt=Ut.r,qt=Ut.g,ar=Ut.b;It?(f[0]=xt,f[1]=qt,f[2]=ar,f[3]=Ot,re.clearBufferuiv(re.COLOR,0,f)):(g[0]=xt,g[1]=qt,g[2]=ar,g[3]=Ot,re.clearBufferiv(re.COLOR,0,g))}else Ue|=re.COLOR_BUFFER_BIT}Ie&&(Ue|=re.DEPTH_BUFFER_BIT),Ne&&(Ue|=re.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),re.clear(Ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Be,!1),r.removeEventListener("webglcontextrestored",de,!1),r.removeEventListener("webglcontextcreationerror",Ye,!1),De.dispose(),Ve.dispose(),Re.dispose(),rt.dispose(),st.dispose(),J.dispose(),we.dispose(),Xe.dispose(),ge.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",Lr),fe.removeEventListener("sessionend",nr),Z&&(Z.dispose(),Z=null),on.stop()};function Be(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function de(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const ue=Fe.autoReset,Ie=Ce.enabled,Ne=Ce.autoUpdate,Ue=Ce.needsUpdate,Ge=Ce.type;nt(),Fe.autoReset=ue,Ce.enabled=Ie,Ce.autoUpdate=Ne,Ce.needsUpdate=Ue,Ce.type=Ge}function Ye(ue){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ue.statusMessage)}function $e(ue){const Ie=ue.target;Ie.removeEventListener("dispose",$e),ze(Ie)}function ze(ue){ct(ue),Re.remove(ue)}function ct(ue){const Ie=Re.get(ue).programs;Ie!==void 0&&(Ie.forEach(function(Ne){ge.releaseProgram(Ne)}),ue.isShaderMaterial&&ge.releaseShaderCache(ue))}this.renderBufferDirect=function(ue,Ie,Ne,Ue,Ge,yt){Ie===null&&(Ie=le);const It=Ge.isMesh&&Ge.matrixWorld.determinant()<0,Ut=Ft(ue,Ie,Ne,Ue,Ge);Se.setMaterial(Ue,It);let Ot=Ne.index,xt=1;if(Ue.wireframe===!0){if(Ot=q.getWireframeAttribute(Ne),Ot===void 0)return;xt=2}const qt=Ne.drawRange,ar=Ne.attributes.position;let zr=qt.start*xt,an=(qt.start+qt.count)*xt;yt!==null&&(zr=Math.max(zr,yt.start*xt),an=Math.min(an,(yt.start+yt.count)*xt)),Ot!==null?(zr=Math.max(zr,0),an=Math.min(an,Ot.count)):ar!=null&&(zr=Math.max(zr,0),an=Math.min(an,ar.count));const Ur=an-zr;if(Ur<0||Ur===1/0)return;we.setup(Ge,Ue,Ut,Ne,Ot);let tn,Bt=pt;if(Ot!==null&&(tn=he.get(Ot),Bt=Ke,Bt.setIndex(tn)),Ge.isMesh)Ue.wireframe===!0?(Se.setLineWidth(Ue.wireframeLinewidth*se()),Bt.setMode(re.LINES)):Bt.setMode(re.TRIANGLES);else if(Ge.isLine){let Tt=Ue.linewidth;Tt===void 0&&(Tt=1),Se.setLineWidth(Tt*se()),Ge.isLineSegments?Bt.setMode(re.LINES):Ge.isLineLoop?Bt.setMode(re.LINE_LOOP):Bt.setMode(re.LINE_STRIP)}else Ge.isPoints?Bt.setMode(re.POINTS):Ge.isSprite&&Bt.setMode(re.TRIANGLES);if(Ge.isBatchedMesh)Bt.renderMultiDraw(Ge._multiDrawStarts,Ge._multiDrawCounts,Ge._multiDrawCount);else if(Ge.isInstancedMesh)Bt.renderInstances(zr,Ur,Ge.count);else if(Ne.isInstancedBufferGeometry){const Tt=Ne._maxInstanceCount!==void 0?Ne._maxInstanceCount:1/0,Ii=Math.min(Ne.instanceCount,Tt);Bt.renderInstances(zr,Ur,Ii)}else Bt.render(zr,Ur)};function At(ue,Ie,Ne){ue.transparent===!0&&ue.side===Ul&&ue.forceSinglePass===!1?(ue.side=ja,ue.needsUpdate=!0,it(ue,Ie,Ne),ue.side=Zc,ue.needsUpdate=!0,it(ue,Ie,Ne),ue.side=Ul):it(ue,Ie,Ne)}this.compile=function(ue,Ie,Ne=null){Ne===null&&(Ne=ue),m=Ve.get(Ne),m.init(),v.push(m),Ne.traverseVisible(function(Ge){Ge.isLight&&Ge.layers.test(Ie.layers)&&(m.pushLight(Ge),Ge.castShadow&&m.pushShadow(Ge))}),ue!==Ne&&ue.traverseVisible(function(Ge){Ge.isLight&&Ge.layers.test(Ie.layers)&&(m.pushLight(Ge),Ge.castShadow&&m.pushShadow(Ge))}),m.setupLights(b._useLegacyLights);const Ue=new Set;return ue.traverse(function(Ge){const yt=Ge.material;if(yt)if(Array.isArray(yt))for(let It=0;It<yt.length;It++){const Ut=yt[It];At(Ut,Ne,Ge),Ue.add(Ut)}else At(yt,Ne,Ge),Ue.add(yt)}),v.pop(),m=null,Ue},this.compileAsync=function(ue,Ie,Ne=null){const Ue=this.compile(ue,Ie,Ne);return new Promise(Ge=>{function yt(){if(Ue.forEach(function(It){Re.get(It).currentProgram.isReady()&&Ue.delete(It)}),Ue.size===0){Ge(ue);return}setTimeout(yt,10)}be.get("KHR_parallel_shader_compile")!==null?yt():setTimeout(yt,10)})};let rr=null;function Gt(ue){rr&&rr(ue)}function Lr(){on.stop()}function nr(){on.start()}const on=new Dte;on.setAnimationLoop(Gt),typeof self<"u"&&on.setContext(self),this.setAnimationLoop=function(ue){rr=ue,fe.setAnimationLoop(ue),ue===null?on.stop():on.start()},fe.addEventListener("sessionstart",Lr),fe.addEventListener("sessionend",nr),this.render=function(ue,Ie){if(Ie!==void 0&&Ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Ie.parent===null&&Ie.matrixWorldAutoUpdate===!0&&Ie.updateMatrixWorld(),fe.enabled===!0&&fe.isPresenting===!0&&(fe.cameraAutoUpdate===!0&&fe.updateCamera(Ie),Ie=fe.getCamera()),ue.isScene===!0&&ue.onBeforeRender(b,ue,Ie,M),m=Ve.get(ue,v.length),m.init(),v.push(m),ce.multiplyMatrices(Ie.projectionMatrix,Ie.matrixWorldInverse),Q.setFromProjectionMatrix(ce),ne=this.localClippingEnabled,$=et.init(this.clippingPlanes,ne),y=De.get(ue,p.length),y.init(),p.push(y),bi(ue,Ie,0,b.sortObjects),y.finish(),b.sortObjects===!0&&y.sort(z,V),this.info.render.frame++,$===!0&&et.beginShadows();const Ne=m.state.shadowsArray;if(Ce.render(Ne,ue,Ie),$===!0&&et.endShadows(),this.info.autoReset===!0&&this.info.reset(),Je.render(y,ue),m.setupLights(b._useLegacyLights),Ie.isArrayCamera){const Ue=Ie.cameras;for(let Ge=0,yt=Ue.length;Ge<yt;Ge++){const It=Ue[Ge];dl(y,ue,It,It.viewport)}}else dl(y,ue,Ie);M!==null&&(Le.updateMultisampleRenderTarget(M),Le.updateRenderTargetMipmap(M)),ue.isScene===!0&&ue.onAfterRender(b,ue,Ie),we.resetDefaultState(),T=-1,C=null,v.pop(),v.length>0?m=v[v.length-1]:m=null,p.pop(),p.length>0?y=p[p.length-1]:y=null};function bi(ue,Ie,Ne,Ue){if(ue.visible===!1)return;if(ue.layers.test(Ie.layers)){if(ue.isGroup)Ne=ue.renderOrder;else if(ue.isLOD)ue.autoUpdate===!0&&ue.update(Ie);else if(ue.isLight)m.pushLight(ue),ue.castShadow&&m.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||Q.intersectsSprite(ue)){Ue&&ie.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(ce);const It=J.update(ue),Ut=ue.material;Ut.visible&&y.push(ue,It,Ut,Ne,ie.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(!ue.frustumCulled||Q.intersectsObject(ue))){const It=J.update(ue),Ut=ue.material;if(Ue&&(ue.boundingSphere!==void 0?(ue.boundingSphere===null&&ue.computeBoundingSphere(),ie.copy(ue.boundingSphere.center)):(It.boundingSphere===null&&It.computeBoundingSphere(),ie.copy(It.boundingSphere.center)),ie.applyMatrix4(ue.matrixWorld).applyMatrix4(ce)),Array.isArray(Ut)){const Ot=It.groups;for(let xt=0,qt=Ot.length;xt<qt;xt++){const ar=Ot[xt],zr=Ut[ar.materialIndex];zr&&zr.visible&&y.push(ue,It,zr,Ne,ie.z,ar)}}else Ut.visible&&y.push(ue,It,Ut,Ne,ie.z,null)}}const yt=ue.children;for(let It=0,Ut=yt.length;It<Ut;It++)bi(yt[It],Ie,Ne,Ue)}function dl(ue,Ie,Ne,Ue){const Ge=ue.opaque,yt=ue.transmissive,It=ue.transparent;m.setupLightsView(Ne),$===!0&&et.setGlobalState(b.clippingPlanes,Ne),yt.length>0&&Ka(Ge,yt,Ie,Ne),Ue&&Se.viewport(E.copy(Ue)),Ge.length>0&&me(Ge,Ie,Ne),yt.length>0&&me(yt,Ie,Ne),It.length>0&&me(It,Ie,Ne),Se.buffers.depth.setTest(!0),Se.buffers.depth.setMask(!0),Se.buffers.color.setMask(!0),Se.setPolygonOffset(!1)}function Ka(ue,Ie,Ne,Ue){if((Ne.isScene===!0?Ne.overrideMaterial:null)!==null)return;const yt=_e.isWebGL2;Z===null&&(Z=new Hu(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")?xx:qc,minFilter:$c,samples:yt?4:0})),b.getDrawingBufferSize(ae),yt?Z.setSize(ae.x,ae.y):Z.setSize(bD(ae.x),bD(ae.y));const It=b.getRenderTarget();b.setRenderTarget(Z),b.getClearColor(k),L=b.getClearAlpha(),L<1&&b.setClearColor(16777215,.5),b.clear();const Ut=b.toneMapping;b.toneMapping=Wc,me(ue,Ne,Ue),Le.updateMultisampleRenderTarget(Z),Le.updateRenderTargetMipmap(Z);let Ot=!1;for(let xt=0,qt=Ie.length;xt<qt;xt++){const ar=Ie[xt],zr=ar.object,an=ar.geometry,Ur=ar.material,tn=ar.group;if(Ur.side===Ul&&zr.layers.test(Ue.layers)){const Bt=Ur.side;Ur.side=ja,Ur.needsUpdate=!0,qe(zr,Ne,Ue,an,Ur,tn),Ur.side=Bt,Ur.needsUpdate=!0,Ot=!0}}Ot===!0&&(Le.updateMultisampleRenderTarget(Z),Le.updateRenderTargetMipmap(Z)),b.setRenderTarget(It),b.setClearColor(k,L),b.toneMapping=Ut}function me(ue,Ie,Ne){const Ue=Ie.isScene===!0?Ie.overrideMaterial:null;for(let Ge=0,yt=ue.length;Ge<yt;Ge++){const It=ue[Ge],Ut=It.object,Ot=It.geometry,xt=Ue===null?It.material:Ue,qt=It.group;Ut.layers.test(Ne.layers)&&qe(Ut,Ie,Ne,Ot,xt,qt)}}function qe(ue,Ie,Ne,Ue,Ge,yt){ue.onBeforeRender(b,Ie,Ne,Ue,Ge,yt),ue.modelViewMatrix.multiplyMatrices(Ne.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),Ge.onBeforeRender(b,Ie,Ne,Ue,ue,yt),Ge.transparent===!0&&Ge.side===Ul&&Ge.forceSinglePass===!1?(Ge.side=ja,Ge.needsUpdate=!0,b.renderBufferDirect(Ne,Ie,Ue,Ge,ue,yt),Ge.side=Zc,Ge.needsUpdate=!0,b.renderBufferDirect(Ne,Ie,Ue,Ge,ue,yt),Ge.side=Ul):b.renderBufferDirect(Ne,Ie,Ue,Ge,ue,yt),ue.onAfterRender(b,Ie,Ne,Ue,Ge,yt)}function it(ue,Ie,Ne){Ie.isScene!==!0&&(Ie=le);const Ue=Re.get(ue),Ge=m.state.lights,yt=m.state.shadowsArray,It=Ge.state.version,Ut=ge.getParameters(ue,Ge.state,yt,Ie,Ne),Ot=ge.getProgramCacheKey(Ut);let xt=Ue.programs;Ue.environment=ue.isMeshStandardMaterial?Ie.environment:null,Ue.fog=Ie.fog,Ue.envMap=(ue.isMeshStandardMaterial?st:rt).get(ue.envMap||Ue.environment),xt===void 0&&(ue.addEventListener("dispose",$e),xt=new Map,Ue.programs=xt);let qt=xt.get(Ot);if(qt!==void 0){if(Ue.currentProgram===qt&&Ue.lightsStateVersion===It)return at(ue,Ut),qt}else Ut.uniforms=ge.getUniforms(ue),ue.onBuild(Ne,Ut,b),ue.onBeforeCompile(Ut,b),qt=ge.acquireProgram(Ut,Ot),xt.set(Ot,qt),Ue.uniforms=Ut.uniforms;const ar=Ue.uniforms;return(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||ue.clipping===!0)&&(ar.clippingPlanes=et.uniform),at(ue,Ut),Ue.needsLights=er(ue),Ue.lightsStateVersion=It,Ue.needsLights&&(ar.ambientLightColor.value=Ge.state.ambient,ar.lightProbe.value=Ge.state.probe,ar.directionalLights.value=Ge.state.directional,ar.directionalLightShadows.value=Ge.state.directionalShadow,ar.spotLights.value=Ge.state.spot,ar.spotLightShadows.value=Ge.state.spotShadow,ar.rectAreaLights.value=Ge.state.rectArea,ar.ltc_1.value=Ge.state.rectAreaLTC1,ar.ltc_2.value=Ge.state.rectAreaLTC2,ar.pointLights.value=Ge.state.point,ar.pointLightShadows.value=Ge.state.pointShadow,ar.hemisphereLights.value=Ge.state.hemi,ar.directionalShadowMap.value=Ge.state.directionalShadowMap,ar.directionalShadowMatrix.value=Ge.state.directionalShadowMatrix,ar.spotShadowMap.value=Ge.state.spotShadowMap,ar.spotLightMatrix.value=Ge.state.spotLightMatrix,ar.spotLightMap.value=Ge.state.spotLightMap,ar.pointShadowMap.value=Ge.state.pointShadowMap,ar.pointShadowMatrix.value=Ge.state.pointShadowMatrix),Ue.currentProgram=qt,Ue.uniformsList=null,qt}function je(ue){if(ue.uniformsList===null){const Ie=ue.currentProgram.getUniforms();ue.uniformsList=y2.seqWithValue(Ie.seq,ue.uniforms)}return ue.uniformsList}function at(ue,Ie){const Ne=Re.get(ue);Ne.outputColorSpace=Ie.outputColorSpace,Ne.batching=Ie.batching,Ne.instancing=Ie.instancing,Ne.instancingColor=Ie.instancingColor,Ne.skinning=Ie.skinning,Ne.morphTargets=Ie.morphTargets,Ne.morphNormals=Ie.morphNormals,Ne.morphColors=Ie.morphColors,Ne.morphTargetsCount=Ie.morphTargetsCount,Ne.numClippingPlanes=Ie.numClippingPlanes,Ne.numIntersection=Ie.numClipIntersection,Ne.vertexAlphas=Ie.vertexAlphas,Ne.vertexTangents=Ie.vertexTangents,Ne.toneMapping=Ie.toneMapping}function Ft(ue,Ie,Ne,Ue,Ge){Ie.isScene!==!0&&(Ie=le),Le.resetTextureUnits();const yt=Ie.fog,It=Ue.isMeshStandardMaterial?Ie.environment:null,Ut=M===null?b.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:ed,Ot=(Ue.isMeshStandardMaterial?st:rt).get(Ue.envMap||It),xt=Ue.vertexColors===!0&&!!Ne.attributes.color&&Ne.attributes.color.itemSize===4,qt=!!Ne.attributes.tangent&&(!!Ue.normalMap||Ue.anisotropy>0),ar=!!Ne.morphAttributes.position,zr=!!Ne.morphAttributes.normal,an=!!Ne.morphAttributes.color;let Ur=Wc;Ue.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Ur=b.toneMapping);const tn=Ne.morphAttributes.position||Ne.morphAttributes.normal||Ne.morphAttributes.color,Bt=tn!==void 0?tn.length:0,Tt=Re.get(Ue),Ii=m.state.lights;if($===!0&&(ne===!0||ue!==C)){const ii=ue===C&&Ue.id===T;et.setState(Ue,ue,ii)}let Xt=!1;Ue.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==Ii.state.version||Tt.outputColorSpace!==Ut||Ge.isBatchedMesh&&Tt.batching===!1||!Ge.isBatchedMesh&&Tt.batching===!0||Ge.isInstancedMesh&&Tt.instancing===!1||!Ge.isInstancedMesh&&Tt.instancing===!0||Ge.isSkinnedMesh&&Tt.skinning===!1||!Ge.isSkinnedMesh&&Tt.skinning===!0||Ge.isInstancedMesh&&Tt.instancingColor===!0&&Ge.instanceColor===null||Ge.isInstancedMesh&&Tt.instancingColor===!1&&Ge.instanceColor!==null||Tt.envMap!==Ot||Ue.fog===!0&&Tt.fog!==yt||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==et.numPlanes||Tt.numIntersection!==et.numIntersection)||Tt.vertexAlphas!==xt||Tt.vertexTangents!==qt||Tt.morphTargets!==ar||Tt.morphNormals!==zr||Tt.morphColors!==an||Tt.toneMapping!==Ur||_e.isWebGL2===!0&&Tt.morphTargetsCount!==Bt)&&(Xt=!0):(Xt=!0,Tt.__version=Ue.version);let mr=Tt.currentProgram;Xt===!0&&(mr=it(Ue,Ie,Ge));let Vr=!1,kr=!1,cn=!1;const sn=mr.getUniforms(),Xi=Tt.uniforms;if(Se.useProgram(mr.program)&&(Vr=!0,kr=!0,cn=!0),Ue.id!==T&&(T=Ue.id,kr=!0),Vr||C!==ue){sn.setValue(re,"projectionMatrix",ue.projectionMatrix),sn.setValue(re,"viewMatrix",ue.matrixWorldInverse);const ii=sn.map.cameraPosition;ii!==void 0&&ii.setValue(re,ie.setFromMatrixPosition(ue.matrixWorld)),_e.logarithmicDepthBuffer&&sn.setValue(re,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial)&&sn.setValue(re,"isOrthographic",ue.isOrthographicCamera===!0),C!==ue&&(C=ue,kr=!0,cn=!0)}if(Ge.isSkinnedMesh){sn.setOptional(re,Ge,"bindMatrix"),sn.setOptional(re,Ge,"bindMatrixInverse");const ii=Ge.skeleton;ii&&(_e.floatVertexTextures?(ii.boneTexture===null&&ii.computeBoneTexture(),sn.setValue(re,"boneTexture",ii.boneTexture,Le)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Ge.isBatchedMesh&&(sn.setOptional(re,Ge,"batchingTexture"),sn.setValue(re,"batchingTexture",Ge._matricesTexture,Le));const hl=Ne.morphAttributes;if((hl.position!==void 0||hl.normal!==void 0||hl.color!==void 0&&_e.isWebGL2===!0)&&ut.update(Ge,Ne,mr),(kr||Tt.receiveShadow!==Ge.receiveShadow)&&(Tt.receiveShadow=Ge.receiveShadow,sn.setValue(re,"receiveShadow",Ge.receiveShadow)),Ue.isMeshGouraudMaterial&&Ue.envMap!==null&&(Xi.envMap.value=Ot,Xi.flipEnvMap.value=Ot.isCubeTexture&&Ot.isRenderTargetTexture===!1?-1:1),kr&&(sn.setValue(re,"toneMappingExposure",b.toneMappingExposure),Tt.needsLights&&ur(Xi,cn),yt&&Ue.fog===!0&&Pe.refreshFogUniforms(Xi,yt),Pe.refreshMaterialUniforms(Xi,Ue,G,W,Z),y2.upload(re,je(Tt),Xi,Le)),Ue.isShaderMaterial&&Ue.uniformsNeedUpdate===!0&&(y2.upload(re,je(Tt),Xi,Le),Ue.uniformsNeedUpdate=!1),Ue.isSpriteMaterial&&sn.setValue(re,"center",Ge.center),sn.setValue(re,"modelViewMatrix",Ge.modelViewMatrix),sn.setValue(re,"normalMatrix",Ge.normalMatrix),sn.setValue(re,"modelMatrix",Ge.matrixWorld),Ue.isShaderMaterial||Ue.isRawShaderMaterial){const ii=Ue.uniformsGroups;for(let Gh=0,Oo=ii.length;Gh<Oo;Gh++)if(_e.isWebGL2){const Wh=ii[Gh];Xe.update(Wh,mr),Xe.bind(Wh,mr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return mr}function ur(ue,Ie){ue.ambientLightColor.needsUpdate=Ie,ue.lightProbe.needsUpdate=Ie,ue.directionalLights.needsUpdate=Ie,ue.directionalLightShadows.needsUpdate=Ie,ue.pointLights.needsUpdate=Ie,ue.pointLightShadows.needsUpdate=Ie,ue.spotLights.needsUpdate=Ie,ue.spotLightShadows.needsUpdate=Ie,ue.rectAreaLights.needsUpdate=Ie,ue.hemisphereLights.needsUpdate=Ie}function er(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&ue.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ue,Ie,Ne){Re.get(ue.texture).__webglTexture=Ie,Re.get(ue.depthTexture).__webglTexture=Ne;const Ue=Re.get(ue);Ue.__hasExternalTextures=!0,Ue.__hasExternalTextures&&(Ue.__autoAllocateDepthBuffer=Ne===void 0,Ue.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ue.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ue,Ie){const Ne=Re.get(ue);Ne.__webglFramebuffer=Ie,Ne.__useDefaultFramebuffer=Ie===void 0},this.setRenderTarget=function(ue,Ie=0,Ne=0){M=ue,_=Ie,A=Ne;let Ue=!0,Ge=null,yt=!1,It=!1;if(ue){const Ot=Re.get(ue);Ot.__useDefaultFramebuffer!==void 0?(Se.bindFramebuffer(re.FRAMEBUFFER,null),Ue=!1):Ot.__webglFramebuffer===void 0?Le.setupRenderTarget(ue):Ot.__hasExternalTextures&&Le.rebindTextures(ue,Re.get(ue.texture).__webglTexture,Re.get(ue.depthTexture).__webglTexture);const xt=ue.texture;(xt.isData3DTexture||xt.isDataArrayTexture||xt.isCompressedArrayTexture)&&(It=!0);const qt=Re.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Array.isArray(qt[Ie])?Ge=qt[Ie][Ne]:Ge=qt[Ie],yt=!0):_e.isWebGL2&&ue.samples>0&&Le.useMultisampledRTT(ue)===!1?Ge=Re.get(ue).__webglMultisampledFramebuffer:Array.isArray(qt)?Ge=qt[Ne]:Ge=qt,E.copy(ue.viewport),D.copy(ue.scissor),I=ue.scissorTest}else E.copy(j).multiplyScalar(G).floor(),D.copy(H).multiplyScalar(G).floor(),I=Y;if(Se.bindFramebuffer(re.FRAMEBUFFER,Ge)&&_e.drawBuffers&&Ue&&Se.drawBuffers(ue,Ge),Se.viewport(E),Se.scissor(D),Se.setScissorTest(I),yt){const Ot=Re.get(ue.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ot.__webglTexture,Ne)}else if(It){const Ot=Re.get(ue.texture),xt=Ie||0;re.framebufferTextureLayer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,Ot.__webglTexture,Ne||0,xt)}T=-1},this.readRenderTargetPixels=function(ue,Ie,Ne,Ue,Ge,yt,It){if(!(ue&&ue.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ut=Re.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&It!==void 0&&(Ut=Ut[It]),Ut){Se.bindFramebuffer(re.FRAMEBUFFER,Ut);try{const Ot=ue.texture,xt=Ot.format,qt=Ot.type;if(xt!==Ia&&gt.convert(xt)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ar=qt===xx&&(be.has("EXT_color_buffer_half_float")||_e.isWebGL2&&be.has("EXT_color_buffer_float"));if(qt!==qc&&gt.convert(qt)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_TYPE)&&!(qt===Pu&&(_e.isWebGL2||be.has("OES_texture_float")||be.has("WEBGL_color_buffer_float")))&&!ar){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ie>=0&&Ie<=ue.width-Ue&&Ne>=0&&Ne<=ue.height-Ge&&re.readPixels(Ie,Ne,Ue,Ge,gt.convert(xt),gt.convert(qt),yt)}finally{const Ot=M!==null?Re.get(M).__webglFramebuffer:null;Se.bindFramebuffer(re.FRAMEBUFFER,Ot)}}},this.copyFramebufferToTexture=function(ue,Ie,Ne=0){const Ue=Math.pow(2,-Ne),Ge=Math.floor(Ie.image.width*Ue),yt=Math.floor(Ie.image.height*Ue);Le.setTexture2D(Ie,0),re.copyTexSubImage2D(re.TEXTURE_2D,Ne,0,0,ue.x,ue.y,Ge,yt),Se.unbindTexture()},this.copyTextureToTexture=function(ue,Ie,Ne,Ue=0){const Ge=Ie.image.width,yt=Ie.image.height,It=gt.convert(Ne.format),Ut=gt.convert(Ne.type);Le.setTexture2D(Ne,0),re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,Ne.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ne.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,Ne.unpackAlignment),Ie.isDataTexture?re.texSubImage2D(re.TEXTURE_2D,Ue,ue.x,ue.y,Ge,yt,It,Ut,Ie.image.data):Ie.isCompressedTexture?re.compressedTexSubImage2D(re.TEXTURE_2D,Ue,ue.x,ue.y,Ie.mipmaps[0].width,Ie.mipmaps[0].height,It,Ie.mipmaps[0].data):re.texSubImage2D(re.TEXTURE_2D,Ue,ue.x,ue.y,It,Ut,Ie.image),Ue===0&&Ne.generateMipmaps&&re.generateMipmap(re.TEXTURE_2D),Se.unbindTexture()},this.copyTextureToTexture3D=function(ue,Ie,Ne,Ue,Ge=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const yt=ue.max.x-ue.min.x+1,It=ue.max.y-ue.min.y+1,Ut=ue.max.z-ue.min.z+1,Ot=gt.convert(Ue.format),xt=gt.convert(Ue.type);let qt;if(Ue.isData3DTexture)Le.setTexture3D(Ue,0),qt=re.TEXTURE_3D;else if(Ue.isDataArrayTexture)Le.setTexture2DArray(Ue,0),qt=re.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,Ue.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,Ue.unpackAlignment);const ar=re.getParameter(re.UNPACK_ROW_LENGTH),zr=re.getParameter(re.UNPACK_IMAGE_HEIGHT),an=re.getParameter(re.UNPACK_SKIP_PIXELS),Ur=re.getParameter(re.UNPACK_SKIP_ROWS),tn=re.getParameter(re.UNPACK_SKIP_IMAGES),Bt=Ne.isCompressedTexture?Ne.mipmaps[0]:Ne.image;re.pixelStorei(re.UNPACK_ROW_LENGTH,Bt.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Bt.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,ue.min.x),re.pixelStorei(re.UNPACK_SKIP_ROWS,ue.min.y),re.pixelStorei(re.UNPACK_SKIP_IMAGES,ue.min.z),Ne.isDataTexture||Ne.isData3DTexture?re.texSubImage3D(qt,Ge,Ie.x,Ie.y,Ie.z,yt,It,Ut,Ot,xt,Bt.data):Ne.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(qt,Ge,Ie.x,Ie.y,Ie.z,yt,It,Ut,Ot,Bt.data)):re.texSubImage3D(qt,Ge,Ie.x,Ie.y,Ie.z,yt,It,Ut,Ot,xt,Bt),re.pixelStorei(re.UNPACK_ROW_LENGTH,ar),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,zr),re.pixelStorei(re.UNPACK_SKIP_PIXELS,an),re.pixelStorei(re.UNPACK_SKIP_ROWS,Ur),re.pixelStorei(re.UNPACK_SKIP_IMAGES,tn),Ge===0&&Ue.generateMipmaps&&re.generateMipmap(qt),Se.unbindTexture()},this.initTexture=function(ue){ue.isCubeTexture?Le.setTextureCube(ue,0):ue.isData3DTexture?Le.setTexture3D(ue,0):ue.isDataArrayTexture||ue.isCompressedArrayTexture?Le.setTexture2DArray(ue,0):Le.setTexture2D(ue,0),Se.unbindTexture()},this.resetState=function(){_=0,A=0,M=null,Se.reset(),we.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Du}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const r=this.getContext();r.drawingBufferColorSpace=t===yR?"display-p3":"srgb",r.unpackColorSpace=pn.workingColorSpace===sM?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ro?Mp:z4}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===Mp?ro:ed}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class Fte extends Z4{}Fte.prototype.isWebGL1Renderer=!0;class wR{constructor(t,r=25e-5){this.isFogExp2=!0,this.name="",this.color=new Dt(t),this.density=r}clone(){return new wR(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class _R{constructor(t,r=1,n=1e3){this.isFog=!0,this.name="",this.color=new Dt(t),this.near=r,this.far=n}clone(){return new _R(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class xD extends Qr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r}}class fM{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=t!==void 0?t.length/r:0,this.usage=vA,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=rl()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return console.warn('THREE.InterleavedBuffer: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,n){t*=this.stride,n*=r.stride;for(let i=0,o=this.stride;i<o;i++)this.array[t+i]=r.array[n+i];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=rl()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(r,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=rl()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wa=new pe;class zp{constructor(t,r,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,n=this.data.count;r<n;r++)wa.fromBufferAttribute(this,r),wa.applyMatrix4(t),this.setXYZ(r,wa.x,wa.y,wa.z);return this}applyNormalMatrix(t){for(let r=0,n=this.count;r<n;r++)wa.fromBufferAttribute(this,r),wa.applyNormalMatrix(t),this.setXYZ(r,wa.x,wa.y,wa.z);return this}transformDirection(t){for(let r=0,n=this.count;r<n;r++)wa.fromBufferAttribute(this,r),wa.transformDirection(t),this.setXYZ(r,wa.x,wa.y,wa.z);return this}setX(t,r){return this.normalized&&(r=Ir(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=Ir(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=Ir(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=Ir(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=fs(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=fs(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=fs(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=fs(r,this.array)),r}setXY(t,r,n){return t=t*this.data.stride+this.offset,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=n,this}setXYZ(t,r,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array),i=Ir(i,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,r,n,i,o){return t=t*this.data.stride+this.offset,this.normalized&&(r=Ir(r,this.array),n=Ir(n,this.array),i=Ir(i,this.array),o=Ir(o,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)r.push(this.data.array[i+o])}return new Zr(new this.array.constructor(r),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new zp(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)r.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class $4 extends Hi{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let oy;const Qw=new pe,ay=new pe,sy=new pe,ly=new lt,Zw=new lt,zte=new pr,YT=new pe,$w=new pe,KT=new pe,OW=new lt,lL=new lt,RW=new lt;class Ute extends Qr{constructor(t=new $4){if(super(),this.isSprite=!0,this.type="Sprite",oy===void 0){oy=new Er;const r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new fM(r,5);oy.setIndex([0,1,2,0,2,3]),oy.setAttribute("position",new zp(n,3,0,!1)),oy.setAttribute("uv",new zp(n,2,3,!1))}this.geometry=oy,this.material=t,this.center=new lt(.5,.5)}raycast(t,r){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ay.setFromMatrixScale(this.matrixWorld),zte.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),sy.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ay.multiplyScalar(-sy.z);const n=this.material.rotation;let i,o;n!==0&&(o=Math.cos(n),i=Math.sin(n));const a=this.center;JT(YT.set(-.5,-.5,0),sy,a,ay,i,o),JT($w.set(.5,-.5,0),sy,a,ay,i,o),JT(KT.set(.5,.5,0),sy,a,ay,i,o),OW.set(0,0),lL.set(1,0),RW.set(1,1);let s=t.ray.intersectTriangle(YT,$w,KT,!1,Qw);if(s===null&&(JT($w.set(-.5,.5,0),sy,a,ay,i,o),lL.set(0,1),s=t.ray.intersectTriangle(YT,KT,$w,!1,Qw),s===null))return;const l=t.ray.origin.distanceTo(Qw);l<t.near||l>t.far||r.push({distance:l,point:Qw.clone(),uv:cs.getInterpolation(Qw,YT,$w,KT,OW,lL,RW,new lt),face:null,object:this})}copy(t,r){return super.copy(t,r),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function JT(e,t,r,n,i,o){ly.subVectors(e,r).addScalar(.5).multiply(n),i!==void 0?(Zw.x=o*ly.x-i*ly.y,Zw.y=i*ly.x+o*ly.y):Zw.copy(ly),e.copy(t),e.x+=Zw.x,e.y+=Zw.y,e.applyMatrix4(zte)}const QT=new pe,IW=new pe;class Vte extends Qr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const r=t.levels;for(let n=0,i=r.length;n<i;n++){const o=r[n];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,r=0,n=0){r=Math.abs(r);const i=this.levels;let o;for(o=0;o<i.length&&!(r<i[o].distance);o++);return i.splice(o,0,{distance:r,hysteresis:n,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const r=this.levels;if(r.length>0){let n,i;for(n=1,i=r.length;n<i;n++){let o=r[n].distance;if(r[n].object.visible&&(o-=o*r[n].hysteresis),t<o)break}return r[n-1].object}return null}raycast(t,r){if(this.levels.length>0){QT.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(QT);this.getObjectForDistance(i).raycast(t,r)}}update(t){const r=this.levels;if(r.length>1){QT.setFromMatrixPosition(t.matrixWorld),IW.setFromMatrixPosition(this.matrixWorld);const n=QT.distanceTo(IW)/t.zoom;r[0].object.visible=!0;let i,o;for(i=1,o=r.length;i<o;i++){let a=r[i].distance;if(r[i].object.visible&&(a-=a*r[i].hysteresis),n>=a)r[i-1].object.visible=!1,r[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)r[i].object.visible=!1}}toJSON(t){const r=super.toJSON(t);this.autoUpdate===!1&&(r.object.autoUpdate=!1),r.object.levels=[];const n=this.levels;for(let i=0,o=n.length;i<o;i++){const a=n[i];r.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return r}}const LW=new pe,BW=new mn,NW=new mn,qwe=new pe,kW=new pr,ZT=new pe,uL=new zo,FW=new pr,cL=new T0;class eV extends ji{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=mF,this.bindMatrix=new pr,this.bindMatrixInverse=new pr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new oa),this.boundingBox.makeEmpty();const r=t.getAttribute("position");for(let n=0;n<r.count;n++)this.getVertexPosition(n,ZT),this.boundingBox.expandByPoint(ZT)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new zo),this.boundingSphere.makeEmpty();const r=t.getAttribute("position");for(let n=0;n<r.count;n++)this.getVertexPosition(n,ZT),this.boundingSphere.expandByPoint(ZT)}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,r){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uL.copy(this.boundingSphere),uL.applyMatrix4(i),t.ray.intersectsSphere(uL)!==!1&&(FW.copy(i).invert(),cL.copy(t.ray).applyMatrix4(FW),!(this.boundingBox!==null&&cL.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,r,cL)))}getVertexPosition(t,r){return super.getVertexPosition(t,r),this.applyBoneTransform(t,r),r}bind(t,r){this.skeleton=t,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new mn,r=this.geometry.attributes.skinWeight;for(let n=0,i=r.count;n<i;n++){t.fromBufferAttribute(r,n);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),r.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===mF?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ete?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,r){const n=this.skeleton,i=this.geometry;BW.fromBufferAttribute(i.attributes.skinIndex,t),NW.fromBufferAttribute(i.attributes.skinWeight,t),LW.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let o=0;o<4;o++){const a=NW.getComponent(o);if(a!==0){const s=BW.getComponent(o);kW.multiplyMatrices(n.bones[s].matrixWorld,n.boneInverses[s]),r.addScaledVector(qwe.copy(LW).applyMatrix4(kW),a)}}return r.applyMatrix4(this.bindMatrixInverse)}boneTransform(t,r){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(t,r)}}class SR extends Qr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yg extends Wn{constructor(t=null,r=1,n=1,i,o,a,s,l,u=fi,d=fi,c,h){super(null,a,s,l,u,d,i,o,c,h),this.isDataTexture=!0,this.image={data:t,width:r,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const zW=new pr,Xwe=new pr;class pM{constructor(t=[],r=[]){this.uuid=rl(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),r.length===0)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new pr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const n=new pr;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,r=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let o=0,a=t.length;o<a;o++){const s=t[o]?t[o].matrixWorld:Xwe;zW.multiplyMatrices(s,r[o]),zW.toArray(n,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new pM(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const n=new Yg(r,t,t,Ia,Pu);return n.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=n,this}getBoneByName(t){for(let r=0,n=this.bones.length;r<n;r++){const i=this.bones[r];if(i.name===t)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const o=t.bones[n];let a=r[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new SR),this.bones.push(a),this.boneInverses.push(new pr().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,n=this.boneInverses;for(let i=0,o=r.length;i<o;i++){const a=r[i];t.bones.push(a.uuid);const s=n[i];t.boneInverses.push(s.toArray())}return t}}class Mx extends Zr{constructor(t,r,n,i=1){super(t,r,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const uy=new pr,UW=new pr,$T=[],VW=new oa,Ywe=new pr,e_=new ji,t_=new zo;class tV extends ji{constructor(t,r,n){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new Mx(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Ywe)}computeBoundingBox(){const t=this.geometry,r=this.count;this.boundingBox===null&&(this.boundingBox=new oa),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<r;n++)this.getMatrixAt(n,uy),VW.copy(t.boundingBox).applyMatrix4(uy),this.boundingBox.union(VW)}computeBoundingSphere(){const t=this.geometry,r=this.count;this.boundingSphere===null&&(this.boundingSphere=new zo),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<r;n++)this.getMatrixAt(n,uy),t_.copy(t.boundingSphere).applyMatrix4(uy),this.boundingSphere.union(t_)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,r){r.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,t*16)}raycast(t,r){const n=this.matrixWorld,i=this.count;if(e_.geometry=this.geometry,e_.material=this.material,e_.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),t_.copy(this.boundingSphere),t_.applyMatrix4(n),t.ray.intersectsSphere(t_)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,uy),UW.multiplyMatrices(n,uy),e_.matrixWorld=UW,e_.raycast(t,$T);for(let a=0,s=$T.length;a<s;a++){const l=$T[a];l.instanceId=o,l.object=this,r.push(l)}$T.length=0}}setColorAt(t,r){this.instanceColor===null&&(this.instanceColor=new Mx(new Float32Array(this.instanceMatrix.count*3),3)),r.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Kwe(e,t){return e.z-t.z}function Jwe(e,t){return t.z-e.z}class Qwe{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,r){const n=this.pool,i=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const o=n[this.index];i.push(o),this.index++,o.start=t.start,o.count=t.count,o.z=r}reset(){this.list.length=0,this.index=0}}const cy="batchId",_f=new pr,jW=new pr,Zwe=new pr,HW=new pr,dL=new dM,eE=new oa,Gm=new zo,r_=new pe,hL=new Qwe,Ko=new ji,tE=[];function $we(e,t,r=0){const n=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const i=e.count;for(let o=0;o<i;o++)for(let a=0;a<n;a++)t.setComponent(o+r,a,e.getComponent(o,a))}else t.array.set(e.array,r*n);t.needsUpdate=!0}class jte extends ji{get maxGeometryCount(){return this._maxGeometryCount}constructor(t,r,n=r*2,i){super(new Er,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=t,this._maxVertexCount=r,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let t=Math.sqrt(this._maxGeometryCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const r=new Float32Array(t*t*4),n=new Yg(r,t,t,Ia,Pu);this._matricesTexture=n}_initializeGeometry(t){const r=this.geometry,n=this._maxVertexCount,i=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in t.attributes){const l=t.getAttribute(s),{array:u,itemSize:d,normalized:c}=l,h=new u.constructor(n*d),f=new l.constructor(h,d,c);f.setUsage(l.usage),r.setAttribute(s,f)}if(t.getIndex()!==null){const s=n>65536?new Uint32Array(o):new Uint16Array(o);r.setIndex(new Zr(s,1))}const a=i>65536?new Uint32Array(n):new Uint16Array(n);r.setAttribute(cy,new Zr(a,1)),this._geometryInitialized=!0}}_validateGeometry(t){if(t.getAttribute(cy))throw new Error(`BatchedMesh: Geometry cannot use attribute "${cy}"`);const r=this.geometry;if(!!t.getIndex()!=!!r.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in r.attributes){if(n===cy)continue;if(!t.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=t.getAttribute(n),o=r.getAttribute(n);if(i.itemSize!==o.itemSize||i.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new oa);const t=this._geometryCount,r=this.boundingBox,n=this._active;r.makeEmpty();for(let i=0;i<t;i++)n[i]!==!1&&(this.getMatrixAt(i,_f),this.getBoundingBoxAt(i,eE).applyMatrix4(_f),r.union(eE))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zo);const t=this._geometryCount,r=this.boundingSphere,n=this._active;r.makeEmpty();for(let i=0;i<t;i++)n[i]!==!1&&(this.getMatrixAt(i,_f),this.getBoundingSphereAt(i,Gm).applyMatrix4(_f),r.union(Gm))}addGeometry(t,r=-1,n=-1){if(this._initializeGeometry(t),this._validateGeometry(t),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const a=this._reservedRanges,s=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(o=a[a.length-1]),r===-1?i.vertexCount=t.getAttribute("position").count:i.vertexCount=r,o===null?i.vertexStart=0:i.vertexStart=o.vertexStart+o.vertexCount;const u=t.getIndex(),d=u!==null;if(d&&(n===-1?i.indexCount=u.count:i.indexCount=n,o===null?i.indexStart=0:i.indexStart=o.indexStart+o.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const c=this._visibility,h=this._active,f=this._matricesTexture,g=this._matricesTexture.image.data;c.push(!0),h.push(!0);const y=this._geometryCount;this._geometryCount++,Zwe.toArray(g,y*16),f.needsUpdate=!0,a.push(i),s.push({start:d?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new oa,sphereInitialized:!1,sphere:new zo});const m=this.geometry.getAttribute(cy);for(let p=0;p<i.vertexCount;p++)m.setX(i.vertexStart+p,y);return m.needsUpdate=!0,this.setGeometryAt(y,t),y}setGeometryAt(t,r){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(r);const n=this.geometry,i=n.getIndex()!==null,o=n.getIndex(),a=r.getIndex(),s=this._reservedRanges[t];if(i&&a.count>s.indexCount||r.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=s.vertexStart,u=s.vertexCount;for(const f in n.attributes){if(f===cy)continue;const g=r.getAttribute(f),y=n.getAttribute(f);$we(g,y,l);const m=g.itemSize;for(let p=g.count,v=u;p<v;p++){const b=l+p;for(let x=0;x<m;x++)y.setComponent(b,x,0)}y.needsUpdate=!0}if(i){const f=s.indexStart;for(let g=0;g<a.count;g++)o.setX(f+g,l+a.getX(g));for(let g=a.count,y=s.indexCount;g<y;g++)o.setX(f+g,l);o.needsUpdate=!0}const d=this._bounds[t];r.boundingBox!==null?(d.box.copy(r.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,r.boundingSphere!==null?(d.sphere.copy(r.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const c=this._drawRanges[t],h=r.getAttribute("position");return c.count=i?a.count:h.count,this._visibilityChanged=!0,t}deleteGeometry(t){const r=this._active;return t>=r.length||r[t]===!1?this:(r[t]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(t,r){if(this._active[t]===!1)return this;const i=this._bounds[t],o=i.box,a=this.geometry;if(i.boxInitialized===!1){o.makeEmpty();const s=a.index,l=a.attributes.position,u=this._drawRanges[t];for(let d=u.start,c=u.start+u.count;d<c;d++){let h=d;s&&(h=s.getX(h)),o.expandByPoint(r_.fromBufferAttribute(l,h))}i.boxInitialized=!0}return r.copy(o),r}getBoundingSphereAt(t,r){if(this._active[t]===!1)return this;const i=this._bounds[t],o=i.sphere,a=this.geometry;if(i.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(t,eE),eE.getCenter(o.center);const s=a.index,l=a.attributes.position,u=this._drawRanges[t];let d=0;for(let c=u.start,h=u.start+u.count;c<h;c++){let f=c;s&&(f=s.getX(f)),r_.fromBufferAttribute(l,f),d=Math.max(d,o.center.distanceToSquared(r_))}o.radius=Math.sqrt(d),i.sphereInitialized=!0}return r.copy(o),r}setMatrixAt(t,r){const n=this._active,i=this._matricesTexture,o=this._matricesTexture.image.data,a=this._geometryCount;return t>=a||n[t]===!1?this:(r.toArray(o,t*16),i.needsUpdate=!0,this)}getMatrixAt(t,r){const n=this._active,i=this._matricesTexture.image.data,o=this._geometryCount;return t>=o||n[t]===!1?null:r.fromArray(i,t*16)}setVisibleAt(t,r){const n=this._visibility,i=this._active,o=this._geometryCount;return t>=o||i[t]===!1||n[t]===r?this:(n[t]=r,this._visibilityChanged=!0,this)}getVisibleAt(t){const r=this._visibility,n=this._active,i=this._geometryCount;return t>=i||n[t]===!1?!1:r[t]}raycast(t,r){const n=this._visibility,i=this._active,o=this._drawRanges,a=this._geometryCount,s=this.matrixWorld,l=this.geometry;Ko.material=this.material,Ko.geometry.index=l.index,Ko.geometry.attributes=l.attributes,Ko.geometry.boundingBox===null&&(Ko.geometry.boundingBox=new oa),Ko.geometry.boundingSphere===null&&(Ko.geometry.boundingSphere=new zo);for(let u=0;u<a;u++){if(!n[u]||!i[u])continue;const d=o[u];Ko.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(u,Ko.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Ko.geometry.boundingBox),this.getBoundingSphereAt(u,Ko.geometry.boundingSphere),Ko.raycast(t,tE);for(let c=0,h=tE.length;c<h;c++){const f=tE[c];f.object=this,f.batchId=u,r.push(f)}tE.length=0}Ko.material=null,Ko.geometry.index=null,Ko.geometry.attributes={},Ko.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map(r=>({...r})),this._reservedRanges=t._reservedRanges.map(r=>({...r})),this._visibility=t._visibility.slice(),this._active=t._active.slice(),this._bounds=t._bounds.map(r=>({boxInitialized:r.boxInitialized,box:r.box.clone(),sphereInitialized:r.sphereInitialized,sphere:r.sphere.clone()})),this._maxGeometryCount=t._maxGeometryCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(t,r,n,i,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),s=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._visibility,u=this._multiDrawStarts,d=this._multiDrawCounts,c=this._drawRanges,h=this.perObjectFrustumCulled;h&&(HW.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),dL.setFromProjectionMatrix(HW,t.isWebGPURenderer?_x:Du));let f=0;if(this.sortObjects){jW.copy(this.matrixWorld).invert(),r_.setFromMatrixPosition(n.matrixWorld).applyMatrix4(jW);for(let m=0,p=l.length;m<p;m++)if(l[m]){this.getMatrixAt(m,_f),this.getBoundingSphereAt(m,Gm).applyMatrix4(_f);let v=!1;if(h&&(v=!dL.intersectsSphere(Gm)),!v){const b=r_.distanceTo(Gm.center);hL.push(c[m],b)}}const g=hL.list,y=this.customSort;y===null?g.sort(o.transparent?Jwe:Kwe):y.call(this,g,n);for(let m=0,p=g.length;m<p;m++){const v=g[m];u[f]=v.start*s,d[f]=v.count,f++}hL.reset()}else for(let g=0,y=l.length;g<y;g++)if(l[g]){let m=!1;if(h&&(this.getMatrixAt(g,_f),this.getBoundingSphereAt(g,Gm).applyMatrix4(_f),m=!dL.intersectsSphere(Gm)),!m){const p=c[g];u[f]=p.start*s,d[f]=p.count,f++}}this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(t,r,n,i,o,a){this.onBeforeRender(t,null,i,o,a)}}class ca extends Hi{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const GW=new pe,WW=new pe,qW=new pr,fL=new T0,rE=new zo;class Oh extends Qr{constructor(t=new Er,r=new ca){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const r=t.attributes.position,n=[0];for(let i=1,o=r.count;i<o;i++)GW.fromBufferAttribute(r,i-1),WW.fromBufferAttribute(r,i),n[i]=n[i-1],n[i]+=GW.distanceTo(WW);t.setAttribute("lineDistance",new Wt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,r){const n=this.geometry,i=this.matrixWorld,o=t.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),rE.copy(n.boundingSphere),rE.applyMatrix4(i),rE.radius+=o,t.ray.intersectsSphere(rE)===!1)return;qW.copy(i).invert(),fL.copy(t.ray).applyMatrix4(qW);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=new pe,d=new pe,c=new pe,h=new pe,f=this.isLineSegments?2:1,g=n.index,m=n.attributes.position;if(g!==null){const p=Math.max(0,a.start),v=Math.min(g.count,a.start+a.count);for(let b=p,x=v-1;b<x;b+=f){const _=g.getX(b),A=g.getX(b+1);if(u.fromBufferAttribute(m,_),d.fromBufferAttribute(m,A),fL.distanceSqToSegment(u,d,h,c)>l)continue;h.applyMatrix4(this.matrixWorld);const T=t.ray.origin.distanceTo(h);T<t.near||T>t.far||r.push({distance:T,point:c.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const p=Math.max(0,a.start),v=Math.min(m.count,a.start+a.count);for(let b=p,x=v-1;b<x;b+=f){if(u.fromBufferAttribute(m,b),d.fromBufferAttribute(m,b+1),fL.distanceSqToSegment(u,d,h,c)>l)continue;h.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(h);A<t.near||A>t.far||r.push({distance:A,point:c.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const r=this.geometry.morphAttributes,n=Object.keys(r);if(n.length>0){const i=r[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}const XW=new pe,YW=new pe;class Ku extends Oh{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const r=t.attributes.position,n=[];for(let i=0,o=r.count;i<o;i+=2)XW.fromBufferAttribute(r,i),YW.fromBufferAttribute(r,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+XW.distanceTo(YW);t.setAttribute("lineDistance",new Wt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class rV extends Oh{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class mM extends Hi{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const KW=new pr,qF=new T0,nE=new zo,iE=new pe;let nV=class extends Qr{constructor(t=new Er,r=new mM){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,r){const n=this.geometry,i=this.matrixWorld,o=t.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),nE.copy(n.boundingSphere),nE.applyMatrix4(i),nE.radius+=o,t.ray.intersectsSphere(nE)===!1)return;KW.copy(i).invert(),qF.copy(t.ray).applyMatrix4(KW);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=n.index,c=n.attributes.position;if(u!==null){const h=Math.max(0,a.start),f=Math.min(u.count,a.start+a.count);for(let g=h,y=f;g<y;g++){const m=u.getX(g);iE.fromBufferAttribute(c,m),JW(iE,m,l,i,t,r,this)}}else{const h=Math.max(0,a.start),f=Math.min(c.count,a.start+a.count);for(let g=h,y=f;g<y;g++)iE.fromBufferAttribute(c,g),JW(iE,g,l,i,t,r,this)}}updateMorphTargets(){const r=this.geometry.morphAttributes,n=Object.keys(r);if(n.length>0){const i=r[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}};function JW(e,t,r,n,i,o,a){const s=qF.distanceSqToPoint(e);if(s<r){const l=new pe;qF.closestPointToPoint(e,l),l.applyMatrix4(n);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:a})}}class e_e extends Wn{constructor(t,r,n,i,o,a,s,l,u){super(t,r,n,i,o,a,s,l,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Qn,this.magFilter=o!==void 0?o:Qn,this.generateMipmaps=!1;const d=this;function c(){d.needsUpdate=!0,t.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(c)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class t_e extends Wn{constructor(t,r){super({width:t,height:r}),this.isFramebufferTexture=!0,this.magFilter=fi,this.minFilter=fi,this.generateMipmaps=!1,this.needsUpdate=!0}}class AR extends Wn{constructor(t,r,n,i,o,a,s,l,u,d,c,h){super(null,a,s,l,u,d,i,o,c,h),this.isCompressedTexture=!0,this.image={width:r,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class r_e extends AR{constructor(t,r,n,i,o,a){super(t,r,n,o,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ko}}class n_e extends AR{constructor(t,r,n){super(void 0,t[0].width,t[0].height,r,n,Dh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class i_e extends Wn{constructor(t,r,n,i,o,a,s,l,u){super(t,r,n,i,o,a,s,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ju{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,r){const n=this.getUtoTmapping(t);return this.getPoint(n,r)}getPoints(t=5){const r=[];for(let n=0;n<=t;n++)r.push(this.getPoint(n/t));return r}getSpacedPoints(t=5){const r=[];for(let n=0;n<=t;n++)r.push(this.getPointAt(n/t));return r}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let n,i=this.getPoint(0),o=0;r.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),o+=n.distanceTo(i),r.push(o),i=n;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,r){const n=this.getLengths();let i=0;const o=n.length;let a;r?a=r:a=t*n[o-1];let s=0,l=o-1,u;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),u=n[i]-a,u<0)s=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,n[i]===a)return i/(o-1);const d=n[i],h=n[i+1]-d,f=(a-d)/h;return(i+f)/(o-1)}getTangent(t,r){let i=t-1e-4,o=t+1e-4;i<0&&(i=0),o>1&&(o=1);const a=this.getPoint(i),s=this.getPoint(o),l=r||(a.isVector2?new lt:new pe);return l.copy(s).sub(a).normalize(),l}getTangentAt(t,r){const n=this.getUtoTmapping(t);return this.getTangent(n,r)}computeFrenetFrames(t,r){const n=new pe,i=[],o=[],a=[],s=new pe,l=new pr;for(let f=0;f<=t;f++){const g=f/t;i[f]=this.getTangentAt(g,new pe)}o[0]=new pe,a[0]=new pe;let u=Number.MAX_VALUE;const d=Math.abs(i[0].x),c=Math.abs(i[0].y),h=Math.abs(i[0].z);d<=u&&(u=d,n.set(1,0,0)),c<=u&&(u=c,n.set(0,1,0)),h<=u&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),o[0].crossVectors(i[0],s),a[0].crossVectors(i[0],o[0]);for(let f=1;f<=t;f++){if(o[f]=o[f-1].clone(),a[f]=a[f-1].clone(),s.crossVectors(i[f-1],i[f]),s.length()>Number.EPSILON){s.normalize();const g=Math.acos(pi(i[f-1].dot(i[f]),-1,1));o[f].applyMatrix4(l.makeRotationAxis(s,g))}a[f].crossVectors(i[f],o[f])}if(r===!0){let f=Math.acos(pi(o[0].dot(o[t]),-1,1));f/=t,i[0].dot(s.crossVectors(o[0],o[t]))>0&&(f=-f);for(let g=1;g<=t;g++)o[g].applyMatrix4(l.makeRotationAxis(i[g],f*g)),a[g].crossVectors(i[g],o[g])}return{tangents:i,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class MR extends Ju{constructor(t=0,r=0,n=1,i=1,o=0,a=Math.PI*2,s=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=r,this.xRadius=n,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=s,this.aRotation=l}getPoint(t,r){const n=r||new lt,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(a?o=0:o=i),this.aClockwise===!0&&!a&&(o===i?o=-i:o=o-i);const s=this.aStartAngle+t*o;let l=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const d=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=l-this.aX,f=u-this.aY;l=h*d-f*c+this.aX,u=h*c+f*d+this.aY}return n.set(l,u)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Hte extends MR{constructor(t,r,n,i,o,a){super(t,r,n,n,i,o,a),this.isArcCurve=!0,this.type="ArcCurve"}}function iV(){let e=0,t=0,r=0,n=0;function i(o,a,s,l){e=o,t=s,r=-3*o+3*a-2*s-l,n=2*o-2*a+s+l}return{initCatmullRom:function(o,a,s,l,u){i(a,s,u*(s-o),u*(l-a))},initNonuniformCatmullRom:function(o,a,s,l,u,d,c){let h=(a-o)/u-(s-o)/(u+d)+(s-a)/d,f=(s-a)/d-(l-a)/(d+c)+(l-s)/c;h*=d,f*=d,i(a,s,h,f)},calc:function(o){const a=o*o,s=a*o;return e+t*o+r*a+n*s}}}const oE=new pe,pL=new iV,mL=new iV,gL=new iV;class Gte extends Ju{constructor(t=[],r=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=r,this.curveType=n,this.tension=i}getPoint(t,r=new pe){const n=r,i=this.points,o=i.length,a=(o-(this.closed?0:1))*t;let s=Math.floor(a),l=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/o)+1)*o:l===0&&s===o-1&&(s=o-2,l=1);let u,d;this.closed||s>0?u=i[(s-1)%o]:(oE.subVectors(i[0],i[1]).add(i[0]),u=oE);const c=i[s%o],h=i[(s+1)%o];if(this.closed||s+2<o?d=i[(s+2)%o]:(oE.subVectors(i[o-1],i[o-2]).add(i[o-1]),d=oE),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(c),f),y=Math.pow(c.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(d),f);y<1e-4&&(y=1),g<1e-4&&(g=y),m<1e-4&&(m=y),pL.initNonuniformCatmullRom(u.x,c.x,h.x,d.x,g,y,m),mL.initNonuniformCatmullRom(u.y,c.y,h.y,d.y,g,y,m),gL.initNonuniformCatmullRom(u.z,c.z,h.z,d.z,g,y,m)}else this.curveType==="catmullrom"&&(pL.initCatmullRom(u.x,c.x,h.x,d.x,this.tension),mL.initCatmullRom(u.y,c.y,h.y,d.y,this.tension),gL.initCatmullRom(u.z,c.z,h.z,d.z,this.tension));return n.set(pL.calc(l),mL.calc(l),gL.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let r=0,n=t.points.length;r<n;r++){const i=t.points[r];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let r=0,n=this.points.length;r<n;r++){const i=this.points[r];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let r=0,n=t.points.length;r<n;r++){const i=t.points[r];this.points.push(new pe().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function QW(e,t,r,n,i){const o=(n-t)*.5,a=(i-r)*.5,s=e*e,l=e*s;return(2*r-2*n+o+a)*l+(-3*r+3*n-2*o-a)*s+o*e+r}function o_e(e,t){const r=1-e;return r*r*t}function a_e(e,t){return 2*(1-e)*e*t}function s_e(e,t){return e*e*t}function wS(e,t,r,n){return o_e(e,t)+a_e(e,r)+s_e(e,n)}function l_e(e,t){const r=1-e;return r*r*r*t}function u_e(e,t){const r=1-e;return 3*r*r*e*t}function c_e(e,t){return 3*(1-e)*e*e*t}function d_e(e,t){return e*e*e*t}function _S(e,t,r,n,i){return l_e(e,t)+u_e(e,r)+c_e(e,n)+d_e(e,i)}class oV extends Ju{constructor(t=new lt,r=new lt,n=new lt,i=new lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=r,this.v2=n,this.v3=i}getPoint(t,r=new lt){const n=r,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return n.set(_S(t,i.x,o.x,a.x,s.x),_S(t,i.y,o.y,a.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Wte extends Ju{constructor(t=new pe,r=new pe,n=new pe,i=new pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=r,this.v2=n,this.v3=i}getPoint(t,r=new pe){const n=r,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return n.set(_S(t,i.x,o.x,a.x,s.x),_S(t,i.y,o.y,a.y,s.y),_S(t,i.z,o.z,a.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class aV extends Ju{constructor(t=new lt,r=new lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=r}getPoint(t,r=new lt){const n=r;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,r){return this.getPoint(t,r)}getTangent(t,r=new lt){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,r){return this.getTangent(t,r)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class qte extends Ju{constructor(t=new pe,r=new pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=r}getPoint(t,r=new pe){const n=r;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,r){return this.getPoint(t,r)}getTangent(t,r=new pe){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,r){return this.getTangent(t,r)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class sV extends Ju{constructor(t=new lt,r=new lt,n=new lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=r,this.v2=n}getPoint(t,r=new lt){const n=r,i=this.v0,o=this.v1,a=this.v2;return n.set(wS(t,i.x,o.x,a.x),wS(t,i.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class lV extends Ju{constructor(t=new pe,r=new pe,n=new pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=r,this.v2=n}getPoint(t,r=new pe){const n=r,i=this.v0,o=this.v1,a=this.v2;return n.set(wS(t,i.x,o.x,a.x),wS(t,i.y,o.y,a.y),wS(t,i.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class uV extends Ju{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,r=new lt){const n=r,i=this.points,o=(i.length-1)*t,a=Math.floor(o),s=o-a,l=i[a===0?a:a-1],u=i[a],d=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(QW(s,l.x,u.x,d.x,c.x),QW(s,l.y,u.y,d.y,c.y)),n}copy(t){super.copy(t),this.points=[];for(let r=0,n=t.points.length;r<n;r++){const i=t.points[r];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let r=0,n=this.points.length;r<n;r++){const i=this.points[r];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let r=0,n=t.points.length;r<n;r++){const i=t.points[r];this.points.push(new lt().fromArray(i))}return this}}var wD=Object.freeze({__proto__:null,ArcCurve:Hte,CatmullRomCurve3:Gte,CubicBezierCurve:oV,CubicBezierCurve3:Wte,EllipseCurve:MR,LineCurve:aV,LineCurve3:qte,QuadraticBezierCurve:sV,QuadraticBezierCurve3:lV,SplineCurve:uV});class Xte extends Ju{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(r)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new wD[n](r,t))}return this}getPoint(t,r){const n=t*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=n){const a=i[o]-n,s=this.curves[o],l=s.getLength(),u=l===0?0:1-a/l;return s.getPointAt(u,r)}o++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let r=0;for(let n=0,i=this.curves.length;n<i;n++)r+=this.curves[n].getLength(),t.push(r);return this.cacheLengths=t,t}getSpacedPoints(t=40){const r=[];for(let n=0;n<=t;n++)r.push(this.getPoint(n/t));return this.autoClose&&r.push(r[0]),r}getPoints(t=12){const r=[];let n;for(let i=0,o=this.curves;i<o.length;i++){const a=o[i],s=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,l=a.getPoints(s);for(let u=0;u<l.length;u++){const d=l[u];n&&n.equals(d)||(r.push(d),n=d)}}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r}copy(t){super.copy(t),this.curves=[];for(let r=0,n=t.curves.length;r<n;r++){const i=t.curves[r];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let r=0,n=this.curves.length;r<n;r++){const i=this.curves[r];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let r=0,n=t.curves.length;r<n;r++){const i=t.curves[r];this.curves.push(new wD[i.type]().fromJSON(i))}return this}}class bA extends Xte{constructor(t){super(),this.type="Path",this.currentPoint=new lt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let r=1,n=t.length;r<n;r++)this.lineTo(t[r].x,t[r].y);return this}moveTo(t,r){return this.currentPoint.set(t,r),this}lineTo(t,r){const n=new aV(this.currentPoint.clone(),new lt(t,r));return this.curves.push(n),this.currentPoint.set(t,r),this}quadraticCurveTo(t,r,n,i){const o=new sV(this.currentPoint.clone(),new lt(t,r),new lt(n,i));return this.curves.push(o),this.currentPoint.set(n,i),this}bezierCurveTo(t,r,n,i,o,a){const s=new oV(this.currentPoint.clone(),new lt(t,r),new lt(n,i),new lt(o,a));return this.curves.push(s),this.currentPoint.set(o,a),this}splineThru(t){const r=[this.currentPoint.clone()].concat(t),n=new uV(r);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,r,n,i,o,a){const s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(t+s,r+l,n,i,o,a),this}absarc(t,r,n,i,o,a){return this.absellipse(t,r,n,n,i,o,a),this}ellipse(t,r,n,i,o,a,s,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+u,r+d,n,i,o,a,s,l),this}absellipse(t,r,n,i,o,a,s,l){const u=new MR(t,r,n,i,o,a,s,l);if(this.curves.length>0){const c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class gM extends Er{constructor(t=[new lt(0,-.5),new lt(.5,0),new lt(0,.5)],r=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:r,phiStart:n,phiLength:i},r=Math.floor(r),i=pi(i,0,Math.PI*2);const o=[],a=[],s=[],l=[],u=[],d=1/r,c=new pe,h=new lt,f=new pe,g=new pe,y=new pe;let m=0,p=0;for(let v=0;v<=t.length-1;v++)switch(v){case 0:m=t[v+1].x-t[v].x,p=t[v+1].y-t[v].y,f.x=p*1,f.y=-m,f.z=p*0,y.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case t.length-1:l.push(y.x,y.y,y.z);break;default:m=t[v+1].x-t[v].x,p=t[v+1].y-t[v].y,f.x=p*1,f.y=-m,f.z=p*0,g.copy(f),f.x+=y.x,f.y+=y.y,f.z+=y.z,f.normalize(),l.push(f.x,f.y,f.z),y.copy(g)}for(let v=0;v<=r;v++){const b=n+v*d*i,x=Math.sin(b),_=Math.cos(b);for(let A=0;A<=t.length-1;A++){c.x=t[A].x*x,c.y=t[A].y,c.z=t[A].x*_,a.push(c.x,c.y,c.z),h.x=v/r,h.y=A/(t.length-1),s.push(h.x,h.y);const M=l[3*A+0]*x,T=l[3*A+1],C=l[3*A+0]*_;u.push(M,T,C)}}for(let v=0;v<r;v++)for(let b=0;b<t.length-1;b++){const x=b+v*t.length,_=x,A=x+t.length,M=x+t.length+1,T=x+1;o.push(_,A,T),o.push(M,T,A)}this.setIndex(o),this.setAttribute("position",new Wt(a,3)),this.setAttribute("uv",new Wt(s,2)),this.setAttribute("normal",new Wt(u,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new gM(t.points,t.segments,t.phiStart,t.phiLength)}}class CR extends gM{constructor(t=1,r=1,n=4,i=8){const o=new bA;o.absarc(0,-r/2,t,Math.PI*1.5,0),o.absarc(0,r/2,t,0,Math.PI*.5),super(o.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:t,length:r,capSegments:n,radialSegments:i}}static fromJSON(t){return new CR(t.radius,t.length,t.capSegments,t.radialSegments)}}class TR extends Er{constructor(t=1,r=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:r,thetaStart:n,thetaLength:i},r=Math.max(3,r);const o=[],a=[],s=[],l=[],u=new pe,d=new lt;a.push(0,0,0),s.push(0,0,1),l.push(.5,.5);for(let c=0,h=3;c<=r;c++,h+=3){const f=n+c/r*i;u.x=t*Math.cos(f),u.y=t*Math.sin(f),a.push(u.x,u.y,u.z),s.push(0,0,1),d.x=(a[h]/t+1)/2,d.y=(a[h+1]/t+1)/2,l.push(d.x,d.y)}for(let c=1;c<=r;c++)o.push(c,c+1,0);this.setIndex(o),this.setAttribute("position",new Wt(a,3)),this.setAttribute("normal",new Wt(s,3)),this.setAttribute("uv",new Wt(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new TR(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class c1 extends Er{constructor(t=1,r=1,n=1,i=32,o=1,a=!1,s=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:n,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l};const u=this;i=Math.floor(i),o=Math.floor(o);const d=[],c=[],h=[],f=[];let g=0;const y=[],m=n/2;let p=0;v(),a===!1&&(t>0&&b(!0),r>0&&b(!1)),this.setIndex(d),this.setAttribute("position",new Wt(c,3)),this.setAttribute("normal",new Wt(h,3)),this.setAttribute("uv",new Wt(f,2));function v(){const x=new pe,_=new pe;let A=0;const M=(r-t)/n;for(let T=0;T<=o;T++){const C=[],E=T/o,D=E*(r-t)+t;for(let I=0;I<=i;I++){const k=I/i,L=k*l+s,U=Math.sin(L),W=Math.cos(L);_.x=D*U,_.y=-E*n+m,_.z=D*W,c.push(_.x,_.y,_.z),x.set(U,M,W).normalize(),h.push(x.x,x.y,x.z),f.push(k,1-E),C.push(g++)}y.push(C)}for(let T=0;T<i;T++)for(let C=0;C<o;C++){const E=y[C][T],D=y[C+1][T],I=y[C+1][T+1],k=y[C][T+1];d.push(E,D,k),d.push(D,I,k),A+=6}u.addGroup(p,A,0),p+=A}function b(x){const _=g,A=new lt,M=new pe;let T=0;const C=x===!0?t:r,E=x===!0?1:-1;for(let I=1;I<=i;I++)c.push(0,m*E,0),h.push(0,E,0),f.push(.5,.5),g++;const D=g;for(let I=0;I<=i;I++){const L=I/i*l+s,U=Math.cos(L),W=Math.sin(L);M.x=C*W,M.y=m*E,M.z=C*U,c.push(M.x,M.y,M.z),h.push(0,E,0),A.x=U*.5+.5,A.y=W*.5*E+.5,f.push(A.x,A.y),g++}for(let I=0;I<i;I++){const k=_+I,L=D+I;x===!0?d.push(L,L+1,k):d.push(L+1,L,k),T+=3}u.addGroup(p,T,x===!0?1:2),p+=T}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new c1(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class ER extends c1{constructor(t=1,r=1,n=32,i=1,o=!1,a=0,s=Math.PI*2){super(0,t,r,n,i,o,a,s),this.type="ConeGeometry",this.parameters={radius:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s}}static fromJSON(t){return new ER(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Zp extends Er{constructor(t=[],r=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:r,radius:n,detail:i};const o=[],a=[];s(i),u(n),d(),this.setAttribute("position",new Wt(o,3)),this.setAttribute("normal",new Wt(o.slice(),3)),this.setAttribute("uv",new Wt(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function s(v){const b=new pe,x=new pe,_=new pe;for(let A=0;A<r.length;A+=3)f(r[A+0],b),f(r[A+1],x),f(r[A+2],_),l(b,x,_,v)}function l(v,b,x,_){const A=_+1,M=[];for(let T=0;T<=A;T++){M[T]=[];const C=v.clone().lerp(x,T/A),E=b.clone().lerp(x,T/A),D=A-T;for(let I=0;I<=D;I++)I===0&&T===A?M[T][I]=C:M[T][I]=C.clone().lerp(E,I/D)}for(let T=0;T<A;T++)for(let C=0;C<2*(A-T)-1;C++){const E=Math.floor(C/2);C%2===0?(h(M[T][E+1]),h(M[T+1][E]),h(M[T][E])):(h(M[T][E+1]),h(M[T+1][E+1]),h(M[T+1][E]))}}function u(v){const b=new pe;for(let x=0;x<o.length;x+=3)b.x=o[x+0],b.y=o[x+1],b.z=o[x+2],b.normalize().multiplyScalar(v),o[x+0]=b.x,o[x+1]=b.y,o[x+2]=b.z}function d(){const v=new pe;for(let b=0;b<o.length;b+=3){v.x=o[b+0],v.y=o[b+1],v.z=o[b+2];const x=m(v)/2/Math.PI+.5,_=p(v)/Math.PI+.5;a.push(x,1-_)}g(),c()}function c(){for(let v=0;v<a.length;v+=6){const b=a[v+0],x=a[v+2],_=a[v+4],A=Math.max(b,x,_),M=Math.min(b,x,_);A>.9&&M<.1&&(b<.2&&(a[v+0]+=1),x<.2&&(a[v+2]+=1),_<.2&&(a[v+4]+=1))}}function h(v){o.push(v.x,v.y,v.z)}function f(v,b){const x=v*3;b.x=t[x+0],b.y=t[x+1],b.z=t[x+2]}function g(){const v=new pe,b=new pe,x=new pe,_=new pe,A=new lt,M=new lt,T=new lt;for(let C=0,E=0;C<o.length;C+=9,E+=6){v.set(o[C+0],o[C+1],o[C+2]),b.set(o[C+3],o[C+4],o[C+5]),x.set(o[C+6],o[C+7],o[C+8]),A.set(a[E+0],a[E+1]),M.set(a[E+2],a[E+3]),T.set(a[E+4],a[E+5]),_.copy(v).add(b).add(x).divideScalar(3);const D=m(_);y(A,E+0,v,D),y(M,E+2,b,D),y(T,E+4,x,D)}}function y(v,b,x,_){_<0&&v.x===1&&(a[b]=v.x-1),x.x===0&&x.z===0&&(a[b]=_/2/Math.PI+.5)}function m(v){return Math.atan2(v.z,-v.x)}function p(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Zp(t.vertices,t.indices,t.radius,t.details)}}class PR extends Zp{constructor(t=1,r=0){const n=(1+Math.sqrt(5))/2,i=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,t,r),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new PR(t.radius,t.detail)}}const aE=new pe,sE=new pe,vL=new pe,lE=new cs;class Yte extends Er{constructor(t=null,r=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:r},t!==null){const i=Math.pow(10,4),o=Math.cos(qg*r),a=t.getIndex(),s=t.getAttribute("position"),l=a?a.count:s.count,u=[0,0,0],d=["a","b","c"],c=new Array(3),h={},f=[];for(let g=0;g<l;g+=3){a?(u[0]=a.getX(g),u[1]=a.getX(g+1),u[2]=a.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:y,b:m,c:p}=lE;if(y.fromBufferAttribute(s,u[0]),m.fromBufferAttribute(s,u[1]),p.fromBufferAttribute(s,u[2]),lE.getNormal(vL),c[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,c[1]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,c[2]=`${Math.round(p.x*i)},${Math.round(p.y*i)},${Math.round(p.z*i)}`,!(c[0]===c[1]||c[1]===c[2]||c[2]===c[0]))for(let v=0;v<3;v++){const b=(v+1)%3,x=c[v],_=c[b],A=lE[d[v]],M=lE[d[b]],T=`${x}_${_}`,C=`${_}_${x}`;C in h&&h[C]?(vL.dot(h[C].normal)<=o&&(f.push(A.x,A.y,A.z),f.push(M.x,M.y,M.z)),h[C]=null):T in h||(h[T]={index0:u[v],index1:u[b],normal:vL.clone()})}}for(const g in h)if(h[g]){const{index0:y,index1:m}=h[g];aE.fromBufferAttribute(s,y),sE.fromBufferAttribute(s,m),f.push(aE.x,aE.y,aE.z),f.push(sE.x,sE.y,sE.z)}this.setAttribute("position",new Wt(f,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Kg extends bA{constructor(t){super(t),this.uuid=rl(),this.type="Shape",this.holes=[]}getPointsHoles(t){const r=[];for(let n=0,i=this.holes.length;n<i;n++)r[n]=this.holes[n].getPoints(t);return r}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let r=0,n=t.holes.length;r<n;r++){const i=t.holes[r];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let r=0,n=this.holes.length;r<n;r++){const i=this.holes[r];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let r=0,n=t.holes.length;r<n;r++){const i=t.holes[r];this.holes.push(new bA().fromJSON(i))}return this}}const h_e={triangulate:function(e,t,r=2){const n=t&&t.length,i=n?t[0]*r:e.length;let o=Kte(e,0,i,r,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,u,d,c,h,f;if(n&&(o=v_e(e,t,o,r)),e.length>80*r){s=u=e[0],l=d=e[1];for(let g=r;g<i;g+=r)c=e[g],h=e[g+1],c<s&&(s=c),h<l&&(l=h),c>u&&(u=c),h>d&&(d=h);f=Math.max(u-s,d-l),f=f!==0?32767/f:0}return xA(o,a,r,s,l,f,0),a}};function Kte(e,t,r,n,i){let o,a;if(i===E_e(e,t,r,n)>0)for(o=t;o<r;o+=n)a=ZW(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=ZW(o,e[o],e[o+1],a);return a&&DR(a,a.next)&&(_A(a),a=a.next),a}function h0(e,t){if(!e)return e;t||(t=e);let r=e,n;do if(n=!1,!r.steiner&&(DR(r,r.next)||Zn(r.prev,r,r.next)===0)){if(_A(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function xA(e,t,r,n,i,o,a){if(!e)return;!a&&o&&__e(e,n,i,o);let s=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,o?p_e(e,n,i,o):f_e(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),_A(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=m_e(h0(e),t,r),xA(e,t,r,n,i,o,2)):a===2&&g_e(e,t,r,n,i,o):xA(h0(e),t,r,n,i,o,1);break}}}function f_e(e){const t=e.prev,r=e,n=e.next;if(Zn(t,r,n)>=0)return!1;const i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,d=i<o?i<a?i:a:o<a?o:a,c=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,f=s>l?s>u?s:u:l>u?l:u;let g=n.next;for(;g!==t;){if(g.x>=d&&g.x<=h&&g.y>=c&&g.y<=f&&vb(i,s,o,l,a,u,g.x,g.y)&&Zn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function p_e(e,t,r,n){const i=e.prev,o=e,a=e.next;if(Zn(i,o,a)>=0)return!1;const s=i.x,l=o.x,u=a.x,d=i.y,c=o.y,h=a.y,f=s<l?s<u?s:u:l<u?l:u,g=d<c?d<h?d:h:c<h?c:h,y=s>l?s>u?s:u:l>u?l:u,m=d>c?d>h?d:h:c>h?c:h,p=XF(f,g,t,r,n),v=XF(y,m,t,r,n);let b=e.prevZ,x=e.nextZ;for(;b&&b.z>=p&&x&&x.z<=v;){if(b.x>=f&&b.x<=y&&b.y>=g&&b.y<=m&&b!==i&&b!==a&&vb(s,d,l,c,u,h,b.x,b.y)&&Zn(b.prev,b,b.next)>=0||(b=b.prevZ,x.x>=f&&x.x<=y&&x.y>=g&&x.y<=m&&x!==i&&x!==a&&vb(s,d,l,c,u,h,x.x,x.y)&&Zn(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;b&&b.z>=p;){if(b.x>=f&&b.x<=y&&b.y>=g&&b.y<=m&&b!==i&&b!==a&&vb(s,d,l,c,u,h,b.x,b.y)&&Zn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=v;){if(x.x>=f&&x.x<=y&&x.y>=g&&x.y<=m&&x!==i&&x!==a&&vb(s,d,l,c,u,h,x.x,x.y)&&Zn(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function m_e(e,t,r){let n=e;do{const i=n.prev,o=n.next.next;!DR(i,o)&&Jte(i,n,n.next,o)&&wA(i,o)&&wA(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),_A(n),_A(n.next),n=e=o),n=n.next}while(n!==e);return h0(n)}function g_e(e,t,r,n,i,o){let a=e;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&M_e(a,s)){let l=Qte(a,s);a=h0(a,a.next),l=h0(l,l.next),xA(a,t,r,n,i,o,0),xA(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function v_e(e,t,r,n){const i=[];let o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=Kte(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(A_e(u));for(i.sort(y_e),o=0;o<i.length;o++)r=b_e(i[o],r);return r}function y_e(e,t){return e.x-t.x}function b_e(e,t){const r=x_e(e,t);if(!r)return t;const n=Qte(r,e);return h0(n,n.next),h0(r,r.next)}function x_e(e,t){let r=t,n=-1/0,i;const o=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const h=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=o&&h>n&&(n=h,i=r.x<r.next.x?r:r.next,h===o))return i}r=r.next}while(r!==t);if(!i)return null;const s=i,l=i.x,u=i.y;let d=1/0,c;r=i;do o>=r.x&&r.x>=l&&o!==r.x&&vb(a<u?o:n,a,l,u,a<u?n:o,a,r.x,r.y)&&(c=Math.abs(a-r.y)/(o-r.x),wA(r,e)&&(c<d||c===d&&(r.x>i.x||r.x===i.x&&w_e(i,r)))&&(i=r,d=c)),r=r.next;while(r!==s);return i}function w_e(e,t){return Zn(e.prev,e,t.prev)<0&&Zn(t.next,e,e.next)<0}function __e(e,t,r,n){let i=e;do i.z===0&&(i.z=XF(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,S_e(i)}function S_e(e){let t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function XF(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function A_e(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function vb(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function M_e(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!C_e(e,t)&&(wA(e,t)&&wA(t,e)&&T_e(e,t)&&(Zn(e.prev,e,t.prev)||Zn(e,t.prev,t))||DR(e,t)&&Zn(e.prev,e,e.next)>0&&Zn(t.prev,t,t.next)>0)}function Zn(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function DR(e,t){return e.x===t.x&&e.y===t.y}function Jte(e,t,r,n){const i=cE(Zn(e,t,r)),o=cE(Zn(e,t,n)),a=cE(Zn(r,n,e)),s=cE(Zn(r,n,t));return!!(i!==o&&a!==s||i===0&&uE(e,r,t)||o===0&&uE(e,n,t)||a===0&&uE(r,e,n)||s===0&&uE(r,t,n))}function uE(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function cE(e){return e>0?1:e<0?-1:0}function C_e(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Jte(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function wA(e,t){return Zn(e.prev,e,e.next)<0?Zn(e,t,e.next)>=0&&Zn(e,e.prev,t)>=0:Zn(e,t,e.prev)<0||Zn(e,e.next,t)<0}function T_e(e,t){let r=e,n=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function Qte(e,t){const r=new YF(e.i,e.x,e.y),n=new YF(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function ZW(e,t,r,n){const i=new YF(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function _A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function YF(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E_e(e,t,r,n){let i=0;for(let o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}class Xc{static area(t){const r=t.length;let n=0;for(let i=r-1,o=0;o<r;i=o++)n+=t[i].x*t[o].y-t[o].x*t[i].y;return n*.5}static isClockWise(t){return Xc.area(t)<0}static triangulateShape(t,r){const n=[],i=[],o=[];$W(t),e8(n,t);let a=t.length;r.forEach($W);for(let l=0;l<r.length;l++)i.push(a),a+=r[l].length,e8(n,r[l]);const s=h_e.triangulate(n,i);for(let l=0;l<s.length;l+=3)o.push(s.slice(l,l+3));return o}}function $W(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function e8(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}class OR extends Er{constructor(t=new Kg([new lt(.5,.5),new lt(-.5,.5),new lt(-.5,-.5),new lt(.5,-.5)]),r={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:r},t=Array.isArray(t)?t:[t];const n=this,i=[],o=[];for(let s=0,l=t.length;s<l;s++){const u=t[s];a(u)}this.setAttribute("position",new Wt(i,3)),this.setAttribute("uv",new Wt(o,2)),this.computeVertexNormals();function a(s){const l=[],u=r.curveSegments!==void 0?r.curveSegments:12,d=r.steps!==void 0?r.steps:1,c=r.depth!==void 0?r.depth:1;let h=r.bevelEnabled!==void 0?r.bevelEnabled:!0,f=r.bevelThickness!==void 0?r.bevelThickness:.2,g=r.bevelSize!==void 0?r.bevelSize:f-.1,y=r.bevelOffset!==void 0?r.bevelOffset:0,m=r.bevelSegments!==void 0?r.bevelSegments:3;const p=r.extrudePath,v=r.UVGenerator!==void 0?r.UVGenerator:P_e;let b,x=!1,_,A,M,T;p&&(b=p.getSpacedPoints(d),x=!0,h=!1,_=p.computeFrenetFrames(d,!1),A=new pe,M=new pe,T=new pe),h||(m=0,f=0,g=0,y=0);const C=s.extractPoints(u);let E=C.shape;const D=C.holes;if(!Xc.isClockWise(E)){E=E.reverse();for(let re=0,ye=D.length;re<ye;re++){const be=D[re];Xc.isClockWise(be)&&(D[re]=be.reverse())}}const k=Xc.triangulateShape(E,D),L=E;for(let re=0,ye=D.length;re<ye;re++){const be=D[re];E=E.concat(be)}function U(re,ye,be){return ye||console.error("THREE.ExtrudeGeometry: vec does not exist"),re.clone().addScaledVector(ye,be)}const W=E.length,G=k.length;function z(re,ye,be){let _e,Se,Fe;const Re=re.x-ye.x,Le=re.y-ye.y,rt=be.x-re.x,st=be.y-re.y,he=Re*Re+Le*Le,q=Re*st-Le*rt;if(Math.abs(q)>Number.EPSILON){const J=Math.sqrt(he),ge=Math.sqrt(rt*rt+st*st),Pe=ye.x-Le/J,De=ye.y+Re/J,Ve=be.x-st/ge,et=be.y+rt/ge,Ce=((Ve-Pe)*st-(et-De)*rt)/(Re*st-Le*rt);_e=Pe+Re*Ce-re.x,Se=De+Le*Ce-re.y;const Je=_e*_e+Se*Se;if(Je<=2)return new lt(_e,Se);Fe=Math.sqrt(Je/2)}else{let J=!1;Re>Number.EPSILON?rt>Number.EPSILON&&(J=!0):Re<-Number.EPSILON?rt<-Number.EPSILON&&(J=!0):Math.sign(Le)===Math.sign(st)&&(J=!0),J?(_e=-Le,Se=Re,Fe=Math.sqrt(he)):(_e=Re,Se=Le,Fe=Math.sqrt(he/2))}return new lt(_e/Fe,Se/Fe)}const V=[];for(let re=0,ye=L.length,be=ye-1,_e=re+1;re<ye;re++,be++,_e++)be===ye&&(be=0),_e===ye&&(_e=0),V[re]=z(L[re],L[be],L[_e]);const j=[];let H,Y=V.concat();for(let re=0,ye=D.length;re<ye;re++){const be=D[re];H=[];for(let _e=0,Se=be.length,Fe=Se-1,Re=_e+1;_e<Se;_e++,Fe++,Re++)Fe===Se&&(Fe=0),Re===Se&&(Re=0),H[_e]=z(be[_e],be[Fe],be[Re]);j.push(H),Y=Y.concat(H)}for(let re=0;re<m;re++){const ye=re/m,be=f*Math.cos(ye*Math.PI/2),_e=g*Math.sin(ye*Math.PI/2)+y;for(let Se=0,Fe=L.length;Se<Fe;Se++){const Re=U(L[Se],V[Se],_e);ce(Re.x,Re.y,-be)}for(let Se=0,Fe=D.length;Se<Fe;Se++){const Re=D[Se];H=j[Se];for(let Le=0,rt=Re.length;Le<rt;Le++){const st=U(Re[Le],H[Le],_e);ce(st.x,st.y,-be)}}}const Q=g+y;for(let re=0;re<W;re++){const ye=h?U(E[re],Y[re],Q):E[re];x?(M.copy(_.normals[0]).multiplyScalar(ye.x),A.copy(_.binormals[0]).multiplyScalar(ye.y),T.copy(b[0]).add(M).add(A),ce(T.x,T.y,T.z)):ce(ye.x,ye.y,0)}for(let re=1;re<=d;re++)for(let ye=0;ye<W;ye++){const be=h?U(E[ye],Y[ye],Q):E[ye];x?(M.copy(_.normals[re]).multiplyScalar(be.x),A.copy(_.binormals[re]).multiplyScalar(be.y),T.copy(b[re]).add(M).add(A),ce(T.x,T.y,T.z)):ce(be.x,be.y,c/d*re)}for(let re=m-1;re>=0;re--){const ye=re/m,be=f*Math.cos(ye*Math.PI/2),_e=g*Math.sin(ye*Math.PI/2)+y;for(let Se=0,Fe=L.length;Se<Fe;Se++){const Re=U(L[Se],V[Se],_e);ce(Re.x,Re.y,c+be)}for(let Se=0,Fe=D.length;Se<Fe;Se++){const Re=D[Se];H=j[Se];for(let Le=0,rt=Re.length;Le<rt;Le++){const st=U(Re[Le],H[Le],_e);x?ce(st.x,st.y+b[d-1].y,b[d-1].x+be):ce(st.x,st.y,c+be)}}}$(),ne();function $(){const re=i.length/3;if(h){let ye=0,be=W*ye;for(let _e=0;_e<G;_e++){const Se=k[_e];ae(Se[2]+be,Se[1]+be,Se[0]+be)}ye=d+m*2,be=W*ye;for(let _e=0;_e<G;_e++){const Se=k[_e];ae(Se[0]+be,Se[1]+be,Se[2]+be)}}else{for(let ye=0;ye<G;ye++){const be=k[ye];ae(be[2],be[1],be[0])}for(let ye=0;ye<G;ye++){const be=k[ye];ae(be[0]+W*d,be[1]+W*d,be[2]+W*d)}}n.addGroup(re,i.length/3-re,0)}function ne(){const re=i.length/3;let ye=0;Z(L,ye),ye+=L.length;for(let be=0,_e=D.length;be<_e;be++){const Se=D[be];Z(Se,ye),ye+=Se.length}n.addGroup(re,i.length/3-re,1)}function Z(re,ye){let be=re.length;for(;--be>=0;){const _e=be;let Se=be-1;Se<0&&(Se=re.length-1);for(let Fe=0,Re=d+m*2;Fe<Re;Fe++){const Le=W*Fe,rt=W*(Fe+1),st=ye+_e+Le,he=ye+Se+Le,q=ye+Se+rt,J=ye+_e+rt;ie(st,he,q,J)}}}function ce(re,ye,be){l.push(re),l.push(ye),l.push(be)}function ae(re,ye,be){le(re),le(ye),le(be);const _e=i.length/3,Se=v.generateTopUV(n,i,_e-3,_e-2,_e-1);se(Se[0]),se(Se[1]),se(Se[2])}function ie(re,ye,be,_e){le(re),le(ye),le(_e),le(ye),le(be),le(_e);const Se=i.length/3,Fe=v.generateSideWallUV(n,i,Se-6,Se-3,Se-2,Se-1);se(Fe[0]),se(Fe[1]),se(Fe[3]),se(Fe[1]),se(Fe[2]),se(Fe[3])}function le(re){i.push(l[re*3+0]),i.push(l[re*3+1]),i.push(l[re*3+2])}function se(re){o.push(re.x),o.push(re.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),r=this.parameters.shapes,n=this.parameters.options;return D_e(r,n,t)}static fromJSON(t,r){const n=[];for(let o=0,a=t.shapes.length;o<a;o++){const s=r[t.shapes[o]];n.push(s)}const i=t.options.extrudePath;return i!==void 0&&(t.options.extrudePath=new wD[i.type]().fromJSON(i)),new OR(n,t.options)}}const P_e={generateTopUV:function(e,t,r,n,i){const o=t[r*3],a=t[r*3+1],s=t[n*3],l=t[n*3+1],u=t[i*3],d=t[i*3+1];return[new lt(o,a),new lt(s,l),new lt(u,d)]},generateSideWallUV:function(e,t,r,n,i,o){const a=t[r*3],s=t[r*3+1],l=t[r*3+2],u=t[n*3],d=t[n*3+1],c=t[n*3+2],h=t[i*3],f=t[i*3+1],g=t[i*3+2],y=t[o*3],m=t[o*3+1],p=t[o*3+2];return Math.abs(s-d)<Math.abs(a-u)?[new lt(a,1-l),new lt(u,1-c),new lt(h,1-g),new lt(y,1-p)]:[new lt(s,1-l),new lt(d,1-c),new lt(f,1-g),new lt(m,1-p)]}};function D_e(e,t,r){if(r.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const o=e[n];r.shapes.push(o.uuid)}else r.shapes.push(e.uuid);return r.options=Object.assign({},t),t.extrudePath!==void 0&&(r.options.extrudePath=t.extrudePath.toJSON()),r}class RR extends Zp{constructor(t=1,r=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,t,r),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new RR(t.radius,t.detail)}}class vM extends Zp{constructor(t=1,r=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,t,r),this.type="OctahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new vM(t.radius,t.detail)}}class IR extends Er{constructor(t=.5,r=1,n=32,i=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:r,thetaSegments:n,phiSegments:i,thetaStart:o,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const s=[],l=[],u=[],d=[];let c=t;const h=(r-t)/i,f=new pe,g=new lt;for(let y=0;y<=i;y++){for(let m=0;m<=n;m++){const p=o+m/n*a;f.x=c*Math.cos(p),f.y=c*Math.sin(p),l.push(f.x,f.y,f.z),u.push(0,0,1),g.x=(f.x/r+1)/2,g.y=(f.y/r+1)/2,d.push(g.x,g.y)}c+=h}for(let y=0;y<i;y++){const m=y*(n+1);for(let p=0;p<n;p++){const v=p+m,b=v,x=v+n+1,_=v+n+2,A=v+1;s.push(b,x,A),s.push(x,_,A)}}this.setIndex(s),this.setAttribute("position",new Wt(l,3)),this.setAttribute("normal",new Wt(u,3)),this.setAttribute("uv",new Wt(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new IR(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class LR extends Er{constructor(t=new Kg([new lt(0,.5),new lt(-.5,-.5),new lt(.5,-.5)]),r=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:r};const n=[],i=[],o=[],a=[];let s=0,l=0;if(Array.isArray(t)===!1)u(t);else for(let d=0;d<t.length;d++)u(t[d]),this.addGroup(s,l,d),s+=l,l=0;this.setIndex(n),this.setAttribute("position",new Wt(i,3)),this.setAttribute("normal",new Wt(o,3)),this.setAttribute("uv",new Wt(a,2));function u(d){const c=i.length/3,h=d.extractPoints(r);let f=h.shape;const g=h.holes;Xc.isClockWise(f)===!1&&(f=f.reverse());for(let m=0,p=g.length;m<p;m++){const v=g[m];Xc.isClockWise(v)===!0&&(g[m]=v.reverse())}const y=Xc.triangulateShape(f,g);for(let m=0,p=g.length;m<p;m++){const v=g[m];f=f.concat(v)}for(let m=0,p=f.length;m<p;m++){const v=f[m];i.push(v.x,v.y,0),o.push(0,0,1),a.push(v.x,v.y)}for(let m=0,p=y.length;m<p;m++){const v=y[m],b=v[0]+c,x=v[1]+c,_=v[2]+c;n.push(b,x,_),l+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),r=this.parameters.shapes;return O_e(r,t)}static fromJSON(t,r){const n=[];for(let i=0,o=t.shapes.length;i<o;i++){const a=r[t.shapes[i]];n.push(a)}return new LR(n,t.curveSegments)}}function O_e(e,t){if(t.shapes=[],Array.isArray(e))for(let r=0,n=e.length;r<n;r++){const i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}class yM extends Er{constructor(t=1,r=32,n=16,i=0,o=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:r,heightSegments:n,phiStart:i,phiLength:o,thetaStart:a,thetaLength:s},r=Math.max(3,Math.floor(r)),n=Math.max(2,Math.floor(n));const l=Math.min(a+s,Math.PI);let u=0;const d=[],c=new pe,h=new pe,f=[],g=[],y=[],m=[];for(let p=0;p<=n;p++){const v=[],b=p/n;let x=0;p===0&&a===0?x=.5/r:p===n&&l===Math.PI&&(x=-.5/r);for(let _=0;_<=r;_++){const A=_/r;c.x=-t*Math.cos(i+A*o)*Math.sin(a+b*s),c.y=t*Math.cos(a+b*s),c.z=t*Math.sin(i+A*o)*Math.sin(a+b*s),g.push(c.x,c.y,c.z),h.copy(c).normalize(),y.push(h.x,h.y,h.z),m.push(A+x,1-b),v.push(u++)}d.push(v)}for(let p=0;p<n;p++)for(let v=0;v<r;v++){const b=d[p][v+1],x=d[p][v],_=d[p+1][v],A=d[p+1][v+1];(p!==0||a>0)&&f.push(b,x,A),(p!==n-1||l<Math.PI)&&f.push(x,_,A)}this.setIndex(f),this.setAttribute("position",new Wt(g,3)),this.setAttribute("normal",new Wt(y,3)),this.setAttribute("uv",new Wt(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new yM(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class BR extends Zp{constructor(t=1,r=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,t,r),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new BR(t.radius,t.detail)}}class NR extends Er{constructor(t=1,r=.4,n=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:r,radialSegments:n,tubularSegments:i,arc:o},n=Math.floor(n),i=Math.floor(i);const a=[],s=[],l=[],u=[],d=new pe,c=new pe,h=new pe;for(let f=0;f<=n;f++)for(let g=0;g<=i;g++){const y=g/i*o,m=f/n*Math.PI*2;c.x=(t+r*Math.cos(m))*Math.cos(y),c.y=(t+r*Math.cos(m))*Math.sin(y),c.z=r*Math.sin(m),s.push(c.x,c.y,c.z),d.x=t*Math.cos(y),d.y=t*Math.sin(y),h.subVectors(c,d).normalize(),l.push(h.x,h.y,h.z),u.push(g/i),u.push(f/n)}for(let f=1;f<=n;f++)for(let g=1;g<=i;g++){const y=(i+1)*f+g-1,m=(i+1)*(f-1)+g-1,p=(i+1)*(f-1)+g,v=(i+1)*f+g;a.push(y,m,v),a.push(m,p,v)}this.setIndex(a),this.setAttribute("position",new Wt(s,3)),this.setAttribute("normal",new Wt(l,3)),this.setAttribute("uv",new Wt(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new NR(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class kR extends Er{constructor(t=1,r=.4,n=64,i=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:r,tubularSegments:n,radialSegments:i,p:o,q:a},n=Math.floor(n),i=Math.floor(i);const s=[],l=[],u=[],d=[],c=new pe,h=new pe,f=new pe,g=new pe,y=new pe,m=new pe,p=new pe;for(let b=0;b<=n;++b){const x=b/n*o*Math.PI*2;v(x,o,a,t,f),v(x+.01,o,a,t,g),m.subVectors(g,f),p.addVectors(g,f),y.crossVectors(m,p),p.crossVectors(y,m),y.normalize(),p.normalize();for(let _=0;_<=i;++_){const A=_/i*Math.PI*2,M=-r*Math.cos(A),T=r*Math.sin(A);c.x=f.x+(M*p.x+T*y.x),c.y=f.y+(M*p.y+T*y.y),c.z=f.z+(M*p.z+T*y.z),l.push(c.x,c.y,c.z),h.subVectors(c,f).normalize(),u.push(h.x,h.y,h.z),d.push(b/n),d.push(_/i)}}for(let b=1;b<=n;b++)for(let x=1;x<=i;x++){const _=(i+1)*(b-1)+(x-1),A=(i+1)*b+(x-1),M=(i+1)*b+x,T=(i+1)*(b-1)+x;s.push(_,A,T),s.push(A,M,T)}this.setIndex(s),this.setAttribute("position",new Wt(l,3)),this.setAttribute("normal",new Wt(u,3)),this.setAttribute("uv",new Wt(d,2));function v(b,x,_,A,M){const T=Math.cos(b),C=Math.sin(b),E=_/x*b,D=Math.cos(E);M.x=A*(2+D)*.5*T,M.y=A*(2+D)*C*.5,M.z=A*Math.sin(E)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new kR(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class FR extends Er{constructor(t=new lV(new pe(-1,-1,0),new pe(-1,1,0),new pe(1,1,0)),r=64,n=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:r,radius:n,radialSegments:i,closed:o};const a=t.computeFrenetFrames(r,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new pe,l=new pe,u=new lt;let d=new pe;const c=[],h=[],f=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new Wt(c,3)),this.setAttribute("normal",new Wt(h,3)),this.setAttribute("uv",new Wt(f,2));function y(){for(let b=0;b<r;b++)m(b);m(o===!1?r:0),v(),p()}function m(b){d=t.getPointAt(b/r,d);const x=a.normals[b],_=a.binormals[b];for(let A=0;A<=i;A++){const M=A/i*Math.PI*2,T=Math.sin(M),C=-Math.cos(M);l.x=C*x.x+T*_.x,l.y=C*x.y+T*_.y,l.z=C*x.z+T*_.z,l.normalize(),h.push(l.x,l.y,l.z),s.x=d.x+n*l.x,s.y=d.y+n*l.y,s.z=d.z+n*l.z,c.push(s.x,s.y,s.z)}}function p(){for(let b=1;b<=r;b++)for(let x=1;x<=i;x++){const _=(i+1)*(b-1)+(x-1),A=(i+1)*b+(x-1),M=(i+1)*b+x,T=(i+1)*(b-1)+x;g.push(_,A,T),g.push(A,M,T)}}function v(){for(let b=0;b<=r;b++)for(let x=0;x<=i;x++)u.x=b/r,u.y=x/i,f.push(u.x,u.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new FR(new wD[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class Zte extends Er{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const r=[],n=new Set,i=new pe,o=new pe;if(t.index!==null){const a=t.attributes.position,s=t.index;let l=t.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let u=0,d=l.length;u<d;++u){const c=l[u],h=c.start,f=c.count;for(let g=h,y=h+f;g<y;g+=3)for(let m=0;m<3;m++){const p=s.getX(g+m),v=s.getX(g+(m+1)%3);i.fromBufferAttribute(a,p),o.fromBufferAttribute(a,v),t8(i,o,n)===!0&&(r.push(i.x,i.y,i.z),r.push(o.x,o.y,o.z))}}}else{const a=t.attributes.position;for(let s=0,l=a.count/3;s<l;s++)for(let u=0;u<3;u++){const d=3*s+u,c=3*s+(u+1)%3;i.fromBufferAttribute(a,d),o.fromBufferAttribute(a,c),t8(i,o,n)===!0&&(r.push(i.x,i.y,i.z),r.push(o.x,o.y,o.z))}}this.setAttribute("position",new Wt(r,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function t8(e,t,r){const n=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return r.has(n)===!0||r.has(i)===!0?!1:(r.add(n),r.add(i),!0)}var r8=Object.freeze({__proto__:null,BoxGeometry:E0,CapsuleGeometry:CR,CircleGeometry:TR,ConeGeometry:ER,CylinderGeometry:c1,DodecahedronGeometry:PR,EdgesGeometry:Yte,ExtrudeGeometry:OR,IcosahedronGeometry:RR,LatheGeometry:gM,OctahedronGeometry:vM,PlaneGeometry:hM,PolyhedronGeometry:Zp,RingGeometry:IR,ShapeGeometry:LR,SphereGeometry:yM,TetrahedronGeometry:BR,TorusGeometry:NR,TorusKnotGeometry:kR,TubeGeometry:FR,WireframeGeometry:Zte});class $te extends Hi{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Dt(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class ere extends td{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class bM extends Hi{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Dt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class cd extends bM{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Dt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class tre extends Hi{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dt(16777215),this.specular=new Dt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=aM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class rre extends Hi{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Dt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class nre extends Hi{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class ire extends Hi{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=aM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ore extends Hi{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Dt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qp,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class are extends ca{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Ig(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function sre(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lre(e){function t(i,o){return e[i]-e[o]}const r=e.length,n=new Array(r);for(let i=0;i!==r;++i)n[i]=i;return n.sort(t),n}function KF(e,t,r){const n=e.length,i=new e.constructor(n);for(let o=0,a=0;a!==n;++o){const s=r[o]*t;for(let l=0;l!==t;++l)i[a++]=e[s+l]}return i}function cV(e,t,r,n){let i=1,o=e[0];for(;o!==void 0&&o[n]===void 0;)o=e[i++];if(o===void 0)return;let a=o[n];if(a!==void 0)if(Array.isArray(a))do a=o[n],a!==void 0&&(t.push(o.time),r.push.apply(r,a)),o=e[i++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[n],a!==void 0&&(t.push(o.time),a.toArray(r,r.length)),o=e[i++];while(o!==void 0);else do a=o[n],a!==void 0&&(t.push(o.time),r.push(a)),o=e[i++];while(o!==void 0)}function R_e(e,t,r,n,i=30){const o=e.clone();o.name=t;const a=[];for(let l=0;l<o.tracks.length;++l){const u=o.tracks[l],d=u.getValueSize(),c=[],h=[];for(let f=0;f<u.times.length;++f){const g=u.times[f]*i;if(!(g<r||g>=n)){c.push(u.times[f]);for(let y=0;y<d;++y)h.push(u.values[f*d+y])}}c.length!==0&&(u.times=Ig(c,u.times.constructor),u.values=Ig(h,u.values.constructor),a.push(u))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o}function I_e(e,t=0,r=e,n=30){n<=0&&(n=30);const i=r.tracks.length,o=t/n;for(let a=0;a<i;++a){const s=r.tracks[a],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const u=e.tracks.find(function(p){return p.name===s.name&&p.ValueTypeName===l});if(u===void 0)continue;let d=0;const c=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=c/3);let h=0;const f=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const g=s.times.length-1;let y;if(o<=s.times[0]){const p=d,v=c-d;y=s.values.slice(p,v)}else if(o>=s.times[g]){const p=g*c+d,v=p+c-d;y=s.values.slice(p,v)}else{const p=s.createInterpolant(),v=d,b=c-d;p.evaluate(o),y=p.resultBuffer.slice(v,b)}l==="quaternion"&&new To().fromArray(y).normalize().conjugate().toArray(y);const m=u.times.length;for(let p=0;p<m;++p){const v=p*f+h;if(l==="quaternion")To.multiplyQuaternionsFlat(u.values,v,y,0,u.values,v);else{const b=f-h*2;for(let x=0;x<b;++x)u.values[v+x]-=y[x]}}}return e.blendMode=k4,e}const L_e={convertArray:Ig,isTypedArray:sre,getKeyframeOrder:lre,sortedArray:KF,flattenJSON:cV,subclip:R_e,makeClipAdditive:I_e};class d1{constructor(t,r,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new r.constructor(n),this.sampleValues=r,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let n=this._cachedIndex,i=r[n],o=r[n-1];e:{t:{let a;r:{n:if(!(t<i)){for(let s=n+2;;){if(i===void 0){if(t<o)break n;return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(o=i,i=r[++n],t<i)break t}a=r.length;break r}if(!(t>=o)){const s=r[1];t<s&&(n=2,o=s);for(let l=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=o,o=r[--n-1],t>=o)break t}a=n,n=0;break r}break e}for(;n<a;){const s=n+a>>>1;t<r[s]?a=s:n=s+1}if(i=r[n],o=r[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,i)}return this.interpolate_(n,o,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=t*i;for(let a=0;a!==i;++a)r[a]=n[o+a];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ure extends d1{constructor(t,r,n,i){super(t,r,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dg,endingEnd:Dg}}intervalChanged_(t,r,n){const i=this.parameterPositions;let o=t-2,a=t+1,s=i[o],l=i[a];if(s===void 0)switch(this.getSettings_().endingStart){case Og:o=t,s=2*r-n;break;case fA:o=i.length-2,s=r+i[o]-i[o+1];break;default:o=t,s=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Og:a=t,l=2*n-r;break;case fA:a=1,l=n+i[1]-i[0];break;default:a=t-1,l=r}const u=(n-r)*.5,d=this.valueSize;this._weightPrev=u/(r-s),this._weightNext=u/(l-n),this._offsetPrev=o*d,this._offsetNext=a*d}interpolate_(t,r,n,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=t*s,u=l-s,d=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,g=(n-r)/(i-r),y=g*g,m=y*g,p=-h*m+2*h*y-h*g,v=(1+h)*m+(-1.5-2*h)*y+(-.5+h)*g+1,b=(-1-f)*m+(1.5+f)*y+.5*g,x=f*m-f*y;for(let _=0;_!==s;++_)o[_]=p*a[d+_]+v*a[u+_]+b*a[l+_]+x*a[c+_];return o}}class dV extends d1{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t,r,n,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=t*s,u=l-s,d=(n-r)/(i-r),c=1-d;for(let h=0;h!==s;++h)o[h]=a[u+h]*c+a[l+h]*d;return o}}class cre extends d1{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Qu{constructor(t,r,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ig(r,this.TimeBufferType),this.values=Ig(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let n;if(r.toJSON!==this.toJSON)n=r.toJSON(t);else{n={name:t.name,times:Ig(t.times,Array),values:Ig(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new cre(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new dV(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new ure(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case wx:r=this.InterpolantFactoryMethodDiscrete;break;case d0:r=this.InterpolantFactoryMethodLinear;break;case v2:r=this.InterpolantFactoryMethodSmooth;break}if(r===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wx;case this.InterpolantFactoryMethodLinear:return d0;case this.InterpolantFactoryMethodSmooth:return v2}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]+=t}return this}scale(t){if(t!==1){const r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]*=t}return this}trim(t,r){const n=this.times,i=n.length;let o=0,a=i-1;for(;o!==i&&n[o]<t;)++o;for(;a!==-1&&n[a]>r;)--a;if(++a,o!==0||a!==i){o>=a&&(a=Math.max(a,1),o=a-1);const s=this.getValueSize();this.times=n.slice(o,a),this.values=this.values.slice(o*s,a*s)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let s=0;s!==o;s++){const l=n[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),t=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,a),t=!1;break}a=l}if(i!==void 0&&sre(i))for(let s=0,l=i.length;s!==l;++s){const u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),t=!1;break}}return t}optimize(){const t=this.times.slice(),r=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===v2,o=t.length-1;let a=1;for(let s=1;s<o;++s){let l=!1;const u=t[s],d=t[s+1];if(u!==d&&(s!==1||u!==t[0]))if(i)l=!0;else{const c=s*n,h=c-n,f=c+n;for(let g=0;g!==n;++g){const y=r[c+g];if(y!==r[h+g]||y!==r[f+g]){l=!0;break}}}if(l){if(s!==a){t[a]=t[s];const c=s*n,h=a*n;for(let f=0;f!==n;++f)r[h+f]=r[c+f]}++a}}if(o>0){t[a]=t[o];for(let s=o*n,l=a*n,u=0;u!==n;++u)r[l+u]=r[s+u];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=r.slice(0,a*n)):(this.times=t,this.values=r),this}clone(){const t=this.times.slice(),r=this.values.slice(),n=this.constructor,i=new n(this.name,t,r);return i.createInterpolant=this.createInterpolant,i}}Qu.prototype.TimeBufferType=Float32Array;Qu.prototype.ValueBufferType=Float32Array;Qu.prototype.DefaultInterpolation=d0;class P0 extends Qu{}P0.prototype.ValueTypeName="bool";P0.prototype.ValueBufferType=Array;P0.prototype.DefaultInterpolation=wx;P0.prototype.InterpolantFactoryMethodLinear=void 0;P0.prototype.InterpolantFactoryMethodSmooth=void 0;class hV extends Qu{}hV.prototype.ValueTypeName="color";class Cx extends Qu{}Cx.prototype.ValueTypeName="number";class dre extends d1{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t,r,n,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=(n-r)/(i-r);let u=t*s;for(let d=u+s;u!==d;u+=4)To.slerpFlat(o,0,a,u-s,a,u,l);return o}}class Up extends Qu{InterpolantFactoryMethodLinear(t){return new dre(this.times,this.values,this.getValueSize(),t)}}Up.prototype.ValueTypeName="quaternion";Up.prototype.DefaultInterpolation=d0;Up.prototype.InterpolantFactoryMethodSmooth=void 0;class D0 extends Qu{}D0.prototype.ValueTypeName="string";D0.prototype.ValueBufferType=Array;D0.prototype.DefaultInterpolation=wx;D0.prototype.InterpolantFactoryMethodLinear=void 0;D0.prototype.InterpolantFactoryMethodSmooth=void 0;class Tx extends Qu{}Tx.prototype.ValueTypeName="vector";class Ex{constructor(t,r=-1,n,i=vR){this.name=t,this.tracks=n,this.duration=r,this.blendMode=i,this.uuid=rl(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],n=t.tracks,i=1/(t.fps||1);for(let a=0,s=n.length;a!==s;++a)r.push(N_e(n[a]).scale(i));const o=new this(t.name,t.duration,r,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const r=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,a=n.length;o!==a;++o)r.push(Qu.toJSON(n[o]));return i}static CreateFromMorphTargetSequence(t,r,n,i){const o=r.length,a=[];for(let s=0;s<o;s++){let l=[],u=[];l.push((s+o-1)%o,s,(s+1)%o),u.push(0,1,0);const d=lre(l);l=KF(l,1,d),u=KF(u,1,d),!i&&l[0]===0&&(l.push(o),u.push(u[0])),a.push(new Cx(".morphTargetInfluences["+r[s].name+"]",l,u).scale(1/n))}return new this(t,-1,a)}static findByName(t,r){let n=t;if(!Array.isArray(t)){const i=t;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===r)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,r,n){const i={},o=/^([\w-]*?)([\d]+)$/;for(let s=0,l=t.length;s<l;s++){const u=t[s],d=u.name.match(o);if(d&&d.length>1){const c=d[1];let h=i[c];h||(i[c]=h=[]),h.push(u)}}const a=[];for(const s in i)a.push(this.CreateFromMorphTargetSequence(s,i[s],r,n));return a}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(c,h,f,g,y){if(f.length!==0){const m=[],p=[];cV(f,m,p,g),m.length!==0&&y.push(new c(h,m,p))}},i=[],o=t.name||"default",a=t.fps||30,s=t.blendMode;let l=t.length||-1;const u=t.hierarchy||[];for(let c=0;c<u.length;c++){const h=u[c].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const f={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let y=0;y<h[g].morphTargets.length;y++)f[h[g].morphTargets[y]]=-1;for(const y in f){const m=[],p=[];for(let v=0;v!==h[g].morphTargets.length;++v){const b=h[g];m.push(b.time),p.push(b.morphTarget===y?1:0)}i.push(new Cx(".morphTargetInfluence["+y+"]",m,p))}l=f.length*a}else{const f=".bones["+r[c].name+"]";n(Tx,f+".position",h,"pos",i),n(Up,f+".quaternion",h,"rot",i),n(Tx,f+".scale",h,"scl",i)}}return i.length===0?null:new this(o,l,i,s)}resetDuration(){const t=this.tracks;let r=0;for(let n=0,i=t.length;n!==i;++n){const o=this.tracks[n];r=Math.max(r,o.times[o.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function B_e(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cx;case"vector":case"vector2":case"vector3":case"vector4":return Tx;case"color":return hV;case"quaternion":return Up;case"bool":case"boolean":return P0;case"string":return D0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function N_e(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=B_e(e.type);if(e.times===void 0){const r=[],n=[];cV(e.keys,r,n,"value"),e.times=r,e.values=n}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const f0={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class fV{constructor(t,r,n){const i=this;let o=!1,a=0,s=0,l;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=n,this.itemStart=function(d){s++,o===!1&&i.onStart!==void 0&&i.onStart(d,a,s),o=!0},this.itemEnd=function(d){a++,i.onProgress!==void 0&&i.onProgress(d,a,s),a===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,c){return u.push(d,c),this},this.removeHandler=function(d){const c=u.indexOf(d);return c!==-1&&u.splice(c,2),this},this.getHandler=function(d){for(let c=0,h=u.length;c<h;c+=2){const f=u[c],g=u[c+1];if(f.global&&(f.lastIndex=0),f.test(d))return g}return null}}}const yb=new fV;class da{constructor(t){this.manager=t!==void 0?t:yb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){const n=this;return new Promise(function(i,o){n.load(t,i,r,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}da.DEFAULT_MATERIAL_NAME="__DEFAULT";const Id={};class k_e extends Error{constructor(t,r){super(t),this.response=r}}class al extends da{constructor(t){super(t)}load(t,r,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=f0.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{r&&r(o),this.manager.itemEnd(t)},0),o;if(Id[t]!==void 0){Id[t].push({onLoad:r,onProgress:n,onError:i});return}Id[t]=[],Id[t].push({onLoad:r,onProgress:n,onError:i});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Id[t],c=u.body.getReader(),h=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),f=h?parseInt(h):0,g=f!==0;let y=0;const m=new ReadableStream({start(p){v();function v(){c.read().then(({done:b,value:x})=>{if(b)p.close();else{y+=x.byteLength;const _=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:f});for(let A=0,M=d.length;A<M;A++){const T=d[A];T.onProgress&&T.onProgress(_)}p.enqueue(x),v()}})}}});return new Response(m)}else throw new k_e(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,s));case"json":return u.json();default:if(s===void 0)return u.text();{const c=/charset="?([^;"\s]*)"?/i.exec(s),h=c&&c[1]?c[1].toLowerCase():void 0,f=new TextDecoder(h);return u.arrayBuffer().then(g=>f.decode(g))}}}).then(u=>{f0.add(t,u);const d=Id[t];delete Id[t];for(let c=0,h=d.length;c<h;c++){const f=d[c];f.onLoad&&f.onLoad(u)}}).catch(u=>{const d=Id[t];if(d===void 0)throw this.manager.itemError(t),u;delete Id[t];for(let c=0,h=d.length;c<h;c++){const f=d[c];f.onError&&f.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class F_e extends da{constructor(t){super(t)}load(t,r,n,i){const o=this,a=new al(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(s){try{r(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(t)}},n,i)}parse(t){const r=[];for(let n=0;n<t.length;n++){const i=Ex.parse(t[n]);r.push(i)}return r}}class z_e extends da{constructor(t){super(t)}load(t,r,n,i){const o=this,a=[],s=new AR,l=new al(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let u=0;function d(c){l.load(t[c],function(h){const f=o.parse(h,!0);a[c]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},u+=1,u===6&&(f.mipmapCount===1&&(s.minFilter=Qn),s.image=a,s.format=f.format,s.needsUpdate=!0,r&&r(s))},n,i)}if(Array.isArray(t))for(let c=0,h=t.length;c<h;++c)d(c);else l.load(t,function(c){const h=o.parse(c,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let g=0;g<f;g++){a[g]={mipmaps:[]};for(let y=0;y<h.mipmapCount;y++)a[g].mipmaps.push(h.mipmaps[g*h.mipmapCount+y]),a[g].format=h.format,a[g].width=h.width,a[g].height=h.height}s.image=a}else s.image.width=h.width,s.image.height=h.height,s.mipmaps=h.mipmaps;h.mipmapCount===1&&(s.minFilter=Qn),s.format=h.format,s.needsUpdate=!0,r&&r(s)},n,i);return s}}class SA extends da{constructor(t){super(t)}load(t,r,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,a=f0.get(t);if(a!==void 0)return o.manager.itemStart(t),setTimeout(function(){r&&r(a),o.manager.itemEnd(t)},0),a;const s=yA("img");function l(){d(),f0.add(t,this),r&&r(this),o.manager.itemEnd(t)}function u(c){d(),i&&i(c),o.manager.itemError(t),o.manager.itemEnd(t)}function d(){s.removeEventListener("load",l,!1),s.removeEventListener("error",u,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(t),s.src=t,s}}class U_e extends da{constructor(t){super(t)}load(t,r,n,i){const o=new cM;o.colorSpace=ro;const a=new SA(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function l(u){a.load(t[u],function(d){o.images[u]=d,s++,s===6&&(o.needsUpdate=!0,r&&r(o))},void 0,i)}for(let u=0;u<t.length;++u)l(u);return o}}class V_e extends da{constructor(t){super(t)}load(t,r,n,i){const o=this,a=new Yg,s=new al(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(o.withCredentials),s.load(t,function(l){let u;try{u=o.parse(l)}catch(d){if(i!==void 0)i(d);else{console.error(d);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:ko,a.wrapT=u.wrapT!==void 0?u.wrapT:ko,a.magFilter=u.magFilter!==void 0?u.magFilter:Qn,a.minFilter=u.minFilter!==void 0?u.minFilter:Qn,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?a.colorSpace=u.colorSpace:u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=$c),u.mipmapCount===1&&(a.minFilter=Qn),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,r&&r(a,u)},n,i),a}}class hre extends da{constructor(t){super(t)}load(t,r,n,i){const o=new Wn,a=new SA(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(s){o.image=s,o.needsUpdate=!0,r!==void 0&&r(o)},n,i),o}}class $p extends Qr{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),r}}class fre extends $p{constructor(t,r,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Dt(r)}copy(t,r){return super.copy(t,r),this.groundColor.copy(t.groundColor),this}}const yL=new pr,n8=new pe,i8=new pe;class pV{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.map=null,this.mapPass=null,this.matrix=new pr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new dM,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,n=this.matrix;n8.setFromMatrixPosition(t.matrixWorld),r.position.copy(n8),i8.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(i8),r.updateMatrixWorld(),yL.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yL),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(yL)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class j_e extends pV{constructor(){super(new kn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const r=this.camera,n=Sx*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=t.distance||r.far;(n!==r.fov||i!==r.aspect||o!==r.far)&&(r.fov=n,r.aspect=i,r.far=o,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class mV extends $p{constructor(t,r,n=0,i=Math.PI/3,o=0,a=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qr.DEFAULT_UP),this.updateMatrix(),this.target=new Qr,this.distance=n,this.angle=i,this.penumbra=o,this.decay=a,this.map=null,this.shadow=new j_e}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const o8=new pr,n_=new pe,bL=new pe;class H_e extends pV{constructor(){super(new kn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new lt(4,2),this._viewportCount=6,this._viewports=[new mn(2,1,1,1),new mn(0,1,1,1),new mn(3,1,1,1),new mn(1,1,1,1),new mn(3,0,1,1),new mn(1,0,1,1)],this._cubeDirections=[new pe(1,0,0),new pe(-1,0,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,1,0),new pe(0,-1,0)],this._cubeUps=[new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,0,1),new pe(0,0,-1)]}updateMatrices(t,r=0){const n=this.camera,i=this.matrix,o=t.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),n_.setFromMatrixPosition(t.matrixWorld),n.position.copy(n_),bL.copy(n.position),bL.add(this._cubeDirections[r]),n.up.copy(this._cubeUps[r]),n.lookAt(bL),n.updateMatrixWorld(),i.makeTranslation(-n_.x,-n_.y,-n_.z),o8.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o8)}}class gV extends $p{constructor(t,r,n=0,i=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new H_e}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class G_e extends pV{constructor(){super(new Hl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class vV extends $p{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qr.DEFAULT_UP),this.updateMatrix(),this.target=new Qr,this.shadow=new G_e}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class pre extends $p{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class mre extends $p{constructor(t,r,n=10,i=10){super(t,r),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const r=super.toJSON(t);return r.object.width=this.width,r.object.height=this.height,r}}class gre{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new pe)}set(t){for(let r=0;r<9;r++)this.coefficients[r].copy(t[r]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,r){const n=t.x,i=t.y,o=t.z,a=this.coefficients;return r.copy(a[0]).multiplyScalar(.282095),r.addScaledVector(a[1],.488603*i),r.addScaledVector(a[2],.488603*o),r.addScaledVector(a[3],.488603*n),r.addScaledVector(a[4],1.092548*(n*i)),r.addScaledVector(a[5],1.092548*(i*o)),r.addScaledVector(a[6],.315392*(3*o*o-1)),r.addScaledVector(a[7],1.092548*(n*o)),r.addScaledVector(a[8],.546274*(n*n-i*i)),r}getIrradianceAt(t,r){const n=t.x,i=t.y,o=t.z,a=this.coefficients;return r.copy(a[0]).multiplyScalar(.886227),r.addScaledVector(a[1],2*.511664*i),r.addScaledVector(a[2],2*.511664*o),r.addScaledVector(a[3],2*.511664*n),r.addScaledVector(a[4],2*.429043*n*i),r.addScaledVector(a[5],2*.429043*i*o),r.addScaledVector(a[6],.743125*o*o-.247708),r.addScaledVector(a[7],2*.429043*n*o),r.addScaledVector(a[8],.429043*(n*n-i*i)),r}add(t){for(let r=0;r<9;r++)this.coefficients[r].add(t.coefficients[r]);return this}addScaledSH(t,r){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],r);return this}scale(t){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(t);return this}lerp(t,r){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],r);return this}equals(t){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(t.coefficients[r]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,r=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,r+i*3);return this}toArray(t=[],r=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,r+i*3);return t}static getBasisAt(t,r){const n=t.x,i=t.y,o=t.z;r[0]=.282095,r[1]=.488603*i,r[2]=.488603*o,r[3]=.488603*n,r[4]=1.092548*n*i,r[5]=1.092548*i*o,r[6]=.315392*(3*o*o-1),r[7]=1.092548*n*o,r[8]=.546274*(n*n-i*i)}}class vre extends $p{constructor(t=new gre,r=1){super(void 0,r),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const r=super.toJSON(t);return r.object.sh=this.sh.toArray(),r}}class zR extends da{constructor(t){super(t),this.textures={}}load(t,r,n,i){const o=this,a=new al(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(t,function(s){try{r(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(t)}},n,i)}parse(t){const r=this.textures;function n(o){return r[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),r[o]}const i=zR.createMaterialFromType(t.type);if(t.uuid!==void 0&&(i.uuid=t.uuid),t.name!==void 0&&(i.name=t.name),t.color!==void 0&&i.color!==void 0&&i.color.setHex(t.color),t.roughness!==void 0&&(i.roughness=t.roughness),t.metalness!==void 0&&(i.metalness=t.metalness),t.sheen!==void 0&&(i.sheen=t.sheen),t.sheenColor!==void 0&&(i.sheenColor=new Dt().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(i.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(t.emissive),t.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(t.specular),t.specularIntensity!==void 0&&(i.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(i.shininess=t.shininess),t.clearcoat!==void 0&&(i.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=t.clearcoatRoughness),t.iridescence!==void 0&&(i.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(i.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(i.transmission=t.transmission),t.thickness!==void 0&&(i.thickness=t.thickness),t.attenuationDistance!==void 0&&(i.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(i.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(i.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(i.fog=t.fog),t.flatShading!==void 0&&(i.flatShading=t.flatShading),t.blending!==void 0&&(i.blending=t.blending),t.combine!==void 0&&(i.combine=t.combine),t.side!==void 0&&(i.side=t.side),t.shadowSide!==void 0&&(i.shadowSide=t.shadowSide),t.opacity!==void 0&&(i.opacity=t.opacity),t.transparent!==void 0&&(i.transparent=t.transparent),t.alphaTest!==void 0&&(i.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(i.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(i.depthFunc=t.depthFunc),t.depthTest!==void 0&&(i.depthTest=t.depthTest),t.depthWrite!==void 0&&(i.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(i.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(i.blendSrc=t.blendSrc),t.blendDst!==void 0&&(i.blendDst=t.blendDst),t.blendEquation!==void 0&&(i.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(i.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(i.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(i.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(i.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(i.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(i.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(i.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(i.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(i.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(i.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(i.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(i.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(i.rotation=t.rotation),t.linewidth!==void 0&&(i.linewidth=t.linewidth),t.dashSize!==void 0&&(i.dashSize=t.dashSize),t.gapSize!==void 0&&(i.gapSize=t.gapSize),t.scale!==void 0&&(i.scale=t.scale),t.polygonOffset!==void 0&&(i.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(i.dithering=t.dithering),t.alphaToCoverage!==void 0&&(i.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(i.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(i.visible=t.visible),t.toneMapped!==void 0&&(i.toneMapped=t.toneMapped),t.userData!==void 0&&(i.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const o in t.uniforms){const a=t.uniforms[o];switch(i.uniforms[o]={},a.type){case"t":i.uniforms[o].value=n(a.value);break;case"c":i.uniforms[o].value=new Dt().setHex(a.value);break;case"v2":i.uniforms[o].value=new lt().fromArray(a.value);break;case"v3":i.uniforms[o].value=new pe().fromArray(a.value);break;case"v4":i.uniforms[o].value=new mn().fromArray(a.value);break;case"m3":i.uniforms[o].value=new Br().fromArray(a.value);break;case"m4":i.uniforms[o].value=new pr().fromArray(a.value);break;default:i.uniforms[o].value=a.value}}if(t.defines!==void 0&&(i.defines=t.defines),t.vertexShader!==void 0&&(i.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(i.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(i.glslVersion=t.glslVersion),t.extensions!==void 0)for(const o in t.extensions)i.extensions[o]=t.extensions[o];if(t.lights!==void 0&&(i.lights=t.lights),t.clipping!==void 0&&(i.clipping=t.clipping),t.size!==void 0&&(i.size=t.size),t.sizeAttenuation!==void 0&&(i.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(i.map=n(t.map)),t.matcap!==void 0&&(i.matcap=n(t.matcap)),t.alphaMap!==void 0&&(i.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(i.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(i.bumpScale=t.bumpScale),t.normalMap!==void 0&&(i.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(i.normalMapType=t.normalMapType),t.normalScale!==void 0){let o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new lt().fromArray(o)}return t.displacementMap!==void 0&&(i.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(i.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(i.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(i.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(i.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(i.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(i.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(i.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(i.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(i.envMap=n(t.envMap)),t.envMapIntensity!==void 0&&(i.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(i.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(i.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(i.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(i.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(i.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(i.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(i.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(i.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new lt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(i.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(i.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(i.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(i.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(i.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){const r={ShadowMaterial:$te,SpriteMaterial:$4,RawShaderMaterial:ere,ShaderMaterial:td,PointsMaterial:mM,MeshPhysicalMaterial:cd,MeshStandardMaterial:bM,MeshPhongMaterial:tre,MeshToonMaterial:rre,MeshNormalMaterial:nre,MeshLambertMaterial:ire,MeshDepthMaterial:J4,MeshDistanceMaterial:Q4,MeshBasicMaterial:Js,MeshMatcapMaterial:ore,LineDashedMaterial:are,LineBasicMaterial:ca,Material:Hi};return new r[t]}}class Yc{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let r="";for(let n=0,i=t.length;n<i;n++)r+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return r===-1?"./":t.slice(0,r+1)}static resolveURL(t,r){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}class yre extends Er{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class bre extends da{constructor(t){super(t)}load(t,r,n,i){const o=this,a=new al(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(t,function(s){try{r(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(t)}},n,i)}parse(t){const r={},n={};function i(f,g){if(r[g]!==void 0)return r[g];const m=f.interleavedBuffers[g],p=o(f,m.buffer),v=mb(m.type,p),b=new fM(v,m.stride);return b.uuid=m.uuid,r[g]=b,b}function o(f,g){if(n[g]!==void 0)return n[g];const m=f.arrayBuffers[g],p=new Uint32Array(m).buffer;return n[g]=p,p}const a=t.isInstancedBufferGeometry?new yre:new Er,s=t.data.index;if(s!==void 0){const f=mb(s.type,s.array);a.setIndex(new Zr(f,1))}const l=t.data.attributes;for(const f in l){const g=l[f];let y;if(g.isInterleavedBufferAttribute){const m=i(t.data,g.data);y=new zp(m,g.itemSize,g.offset,g.normalized)}else{const m=mb(g.type,g.array),p=g.isInstancedBufferAttribute?Mx:Zr;y=new p(m,g.itemSize,g.normalized)}g.name!==void 0&&(y.name=g.name),g.usage!==void 0&&y.setUsage(g.usage),a.setAttribute(f,y)}const u=t.data.morphAttributes;if(u)for(const f in u){const g=u[f],y=[];for(let m=0,p=g.length;m<p;m++){const v=g[m];let b;if(v.isInterleavedBufferAttribute){const x=i(t.data,v.data);b=new zp(x,v.itemSize,v.offset,v.normalized)}else{const x=mb(v.type,v.array);b=new Zr(x,v.itemSize,v.normalized)}v.name!==void 0&&(b.name=v.name),y.push(b)}a.morphAttributes[f]=y}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const c=t.data.groups||t.data.drawcalls||t.data.offsets;if(c!==void 0)for(let f=0,g=c.length;f!==g;++f){const y=c[f];a.addGroup(y.start,y.count,y.materialIndex)}const h=t.data.boundingSphere;if(h!==void 0){const f=new pe;h.center!==void 0&&f.fromArray(h.center),a.boundingSphere=new zo(f,h.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class W_e extends da{constructor(t){super(t)}load(t,r,n,i){const o=this,a=this.path===""?Yc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const s=new al(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(l){let u=null;try{u=JSON.parse(l)}catch(c){i!==void 0&&i(c),console.error("THREE:ObjectLoader: Can't parse "+t+".",c.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}o.parse(u,r)},n,i)}async loadAsync(t,r){const n=this,i=this.path===""?Yc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||i;const o=new al(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(t,r),s=JSON.parse(a),l=s.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(s)}parse(t,r){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,i),a=this.parseImages(t.images,function(){r!==void 0&&r(u)}),s=this.parseTextures(t.textures,a),l=this.parseMaterials(t.materials,s),u=this.parseObject(t.object,o,l,s,n),d=this.parseSkeletons(t.skeletons,u);if(this.bindSkeletons(u,d),r!==void 0){let c=!1;for(const h in a)if(a[h].data instanceof HTMLImageElement){c=!0;break}c===!1&&r(u)}return u}async parseAsync(t){const r=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),o=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,i,s,a,r),u=this.parseSkeletons(t.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(t){const r={};if(t!==void 0)for(let n=0,i=t.length;n<i;n++){const o=new Kg().fromJSON(t[n]);r[o.uuid]=o}return r}parseSkeletons(t,r){const n={},i={};if(r.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),t!==void 0)for(let o=0,a=t.length;o<a;o++){const s=new pM().fromJSON(t[o],i);n[s.uuid]=s}return n}parseGeometries(t,r){const n={};if(t!==void 0){const i=new bre;for(let o=0,a=t.length;o<a;o++){let s;const l=t[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(l);break;default:l.type in r8?s=r8[l.type].fromJSON(l,r):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}s.uuid=l.uuid,l.name!==void 0&&(s.name=l.name),l.userData!==void 0&&(s.userData=l.userData),n[l.uuid]=s}}return n}parseMaterials(t,r){const n={},i={};if(t!==void 0){const o=new zR;o.setTextures(r);for(let a=0,s=t.length;a<s;a++){const l=t[a];n[l.uuid]===void 0&&(n[l.uuid]=o.parse(l)),i[l.uuid]=n[l.uuid]}}return i}parseAnimations(t){const r={};if(t!==void 0)for(let n=0;n<t.length;n++){const i=t[n],o=Ex.parse(i);r[o.uuid]=o}return r}parseImages(t,r){const n=this,i={};let o;function a(l){return n.manager.itemStart(l),o.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function s(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return a(d)}else return l.data?{data:mb(l.type,l.data),width:l.width,height:l.height}:null}if(t!==void 0&&t.length>0){const l=new fV(r);o=new SA(l),o.setCrossOrigin(this.crossOrigin);for(let u=0,d=t.length;u<d;u++){const c=t[u],h=c.url;if(Array.isArray(h)){const f=[];for(let g=0,y=h.length;g<y;g++){const m=h[g],p=s(m);p!==null&&(p instanceof HTMLImageElement?f.push(p):f.push(new Yg(p.data,p.width,p.height)))}i[c.uuid]=new Rg(f)}else{const f=s(c.url);i[c.uuid]=new Rg(f)}}}return i}async parseImagesAsync(t){const r=this,n={};let i;async function o(a){if(typeof a=="string"){const s=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s)?s:r.resourcePath+s;return await i.loadAsync(l)}else return a.data?{data:mb(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){i=new SA(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,s=t.length;a<s;a++){const l=t[a],u=l.url;if(Array.isArray(u)){const d=[];for(let c=0,h=u.length;c<h;c++){const f=u[c],g=await o(f);g!==null&&(g instanceof HTMLImageElement?d.push(g):d.push(new Yg(g.data,g.width,g.height)))}n[l.uuid]=new Rg(d)}else{const d=await o(l.url);n[l.uuid]=new Rg(d)}}}return n}parseTextures(t,r){function n(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const i={};if(t!==void 0)for(let o=0,a=t.length;o<a;o++){const s=t[o];s.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),r[s.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const l=r[s.image],u=l.data;let d;Array.isArray(u)?(d=new cM,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Yg:d=new Wn,u&&(d.needsUpdate=!0)),d.source=l,d.uuid=s.uuid,s.name!==void 0&&(d.name=s.name),s.mapping!==void 0&&(d.mapping=n(s.mapping,q_e)),s.channel!==void 0&&(d.channel=s.channel),s.offset!==void 0&&d.offset.fromArray(s.offset),s.repeat!==void 0&&d.repeat.fromArray(s.repeat),s.center!==void 0&&d.center.fromArray(s.center),s.rotation!==void 0&&(d.rotation=s.rotation),s.wrap!==void 0&&(d.wrapS=n(s.wrap[0],a8),d.wrapT=n(s.wrap[1],a8)),s.format!==void 0&&(d.format=s.format),s.internalFormat!==void 0&&(d.internalFormat=s.internalFormat),s.type!==void 0&&(d.type=s.type),s.colorSpace!==void 0&&(d.colorSpace=s.colorSpace),s.encoding!==void 0&&(d.encoding=s.encoding),s.minFilter!==void 0&&(d.minFilter=n(s.minFilter,s8)),s.magFilter!==void 0&&(d.magFilter=n(s.magFilter,s8)),s.anisotropy!==void 0&&(d.anisotropy=s.anisotropy),s.flipY!==void 0&&(d.flipY=s.flipY),s.generateMipmaps!==void 0&&(d.generateMipmaps=s.generateMipmaps),s.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(d.unpackAlignment=s.unpackAlignment),s.compareFunction!==void 0&&(d.compareFunction=s.compareFunction),s.userData!==void 0&&(d.userData=s.userData),i[s.uuid]=d}return i}parseObject(t,r,n,i,o){let a;function s(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),r[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const f=[];for(let g=0,y=h.length;g<y;g++){const m=h[g];n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),f.push(n[m])}return f}return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),n[h]}}function u(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let d,c;switch(t.type){case"Scene":a=new xD,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new Dt(t.background):a.background=u(t.background)),t.environment!==void 0&&(a.environment=u(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new _R(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new wR(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity);break;case"PerspectiveCamera":a=new kn(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Hl(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new pre(t.color,t.intensity);break;case"DirectionalLight":a=new vV(t.color,t.intensity);break;case"PointLight":a=new gV(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new mre(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new mV(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new fre(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new vre().fromJSON(t);break;case"SkinnedMesh":d=s(t.geometry),c=l(t.material),a=new eV(d,c),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":d=s(t.geometry),c=l(t.material),a=new ji(d,c);break;case"InstancedMesh":d=s(t.geometry),c=l(t.material);const h=t.count,f=t.instanceMatrix,g=t.instanceColor;a=new tV(d,c,h),a.instanceMatrix=new Mx(new Float32Array(f.array),16),g!==void 0&&(a.instanceColor=new Mx(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":d=s(t.geometry),c=l(t.material),a=new jte(t.maxGeometryCount,t.maxVertexCount,t.maxIndexCount,c),a.geometry=d,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._visibility=t.visibility,a._active=t.active,a._bounds=t.bounds.map(y=>{const m=new oa;m.min.fromArray(y.boxMin),m.max.fromArray(y.boxMax);const p=new zo;return p.radius=y.sphereRadius,p.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:m,sphereInitialized:y.sphereInitialized,sphere:p}}),a._maxGeometryCount=t.maxGeometryCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._geometryCount=t.geometryCount,a._matricesTexture=u(t.matricesTexture.uuid);break;case"LOD":a=new Vte;break;case"Line":a=new Oh(s(t.geometry),l(t.material));break;case"LineLoop":a=new rV(s(t.geometry),l(t.material));break;case"LineSegments":a=new Ku(s(t.geometry),l(t.material));break;case"PointCloud":case"Points":a=new nV(s(t.geometry),l(t.material));break;case"Sprite":a=new Ute(l(t.material));break;case"Group":a=new ch;break;case"Bone":a=new SR;break;default:a=new Qr}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const h=t.children;for(let f=0;f<h.length;f++)a.add(this.parseObject(h[f],r,n,i,o))}if(t.animations!==void 0){const h=t.animations;for(let f=0;f<h.length;f++){const g=h[f];a.animations.push(o[g])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const h=t.levels;for(let f=0;f<h.length;f++){const g=h[f],y=a.getObjectByProperty("uuid",g.object);y!==void 0&&a.addLevel(y,g.distance,g.hysteresis)}}return a}bindSkeletons(t,r){Object.keys(r).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=r[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}}const q_e={UVMapping:pR,CubeReflectionMapping:Dh,CubeRefractionMapping:kp,EquirectangularReflectionMapping:cA,EquirectangularRefractionMapping:dA,CubeUVReflectionMapping:l1},a8={RepeatWrapping:Fp,ClampToEdgeWrapping:ko,MirroredRepeatWrapping:bx},s8={NearestFilter:fi,NearestMipmapNearestFilter:hA,NearestMipmapLinearFilter:Vb,LinearFilter:Qn,LinearMipmapNearestFilter:mR,LinearMipmapLinearFilter:$c};class xre extends da{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,a=f0.get(t);if(a!==void 0)return o.manager.itemStart(t),setTimeout(function(){r&&r(a),o.manager.itemEnd(t)},0),a;const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader,fetch(t,s).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){f0.add(t,l),r&&r(l),o.manager.itemEnd(t)}).catch(function(l){i&&i(l),o.manager.itemError(t),o.manager.itemEnd(t)}),o.manager.itemStart(t)}}let dE,yV=class{static getContext(){return dE===void 0&&(dE=new(window.AudioContext||window.webkitAudioContext)),dE}static setContext(t){dE=t}};class X_e extends da{constructor(t){super(t)}load(t,r,n,i){const o=this,a=new al(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{const u=l.slice(0);yV.getContext().decodeAudioData(u,function(c){r(c)}).catch(s)}catch(u){s(u)}},n,i);function s(l){i?i(l):console.error(l),o.manager.itemError(t)}}}const l8=new pr,u8=new pr,Wm=new pr;class Y_e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new kn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new kn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const r=this._cache;if(r.focus!==t.focus||r.fov!==t.fov||r.aspect!==t.aspect*this.aspect||r.near!==t.near||r.far!==t.far||r.zoom!==t.zoom||r.eyeSep!==this.eyeSep){r.focus=t.focus,r.fov=t.fov,r.aspect=t.aspect*this.aspect,r.near=t.near,r.far=t.far,r.zoom=t.zoom,r.eyeSep=this.eyeSep,Wm.copy(t.projectionMatrix);const i=r.eyeSep/2,o=i*r.near/r.focus,a=r.near*Math.tan(qg*r.fov*.5)/r.zoom;let s,l;u8.elements[12]=-i,l8.elements[12]=i,s=-a*r.aspect+o,l=a*r.aspect+o,Wm.elements[0]=2*r.near/(l-s),Wm.elements[8]=(l+s)/(l-s),this.cameraL.projectionMatrix.copy(Wm),s=-a*r.aspect-o,l=a*r.aspect-o,Wm.elements[0]=2*r.near/(l-s),Wm.elements[8]=(l+s)/(l-s),this.cameraR.projectionMatrix.copy(Wm)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(u8),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(l8)}}class bV{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=c8(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=c8();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}function c8(){return(typeof performance>"u"?Date:performance).now()}const qm=new pe,d8=new To,K_e=new pe,Xm=new pe;class J_e extends Qr{constructor(){super(),this.type="AudioListener",this.context=yV.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new bV}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const r=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(qm,d8,K_e),Xm.set(0,0,-1).applyQuaternion(d8),r.positionX){const i=this.context.currentTime+this.timeDelta;r.positionX.linearRampToValueAtTime(qm.x,i),r.positionY.linearRampToValueAtTime(qm.y,i),r.positionZ.linearRampToValueAtTime(qm.z,i),r.forwardX.linearRampToValueAtTime(Xm.x,i),r.forwardY.linearRampToValueAtTime(Xm.y,i),r.forwardZ.linearRampToValueAtTime(Xm.z,i),r.upX.linearRampToValueAtTime(n.x,i),r.upY.linearRampToValueAtTime(n.y,i),r.upZ.linearRampToValueAtTime(n.z,i)}else r.setPosition(qm.x,qm.y,qm.z),r.setOrientation(Xm.x,Xm.y,Xm.z,n.x,n.y,n.z)}}let wre=class extends Qr{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const r=this.context.createBufferSource();return r.buffer=this.buffer,r.loop=this.loop,r.loopStart=this.loopStart,r.loopEnd=this.loopEnd,r.onended=this.onEnded.bind(this),r.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=r,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,r=this.filters.length;t<r;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,r=this.filters.length;t<r;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}};const Ym=new pe,h8=new To,Q_e=new pe,Km=new pe;class Z_e extends wre{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,r,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=r,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ym,h8,Q_e),Km.set(0,0,1).applyQuaternion(h8);const r=this.panner;if(r.positionX){const n=this.context.currentTime+this.listener.timeDelta;r.positionX.linearRampToValueAtTime(Ym.x,n),r.positionY.linearRampToValueAtTime(Ym.y,n),r.positionZ.linearRampToValueAtTime(Ym.z,n),r.orientationX.linearRampToValueAtTime(Km.x,n),r.orientationY.linearRampToValueAtTime(Km.y,n),r.orientationZ.linearRampToValueAtTime(Km.z,n)}else r.setPosition(Ym.x,Ym.y,Ym.z),r.setOrientation(Km.x,Km.y,Km.z)}}class $_e{constructor(t,r=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=r,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const r=this.getFrequencyData();for(let n=0;n<r.length;n++)t+=r[n];return t/r.length}}class _re{constructor(t,r,n){this.binding=t,this.valueSize=n;let i,o,a;switch(r){case"quaternion":i=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,r){const n=this.buffer,i=this.valueSize,o=t*i+i;let a=this.cumulativeWeight;if(a===0){for(let s=0;s!==i;++s)n[o+s]=n[s];a=r}else{a+=r;const s=r/a;this._mixBufferRegion(n,o,0,s,i)}this.cumulativeWeight=a}accumulateAdditive(t){const r=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(r,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const r=this.valueSize,n=this.buffer,i=t*r+r,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=r*this._origIndex;this._mixBufferRegion(n,i,l,1-o,r)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*r,1,r);for(let l=r,u=r+r;l!==u;++l)if(n[l]!==n[l+r]){s.setValue(n,i);break}}saveOriginalState(){const t=this.binding,r=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(r,i);for(let o=n,a=i;o!==a;++o)r[o]=r[i+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,r=t+this.valueSize;for(let n=t;n<r;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[r+n]=this.buffer[t+n]}_select(t,r,n,i,o){if(i>=.5)for(let a=0;a!==o;++a)t[r+a]=t[n+a]}_slerp(t,r,n,i){To.slerpFlat(t,r,t,r,t,n,i)}_slerpAdditive(t,r,n,i,o){const a=this._workIndex*o;To.multiplyQuaternionsFlat(t,a,t,r,t,n),To.slerpFlat(t,r,t,r,t,a,i)}_lerp(t,r,n,i,o){const a=1-i;for(let s=0;s!==o;++s){const l=r+s;t[l]=t[l]*a+t[n+s]*i}}_lerpAdditive(t,r,n,i,o){for(let a=0;a!==o;++a){const s=r+a;t[s]=t[s]+t[n+a]*i}}}const xV="\\[\\]\\.:\\/",eSe=new RegExp("["+xV+"]","g"),wV="[^"+xV+"]",tSe="[^"+xV.replace("\\.","")+"]",rSe=/((?:WC+[\/:])*)/.source.replace("WC",wV),nSe=/(WCOD+)?/.source.replace("WCOD",tSe),iSe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wV),oSe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wV),aSe=new RegExp("^"+rSe+nSe+iSe+oSe+"$"),sSe=["material","materials","bones","map"];class lSe{constructor(t,r,n){const i=n||Jr.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,i)}getValue(t,r){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,r)}setValue(t,r){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=n.length;i!==o;++i)n[i].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=t.length;r!==n;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=t.length;r!==n;++r)t[r].unbind()}}class Jr{constructor(t,r,n){this.path=r,this.parsedPath=n||Jr.parseTrackName(r),this.node=Jr.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,n){return t&&t.isAnimationObjectGroup?new Jr.Composite(t,r,n):new Jr(t,r,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(eSe,"")}static parseTrackName(t){const r=aSe.exec(t);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=n.nodeName.substring(i+1);sSe.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,r){if(r===void 0||r===""||r==="."||r===-1||r===t.name||r===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(r);if(n!==void 0)return n}if(t.children){const n=function(o){for(let a=0;a<o.length;a++){const s=o[a];if(s.name===r||s.uuid===r)return s;const l=n(s.children);if(l)return l}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)t[r++]=n[i]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,n=r.objectName,i=r.propertyName;let o=r.propertyIndex;if(t||(t=Jr.findNode(this.rootNode,r.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=r.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}const a=t[i];if(a===void 0){const u=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t);return}let s=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Jr.Composite=lSe;Jr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Jr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Jr.prototype.GetterByBindingType=[Jr.prototype._getValue_direct,Jr.prototype._getValue_array,Jr.prototype._getValue_arrayElement,Jr.prototype._getValue_toArray];Jr.prototype.SetterByBindingTypeAndVersioning=[[Jr.prototype._setValue_direct,Jr.prototype._setValue_direct_setNeedsUpdate,Jr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_array,Jr.prototype._setValue_array_setNeedsUpdate,Jr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_arrayElement,Jr.prototype._setValue_arrayElement_setNeedsUpdate,Jr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_fromArray,Jr.prototype._setValue_fromArray_setNeedsUpdate,Jr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class uSe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=rl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}add(){const t=this._objects,r=this._indicesByUUID,n=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length;let s,l=t.length,u=this.nCachedObjects_;for(let d=0,c=arguments.length;d!==c;++d){const h=arguments[d],f=h.uuid;let g=r[f];if(g===void 0){g=l++,r[f]=g,t.push(h);for(let y=0,m=a;y!==m;++y)o[y].push(new Jr(h,n[y],i[y]))}else if(g<u){s=t[g];const y=--u,m=t[y];r[m.uuid]=g,t[g]=m,r[f]=y,t[y]=h;for(let p=0,v=a;p!==v;++p){const b=o[p],x=b[y];let _=b[g];b[g]=x,_===void 0&&(_=new Jr(h,n[p],i[p])),b[y]=_}}else t[g]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const t=this._objects,r=this._indicesByUUID,n=this._bindings,i=n.length;let o=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const l=arguments[a],u=l.uuid,d=r[u];if(d!==void 0&&d>=o){const c=o++,h=t[c];r[h.uuid]=d,t[d]=h,r[u]=c,t[c]=l;for(let f=0,g=i;f!==g;++f){const y=n[f],m=y[c],p=y[d];y[d]=m,y[c]=p}}}this.nCachedObjects_=o}uncache(){const t=this._objects,r=this._indicesByUUID,n=this._bindings,i=n.length;let o=this.nCachedObjects_,a=t.length;for(let s=0,l=arguments.length;s!==l;++s){const u=arguments[s],d=u.uuid,c=r[d];if(c!==void 0)if(delete r[d],c<o){const h=--o,f=t[h],g=--a,y=t[g];r[f.uuid]=c,t[c]=f,r[y.uuid]=h,t[h]=y,t.pop();for(let m=0,p=i;m!==p;++m){const v=n[m],b=v[h],x=v[g];v[c]=b,v[h]=x,v.pop()}}else{const h=--a,f=t[h];h>0&&(r[f.uuid]=c),t[c]=f,t.pop();for(let g=0,y=i;g!==y;++g){const m=n[g];m[c]=m[h],m.pop()}}}this.nCachedObjects_=o}subscribe_(t,r){const n=this._bindingsIndicesByPath;let i=n[t];const o=this._bindings;if(i!==void 0)return o[i];const a=this._paths,s=this._parsedPaths,l=this._objects,u=l.length,d=this.nCachedObjects_,c=new Array(u);i=o.length,n[t]=i,a.push(t),s.push(r),o.push(c);for(let h=d,f=l.length;h!==f;++h){const g=l[h];c[h]=new Jr(g,t,r)}return c}unsubscribe_(t){const r=this._bindingsIndicesByPath,n=r[t];if(n!==void 0){const i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length-1,l=a[s],u=t[s];r[u]=n,a[n]=l,a.pop(),o[n]=o[s],o.pop(),i[n]=i[s],i.pop()}}}class Sre{constructor(t,r,n=null,i=r.blendMode){this._mixer=t,this._clip=r,this._localRoot=n,this.blendMode=i;const o=r.tracks,a=o.length,s=new Array(a),l={endingStart:Dg,endingEnd:Dg};for(let u=0;u!==a;++u){const d=o[u].createInterpolant(null);s[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=cte,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,r){return this.loop=t,this.repetitions=r,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,r,n){if(t.fadeOut(r),this.fadeIn(r),n){const i=this._clip.duration,o=t._clip.duration,a=o/i,s=i/o;t.warp(1,a,r),this.warp(s,1,r)}return this}crossFadeTo(t,r,n){return t.crossFadeFrom(this,r,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,r,n){const i=this._mixer,o=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,u=s.sampleValues;return l[0]=o,l[1]=o+n,u[0]=t/a,u[1]=r/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,r,n,i){if(!this.enabled){this._updateWeight(t);return}const o=this._startTime;if(o!==null){const l=(t-o)*n;l<0||n===0?r=0:(this._startTime=null,r=n*l)}r*=this._updateTimeScale(t);const a=this._updateTime(r),s=this._updateWeight(t);if(s>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case k4:for(let d=0,c=l.length;d!==c;++d)l[d].evaluate(a),u[d].accumulateAdditive(s);break;case vR:default:for(let d=0,c=l.length;d!==c;++d)l[d].evaluate(a),u[d].accumulate(i,s)}}}_updateWeight(t){let r=0;if(this.enabled){r=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(t)[0];r*=i,t>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(t){let r=0;if(!this.paused){r=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(t)[0];r*=i,t>n.parameterPositions[1]&&(this.stopWarping(),r===0?this.paused=!0:this.timeScale=r)}}return this._effectiveTimeScale=r,r}_updateTime(t){const r=this._clip.duration,n=this.loop;let i=this.time+t,o=this._loopCount;const a=n===dte;if(t===0)return o===-1?i:a&&(o&1)===1?r-i:i;if(n===ute){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=r)i=r;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=r||i<0){const s=Math.floor(i/r);i-=r*s,o+=Math.abs(s);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?r:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){const u=t<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(a&&(o&1)===1)return r-i}return i}_setEndings(t,r,n){const i=this._interpolantSettings;n?(i.endingStart=Og,i.endingEnd=Og):(t?i.endingStart=this.zeroSlopeAtStart?Og:Dg:i.endingStart=fA,r?i.endingEnd=this.zeroSlopeAtEnd?Og:Dg:i.endingEnd=fA)}_scheduleFading(t,r,n){const i=this._mixer,o=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=o,l[0]=r,s[1]=o+t,l[1]=n,this}}const cSe=new Float32Array(1);class dSe extends ud{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,r){const n=t._localRoot||this._root,i=t._clip.tracks,o=i.length,a=t._propertyBindings,s=t._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let d=u[l];d===void 0&&(d={},u[l]=d);for(let c=0;c!==o;++c){const h=i[c],f=h.name;let g=d[f];if(g!==void 0)++g.referenceCount,a[c]=g;else{if(g=a[c],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,f));continue}const y=r&&r._propertyBindings[c].binding.parsedPath;g=new _re(Jr.create(n,f,y),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,f),a[c]=g}s[c].resultBuffer=g.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,i=t._clip.uuid,o=this._actionsByClip[i];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,i,n)}const r=t._propertyBindings;for(let n=0,i=r.length;n!==i;++n){const o=r[n];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const r=t._propertyBindings;for(let n=0,i=r.length;n!==i;++n){const o=r[n];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const r=t._cacheIndex;return r!==null&&r<this._nActiveActions}_addInactiveAction(t,r,n){const i=this._actions,o=this._actionsByClip;let a=o[r];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[r]=a;else{const s=a.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const r=this._actions,n=r[r.length-1],i=t._cacheIndex;n._cacheIndex=i,r[i]=n,r.pop(),t._cacheIndex=null;const o=t._clip.uuid,a=this._actionsByClip,s=a[o],l=s.knownActions,u=l[l.length-1],d=t._byClipCacheIndex;u._byClipCacheIndex=d,l[d]=u,l.pop(),t._byClipCacheIndex=null;const c=s.actionByRoot,h=(t._localRoot||this._root).uuid;delete c[h],l.length===0&&delete a[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const r=t._propertyBindings;for(let n=0,i=r.length;n!==i;++n){const o=r[n];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){const r=this._actions,n=t._cacheIndex,i=this._nActiveActions++,o=r[i];t._cacheIndex=i,r[i]=t,o._cacheIndex=n,r[n]=o}_takeBackAction(t){const r=this._actions,n=t._cacheIndex,i=--this._nActiveActions,o=r[i];t._cacheIndex=i,r[i]=t,o._cacheIndex=n,r[n]=o}_addInactiveBinding(t,r,n){const i=this._bindingsByRootAndName,o=this._bindings;let a=i[r];a===void 0&&(a={},i[r]=a),a[n]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const r=this._bindings,n=t.binding,i=n.rootNode.uuid,o=n.path,a=this._bindingsByRootAndName,s=a[i],l=r[r.length-1],u=t._cacheIndex;l._cacheIndex=u,r[u]=l,r.pop(),delete s[o],Object.keys(s).length===0&&delete a[i]}_lendBinding(t){const r=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,o=r[i];t._cacheIndex=i,r[i]=t,o._cacheIndex=n,r[n]=o}_takeBackBinding(t){const r=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,o=r[i];t._cacheIndex=i,r[i]=t,o._cacheIndex=n,r[n]=o}_lendControlInterpolant(){const t=this._controlInterpolants,r=this._nActiveControlInterpolants++;let n=t[r];return n===void 0&&(n=new dV(new Float32Array(2),new Float32Array(2),1,cSe),n.__cacheIndex=r,t[r]=n),n}_takeBackControlInterpolant(t){const r=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,o=r[i];t.__cacheIndex=i,r[i]=t,o.__cacheIndex=n,r[n]=o}clipAction(t,r,n){const i=r||this._root,o=i.uuid;let a=typeof t=="string"?Ex.findByName(i,t):t;const s=a!==null?a.uuid:t,l=this._actionsByClip[s];let u=null;if(n===void 0&&(a!==null?n=a.blendMode:n=vR),l!==void 0){const c=l.actionByRoot[o];if(c!==void 0&&c.blendMode===n)return c;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const d=new Sre(this,a,r,n);return this._bindAction(d,u),this._addInactiveAction(d,s,o),d}existingAction(t,r){const n=r||this._root,i=n.uuid,o=typeof t=="string"?Ex.findByName(n,t):t,a=o?o.uuid:t,s=this._actionsByClip[a];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const t=this._actions,r=this._nActiveActions;for(let n=r-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const r=this._actions,n=this._nActiveActions,i=this.time+=t,o=Math.sign(t),a=this._accuIndex^=1;for(let u=0;u!==n;++u)r[u]._update(i,t,o,a);const s=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)s[u].apply(a);return this}setTime(t){this.time=0;for(let r=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const r=this._actions,n=t.uuid,i=this._actionsByClip,o=i[n];if(o!==void 0){const a=o.knownActions;for(let s=0,l=a.length;s!==l;++s){const u=a[s];this._deactivateAction(u);const d=u._cacheIndex,c=r[r.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=d,r[d]=c,r.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}}uncacheRoot(t){const r=t.uuid,n=this._actionsByClip;for(const a in n){const s=n[a].actionByRoot,l=s[r];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[r];if(o!==void 0)for(const a in o){const s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(t,r){const n=this.existingAction(t,r);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class _V{constructor(t){this.value=t}clone(){return new _V(this.value.clone===void 0?this.value:this.value.clone())}}let hSe=0;class fSe extends ud{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:hSe++}),this.name="",this.usage=vA,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const r=this.uniforms.indexOf(t);return r!==-1&&this.uniforms.splice(r,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const r=t.uniforms;this.uniforms.length=0;for(let n=0,i=r.length;n<i;n++)this.uniforms.push(r[n].clone());return this}clone(){return new this.constructor().copy(this)}}class pSe extends fM{constructor(t,r,n=1){super(t,r),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const r=super.clone(t);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(t){const r=super.toJSON(t);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}class mSe{constructor(t,r,n,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=r,this.itemSize=n,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,r){return this.type=t,this.elementSize=r,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}class Are{constructor(t,r,n=0,i=1/0){this.ray=new T0(t,r),this.near=n,this.far=i,this.camera=null,this.layers=new Xg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,r){this.ray.set(t,r)}setFromCamera(t,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}intersectObject(t,r=!0,n=[]){return JF(t,this,n,r),n.sort(f8),n}intersectObjects(t,r=!0,n=[]){for(let i=0,o=t.length;i<o;i++)JF(t[i],this,n,r);return n.sort(f8),n}}function f8(e,t){return e.distance-t.distance}function JF(e,t,r,n){if(e.layers.test(t.layers)&&e.raycast(t,r),n===!0){const i=e.children;for(let o=0,a=i.length;o<a;o++)JF(i[o],t,r,!0)}}class QF{constructor(t=1,r=0,n=0){return this.radius=t,this.phi=r,this.theta=n,this}set(t,r,n){return this.radius=t,this.phi=r,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,n){return this.radius=Math.sqrt(t*t+r*r+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(pi(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class gSe{constructor(t=1,r=0,n=0){return this.radius=t,this.theta=r,this.y=n,this}set(t,r,n){return this.radius=t,this.theta=r,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=r,this}clone(){return new this.constructor().copy(this)}}const p8=new lt;class vSe{constructor(t=new lt(1/0,1/0),r=new lt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromPoints(t){this.makeEmpty();for(let r=0,n=t.length;r<n;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const n=p8.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,p8).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const m8=new pe,hE=new pe;class ySe{constructor(t=new pe,r=new pe){this.start=t,this.end=r}set(t,r){return this.start.copy(t),this.end.copy(r),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,r){return this.delta(r).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,r){m8.subVectors(t,this.start),hE.subVectors(this.end,this.start);const n=hE.dot(hE);let o=hE.dot(m8)/n;return r&&(o=pi(o,0,1)),o}closestPointToPoint(t,r,n){const i=this.closestPointToPointParameter(t,r);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const g8=new pe;class bSe extends Qr{constructor(t,r){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="SpotLightHelper";const n=new Er,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,l=32;a<l;a++,s++){const u=a/l*Math.PI*2,d=s/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new Wt(i,3));const o=new ca({fog:!1,toneMapped:!1});this.cone=new Ku(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const t=this.light.distance?this.light.distance:1e3,r=t*Math.tan(this.light.angle);this.cone.scale.set(r,r,t),g8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(g8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Sf=new pe,fE=new pr,xL=new pr;class xSe extends Ku{constructor(t){const r=Mre(t),n=new Er,i=[],o=[],a=new Dt(0,0,1),s=new Dt(0,1,0);for(let u=0;u<r.length;u++){const d=r[u];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(a.r,a.g,a.b),o.push(s.r,s.g,s.b))}n.setAttribute("position",new Wt(i,3)),n.setAttribute("color",new Wt(o,3));const l=new ca({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const r=this.bones,n=this.geometry,i=n.getAttribute("position");xL.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<r.length;o++){const s=r[o];s.parent&&s.parent.isBone&&(fE.multiplyMatrices(xL,s.matrixWorld),Sf.setFromMatrixPosition(fE),i.setXYZ(a,Sf.x,Sf.y,Sf.z),fE.multiplyMatrices(xL,s.parent.matrixWorld),Sf.setFromMatrixPosition(fE),i.setXYZ(a+1,Sf.x,Sf.y,Sf.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Mre(e){const t=[];e.isBone===!0&&t.push(e);for(let r=0;r<e.children.length;r++)t.push.apply(t,Mre(e.children[r]));return t}class wSe extends ji{constructor(t,r,n){const i=new yM(r,4,2),o=new Js({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _Se=new pe,v8=new Dt,y8=new Dt;class SSe extends Qr{constructor(t,r,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new vM(r);i.rotateY(Math.PI*.5),this.material=new Js({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),a=new Float32Array(o.count*3);i.setAttribute("color",new Zr(a,3)),this.add(new ji(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const r=t.geometry.getAttribute("color");v8.copy(this.light.color),y8.copy(this.light.groundColor);for(let n=0,i=r.count;n<i;n++){const o=n<i/2?v8:y8;r.setXYZ(n,o.r,o.g,o.b)}r.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(_Se.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ASe extends Ku{constructor(t=10,r=10,n=4473924,i=8947848){n=new Dt(n),i=new Dt(i);const o=r/2,a=t/r,s=t/2,l=[],u=[];for(let h=0,f=0,g=-s;h<=r;h++,g+=a){l.push(-s,0,g,s,0,g),l.push(g,0,-s,g,0,s);const y=h===o?n:i;y.toArray(u,f),f+=3,y.toArray(u,f),f+=3,y.toArray(u,f),f+=3,y.toArray(u,f),f+=3}const d=new Er;d.setAttribute("position",new Wt(l,3)),d.setAttribute("color",new Wt(u,3));const c=new ca({vertexColors:!0,toneMapped:!1});super(d,c),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class MSe extends Ku{constructor(t=10,r=16,n=8,i=64,o=4473924,a=8947848){o=new Dt(o),a=new Dt(a);const s=[],l=[];if(r>1)for(let c=0;c<r;c++){const h=c/r*(Math.PI*2),f=Math.sin(h)*t,g=Math.cos(h)*t;s.push(0,0,0),s.push(f,0,g);const y=c&1?o:a;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let c=0;c<n;c++){const h=c&1?o:a,f=t-t/n*c;for(let g=0;g<i;g++){let y=g/i*(Math.PI*2),m=Math.sin(y)*f,p=Math.cos(y)*f;s.push(m,0,p),l.push(h.r,h.g,h.b),y=(g+1)/i*(Math.PI*2),m=Math.sin(y)*f,p=Math.cos(y)*f,s.push(m,0,p),l.push(h.r,h.g,h.b)}}const u=new Er;u.setAttribute("position",new Wt(s,3)),u.setAttribute("color",new Wt(l,3));const d=new ca({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const b8=new pe,pE=new pe,x8=new pe;class CSe extends Qr{constructor(t,r,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",r===void 0&&(r=1);let i=new Er;i.setAttribute("position",new Wt([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));const o=new ca({fog:!1,toneMapped:!1});this.lightPlane=new Oh(i,o),this.add(this.lightPlane),i=new Er,i.setAttribute("position",new Wt([0,0,0,0,0,1],3)),this.targetLine=new Oh(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),b8.setFromMatrixPosition(this.light.matrixWorld),pE.setFromMatrixPosition(this.light.target.matrixWorld),x8.subVectors(pE,b8),this.lightPlane.lookAt(pE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(pE),this.targetLine.scale.z=x8.length()}}const mE=new pe,li=new uM;class TSe extends Ku{constructor(t){const r=new Er,n=new ca({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],a={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(g,y){l(g),l(y)}function l(g){i.push(0,0,0),o.push(0,0,0),a[g]===void 0&&(a[g]=[]),a[g].push(i.length/3-1)}r.setAttribute("position",new Wt(i,3)),r.setAttribute("color",new Wt(o,3)),super(r,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new Dt(16755200),d=new Dt(16711680),c=new Dt(43775),h=new Dt(16777215),f=new Dt(3355443);this.setColors(u,d,c,h,f)}setColors(t,r,n,i,o){const s=this.geometry.getAttribute("color");s.setXYZ(0,t.r,t.g,t.b),s.setXYZ(1,t.r,t.g,t.b),s.setXYZ(2,t.r,t.g,t.b),s.setXYZ(3,t.r,t.g,t.b),s.setXYZ(4,t.r,t.g,t.b),s.setXYZ(5,t.r,t.g,t.b),s.setXYZ(6,t.r,t.g,t.b),s.setXYZ(7,t.r,t.g,t.b),s.setXYZ(8,t.r,t.g,t.b),s.setXYZ(9,t.r,t.g,t.b),s.setXYZ(10,t.r,t.g,t.b),s.setXYZ(11,t.r,t.g,t.b),s.setXYZ(12,t.r,t.g,t.b),s.setXYZ(13,t.r,t.g,t.b),s.setXYZ(14,t.r,t.g,t.b),s.setXYZ(15,t.r,t.g,t.b),s.setXYZ(16,t.r,t.g,t.b),s.setXYZ(17,t.r,t.g,t.b),s.setXYZ(18,t.r,t.g,t.b),s.setXYZ(19,t.r,t.g,t.b),s.setXYZ(20,t.r,t.g,t.b),s.setXYZ(21,t.r,t.g,t.b),s.setXYZ(22,t.r,t.g,t.b),s.setXYZ(23,t.r,t.g,t.b),s.setXYZ(24,r.r,r.g,r.b),s.setXYZ(25,r.r,r.g,r.b),s.setXYZ(26,r.r,r.g,r.b),s.setXYZ(27,r.r,r.g,r.b),s.setXYZ(28,r.r,r.g,r.b),s.setXYZ(29,r.r,r.g,r.b),s.setXYZ(30,r.r,r.g,r.b),s.setXYZ(31,r.r,r.g,r.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,o.r,o.g,o.b),s.setXYZ(41,o.r,o.g,o.b),s.setXYZ(42,o.r,o.g,o.b),s.setXYZ(43,o.r,o.g,o.b),s.setXYZ(44,o.r,o.g,o.b),s.setXYZ(45,o.r,o.g,o.b),s.setXYZ(46,o.r,o.g,o.b),s.setXYZ(47,o.r,o.g,o.b),s.setXYZ(48,o.r,o.g,o.b),s.setXYZ(49,o.r,o.g,o.b),s.needsUpdate=!0}update(){const t=this.geometry,r=this.pointMap,n=1,i=1;li.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),_i("c",r,t,li,0,0,-1),_i("t",r,t,li,0,0,1),_i("n1",r,t,li,-n,-i,-1),_i("n2",r,t,li,n,-i,-1),_i("n3",r,t,li,-n,i,-1),_i("n4",r,t,li,n,i,-1),_i("f1",r,t,li,-n,-i,1),_i("f2",r,t,li,n,-i,1),_i("f3",r,t,li,-n,i,1),_i("f4",r,t,li,n,i,1),_i("u1",r,t,li,n*.7,i*1.1,-1),_i("u2",r,t,li,-n*.7,i*1.1,-1),_i("u3",r,t,li,0,i*2,-1),_i("cf1",r,t,li,-n,0,1),_i("cf2",r,t,li,n,0,1),_i("cf3",r,t,li,0,-i,1),_i("cf4",r,t,li,0,i,1),_i("cn1",r,t,li,-n,0,-1),_i("cn2",r,t,li,n,0,-1),_i("cn3",r,t,li,0,-i,-1),_i("cn4",r,t,li,0,i,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _i(e,t,r,n,i,o,a){mE.set(i,o,a).unproject(n);const s=t[e];if(s!==void 0){const l=r.getAttribute("position");for(let u=0,d=s.length;u<d;u++)l.setXYZ(s[u],mE.x,mE.y,mE.z)}}const gE=new oa;class ESe extends Ku{constructor(t,r=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new Er;o.setIndex(new Zr(n,1)),o.setAttribute("position",new Zr(i,3)),super(o,new ca({color:r,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&gE.setFromObject(this.object),gE.isEmpty())return;const r=gE.min,n=gE.max,i=this.geometry.attributes.position,o=i.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=r.x,o[4]=n.y,o[5]=n.z,o[6]=r.x,o[7]=r.y,o[8]=n.z,o[9]=n.x,o[10]=r.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=r.z,o[15]=r.x,o[16]=n.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=n.x,o[22]=r.y,o[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,r){return super.copy(t,r),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class PSe extends Ku{constructor(t,r=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Er;o.setIndex(new Zr(n,1)),o.setAttribute("position",new Wt(i,3)),super(o,new ca({color:r,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const r=this.box;r.isEmpty()||(r.getCenter(this.position),r.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class DSe extends Oh{constructor(t,r=1,n=16776960){const i=n,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Er;a.setAttribute("position",new Wt(o,3)),a.computeBoundingSphere(),super(a,new ca({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=r;const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Er;l.setAttribute("position",new Wt(s,3)),l.computeBoundingSphere(),this.add(new ji(l,new Js({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const w8=new pe;let vE,wL;class OSe extends Qr{constructor(t=new pe(0,0,1),r=new pe(0,0,0),n=1,i=16776960,o=n*.2,a=o*.2){super(),this.type="ArrowHelper",vE===void 0&&(vE=new Er,vE.setAttribute("position",new Wt([0,0,0,0,1,0],3)),wL=new c1(0,.5,1,5,1),wL.translate(0,-.5,0)),this.position.copy(r),this.line=new Oh(vE,new ca({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ji(wL,new Js({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,o,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{w8.set(t.z,0,-t.x).normalize();const r=Math.acos(t.y);this.quaternion.setFromAxisAngle(w8,r)}}setLength(t,r=t*.2,n=r*.2){this.line.scale.set(1,Math.max(1e-4,t-r),1),this.line.updateMatrix(),this.cone.scale.set(n,r,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class RSe extends Ku{constructor(t=1){const r=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Er;i.setAttribute("position",new Wt(r,3)),i.setAttribute("color",new Wt(n,3));const o=new ca({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(t,r,n){const i=new Dt,o=this.geometry.attributes.color.array;return i.set(t),i.toArray(o,0),i.toArray(o,3),i.set(r),i.toArray(o,6),i.toArray(o,9),i.set(n),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ISe{constructor(){this.type="ShapePath",this.color=new Dt,this.subPaths=[],this.currentPath=null}moveTo(t,r){return this.currentPath=new bA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,r),this}lineTo(t,r){return this.currentPath.lineTo(t,r),this}quadraticCurveTo(t,r,n,i){return this.currentPath.quadraticCurveTo(t,r,n,i),this}bezierCurveTo(t,r,n,i,o,a){return this.currentPath.bezierCurveTo(t,r,n,i,o,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function r(p){const v=[];for(let b=0,x=p.length;b<x;b++){const _=p[b],A=new Kg;A.curves=_.curves,v.push(A)}return v}function n(p,v){const b=v.length;let x=!1;for(let _=b-1,A=0;A<b;_=A++){let M=v[_],T=v[A],C=T.x-M.x,E=T.y-M.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(M=v[A],C=-C,T=v[_],E=-E),p.y<M.y||p.y>T.y)continue;if(p.y===M.y){if(p.x===M.x)return!0}else{const D=E*(p.x-M.x)-C*(p.y-M.y);if(D===0)return!0;if(D<0)continue;x=!x}}else{if(p.y!==M.y)continue;if(T.x<=p.x&&p.x<=M.x||M.x<=p.x&&p.x<=T.x)return!0}}return x}const i=Xc.isClockWise,o=this.subPaths;if(o.length===0)return[];let a,s,l;const u=[];if(o.length===1)return s=o[0],l=new Kg,l.curves=s.curves,u.push(l),u;let d=!i(o[0].getPoints());d=t?!d:d;const c=[],h=[];let f=[],g=0,y;h[g]=void 0,f[g]=[];for(let p=0,v=o.length;p<v;p++)s=o[p],y=s.getPoints(),a=i(y),a=t?!a:a,a?(!d&&h[g]&&g++,h[g]={s:new Kg,p:y},h[g].s.curves=s.curves,d&&g++,f[g]=[]):f[g].push({h:s,p:y[0]});if(!h[0])return r(o);if(h.length>1){let p=!1,v=0;for(let b=0,x=h.length;b<x;b++)c[b]=[];for(let b=0,x=h.length;b<x;b++){const _=f[b];for(let A=0;A<_.length;A++){const M=_[A];let T=!0;for(let C=0;C<h.length;C++)n(M.p,h[C].p)&&(b!==C&&v++,T?(T=!1,c[C].push(M)):p=!0);T&&c[b].push(M)}}v>0&&p===!1&&(f=c)}let m;for(let p=0,v=h.length;p<v;p++){l=h[p].s,u.push(l),m=f[p];for(let b=0,x=m.length;b<x;b++)l.holes.push(m[b].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:s1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=s1);const LSe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:P4,AddEquation:$f,AddOperation:Kee,AdditiveAnimationBlendMode:k4,AdditiveBlending:cF,AlphaFormat:nte,AlwaysCompare:_te,AlwaysDepth:jee,AlwaysStencilFunc:VF,AmbientLight:pre,AnimationAction:Sre,AnimationClip:Ex,AnimationLoader:F_e,AnimationMixer:dSe,AnimationObjectGroup:uSe,AnimationUtils:L_e,ArcCurve:Hte,ArrayCamera:kte,ArrowHelper:OSe,AttachedBindMode:mF,Audio:wre,AudioAnalyser:$_e,AudioContext:yV,AudioListener:J_e,AudioLoader:X_e,AxesHelper:RSe,BackSide:ja,BasicDepthPacking:fte,BasicShadowMap:Aee,BatchedMesh:jte,Bone:SR,BooleanKeyframeTrack:P0,Box2:vSe,Box3:oa,Box3Helper:PSe,BoxGeometry:E0,BoxHelper:ESe,BufferAttribute:Zr,BufferGeometry:Er,BufferGeometryLoader:bre,ByteType:tte,Cache:f0,Camera:uM,CameraHelper:TSe,CanvasTexture:i_e,CapsuleGeometry:CR,CatmullRomCurve3:Gte,CineonToneMapping:Zee,CircleGeometry:TR,ClampToEdgeWrapping:ko,Clock:bV,Color:Dt,ColorKeyframeTrack:hV,ColorManagement:pn,CompressedArrayTexture:r_e,CompressedCubeTexture:n_e,CompressedTexture:AR,CompressedTextureLoader:z_e,ConeGeometry:ER,ConstantAlphaFactor:zee,ConstantColorFactor:kee,CubeCamera:q4,CubeReflectionMapping:Dh,CubeRefractionMapping:kp,CubeTexture:cM,CubeTextureLoader:U_e,CubeUVReflectionMapping:l1,CubicBezierCurve:oV,CubicBezierCurve3:Wte,CubicInterpolant:ure,CullFaceBack:uF,CullFaceFront:See,CullFaceFrontBack:Q0e,CullFaceNone:_ee,Curve:Ju,CurvePath:Xte,CustomBlending:Mee,CustomToneMapping:$ee,CylinderGeometry:c1,Cylindrical:gSe,Data3DTexture:H4,DataArrayTexture:bR,DataTexture:Yg,DataTextureLoader:V_e,DataUtils:rye,DecrementStencilOp:ave,DecrementWrapStencilOp:lve,DefaultLoadingManager:yb,DepthFormat:Ap,DepthStencilFormat:c0,DepthTexture:K4,DetachedBindMode:ete,DirectionalLight:vV,DirectionalLightHelper:CSe,DiscreteInterpolant:cre,DisplayP3ColorSpace:yR,DodecahedronGeometry:PR,DoubleSide:Ul,DstAlphaFactor:Ree,DstColorFactor:Lee,DynamicCopyUsage:_ve,DynamicDrawUsage:Wg,DynamicReadUsage:bve,EdgesGeometry:Yte,EllipseCurve:MR,EqualCompare:yte,EqualDepth:Gee,EqualStencilFunc:hve,EquirectangularReflectionMapping:cA,EquirectangularRefractionMapping:dA,Euler:lM,EventDispatcher:ud,ExtrudeGeometry:OR,FileLoader:al,Float16BufferAttribute:lye,Float32BufferAttribute:Wt,Float64BufferAttribute:uye,FloatType:Pu,Fog:_R,FogExp2:wR,FramebufferTexture:t_e,FrontSide:Zc,Frustum:dM,GLBufferAttribute:mSe,GLSL1:Ave,GLSL3:jF,GreaterCompare:bte,GreaterDepth:qee,GreaterEqualCompare:wte,GreaterEqualDepth:Wee,GreaterEqualStencilFunc:gve,GreaterStencilFunc:pve,GridHelper:ASe,Group:ch,HalfFloatType:xx,HemisphereLight:fre,HemisphereLightHelper:SSe,IcosahedronGeometry:RR,ImageBitmapLoader:xre,ImageLoader:SA,ImageUtils:j4,IncrementStencilOp:ove,IncrementWrapStencilOp:sve,InstancedBufferAttribute:Mx,InstancedBufferGeometry:yre,InstancedInterleavedBuffer:pSe,InstancedMesh:tV,Int16BufferAttribute:aye,Int32BufferAttribute:sye,Int8BufferAttribute:nye,IntType:D4,InterleavedBuffer:fM,InterleavedBufferAttribute:zp,Interpolant:d1,InterpolateDiscrete:wx,InterpolateLinear:d0,InterpolateSmooth:v2,InvertStencilOp:uve,KeepStencilOp:dg,KeyframeTrack:Qu,LOD:Vte,LatheGeometry:gM,Layers:Xg,LessCompare:vte,LessDepth:Hee,LessEqualCompare:U4,LessEqualDepth:uA,LessEqualStencilFunc:fve,LessStencilFunc:dve,Light:$p,LightProbe:vre,Line:Oh,Line3:ySe,LineBasicMaterial:ca,LineCurve:aV,LineCurve3:qte,LineDashedMaterial:are,LineLoop:rV,LineSegments:Ku,LinearDisplayP3ColorSpace:sM,LinearEncoding:z4,LinearFilter:Qn,LinearInterpolant:dV,LinearMipMapLinearFilter:rve,LinearMipMapNearestFilter:tve,LinearMipmapLinearFilter:$c,LinearMipmapNearestFilter:mR,LinearSRGBColorSpace:ed,LinearToneMapping:Jee,LinearTransfer:pA,Loader:da,LoaderUtils:Yc,LoadingManager:fV,LoopOnce:ute,LoopPingPong:dte,LoopRepeat:cte,LuminanceAlphaFormat:ote,LuminanceFormat:ite,MOUSE:ug,Material:Hi,MaterialLoader:zR,MathUtils:Ste,Matrix3:Br,Matrix4:pr,MaxEquation:pF,Mesh:ji,MeshBasicMaterial:Js,MeshDepthMaterial:J4,MeshDistanceMaterial:Q4,MeshLambertMaterial:ire,MeshMatcapMaterial:ore,MeshNormalMaterial:nre,MeshPhongMaterial:tre,MeshPhysicalMaterial:cd,MeshStandardMaterial:bM,MeshToonMaterial:rre,MinEquation:fF,MirroredRepeatWrapping:bx,MixOperation:Yee,MultiplyBlending:hF,MultiplyOperation:aM,NearestFilter:fi,NearestMipMapLinearFilter:eve,NearestMipMapNearestFilter:$0e,NearestMipmapLinearFilter:Vb,NearestMipmapNearestFilter:hA,NeverCompare:gte,NeverDepth:Vee,NeverStencilFunc:cve,NoBlending:gh,NoColorSpace:Xs,NoToneMapping:Wc,NormalAnimationBlendMode:vR,NormalBlending:Gg,NotEqualCompare:xte,NotEqualDepth:Xee,NotEqualStencilFunc:mve,NumberKeyframeTrack:Cx,Object3D:Qr,ObjectLoader:W_e,ObjectSpaceNormalMap:mte,OctahedronGeometry:vM,OneFactor:Pee,OneMinusConstantAlphaFactor:Uee,OneMinusConstantColorFactor:Fee,OneMinusDstAlphaFactor:Iee,OneMinusDstColorFactor:Bee,OneMinusSrcAlphaFactor:gD,OneMinusSrcColorFactor:Oee,OrthographicCamera:Hl,P3Primaries:gA,PCFShadowMap:fR,PCFSoftShadowMap:yS,PMREMGenerator:GF,Path:bA,PerspectiveCamera:kn,Plane:th,PlaneGeometry:hM,PlaneHelper:DSe,PointLight:gV,PointLightHelper:wSe,Points:nV,PointsMaterial:mM,PolarGridHelper:MSe,PolyhedronGeometry:Zp,PositionalAudio:Z_e,PropertyBinding:Jr,PropertyMixer:_re,QuadraticBezierCurve:sV,QuadraticBezierCurve3:lV,Quaternion:To,QuaternionKeyframeTrack:Up,QuaternionLinearInterpolant:dre,RED_GREEN_RGTC2_Format:zF,RED_RGTC1_Format:lte,REVISION:s1,RGBADepthPacking:pte,RGBAFormat:Ia,RGBAIntegerFormat:B4,RGBA_ASTC_10x10_Format:IF,RGBA_ASTC_10x5_Format:DF,RGBA_ASTC_10x6_Format:OF,RGBA_ASTC_10x8_Format:RF,RGBA_ASTC_12x10_Format:LF,RGBA_ASTC_12x12_Format:BF,RGBA_ASTC_4x4_Format:_F,RGBA_ASTC_5x4_Format:SF,RGBA_ASTC_5x5_Format:AF,RGBA_ASTC_6x5_Format:MF,RGBA_ASTC_6x6_Format:CF,RGBA_ASTC_8x5_Format:TF,RGBA_ASTC_8x6_Format:EF,RGBA_ASTC_8x8_Format:PF,RGBA_BPTC_Format:g2,RGBA_ETC2_EAC_Format:wF,RGBA_PVRTC_2BPPV1_Format:bF,RGBA_PVRTC_4BPPV1_Format:yF,RGBA_S3TC_DXT1_Format:f2,RGBA_S3TC_DXT3_Format:p2,RGBA_S3TC_DXT5_Format:m2,RGB_BPTC_SIGNED_Format:NF,RGB_BPTC_UNSIGNED_Format:kF,RGB_ETC1_Format:N4,RGB_ETC2_Format:xF,RGB_PVRTC_2BPPV1_Format:vF,RGB_PVRTC_4BPPV1_Format:gF,RGB_S3TC_DXT1_Format:h2,RGFormat:ste,RGIntegerFormat:L4,RawShaderMaterial:ere,Ray:T0,Raycaster:Are,Rec709Primaries:mA,RectAreaLight:mre,RedFormat:ate,RedIntegerFormat:I4,ReinhardToneMapping:Qee,RenderTarget:Cte,RepeatWrapping:Fp,ReplaceStencilOp:ive,ReverseSubtractEquation:Tee,RingGeometry:IR,SIGNED_RED_GREEN_RGTC2_Format:UF,SIGNED_RED_RGTC1_Format:FF,SRGBColorSpace:ro,SRGBTransfer:En,Scene:xD,ShaderChunk:Rr,ShaderLib:Cu,ShaderMaterial:td,ShadowMaterial:$te,Shape:Kg,ShapeGeometry:LR,ShapePath:ISe,ShapeUtils:Xc,ShortType:rte,Skeleton:pM,SkeletonHelper:xSe,SkinnedMesh:eV,Source:Rg,Sphere:zo,SphereGeometry:yM,Spherical:QF,SphericalHarmonics3:gre,SplineCurve:uV,SpotLight:mV,SpotLightHelper:bSe,Sprite:Ute,SpriteMaterial:$4,SrcAlphaFactor:mD,SrcAlphaSaturateFactor:Nee,SrcColorFactor:Dee,StaticCopyUsage:wve,StaticDrawUsage:vA,StaticReadUsage:yve,StereoCamera:Y_e,StreamCopyUsage:Sve,StreamDrawUsage:vve,StreamReadUsage:xve,StringKeyframeTrack:D0,SubtractEquation:Cee,SubtractiveBlending:dF,TOUCH:cg,TangentSpaceNormalMap:Qp,TetrahedronGeometry:BR,Texture:Wn,TextureLoader:hre,TorusGeometry:NR,TorusKnotGeometry:kR,Triangle:cs,TriangleFanDrawMode:vD,TriangleStripDrawMode:F4,TrianglesDrawMode:hte,TubeGeometry:FR,TwoPassDoubleSide:Z0e,UVMapping:pR,Uint16BufferAttribute:G4,Uint32BufferAttribute:W4,Uint8BufferAttribute:iye,Uint8ClampedBufferAttribute:oye,Uniform:_V,UniformsGroup:fSe,UniformsLib:Ct,UniformsUtils:Pte,UnsignedByteType:qc,UnsignedInt248Type:Sp,UnsignedIntType:uh,UnsignedShort4444Type:O4,UnsignedShort5551Type:R4,UnsignedShortType:gR,VSMShadowMap:Su,Vector2:lt,Vector3:pe,Vector4:mn,VectorKeyframeTrack:Tx,VideoTexture:e_e,WebGL1Renderer:Fte,WebGL3DRenderTarget:Gve,WebGLArrayRenderTarget:Hve,WebGLCoordinateSystem:Du,WebGLCubeRenderTarget:X4,WebGLMultipleRenderTargets:Wve,WebGLRenderTarget:Hu,WebGLRenderer:Z4,WebGLUtils:Nte,WebGPUCoordinateSystem:_x,WireframeGeometry:Zte,WrapAroundEnding:fA,ZeroCurvatureEnding:Dg,ZeroFactor:Eee,ZeroSlopeEnding:Og,ZeroStencilOp:nve,_SRGBAFormat:yD,createCanvasElement:Mte,sRGBEncoding:Mp},Symbol.toStringTag,{value:"Module"}));var Cre={exports:{}},O0={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */O0.ConcurrentRoot=1;O0.ContinuousEventPriority=4;O0.DefaultEventPriority=16;O0.DiscreteEventPriority=1;O0.IdleEventPriority=536870912;O0.LegacyRoot=0;Cre.exports=O0;var bb=Cre.exports;function BSe(e){let t;const r=new Set,n=(u,d)=>{const c=typeof u=="function"?u(t):u;if(c!==t){const h=t;t=d?c:Object.assign({},t,c),r.forEach(f=>f(t,h))}},i=()=>t,o=(u,d=i,c=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=d(t);function f(){const g=d(t);if(!c(h,g)){const y=h;u(h=g,y)}}return r.add(f),()=>r.delete(f)},l={setState:n,getState:i,subscribe:(u,d,c)=>d||c?o(u,d,c):(r.add(u),()=>r.delete(u)),destroy:()=>r.clear()};return t=e(n,i,l),l}const NSe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_8=NSe?te.useEffect:te.useLayoutEffect;function Tre(e){const t=typeof e=="function"?BSe(e):e,r=(n=t.getState,i=Object.is)=>{const[,o]=te.useReducer(m=>m+1,0),a=t.getState(),s=te.useRef(a),l=te.useRef(n),u=te.useRef(i),d=te.useRef(!1),c=te.useRef();c.current===void 0&&(c.current=n(a));let h,f=!1;(s.current!==a||l.current!==n||u.current!==i||d.current)&&(h=n(a),f=!i(c.current,h)),_8(()=>{f&&(c.current=h),s.current=a,l.current=n,u.current=i,d.current=!1});const g=te.useRef(a);_8(()=>{const m=()=>{try{const v=t.getState(),b=l.current(v);u.current(c.current,b)||(s.current=v,c.current=b,o())}catch{d.current=!0,o()}},p=t.subscribe(m);return t.getState()!==g.current&&m(),p},[]);const y=f?h:c.current;return te.useDebugValue(y),y};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[r,t];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},r}var Ere={exports:{}},_L={exports:{}},SL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S8;function kSe(){return S8||(S8=1,function(e){function t(z,V){var j=z.length;z.push(V);e:for(;0<j;){var H=j-1>>>1,Y=z[H];if(0<i(Y,V))z[H]=V,z[j]=Y,j=H;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var V=z[0],j=z.pop();if(j!==V){z[0]=j;e:for(var H=0,Y=z.length,Q=Y>>>1;H<Q;){var $=2*(H+1)-1,ne=z[$],Z=$+1,ce=z[Z];if(0>i(ne,j))Z<Y&&0>i(ce,ne)?(z[H]=ce,z[Z]=j,H=Z):(z[H]=ne,z[$]=j,H=$);else if(Z<Y&&0>i(ce,j))z[H]=ce,z[Z]=j,H=Z;else break e}}return V}function i(z,V){var j=z.sortIndex-V.sortIndex;return j!==0?j:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],d=1,c=null,h=3,f=!1,g=!1,y=!1,m=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var V=r(u);V!==null;){if(V.callback===null)n(u);else if(V.startTime<=z)n(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=r(u)}}function x(z){if(y=!1,b(z),!g)if(r(l)!==null)g=!0,W(_);else{var V=r(u);V!==null&&G(x,V.startTime-z)}}function _(z,V){g=!1,y&&(y=!1,p(T),T=-1),f=!0;var j=h;try{for(b(V),c=r(l);c!==null&&(!(c.expirationTime>V)||z&&!D());){var H=c.callback;if(typeof H=="function"){c.callback=null,h=c.priorityLevel;var Y=H(c.expirationTime<=V);V=e.unstable_now(),typeof Y=="function"?c.callback=Y:c===r(l)&&n(l),b(V)}else n(l);c=r(l)}if(c!==null)var Q=!0;else{var $=r(u);$!==null&&G(x,$.startTime-V),Q=!1}return Q}finally{c=null,h=j,f=!1}}var A=!1,M=null,T=-1,C=5,E=-1;function D(){return!(e.unstable_now()-E<C)}function I(){if(M!==null){var z=e.unstable_now();E=z;var V=!0;try{V=M(!0,z)}finally{V?k():(A=!1,M=null)}}else A=!1}var k;if(typeof v=="function")k=function(){v(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,U=L.port2;L.port1.onmessage=I,k=function(){U.postMessage(null)}}else k=function(){m(I,0)};function W(z){M=z,A||(A=!0,k())}function G(z,V){T=m(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,W(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var j=h;h=V;try{return z()}finally{h=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=h;h=z;try{return V()}finally{h=j}},e.unstable_scheduleCallback=function(z,V,j){var H=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=j+Y,z={id:d++,callback:V,priorityLevel:z,startTime:j,expirationTime:Y,sortIndex:-1},j>H?(z.sortIndex=j,t(u,z),r(l)===null&&z===r(u)&&(y?(p(T),T=-1):y=!0,G(x,j-H))):(z.sortIndex=Y,t(l,z),g||f||(g=!0,W(_))),z},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(z){var V=h;return function(){var j=h;h=V;try{return z.apply(this,arguments)}finally{h=j}}}}(SL)),SL}var A8;function FSe(){return A8||(A8=1,_L.exports=kSe()),_L.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zSe=function(t){var r={},n=te,i=FSe(),o=Object.assign;function a(w){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+w,P=1;P<arguments.length;P++)S+="&args[]="+encodeURIComponent(arguments[P]);return"Minified React error #"+w+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),_=Symbol.iterator;function A(w){return w===null||typeof w!="object"?null:(w=_&&w[_]||w["@@iterator"],typeof w=="function"?w:null)}function M(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case d:return"Fragment";case u:return"Portal";case h:return"Profiler";case c:return"StrictMode";case m:return"Suspense";case p:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case g:return(w.displayName||"Context")+".Consumer";case f:return(w._context.displayName||"Context")+".Provider";case y:var S=w.render;return w=w.displayName,w||(w=S.displayName||S.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case v:return S=w.displayName||null,S!==null?S:M(w.type)||"Memo";case b:S=w._payload,w=w._init;try{return M(w(S))}catch{}}return null}function T(w){var S=w.type;switch(w.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=S.render,w=w.displayName||w.name||"",S.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(S);case 8:return S===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function C(w){var S=w,P=w;if(w.alternate)for(;S.return;)S=S.return;else{w=S;do S=w,S.flags&4098&&(P=S.return),w=S.return;while(w)}return S.tag===3?P:null}function E(w){if(C(w)!==w)throw Error(a(188))}function D(w){var S=w.alternate;if(!S){if(S=C(w),S===null)throw Error(a(188));return S!==w?null:w}for(var P=w,R=S;;){var N=P.return;if(N===null)break;var F=N.alternate;if(F===null){if(R=N.return,R!==null){P=R;continue}break}if(N.child===F.child){for(F=N.child;F;){if(F===P)return E(N),w;if(F===R)return E(N),S;F=F.sibling}throw Error(a(188))}if(P.return!==R.return)P=N,R=F;else{for(var K=!1,ee=N.child;ee;){if(ee===P){K=!0,P=N,R=F;break}if(ee===R){K=!0,R=N,P=F;break}ee=ee.sibling}if(!K){for(ee=F.child;ee;){if(ee===P){K=!0,P=F,R=N;break}if(ee===R){K=!0,R=F,P=N;break}ee=ee.sibling}if(!K)throw Error(a(189))}}if(P.alternate!==R)throw Error(a(190))}if(P.tag!==3)throw Error(a(188));return P.stateNode.current===P?w:S}function I(w){return w=D(w),w!==null?k(w):null}function k(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var S=k(w);if(S!==null)return S;w=w.sibling}return null}function L(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var S=L(w);if(S!==null)return S}w=w.sibling}return null}var U=Array.isArray,W=t.getPublicInstance,G=t.getRootHostContext,z=t.getChildHostContext,V=t.prepareForCommit,j=t.resetAfterCommit,H=t.createInstance,Y=t.appendInitialChild,Q=t.finalizeInitialChildren,$=t.prepareUpdate,ne=t.shouldSetTextContent,Z=t.createTextInstance,ce=t.scheduleTimeout,ae=t.cancelTimeout,ie=t.noTimeout,le=t.isPrimaryRenderer,se=t.supportsMutation,re=t.supportsPersistence,ye=t.supportsHydration,be=t.getInstanceFromNode,_e=t.preparePortalMount,Se=t.getCurrentEventPriority,Fe=t.detachDeletedInstance,Re=t.supportsMicrotasks,Le=t.scheduleMicrotask,rt=t.supportsTestSelectors,st=t.findFiberRoot,he=t.getBoundingRect,q=t.getTextContent,J=t.isHiddenSubtree,ge=t.matchAccessibilityRole,Pe=t.setFocusIfFocusable,De=t.setupIntersectionObserver,Ve=t.appendChild,et=t.appendChildToContainer,Ce=t.commitTextUpdate,Je=t.commitMount,ut=t.commitUpdate,pt=t.insertBefore,Ke=t.insertInContainerBefore,gt=t.removeChild,we=t.removeChildFromContainer,Xe=t.resetTextContent,nt=t.hideInstance,fe=t.hideTextInstance,Be=t.unhideInstance,de=t.unhideTextInstance,Ye=t.clearContainer,$e=t.cloneInstance,ze=t.createContainerChildSet,ct=t.appendChildToContainerChildSet,At=t.finalizeContainerChildren,rr=t.replaceContainerChildren,Gt=t.cloneHiddenInstance,Lr=t.cloneHiddenTextInstance,nr=t.canHydrateInstance,on=t.canHydrateTextInstance,bi=t.canHydrateSuspenseInstance,dl=t.isSuspenseInstancePending,Ka=t.isSuspenseInstanceFallback,me=t.registerSuspenseInstanceRetry,qe=t.getNextHydratableSibling,it=t.getFirstHydratableChild,je=t.getFirstHydratableChildWithinContainer,at=t.getFirstHydratableChildWithinSuspenseInstance,Ft=t.hydrateInstance,ur=t.hydrateTextInstance,er=t.hydrateSuspenseInstance,ue=t.getNextHydratableInstanceAfterSuspenseInstance,Ie=t.commitHydratedContainer,Ne=t.commitHydratedSuspenseInstance,Ue=t.clearSuspenseBoundary,Ge=t.clearSuspenseBoundaryFromContainer,yt=t.shouldDeleteUnhydratedTailInstances,It=t.didNotMatchHydratedContainerTextInstance,Ut=t.didNotMatchHydratedTextInstance,Ot;function xt(w){if(Ot===void 0)try{throw Error()}catch(P){var S=P.stack.trim().match(/\n( *(at )?)/);Ot=S&&S[1]||""}return`
`+Ot+w}var qt=!1;function ar(w,S){if(!w||qt)return"";qt=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(ve){var R=ve}Reflect.construct(w,[],S)}else{try{S.call()}catch(ve){R=ve}w.call(S.prototype)}else{try{throw Error()}catch(ve){R=ve}w()}}catch(ve){if(ve&&R&&typeof ve.stack=="string"){for(var N=ve.stack.split(`
`),F=R.stack.split(`
`),K=N.length-1,ee=F.length-1;1<=K&&0<=ee&&N[K]!==F[ee];)ee--;for(;1<=K&&0<=ee;K--,ee--)if(N[K]!==F[ee]){if(K!==1||ee!==1)do if(K--,ee--,0>ee||N[K]!==F[ee]){var oe=`
`+N[K].replace(" at new "," at ");return w.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",w.displayName)),oe}while(1<=K&&0<=ee);break}}}finally{qt=!1,Error.prepareStackTrace=P}return(w=w?w.displayName||w.name:"")?xt(w):""}var zr=Object.prototype.hasOwnProperty,an=[],Ur=-1;function tn(w){return{current:w}}function Bt(w){0>Ur||(w.current=an[Ur],an[Ur]=null,Ur--)}function Tt(w,S){Ur++,an[Ur]=w.current,w.current=S}var Ii={},Xt=tn(Ii),mr=tn(!1),Vr=Ii;function kr(w,S){var P=w.type.contextTypes;if(!P)return Ii;var R=w.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===S)return R.__reactInternalMemoizedMaskedChildContext;var N={},F;for(F in P)N[F]=S[F];return R&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=S,w.__reactInternalMemoizedMaskedChildContext=N),N}function cn(w){return w=w.childContextTypes,w!=null}function sn(){Bt(mr),Bt(Xt)}function Xi(w,S,P){if(Xt.current!==Ii)throw Error(a(168));Tt(Xt,S),Tt(mr,P)}function hl(w,S,P){var R=w.stateNode;if(S=S.childContextTypes,typeof R.getChildContext!="function")return P;R=R.getChildContext();for(var N in R)if(!(N in S))throw Error(a(108,T(w)||"Unknown",N));return o({},P,R)}function ii(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||Ii,Vr=Xt.current,Tt(Xt,w),Tt(mr,mr.current),!0}function Gh(w,S,P){var R=w.stateNode;if(!R)throw Error(a(169));P?(w=hl(w,S,Vr),R.__reactInternalMemoizedMergedChildContext=w,Bt(mr),Bt(Xt),Tt(Xt,w)):Bt(mr),Tt(mr,P)}var Oo=Math.clz32?Math.clz32:WI,Wh=Math.log,GI=Math.LN2;function WI(w){return w>>>=0,w===0?32:31-(Wh(w)/GI|0)|0}var q0=64,X0=4194304;function om(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function am(w,S){var P=w.pendingLanes;if(P===0)return 0;var R=0,N=w.suspendedLanes,F=w.pingedLanes,K=P&268435455;if(K!==0){var ee=K&~N;ee!==0?R=om(ee):(F&=K,F!==0&&(R=om(F)))}else K=P&~N,K!==0?R=om(K):F!==0&&(R=om(F));if(R===0)return 0;if(S!==0&&S!==R&&!(S&N)&&(N=R&-R,F=S&-S,N>=F||N===16&&(F&4194240)!==0))return S;if(R&4&&(R|=P&16),S=w.entangledLanes,S!==0)for(w=w.entanglements,S&=R;0<S;)P=31-Oo(S),N=1<<P,R|=w[P],S&=~N;return R}function pd(w,S){switch(w){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y0(w,S){for(var P=w.suspendedLanes,R=w.pingedLanes,N=w.expirationTimes,F=w.pendingLanes;0<F;){var K=31-Oo(F),ee=1<<K,oe=N[K];oe===-1?(!(ee&P)||ee&R)&&(N[K]=pd(ee,S)):oe<=S&&(w.expiredLanes|=ee),F&=~ee}}function K0(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function J0(w){for(var S=[],P=0;31>P;P++)S.push(w);return S}function qh(w,S,P){w.pendingLanes|=S,S!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,S=31-Oo(S),w[S]=P}function iC(w,S){var P=w.pendingLanes&~S;w.pendingLanes=S,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=S,w.mutableReadLanes&=S,w.entangledLanes&=S,S=w.entanglements;var R=w.eventTimes;for(w=w.expirationTimes;0<P;){var N=31-Oo(P),F=1<<N;S[N]=0,R[N]=-1,w[N]=-1,P&=~F}}function sm(w,S){var P=w.entangledLanes|=S;for(w=w.entanglements;P;){var R=31-Oo(P),N=1<<R;N&S|w[R]&S&&(w[R]|=S),P&=~N}}var Gr=0;function oC(w){return w&=-w,1<w?4<w?w&268435455?16:536870912:4:1}var Q0=i.unstable_scheduleCallback,lm=i.unstable_cancelCallback,qI=i.unstable_shouldYield,aC=i.unstable_requestPaint,oi=i.unstable_now,um=i.unstable_ImmediatePriority,k1=i.unstable_UserBlockingPriority,F1=i.unstable_NormalPriority,XI=i.unstable_IdlePriority,Z0=null,fl=null;function YI(w){if(fl&&typeof fl.onCommitFiberRoot=="function")try{fl.onCommitFiberRoot(Z0,w,void 0,(w.current.flags&128)===128)}catch{}}function KI(w,S){return w===S&&(w!==0||1/w===1/S)||w!==w&&S!==S}var pl=typeof Object.is=="function"?Object.is:KI,tu=null,Os=!1,$0=!1;function sC(w){tu===null?tu=[w]:tu.push(w)}function JI(w){Os=!0,sC(w)}function Rs(){if(!$0&&tu!==null){$0=!0;var w=0,S=Gr;try{var P=tu;for(Gr=1;w<P.length;w++){var R=P[w];do R=R(!0);while(R!==null)}tu=null,Os=!1}catch(N){throw tu!==null&&(tu=tu.slice(w+1)),Q0(um,Rs),N}finally{Gr=S,$0=!1}}return null}var z1=s.ReactCurrentBatchConfig;function ev(w,S){if(pl(w,S))return!0;if(typeof w!="object"||w===null||typeof S!="object"||S===null)return!1;var P=Object.keys(w),R=Object.keys(S);if(P.length!==R.length)return!1;for(R=0;R<P.length;R++){var N=P[R];if(!zr.call(S,N)||!pl(w[N],S[N]))return!1}return!0}function QI(w){switch(w.tag){case 5:return xt(w.type);case 16:return xt("Lazy");case 13:return xt("Suspense");case 19:return xt("SuspenseList");case 0:case 2:case 15:return w=ar(w.type,!1),w;case 11:return w=ar(w.type.render,!1),w;case 1:return w=ar(w.type,!0),w;default:return""}}function Ja(w,S){if(w&&w.defaultProps){S=o({},S),w=w.defaultProps;for(var P in w)S[P]===void 0&&(S[P]=w[P]);return S}return S}var md=tn(null),cm=null,gd=null,U1=null;function tv(){U1=gd=cm=null}function tc(w,S,P){le?(Tt(md,S._currentValue),S._currentValue=P):(Tt(md,S._currentValue2),S._currentValue2=P)}function Xh(w){var S=md.current;Bt(md),le?w._currentValue=S:w._currentValue2=S}function dm(w,S,P){for(;w!==null;){var R=w.alternate;if((w.childLanes&S)!==S?(w.childLanes|=S,R!==null&&(R.childLanes|=S)):R!==null&&(R.childLanes&S)!==S&&(R.childLanes|=S),w===P)break;w=w.return}}function Yh(w,S){cm=w,U1=gd=null,w=w.dependencies,w!==null&&w.firstContext!==null&&(w.lanes&S&&(va=!0),w.firstContext=null)}function fa(w){var S=le?w._currentValue:w._currentValue2;if(U1!==w)if(w={context:w,memoizedValue:S,next:null},gd===null){if(cm===null)throw Error(a(308));gd=w,cm.dependencies={lanes:0,firstContext:w}}else gd=gd.next=w;return S}var ml=null,rc=!1;function hm(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rv(w,S){w=w.updateQueue,S.updateQueue===w&&(S.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function Is(w,S){return{eventTime:w,lane:S,tag:0,payload:null,callback:null,next:null}}function nc(w,S){var P=w.updateQueue;P!==null&&(P=P.shared,Xn!==null&&w.mode&1&&!(Tr&2)?(w=P.interleaved,w===null?(S.next=S,ml===null?ml=[P]:ml.push(P)):(S.next=w.next,w.next=S),P.interleaved=S):(w=P.pending,w===null?S.next=S:(S.next=w.next,w.next=S),P.pending=S))}function fm(w,S,P){if(S=S.updateQueue,S!==null&&(S=S.shared,(P&4194240)!==0)){var R=S.lanes;R&=w.pendingLanes,P|=R,S.lanes=P,sm(w,P)}}function lC(w,S){var P=w.updateQueue,R=w.alternate;if(R!==null&&(R=R.updateQueue,P===R)){var N=null,F=null;if(P=P.firstBaseUpdate,P!==null){do{var K={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};F===null?N=F=K:F=F.next=K,P=P.next}while(P!==null);F===null?N=F=S:F=F.next=S}else N=F=S;P={baseState:R.baseState,firstBaseUpdate:N,lastBaseUpdate:F,shared:R.shared,effects:R.effects},w.updateQueue=P;return}w=P.lastBaseUpdate,w===null?P.firstBaseUpdate=S:w.next=S,P.lastBaseUpdate=S}function nv(w,S,P,R){var N=w.updateQueue;rc=!1;var F=N.firstBaseUpdate,K=N.lastBaseUpdate,ee=N.shared.pending;if(ee!==null){N.shared.pending=null;var oe=ee,ve=oe.next;oe.next=null,K===null?F=ve:K.next=ve,K=oe;var xe=w.alternate;xe!==null&&(xe=xe.updateQueue,ee=xe.lastBaseUpdate,ee!==K&&(ee===null?xe.firstBaseUpdate=ve:ee.next=ve,xe.lastBaseUpdate=oe))}if(F!==null){var Te=N.baseState;K=0,xe=ve=oe=null,ee=F;do{var Me=ee.lane,He=ee.eventTime;if((R&Me)===Me){xe!==null&&(xe=xe.next={eventTime:He,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var Ze=w,bt=ee;switch(Me=S,He=P,bt.tag){case 1:if(Ze=bt.payload,typeof Ze=="function"){Te=Ze.call(He,Te,Me);break e}Te=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=bt.payload,Me=typeof Ze=="function"?Ze.call(He,Te,Me):Ze,Me==null)break e;Te=o({},Te,Me);break e;case 2:rc=!0}}ee.callback!==null&&ee.lane!==0&&(w.flags|=64,Me=N.effects,Me===null?N.effects=[ee]:Me.push(ee))}else He={eventTime:He,lane:Me,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},xe===null?(ve=xe=He,oe=Te):xe=xe.next=He,K|=Me;if(ee=ee.next,ee===null){if(ee=N.shared.pending,ee===null)break;Me=ee,ee=Me.next,Me.next=null,N.lastBaseUpdate=Me,N.shared.pending=null}}while(!0);if(xe===null&&(oe=Te),N.baseState=oe,N.firstBaseUpdate=ve,N.lastBaseUpdate=xe,S=N.shared.interleaved,S!==null){N=S;do K|=N.lane,N=N.next;while(N!==S)}else F===null&&(N.shared.lanes=0);ff|=K,w.lanes=K,w.memoizedState=Te}}function uC(w,S,P){if(w=S.effects,S.effects=null,w!==null)for(S=0;S<w.length;S++){var R=w[S],N=R.callback;if(N!==null){if(R.callback=null,R=P,typeof N!="function")throw Error(a(191,N));N.call(R)}}}var cC=new n.Component().refs;function V1(w,S,P,R){S=w.memoizedState,P=P(R,S),P=P==null?S:o({},S,P),w.memoizedState=P,w.lanes===0&&(w.updateQueue.baseState=P)}var pm={isMounted:function(w){return(w=w._reactInternals)?C(w)===w:!1},enqueueSetState:function(w,S,P){w=w._reactInternals;var R=Io(),N=hc(w),F=Is(R,N);F.payload=S,P!=null&&(F.callback=P),nc(w,F),S=ns(w,N,R),S!==null&&fm(S,w,N)},enqueueReplaceState:function(w,S,P){w=w._reactInternals;var R=Io(),N=hc(w),F=Is(R,N);F.tag=1,F.payload=S,P!=null&&(F.callback=P),nc(w,F),S=ns(w,N,R),S!==null&&fm(S,w,N)},enqueueForceUpdate:function(w,S){w=w._reactInternals;var P=Io(),R=hc(w),N=Is(P,R);N.tag=2,S!=null&&(N.callback=S),nc(w,N),S=ns(w,R,P),S!==null&&fm(S,w,R)}};function j1(w,S,P,R,N,F,K){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(R,F,K):S.prototype&&S.prototype.isPureReactComponent?!ev(P,R)||!ev(N,F):!0}function iv(w,S,P){var R=!1,N=Ii,F=S.contextType;return typeof F=="object"&&F!==null?F=fa(F):(N=cn(S)?Vr:Xt.current,R=S.contextTypes,F=(R=R!=null)?kr(w,N):Ii),S=new S(P,F),w.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=pm,w.stateNode=S,S._reactInternals=w,R&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=N,w.__reactInternalMemoizedMaskedChildContext=F),S}function ov(w,S,P,R){w=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(P,R),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(P,R),S.state!==w&&pm.enqueueReplaceState(S,S.state,null)}function H1(w,S,P,R){var N=w.stateNode;N.props=P,N.state=w.memoizedState,N.refs=cC,hm(w);var F=S.contextType;typeof F=="object"&&F!==null?N.context=fa(F):(F=cn(S)?Vr:Xt.current,N.context=kr(w,F)),N.state=w.memoizedState,F=S.getDerivedStateFromProps,typeof F=="function"&&(V1(w,S,F,P),N.state=w.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(S=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),S!==N.state&&pm.enqueueReplaceState(N,N.state,null),nv(w,P,N,R),N.state=w.memoizedState),typeof N.componentDidMount=="function"&&(w.flags|=4194308)}var Kh=[],ic=0,Jh=null,av=0,po=[],Qa=0,oc=null,ai=1,gl="";function vd(w,S){Kh[ic++]=av,Kh[ic++]=Jh,Jh=w,av=S}function G1(w,S,P){po[Qa++]=ai,po[Qa++]=gl,po[Qa++]=oc,oc=w;var R=ai;w=gl;var N=32-Oo(R)-1;R&=~(1<<N),P+=1;var F=32-Oo(S)+N;if(30<F){var K=N-N%5;F=(R&(1<<K)-1).toString(32),R>>=K,N-=K,ai=1<<32-Oo(S)+N|P<<N|R,gl=F+w}else ai=1<<F|P<<N|R,gl=w}function yd(w){w.return!==null&&(vd(w,1),G1(w,1,0))}function W1(w){for(;w===Jh;)Jh=Kh[--ic],Kh[ic]=null,av=Kh[--ic],Kh[ic]=null;for(;w===oc;)oc=po[--Qa],po[Qa]=null,gl=po[--Qa],po[Qa]=null,ai=po[--Qa],po[Qa]=null}var pa=null,ma=null,wn=!1,bd=!1,Ls=null;function sv(w,S){var P=ba(5,null,null,0);P.elementType="DELETED",P.stateNode=S,P.return=w,S=w.deletions,S===null?(w.deletions=[P],w.flags|=16):S.push(P)}function dC(w,S){switch(w.tag){case 5:return S=nr(S,w.type,w.pendingProps),S!==null?(w.stateNode=S,pa=w,ma=it(S),!0):!1;case 6:return S=on(S,w.pendingProps),S!==null?(w.stateNode=S,pa=w,ma=null,!0):!1;case 13:if(S=bi(S),S!==null){var P=oc!==null?{id:ai,overflow:gl}:null;return w.memoizedState={dehydrated:S,treeContext:P,retryLane:1073741824},P=ba(18,null,null,0),P.stateNode=S,P.return=w,w.child=P,pa=w,ma=null,!0}return!1;default:return!1}}function lv(w){return(w.mode&1)!==0&&(w.flags&128)===0}function Qh(w){if(wn){var S=ma;if(S){var P=S;if(!dC(w,S)){if(lv(w))throw Error(a(418));S=qe(P);var R=pa;S&&dC(w,S)?sv(R,P):(w.flags=w.flags&-4097|2,wn=!1,pa=w)}}else{if(lv(w))throw Error(a(418));w.flags=w.flags&-4097|2,wn=!1,pa=w}}}function uv(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;pa=w}function Zh(w){if(!ye||w!==pa)return!1;if(!wn)return uv(w),wn=!0,!1;if(w.tag!==3&&(w.tag!==5||yt(w.type)&&!ne(w.type,w.memoizedProps))){var S=ma;if(S){if(lv(w)){for(w=ma;w;)w=qe(w);throw Error(a(418))}for(;S;)sv(w,S),S=qe(S)}}if(uv(w),w.tag===13){if(!ye)throw Error(a(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));ma=ue(w)}else ma=pa?qe(w.stateNode):null;return!0}function $h(){ye&&(ma=pa=null,bd=wn=!1)}function q1(w){Ls===null?Ls=[w]:Ls.push(w)}function mm(w,S,P){if(w=P.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(P._owner){if(P=P._owner,P){if(P.tag!==1)throw Error(a(309));var R=P.stateNode}if(!R)throw Error(a(147,w));var N=R,F=""+w;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===F?S.ref:(S=function(K){var ee=N.refs;ee===cC&&(ee=N.refs={}),K===null?delete ee[F]:ee[F]=K},S._stringRef=F,S)}if(typeof w!="string")throw Error(a(284));if(!P._owner)throw Error(a(290,w))}return w}function cv(w,S){throw w=Object.prototype.toString.call(S),Error(a(31,w==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":w))}function dv(w){var S=w._init;return S(w._payload)}function hC(w){function S(Oe,Ee){if(w){var ke=Oe.deletions;ke===null?(Oe.deletions=[Ee],Oe.flags|=16):ke.push(Ee)}}function P(Oe,Ee){if(!w)return null;for(;Ee!==null;)S(Oe,Ee),Ee=Ee.sibling;return null}function R(Oe,Ee){for(Oe=new Map;Ee!==null;)Ee.key!==null?Oe.set(Ee.key,Ee):Oe.set(Ee.index,Ee),Ee=Ee.sibling;return Oe}function N(Oe,Ee){return Oe=au(Oe,Ee),Oe.index=0,Oe.sibling=null,Oe}function F(Oe,Ee,ke){return Oe.index=ke,w?(ke=Oe.alternate,ke!==null?(ke=ke.index,ke<Ee?(Oe.flags|=2,Ee):ke):(Oe.flags|=2,Ee)):(Oe.flags|=1048576,Ee)}function K(Oe){return w&&Oe.alternate===null&&(Oe.flags|=2),Oe}function ee(Oe,Ee,ke,mt){return Ee===null||Ee.tag!==6?(Ee=zm(ke,Oe.mode,mt),Ee.return=Oe,Ee):(Ee=N(Ee,ke),Ee.return=Oe,Ee)}function oe(Oe,Ee,ke,mt){var wt=ke.type;return wt===d?xe(Oe,Ee,ke.props.children,mt,ke.key):Ee!==null&&(Ee.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===b&&dv(wt)===Ee.type)?(mt=N(Ee,ke.props),mt.ref=mm(Oe,Ee,ke),mt.return=Oe,mt):(mt=zv(ke.type,ke.key,ke.props,null,Oe.mode,mt),mt.ref=mm(Oe,Ee,ke),mt.return=Oe,mt)}function ve(Oe,Ee,ke,mt){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==ke.containerInfo||Ee.stateNode.implementation!==ke.implementation?(Ee=Iw(ke,Oe.mode,mt),Ee.return=Oe,Ee):(Ee=N(Ee,ke.children||[]),Ee.return=Oe,Ee)}function xe(Oe,Ee,ke,mt,wt){return Ee===null||Ee.tag!==7?(Ee=Td(ke,Oe.mode,mt,wt),Ee.return=Oe,Ee):(Ee=N(Ee,ke),Ee.return=Oe,Ee)}function Te(Oe,Ee,ke){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ee=zm(""+Ee,Oe.mode,ke),Ee.return=Oe,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:return ke=zv(Ee.type,Ee.key,Ee.props,null,Oe.mode,ke),ke.ref=mm(Oe,null,Ee),ke.return=Oe,ke;case u:return Ee=Iw(Ee,Oe.mode,ke),Ee.return=Oe,Ee;case b:var mt=Ee._init;return Te(Oe,mt(Ee._payload),ke)}if(U(Ee)||A(Ee))return Ee=Td(Ee,Oe.mode,ke,null),Ee.return=Oe,Ee;cv(Oe,Ee)}return null}function Me(Oe,Ee,ke,mt){var wt=Ee!==null?Ee.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return wt!==null?null:ee(Oe,Ee,""+ke,mt);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:return ke.key===wt?oe(Oe,Ee,ke,mt):null;case u:return ke.key===wt?ve(Oe,Ee,ke,mt):null;case b:return wt=ke._init,Me(Oe,Ee,wt(ke._payload),mt)}if(U(ke)||A(ke))return wt!==null?null:xe(Oe,Ee,ke,mt,null);cv(Oe,ke)}return null}function He(Oe,Ee,ke,mt,wt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return Oe=Oe.get(ke)||null,ee(Ee,Oe,""+mt,wt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case l:return Oe=Oe.get(mt.key===null?ke:mt.key)||null,oe(Ee,Oe,mt,wt);case u:return Oe=Oe.get(mt.key===null?ke:mt.key)||null,ve(Ee,Oe,mt,wt);case b:var Mt=mt._init;return He(Oe,Ee,ke,Mt(mt._payload),wt)}if(U(mt)||A(mt))return Oe=Oe.get(ke)||null,xe(Ee,Oe,mt,wt,null);cv(Ee,mt)}return null}function Ze(Oe,Ee,ke,mt){for(var wt=null,Mt=null,Et=Ee,Zt=Ee=0,rn=null;Et!==null&&Zt<ke.length;Zt++){Et.index>Zt?(rn=Et,Et=null):rn=Et.sibling;var br=Me(Oe,Et,ke[Zt],mt);if(br===null){Et===null&&(Et=rn);break}w&&Et&&br.alternate===null&&S(Oe,Et),Ee=F(br,Ee,Zt),Mt===null?wt=br:Mt.sibling=br,Mt=br,Et=rn}if(Zt===ke.length)return P(Oe,Et),wn&&vd(Oe,Zt),wt;if(Et===null){for(;Zt<ke.length;Zt++)Et=Te(Oe,ke[Zt],mt),Et!==null&&(Ee=F(Et,Ee,Zt),Mt===null?wt=Et:Mt.sibling=Et,Mt=Et);return wn&&vd(Oe,Zt),wt}for(Et=R(Oe,Et);Zt<ke.length;Zt++)rn=He(Et,Oe,Zt,ke[Zt],mt),rn!==null&&(w&&rn.alternate!==null&&Et.delete(rn.key===null?Zt:rn.key),Ee=F(rn,Ee,Zt),Mt===null?wt=rn:Mt.sibling=rn,Mt=rn);return w&&Et.forEach(function(si){return S(Oe,si)}),wn&&vd(Oe,Zt),wt}function bt(Oe,Ee,ke,mt){var wt=A(ke);if(typeof wt!="function")throw Error(a(150));if(ke=wt.call(ke),ke==null)throw Error(a(151));for(var Mt=wt=null,Et=Ee,Zt=Ee=0,rn=null,br=ke.next();Et!==null&&!br.done;Zt++,br=ke.next()){Et.index>Zt?(rn=Et,Et=null):rn=Et.sibling;var si=Me(Oe,Et,br.value,mt);if(si===null){Et===null&&(Et=rn);break}w&&Et&&si.alternate===null&&S(Oe,Et),Ee=F(si,Ee,Zt),Mt===null?wt=si:Mt.sibling=si,Mt=si,Et=rn}if(br.done)return P(Oe,Et),wn&&vd(Oe,Zt),wt;if(Et===null){for(;!br.done;Zt++,br=ke.next())br=Te(Oe,br.value,mt),br!==null&&(Ee=F(br,Ee,Zt),Mt===null?wt=br:Mt.sibling=br,Mt=br);return wn&&vd(Oe,Zt),wt}for(Et=R(Oe,Et);!br.done;Zt++,br=ke.next())br=He(Et,Oe,Zt,br.value,mt),br!==null&&(w&&br.alternate!==null&&Et.delete(br.key===null?Zt:br.key),Ee=F(br,Ee,Zt),Mt===null?wt=br:Mt.sibling=br,Mt=br);return w&&Et.forEach(function(mc){return S(Oe,mc)}),wn&&vd(Oe,Zt),wt}function Nt(Oe,Ee,ke,mt){if(typeof ke=="object"&&ke!==null&&ke.type===d&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:e:{for(var wt=ke.key,Mt=Ee;Mt!==null;){if(Mt.key===wt){if(wt=ke.type,wt===d){if(Mt.tag===7){P(Oe,Mt.sibling),Ee=N(Mt,ke.props.children),Ee.return=Oe,Oe=Ee;break e}}else if(Mt.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===b&&dv(wt)===Mt.type){P(Oe,Mt.sibling),Ee=N(Mt,ke.props),Ee.ref=mm(Oe,Mt,ke),Ee.return=Oe,Oe=Ee;break e}P(Oe,Mt);break}else S(Oe,Mt);Mt=Mt.sibling}ke.type===d?(Ee=Td(ke.props.children,Oe.mode,mt,ke.key),Ee.return=Oe,Oe=Ee):(mt=zv(ke.type,ke.key,ke.props,null,Oe.mode,mt),mt.ref=mm(Oe,Ee,ke),mt.return=Oe,Oe=mt)}return K(Oe);case u:e:{for(Mt=ke.key;Ee!==null;){if(Ee.key===Mt)if(Ee.tag===4&&Ee.stateNode.containerInfo===ke.containerInfo&&Ee.stateNode.implementation===ke.implementation){P(Oe,Ee.sibling),Ee=N(Ee,ke.children||[]),Ee.return=Oe,Oe=Ee;break e}else{P(Oe,Ee);break}else S(Oe,Ee);Ee=Ee.sibling}Ee=Iw(ke,Oe.mode,mt),Ee.return=Oe,Oe=Ee}return K(Oe);case b:return Mt=ke._init,Nt(Oe,Ee,Mt(ke._payload),mt)}if(U(ke))return Ze(Oe,Ee,ke,mt);if(A(ke))return bt(Oe,Ee,ke,mt);cv(Oe,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"?(ke=""+ke,Ee!==null&&Ee.tag===6?(P(Oe,Ee.sibling),Ee=N(Ee,ke),Ee.return=Oe,Oe=Ee):(P(Oe,Ee),Ee=zm(ke,Oe.mode,mt),Ee.return=Oe,Oe=Ee),K(Oe)):P(Oe,Ee)}return Nt}var ef=hC(!0),fC=hC(!1),gm={},Za=tn(gm),Bs=tn(gm),tf=tn(gm);function $a(w){if(w===gm)throw Error(a(174));return w}function hv(w,S){Tt(tf,S),Tt(Bs,w),Tt(Za,gm),w=G(S),Bt(Za),Tt(Za,w)}function ac(){Bt(Za),Bt(Bs),Bt(tf)}function X1(w){var S=$a(tf.current),P=$a(Za.current);S=z(P,w.type,S),P!==S&&(Tt(Bs,w),Tt(Za,S))}function vm(w){Bs.current===w&&(Bt(Za),Bt(Bs))}var On=tn(0);function ym(w){for(var S=w;S!==null;){if(S.tag===13){var P=S.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||dl(P)||Ka(P)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if(S.flags&128)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var Y1=[];function es(){for(var w=0;w<Y1.length;w++){var S=Y1[w];le?S._workInProgressVersionPrimary=null:S._workInProgressVersionSecondary=null}Y1.length=0}var bm=s.ReactCurrentDispatcher,ga=s.ReactCurrentBatchConfig,vl=0,Rn=null,mo=null,xi=null,sc=!1,xm=!1,rf=0,ZI=0;function Yi(){throw Error(a(321))}function K1(w,S){if(S===null)return!1;for(var P=0;P<S.length&&P<w.length;P++)if(!pl(w[P],S[P]))return!1;return!0}function J1(w,S,P,R,N,F){if(vl=F,Rn=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,bm.current=w===null||w.memoizedState===null?wC:gv,w=P(R,N),xm){F=0;do{if(xm=!1,rf=0,25<=F)throw Error(a(301));F+=1,xi=mo=null,S.updateQueue=null,bm.current=t3,w=P(R,N)}while(xm)}if(bm.current=mv,S=mo!==null&&mo.next!==null,vl=0,xi=mo=Rn=null,sc=!1,S)throw Error(a(300));return w}function Q1(){var w=rf!==0;return rf=0,w}function Ns(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?Rn.memoizedState=xi=w:xi=xi.next=w,xi}function yl(){if(mo===null){var w=Rn.alternate;w=w!==null?w.memoizedState:null}else w=mo.next;var S=xi===null?Rn.memoizedState:xi.next;if(S!==null)xi=S,mo=w;else{if(w===null)throw Error(a(310));mo=w,w={memoizedState:mo.memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},xi===null?Rn.memoizedState=xi=w:xi=xi.next=w}return xi}function lc(w,S){return typeof S=="function"?S(w):S}function wm(w){var S=yl(),P=S.queue;if(P===null)throw Error(a(311));P.lastRenderedReducer=w;var R=mo,N=R.baseQueue,F=P.pending;if(F!==null){if(N!==null){var K=N.next;N.next=F.next,F.next=K}R.baseQueue=N=F,P.pending=null}if(N!==null){F=N.next,R=R.baseState;var ee=K=null,oe=null,ve=F;do{var xe=ve.lane;if((vl&xe)===xe)oe!==null&&(oe=oe.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),R=ve.hasEagerState?ve.eagerState:w(R,ve.action);else{var Te={lane:xe,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};oe===null?(ee=oe=Te,K=R):oe=oe.next=Te,Rn.lanes|=xe,ff|=xe}ve=ve.next}while(ve!==null&&ve!==F);oe===null?K=R:oe.next=ee,pl(R,S.memoizedState)||(va=!0),S.memoizedState=R,S.baseState=K,S.baseQueue=oe,P.lastRenderedState=R}if(w=P.interleaved,w!==null){N=w;do F=N.lane,Rn.lanes|=F,ff|=F,N=N.next;while(N!==w)}else N===null&&(P.lanes=0);return[S.memoizedState,P.dispatch]}function _m(w){var S=yl(),P=S.queue;if(P===null)throw Error(a(311));P.lastRenderedReducer=w;var R=P.dispatch,N=P.pending,F=S.memoizedState;if(N!==null){P.pending=null;var K=N=N.next;do F=w(F,K.action),K=K.next;while(K!==N);pl(F,S.memoizedState)||(va=!0),S.memoizedState=F,S.baseQueue===null&&(S.baseState=F),P.lastRenderedState=F}return[F,R]}function nf(){}function Z1(w,S){var P=Rn,R=yl(),N=S(),F=!pl(R.memoizedState,N);if(F&&(R.memoizedState=N,va=!0),R=R.queue,af($1.bind(null,P,R,w),[w]),R.getSnapshot!==S||F||xi!==null&&xi.memoizedState.tag&1){if(P.flags|=2048,xd(9,ks.bind(null,P,R,N,S),void 0,null),Xn===null)throw Error(a(349));vl&30||wi(P,S,N)}return N}function wi(w,S,P){w.flags|=16384,w={getSnapshot:S,value:P},S=Rn.updateQueue,S===null?(S={lastEffect:null,stores:null},Rn.updateQueue=S,S.stores=[w]):(P=S.stores,P===null?S.stores=[w]:P.push(w))}function ks(w,S,P,R){S.value=P,S.getSnapshot=R,pC(S)&&ns(w,1,-1)}function $1(w,S,P){return P(function(){pC(S)&&ns(w,1,-1)})}function pC(w){var S=w.getSnapshot;w=w.value;try{var P=S();return!pl(w,P)}catch{return!0}}function ew(w){var S=Ns();return typeof w=="function"&&(w=w()),S.memoizedState=S.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lc,lastRenderedState:w},S.queue=w,w=w.dispatch=e3.bind(null,Rn,w),[S.memoizedState,w]}function xd(w,S,P,R){return w={tag:w,create:S,destroy:P,deps:R,next:null},S=Rn.updateQueue,S===null?(S={lastEffect:null,stores:null},Rn.updateQueue=S,S.lastEffect=w.next=w):(P=S.lastEffect,P===null?S.lastEffect=w.next=w:(R=P.next,P.next=w,w.next=R,S.lastEffect=w)),w}function tw(){return yl().memoizedState}function Fs(w,S,P,R){var N=Ns();Rn.flags|=w,N.memoizedState=xd(1|S,P,void 0,R===void 0?null:R)}function Sm(w,S,P,R){var N=yl();R=R===void 0?null:R;var F=void 0;if(mo!==null){var K=mo.memoizedState;if(F=K.destroy,R!==null&&K1(R,K.deps)){N.memoizedState=xd(S,P,F,R);return}}Rn.flags|=w,N.memoizedState=xd(1|S,P,F,R)}function of(w,S){return Fs(8390656,8,w,S)}function af(w,S){return Sm(2048,8,w,S)}function fv(w,S){return Sm(4,2,w,S)}function rw(w,S){return Sm(4,4,w,S)}function mC(w,S){if(typeof S=="function")return w=w(),S(w),function(){S(null)};if(S!=null)return w=w(),S.current=w,function(){S.current=null}}function ru(w,S,P){return P=P!=null?P.concat([w]):null,Sm(4,4,mC.bind(null,S,w),P)}function pv(){}function gC(w,S){var P=yl();S=S===void 0?null:S;var R=P.memoizedState;return R!==null&&S!==null&&K1(S,R[1])?R[0]:(P.memoizedState=[w,S],w)}function vC(w,S){var P=yl();S=S===void 0?null:S;var R=P.memoizedState;return R!==null&&S!==null&&K1(S,R[1])?R[0]:(w=w(),P.memoizedState=[w,S],w)}function sf(w,S){var P=Gr;Gr=P!==0&&4>P?P:4,w(!0);var R=ga.transition;ga.transition={};try{w(!1),S()}finally{Gr=P,ga.transition=R}}function nw(){return yl().memoizedState}function $I(w,S,P){var R=hc(w);P={lane:R,action:P,hasEagerState:!1,eagerState:null,next:null},yC(w)?Am(S,P):(bC(w,S,P),P=Io(),w=ns(w,R,P),w!==null&&xC(w,S,R))}function e3(w,S,P){var R=hc(w),N={lane:R,action:P,hasEagerState:!1,eagerState:null,next:null};if(yC(w))Am(S,N);else{bC(w,S,N);var F=w.alternate;if(w.lanes===0&&(F===null||F.lanes===0)&&(F=S.lastRenderedReducer,F!==null))try{var K=S.lastRenderedState,ee=F(K,P);if(N.hasEagerState=!0,N.eagerState=ee,pl(ee,K))return}catch{}finally{}P=Io(),w=ns(w,R,P),w!==null&&xC(w,S,R)}}function yC(w){var S=w.alternate;return w===Rn||S!==null&&S===Rn}function Am(w,S){xm=sc=!0;var P=w.pending;P===null?S.next=S:(S.next=P.next,P.next=S),w.pending=S}function bC(w,S,P){Xn!==null&&w.mode&1&&!(Tr&2)?(w=S.interleaved,w===null?(P.next=P,ml===null?ml=[S]:ml.push(S)):(P.next=w.next,w.next=P),S.interleaved=P):(w=S.pending,w===null?P.next=P:(P.next=w.next,w.next=P),S.pending=P)}function xC(w,S,P){if(P&4194240){var R=S.lanes;R&=w.pendingLanes,P|=R,S.lanes=P,sm(w,P)}}var mv={readContext:fa,useCallback:Yi,useContext:Yi,useEffect:Yi,useImperativeHandle:Yi,useInsertionEffect:Yi,useLayoutEffect:Yi,useMemo:Yi,useReducer:Yi,useRef:Yi,useState:Yi,useDebugValue:Yi,useDeferredValue:Yi,useTransition:Yi,useMutableSource:Yi,useSyncExternalStore:Yi,useId:Yi,unstable_isNewReconciler:!1},wC={readContext:fa,useCallback:function(w,S){return Ns().memoizedState=[w,S===void 0?null:S],w},useContext:fa,useEffect:of,useImperativeHandle:function(w,S,P){return P=P!=null?P.concat([w]):null,Fs(4194308,4,mC.bind(null,S,w),P)},useLayoutEffect:function(w,S){return Fs(4194308,4,w,S)},useInsertionEffect:function(w,S){return Fs(4,2,w,S)},useMemo:function(w,S){var P=Ns();return S=S===void 0?null:S,w=w(),P.memoizedState=[w,S],w},useReducer:function(w,S,P){var R=Ns();return S=P!==void 0?P(S):S,R.memoizedState=R.baseState=S,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:S},R.queue=w,w=w.dispatch=$I.bind(null,Rn,w),[R.memoizedState,w]},useRef:function(w){var S=Ns();return w={current:w},S.memoizedState=w},useState:ew,useDebugValue:pv,useDeferredValue:function(w){var S=ew(w),P=S[0],R=S[1];return of(function(){var N=ga.transition;ga.transition={};try{R(w)}finally{ga.transition=N}},[w]),P},useTransition:function(){var w=ew(!1),S=w[0];return w=sf.bind(null,w[1]),Ns().memoizedState=w,[S,w]},useMutableSource:function(){},useSyncExternalStore:function(w,S,P){var R=Rn,N=Ns();if(wn){if(P===void 0)throw Error(a(407));P=P()}else{if(P=S(),Xn===null)throw Error(a(349));vl&30||wi(R,S,P)}N.memoizedState=P;var F={value:P,getSnapshot:S};return N.queue=F,of($1.bind(null,R,F,w),[w]),R.flags|=2048,xd(9,ks.bind(null,R,F,P,S),void 0,null),P},useId:function(){var w=Ns(),S=Xn.identifierPrefix;if(wn){var P=gl,R=ai;P=(R&~(1<<32-Oo(R)-1)).toString(32)+P,S=":"+S+"R"+P,P=rf++,0<P&&(S+="H"+P.toString(32)),S+=":"}else P=ZI++,S=":"+S+"r"+P.toString(32)+":";return w.memoizedState=S},unstable_isNewReconciler:!1},gv={readContext:fa,useCallback:gC,useContext:fa,useEffect:af,useImperativeHandle:ru,useInsertionEffect:fv,useLayoutEffect:rw,useMemo:vC,useReducer:wm,useRef:tw,useState:function(){return wm(lc)},useDebugValue:pv,useDeferredValue:function(w){var S=wm(lc),P=S[0],R=S[1];return af(function(){var N=ga.transition;ga.transition={};try{R(w)}finally{ga.transition=N}},[w]),P},useTransition:function(){var w=wm(lc)[0],S=yl().memoizedState;return[w,S]},useMutableSource:nf,useSyncExternalStore:Z1,useId:nw,unstable_isNewReconciler:!1},t3={readContext:fa,useCallback:gC,useContext:fa,useEffect:af,useImperativeHandle:ru,useInsertionEffect:fv,useLayoutEffect:rw,useMemo:vC,useReducer:_m,useRef:tw,useState:function(){return _m(lc)},useDebugValue:pv,useDeferredValue:function(w){var S=_m(lc),P=S[0],R=S[1];return af(function(){var N=ga.transition;ga.transition={};try{R(w)}finally{ga.transition=N}},[w]),P},useTransition:function(){var w=_m(lc)[0],S=yl().memoizedState;return[w,S]},useMutableSource:nf,useSyncExternalStore:Z1,useId:nw,unstable_isNewReconciler:!1};function iw(w,S){try{var P="",R=S;do P+=QI(R),R=R.return;while(R);var N=P}catch(F){N=`
Error generating stack: `+F.message+`
`+F.stack}return{value:w,source:S,stack:N}}function lf(w,S){try{console.error(S.value)}catch(P){setTimeout(function(){throw P})}}var _C=typeof WeakMap=="function"?WeakMap:Map;function SC(w,S,P){P=Is(-1,P),P.tag=3,P.payload={element:null};var R=S.value;return P.callback=function(){Im||(Im=!0,Tw=R),lf(w,S)},P}function vv(w,S,P){P=Is(-1,P),P.tag=3;var R=w.type.getDerivedStateFromError;if(typeof R=="function"){var N=S.value;P.payload=function(){return R(N)},P.callback=function(){lf(w,S)}}var F=w.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(P.callback=function(){lf(w,S),typeof R!="function"&&(ou===null?ou=new Set([this]):ou.add(this));var K=S.stack;this.componentDidCatch(S.value,{componentStack:K!==null?K:""})}),P}function ow(w,S,P){var R=w.pingCache;if(R===null){R=w.pingCache=new _C;var N=new Set;R.set(S,N)}else N=R.get(S),N===void 0&&(N=new Set,R.set(S,N));N.has(P)||(N.add(P),w=$C.bind(null,w,S,P),S.then(w,w))}function AC(w){do{var S;if((S=w.tag===13)&&(S=w.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return w;w=w.return}while(w!==null);return null}function MC(w,S,P,R,N){return w.mode&1?(w.flags|=65536,w.lanes=N,w):(w===S?w.flags|=65536:(w.flags|=128,P.flags|=131072,P.flags&=-52805,P.tag===1&&(P.alternate===null?P.tag=17:(S=Is(-1,1),S.tag=2,nc(P,S))),P.lanes|=1),w)}function ts(w){w.flags|=4}function CC(w,S){if(w!==null&&w.child===S.child)return!0;if(S.flags&16)return!1;for(w=S.child;w!==null;){if(w.flags&12854||w.subtreeFlags&12854)return!1;w=w.sibling}return!0}var Mm,uf,yv,Cm;if(se)Mm=function(w,S){for(var P=S.child;P!==null;){if(P.tag===5||P.tag===6)Y(w,P.stateNode);else if(P.tag!==4&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===S)break;for(;P.sibling===null;){if(P.return===null||P.return===S)return;P=P.return}P.sibling.return=P.return,P=P.sibling}},uf=function(){},yv=function(w,S,P,R,N){if(w=w.memoizedProps,w!==R){var F=S.stateNode,K=$a(Za.current);P=$(F,P,w,R,N,K),(S.updateQueue=P)&&ts(S)}},Cm=function(w,S,P,R){P!==R&&ts(S)};else if(re){Mm=function(w,S,P,R){for(var N=S.child;N!==null;){if(N.tag===5){var F=N.stateNode;P&&R&&(F=Gt(F,N.type,N.memoizedProps,N)),Y(w,F)}else if(N.tag===6)F=N.stateNode,P&&R&&(F=Lr(F,N.memoizedProps,N)),Y(w,F);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)F=N.child,F!==null&&(F.return=N),Mm(w,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===S)break;for(;N.sibling===null;){if(N.return===null||N.return===S)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var Tm=function(w,S,P,R){for(var N=S.child;N!==null;){if(N.tag===5){var F=N.stateNode;P&&R&&(F=Gt(F,N.type,N.memoizedProps,N)),ct(w,F)}else if(N.tag===6)F=N.stateNode,P&&R&&(F=Lr(F,N.memoizedProps,N)),ct(w,F);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)F=N.child,F!==null&&(F.return=N),Tm(w,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===S)break;for(;N.sibling===null;){if(N.return===null||N.return===S)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};uf=function(w,S){var P=S.stateNode;if(!CC(w,S)){w=P.containerInfo;var R=ze(w);Tm(R,S,!1,!1),P.pendingChildren=R,ts(S),At(w,R)}},yv=function(w,S,P,R,N){var F=w.stateNode,K=w.memoizedProps;if((w=CC(w,S))&&K===R)S.stateNode=F;else{var ee=S.stateNode,oe=$a(Za.current),ve=null;K!==R&&(ve=$(ee,P,K,R,N,oe)),w&&ve===null?S.stateNode=F:(F=$e(F,ve,P,K,R,S,w,ee),Q(F,P,R,N,oe)&&ts(S),S.stateNode=F,w?ts(S):Mm(F,S,!1,!1))}},Cm=function(w,S,P,R){P!==R?(w=$a(tf.current),P=$a(Za.current),S.stateNode=Z(R,w,P,S),ts(S)):S.stateNode=w.stateNode}}else uf=function(){},yv=function(){},Cm=function(){};function cf(w,S){if(!wn)switch(w.tailMode){case"hidden":S=w.tail;for(var P=null;S!==null;)S.alternate!==null&&(P=S),S=S.sibling;P===null?w.tail=null:P.sibling=null;break;case"collapsed":P=w.tail;for(var R=null;P!==null;)P.alternate!==null&&(R=P),P=P.sibling;R===null?S||w.tail===null?w.tail=null:w.tail.sibling=null:R.sibling=null}}function Ki(w){var S=w.alternate!==null&&w.alternate.child===w.child,P=0,R=0;if(S)for(var N=w.child;N!==null;)P|=N.lanes|N.childLanes,R|=N.subtreeFlags&14680064,R|=N.flags&14680064,N.return=w,N=N.sibling;else for(N=w.child;N!==null;)P|=N.lanes|N.childLanes,R|=N.subtreeFlags,R|=N.flags,N.return=w,N=N.sibling;return w.subtreeFlags|=R,w.childLanes=P,S}function TC(w,S,P){var R=S.pendingProps;switch(W1(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ki(S),null;case 1:return cn(S.type)&&sn(),Ki(S),null;case 3:return R=S.stateNode,ac(),Bt(mr),Bt(Xt),es(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(w===null||w.child===null)&&(Zh(S)?ts(S):w===null||w.memoizedState.isDehydrated&&!(S.flags&256)||(S.flags|=1024,Ls!==null&&(kv(Ls),Ls=null))),uf(w,S),Ki(S),null;case 5:vm(S),P=$a(tf.current);var N=S.type;if(w!==null&&S.stateNode!=null)yv(w,S,N,R,P),w.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!R){if(S.stateNode===null)throw Error(a(166));return Ki(S),null}if(w=$a(Za.current),Zh(S)){if(!ye)throw Error(a(175));w=Ft(S.stateNode,S.type,S.memoizedProps,P,w,S,!bd),S.updateQueue=w,w!==null&&ts(S)}else{var F=H(N,R,P,w,S);Mm(F,S,!1,!1),S.stateNode=F,Q(F,N,R,P,w)&&ts(S)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return Ki(S),null;case 6:if(w&&S.stateNode!=null)Cm(w,S,w.memoizedProps,R);else{if(typeof R!="string"&&S.stateNode===null)throw Error(a(166));if(w=$a(tf.current),P=$a(Za.current),Zh(S)){if(!ye)throw Error(a(176));if(w=S.stateNode,R=S.memoizedProps,(P=ur(w,R,S,!bd))&&(N=pa,N!==null))switch(F=(N.mode&1)!==0,N.tag){case 3:It(N.stateNode.containerInfo,w,R,F);break;case 5:Ut(N.type,N.memoizedProps,N.stateNode,w,R,F)}P&&ts(S)}else S.stateNode=Z(R,w,P,S)}return Ki(S),null;case 13:if(Bt(On),R=S.memoizedState,wn&&ma!==null&&S.mode&1&&!(S.flags&128)){for(w=ma;w;)w=qe(w);return $h(),S.flags|=98560,S}if(R!==null&&R.dehydrated!==null){if(R=Zh(S),w===null){if(!R)throw Error(a(318));if(!ye)throw Error(a(344));if(w=S.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));er(w,S)}else $h(),!(S.flags&128)&&(S.memoizedState=null),S.flags|=4;return Ki(S),null}return Ls!==null&&(kv(Ls),Ls=null),S.flags&128?(S.lanes=P,S):(R=R!==null,P=!1,w===null?Zh(S):P=w.memoizedState!==null,R&&!P&&(S.child.flags|=8192,S.mode&1&&(w===null||On.current&1?jn===0&&(jn=3):Dw())),S.updateQueue!==null&&(S.flags|=4),Ki(S),null);case 4:return ac(),uf(w,S),w===null&&_e(S.stateNode.containerInfo),Ki(S),null;case 10:return Xh(S.type._context),Ki(S),null;case 17:return cn(S.type)&&sn(),Ki(S),null;case 19:if(Bt(On),N=S.memoizedState,N===null)return Ki(S),null;if(R=(S.flags&128)!==0,F=N.rendering,F===null)if(R)cf(N,!1);else{if(jn!==0||w!==null&&w.flags&128)for(w=S.child;w!==null;){if(F=ym(w),F!==null){for(S.flags|=128,cf(N,!1),w=F.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),S.subtreeFlags=0,w=P,R=S.child;R!==null;)P=R,N=w,P.flags&=14680066,F=P.alternate,F===null?(P.childLanes=0,P.lanes=N,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=F.childLanes,P.lanes=F.lanes,P.child=F.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=F.memoizedProps,P.memoizedState=F.memoizedState,P.updateQueue=F.updateQueue,P.type=F.type,N=F.dependencies,P.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),R=R.sibling;return Tt(On,On.current&1|2),S.child}w=w.sibling}N.tail!==null&&oi()>Cw&&(S.flags|=128,R=!0,cf(N,!1),S.lanes=4194304)}else{if(!R)if(w=ym(F),w!==null){if(S.flags|=128,R=!0,w=w.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),cf(N,!0),N.tail===null&&N.tailMode==="hidden"&&!F.alternate&&!wn)return Ki(S),null}else 2*oi()-N.renderingStartTime>Cw&&P!==1073741824&&(S.flags|=128,R=!0,cf(N,!1),S.lanes=4194304);N.isBackwards?(F.sibling=S.child,S.child=F):(w=N.last,w!==null?w.sibling=F:S.child=F,N.last=F)}return N.tail!==null?(S=N.tail,N.rendering=S,N.tail=S.sibling,N.renderingStartTime=oi(),S.sibling=null,w=On.current,Tt(On,R?w&1|2:w&1),S):(Ki(S),null);case 22:case 23:return Fv(),R=S.memoizedState!==null,w!==null&&w.memoizedState!==null!==R&&(S.flags|=8192),R&&S.mode&1?ya&1073741824&&(Ki(S),se&&S.subtreeFlags&6&&(S.flags|=8192)):Ki(S),null;case 24:return null;case 25:return null}throw Error(a(156,S.tag))}var r3=s.ReactCurrentOwner,va=!1;function Ro(w,S,P,R){S.child=w===null?fC(S,null,P,R):ef(S,w.child,P,R)}function aw(w,S,P,R,N){P=P.render;var F=S.ref;return Yh(S,N),R=J1(w,S,P,R,F,N),P=Q1(),w!==null&&!va?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~N,nu(w,S,N)):(wn&&P&&yd(S),S.flags|=1,Ro(w,S,R,N),S.child)}function EC(w,S,P,R,N){if(w===null){var F=P.type;return typeof F=="function"&&!Rw(F)&&F.defaultProps===void 0&&P.compare===null&&P.defaultProps===void 0?(S.tag=15,S.type=F,PC(w,S,F,R,N)):(w=zv(P.type,null,R,S,S.mode,N),w.ref=S.ref,w.return=S,S.child=w)}if(F=w.child,!(w.lanes&N)){var K=F.memoizedProps;if(P=P.compare,P=P!==null?P:ev,P(K,R)&&w.ref===S.ref)return nu(w,S,N)}return S.flags|=1,w=au(F,R),w.ref=S.ref,w.return=S,S.child=w}function PC(w,S,P,R,N){if(w!==null&&ev(w.memoizedProps,R)&&w.ref===S.ref)if(va=!1,(w.lanes&N)!==0)w.flags&131072&&(va=!0);else return S.lanes=w.lanes,nu(w,S,N);return sw(w,S,P,R,N)}function DC(w,S,P){var R=S.pendingProps,N=R.children,F=w!==null?w.memoizedState:null;if(R.mode==="hidden")if(!(S.mode&1))S.memoizedState={baseLanes:0,cachePool:null},Tt(_d,ya),ya|=P;else if(P&1073741824)S.memoizedState={baseLanes:0,cachePool:null},R=F!==null?F.baseLanes:P,Tt(_d,ya),ya|=R;else return w=F!==null?F.baseLanes|P:P,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:w,cachePool:null},S.updateQueue=null,Tt(_d,ya),ya|=w,null;else F!==null?(R=F.baseLanes|P,S.memoizedState=null):R=P,Tt(_d,ya),ya|=R;return Ro(w,S,N,P),S.child}function OC(w,S){var P=S.ref;(w===null&&P!==null||w!==null&&w.ref!==P)&&(S.flags|=512,S.flags|=2097152)}function sw(w,S,P,R,N){var F=cn(P)?Vr:Xt.current;return F=kr(S,F),Yh(S,N),P=J1(w,S,P,R,F,N),R=Q1(),w!==null&&!va?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~N,nu(w,S,N)):(wn&&R&&yd(S),S.flags|=1,Ro(w,S,P,N),S.child)}function lw(w,S,P,R,N){if(cn(P)){var F=!0;ii(S)}else F=!1;if(Yh(S,N),S.stateNode===null)w!==null&&(w.alternate=null,S.alternate=null,S.flags|=2),iv(S,P,R),H1(S,P,R,N),R=!0;else if(w===null){var K=S.stateNode,ee=S.memoizedProps;K.props=ee;var oe=K.context,ve=P.contextType;typeof ve=="object"&&ve!==null?ve=fa(ve):(ve=cn(P)?Vr:Xt.current,ve=kr(S,ve));var xe=P.getDerivedStateFromProps,Te=typeof xe=="function"||typeof K.getSnapshotBeforeUpdate=="function";Te||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ee!==R||oe!==ve)&&ov(S,K,R,ve),rc=!1;var Me=S.memoizedState;K.state=Me,nv(S,R,K,N),oe=S.memoizedState,ee!==R||Me!==oe||mr.current||rc?(typeof xe=="function"&&(V1(S,P,xe,R),oe=S.memoizedState),(ee=rc||j1(S,P,ee,R,Me,oe,ve))?(Te||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(S.flags|=4194308)):(typeof K.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=R,S.memoizedState=oe),K.props=R,K.state=oe,K.context=ve,R=ee):(typeof K.componentDidMount=="function"&&(S.flags|=4194308),R=!1)}else{K=S.stateNode,rv(w,S),ee=S.memoizedProps,ve=S.type===S.elementType?ee:Ja(S.type,ee),K.props=ve,Te=S.pendingProps,Me=K.context,oe=P.contextType,typeof oe=="object"&&oe!==null?oe=fa(oe):(oe=cn(P)?Vr:Xt.current,oe=kr(S,oe));var He=P.getDerivedStateFromProps;(xe=typeof He=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ee!==Te||Me!==oe)&&ov(S,K,R,oe),rc=!1,Me=S.memoizedState,K.state=Me,nv(S,R,K,N);var Ze=S.memoizedState;ee!==Te||Me!==Ze||mr.current||rc?(typeof He=="function"&&(V1(S,P,He,R),Ze=S.memoizedState),(ve=rc||j1(S,P,ve,R,Me,Ze,oe)||!1)?(xe||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(R,Ze,oe),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(R,Ze,oe)),typeof K.componentDidUpdate=="function"&&(S.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof K.componentDidUpdate!="function"||ee===w.memoizedProps&&Me===w.memoizedState||(S.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ee===w.memoizedProps&&Me===w.memoizedState||(S.flags|=1024),S.memoizedProps=R,S.memoizedState=Ze),K.props=R,K.state=Ze,K.context=oe,R=ve):(typeof K.componentDidUpdate!="function"||ee===w.memoizedProps&&Me===w.memoizedState||(S.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ee===w.memoizedProps&&Me===w.memoizedState||(S.flags|=1024),R=!1)}return uw(w,S,P,R,F,N)}function uw(w,S,P,R,N,F){OC(w,S);var K=(S.flags&128)!==0;if(!R&&!K)return N&&Gh(S,P,!1),nu(w,S,F);R=S.stateNode,r3.current=S;var ee=K&&typeof P.getDerivedStateFromError!="function"?null:R.render();return S.flags|=1,w!==null&&K?(S.child=ef(S,w.child,null,F),S.child=ef(S,null,ee,F)):Ro(w,S,ee,F),S.memoizedState=R.state,N&&Gh(S,P,!0),S.child}function RC(w){var S=w.stateNode;S.pendingContext?Xi(w,S.pendingContext,S.pendingContext!==S.context):S.context&&Xi(w,S.context,!1),hv(w,S.containerInfo)}function bv(w,S,P,R,N){return $h(),q1(N),S.flags|=256,Ro(w,S,P,R),S.child}var Em={dehydrated:null,treeContext:null,retryLane:0};function uc(w){return{baseLanes:w,cachePool:null}}function cw(w,S,P){var R=S.pendingProps,N=On.current,F=!1,K=(S.flags&128)!==0,ee;if((ee=K)||(ee=w!==null&&w.memoizedState===null?!1:(N&2)!==0),ee?(F=!0,S.flags&=-129):(w===null||w.memoizedState!==null)&&(N|=1),Tt(On,N&1),w===null)return Qh(S),w=S.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?(S.mode&1?Ka(w)?S.lanes=8:S.lanes=1073741824:S.lanes=1,null):(N=R.children,w=R.fallback,F?(R=S.mode,F=S.child,N={mode:"hidden",children:N},!(R&1)&&F!==null?(F.childLanes=0,F.pendingProps=N):F=Uv(N,R,0,null),w=Td(w,R,P,null),F.return=S,w.return=S,F.sibling=w,S.child=F,S.child.memoizedState=uc(P),S.memoizedState=Em,w):dw(S,N));if(N=w.memoizedState,N!==null){if(ee=N.dehydrated,ee!==null){if(K)return S.flags&256?(S.flags&=-257,xv(w,S,P,Error(a(422)))):S.memoizedState!==null?(S.child=w.child,S.flags|=128,null):(F=R.fallback,N=S.mode,R=Uv({mode:"visible",children:R.children},N,0,null),F=Td(F,N,P,null),F.flags|=2,R.return=S,F.return=S,R.sibling=F,S.child=R,S.mode&1&&ef(S,w.child,null,P),S.child.memoizedState=uc(P),S.memoizedState=Em,F);if(!(S.mode&1))S=xv(w,S,P,null);else if(Ka(ee))S=xv(w,S,P,Error(a(419)));else if(R=(P&w.childLanes)!==0,va||R){if(R=Xn,R!==null){switch(P&-P){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}R=F&(R.suspendedLanes|P)?0:F,R!==0&&R!==N.retryLane&&(N.retryLane=R,ns(w,R,-1))}Dw(),S=xv(w,S,P,Error(a(421)))}else dl(ee)?(S.flags|=128,S.child=w.child,S=tT.bind(null,w),me(ee,S),S=null):(P=N.treeContext,ye&&(ma=at(ee),pa=S,wn=!0,Ls=null,bd=!1,P!==null&&(po[Qa++]=ai,po[Qa++]=gl,po[Qa++]=oc,ai=P.id,gl=P.overflow,oc=S)),S=dw(S,S.pendingProps.children),S.flags|=4096);return S}return F?(R=LC(w,S,R.children,R.fallback,P),F=S.child,N=w.child.memoizedState,F.memoizedState=N===null?uc(P):{baseLanes:N.baseLanes|P,cachePool:null},F.childLanes=w.childLanes&~P,S.memoizedState=Em,R):(P=IC(w,S,R.children,P),S.memoizedState=null,P)}return F?(R=LC(w,S,R.children,R.fallback,P),F=S.child,N=w.child.memoizedState,F.memoizedState=N===null?uc(P):{baseLanes:N.baseLanes|P,cachePool:null},F.childLanes=w.childLanes&~P,S.memoizedState=Em,R):(P=IC(w,S,R.children,P),S.memoizedState=null,P)}function dw(w,S){return S=Uv({mode:"visible",children:S},w.mode,0,null),S.return=w,w.child=S}function IC(w,S,P,R){var N=w.child;return w=N.sibling,P=au(N,{mode:"visible",children:P}),!(S.mode&1)&&(P.lanes=R),P.return=S,P.sibling=null,w!==null&&(R=S.deletions,R===null?(S.deletions=[w],S.flags|=16):R.push(w)),S.child=P}function LC(w,S,P,R,N){var F=S.mode;w=w.child;var K=w.sibling,ee={mode:"hidden",children:P};return!(F&1)&&S.child!==w?(P=S.child,P.childLanes=0,P.pendingProps=ee,S.deletions=null):(P=au(w,ee),P.subtreeFlags=w.subtreeFlags&14680064),K!==null?R=au(K,R):(R=Td(R,F,N,null),R.flags|=2),R.return=S,P.return=S,P.sibling=R,S.child=P,R}function xv(w,S,P,R){return R!==null&&q1(R),ef(S,w.child,null,P),w=dw(S,S.pendingProps.children),w.flags|=2,S.memoizedState=null,w}function hw(w,S,P){w.lanes|=S;var R=w.alternate;R!==null&&(R.lanes|=S),dm(w.return,S,P)}function wv(w,S,P,R,N){var F=w.memoizedState;F===null?w.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:R,tail:P,tailMode:N}:(F.isBackwards=S,F.rendering=null,F.renderingStartTime=0,F.last=R,F.tail=P,F.tailMode=N)}function fw(w,S,P){var R=S.pendingProps,N=R.revealOrder,F=R.tail;if(Ro(w,S,R.children,P),R=On.current,R&2)R=R&1|2,S.flags|=128;else{if(w!==null&&w.flags&128)e:for(w=S.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&hw(w,P,S);else if(w.tag===19)hw(w,P,S);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===S)break e;for(;w.sibling===null;){if(w.return===null||w.return===S)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}R&=1}if(Tt(On,R),!(S.mode&1))S.memoizedState=null;else switch(N){case"forwards":for(P=S.child,N=null;P!==null;)w=P.alternate,w!==null&&ym(w)===null&&(N=P),P=P.sibling;P=N,P===null?(N=S.child,S.child=null):(N=P.sibling,P.sibling=null),wv(S,!1,N,P,F);break;case"backwards":for(P=null,N=S.child,S.child=null;N!==null;){if(w=N.alternate,w!==null&&ym(w)===null){S.child=N;break}w=N.sibling,N.sibling=P,P=N,N=w}wv(S,!0,P,null,F);break;case"together":wv(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function nu(w,S,P){if(w!==null&&(S.dependencies=w.dependencies),ff|=S.lanes,!(P&S.childLanes))return null;if(w!==null&&S.child!==w.child)throw Error(a(153));if(S.child!==null){for(w=S.child,P=au(w,w.pendingProps),S.child=P,P.return=S;w.sibling!==null;)w=w.sibling,P=P.sibling=au(w,w.pendingProps),P.return=S;P.sibling=null}return S.child}function BC(w,S,P){switch(S.tag){case 3:RC(S),$h();break;case 5:X1(S);break;case 1:cn(S.type)&&ii(S);break;case 4:hv(S,S.stateNode.containerInfo);break;case 10:tc(S,S.type._context,S.memoizedProps.value);break;case 13:var R=S.memoizedState;if(R!==null)return R.dehydrated!==null?(Tt(On,On.current&1),S.flags|=128,null):P&S.child.childLanes?cw(w,S,P):(Tt(On,On.current&1),w=nu(w,S,P),w!==null?w.sibling:null);Tt(On,On.current&1);break;case 19:if(R=(P&S.childLanes)!==0,w.flags&128){if(R)return fw(w,S,P);S.flags|=128}var N=S.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Tt(On,On.current),R)break;return null;case 22:case 23:return S.lanes=0,DC(w,S,P)}return nu(w,S,P)}function NC(w,S){switch(W1(S),S.tag){case 1:return cn(S.type)&&sn(),w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 3:return ac(),Bt(mr),Bt(Xt),es(),w=S.flags,w&65536&&!(w&128)?(S.flags=w&-65537|128,S):null;case 5:return vm(S),null;case 13:if(Bt(On),w=S.memoizedState,w!==null&&w.dehydrated!==null){if(S.alternate===null)throw Error(a(340));$h()}return w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 19:return Bt(On),null;case 4:return ac(),null;case 10:return Xh(S.type._context),null;case 22:case 23:return Fv(),null;case 24:return null;default:return null}}var _v=!1,cc=!1,n3=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function Pm(w,S){var P=w.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(R){Go(w,S,R)}else P.current=null}function Sv(w,S,P){try{P()}catch(R){Go(w,S,R)}}var rs=!1;function kC(w,S){for(V(w.containerInfo),Pt=S;Pt!==null;)if(w=Pt,S=w.child,(w.subtreeFlags&1028)!==0&&S!==null)S.return=w,Pt=S;else for(;Pt!==null;){w=Pt;try{var P=w.alternate;if(w.flags&1024)switch(w.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,N=P.memoizedState,F=w.stateNode,K=F.getSnapshotBeforeUpdate(w.elementType===w.type?R:Ja(w.type,R),N);F.__reactInternalSnapshotBeforeUpdate=K}break;case 3:se&&Ye(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ee){Go(w,w.return,ee)}if(S=w.sibling,S!==null){S.return=w.return,Pt=S;break}Pt=w.return}return P=rs,rs=!1,P}function wd(w,S,P){var R=S.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var N=R=R.next;do{if((N.tag&w)===w){var F=N.destroy;N.destroy=void 0,F!==void 0&&Sv(S,P,F)}N=N.next}while(N!==R)}}function df(w,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var P=S=S.next;do{if((P.tag&w)===w){var R=P.create;P.destroy=R()}P=P.next}while(P!==S)}}function pw(w){var S=w.ref;if(S!==null){var P=w.stateNode;switch(w.tag){case 5:w=W(P);break;default:w=P}typeof S=="function"?S(w):S.current=w}}function FC(w,S,P){if(fl&&typeof fl.onCommitFiberUnmount=="function")try{fl.onCommitFiberUnmount(Z0,S)}catch{}switch(S.tag){case 0:case 11:case 14:case 15:if(w=S.updateQueue,w!==null&&(w=w.lastEffect,w!==null)){var R=w=w.next;do{var N=R,F=N.destroy;N=N.tag,F!==void 0&&(N&2||N&4)&&Sv(S,P,F),R=R.next}while(R!==w)}break;case 1:if(Pm(S,P),w=S.stateNode,typeof w.componentWillUnmount=="function")try{w.props=S.memoizedProps,w.state=S.memoizedState,w.componentWillUnmount()}catch(K){Go(S,P,K)}break;case 5:Pm(S,P);break;case 4:se?UC(w,S,P):re&&re&&(S=S.stateNode.containerInfo,P=ze(S),rr(S,P))}}function mw(w,S,P){for(var R=S;;)if(FC(w,R,P),R.child===null||se&&R.tag===4){if(R===S)break;for(;R.sibling===null;){if(R.return===null||R.return===S)return;R=R.return}R.sibling.return=R.return,R=R.sibling}else R.child.return=R,R=R.child}function gw(w){var S=w.alternate;S!==null&&(w.alternate=null,gw(S)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(S=w.stateNode,S!==null&&Fe(S)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function vw(w){return w.tag===5||w.tag===3||w.tag===4}function yw(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||vw(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function zC(w){if(se){e:{for(var S=w.return;S!==null;){if(vw(S))break e;S=S.return}throw Error(a(160))}var P=S;switch(P.tag){case 5:S=P.stateNode,P.flags&32&&(Xe(S),P.flags&=-33),P=yw(w),Av(w,P,S);break;case 3:case 4:S=P.stateNode.containerInfo,P=yw(w),bw(w,P,S);break;default:throw Error(a(161))}}}function bw(w,S,P){var R=w.tag;if(R===5||R===6)w=w.stateNode,S?Ke(P,w,S):et(P,w);else if(R!==4&&(w=w.child,w!==null))for(bw(w,S,P),w=w.sibling;w!==null;)bw(w,S,P),w=w.sibling}function Av(w,S,P){var R=w.tag;if(R===5||R===6)w=w.stateNode,S?pt(P,w,S):Ve(P,w);else if(R!==4&&(w=w.child,w!==null))for(Av(w,S,P),w=w.sibling;w!==null;)Av(w,S,P),w=w.sibling}function UC(w,S,P){for(var R=S,N=!1,F,K;;){if(!N){N=R.return;e:for(;;){if(N===null)throw Error(a(160));switch(F=N.stateNode,N.tag){case 5:K=!1;break e;case 3:F=F.containerInfo,K=!0;break e;case 4:F=F.containerInfo,K=!0;break e}N=N.return}N=!0}if(R.tag===5||R.tag===6)mw(w,R,P),K?we(F,R.stateNode):gt(F,R.stateNode);else if(R.tag===18)K?Ge(F,R.stateNode):Ue(F,R.stateNode);else if(R.tag===4){if(R.child!==null){F=R.stateNode.containerInfo,K=!0,R.child.return=R,R=R.child;continue}}else if(FC(w,R,P),R.child!==null){R.child.return=R,R=R.child;continue}if(R===S)break;for(;R.sibling===null;){if(R.return===null||R.return===S)return;R=R.return,R.tag===4&&(N=!1)}R.sibling.return=R.return,R=R.sibling}}function Mv(w,S){if(se){switch(S.tag){case 0:case 11:case 14:case 15:wd(3,S,S.return),df(3,S),wd(5,S,S.return);return;case 1:return;case 5:var P=S.stateNode;if(P!=null){var R=S.memoizedProps;w=w!==null?w.memoizedProps:R;var N=S.type,F=S.updateQueue;S.updateQueue=null,F!==null&&ut(P,F,N,w,R,S)}return;case 6:if(S.stateNode===null)throw Error(a(162));P=S.memoizedProps,Ce(S.stateNode,w!==null?w.memoizedProps:P,P);return;case 3:ye&&w!==null&&w.memoizedState.isDehydrated&&Ie(S.stateNode.containerInfo);return;case 12:return;case 13:Dm(S);return;case 19:Dm(S);return;case 17:return}throw Error(a(163))}switch(S.tag){case 0:case 11:case 14:case 15:wd(3,S,S.return),df(3,S),wd(5,S,S.return);return;case 12:return;case 13:Dm(S);return;case 19:Dm(S);return;case 3:ye&&w!==null&&w.memoizedState.isDehydrated&&Ie(S.stateNode.containerInfo);break;case 22:case 23:return}e:if(re){switch(S.tag){case 1:case 5:case 6:break e;case 3:case 4:S=S.stateNode,rr(S.containerInfo,S.pendingChildren);break e}throw Error(a(163))}}function Dm(w){var S=w.updateQueue;if(S!==null){w.updateQueue=null;var P=w.stateNode;P===null&&(P=w.stateNode=new n3),S.forEach(function(R){var N=rT.bind(null,w,R);P.has(R)||(P.add(R),R.then(N,N))})}}function VC(w,S){for(Pt=S;Pt!==null;){S=Pt;var P=S.deletions;if(P!==null)for(var R=0;R<P.length;R++){var N=P[R];try{var F=w;se?UC(F,N,S):mw(F,N,S);var K=N.alternate;K!==null&&(K.return=null),N.return=null}catch(wt){Go(N,S,wt)}}if(P=S.child,S.subtreeFlags&12854&&P!==null)P.return=S,Pt=P;else for(;Pt!==null;){S=Pt;try{var ee=S.flags;if(ee&32&&se&&Xe(S.stateNode),ee&512){var oe=S.alternate;if(oe!==null){var ve=oe.ref;ve!==null&&(typeof ve=="function"?ve(null):ve.current=null)}}if(ee&8192)switch(S.tag){case 13:if(S.memoizedState!==null){var xe=S.alternate;(xe===null||xe.memoizedState===null)&&(Rv=oi())}break;case 22:var Te=S.memoizedState!==null,Me=S.alternate,He=Me!==null&&Me.memoizedState!==null;if(P=S,se){e:if(R=P,N=Te,F=null,se)for(var Ze=R;;){if(Ze.tag===5){if(F===null){F=Ze;var bt=Ze.stateNode;N?nt(bt):Be(Ze.stateNode,Ze.memoizedProps)}}else if(Ze.tag===6){if(F===null){var Nt=Ze.stateNode;N?fe(Nt):de(Nt,Ze.memoizedProps)}}else if((Ze.tag!==22&&Ze.tag!==23||Ze.memoizedState===null||Ze===R)&&Ze.child!==null){Ze.child.return=Ze,Ze=Ze.child;continue}if(Ze===R)break;for(;Ze.sibling===null;){if(Ze.return===null||Ze.return===R)break e;F===Ze&&(F=null),Ze=Ze.return}F===Ze&&(F=null),Ze.sibling.return=Ze.return,Ze=Ze.sibling}}if(Te&&!He&&P.mode&1){Pt=P;for(var Oe=P.child;Oe!==null;){for(P=Pt=Oe;Pt!==null;){R=Pt;var Ee=R.child;switch(R.tag){case 0:case 11:case 14:case 15:wd(4,R,R.return);break;case 1:Pm(R,R.return);var ke=R.stateNode;if(typeof ke.componentWillUnmount=="function"){var mt=R.return;try{ke.props=R.memoizedProps,ke.state=R.memoizedState,ke.componentWillUnmount()}catch(wt){Go(R,mt,wt)}}break;case 5:Pm(R,R.return);break;case 22:if(R.memoizedState!==null){xw(P);continue}}Ee!==null?(Ee.return=R,Pt=Ee):xw(P)}Oe=Oe.sibling}}}switch(ee&4102){case 2:zC(S),S.flags&=-3;break;case 6:zC(S),S.flags&=-3,Mv(S.alternate,S);break;case 4096:S.flags&=-4097;break;case 4100:S.flags&=-4097,Mv(S.alternate,S);break;case 4:Mv(S.alternate,S)}}catch(wt){Go(S,S.return,wt)}if(P=S.sibling,P!==null){P.return=S.return,Pt=P;break}Pt=S.return}}}function i3(w,S,P){Pt=w,jC(w)}function jC(w,S,P){for(var R=(w.mode&1)!==0;Pt!==null;){var N=Pt,F=N.child;if(N.tag===22&&R){var K=N.memoizedState!==null||_v;if(!K){var ee=N.alternate,oe=ee!==null&&ee.memoizedState!==null||cc;ee=_v;var ve=cc;if(_v=K,(cc=oe)&&!ve)for(Pt=N;Pt!==null;)K=Pt,oe=K.child,K.tag===22&&K.memoizedState!==null?GC(N):oe!==null?(oe.return=K,Pt=oe):GC(N);for(;F!==null;)Pt=F,jC(F),F=F.sibling;Pt=N,_v=ee,cc=ve}HC(w)}else N.subtreeFlags&8772&&F!==null?(F.return=N,Pt=F):HC(w)}}function HC(w){for(;Pt!==null;){var S=Pt;if(S.flags&8772){var P=S.alternate;try{if(S.flags&8772)switch(S.tag){case 0:case 11:case 15:cc||df(5,S);break;case 1:var R=S.stateNode;if(S.flags&4&&!cc)if(P===null)R.componentDidMount();else{var N=S.elementType===S.type?P.memoizedProps:Ja(S.type,P.memoizedProps);R.componentDidUpdate(N,P.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var F=S.updateQueue;F!==null&&uC(S,F,R);break;case 3:var K=S.updateQueue;if(K!==null){if(P=null,S.child!==null)switch(S.child.tag){case 5:P=W(S.child.stateNode);break;case 1:P=S.child.stateNode}uC(S,K,P)}break;case 5:var ee=S.stateNode;P===null&&S.flags&4&&Je(ee,S.type,S.memoizedProps,S);break;case 6:break;case 4:break;case 12:break;case 13:if(ye&&S.memoizedState===null){var oe=S.alternate;if(oe!==null){var ve=oe.memoizedState;if(ve!==null){var xe=ve.dehydrated;xe!==null&&Ne(xe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}cc||S.flags&512&&pw(S)}catch(Te){Go(S,S.return,Te)}}if(S===w){Pt=null;break}if(P=S.sibling,P!==null){P.return=S.return,Pt=P;break}Pt=S.return}}function xw(w){for(;Pt!==null;){var S=Pt;if(S===w){Pt=null;break}var P=S.sibling;if(P!==null){P.return=S.return,Pt=P;break}Pt=S.return}}function GC(w){for(;Pt!==null;){var S=Pt;try{switch(S.tag){case 0:case 11:case 15:var P=S.return;try{df(4,S)}catch(oe){Go(S,P,oe)}break;case 1:var R=S.stateNode;if(typeof R.componentDidMount=="function"){var N=S.return;try{R.componentDidMount()}catch(oe){Go(S,N,oe)}}var F=S.return;try{pw(S)}catch(oe){Go(S,F,oe)}break;case 5:var K=S.return;try{pw(S)}catch(oe){Go(S,K,oe)}}}catch(oe){Go(S,S.return,oe)}if(S===w){Pt=null;break}var ee=S.sibling;if(ee!==null){ee.return=S.return,Pt=ee;break}Pt=S.return}}var Cv=0,Tv=1,Ev=2,Pv=3,Dv=4;if(typeof Symbol=="function"&&Symbol.for){var hf=Symbol.for;Cv=hf("selector.component"),Tv=hf("selector.has_pseudo_class"),Ev=hf("selector.role"),Pv=hf("selector.test_id"),Dv=hf("selector.text")}function Ov(w){var S=be(w);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(a(364));return S}if(w=st(w),w===null)throw Error(a(362));return w.stateNode.current}function ww(w,S){switch(S.$$typeof){case Cv:if(w.type===S.value)return!0;break;case Tv:e:{S=S.value,w=[w,0];for(var P=0;P<w.length;){var R=w[P++],N=w[P++],F=S[N];if(R.tag!==5||!J(R)){for(;F!=null&&ww(R,F);)N++,F=S[N];if(N===S.length){S=!0;break e}else for(R=R.child;R!==null;)w.push(R,N),R=R.sibling}}S=!1}return S;case Ev:if(w.tag===5&&ge(w.stateNode,S.value))return!0;break;case Dv:if((w.tag===5||w.tag===6)&&(w=q(w),w!==null&&0<=w.indexOf(S.value)))return!0;break;case Pv:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function _w(w){switch(w.$$typeof){case Cv:return"<"+(M(w.value)||"Unknown")+">";case Tv:return":has("+(_w(w)||"")+")";case Ev:return'[role="'+w.value+'"]';case Dv:return'"'+w.value+'"';case Pv:return'[data-testname="'+w.value+'"]';default:throw Error(a(365))}}function WC(w,S){var P=[];w=[w,0];for(var R=0;R<w.length;){var N=w[R++],F=w[R++],K=S[F];if(N.tag!==5||!J(N)){for(;K!=null&&ww(N,K);)F++,K=S[F];if(F===S.length)P.push(N);else for(N=N.child;N!==null;)w.push(N,F),N=N.sibling}}return P}function Sw(w,S){if(!rt)throw Error(a(363));w=Ov(w),w=WC(w,S),S=[],w=Array.from(w);for(var P=0;P<w.length;){var R=w[P++];if(R.tag===5)J(R)||S.push(R.stateNode);else for(R=R.child;R!==null;)w.push(R),R=R.sibling}return S}var qC=Math.ceil,Om=s.ReactCurrentDispatcher,Aw=s.ReactCurrentOwner,dn=s.ReactCurrentBatchConfig,Tr=0,Xn=null,Vn=null,Ji=0,ya=0,_d=tn(0),jn=0,Sd=null,ff=0,iu=0,Mw=0,Rm=null,Ho=null,Rv=0,Cw=1/0;function Ad(){Cw=oi()+500}var Im=!1,Tw=null,ou=null,Iv=!1,dc=null,Lv=0,Lm=0,Bm=null,Nm=-1,Bv=0;function Io(){return Tr&6?oi():Nm!==-1?Nm:Nm=oi()}function hc(w){return w.mode&1?Tr&2&&Ji!==0?Ji&-Ji:z1.transition!==null?(Bv===0&&(w=q0,q0<<=1,!(q0&4194240)&&(q0=64),Bv=w),Bv):(w=Gr,w!==0?w:Se()):1}function ns(w,S,P){if(50<Lm)throw Lm=0,Bm=null,Error(a(185));var R=Nv(w,S);return R===null?null:(qh(R,S,P),(!(Tr&2)||R!==Xn)&&(R===Xn&&(!(Tr&2)&&(iu|=S),jn===4&&fc(R,Ji)),Yn(R,P),S===1&&Tr===0&&!(w.mode&1)&&(Ad(),Os&&Rs())),R)}function Nv(w,S){w.lanes|=S;var P=w.alternate;for(P!==null&&(P.lanes|=S),P=w,w=w.return;w!==null;)w.childLanes|=S,P=w.alternate,P!==null&&(P.childLanes|=S),P=w,w=w.return;return P.tag===3?P.stateNode:null}function Yn(w,S){var P=w.callbackNode;Y0(w,S);var R=am(w,w===Xn?Ji:0);if(R===0)P!==null&&lm(P),w.callbackNode=null,w.callbackPriority=0;else if(S=R&-R,w.callbackPriority!==S){if(P!=null&&lm(P),S===1)w.tag===0?JI(Pw.bind(null,w)):sC(Pw.bind(null,w)),Re?Le(function(){Tr===0&&Rs()}):Q0(um,Rs),P=null;else{switch(oC(R)){case 1:P=um;break;case 4:P=k1;break;case 16:P=F1;break;case 536870912:P=XI;break;default:P=F1}P=iT(P,XC.bind(null,w))}w.callbackPriority=S,w.callbackNode=P}}function XC(w,S){if(Nm=-1,Bv=0,Tr&6)throw Error(a(327));var P=w.callbackNode;if(Cd()&&w.callbackNode!==P)return null;var R=am(w,w===Xn?Ji:0);if(R===0)return null;if(R&30||R&w.expiredLanes||S)S=Fm(w,R);else{S=R;var N=Tr;Tr|=2;var F=KC();(Xn!==w||Ji!==S)&&(Ad(),pc(w,S));do try{s3();break}catch(ee){YC(w,ee)}while(!0);tv(),Om.current=F,Tr=N,Vn!==null?S=0:(Xn=null,Ji=0,S=jn)}if(S!==0){if(S===2&&(N=K0(w),N!==0&&(R=N,S=Ew(w,N))),S===1)throw P=Sd,pc(w,0),fc(w,R),Yn(w,oi()),P;if(S===6)fc(w,R);else{if(N=w.current.alternate,!(R&30)&&!o3(N)&&(S=Fm(w,R),S===2&&(F=K0(w),F!==0&&(R=F,S=Ew(w,F))),S===1))throw P=Sd,pc(w,0),fc(w,R),Yn(w,oi()),P;switch(w.finishedWork=N,w.finishedLanes=R,S){case 0:case 1:throw Error(a(345));case 2:Md(w,Ho);break;case 3:if(fc(w,R),(R&130023424)===R&&(S=Rv+500-oi(),10<S)){if(am(w,0)!==0)break;if(N=w.suspendedLanes,(N&R)!==R){Io(),w.pingedLanes|=w.suspendedLanes&N;break}w.timeoutHandle=ce(Md.bind(null,w,Ho),S);break}Md(w,Ho);break;case 4:if(fc(w,R),(R&4194240)===R)break;for(S=w.eventTimes,N=-1;0<R;){var K=31-Oo(R);F=1<<K,K=S[K],K>N&&(N=K),R&=~F}if(R=N,R=oi()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*qC(R/1960))-R,10<R){w.timeoutHandle=ce(Md.bind(null,w,Ho),R);break}Md(w,Ho);break;case 5:Md(w,Ho);break;default:throw Error(a(329))}}}return Yn(w,oi()),w.callbackNode===P?XC.bind(null,w):null}function Ew(w,S){var P=Rm;return w.current.memoizedState.isDehydrated&&(pc(w,S).flags|=256),w=Fm(w,S),w!==2&&(S=Ho,Ho=P,S!==null&&kv(S)),w}function kv(w){Ho===null?Ho=w:Ho.push.apply(Ho,w)}function o3(w){for(var S=w;;){if(S.flags&16384){var P=S.updateQueue;if(P!==null&&(P=P.stores,P!==null))for(var R=0;R<P.length;R++){var N=P[R],F=N.getSnapshot;N=N.value;try{if(!pl(F(),N))return!1}catch{return!1}}}if(P=S.child,S.subtreeFlags&16384&&P!==null)P.return=S,S=P;else{if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function fc(w,S){for(S&=~Mw,S&=~iu,w.suspendedLanes|=S,w.pingedLanes&=~S,w=w.expirationTimes;0<S;){var P=31-Oo(S),R=1<<P;w[P]=-1,S&=~R}}function Pw(w){if(Tr&6)throw Error(a(327));Cd();var S=am(w,0);if(!(S&1))return Yn(w,oi()),null;var P=Fm(w,S);if(w.tag!==0&&P===2){var R=K0(w);R!==0&&(S=R,P=Ew(w,R))}if(P===1)throw P=Sd,pc(w,0),fc(w,S),Yn(w,oi()),P;if(P===6)throw Error(a(345));return w.finishedWork=w.current.alternate,w.finishedLanes=S,Md(w,Ho),Yn(w,oi()),null}function km(w){dc!==null&&dc.tag===0&&!(Tr&6)&&Cd();var S=Tr;Tr|=1;var P=dn.transition,R=Gr;try{if(dn.transition=null,Gr=1,w)return w()}finally{Gr=R,dn.transition=P,Tr=S,!(Tr&6)&&Rs()}}function Fv(){ya=_d.current,Bt(_d)}function pc(w,S){w.finishedWork=null,w.finishedLanes=0;var P=w.timeoutHandle;if(P!==ie&&(w.timeoutHandle=ie,ae(P)),Vn!==null)for(P=Vn.return;P!==null;){var R=P;switch(W1(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&sn();break;case 3:ac(),Bt(mr),Bt(Xt),es();break;case 5:vm(R);break;case 4:ac();break;case 13:Bt(On);break;case 19:Bt(On);break;case 10:Xh(R.type._context);break;case 22:case 23:Fv()}P=P.return}if(Xn=w,Vn=w=au(w.current,null),Ji=ya=S,jn=0,Sd=null,Mw=iu=ff=0,Ho=Rm=null,ml!==null){for(S=0;S<ml.length;S++)if(P=ml[S],R=P.interleaved,R!==null){P.interleaved=null;var N=R.next,F=P.pending;if(F!==null){var K=F.next;F.next=N,R.next=K}P.pending=R}ml=null}return w}function YC(w,S){do{var P=Vn;try{if(tv(),bm.current=mv,sc){for(var R=Rn.memoizedState;R!==null;){var N=R.queue;N!==null&&(N.pending=null),R=R.next}sc=!1}if(vl=0,xi=mo=Rn=null,xm=!1,rf=0,Aw.current=null,P===null||P.return===null){jn=1,Sd=S,Vn=null;break}e:{var F=w,K=P.return,ee=P,oe=S;if(S=Ji,ee.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var ve=oe,xe=ee,Te=xe.tag;if(!(xe.mode&1)&&(Te===0||Te===11||Te===15)){var Me=xe.alternate;Me?(xe.updateQueue=Me.updateQueue,xe.memoizedState=Me.memoizedState,xe.lanes=Me.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var He=AC(K);if(He!==null){He.flags&=-257,MC(He,K,ee,F,S),He.mode&1&&ow(F,ve,S),S=He,oe=ve;var Ze=S.updateQueue;if(Ze===null){var bt=new Set;bt.add(oe),S.updateQueue=bt}else Ze.add(oe);break e}else{if(!(S&1)){ow(F,ve,S),Dw();break e}oe=Error(a(426))}}else if(wn&&ee.mode&1){var Nt=AC(K);if(Nt!==null){!(Nt.flags&65536)&&(Nt.flags|=256),MC(Nt,K,ee,F,S),q1(oe);break e}}F=oe,jn!==4&&(jn=2),Rm===null?Rm=[F]:Rm.push(F),oe=iw(oe,ee),ee=K;do{switch(ee.tag){case 3:ee.flags|=65536,S&=-S,ee.lanes|=S;var Oe=SC(ee,oe,S);lC(ee,Oe);break e;case 1:F=oe;var Ee=ee.type,ke=ee.stateNode;if(!(ee.flags&128)&&(typeof Ee.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(ou===null||!ou.has(ke)))){ee.flags|=65536,S&=-S,ee.lanes|=S;var mt=vv(ee,F,S);lC(ee,mt);break e}}ee=ee.return}while(ee!==null)}QC(P)}catch(wt){S=wt,Vn===P&&P!==null&&(Vn=P=P.return);continue}break}while(!0)}function KC(){var w=Om.current;return Om.current=mv,w===null?mv:w}function Dw(){(jn===0||jn===3||jn===2)&&(jn=4),Xn===null||!(ff&268435455)&&!(iu&268435455)||fc(Xn,Ji)}function Fm(w,S){var P=Tr;Tr|=2;var R=KC();Xn===w&&Ji===S||pc(w,S);do try{a3();break}catch(N){YC(w,N)}while(!0);if(tv(),Tr=P,Om.current=R,Vn!==null)throw Error(a(261));return Xn=null,Ji=0,jn}function a3(){for(;Vn!==null;)JC(Vn)}function s3(){for(;Vn!==null&&!qI();)JC(Vn)}function JC(w){var S=nT(w.alternate,w,ya);w.memoizedProps=w.pendingProps,S===null?QC(w):Vn=S,Aw.current=null}function QC(w){var S=w;do{var P=S.alternate;if(w=S.return,S.flags&32768){if(P=NC(P,S),P!==null){P.flags&=32767,Vn=P;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{jn=6,Vn=null;return}}else if(P=TC(P,S,ya),P!==null){Vn=P;return}if(S=S.sibling,S!==null){Vn=S;return}Vn=S=w}while(S!==null);jn===0&&(jn=5)}function Md(w,S){var P=Gr,R=dn.transition;try{dn.transition=null,Gr=1,Ow(w,S,P)}finally{dn.transition=R,Gr=P}return null}function Ow(w,S,P){do Cd();while(dc!==null);if(Tr&6)throw Error(a(327));var R=w.finishedWork,N=w.finishedLanes;if(R===null)return null;if(w.finishedWork=null,w.finishedLanes=0,R===w.current)throw Error(a(177));w.callbackNode=null,w.callbackPriority=0;var F=R.lanes|R.childLanes;if(iC(w,F),w===Xn&&(Vn=Xn=null,Ji=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||Iv||(Iv=!0,iT(F1,function(){return Cd(),null})),F=(R.flags&15990)!==0,R.subtreeFlags&15990||F){F=dn.transition,dn.transition=null;var K=Gr;Gr=1;var ee=Tr;Tr|=4,Aw.current=null,kC(w,R),VC(w,R),j(w.containerInfo),w.current=R,i3(R),aC(),Tr=ee,Gr=K,dn.transition=F}else w.current=R;if(Iv&&(Iv=!1,dc=w,Lv=N),F=w.pendingLanes,F===0&&(ou=null),YI(R.stateNode),Yn(w,oi()),S!==null)for(P=w.onRecoverableError,R=0;R<S.length;R++)P(S[R]);if(Im)throw Im=!1,w=Tw,Tw=null,w;return Lv&1&&w.tag!==0&&Cd(),F=w.pendingLanes,F&1?w===Bm?Lm++:(Lm=0,Bm=w):Lm=0,Rs(),null}function Cd(){if(dc!==null){var w=oC(Lv),S=dn.transition,P=Gr;try{if(dn.transition=null,Gr=16>w?16:w,dc===null)var R=!1;else{if(w=dc,dc=null,Lv=0,Tr&6)throw Error(a(331));var N=Tr;for(Tr|=4,Pt=w.current;Pt!==null;){var F=Pt,K=F.child;if(Pt.flags&16){var ee=F.deletions;if(ee!==null){for(var oe=0;oe<ee.length;oe++){var ve=ee[oe];for(Pt=ve;Pt!==null;){var xe=Pt;switch(xe.tag){case 0:case 11:case 15:wd(8,xe,F)}var Te=xe.child;if(Te!==null)Te.return=xe,Pt=Te;else for(;Pt!==null;){xe=Pt;var Me=xe.sibling,He=xe.return;if(gw(xe),xe===ve){Pt=null;break}if(Me!==null){Me.return=He,Pt=Me;break}Pt=He}}}var Ze=F.alternate;if(Ze!==null){var bt=Ze.child;if(bt!==null){Ze.child=null;do{var Nt=bt.sibling;bt.sibling=null,bt=Nt}while(bt!==null)}}Pt=F}}if(F.subtreeFlags&2064&&K!==null)K.return=F,Pt=K;else e:for(;Pt!==null;){if(F=Pt,F.flags&2048)switch(F.tag){case 0:case 11:case 15:wd(9,F,F.return)}var Oe=F.sibling;if(Oe!==null){Oe.return=F.return,Pt=Oe;break e}Pt=F.return}}var Ee=w.current;for(Pt=Ee;Pt!==null;){K=Pt;var ke=K.child;if(K.subtreeFlags&2064&&ke!==null)ke.return=K,Pt=ke;else e:for(K=Ee;Pt!==null;){if(ee=Pt,ee.flags&2048)try{switch(ee.tag){case 0:case 11:case 15:df(9,ee)}}catch(wt){Go(ee,ee.return,wt)}if(ee===K){Pt=null;break e}var mt=ee.sibling;if(mt!==null){mt.return=ee.return,Pt=mt;break e}Pt=ee.return}}if(Tr=N,Rs(),fl&&typeof fl.onPostCommitFiberRoot=="function")try{fl.onPostCommitFiberRoot(Z0,w)}catch{}R=!0}return R}finally{Gr=P,dn.transition=S}}return!1}function ZC(w,S,P){S=iw(P,S),S=SC(w,S,1),nc(w,S),S=Io(),w=Nv(w,1),w!==null&&(qh(w,1,S),Yn(w,S))}function Go(w,S,P){if(w.tag===3)ZC(w,w,P);else for(;S!==null;){if(S.tag===3){ZC(S,w,P);break}else if(S.tag===1){var R=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(ou===null||!ou.has(R))){w=iw(P,w),w=vv(S,w,1),nc(S,w),w=Io(),S=Nv(S,1),S!==null&&(qh(S,1,w),Yn(S,w));break}}S=S.return}}function $C(w,S,P){var R=w.pingCache;R!==null&&R.delete(S),S=Io(),w.pingedLanes|=w.suspendedLanes&P,Xn===w&&(Ji&P)===P&&(jn===4||jn===3&&(Ji&130023424)===Ji&&500>oi()-Rv?pc(w,0):Mw|=P),Yn(w,S)}function eT(w,S){S===0&&(w.mode&1?(S=X0,X0<<=1,!(X0&130023424)&&(X0=4194304)):S=1);var P=Io();w=Nv(w,S),w!==null&&(qh(w,S,P),Yn(w,P))}function tT(w){var S=w.memoizedState,P=0;S!==null&&(P=S.retryLane),eT(w,P)}function rT(w,S){var P=0;switch(w.tag){case 13:var R=w.stateNode,N=w.memoizedState;N!==null&&(P=N.retryLane);break;case 19:R=w.stateNode;break;default:throw Error(a(314))}R!==null&&R.delete(S),eT(w,P)}var nT;nT=function(w,S,P){if(w!==null)if(w.memoizedProps!==S.pendingProps||mr.current)va=!0;else{if(!(w.lanes&P)&&!(S.flags&128))return va=!1,BC(w,S,P);va=!!(w.flags&131072)}else va=!1,wn&&S.flags&1048576&&G1(S,av,S.index);switch(S.lanes=0,S.tag){case 2:var R=S.type;w!==null&&(w.alternate=null,S.alternate=null,S.flags|=2),w=S.pendingProps;var N=kr(S,Xt.current);Yh(S,P),N=J1(null,S,R,w,N,P);var F=Q1();return S.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,cn(R)?(F=!0,ii(S)):F=!1,S.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,hm(S),N.updater=pm,S.stateNode=N,N._reactInternals=S,H1(S,R,w,P),S=uw(null,S,R,!0,F,P)):(S.tag=0,wn&&F&&yd(S),Ro(null,S,N,P),S=S.child),S;case 16:R=S.elementType;e:{switch(w!==null&&(w.alternate=null,S.alternate=null,S.flags|=2),w=S.pendingProps,N=R._init,R=N(R._payload),S.type=R,N=S.tag=u3(R),w=Ja(R,w),N){case 0:S=sw(null,S,R,w,P);break e;case 1:S=lw(null,S,R,w,P);break e;case 11:S=aw(null,S,R,w,P);break e;case 14:S=EC(null,S,R,Ja(R.type,w),P);break e}throw Error(a(306,R,""))}return S;case 0:return R=S.type,N=S.pendingProps,N=S.elementType===R?N:Ja(R,N),sw(w,S,R,N,P);case 1:return R=S.type,N=S.pendingProps,N=S.elementType===R?N:Ja(R,N),lw(w,S,R,N,P);case 3:e:{if(RC(S),w===null)throw Error(a(387));R=S.pendingProps,F=S.memoizedState,N=F.element,rv(w,S),nv(S,R,null,P);var K=S.memoizedState;if(R=K.element,ye&&F.isDehydrated)if(F={element:R,isDehydrated:!1,cache:K.cache,transitions:K.transitions},S.updateQueue.baseState=F,S.memoizedState=F,S.flags&256){N=Error(a(423)),S=bv(w,S,R,P,N);break e}else if(R!==N){N=Error(a(424)),S=bv(w,S,R,P,N);break e}else for(ye&&(ma=je(S.stateNode.containerInfo),pa=S,wn=!0,Ls=null,bd=!1),P=fC(S,null,R,P),S.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if($h(),R===N){S=nu(w,S,P);break e}Ro(w,S,R,P)}S=S.child}return S;case 5:return X1(S),w===null&&Qh(S),R=S.type,N=S.pendingProps,F=w!==null?w.memoizedProps:null,K=N.children,ne(R,N)?K=null:F!==null&&ne(R,F)&&(S.flags|=32),OC(w,S),Ro(w,S,K,P),S.child;case 6:return w===null&&Qh(S),null;case 13:return cw(w,S,P);case 4:return hv(S,S.stateNode.containerInfo),R=S.pendingProps,w===null?S.child=ef(S,null,R,P):Ro(w,S,R,P),S.child;case 11:return R=S.type,N=S.pendingProps,N=S.elementType===R?N:Ja(R,N),aw(w,S,R,N,P);case 7:return Ro(w,S,S.pendingProps,P),S.child;case 8:return Ro(w,S,S.pendingProps.children,P),S.child;case 12:return Ro(w,S,S.pendingProps.children,P),S.child;case 10:e:{if(R=S.type._context,N=S.pendingProps,F=S.memoizedProps,K=N.value,tc(S,R,K),F!==null)if(pl(F.value,K)){if(F.children===N.children&&!mr.current){S=nu(w,S,P);break e}}else for(F=S.child,F!==null&&(F.return=S);F!==null;){var ee=F.dependencies;if(ee!==null){K=F.child;for(var oe=ee.firstContext;oe!==null;){if(oe.context===R){if(F.tag===1){oe=Is(-1,P&-P),oe.tag=2;var ve=F.updateQueue;if(ve!==null){ve=ve.shared;var xe=ve.pending;xe===null?oe.next=oe:(oe.next=xe.next,xe.next=oe),ve.pending=oe}}F.lanes|=P,oe=F.alternate,oe!==null&&(oe.lanes|=P),dm(F.return,P,S),ee.lanes|=P;break}oe=oe.next}}else if(F.tag===10)K=F.type===S.type?null:F.child;else if(F.tag===18){if(K=F.return,K===null)throw Error(a(341));K.lanes|=P,ee=K.alternate,ee!==null&&(ee.lanes|=P),dm(K,P,S),K=F.sibling}else K=F.child;if(K!==null)K.return=F;else for(K=F;K!==null;){if(K===S){K=null;break}if(F=K.sibling,F!==null){F.return=K.return,K=F;break}K=K.return}F=K}Ro(w,S,N.children,P),S=S.child}return S;case 9:return N=S.type,R=S.pendingProps.children,Yh(S,P),N=fa(N),R=R(N),S.flags|=1,Ro(w,S,R,P),S.child;case 14:return R=S.type,N=Ja(R,S.pendingProps),N=Ja(R.type,N),EC(w,S,R,N,P);case 15:return PC(w,S,S.type,S.pendingProps,P);case 17:return R=S.type,N=S.pendingProps,N=S.elementType===R?N:Ja(R,N),w!==null&&(w.alternate=null,S.alternate=null,S.flags|=2),S.tag=1,cn(R)?(w=!0,ii(S)):w=!1,Yh(S,P),iv(S,R,N),H1(S,R,N,P),uw(null,S,R,!0,w,P);case 19:return fw(w,S,P);case 22:return DC(w,S,P)}throw Error(a(156,S.tag))};function iT(w,S){return Q0(w,S)}function l3(w,S,P,R){this.tag=w,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(w,S,P,R){return new l3(w,S,P,R)}function Rw(w){return w=w.prototype,!(!w||!w.isReactComponent)}function u3(w){if(typeof w=="function")return Rw(w)?1:0;if(w!=null){if(w=w.$$typeof,w===y)return 11;if(w===v)return 14}return 2}function au(w,S){var P=w.alternate;return P===null?(P=ba(w.tag,S,w.key,w.mode),P.elementType=w.elementType,P.type=w.type,P.stateNode=w.stateNode,P.alternate=w,w.alternate=P):(P.pendingProps=S,P.type=w.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=w.flags&14680064,P.childLanes=w.childLanes,P.lanes=w.lanes,P.child=w.child,P.memoizedProps=w.memoizedProps,P.memoizedState=w.memoizedState,P.updateQueue=w.updateQueue,S=w.dependencies,P.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},P.sibling=w.sibling,P.index=w.index,P.ref=w.ref,P}function zv(w,S,P,R,N,F){var K=2;if(R=w,typeof w=="function")Rw(w)&&(K=1);else if(typeof w=="string")K=5;else e:switch(w){case d:return Td(P.children,N,F,S);case c:K=8,N|=8;break;case h:return w=ba(12,P,S,N|2),w.elementType=h,w.lanes=F,w;case m:return w=ba(13,P,S,N),w.elementType=m,w.lanes=F,w;case p:return w=ba(19,P,S,N),w.elementType=p,w.lanes=F,w;case x:return Uv(P,N,F,S);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case f:K=10;break e;case g:K=9;break e;case y:K=11;break e;case v:K=14;break e;case b:K=16,R=null;break e}throw Error(a(130,w==null?w:typeof w,""))}return S=ba(K,P,S,N),S.elementType=w,S.type=R,S.lanes=F,S}function Td(w,S,P,R){return w=ba(7,w,R,S),w.lanes=P,w}function Uv(w,S,P,R){return w=ba(22,w,R,S),w.elementType=x,w.lanes=P,w.stateNode={},w}function zm(w,S,P){return w=ba(6,w,null,S),w.lanes=P,w}function Iw(w,S,P){return S=ba(4,w.children!==null?w.children:[],w.key,S),S.lanes=P,S.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},S}function c3(w,S,P,R,N){this.tag=S,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ie,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J0(0),this.expirationTimes=J0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J0(0),this.identifierPrefix=R,this.onRecoverableError=N,ye&&(this.mutableSourceEagerHydrationData=null)}function oT(w,S,P,R,N,F,K,ee,oe){return w=new c3(w,S,P,ee,oe),S===1?(S=1,F===!0&&(S|=8)):S=0,F=ba(3,null,null,S),w.current=F,F.stateNode=w,F.memoizedState={element:R,isDehydrated:P,cache:null,transitions:null},hm(F),w}function aT(w){if(!w)return Ii;w=w._reactInternals;e:{if(C(w)!==w||w.tag!==1)throw Error(a(170));var S=w;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(cn(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(a(171))}if(w.tag===1){var P=w.type;if(cn(P))return hl(w,P,S)}return S}function Lw(w){var S=w._reactInternals;if(S===void 0)throw typeof w.render=="function"?Error(a(188)):(w=Object.keys(w).join(","),Error(a(268,w)));return w=I(S),w===null?null:w.stateNode}function Bw(w,S){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var P=w.retryLane;w.retryLane=P!==0&&P<S?P:S}}function Nw(w,S){Bw(w,S),(w=w.alternate)&&Bw(w,S)}function O(w){return w=I(w),w===null?null:w.stateNode}function B(){return null}return r.attemptContinuousHydration=function(w){if(w.tag===13){var S=Io();ns(w,134217728,S),Nw(w,134217728)}},r.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var S=Io(),P=hc(w);ns(w,P,S),Nw(w,P)}},r.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var S=w.stateNode;if(S.current.memoizedState.isDehydrated){var P=om(S.pendingLanes);P!==0&&(sm(S,P|1),Yn(S,oi()),!(Tr&6)&&(Ad(),Rs()))}break;case 13:var R=Io();km(function(){return ns(w,1,R)}),Nw(w,1)}},r.batchedUpdates=function(w,S){var P=Tr;Tr|=1;try{return w(S)}finally{Tr=P,Tr===0&&(Ad(),Os&&Rs())}},r.createComponentSelector=function(w){return{$$typeof:Cv,value:w}},r.createContainer=function(w,S,P,R,N,F,K){return oT(w,S,!1,null,P,R,N,F,K)},r.createHasPseudoClassSelector=function(w){return{$$typeof:Tv,value:w}},r.createHydrationContainer=function(w,S,P,R,N,F,K,ee,oe){return w=oT(P,R,!0,w,N,F,K,ee,oe),w.context=aT(null),P=w.current,R=Io(),N=hc(P),F=Is(R,N),F.callback=S??null,nc(P,F),w.current.lanes=N,qh(w,N,R),Yn(w,R),w},r.createPortal=function(w,S,P){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:w,containerInfo:S,implementation:P}},r.createRoleSelector=function(w){return{$$typeof:Ev,value:w}},r.createTestNameSelector=function(w){return{$$typeof:Pv,value:w}},r.createTextSelector=function(w){return{$$typeof:Dv,value:w}},r.deferredUpdates=function(w){var S=Gr,P=dn.transition;try{return dn.transition=null,Gr=16,w()}finally{Gr=S,dn.transition=P}},r.discreteUpdates=function(w,S,P,R,N){var F=Gr,K=dn.transition;try{return dn.transition=null,Gr=1,w(S,P,R,N)}finally{Gr=F,dn.transition=K,Tr===0&&Ad()}},r.findAllNodes=Sw,r.findBoundingRects=function(w,S){if(!rt)throw Error(a(363));S=Sw(w,S),w=[];for(var P=0;P<S.length;P++)w.push(he(S[P]));for(S=w.length-1;0<S;S--){P=w[S];for(var R=P.x,N=R+P.width,F=P.y,K=F+P.height,ee=S-1;0<=ee;ee--)if(S!==ee){var oe=w[ee],ve=oe.x,xe=ve+oe.width,Te=oe.y,Me=Te+oe.height;if(R>=ve&&F>=Te&&N<=xe&&K<=Me){w.splice(S,1);break}else if(R!==ve||P.width!==oe.width||Me<F||Te>K){if(!(F!==Te||P.height!==oe.height||xe<R||ve>N)){ve>R&&(oe.width+=ve-R,oe.x=R),xe<N&&(oe.width=N-ve),w.splice(S,1);break}}else{Te>F&&(oe.height+=Te-F,oe.y=F),Me<K&&(oe.height=K-Te),w.splice(S,1);break}}}return w},r.findHostInstance=Lw,r.findHostInstanceWithNoPortals=function(w){return w=D(w),w=w!==null?L(w):null,w===null?null:w.stateNode},r.findHostInstanceWithWarning=function(w){return Lw(w)},r.flushControlled=function(w){var S=Tr;Tr|=1;var P=dn.transition,R=Gr;try{dn.transition=null,Gr=1,w()}finally{Gr=R,dn.transition=P,Tr=S,Tr===0&&(Ad(),Rs())}},r.flushPassiveEffects=Cd,r.flushSync=km,r.focusWithin=function(w,S){if(!rt)throw Error(a(363));for(w=Ov(w),S=WC(w,S),S=Array.from(S),w=0;w<S.length;){var P=S[w++];if(!J(P)){if(P.tag===5&&Pe(P.stateNode))return!0;for(P=P.child;P!==null;)S.push(P),P=P.sibling}}return!1},r.getCurrentUpdatePriority=function(){return Gr},r.getFindAllNodesFailureDescription=function(w,S){if(!rt)throw Error(a(363));var P=0,R=[];w=[Ov(w),0];for(var N=0;N<w.length;){var F=w[N++],K=w[N++],ee=S[K];if((F.tag!==5||!J(F))&&(ww(F,ee)&&(R.push(_w(ee)),K++,K>P&&(P=K)),K<S.length))for(F=F.child;F!==null;)w.push(F,K),F=F.sibling}if(P<S.length){for(w=[];P<S.length;P++)w.push(_w(S[P]));return`findAllNodes was able to match part of the selector:
  `+(R.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},r.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return W(w.child.stateNode);default:return w.child.stateNode}},r.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:O,findFiberByHostInstance:w.findFiberByHostInstance||B,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)w=!0;else{try{Z0=S.inject(w),fl=S}catch{}w=!!S.checkDCE}}return w},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(w,S,P,R){if(!rt)throw Error(a(363));w=Sw(w,S);var N=De(w,P,R).disconnect;return{disconnect:function(){N()}}},r.registerMutableSourceForHydration=function(w,S){var P=S._getVersion;P=P(S._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[S,P]:w.mutableSourceEagerHydrationData.push(S,P)},r.runWithPriority=function(w,S){var P=Gr;try{return Gr=w,S()}finally{Gr=P}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(w,S,P,R){var N=S.current,F=Io(),K=hc(N);return P=aT(P),S.context===null?S.context=P:S.pendingContext=P,S=Is(F,K),S.payload={element:w},R=R===void 0?null:R,R!==null&&(S.callback=R),nc(N,S),w=ns(N,K,F),w!==null&&fm(w,N,K),K},r};Ere.exports=zSe;var USe=Ere.exports;const VSe=OU(USe);var Pre={exports:{}},Dre={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,V){var j=z.length;z.push(V);e:for(;0<j;){var H=j-1>>>1,Y=z[H];if(0<i(Y,V))z[H]=V,z[j]=Y,j=H;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var V=z[0],j=z.pop();if(j!==V){z[0]=j;e:for(var H=0,Y=z.length,Q=Y>>>1;H<Q;){var $=2*(H+1)-1,ne=z[$],Z=$+1,ce=z[Z];if(0>i(ne,j))Z<Y&&0>i(ce,ne)?(z[H]=ce,z[Z]=j,H=Z):(z[H]=ne,z[$]=j,H=$);else if(Z<Y&&0>i(ce,j))z[H]=ce,z[Z]=j,H=Z;else break e}}return V}function i(z,V){var j=z.sortIndex-V.sortIndex;return j!==0?j:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],d=1,c=null,h=3,f=!1,g=!1,y=!1,m=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var V=r(u);V!==null;){if(V.callback===null)n(u);else if(V.startTime<=z)n(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=r(u)}}function x(z){if(y=!1,b(z),!g)if(r(l)!==null)g=!0,W(_);else{var V=r(u);V!==null&&G(x,V.startTime-z)}}function _(z,V){g=!1,y&&(y=!1,p(T),T=-1),f=!0;var j=h;try{for(b(V),c=r(l);c!==null&&(!(c.expirationTime>V)||z&&!D());){var H=c.callback;if(typeof H=="function"){c.callback=null,h=c.priorityLevel;var Y=H(c.expirationTime<=V);V=e.unstable_now(),typeof Y=="function"?c.callback=Y:c===r(l)&&n(l),b(V)}else n(l);c=r(l)}if(c!==null)var Q=!0;else{var $=r(u);$!==null&&G(x,$.startTime-V),Q=!1}return Q}finally{c=null,h=j,f=!1}}var A=!1,M=null,T=-1,C=5,E=-1;function D(){return!(e.unstable_now()-E<C)}function I(){if(M!==null){var z=e.unstable_now();E=z;var V=!0;try{V=M(!0,z)}finally{V?k():(A=!1,M=null)}}else A=!1}var k;if(typeof v=="function")k=function(){v(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,U=L.port2;L.port1.onmessage=I,k=function(){U.postMessage(null)}}else k=function(){m(I,0)};function W(z){M=z,A||(A=!0,k())}function G(z,V){T=m(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,W(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var j=h;h=V;try{return z()}finally{h=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=h;h=z;try{return V()}finally{h=j}},e.unstable_scheduleCallback=function(z,V,j){var H=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=j+Y,z={id:d++,callback:V,priorityLevel:z,startTime:j,expirationTime:Y,sortIndex:-1},j>H?(z.sortIndex=j,t(u,z),r(l)===null&&z===r(u)&&(y?(p(T),T=-1):y=!0,G(x,j-H))):(z.sortIndex=Y,t(l,z),g||f||(g=!0,W(_))),z},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(z){var V=h;return function(){var j=h;h=V;try{return z.apply(this,arguments)}finally{h=j}}}})(Dre);Pre.exports=Dre;var M8=Pre.exports;const jSe=e=>typeof e=="object"&&typeof e.then=="function",Lg=[];function Ore(e,t,r=(n,i)=>n===i){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let i=0;i<n;i++)if(!r(e[i],t[i]))return!1;return!0}function Rre(e,t=null,r=!1,n={}){t===null&&(t=[e]);for(const o of Lg)if(Ore(t,o.keys,o.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return n.lifespan&&n.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,n.lifespan)),o.response;if(!r)throw o.promise}const i={keys:t,equal:n.equal,remove:()=>{const o=Lg.indexOf(i);o!==-1&&Lg.splice(o,1)},promise:(jSe(e)?e:e(...t)).then(o=>{i.response=o,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(o=>i.error=o)};if(Lg.push(i),!r)throw i.promise}const HSe=(e,t,r)=>Rre(e,t,!1,r),GSe=(e,t,r)=>void Rre(e,t,!0,r),WSe=e=>{if(e===void 0||e.length===0)Lg.splice(0,Lg.length);else{const t=Lg.find(r=>Ore(e,r.keys,r.equal));t&&t.remove()}},SV={},qSe=e=>void Object.assign(SV,e);function XSe(e,t){function r(d,{args:c=[],attach:h,...f},g){let y=`${d[0].toUpperCase()}${d.slice(1)}`,m;if(d==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const p=f.object;m=Yy(p,{type:d,root:g,attach:h,primitive:!0})}else{const p=SV[y];if(!p)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(c))throw new Error("R3F: The args prop must be an array!");m=Yy(new p(...c),{type:d,root:g,attach:h,memoizedProps:{args:c}})}return m.__r3f.attach===void 0&&(m instanceof Er?m.__r3f.attach="geometry":m instanceof Hi&&(m.__r3f.attach="material")),y!=="inject"&&CL(m,f),m}function n(d,c){let h=!1;if(c){var f,g;(f=c.__r3f)!=null&&f.attach?ML(d,c,c.__r3f.attach):c.isObject3D&&d.isObject3D&&(d.add(c),h=!0),h||(g=d.__r3f)==null||g.objects.push(c),c.__r3f||Yy(c,{}),c.__r3f.parent=d,$F(c),Ky(c)}}function i(d,c,h){let f=!1;if(c){var g,y;if((g=c.__r3f)!=null&&g.attach)ML(d,c,c.__r3f.attach);else if(c.isObject3D&&d.isObject3D){c.parent=d,c.dispatchEvent({type:"added"});const m=d.children.filter(v=>v!==c),p=m.indexOf(h);d.children=[...m.slice(0,p),c,...m.slice(p)],f=!0}f||(y=d.__r3f)==null||y.objects.push(c),c.__r3f||Yy(c,{}),c.__r3f.parent=d,$F(c),Ky(c)}}function o(d,c,h=!1){d&&[...d].forEach(f=>a(c,f,h))}function a(d,c,h){if(c){var f,g,y;if(c.__r3f&&(c.__r3f.parent=null),(f=d.__r3f)!=null&&f.objects&&(d.__r3f.objects=d.__r3f.objects.filter(x=>x!==c)),(g=c.__r3f)!=null&&g.attach)D8(d,c,c.__r3f.attach);else if(c.isObject3D&&d.isObject3D){var m;d.remove(c),(m=c.__r3f)!=null&&m.root&&rAe(c.__r3f.root,c)}const v=(y=c.__r3f)==null?void 0:y.primitive,b=!v&&(h===void 0?c.dispose!==null:h);if(!v){var p;o((p=c.__r3f)==null?void 0:p.objects,c,b),o(c.children,c,b)}if(delete c.__r3f,b&&c.dispose&&c.type!=="Scene"){const x=()=>{try{c.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?M8.unstable_scheduleCallback(M8.unstable_IdlePriority,x):x()}Ky(d)}}function s(d,c,h,f){var g;const y=(g=d.__r3f)==null?void 0:g.parent;if(!y)return;const m=r(c,h,d.__r3f.root);if(d.children){for(const p of d.children)p.__r3f&&n(m,p);d.children=d.children.filter(p=>!p.__r3f)}d.__r3f.objects.forEach(p=>n(m,p)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||a(y,d),m.parent&&(m.__r3f.autoRemovedBeforeAppend=!0),n(y,m),m.raycast&&m.__r3f.eventCount&&m.__r3f.root.getState().internal.interaction.push(m),[f,f.alternate].forEach(p=>{p!==null&&(p.stateNode=m,p.ref&&(typeof p.ref=="function"?p.ref(m):p.ref.current=m))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:VSe({createInstance:r,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,c)=>{if(!c)return;const h=d.getState().scene;h.__r3f&&(h.__r3f.root=d,n(h,c))},removeChildFromContainer:(d,c)=>{c&&a(d.getState().scene,c)},insertInContainerBefore:(d,c,h)=>{if(!c||!h)return;const f=d.getState().scene;f.__r3f&&i(f,c,h)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var c;return!!((c=d==null?void 0:d.__r3f)!=null?c:{}).handlers},prepareUpdate(d,c,h,f){var g;if(((g=d==null?void 0:d.__r3f)!=null?g:{}).primitive&&f.object&&f.object!==d)return[!0];{const{args:m=[],children:p,...v}=f,{args:b=[],children:x,..._}=h;if(!Array.isArray(m))throw new Error("R3F: the args prop must be an array!");if(m.some((M,T)=>M!==b[T]))return[!0];const A=zre(d,v,_,!0);return A.changes.length?[!1,A]:null}},commitUpdate(d,[c,h],f,g,y,m){c?s(d,f,y,m):CL(d,h)},commitMount(d,c,h,f){var g;const y=(g=d.__r3f)!=null?g:{};d.raycast&&y.handlers&&y.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Yy(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var c;const{attach:h,parent:f}=(c=d.__r3f)!=null?c:{};h&&f&&D8(f,d,h),d.isObject3D&&(d.visible=!1),Ky(d)},unhideInstance(d,c){var h;const{attach:f,parent:g}=(h=d.__r3f)!=null?h:{};f&&g&&ML(g,d,f),(d.isObject3D&&c.visible==null||c.visible)&&(d.visible=!0),Ky(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>t?t():bb.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Nn.fun(performance.now)?performance.now:Nn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Nn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Nn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:CL}}var C8,T8;const AL=e=>"colorSpace"in e||"outputColorSpace"in e,Ire=()=>{var e;return(e=SV.ColorManagement)!=null?e:null},Lre=e=>e&&e.isOrthographicCamera,YSe=e=>e&&e.hasOwnProperty("current"),xM=typeof window<"u"&&((C8=window.document)!=null&&C8.createElement||((T8=window.navigator)==null?void 0:T8.product)==="ReactNative")?te.useLayoutEffect:te.useEffect;function Bre(e){const t=te.useRef(e);return xM(()=>void(t.current=e),[e]),t}function KSe({set:e}){return xM(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class Nre extends te.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}Nre.getDerivedStateFromError=()=>({error:!0});const kre="__default",E8=new Map,JSe=e=>e&&!!e.memoized&&!!e.changes;function Fre(e){var t;const r=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],r),e[1]):e}const i_=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()},Nn={obj:e=>e===Object(e)&&!Nn.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:r="shallow",objects:n="reference",strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(Nn.str(e)||Nn.num(e))return e===t;const o=Nn.obj(e);if(o&&n==="reference")return e===t;const a=Nn.arr(e);if(a&&r==="reference")return e===t;if((a||o)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;if(o&&r==="shallow"&&n==="shallow"){for(s in i?t:e)if(!Nn.equ(e[s],t[s],{strict:i,objects:"reference"}))return!1}else for(s in i?t:e)if(e[s]!==t[s])return!1;if(Nn.und(s)){if(a&&e.length===0&&t.length===0||o&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function QSe(e){const t={nodes:{},materials:{}};return e&&e.traverse(r=>{r.name&&(t.nodes[r.name]=r),r.material&&!t.materials[r.material.name]&&(t.materials[r.material.name]=r.material)}),t}function ZSe(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function Yy(e,t){const r=e;return r.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function ZF(e,t){let r=e;if(t.includes("-")){const n=t.split("-"),i=n.pop();return r=n.reduce((o,a)=>o[a],e),{target:r,key:i}}else return{target:r,key:t}}const P8=/-\d+$/;function ML(e,t,r){if(Nn.str(r)){if(P8.test(r)){const o=r.replace(P8,""),{target:a,key:s}=ZF(e,o);Array.isArray(a[s])||(a[s]=[])}const{target:n,key:i}=ZF(e,r);t.__r3f.previousAttach=n[i],n[i]=t}else t.__r3f.previousAttach=r(e,t)}function D8(e,t,r){var n,i;if(Nn.str(r)){const{target:o,key:a}=ZF(e,r),s=t.__r3f.previousAttach;s===void 0?delete o[a]:o[a]=s}else(n=t.__r3f)==null||n.previousAttach==null||n.previousAttach(e,t);(i=t.__r3f)==null||delete i.previousAttach}function zre(e,{children:t,key:r,ref:n,...i},{children:o,key:a,ref:s,...l}={},u=!1){var d;const c=(d=e==null?void 0:e.__r3f)!=null?d:{},h=Object.entries(i),f=[];if(u){const y=Object.keys(l);for(let m=0;m<y.length;m++)i.hasOwnProperty(y[m])||h.unshift([y[m],kre+"remove"])}h.forEach(([y,m])=>{var p;if((p=e.__r3f)!=null&&p.primitive&&y==="object"||Nn.equ(m,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return f.push([y,m,!0,[]]);let v=[];y.includes("-")&&(v=y.split("-")),f.push([y,m,!1,v]);for(const b in i){const x=i[b];b.startsWith(`${y}-`)&&f.push([b,x,!1,b.split("-")])}});const g={...i};return c.memoizedProps&&c.memoizedProps.args&&(g.args=c.memoizedProps.args),c.memoizedProps&&c.memoizedProps.attach&&(g.attach=c.memoizedProps.attach),{memoized:g,changes:f}}const $Se=typeof process<"u"&&!1;function CL(e,t){var r,n,i;const o=(r=e.__r3f)!=null?r:{},a=o.root,s=(n=a==null||a.getState==null?void 0:a.getState())!=null?n:{},{memoized:l,changes:u}=JSe(t)?t:zre(e,t),d=o.eventCount;e.__r3f&&(e.__r3f.memoizedProps=l);for(let h=0;h<u.length;h++){let[f,g,y,m]=u[h];if(AL(e)){const x="srgb",_="srgb-linear";f==="encoding"?(f="colorSpace",g=g===3001?x:_):f==="outputEncoding"&&(f="outputColorSpace",g=g===3001?x:_)}let p=e,v=p[f];if(m.length&&(v=m.reduce((b,x)=>b[x],e),!(v&&v.set))){const[b,...x]=m.reverse();p=x.reverse().reduce((_,A)=>_[A],e),f=b}if(g===kre+"remove")if(p.constructor){let b=E8.get(p.constructor);b||(b=new p.constructor,E8.set(p.constructor,b)),g=b[f]}else g=0;if(y)g?o.handlers[f]=g:delete o.handlers[f],o.eventCount=Object.keys(o.handlers).length;else if(v&&v.set&&(v.copy||v instanceof Xg)){if(Array.isArray(g))v.fromArray?v.fromArray(g):v.set(...g);else if(v.copy&&g&&g.constructor&&($Se?v.constructor.name===g.constructor.name:v.constructor===g.constructor))v.copy(g);else if(g!==void 0){const b=v instanceof Dt;!b&&v.setScalar?v.setScalar(g):v instanceof Xg&&g instanceof Xg?v.mask=g.mask:v.set(g),!Ire()&&!s.linear&&b&&v.convertSRGBToLinear()}}else if(p[f]=g,p[f]instanceof Wn&&p[f].format===Ia&&p[f].type===qc){const b=p[f];AL(b)&&AL(s.gl)?b.colorSpace=s.gl.outputColorSpace:b.encoding=s.gl.outputEncoding}Ky(e)}if(o.parent&&s.internal&&e.raycast&&d!==o.eventCount){const h=s.internal.interaction.indexOf(e);h>-1&&s.internal.interaction.splice(h,1),o.eventCount&&s.internal.interaction.push(e)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=e.__r3f)!=null&&i.parent&&$F(e),e}function Ky(e){var t,r;const n=(t=e.__r3f)==null||(r=t.root)==null||r.getState==null?void 0:r.getState();n&&n.internal.frames===0&&n.invalidate()}function $F(e){e.onUpdate==null||e.onUpdate(e)}function eAe(e,t){e.manual||(Lre(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function yE(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function tAe(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return bb.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return bb.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return bb.ContinuousEventPriority;default:return bb.DefaultEventPriority}}function Ure(e,t,r,n){const i=r.get(t);i&&(r.delete(t),r.size===0&&(e.delete(n),i.target.releasePointerCapture(n)))}function rAe(e,t){const{internal:r}=e.getState();r.interaction=r.interaction.filter(n=>n!==t),r.initialHits=r.initialHits.filter(n=>n!==t),r.hovered.forEach((n,i)=>{(n.eventObject===t||n.object===t)&&r.hovered.delete(i)}),r.capturedMap.forEach((n,i)=>{Ure(r.capturedMap,t,n,i)})}function nAe(e){function t(l){const{internal:u}=e.getState(),d=l.offsetX-u.initialClick[0],c=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+c*c))}function r(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var c;return(c=u.__r3f)==null?void 0:c.handlers["onPointer"+d]}))}function n(l,u){const d=e.getState(),c=new Set,h=[],f=u?u(d.internal.interaction):d.internal.interaction;for(let p=0;p<f.length;p++){const v=i_(f[p]);v&&(v.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function g(p){const v=i_(p);if(!v||!v.events.enabled||v.raycaster.camera===null)return[];if(v.raycaster.camera===void 0){var b;v.events.compute==null||v.events.compute(l,v,(b=v.previousRoot)==null?void 0:b.getState()),v.raycaster.camera===void 0&&(v.raycaster.camera=null)}return v.raycaster.camera?v.raycaster.intersectObject(p,!0):[]}let y=f.flatMap(g).sort((p,v)=>{const b=i_(p.object),x=i_(v.object);return!b||!x?p.distance-v.distance:x.events.priority-b.events.priority||p.distance-v.distance}).filter(p=>{const v=yE(p);return c.has(v)?!1:(c.add(v),!0)});d.events.filter&&(y=d.events.filter(y,d));for(const p of y){let v=p.object;for(;v;){var m;(m=v.__r3f)!=null&&m.eventCount&&h.push({...p,eventObject:v}),v=v.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let p of d.internal.capturedMap.get(l.pointerId).values())c.has(yE(p.intersection))||h.push(p.intersection);return h}function i(l,u,d,c){const h=e.getState();if(l.length){const f={stopped:!1};for(const g of l){const y=i_(g.object)||h,{raycaster:m,pointer:p,camera:v,internal:b}=y,x=new pe(p.x,p.y,0).unproject(v),_=E=>{var D,I;return(D=(I=b.capturedMap.get(E))==null?void 0:I.has(g.eventObject))!=null?D:!1},A=E=>{const D={intersection:g,target:u.target};b.capturedMap.has(E)?b.capturedMap.get(E).set(g.eventObject,D):b.capturedMap.set(E,new Map([[g.eventObject,D]])),u.target.setPointerCapture(E)},M=E=>{const D=b.capturedMap.get(E);D&&Ure(b.capturedMap,g.eventObject,D,E)};let T={};for(let E in u){let D=u[E];typeof D!="function"&&(T[E]=D)}let C={...g,...T,pointer:p,intersections:l,stopped:f.stopped,delta:d,unprojectedPoint:x,ray:m.ray,camera:v,stopPropagation(){const E="pointerId"in u&&b.capturedMap.get(u.pointerId);if((!E||E.has(g.eventObject))&&(C.stopped=f.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(D=>D.eventObject===g.eventObject))){const D=l.slice(0,l.indexOf(g));o([...D,g])}},target:{hasPointerCapture:_,setPointerCapture:A,releasePointerCapture:M},currentTarget:{hasPointerCapture:_,setPointerCapture:A,releasePointerCapture:M},nativeEvent:u};if(c(C),f.stopped===!0)break}}return l}function o(l){const{internal:u}=e.getState();for(const d of u.hovered.values())if(!l.length||!l.find(c=>c.object===d.object&&c.index===d.index&&c.instanceId===d.instanceId)){const h=d.eventObject.__r3f,f=h==null?void 0:h.handlers;if(u.hovered.delete(yE(d)),h!=null&&h.eventCount){const g={...d,intersections:l};f.onPointerOut==null||f.onPointerOut(g),f.onPointerLeave==null||f.onPointerLeave(g)}}}function a(l,u){for(let d=0;d<u.length;d++){const c=u[d].__r3f;c==null||c.handlers.onPointerMissed==null||c.handlers.onPointerMissed(l)}}function s(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return u=>{const{internal:d}=e.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),o([]))})}}return function(d){const{onPointerMissed:c,internal:h}=e.getState();h.lastEvent.current=d;const f=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",m=n(d,f?r:void 0),p=g?t(d):0;l==="onPointerDown"&&(h.initialClick=[d.offsetX,d.offsetY],h.initialHits=m.map(b=>b.eventObject)),g&&!m.length&&p<=2&&(a(d,h.interaction),c&&c(d)),f&&o(m);function v(b){const x=b.eventObject,_=x.__r3f,A=_==null?void 0:_.handlers;if(_!=null&&_.eventCount)if(f){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const M=yE(b),T=h.hovered.get(M);T?T.stopped&&b.stopPropagation():(h.hovered.set(M,b),A.onPointerOver==null||A.onPointerOver(b),A.onPointerEnter==null||A.onPointerEnter(b))}A.onPointerMove==null||A.onPointerMove(b)}else{const M=A[l];M?(!g||h.initialHits.includes(x))&&(a(d,h.interaction.filter(T=>!h.initialHits.includes(T))),M(b)):g&&h.initialHits.includes(x)&&a(d,h.interaction.filter(T=>!h.initialHits.includes(T)))}}i(m,d,p,v)}}return{handlePointer:s}}const Vre=e=>!!(e!=null&&e.render),jre=te.createContext(null),iAe=(e,t)=>{const r=Tre((s,l)=>{const u=new pe,d=new pe,c=new pe;function h(p=l().camera,v=d,b=l().size){const{width:x,height:_,top:A,left:M}=b,T=x/_;v instanceof pe?c.copy(v):c.set(...v);const C=p.getWorldPosition(u).distanceTo(c);if(Lre(p))return{width:x/p.zoom,height:_/p.zoom,top:A,left:M,factor:1,distance:C,aspect:T};{const E=p.fov*Math.PI/180,D=2*Math.tan(E/2)*C,I=D*(x/_);return{width:I,height:D,top:A,left:M,factor:x/I,distance:C,aspect:T}}}let f;const g=p=>s(v=>({performance:{...v.performance,current:p}})),y=new lt;return{set:s,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(p=1)=>e(l(),p),advance:(p,v)=>t(p,v,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new bV,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const p=l();f&&clearTimeout(f),p.performance.current!==p.performance.min&&g(p.performance.min),f=setTimeout(()=>g(l().performance.max),p.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:p=>s(v=>({...v,events:{...v.events,...p}})),setSize:(p,v,b,x,_)=>{const A=l().camera,M={width:p,height:v,top:x||0,left:_||0,updateStyle:b};s(T=>({size:M,viewport:{...T.viewport,...h(A,d,M)}}))},setDpr:p=>s(v=>{const b=Fre(p);return{viewport:{...v.viewport,dpr:b,initialDpr:v.viewport.initialDpr||b}}}),setFrameloop:(p="always")=>{const v=l().clock;v.stop(),v.elapsedTime=0,p!=="never"&&(v.start(),v.elapsedTime=0),s(()=>({frameloop:p}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:te.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(p,v,b)=>{const x=l().internal;return x.priority=x.priority+(v>0?1:0),x.subscribers.push({ref:p,priority:v,store:b}),x.subscribers=x.subscribers.sort((_,A)=>_.priority-A.priority),()=>{const _=l().internal;_!=null&&_.subscribers&&(_.priority=_.priority-(v>0?1:0),_.subscribers=_.subscribers.filter(A=>A.ref!==p))}}}}}),n=r.getState();let i=n.size,o=n.viewport.dpr,a=n.camera;return r.subscribe(()=>{const{camera:s,size:l,viewport:u,gl:d,set:c}=r.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==o){var h;i=l,o=u.dpr,eAe(s,l),d.setPixelRatio(u.dpr);const f=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,f)}s!==a&&(a=s,c(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(s)}})))}),r.subscribe(s=>e(s)),r};let bE,oAe=new Set,aAe=new Set,sAe=new Set;function TL(e,t){if(e.size)for(const{callback:r}of e.values())r(t)}function o_(e,t){switch(e){case"before":return TL(oAe,t);case"after":return TL(aAe,t);case"tail":return TL(sAe,t)}}let EL,PL;function DL(e,t,r){let n=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(n=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),EL=t.internal.subscribers,bE=0;bE<EL.length;bE++)PL=EL[bE],PL.ref.current(PL.store.getState(),n,r);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function lAe(e){let t=!1,r,n,i;function o(l){n=requestAnimationFrame(o),t=!0,r=0,o_("before",l);for(const d of e.values()){var u;i=d.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(r+=DL(l,i))}if(o_("after",l),r===0)return o_("tail",l),t=!1,cancelAnimationFrame(n)}function a(l,u=1){var d;if(!l)return e.forEach(c=>a(c.store.getState()),u);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),t||(t=!0,requestAnimationFrame(o)))}function s(l,u=!0,d,c){if(u&&o_("before",l),d)DL(l,d,c);else for(const h of e.values())DL(l,h.store.getState());u&&o_("after",l)}return{loop:o,invalidate:a,advance:s}}function Hre(){const e=te.useContext(jre);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Il(e=r=>r,t){return Hre()(e,t)}function wM(e,t=0){const r=Hre(),n=r.getState().internal.subscribe,i=Bre(e);return xM(()=>n(i,t,r),[t,n,r]),null}const O8=new WeakMap;function Gre(e,t){return function(r,...n){let i=O8.get(r);return i||(i=new r,O8.set(r,i)),e&&e(i),Promise.all(n.map(o=>new Promise((a,s)=>i.load(o,l=>{l.scene&&Object.assign(l,QSe(l.scene)),a(l)},t,l=>s(new Error(`Could not load ${o}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function _M(e,t,r,n){const i=Array.isArray(t)?t:[t],o=HSe(Gre(r,n),[e,...i],{equal:Nn.equ});return Array.isArray(t)?o:o[0]}_M.preload=function(e,t,r){const n=Array.isArray(t)?t:[t];return GSe(Gre(r),[e,...n])};_M.clear=function(e,t){const r=Array.isArray(t)?t:[t];return WSe([e,...r])};const Px=new Map,{invalidate:R8,advance:I8}=lAe(Px),{reconciler:_D,applyProps:dy}=XSe(Px,tAe),hy={objects:"shallow",strict:!1},uAe=(e,t)=>{const r=typeof e=="function"?e(t):e;return Vre(r)?r:new Z4({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function cAe(e,t){const r=typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement;if(t){const{width:n,height:i,top:o,left:a,updateStyle:s=r}=t;return{width:n,height:i,top:o,left:a,updateStyle:s}}else if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:n,height:i,top:o,left:a}=e.parentElement.getBoundingClientRect();return{width:n,height:i,top:o,left:a,updateStyle:r}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:r};return{width:0,height:0,top:0,left:0}}function dAe(e){const t=Px.get(e),r=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=n||iAe(R8,I8),a=r||_D.createContainer(o,bb.ConcurrentRoot,null,!1,null,"",i,null);t||Px.set(e,{fiber:a,store:o});let s,l=!1,u;return{configure(d={}){let{gl:c,size:h,scene:f,events:g,onCreated:y,shadows:m=!1,linear:p=!1,flat:v=!1,legacy:b=!1,orthographic:x=!1,frameloop:_="always",dpr:A=[1,2],performance:M,raycaster:T,camera:C,onPointerMissed:E}=d,D=o.getState(),I=D.gl;D.gl||D.set({gl:I=uAe(c,e)});let k=D.raycaster;k||D.set({raycaster:k=new Are});const{params:L,...U}=T||{};if(Nn.equ(U,k,hy)||dy(k,{...U}),Nn.equ(L,k.params,hy)||dy(k,{params:{...k.params,...L}}),!D.camera||D.camera===u&&!Nn.equ(u,C,hy)){u=C;const Y=C instanceof uM,Q=Y?C:x?new Hl(0,0,0,0,.1,1e3):new kn(75,0,.1,1e3);Y||(Q.position.z=5,C&&dy(Q,C),!D.camera&&!(C!=null&&C.rotation)&&Q.lookAt(0,0,0)),D.set({camera:Q}),k.camera=Q}if(!D.scene){let Y;f instanceof xD?Y=f:(Y=new xD,f&&dy(Y,f)),D.set({scene:Yy(Y)})}if(!D.xr){var W;const Y=(ne,Z)=>{const ce=o.getState();ce.frameloop!=="never"&&I8(ne,!0,ce,Z)},Q=()=>{const ne=o.getState();ne.gl.xr.enabled=ne.gl.xr.isPresenting,ne.gl.xr.setAnimationLoop(ne.gl.xr.isPresenting?Y:null),ne.gl.xr.isPresenting||R8(ne)},$={connect(){const ne=o.getState().gl;ne.xr.addEventListener("sessionstart",Q),ne.xr.addEventListener("sessionend",Q)},disconnect(){const ne=o.getState().gl;ne.xr.removeEventListener("sessionstart",Q),ne.xr.removeEventListener("sessionend",Q)}};typeof((W=I.xr)==null?void 0:W.addEventListener)=="function"&&$.connect(),D.set({xr:$})}if(I.shadowMap){const Y=I.shadowMap.enabled,Q=I.shadowMap.type;if(I.shadowMap.enabled=!!m,Nn.boo(m))I.shadowMap.type=yS;else if(Nn.str(m)){var G;const $={basic:Aee,percentage:fR,soft:yS,variance:Su};I.shadowMap.type=(G=$[m])!=null?G:yS}else Nn.obj(m)&&Object.assign(I.shadowMap,m);(Y!==I.shadowMap.enabled||Q!==I.shadowMap.type)&&(I.shadowMap.needsUpdate=!0)}const z=Ire();z&&("enabled"in z?z.enabled=!b:"legacyMode"in z&&(z.legacyMode=b)),dy(I,{outputEncoding:p?3e3:3001,toneMapping:v?Wc:P4}),D.legacy!==b&&D.set(()=>({legacy:b})),D.linear!==p&&D.set(()=>({linear:p})),D.flat!==v&&D.set(()=>({flat:v})),c&&!Nn.fun(c)&&!Vre(c)&&!Nn.equ(c,I,hy)&&dy(I,c),g&&!D.events.handlers&&D.set({events:g(o)});const H=cAe(e,h);return Nn.equ(H,D.size,hy)||D.setSize(H.width,H.height,H.updateStyle,H.top,H.left),A&&D.viewport.dpr!==Fre(A)&&D.setDpr(A),D.frameloop!==_&&D.setFrameloop(_),D.onPointerMissed||D.set({onPointerMissed:E}),M&&!Nn.equ(M,D.performance,hy)&&D.set(Y=>({performance:{...Y.performance,...M}})),s=y,l=!0,this},render(d){return l||this.configure(),_D.updateContainer(te.createElement(hAe,{store:o,children:d,onCreated:s,rootElement:e}),a,null,()=>{}),o},unmount(){Wre(e)}}}function hAe({store:e,children:t,onCreated:r,rootElement:n}){return xM(()=>{const i=e.getState();i.set(o=>({internal:{...o.internal,active:!0}})),r&&r(i),e.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),te.createElement(jre.Provider,{value:e},t)}function Wre(e,t){const r=Px.get(e),n=r==null?void 0:r.fiber;if(n){const i=r==null?void 0:r.store.getState();i&&(i.internal.active=!1),_D.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var o,a,s,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(a=o.renderLists)==null||a.dispose==null||a.dispose(),(s=i.gl)==null||s.forceContextLoss==null||s.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),ZSe(i),Px.delete(e),t&&t(e)}catch{}},500)})}}_D.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:te.version});function Gu(){return Gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gu.apply(this,arguments)}function e5(e,t,r){var n,i,o,a,s;t==null&&(t=100);function l(){var d=Date.now()-a;d<t&&d>=0?n=setTimeout(l,t-d):(n=null,r||(s=e.apply(o,i),o=i=null))}var u=function(){o=this,i=arguments,a=Date.now();var d=r&&!n;return n||(n=setTimeout(l,t)),d&&(s=e.apply(o,i),o=i=null),s};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(s=e.apply(o,i),o=i=null,clearTimeout(n),n=null)},u}e5.debounce=e5;var fAe=e5;const L8=OU(fAe);function pAe(e){let{debounce:t,scroll:r,polyfill:n,offsetSize:i}=e===void 0?{debounce:0,scroll:!1,offsetSize:!1}:e;const o=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=te.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=te.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),u=t?typeof t=="number"?t:t.scroll:null,d=t?typeof t=="number"?t:t.resize:null,c=te.useRef(!1);te.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[h,f,g]=te.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:b,top:x,width:_,height:A,bottom:M,right:T,x:C,y:E}=l.current.element.getBoundingClientRect(),D={left:b,top:x,width:_,height:A,bottom:M,right:T,x:C,y:E};l.current.element instanceof HTMLElement&&i&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),c.current&&!yAe(l.current.lastBounds,D)&&s(l.current.lastBounds=D)};return[v,d?L8(v,d):v,u?L8(v,u):v]},[s,i,u,d]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function m(){l.current.element&&(l.current.resizeObserver=new o(g),l.current.resizeObserver.observe(l.current.element),r&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",g,{capture:!0,passive:!0})))}const p=v=>{!v||v===l.current.element||(y(),l.current.element=v,l.current.scrollContainers=qre(v),m())};return gAe(g,!!r),mAe(f),te.useEffect(()=>{y(),m()},[r,g,f]),te.useEffect(()=>y,[]),[p,a,h]}function mAe(e){te.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function gAe(e,t){te.useEffect(()=>{if(t){const r=e;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[e,t])}function qre(e){const t=[];if(!e||e===document.body)return t;const{overflow:r,overflowX:n,overflowY:i}=window.getComputedStyle(e);return[r,n,i].some(o=>o==="auto"||o==="scroll")&&t.push(e),[...t,...qre(e.parentElement)]}const vAe=["x","y","top","bottom","left","right","width","height"],yAe=(e,t)=>vAe.every(r=>e[r]===t[r]);var bAe=Object.defineProperty,xAe=Object.defineProperties,wAe=Object.getOwnPropertyDescriptors,B8=Object.getOwnPropertySymbols,_Ae=Object.prototype.hasOwnProperty,SAe=Object.prototype.propertyIsEnumerable,N8=(e,t,r)=>t in e?bAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k8=(e,t)=>{for(var r in t||(t={}))_Ae.call(t,r)&&N8(e,r,t[r]);if(B8)for(var r of B8(t))SAe.call(t,r)&&N8(e,r,t[r]);return e},AAe=(e,t)=>xAe(e,wAe(t));function Xre(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=t?e.return:e.child;for(;n;){const i=Xre(n,t,r);if(i)return i;n=t?null:n.sibling}}function Yre(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const AV=Yre(te.createContext(null));class Kre extends te.Component{render(){return te.createElement(AV.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:F8,ReactCurrentDispatcher:z8}=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function MAe(){const e=te.useContext(AV);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=te.useId();return te.useMemo(()=>{for(const n of[F8==null?void 0:F8.current,e,e==null?void 0:e.alternate]){if(!n)continue;const i=Xre(n,!1,o=>{let a=o.memoizedState;for(;a;){if(a.memoizedState===t)return!0;a=a.next}});if(i)return i}},[e,t])}function CAe(){var e,t;const r=MAe(),[n]=te.useState(()=>new Map);n.clear();let i=r;for(;i;){const o=(e=i.type)==null?void 0:e._context;o&&o!==AV&&!n.has(o)&&n.set(o,(t=z8==null?void 0:z8.current)==null?void 0:t.readContext(Yre(o))),i=i.return}return n}function TAe(){const e=CAe();return te.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>te.createElement(t,null,te.createElement(r.Provider,AAe(k8({},n),{value:e.get(r)}))),t=>te.createElement(Kre,k8({},t))),[e])}const OL={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function EAe(e){const{handlePointer:t}=nAe(e);return{priority:1,enabled:!0,compute(r,n,i){n.pointer.set(r.offsetX/n.size.width*2-1,-(r.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(OL).reduce((r,n)=>({...r,[n]:t(n)}),{}),update:()=>{var r;const{events:n,internal:i}=e.getState();(r=i.lastEvent)!=null&&r.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:r=>{var n;const{set:i,events:o}=e.getState();o.disconnect==null||o.disconnect(),i(a=>({events:{...a.events,connected:r}})),Object.entries((n=o.handlers)!=null?n:[]).forEach(([a,s])=>{const[l,u]=OL[a];r.addEventListener(l,s,{passive:u})})},disconnect:()=>{const{set:r,events:n}=e.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([o,a])=>{if(n&&n.connected instanceof HTMLElement){const[s]=OL[o];n.connected.removeEventListener(s,a)}}),r(o=>({events:{...o.events,connected:void 0}}))}}}}const PAe=te.forwardRef(function({children:t,fallback:r,resize:n,style:i,gl:o,events:a=EAe,eventSource:s,eventPrefix:l,shadows:u,linear:d,flat:c,legacy:h,orthographic:f,frameloop:g,dpr:y,performance:m,raycaster:p,camera:v,scene:b,onPointerMissed:x,onCreated:_,...A},M){te.useMemo(()=>qSe(LSe),[]);const T=TAe(),[C,E]=pAe({scroll:!0,debounce:{scroll:50,resize:0},...n}),D=te.useRef(null),I=te.useRef(null);te.useImperativeHandle(M,()=>D.current);const k=Bre(x),[L,U]=te.useState(!1),[W,G]=te.useState(!1);if(L)throw L;if(W)throw W;const z=te.useRef(null);xM(()=>{const j=D.current;E.width>0&&E.height>0&&j&&(z.current||(z.current=dAe(j)),z.current.configure({gl:o,events:a,shadows:u,linear:d,flat:c,legacy:h,orthographic:f,frameloop:g,dpr:y,performance:m,raycaster:p,camera:v,scene:b,size:E,onPointerMissed:(...H)=>k.current==null?void 0:k.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(s?YSe(s)?s.current:s:I.current),l&&H.setEvents({compute:(Y,Q)=>{const $=Y[l+"X"],ne=Y[l+"Y"];Q.pointer.set($/Q.size.width*2-1,-(ne/Q.size.height)*2+1),Q.raycaster.setFromCamera(Q.pointer,Q.camera)}}),_==null||_(H)}}),z.current.render(te.createElement(T,null,te.createElement(Nre,{set:G},te.createElement(te.Suspense,{fallback:te.createElement(KSe,{set:U})},t)))))}),te.useEffect(()=>{const j=D.current;if(j)return()=>Wre(j)},[]);const V=s?"none":"auto";return te.createElement("div",Gu({ref:I,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...i}},A),te.createElement("div",{ref:C,style:{width:"100%",height:"100%"}},te.createElement("canvas",{ref:D,style:{display:"block"}},r)))}),Jre=te.forwardRef(function(t,r){return te.createElement(Kre,null,te.createElement(PAe,Gu({},t,{ref:r})))}),SM=new pe,MV=new pe,DAe=new pe;function OAe(e,t,r){const n=SM.setFromMatrixPosition(e.matrixWorld);n.project(t);const i=r.width/2,o=r.height/2;return[n.x*i+i,-(n.y*o)+o]}function RAe(e,t){const r=SM.setFromMatrixPosition(e.matrixWorld),n=MV.setFromMatrixPosition(t.matrixWorld),i=r.sub(n),o=t.getWorldDirection(DAe);return i.angleTo(o)>Math.PI/2}function IAe(e,t,r,n){const i=SM.setFromMatrixPosition(e.matrixWorld),o=i.clone();o.project(t),r.setFromCamera(o,t);const a=r.intersectObjects(n,!0);if(a.length){const s=a[0].distance;return i.distanceTo(r.ray.origin)<s}return!0}function LAe(e,t){if(t instanceof Hl)return t.zoom;if(t instanceof kn){const r=SM.setFromMatrixPosition(e.matrixWorld),n=MV.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,o=r.distanceTo(n);return 1/(2*Math.tan(i/2)*o)}else return 1}function BAe(e,t,r){if(t instanceof kn||t instanceof Hl){const n=SM.setFromMatrixPosition(e.matrixWorld),i=MV.setFromMatrixPosition(t.matrixWorld),o=n.distanceTo(i),a=(r[1]-r[0])/(t.far-t.near),s=r[1]-a*t.far;return Math.round(a*o+s)}}const t5=e=>Math.abs(e)<1e-10?0:e;function Qre(e,t,r=""){let n="matrix3d(";for(let i=0;i!==16;i++)n+=t5(t[i]*e.elements[i])+(i!==15?",":")");return r+n}const NAe=(e=>t=>Qre(t,e))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),kAe=(e=>(t,r)=>Qre(t,e(r),"translate(-50%,-50%)"))(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1]);function FAe(e){return e&&typeof e=="object"&&"current"in e}const zAe=te.forwardRef(({children:e,eps:t=.001,style:r,className:n,prepend:i,center:o,fullscreen:a,portal:s,distanceFactor:l,sprite:u=!1,transform:d=!1,occlude:c,onOcclude:h,castShadow:f,receiveShadow:g,material:y,geometry:m,zIndexRange:p=[16777271,0],calculatePosition:v=OAe,as:b="div",wrapperClass:x,pointerEvents:_="auto",...A},M)=>{const{gl:T,camera:C,scene:E,size:D,raycaster:I,events:k,viewport:L}=Il(),[U]=te.useState(()=>document.createElement(b)),W=te.useRef(),G=te.useRef(null),z=te.useRef(0),V=te.useRef([0,0]),j=te.useRef(null),H=te.useRef(null),Y=(s==null?void 0:s.current)||k.connected||T.domElement.parentNode,Q=te.useRef(null),$=te.useRef(!1),ne=te.useMemo(()=>c&&c!=="blending"||Array.isArray(c)&&c.length&&FAe(c[0]),[c]);te.useLayoutEffect(()=>{const le=T.domElement;c&&c==="blending"?(le.style.zIndex=`${Math.floor(p[0]/2)}`,le.style.position="absolute",le.style.pointerEvents="none"):(le.style.zIndex=null,le.style.position=null,le.style.pointerEvents=null)},[c]),te.useLayoutEffect(()=>{if(G.current){const le=W.current=dee(U);if(E.updateMatrixWorld(),d)U.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const se=v(G.current,C,D);U.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${se[0]}px,${se[1]}px,0);transform-origin:0 0;`}return Y&&(i?Y.prepend(U):Y.appendChild(U)),()=>{Y&&Y.removeChild(U),le.unmount()}}},[Y,d]),te.useLayoutEffect(()=>{x&&(U.className=x)},[x]);const Z=te.useMemo(()=>d?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...a&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height},...r},[r,o,a,D,d]),ce=te.useMemo(()=>({position:"absolute",pointerEvents:_}),[_]);te.useLayoutEffect(()=>{if($.current=!1,d){var le;(le=W.current)==null||le.render(te.createElement("div",{ref:j,style:Z},te.createElement("div",{ref:H,style:ce},te.createElement("div",{ref:M,className:n,style:r,children:e}))))}else{var se;(se=W.current)==null||se.render(te.createElement("div",{ref:M,style:Z,className:n,children:e}))}});const ae=te.useRef(!0);wM(le=>{if(G.current){C.updateMatrixWorld(),G.current.updateWorldMatrix(!0,!1);const se=d?V.current:v(G.current,C,D);if(d||Math.abs(z.current-C.zoom)>t||Math.abs(V.current[0]-se[0])>t||Math.abs(V.current[1]-se[1])>t){const re=RAe(G.current,C);let ye=!1;ne&&(Array.isArray(c)?ye=c.map(Fe=>Fe.current):c!=="blending"&&(ye=[E]));const be=ae.current;if(ye){const Fe=IAe(G.current,C,I,ye);ae.current=Fe&&!re}else ae.current=!re;be!==ae.current&&(h?h(!ae.current):U.style.display=ae.current?"block":"none");const _e=Math.floor(p[0]/2),Se=c?ne?[p[0],_e]:[_e-1,0]:p;if(U.style.zIndex=`${BAe(G.current,C,Se)}`,d){const[Fe,Re]=[D.width/2,D.height/2],Le=C.projectionMatrix.elements[5]*Re,{isOrthographicCamera:rt,top:st,left:he,bottom:q,right:J}=C,ge=NAe(C.matrixWorldInverse),Pe=rt?`scale(${Le})translate(${t5(-(J+he)/2)}px,${t5((st+q)/2)}px)`:`translateZ(${Le}px)`;let De=G.current.matrixWorld;u&&(De=C.matrixWorldInverse.clone().transpose().copyPosition(De).scale(G.current.scale),De.elements[3]=De.elements[7]=De.elements[11]=0,De.elements[15]=1),U.style.width=D.width+"px",U.style.height=D.height+"px",U.style.perspective=rt?"":`${Le}px`,j.current&&H.current&&(j.current.style.transform=`${Pe}${ge}translate(${Fe}px,${Re}px)`,H.current.style.transform=kAe(De,1/((l||10)/400)))}else{const Fe=l===void 0?1:LAe(G.current,C)*l;U.style.transform=`translate3d(${se[0]}px,${se[1]}px,0) scale(${Fe})`}V.current=se,z.current=C.zoom}}if(!ne&&Q.current&&!$.current)if(d){if(j.current){const se=j.current.children[0];if(se!=null&&se.clientWidth&&se!=null&&se.clientHeight){const{isOrthographicCamera:re}=C;if(re||m)A.scale&&(Array.isArray(A.scale)?A.scale instanceof pe?Q.current.scale.copy(A.scale.clone().divideScalar(1)):Q.current.scale.set(1/A.scale[0],1/A.scale[1],1/A.scale[2]):Q.current.scale.setScalar(1/A.scale));else{const ye=(l||10)/400,be=se.clientWidth*ye,_e=se.clientHeight*ye;Q.current.scale.set(be,_e,1)}$.current=!0}}}else{const se=U.children[0];if(se!=null&&se.clientWidth&&se!=null&&se.clientHeight){const re=1/L.factor,ye=se.clientWidth*re,be=se.clientHeight*re;Q.current.scale.set(ye,be,1),$.current=!0}Q.current.lookAt(le.camera.position)}});const ie=te.useMemo(()=>({vertexShader:d?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[d]);return te.createElement("group",Gu({},A,{ref:G}),c&&!ne&&te.createElement("mesh",{castShadow:f,receiveShadow:g,ref:Q},m||te.createElement("planeGeometry",null),y||te.createElement("shaderMaterial",{side:Ul,vertexShader:ie.vertexShader,fragmentShader:ie.fragmentShader})))});let a_=0;const UAe=Tre(e=>(yb.onStart=(t,r,n)=>{e({active:!0,item:t,loaded:r,total:n,progress:(r-a_)/(n-a_)*100})},yb.onLoad=()=>{e({active:!1})},yb.onError=t=>e(r=>({errors:[...r.errors,t]})),yb.onProgress=(t,r,n)=>{r===n&&(a_=n),e({active:!0,item:t,loaded:r,total:n,progress:(r-a_)/(n-a_)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Zre(e){return function(t){e.forEach(function(r){typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function U8(e,t){if(t===hte)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===vD||t===F4){let r=e.getIndex();if(r===null){const a=[],s=e.getAttribute("position");if(s!==void 0){for(let l=0;l<s.count;l++)a.push(l);e.setIndex(a),r=e.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e}const n=r.count-2,i=[];if(r)if(t===vD)for(let a=1;a<=n;a++)i.push(r.getX(0)),i.push(r.getX(a)),i.push(r.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(i.push(r.getX(a)),i.push(r.getX(a+1)),i.push(r.getX(a+2))):(i.push(r.getX(a+2)),i.push(r.getX(a+1)),i.push(r.getX(a)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(i),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const VAe=parseInt(s1.replace(/\D+/g,""));var jAe=Object.defineProperty,HAe=(e,t,r)=>t in e?jAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wr=(e,t,r)=>(HAe(e,typeof t!="symbol"?t+"":t,r),r);const xE=new T0,V8=new th,GAe=Math.cos(70*(Math.PI/180)),j8=(e,t)=>(e%t+t)%t;let WAe=class extends ud{constructor(t,r){super(),wr(this,"object"),wr(this,"domElement"),wr(this,"enabled",!0),wr(this,"target",new pe),wr(this,"minDistance",0),wr(this,"maxDistance",1/0),wr(this,"minZoom",0),wr(this,"maxZoom",1/0),wr(this,"minPolarAngle",0),wr(this,"maxPolarAngle",Math.PI),wr(this,"minAzimuthAngle",-1/0),wr(this,"maxAzimuthAngle",1/0),wr(this,"enableDamping",!1),wr(this,"dampingFactor",.05),wr(this,"enableZoom",!0),wr(this,"zoomSpeed",1),wr(this,"enableRotate",!0),wr(this,"rotateSpeed",1),wr(this,"enablePan",!0),wr(this,"panSpeed",1),wr(this,"screenSpacePanning",!0),wr(this,"keyPanSpeed",7),wr(this,"zoomToCursor",!1),wr(this,"autoRotate",!1),wr(this,"autoRotateSpeed",2),wr(this,"reverseOrbit",!1),wr(this,"reverseHorizontalOrbit",!1),wr(this,"reverseVerticalOrbit",!1),wr(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),wr(this,"mouseButtons",{LEFT:ug.ROTATE,MIDDLE:ug.DOLLY,RIGHT:ug.PAN}),wr(this,"touches",{ONE:cg.ROTATE,TWO:cg.DOLLY_PAN}),wr(this,"target0"),wr(this,"position0"),wr(this,"zoom0"),wr(this,"_domElementKeyEvents",null),wr(this,"getPolarAngle"),wr(this,"getAzimuthalAngle"),wr(this,"setPolarAngle"),wr(this,"setAzimuthalAngle"),wr(this,"getDistance"),wr(this,"listenToKeyEvents"),wr(this,"stopListenToKeyEvents"),wr(this,"saveState"),wr(this,"reset"),wr(this,"update"),wr(this,"connect"),wr(this,"dispose"),this.object=t,this.domElement=r,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=we=>{let Xe=j8(we,2*Math.PI),nt=d.phi;nt<0&&(nt+=2*Math.PI),Xe<0&&(Xe+=2*Math.PI);let fe=Math.abs(Xe-nt);2*Math.PI-fe<fe&&(Xe<nt?Xe+=2*Math.PI:nt+=2*Math.PI),c.phi=Xe-nt,n.update()},this.setAzimuthalAngle=we=>{let Xe=j8(we,2*Math.PI),nt=d.theta;nt<0&&(nt+=2*Math.PI),Xe<0&&(Xe+=2*Math.PI);let fe=Math.abs(Xe-nt);2*Math.PI-fe<fe&&(Xe<nt?Xe+=2*Math.PI:nt+=2*Math.PI),c.theta=Xe-nt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=we=>{we.addEventListener("keydown",Ve),this._domElementKeyEvents=we},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ve),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=s.NONE},this.update=(()=>{const we=new pe,Xe=new pe(0,1,0),nt=new To().setFromUnitVectors(t.up,Xe),fe=nt.clone().invert(),Be=new pe,de=new To,Ye=2*Math.PI;return function(){const ze=n.object.position;nt.setFromUnitVectors(t.up,Xe),fe.copy(nt).invert(),we.copy(ze).sub(n.target),we.applyQuaternion(nt),d.setFromVector3(we),n.autoRotate&&l===s.NONE&&L(I()),n.enableDamping?(d.theta+=c.theta*n.dampingFactor,d.phi+=c.phi*n.dampingFactor):(d.theta+=c.theta,d.phi+=c.phi);let ct=n.minAzimuthAngle,At=n.maxAzimuthAngle;isFinite(ct)&&isFinite(At)&&(ct<-Math.PI?ct+=Ye:ct>Math.PI&&(ct-=Ye),At<-Math.PI?At+=Ye:At>Math.PI&&(At-=Ye),ct<=At?d.theta=Math.max(ct,Math.min(At,d.theta)):d.theta=d.theta>(ct+At)/2?Math.max(ct,d.theta):Math.min(At,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),n.zoomToCursor&&C||n.object.isOrthographicCamera?d.radius=Y(d.radius):d.radius=Y(d.radius*h),we.setFromSpherical(d),we.applyQuaternion(fe),ze.copy(n.target).add(we),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),f.set(0,0,0));let rr=!1;if(n.zoomToCursor&&C){let Gt=null;if(n.object instanceof kn&&n.object.isPerspectiveCamera){const Lr=we.length();Gt=Y(Lr*h);const nr=Lr-Gt;n.object.position.addScaledVector(M,nr),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Lr=new pe(T.x,T.y,0);Lr.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),rr=!0;const nr=new pe(T.x,T.y,0);nr.unproject(n.object),n.object.position.sub(nr).add(Lr),n.object.updateMatrixWorld(),Gt=we.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Gt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Gt).add(n.object.position):(xE.origin.copy(n.object.position),xE.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(xE.direction))<GAe?t.lookAt(n.target):(V8.setFromNormalAndCoplanarPoint(n.object.up,n.target),xE.intersectPlane(V8,n.target))))}else n.object instanceof Hl&&n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),rr=!0);return h=1,C=!1,rr||Be.distanceToSquared(n.object.position)>u||8*(1-de.dot(n.object.quaternion))>u?(n.dispatchEvent(i),Be.copy(n.object.position),de.copy(n.object.quaternion),rr=!1,!0):!1}})(),this.connect=we=>{we===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=we,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Je),n.domElement.addEventListener("pointerdown",st),n.domElement.addEventListener("pointercancel",J),n.domElement.addEventListener("wheel",De)},this.dispose=()=>{var we,Xe,nt,fe,Be,de;(we=n.domElement)==null||we.removeEventListener("contextmenu",Je),(Xe=n.domElement)==null||Xe.removeEventListener("pointerdown",st),(nt=n.domElement)==null||nt.removeEventListener("pointercancel",J),(fe=n.domElement)==null||fe.removeEventListener("wheel",De),(Be=n.domElement)==null||Be.ownerDocument.removeEventListener("pointermove",he),(de=n.domElement)==null||de.ownerDocument.removeEventListener("pointerup",q),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ve)};const n=this,i={type:"change"},o={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=s.NONE;const u=1e-6,d=new QF,c=new QF;let h=1;const f=new pe,g=new lt,y=new lt,m=new lt,p=new lt,v=new lt,b=new lt,x=new lt,_=new lt,A=new lt,M=new pe,T=new lt;let C=!1;const E=[],D={};function I(){return 2*Math.PI/60/60*n.autoRotateSpeed}function k(){return Math.pow(.95,n.zoomSpeed)}function L(we){n.reverseOrbit||n.reverseHorizontalOrbit?c.theta+=we:c.theta-=we}function U(we){n.reverseOrbit||n.reverseVerticalOrbit?c.phi+=we:c.phi-=we}const W=(()=>{const we=new pe;return function(nt,fe){we.setFromMatrixColumn(fe,0),we.multiplyScalar(-nt),f.add(we)}})(),G=(()=>{const we=new pe;return function(nt,fe){n.screenSpacePanning===!0?we.setFromMatrixColumn(fe,1):(we.setFromMatrixColumn(fe,0),we.crossVectors(n.object.up,we)),we.multiplyScalar(nt),f.add(we)}})(),z=(()=>{const we=new pe;return function(nt,fe){const Be=n.domElement;if(Be&&n.object instanceof kn&&n.object.isPerspectiveCamera){const de=n.object.position;we.copy(de).sub(n.target);let Ye=we.length();Ye*=Math.tan(n.object.fov/2*Math.PI/180),W(2*nt*Ye/Be.clientHeight,n.object.matrix),G(2*fe*Ye/Be.clientHeight,n.object.matrix)}else Be&&n.object instanceof Hl&&n.object.isOrthographicCamera?(W(nt*(n.object.right-n.object.left)/n.object.zoom/Be.clientWidth,n.object.matrix),G(fe*(n.object.top-n.object.bottom)/n.object.zoom/Be.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function V(we){n.object instanceof kn&&n.object.isPerspectiveCamera||n.object instanceof Hl&&n.object.isOrthographicCamera?h/=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function j(we){n.object instanceof kn&&n.object.isPerspectiveCamera||n.object instanceof Hl&&n.object.isOrthographicCamera?h*=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function H(we){if(!n.zoomToCursor||!n.domElement)return;C=!0;const Xe=n.domElement.getBoundingClientRect(),nt=we.clientX-Xe.left,fe=we.clientY-Xe.top,Be=Xe.width,de=Xe.height;T.x=nt/Be*2-1,T.y=-(fe/de)*2+1,M.set(T.x,T.y,1).unproject(n.object).sub(n.object.position).normalize()}function Y(we){return Math.max(n.minDistance,Math.min(n.maxDistance,we))}function Q(we){g.set(we.clientX,we.clientY)}function $(we){H(we),x.set(we.clientX,we.clientY)}function ne(we){p.set(we.clientX,we.clientY)}function Z(we){y.set(we.clientX,we.clientY),m.subVectors(y,g).multiplyScalar(n.rotateSpeed);const Xe=n.domElement;Xe&&(L(2*Math.PI*m.x/Xe.clientHeight),U(2*Math.PI*m.y/Xe.clientHeight)),g.copy(y),n.update()}function ce(we){_.set(we.clientX,we.clientY),A.subVectors(_,x),A.y>0?V(k()):A.y<0&&j(k()),x.copy(_),n.update()}function ae(we){v.set(we.clientX,we.clientY),b.subVectors(v,p).multiplyScalar(n.panSpeed),z(b.x,b.y),p.copy(v),n.update()}function ie(we){H(we),we.deltaY<0?j(k()):we.deltaY>0&&V(k()),n.update()}function le(we){let Xe=!1;switch(we.code){case n.keys.UP:z(0,n.keyPanSpeed),Xe=!0;break;case n.keys.BOTTOM:z(0,-n.keyPanSpeed),Xe=!0;break;case n.keys.LEFT:z(n.keyPanSpeed,0),Xe=!0;break;case n.keys.RIGHT:z(-n.keyPanSpeed,0),Xe=!0;break}Xe&&(we.preventDefault(),n.update())}function se(){if(E.length==1)g.set(E[0].pageX,E[0].pageY);else{const we=.5*(E[0].pageX+E[1].pageX),Xe=.5*(E[0].pageY+E[1].pageY);g.set(we,Xe)}}function re(){if(E.length==1)p.set(E[0].pageX,E[0].pageY);else{const we=.5*(E[0].pageX+E[1].pageX),Xe=.5*(E[0].pageY+E[1].pageY);p.set(we,Xe)}}function ye(){const we=E[0].pageX-E[1].pageX,Xe=E[0].pageY-E[1].pageY,nt=Math.sqrt(we*we+Xe*Xe);x.set(0,nt)}function be(){n.enableZoom&&ye(),n.enablePan&&re()}function _e(){n.enableZoom&&ye(),n.enableRotate&&se()}function Se(we){if(E.length==1)y.set(we.pageX,we.pageY);else{const nt=gt(we),fe=.5*(we.pageX+nt.x),Be=.5*(we.pageY+nt.y);y.set(fe,Be)}m.subVectors(y,g).multiplyScalar(n.rotateSpeed);const Xe=n.domElement;Xe&&(L(2*Math.PI*m.x/Xe.clientHeight),U(2*Math.PI*m.y/Xe.clientHeight)),g.copy(y)}function Fe(we){if(E.length==1)v.set(we.pageX,we.pageY);else{const Xe=gt(we),nt=.5*(we.pageX+Xe.x),fe=.5*(we.pageY+Xe.y);v.set(nt,fe)}b.subVectors(v,p).multiplyScalar(n.panSpeed),z(b.x,b.y),p.copy(v)}function Re(we){const Xe=gt(we),nt=we.pageX-Xe.x,fe=we.pageY-Xe.y,Be=Math.sqrt(nt*nt+fe*fe);_.set(0,Be),A.set(0,Math.pow(_.y/x.y,n.zoomSpeed)),V(A.y),x.copy(_)}function Le(we){n.enableZoom&&Re(we),n.enablePan&&Fe(we)}function rt(we){n.enableZoom&&Re(we),n.enableRotate&&Se(we)}function st(we){var Xe,nt;n.enabled!==!1&&(E.length===0&&((Xe=n.domElement)==null||Xe.ownerDocument.addEventListener("pointermove",he),(nt=n.domElement)==null||nt.ownerDocument.addEventListener("pointerup",q)),ut(we),we.pointerType==="touch"?et(we):ge(we))}function he(we){n.enabled!==!1&&(we.pointerType==="touch"?Ce(we):Pe(we))}function q(we){var Xe,nt,fe;pt(we),E.length===0&&((Xe=n.domElement)==null||Xe.releasePointerCapture(we.pointerId),(nt=n.domElement)==null||nt.ownerDocument.removeEventListener("pointermove",he),(fe=n.domElement)==null||fe.ownerDocument.removeEventListener("pointerup",q)),n.dispatchEvent(a),l=s.NONE}function J(we){pt(we)}function ge(we){let Xe;switch(we.button){case 0:Xe=n.mouseButtons.LEFT;break;case 1:Xe=n.mouseButtons.MIDDLE;break;case 2:Xe=n.mouseButtons.RIGHT;break;default:Xe=-1}switch(Xe){case ug.DOLLY:if(n.enableZoom===!1)return;$(we),l=s.DOLLY;break;case ug.ROTATE:if(we.ctrlKey||we.metaKey||we.shiftKey){if(n.enablePan===!1)return;ne(we),l=s.PAN}else{if(n.enableRotate===!1)return;Q(we),l=s.ROTATE}break;case ug.PAN:if(we.ctrlKey||we.metaKey||we.shiftKey){if(n.enableRotate===!1)return;Q(we),l=s.ROTATE}else{if(n.enablePan===!1)return;ne(we),l=s.PAN}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(o)}function Pe(we){if(n.enabled!==!1)switch(l){case s.ROTATE:if(n.enableRotate===!1)return;Z(we);break;case s.DOLLY:if(n.enableZoom===!1)return;ce(we);break;case s.PAN:if(n.enablePan===!1)return;ae(we);break}}function De(we){n.enabled===!1||n.enableZoom===!1||l!==s.NONE&&l!==s.ROTATE||(we.preventDefault(),n.dispatchEvent(o),ie(we),n.dispatchEvent(a))}function Ve(we){n.enabled===!1||n.enablePan===!1||le(we)}function et(we){switch(Ke(we),E.length){case 1:switch(n.touches.ONE){case cg.ROTATE:if(n.enableRotate===!1)return;se(),l=s.TOUCH_ROTATE;break;case cg.PAN:if(n.enablePan===!1)return;re(),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(n.touches.TWO){case cg.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;be(),l=s.TOUCH_DOLLY_PAN;break;case cg.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;_e(),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(o)}function Ce(we){switch(Ke(we),l){case s.TOUCH_ROTATE:if(n.enableRotate===!1)return;Se(we),n.update();break;case s.TOUCH_PAN:if(n.enablePan===!1)return;Fe(we),n.update();break;case s.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Le(we),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;rt(we),n.update();break;default:l=s.NONE}}function Je(we){n.enabled!==!1&&we.preventDefault()}function ut(we){E.push(we)}function pt(we){delete D[we.pointerId];for(let Xe=0;Xe<E.length;Xe++)if(E[Xe].pointerId==we.pointerId){E.splice(Xe,1);return}}function Ke(we){let Xe=D[we.pointerId];Xe===void 0&&(Xe=new lt,D[we.pointerId]=Xe),Xe.set(we.pageX,we.pageY)}function gt(we){const Xe=we.pointerId===E[0].pointerId?E[1]:E[0];return D[Xe.pointerId]}r!==void 0&&this.connect(r),this.update()}};class CV extends da{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new JAe(r)}),this.register(function(r){return new iMe(r)}),this.register(function(r){return new oMe(r)}),this.register(function(r){return new aMe(r)}),this.register(function(r){return new ZAe(r)}),this.register(function(r){return new $Ae(r)}),this.register(function(r){return new eMe(r)}),this.register(function(r){return new tMe(r)}),this.register(function(r){return new KAe(r)}),this.register(function(r){return new rMe(r)}),this.register(function(r){return new QAe(r)}),this.register(function(r){return new nMe(r)}),this.register(function(r){return new XAe(r)}),this.register(function(r){return new sMe(r)}),this.register(function(r){return new lMe(r)})}load(t,r,n,i){const o=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=Yc.extractUrlBase(t),this.manager.itemStart(t);const s=function(u){i?i(u):console.error(u),o.manager.itemError(t),o.manager.itemEnd(t)},l=new al(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){try{o.parse(u,a,function(d){r(d),o.manager.itemEnd(t)},s)}catch(d){s(d)}},n,s)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,n,i){let o;const a={},s={};if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(Yc.decodeText(new Uint8Array(t.slice(0,4)))===$re){try{a[Yr.KHR_BINARY_GLTF]=new uMe(t)}catch(d){i&&i(d);return}o=JSON.parse(a[Yr.KHR_BINARY_GLTF].content)}else o=JSON.parse(Yc.decodeText(new Uint8Array(t)));else o=t;if(o.asset===void 0||o.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new _Me(o,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](l);s[d.name]=d,a[d.name]=!0}if(o.extensionsUsed)for(let u=0;u<o.extensionsUsed.length;++u){const d=o.extensionsUsed[u],c=o.extensionsRequired||[];switch(d){case Yr.KHR_MATERIALS_UNLIT:a[d]=new YAe;break;case Yr.KHR_DRACO_MESH_COMPRESSION:a[d]=new cMe(o,this.dracoLoader);break;case Yr.KHR_TEXTURE_TRANSFORM:a[d]=new dMe;break;case Yr.KHR_MESH_QUANTIZATION:a[d]=new hMe;break;default:c.indexOf(d)>=0&&s[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(a),l.setPlugins(s),l.parse(n,i)}parseAsync(t,r){const n=this;return new Promise(function(i,o){n.parse(t,r,i,o)})}}function qAe(){let e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Yr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class XAe{constructor(t){this.parser=t,this.name=Yr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let n=0,i=r.length;n<i;n++){const o=r[n];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const r=this.parser,n="light:"+t;let i=r.cache.get(n);if(i)return i;const o=r.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let u;const d=new Dt(16777215);l.color!==void 0&&d.fromArray(l.color);const c=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new vV(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new gV(d),u.distance=c;break;case"spot":u=new mV(d),u.distance=c,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Xf(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=r.createUniqueName(l.name||"light_"+t),i=Promise.resolve(u),r.cache.add(n,i),i}getDependency(t,r){if(t==="light")return this._loadLight(r)}createNodeAttachment(t){const r=this,n=this.parser,o=n.json.nodes[t],s=(o.extensions&&o.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(l){return n._getNodeRef(r.cache,s,l)})}}class YAe{constructor(){this.name=Yr.KHR_MATERIALS_UNLIT}getMaterialType(){return Js}extendParams(t,r,n){const i=[];t.color=new Dt(1,1,1),t.opacity=1;const o=r.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const a=o.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}o.baseColorTexture!==void 0&&i.push(n.assignTexture(t,"map",o.baseColorTexture,3001))}return Promise.all(i)}}class KAe{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=i.extensions[this.name].emissiveStrength;return o!==void 0&&(r.emissiveIntensity=o),Promise.resolve()}}class JAe{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:cd}extendMaterialParams(t,r){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(r.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&o.push(n.assignTexture(r,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&o.push(n.assignTexture(r,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(o.push(n.assignTexture(r,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const s=a.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new lt(s,s)}return Promise.all(o)}}class QAe{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:cd}extendMaterialParams(t,r){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(r.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&o.push(n.assignTexture(r,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(r.iridescenceIOR=a.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&o.push(n.assignTexture(r,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(o)}}class ZAe{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:cd}extendMaterialParams(t,r){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[];r.sheenColor=new Dt(0,0,0),r.sheenRoughness=0,r.sheen=1;const a=i.extensions[this.name];return a.sheenColorFactor!==void 0&&r.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&o.push(n.assignTexture(r,"sheenColorMap",a.sheenColorTexture,3001)),a.sheenRoughnessTexture!==void 0&&o.push(n.assignTexture(r,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}}class $Ae{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:cd}extendMaterialParams(t,r){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(r.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&o.push(n.assignTexture(r,"transmissionMap",a.transmissionTexture)),Promise.all(o)}}class eMe{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:cd}extendMaterialParams(t,r){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];r.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&o.push(n.assignTexture(r,"thicknessMap",a.thicknessTexture)),r.attenuationDistance=a.attenuationDistance||1/0;const s=a.attenuationColor||[1,1,1];return r.attenuationColor=new Dt(s[0],s[1],s[2]),Promise.all(o)}}class tMe{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:cd}extendMaterialParams(t,r){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=i.extensions[this.name];return r.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class rMe{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:cd}extendMaterialParams(t,r){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];r.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&o.push(n.assignTexture(r,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return r.specularColor=new Dt(s[0],s[1],s[2]),a.specularColorTexture!==void 0&&o.push(n.assignTexture(r,"specularColorMap",a.specularColorTexture,3001)),Promise.all(o)}}class nMe{constructor(t){this.parser=t,this.name=Yr.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:cd}extendMaterialParams(t,r){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];return a.anisotropyStrength!==void 0&&(r.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(r.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&o.push(n.assignTexture(r,"anisotropyMap",a.anisotropyTexture)),Promise.all(o)}}class iMe{constructor(t){this.parser=t,this.name=Yr.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,n=r.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const o=i.extensions[this.name],a=r.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,o.source,a)}}class oMe{constructor(t){this.parser=t,this.name=Yr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,n=this.parser,i=n.json,o=i.textures[t];if(!o.extensions||!o.extensions[r])return null;const a=o.extensions[r],s=i.images[a.source];let l=n.textureLoader;if(s.uri){const u=n.options.manager.getHandler(s.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(t,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class aMe{constructor(t){this.parser=t,this.name=Yr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,n=this.parser,i=n.json,o=i.textures[t];if(!o.extensions||!o.extensions[r])return null;const a=o.extensions[r],s=i.images[a.source];let l=n.textureLoader;if(s.uri){const u=n.options.manager.getHandler(s.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(t,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class sMe{constructor(t){this.name=Yr.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,n=r.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],o=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(s){const l=i.byteOffset||0,u=i.byteLength||0,d=i.count,c=i.byteStride,h=new Uint8Array(s,l,u);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,c,h,i.mode,i.filter).then(function(f){return f.buffer}):a.ready.then(function(){const f=new ArrayBuffer(d*c);return a.decodeGltfBuffer(new Uint8Array(f),d,c,h,i.mode,i.filter),f})})}else return null}}class lMe{constructor(t){this.name=Yr.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,n=r.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=r.meshes[n.mesh];for(const u of i.primitives)if(u.mode!==Ol.TRIANGLES&&u.mode!==Ol.TRIANGLE_STRIP&&u.mode!==Ol.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=n.extensions[this.name].attributes,s=[],l={};for(const u in a)s.push(this.parser.getDependency("accessor",a[u]).then(d=>(l[u]=d,l[u])));return s.length<1?null:(s.push(this.parser.createNodeMesh(t)),Promise.all(s).then(u=>{const d=u.pop(),c=d.isGroup?d.children:[d],h=u[0].count,f=[];for(const g of c){const y=new pr,m=new pe,p=new To,v=new pe(1,1,1),b=new tV(g.geometry,g.material,h);for(let x=0;x<h;x++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,x),l.ROTATION&&p.fromBufferAttribute(l.ROTATION,x),l.SCALE&&v.fromBufferAttribute(l.SCALE,x),b.setMatrixAt(x,y.compose(m,p,v));for(const x in l)x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&g.geometry.setAttribute(x,l[x]);Qr.prototype.copy.call(b,g),this.parser.assignFinalMaterial(b),f.push(b)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}}const $re="glTF",s_=12,H8={JSON:1313821514,BIN:5130562};class uMe{constructor(t){this.name=Yr.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,s_);if(this.header={magic:Yc.decodeText(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==$re)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-s_,i=new DataView(t,s_);let o=0;for(;o<n;){const a=i.getUint32(o,!0);o+=4;const s=i.getUint32(o,!0);if(o+=4,s===H8.JSON){const l=new Uint8Array(t,s_+o,a);this.content=Yc.decodeText(l)}else if(s===H8.BIN){const l=s_+o;this.body=t.slice(l,l+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class cMe{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Yr.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const n=this.json,i=this.dracoLoader,o=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,s={},l={},u={};for(const d in a){const c=r5[d]||d.toLowerCase();s[c]=a[d]}for(const d in t.attributes){const c=r5[d]||d.toLowerCase();if(a[d]!==void 0){const h=n.accessors[t.attributes[d]],f=Hb[h.componentType];u[c]=f.name,l[c]=h.normalized===!0}}return r.getDependency("bufferView",o).then(function(d){return new Promise(function(c){i.decodeDracoFile(d,function(h){for(const f in h.attributes){const g=h.attributes[f],y=l[f];y!==void 0&&(g.normalized=y)}c(h)},s,u)})})}}class dMe{constructor(){this.name=Yr.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(r.texCoord===void 0||r.texCoord===t.channel)&&r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(t=t.clone(),r.texCoord!==void 0&&(t.channel=r.texCoord),r.offset!==void 0&&t.offset.fromArray(r.offset),r.rotation!==void 0&&(t.rotation=r.rotation),r.scale!==void 0&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class hMe{constructor(){this.name=Yr.KHR_MESH_QUANTIZATION}}class ene extends d1{constructor(t,r,n,i){super(t,r,n,i)}copySampleValue_(t){const r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=t*i*3+i;for(let a=0;a!==i;a++)r[a]=n[o+a];return r}interpolate_(t,r,n,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=s*2,u=s*3,d=i-r,c=(n-r)/d,h=c*c,f=h*c,g=t*u,y=g-u,m=-2*f+3*h,p=f-h,v=1-m,b=p-h+c;for(let x=0;x!==s;x++){const _=a[y+x+s],A=a[y+x+l]*d,M=a[g+x+s],T=a[g+x]*d;o[x]=v*_+b*A+m*M+p*T}return o}}const fMe=new To;class pMe extends ene{interpolate_(t,r,n,i){const o=super.interpolate_(t,r,n,i);return fMe.fromArray(o).normalize().toArray(o),o}}const Ol={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Hb={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},G8={9728:fi,9729:Qn,9984:hA,9985:mR,9986:Vb,9987:$c},W8={33071:ko,33648:bx,10497:Fp},RL={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},r5={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...VAe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Af={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mMe={CUBICSPLINE:void 0,LINEAR:d0,STEP:wx},IL={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function gMe(e){return e.DefaultMaterial===void 0&&(e.DefaultMaterial=new bM({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Zc})),e.DefaultMaterial}function Jm(e,t,r){for(const n in r.extensions)e[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function Xf(e,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function vMe(e,t,r){let n=!1,i=!1,o=!1;for(let u=0,d=t.length;u<d;u++){const c=t[u];if(c.POSITION!==void 0&&(n=!0),c.NORMAL!==void 0&&(i=!0),c.COLOR_0!==void 0&&(o=!0),n&&i&&o)break}if(!n&&!i&&!o)return Promise.resolve(e);const a=[],s=[],l=[];for(let u=0,d=t.length;u<d;u++){const c=t[u];if(n){const h=c.POSITION!==void 0?r.getDependency("accessor",c.POSITION):e.attributes.position;a.push(h)}if(i){const h=c.NORMAL!==void 0?r.getDependency("accessor",c.NORMAL):e.attributes.normal;s.push(h)}if(o){const h=c.COLOR_0!==void 0?r.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(h)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then(function(u){const d=u[0],c=u[1],h=u[2];return n&&(e.morphAttributes.position=d),i&&(e.morphAttributes.normal=c),o&&(e.morphAttributes.color=h),e.morphTargetsRelative=!0,e})}function yMe(e,t){if(e.updateMorphTargets(),t.weights!==void 0)for(let r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(let n=0,i=r.length;n<i;n++)e.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function bMe(e){let t;const r=e.extensions&&e.extensions[Yr.KHR_DRACO_MESH_COMPRESSION];if(r?t="draco:"+r.bufferView+":"+r.indices+":"+LL(r.attributes):t=e.indices+":"+LL(e.attributes)+":"+e.mode,e.targets!==void 0)for(let n=0,i=e.targets.length;n<i;n++)t+=":"+LL(e.targets[n]);return t}function LL(e){let t="";const r=Object.keys(e).sort();for(let n=0,i=r.length;n<i;n++)t+=r[n]+":"+e[r[n]]+";";return t}function n5(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function xMe(e){return e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0?"image/jpeg":e.search(/\.webp($|\?)/i)>0||e.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const wMe=new pr;class _Me{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new qAe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,o=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&o<98?this.textureLoader=new hre(this.options.manager):this.textureLoader=new xre(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new al(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const n=this,i=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const s={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:n,userData:{}};Jm(o,s,i),Xf(s,i),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(s)})).then(function(){t(s)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],n=this.json.meshes||[];for(let i=0,o=r.length;i<o;i++){const a=r[i].joints;for(let s=0,l=a.length;s<l;s++)t[a[s]].isBone=!0}for(let i=0,o=t.length;i<o;i++){const a=t[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,r){r!==void 0&&(t.refs[r]===void 0&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,n){if(t.refs[r]<=1)return n;const i=n.clone(),o=(a,s)=>{const l=this.associations.get(a);l!=null&&this.associations.set(s,l);for(const[u,d]of a.children.entries())o(d,s.children[u])};return o(n,i),i.name+="_instance_"+t.uses[r]++,i}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let n=0;n<r.length;n++){const i=t(r[n]);if(i)return i}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const n=[];for(let i=0;i<r.length;i++){const o=t(r[i]);o&&n.push(o)}return n}getDependency(t,r){const n=t+":"+r;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(r);break;case"node":i=this._invokeOne(function(o){return o.loadNode&&o.loadNode(r)});break;case"mesh":i=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(r)});break;case"accessor":i=this.loadAccessor(r);break;case"bufferView":i=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(r)});break;case"buffer":i=this.loadBuffer(r);break;case"material":i=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(r)});break;case"texture":i=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(r)});break;case"skin":i=this.loadSkin(r);break;case"animation":i=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(r)});break;case"camera":i=this.loadCamera(r);break;default:if(i=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,r)}),!i)throw new Error("Unknown type: "+t);break}this.cache.add(n,i)}return i}getDependencies(t){let r=this.cache.get(t);if(!r){const n=this,i=this.json[t+(t==="mesh"?"es":"s")]||[];r=Promise.all(i.map(function(o,a){return n.getDependency(t,a)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],n=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&t===0)return Promise.resolve(this.extensions[Yr.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(o,a){n.load(Yc.resolveURL(r.uri,i.path),o,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(n){const i=r.byteLength||0,o=r.byteOffset||0;return n.slice(o,o+i)})}loadAccessor(t){const r=this,n=this.json,i=this.json.accessors[t];if(i.bufferView===void 0&&i.sparse===void 0){const a=RL[i.type],s=Hb[i.componentType],l=i.normalized===!0,u=new s(i.count*a);return Promise.resolve(new Zr(u,a,l))}const o=[];return i.bufferView!==void 0?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),i.sparse!==void 0&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then(function(a){const s=a[0],l=RL[i.type],u=Hb[i.componentType],d=u.BYTES_PER_ELEMENT,c=d*l,h=i.byteOffset||0,f=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let y,m;if(f&&f!==c){const p=Math.floor(h/f),v="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+p+":"+i.count;let b=r.cache.get(v);b||(y=new u(s,p*f,i.count*f/d),b=new fM(y,f/d),r.cache.add(v,b)),m=new zp(b,l,h%f/d,g)}else s===null?y=new u(i.count*l):y=new u(s,h,i.count*l),m=new Zr(y,l,g);if(i.sparse!==void 0){const p=RL.SCALAR,v=Hb[i.sparse.indices.componentType],b=i.sparse.indices.byteOffset||0,x=i.sparse.values.byteOffset||0,_=new v(a[1],b,i.sparse.count*p),A=new u(a[2],x,i.sparse.count*l);s!==null&&(m=new Zr(m.array.slice(),m.itemSize,m.normalized));for(let M=0,T=_.length;M<T;M++){const C=_[M];if(m.setX(C,A[M*l]),l>=2&&m.setY(C,A[M*l+1]),l>=3&&m.setZ(C,A[M*l+2]),l>=4&&m.setW(C,A[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(t){const r=this.json,n=this.options,o=r.textures[t].source,a=r.images[o];let s=this.textureLoader;if(a.uri){const l=n.manager.getHandler(a.uri);l!==null&&(s=l)}return this.loadTextureImage(t,o,s)}loadTextureImage(t,r,n){const i=this,o=this.json,a=o.textures[t],s=o.images[r],l=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(r,n).then(function(d){d.flipY=!1,d.name=a.name||s.name||"",d.name===""&&typeof s.uri=="string"&&s.uri.startsWith("data:image/")===!1&&(d.name=s.uri);const h=(o.samplers||{})[a.sampler]||{};return d.magFilter=G8[h.magFilter]||Qn,d.minFilter=G8[h.minFilter]||$c,d.wrapS=W8[h.wrapS]||Fp,d.wrapT=W8[h.wrapT]||Fp,i.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(t,r){const n=this,i=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(c=>c.clone());const a=i.images[t],s=self.URL||self.webkitURL;let l=a.uri||"",u=!1;if(a.bufferView!==void 0)l=n.getDependency("bufferView",a.bufferView).then(function(c){u=!0;const h=new Blob([c],{type:a.mimeType});return l=s.createObjectURL(h),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(c){return new Promise(function(h,f){let g=h;r.isImageBitmapLoader===!0&&(g=function(y){const m=new Wn(y);m.needsUpdate=!0,h(m)}),r.load(Yc.resolveURL(c,o.path),g,void 0,f)})}).then(function(c){return u===!0&&s.revokeObjectURL(l),c.userData.mimeType=a.mimeType||xMe(a.uri),c}).catch(function(c){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),c});return this.sourceCache[t]=d,d}assignTexture(t,r,n,i){const o=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),o.extensions[Yr.KHR_TEXTURE_TRANSFORM]){const s=n.extensions!==void 0?n.extensions[Yr.KHR_TEXTURE_TRANSFORM]:void 0;if(s){const l=o.associations.get(a);a=o.extensions[Yr.KHR_TEXTURE_TRANSFORM].extendTexture(a,s),o.associations.set(a,l)}}return i!==void 0&&("colorSpace"in a?a.colorSpace=i===3001?"srgb":"srgb-linear":a.encoding=i),t[r]=a,a})}assignFinalMaterial(t){const r=t.geometry;let n=t.material;const i=r.attributes.tangent===void 0,o=r.attributes.color!==void 0,a=r.attributes.normal===void 0;if(t.isPoints){const s="PointsMaterial:"+n.uuid;let l=this.cache.get(s);l||(l=new mM,Hi.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(s,l)),n=l}else if(t.isLine){const s="LineBasicMaterial:"+n.uuid;let l=this.cache.get(s);l||(l=new ca,Hi.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(s,l)),n=l}if(i||o||a){let s="ClonedMaterial:"+n.uuid+":";i&&(s+="derivative-tangents:"),o&&(s+="vertex-colors:"),a&&(s+="flat-shading:");let l=this.cache.get(s);l||(l=n.clone(),o&&(l.vertexColors=!0),a&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(s,l),this.associations.set(l,this.associations.get(n))),n=l}t.material=n}getMaterialType(){return bM}loadMaterial(t){const r=this,n=this.json,i=this.extensions,o=n.materials[t];let a;const s={},l=o.extensions||{},u=[];if(l[Yr.KHR_MATERIALS_UNLIT]){const c=i[Yr.KHR_MATERIALS_UNLIT];a=c.getMaterialType(),u.push(c.extendParams(s,o,r))}else{const c=o.pbrMetallicRoughness||{};if(s.color=new Dt(1,1,1),s.opacity=1,Array.isArray(c.baseColorFactor)){const h=c.baseColorFactor;s.color.fromArray(h),s.opacity=h[3]}c.baseColorTexture!==void 0&&u.push(r.assignTexture(s,"map",c.baseColorTexture,3001)),s.metalness=c.metallicFactor!==void 0?c.metallicFactor:1,s.roughness=c.roughnessFactor!==void 0?c.roughnessFactor:1,c.metallicRoughnessTexture!==void 0&&(u.push(r.assignTexture(s,"metalnessMap",c.metallicRoughnessTexture)),u.push(r.assignTexture(s,"roughnessMap",c.metallicRoughnessTexture))),a=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,s)})))}o.doubleSided===!0&&(s.side=Ul);const d=o.alphaMode||IL.OPAQUE;if(d===IL.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,d===IL.MASK&&(s.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&a!==Js&&(u.push(r.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new lt(1,1),o.normalTexture.scale!==void 0)){const c=o.normalTexture.scale;s.normalScale.set(c,c)}return o.occlusionTexture!==void 0&&a!==Js&&(u.push(r.assignTexture(s,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(s.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&a!==Js&&(s.emissive=new Dt().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&a!==Js&&u.push(r.assignTexture(s,"emissiveMap",o.emissiveTexture,3001)),Promise.all(u).then(function(){const c=new a(s);return o.name&&(c.name=o.name),Xf(c,o),r.associations.set(c,{materials:t}),o.extensions&&Jm(i,c,o),c})}createUniqueName(t){const r=Jr.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,n=this.extensions,i=this.primitiveCache;function o(s){return n[Yr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(s,r).then(function(l){return q8(l,s,r)})}const a=[];for(let s=0,l=t.length;s<l;s++){const u=t[s],d=bMe(u),c=i[d];if(c)a.push(c.promise);else{let h;u.extensions&&u.extensions[Yr.KHR_DRACO_MESH_COMPRESSION]?h=o(u):h=q8(new Er,u,r),i[d]={primitive:u,promise:h},a.push(h)}}return Promise.all(a)}loadMesh(t){const r=this,n=this.json,i=this.extensions,o=n.meshes[t],a=o.primitives,s=[];for(let l=0,u=a.length;l<u;l++){const d=a[l].material===void 0?gMe(this.cache):this.getDependency("material",a[l].material);s.push(d)}return s.push(r.loadGeometries(a)),Promise.all(s).then(function(l){const u=l.slice(0,l.length-1),d=l[l.length-1],c=[];for(let f=0,g=d.length;f<g;f++){const y=d[f],m=a[f];let p;const v=u[f];if(m.mode===Ol.TRIANGLES||m.mode===Ol.TRIANGLE_STRIP||m.mode===Ol.TRIANGLE_FAN||m.mode===void 0)p=o.isSkinnedMesh===!0?new eV(y,v):new ji(y,v),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),m.mode===Ol.TRIANGLE_STRIP?p.geometry=U8(p.geometry,F4):m.mode===Ol.TRIANGLE_FAN&&(p.geometry=U8(p.geometry,vD));else if(m.mode===Ol.LINES)p=new Ku(y,v);else if(m.mode===Ol.LINE_STRIP)p=new Oh(y,v);else if(m.mode===Ol.LINE_LOOP)p=new rV(y,v);else if(m.mode===Ol.POINTS)p=new nV(y,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(p.geometry.morphAttributes).length>0&&yMe(p,o),p.name=r.createUniqueName(o.name||"mesh_"+t),Xf(p,o),m.extensions&&Jm(i,p,m),r.assignFinalMaterial(p),c.push(p)}for(let f=0,g=c.length;f<g;f++)r.associations.set(c[f],{meshes:t,primitives:f});if(c.length===1)return o.extensions&&Jm(i,c[0],o),c[0];const h=new ch;o.extensions&&Jm(i,h,o),r.associations.set(h,{meshes:t});for(let f=0,g=c.length;f<g;f++)h.add(c[f]);return h})}loadCamera(t){let r;const n=this.json.cameras[t],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?r=new kn(Ste.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(r=new Hl(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(r.name=this.createUniqueName(n.name)),Xf(r,n),Promise.resolve(r)}loadSkin(t){const r=this.json.skins[t],n=[];for(let i=0,o=r.joints.length;i<o;i++)n.push(this._loadNodeShallow(r.joints[i]));return r.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",r.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const o=i.pop(),a=i,s=[],l=[];for(let u=0,d=a.length;u<d;u++){const c=a[u];if(c){s.push(c);const h=new pr;o!==null&&h.fromArray(o.array,u*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[u])}return new pM(s,l)})}loadAnimation(t){const n=this.json.animations[t],i=n.name?n.name:"animation_"+t,o=[],a=[],s=[],l=[],u=[];for(let d=0,c=n.channels.length;d<c;d++){const h=n.channels[d],f=n.samplers[h.sampler],g=h.target,y=g.node,m=n.parameters!==void 0?n.parameters[f.input]:f.input,p=n.parameters!==void 0?n.parameters[f.output]:f.output;g.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",m)),s.push(this.getDependency("accessor",p)),l.push(f),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(l),Promise.all(u)]).then(function(d){const c=d[0],h=d[1],f=d[2],g=d[3],y=d[4],m=[];for(let p=0,v=c.length;p<v;p++){const b=c[p],x=h[p],_=f[p],A=g[p],M=y[p];if(b===void 0)continue;b.updateMatrix();let T;switch(Af[M.path]){case Af.weights:T=Cx;break;case Af.rotation:T=Up;break;case Af.position:case Af.scale:default:T=Tx;break}const C=b.name?b.name:b.uuid,E=A.interpolation!==void 0?mMe[A.interpolation]:d0,D=[];Af[M.path]===Af.weights?b.traverse(function(k){k.morphTargetInfluences&&D.push(k.name?k.name:k.uuid)}):D.push(C);let I=_.array;if(_.normalized){const k=n5(I.constructor),L=new Float32Array(I.length);for(let U=0,W=I.length;U<W;U++)L[U]=I[U]*k;I=L}for(let k=0,L=D.length;k<L;k++){const U=new T(D[k]+"."+Af[M.path],x.array,I,E);A.interpolation==="CUBICSPLINE"&&(U.createInterpolant=function(G){const z=this instanceof Up?pMe:ene;return new z(this.times,this.values,this.getValueSize()/3,G)},U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(U)}}return new Ex(i,void 0,m)})}createNodeMesh(t){const r=this.json,n=this,i=r.nodes[t];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(o){const a=n._getNodeRef(n.meshCache,i.mesh,o);return i.weights!==void 0&&a.traverse(function(s){if(s.isMesh)for(let l=0,u=i.weights.length;l<u;l++)s.morphTargetInfluences[l]=i.weights[l]}),a})}loadNode(t){const r=this.json,n=this,i=r.nodes[t],o=n._loadNodeShallow(t),a=[],s=i.children||[];for(let u=0,d=s.length;u<d;u++)a.push(n.getDependency("node",s[u]));const l=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([o,Promise.all(a),l]).then(function(u){const d=u[0],c=u[1],h=u[2];h!==null&&d.traverse(function(f){f.isSkinnedMesh&&f.bind(h,wMe)});for(let f=0,g=c.length;f<g;f++)d.add(c[f]);return d})}_loadNodeShallow(t){const r=this.json,n=this.extensions,i=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=r.nodes[t],a=o.name?i.createUniqueName(o.name):"",s=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return l&&s.push(l),o.camera!==void 0&&s.push(i.getDependency("camera",o.camera).then(function(u){return i._getNodeRef(i.cameraCache,o.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){s.push(u)}),this.nodeCache[t]=Promise.all(s).then(function(u){let d;if(o.isBone===!0?d=new SR:u.length>1?d=new ch:u.length===1?d=u[0]:d=new Qr,d!==u[0])for(let c=0,h=u.length;c<h;c++)d.add(u[c]);if(o.name&&(d.userData.name=o.name,d.name=a),Xf(d,o),o.extensions&&Jm(n,d,o),o.matrix!==void 0){const c=new pr;c.fromArray(o.matrix),d.applyMatrix4(c)}else o.translation!==void 0&&d.position.fromArray(o.translation),o.rotation!==void 0&&d.quaternion.fromArray(o.rotation),o.scale!==void 0&&d.scale.fromArray(o.scale);return i.associations.has(d)||i.associations.set(d,{}),i.associations.get(d).nodes=t,d}),this.nodeCache[t]}loadScene(t){const r=this.extensions,n=this.json.scenes[t],i=this,o=new ch;n.name&&(o.name=i.createUniqueName(n.name)),Xf(o,n),n.extensions&&Jm(r,o,n);const a=n.nodes||[],s=[];for(let l=0,u=a.length;l<u;l++)s.push(i.getDependency("node",a[l]));return Promise.all(s).then(function(l){for(let d=0,c=l.length;d<c;d++)o.add(l[d]);const u=d=>{const c=new Map;for(const[h,f]of i.associations)(h instanceof Hi||h instanceof Wn)&&c.set(h,f);return d.traverse(h=>{const f=i.associations.get(h);f!=null&&c.set(h,f)}),c};return i.associations=u(o),o})}}function SMe(e,t,r){const n=t.attributes,i=new oa;if(n.POSITION!==void 0){const s=r.json.accessors[n.POSITION],l=s.min,u=s.max;if(l!==void 0&&u!==void 0){if(i.set(new pe(l[0],l[1],l[2]),new pe(u[0],u[1],u[2])),s.normalized){const d=n5(Hb[s.componentType]);i.min.multiplyScalar(d),i.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const s=new pe,l=new pe;for(let u=0,d=o.length;u<d;u++){const c=o[u];if(c.POSITION!==void 0){const h=r.json.accessors[c.POSITION],f=h.min,g=h.max;if(f!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(g[2]))),h.normalized){const y=n5(Hb[h.componentType]);l.multiplyScalar(y)}s.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(s)}e.boundingBox=i;const a=new zo;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}function q8(e,t,r){const n=t.attributes,i=[];function o(a,s){return r.getDependency("accessor",a).then(function(l){e.setAttribute(s,l)})}for(const a in n){const s=r5[a]||a.toLowerCase();s in e.attributes||i.push(o(n[a],s))}if(t.indices!==void 0&&!e.index){const a=r.getDependency("accessor",t.indices).then(function(s){e.setIndex(s)});i.push(a)}return Xf(e,t),SMe(e,t,r),Promise.all(i).then(function(){return t.targets!==void 0?vMe(e,t.targets,r):e})}const BL=new WeakMap;class AMe extends da{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,r,n,i){const o=new al(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,a=>{const s={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,s).then(r).catch(i)},n,i)}decodeDracoFile(t,r,n,i){const o={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,o).then(r)}decodeGeometry(t,r){for(const l in r.attributeTypes){const u=r.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(r.attributeTypes[l]=u.name)}const n=JSON.stringify(r);if(BL.has(t)){const l=BL.get(t);if(l.key===n)return l.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const o=this.workerNextTaskID++,a=t.byteLength,s=this._getWorker(o,a).then(l=>(i=l,new Promise((u,d)=>{i._callbacks[o]={resolve:u,reject:d},i.postMessage({type:"decode",id:o,taskConfig:r,buffer:t},[t])}))).then(l=>this._createGeometry(l.geometry));return s.catch(()=>!0).then(()=>{i&&o&&this._releaseTask(i,o)}),BL.set(t,{key:n,promise:s}),s}_createGeometry(t){const r=new Er;t.index&&r.setIndex(new Zr(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const i=t.attributes[n],o=i.name,a=i.array,s=i.itemSize;r.setAttribute(o,new Zr(a,s))}return r}_loadLibrary(t,r){const n=new al(this.manager);return n.setPath(this.decoderPath),n.setResponseType(r),n.setWithCredentials(this.withCredentials),new Promise((i,o)=>{n.load(t,i,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(n=>{const i=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const o=MMe.toString(),a=["/* draco decoder */",i,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(t,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(o){const a=o.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,o){return i._taskLoad>o._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=r,n._taskLoad+=r,n})}_releaseTask(t,r){t._taskLoad-=t._taskCosts[r],delete t._callbacks[r],delete t._taskCosts[r]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function MMe(){let e,t;onmessage=function(a){const s=a.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise(function(d){e.onModuleLoaded=function(c){d({draco:c})},DracoDecoderModule(e)});break;case"decode":const l=s.buffer,u=s.taskConfig;t.then(d=>{const c=d.draco,h=new c.Decoder,f=new c.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const g=r(c,h,f,u),y=g.attributes.map(m=>m.array.buffer);g.index&&y.push(g.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:g},y)}catch(g){console.error(g),self.postMessage({type:"error",id:s.id,error:g.message})}finally{c.destroy(f),c.destroy(h)}});break}};function r(a,s,l,u){const d=u.attributeIDs,c=u.attributeTypes;let h,f;const g=s.GetEncodedGeometryType(l);if(g===a.TRIANGULAR_MESH)h=new a.Mesh,f=s.DecodeBufferToMesh(l,h);else if(g===a.POINT_CLOUD)h=new a.PointCloud,f=s.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const y={index:null,attributes:[]};for(const m in d){const p=self[c[m]];let v,b;if(u.useUniqueIDs)b=d[m],v=s.GetAttributeByUniqueId(h,b);else{if(b=s.GetAttributeId(h,a[d[m]]),b===-1)continue;v=s.GetAttribute(h,b)}y.attributes.push(i(a,s,h,m,p,v))}return g===a.TRIANGULAR_MESH&&(y.index=n(a,s,h)),a.destroy(h),y}function n(a,s,l){const d=l.num_faces()*3,c=d*4,h=a._malloc(c);s.GetTrianglesUInt32Array(l,c,h);const f=new Uint32Array(a.HEAPF32.buffer,h,d).slice();return a._free(h),{array:f,itemSize:1}}function i(a,s,l,u,d,c){const h=c.num_components(),g=l.num_points()*h,y=g*d.BYTES_PER_ELEMENT,m=o(a,d),p=a._malloc(y);s.GetAttributeDataArrayForAllPoints(l,c,m,y,p);const v=new d(a.HEAPF32.buffer,p,g).slice();return a._free(p),{name:u,array:v,itemSize:h}}function o(a,s){switch(s){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let wE;const NL=()=>{if(wE)return wE;const e="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=e;WebAssembly.validate(r)&&(i=t);let o;const a=WebAssembly.instantiate(s(i),{}).then(c=>{o=c.instance,o.exports.__wasm_call_ctors()});function s(c){const h=new Uint8Array(c.length);for(let g=0;g<c.length;++g){const y=c.charCodeAt(g);h[g]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let f=0;for(let g=0;g<c.length;++g)h[f++]=h[g]<60?n[h[g]]:(h[g]-60)*64+h[++g];return h.buffer.slice(0,f)}function l(c,h,f,g,y,m){const p=o.exports.sbrk,v=f+3&-4,b=p(v*g),x=p(y.length),_=new Uint8Array(o.exports.memory.buffer);_.set(y,x);const A=c(b,f,g,x,y.length);if(A===0&&m&&m(b,v,g),h.set(_.subarray(b,b+f*g)),p(b-p(0)),A!==0)throw new Error(`Malformed buffer data: ${A}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return wE={ready:a,supported:!0,decodeVertexBuffer(c,h,f,g,y){l(o.exports.meshopt_decodeVertexBuffer,c,h,f,g,o.exports[u[y]])},decodeIndexBuffer(c,h,f,g){l(o.exports.meshopt_decodeIndexBuffer,c,h,f,g)},decodeIndexSequence(c,h,f,g){l(o.exports.meshopt_decodeIndexSequence,c,h,f,g)},decodeGltfBuffer(c,h,f,g,y,m){l(o.exports[d[y]],c,h,f,g,o.exports[u[m]])}},wE},CMe="modulepreload",TMe=function(e){return"/"+e},X8={},AM=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link");i=Promise.all(r.map(a=>{if(a=TMe(a),a in X8)return;X8[a]=!0;const s=a.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!n)for(let c=o.length-1;c>=0;c--){const h=o[c];if(h.href===a&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":CMe,s||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),s)return new Promise((c,h)=>{d.addEventListener("load",c),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},EMe=()=>parseInt(s1.replace(/\D+/g,"")),tne=EMe();let _E=null,rne="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function nne(e,t,r){return n=>{r&&r(n),e&&(_E||(_E=new AMe),_E.setDecoderPath(typeof e=="string"?e:rne),n.setDRACOLoader(_E)),t&&n.setMeshoptDecoder(typeof NL=="function"?NL():NL)}}function UR(e,t=!0,r=!0,n){return _M(CV,e,nne(t,r,n))}UR.preload=(e,t=!0,r=!0,n)=>_M.preload(CV,e,nne(t,r,n));UR.clear=e=>_M.clear(CV,e);UR.setDecoderPath=e=>{rne=e};const PMe=te.forwardRef(({makeDefault:e,camera:t,regress:r,domElement:n,enableDamping:i=!0,keyEvents:o=!1,onChange:a,onStart:s,onEnd:l,...u},d)=>{const c=Il(A=>A.invalidate),h=Il(A=>A.camera),f=Il(A=>A.gl),g=Il(A=>A.events),y=Il(A=>A.setEvents),m=Il(A=>A.set),p=Il(A=>A.get),v=Il(A=>A.performance),b=t||h,x=n||g.connected||f.domElement,_=te.useMemo(()=>new WAe(b),[b]);return wM(()=>{_.enabled&&_.update()},-1),te.useEffect(()=>(o&&_.connect(o===!0?x:o),_.connect(x),()=>void _.dispose()),[o,x,r,_,c]),te.useEffect(()=>{const A=C=>{c(),r&&v.regress(),a&&a(C)},M=C=>{s&&s(C)},T=C=>{l&&l(C)};return _.addEventListener("change",A),_.addEventListener("start",M),_.addEventListener("end",T),()=>{_.removeEventListener("start",M),_.removeEventListener("end",T),_.removeEventListener("change",A)}},[a,s,l,_,c,y]),te.useEffect(()=>{if(e){const A=p().controls;return m({controls:_}),()=>m({controls:A})}},[e,_]),te.createElement("primitive",Gu({ref:d,object:_,enableDamping:i},u))}),kL=tne>=154?"opaque_fragment":"output_fragment";class DMe extends mM{constructor(t){super(t),this.onBeforeCompile=(r,n)=>{const{isWebGL2:i}=n.capabilities;r.fragmentShader=r.fragmentShader.replace(`#include <${kL}>`,`
        ${i?`#include <${kL}>`:`#extension GL_OES_standard_derivatives : enable
#include <${kL}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${tne>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const OMe=te.forwardRef((e,t)=>{const[r]=te.useState(()=>new DMe(null));return te.createElement("primitive",Gu({},e,{object:r,ref:t,attach:"material"}))});let Qm,l_;const RMe=te.createContext(null),Y8=new pr,K8=new pe,IMe=te.forwardRef(({children:e,range:t,limit:r=1e3,...n},i)=>{const o=te.useRef(null),[a,s]=te.useState([]),[[l,u,d]]=te.useState(()=>[new Float32Array(r*3),Float32Array.from({length:r*3},()=>1),Float32Array.from({length:r},()=>1)]);te.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),wM(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),Y8.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(r,t!==void 0?t:r,a.length),Qm=0;Qm<a.length;Qm++)l_=a[Qm].current,l_.getWorldPosition(K8).applyMatrix4(Y8),K8.toArray(l,Qm*3),o.current.geometry.attributes.position.needsUpdate=!0,l_.matrixWorldNeedsUpdate=!0,l_.color.toArray(u,Qm*3),o.current.geometry.attributes.color.needsUpdate=!0,d.set([l_.size],Qm),o.current.geometry.attributes.size.needsUpdate=!0});const c=te.useMemo(()=>({getParent:()=>o,subscribe:h=>(s(f=>[...f,h]),()=>s(f=>f.filter(g=>g.current!==h.current)))}),[]);return te.createElement("points",Gu({userData:{instances:a},matrixAutoUpdate:!1,ref:Zre([i,o]),raycast:()=>null},n),te.createElement("bufferGeometry",null,te.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Wg}),te.createElement("bufferAttribute",{attach:"attributes-color",count:u.length/3,array:u,itemSize:3,usage:Wg}),te.createElement("bufferAttribute",{attach:"attributes-size",count:d.length,array:d,itemSize:1,usage:Wg})),te.createElement(RMe.Provider,{value:c},e))}),LMe=te.forwardRef(({children:e,positions:t,colors:r,sizes:n,stride:i=3,...o},a)=>{const s=te.useRef(null);return wM(()=>{const l=s.current.geometry.attributes;l.position.needsUpdate=!0,r&&(l.color.needsUpdate=!0),n&&(l.size.needsUpdate=!0)}),te.createElement("points",Gu({ref:Zre([a,s])},o),te.createElement("bufferGeometry",null,te.createElement("bufferAttribute",{attach:"attributes-position",count:t.length/i,array:t,itemSize:i,usage:Wg}),r&&te.createElement("bufferAttribute",{attach:"attributes-color",count:r.length/i,array:r,itemSize:3,usage:Wg}),n&&te.createElement("bufferAttribute",{attach:"attributes-size",count:n.length/i,array:n,itemSize:1,usage:Wg})),e)}),BMe=te.forwardRef((e,t)=>e.positions instanceof Float32Array?te.createElement(LMe,Gu({},e,{ref:t})):te.createElement(IMe,Gu({},e,{ref:t})));var ine={exports:{}},NMe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kMe=NMe,FMe=kMe;function one(){}function ane(){}ane.resetWarningCache=one;var zMe=function(){function e(n,i,o,a,s,l){if(l!==FMe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ane,resetWarningCache:one};return r.PropTypes=r,r};ine.exports=zMe();var Kt=ine.exports;function sne({all:e,scene:t,camera:r}){const n=Il(({gl:a})=>a),i=Il(({camera:a})=>a),o=Il(({scene:a})=>a);return te.useLayoutEffect(()=>{const a=[];e&&(t||o).traverse(u=>{u.visible===!1&&(a.push(u),u.visible=!0)}),n.compile(t||o,r||i);const s=new X4(128);new q4(.01,1e5,s).update(n,t||o),s.dispose(),a.forEach(u=>u.visible=!1)},[]),null}const UMe=()=>{const{progress:e}=UAe();return Qe.jsxs(zAe,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Qe.jsx("span",{className:"canvas-loader"}),Qe.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[e.toFixed(2),"%"]})]})},VMe=()=>{const e=UR("./planet/scene.gltf");return Qe.jsx("primitive",{object:e.scene,scale:2.5,"position-y":0,"rotation-y":0})},jMe=()=>Qe.jsx(Jre,{shadows:!0,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:Qe.jsxs(te.Suspense,{fallback:Qe.jsx(UMe,{}),children:[Qe.jsx(PMe,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),Qe.jsx(VMe,{}),Qe.jsx(sne,{all:!0})]})});function Gb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Q8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(r),!0).forEach(function(n){Gb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}new lt;new lt;var wl=function e(t,r,n){var i=this;lne(this,e),Gb(this,"dot2",function(o,a){return i.x*o+i.y*a}),Gb(this,"dot3",function(o,a,s){return i.x*o+i.y*a+i.z*s}),this.x=t,this.y=r,this.z=n},HMe=[new wl(1,1,0),new wl(-1,1,0),new wl(1,-1,0),new wl(-1,-1,0),new wl(1,0,1),new wl(-1,0,1),new wl(1,0,-1),new wl(-1,0,-1),new wl(0,1,1),new wl(0,-1,1),new wl(0,1,-1),new wl(0,-1,-1)],Z8=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],$8=new Array(512),e9=new Array(512),GMe=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var r=0;r<256;r++){var n;r&1?n=Z8[r]^t&255:n=Z8[r]^t>>8&255,$8[r]=$8[r+256]=n,e9[r]=e9[r+256]=HMe[n%12]}};GMe(0);function WMe(e){if(typeof e=="number")e=Math.abs(e);else if(typeof e=="string"){var t=e;e=0;for(var r=0;r<t.length;r++)e=(e+(r+1)*(t.charCodeAt(r)%96))%2147483647}return e===0&&(e=311),e}function t9(e){var t=WMe(e);return function(){var r=t*48271%2147483647;return t=r,r/2147483647}}var qMe=function e(t){var r=this;lne(this,e),Gb(this,"seed",0),Gb(this,"init",function(n){r.seed=n,r.value=t9(n)}),Gb(this,"value",t9(this.seed)),this.init(t)},XMe=new qMe(Math.random()),YMe={radius:1,center:[0,0,0]};function KMe(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:XMe,n=Q8(Q8({},YMe),t),i=n.radius,o=n.center,a=0;a<e.length;a+=3){var s=Math.pow(r.value(),.3333333333333333),l=r.value()*2-1,u=r.value()*2-1,d=r.value()*2-1,c=Math.sqrt(l*l+u*u+d*d);l=s*l/c,u=s*u/c,d=s*d/c,e[a]=l*i+o[0],e[a+1]=u*i+o[1],e[a+2]=d*i+o[2]}return e}const JMe=e=>{const t=te.useRef(),[r]=te.useState(()=>KMe(new Float32Array(8e3),{radius:1.2}));return wM((n,i)=>{t.current.rotation.x-=i/10,t.current.rotation.y-=i/15}),Qe.jsx("group",{rotation:[0,0,Math.PI/4],children:Qe.jsx(BMe,{ref:t,positions:r,stride:3,frustumCulled:!0,...e,children:Qe.jsx(OMe,{transparent:!0,color:"#f272c8",size:5e-4,sizeAttenuation:!0,depthWrite:!1})})})},QMe=()=>Qe.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:Qe.jsxs(Jre,{camera:{position:[0,0,1]},children:[Qe.jsx(te.Suspense,{fallback:null,children:Qe.jsx(JMe,{})}),Qe.jsx(sne,{all:!0})]})});var ZMe=Object.create,VR=Object.defineProperty,$Me=Object.getOwnPropertyDescriptor,eCe=Object.getOwnPropertyNames,tCe=Object.getPrototypeOf,rCe=Object.prototype.hasOwnProperty,nCe=(e,t,r)=>t in e?VR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ha=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),iCe=(e,t)=>{for(var r in t)VR(e,r,{get:t[r],enumerable:!0})},oCe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of eCe(t))!rCe.call(e,i)&&i!==r&&VR(e,i,{get:()=>t[i],enumerable:!(n=$Me(t,i))||n.enumerable});return e},Po=(e,t,r)=>(r=e!=null?ZMe(tCe(e)):{},oCe(t||!e||!e.__esModule?VR(r,"default",{value:e,enumerable:!0}):r,e)),Da=(e,t,r)=>(nCe(e,typeof t!="symbol"?t+"":t,r),r),aCe=ha((e,t)=>{(function(r,n){typeof e=="object"?t.exports=n():typeof define=="function"&&define.amd?define(n):r.Alea=n()})(e,function(){return r.importState=function(i){var o=new r;return o.importState(i),o},r;function r(){return function(i){var o=0,a=0,s=0,l=1;i.length==0&&(i=[+new Date]);var u=n();o=u(" "),a=u(" "),s=u(" ");for(var d=0;d<i.length;d++)o-=u(i[d]),o<0&&(o+=1),a-=u(i[d]),a<0&&(a+=1),s-=u(i[d]),s<0&&(s+=1);u=null;var c=function(){var h=2091639*o+l*23283064365386963e-26;return o=a,a=s,s=h-(l=h|0)};return c.next=c,c.uint32=function(){return c()*4294967296},c.fract53=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.version="Alea 0.9",c.args=i,c.exportState=function(){return[o,a,s,l]},c.importState=function(h){o=+h[0]||0,a=+h[1]||0,s=+h[2]||0,l=+h[3]||0},c}(Array.prototype.slice.call(arguments))}function n(){var i=4022871197,o=function(a){a=a.toString();for(var s=0;s<a.length;s++){i+=a.charCodeAt(s);var l=.02519603282416938*i;i=l>>>0,l-=i,l*=i,i=l>>>0,l-=i,i+=l*4294967296}return(i>>>0)*23283064365386963e-26};return o.version="Mash 0.9",o}})}),une=ha((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?n(e):typeof define=="function"&&define.amd?define(["exports"],n):n((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(n,i,o,a,s){if(i=i===void 0||i,o=o===void 0||o,s=1e-64/(a=a||Math.pow(2,-52)),!n)throw new TypeError("Matrix a is not defined");var l,u,d,c,h,f,g,y,m,p,v,b,x=n[0].length,_=n.length;if(_<x)throw new TypeError("Invalid matrix: m < n");for(var A=[],M=[],T=[],C=i==="f"?_:x,E=p=g=0;E<_;E++)M[E]=new Array(C).fill(0);for(E=0;E<x;E++)T[E]=new Array(x).fill(0);var D,I=new Array(x).fill(0);for(E=0;E<_;E++)for(l=0;l<x;l++)M[E][l]=n[E][l];for(E=0;E<x;E++){for(A[E]=g,m=0,d=E+1,l=E;l<_;l++)m+=Math.pow(M[l][E],2);if(m<s)g=0;else for(y=(f=M[E][E])*(g=f<0?Math.sqrt(m):-Math.sqrt(m))-m,M[E][E]=f-g,l=d;l<x;l++){for(m=0,u=E;u<_;u++)m+=M[u][E]*M[u][l];for(f=m/y,u=E;u<_;u++)M[u][l]=M[u][l]+f*M[u][E]}for(I[E]=g,m=0,l=d;l<x;l++)m+=Math.pow(M[E][l],2);if(m<s)g=0;else{for(y=(f=M[E][E+1])*(g=f<0?Math.sqrt(m):-Math.sqrt(m))-m,M[E][E+1]=f-g,l=d;l<x;l++)A[l]=M[E][l]/y;for(l=d;l<_;l++){for(m=0,u=d;u<x;u++)m+=M[l][u]*M[E][u];for(u=d;u<x;u++)M[l][u]=M[l][u]+m*A[u]}}p<(v=Math.abs(I[E])+Math.abs(A[E]))&&(p=v)}if(o)for(E=x-1;0<=E;E--){if(g!==0){for(y=M[E][E+1]*g,l=d;l<x;l++)T[l][E]=M[E][l]/y;for(l=d;l<x;l++){for(m=0,u=d;u<x;u++)m+=M[E][u]*T[u][l];for(u=d;u<x;u++)T[u][l]=T[u][l]+m*T[u][E]}}for(l=d;l<x;l++)T[E][l]=0,T[l][E]=0;T[E][E]=1,g=A[E],d=E}if(i){if(i==="f")for(E=x;E<_;E++){for(l=x;l<_;l++)M[E][l]=0;M[E][E]=1}for(E=x-1;0<=E;E--){for(d=E+1,g=I[E],l=d;l<C;l++)M[E][l]=0;if(g!==0){for(y=M[E][E]*g,l=d;l<C;l++){for(m=0,u=d;u<_;u++)m+=M[u][E]*M[u][l];for(f=m/y,u=E;u<_;u++)M[u][l]=M[u][l]+f*M[u][E]}for(l=E;l<_;l++)M[l][E]=M[l][E]/g}else for(l=E;l<_;l++)M[l][E]=0;M[E][E]=M[E][E]+1}}for(a*=p,u=x-1;0<=u;u--)for(var k=0;k<50;k++){for(D=!1,d=u;0<=d;d--){if(Math.abs(A[d])<=a){D=!0;break}if(Math.abs(I[d-1])<=a)break}if(!D){for(h=0,c=d-(m=1),E=d;E<u+1&&(f=m*A[E],A[E]=h*A[E],!(Math.abs(f)<=a));E++)if(g=I[E],I[E]=Math.sqrt(f*f+g*g),h=g/(y=I[E]),m=-f/y,i)for(l=0;l<_;l++)v=M[l][c],b=M[l][E],M[l][c]=v*h+b*m,M[l][E]=-v*m+b*h}if(b=I[u],d===u){if(b<0&&(I[u]=-b,o))for(l=0;l<x;l++)T[l][u]=-T[l][u];break}for(p=I[d],f=(((v=I[u-1])-b)*(v+b)+((g=A[u-1])-(y=A[u]))*(g+y))/(2*y*v),g=Math.sqrt(f*f+1),f=((p-b)*(p+b)+y*(v/(f<0?f-g:f+g)-y))/p,E=d+(m=h=1);E<u+1;E++){if(g=A[E],v=I[E],y=m*g,g*=h,b=Math.sqrt(f*f+y*y),f=p*(h=f/(A[E-1]=b))+g*(m=y/b),g=-p*m+g*h,y=v*m,v*=h,o)for(l=0;l<x;l++)p=T[l][E-1],b=T[l][E],T[l][E-1]=p*h+b*m,T[l][E]=-p*m+b*h;if(b=Math.sqrt(f*f+y*y),f=(h=f/(I[E-1]=b))*g+(m=y/b)*v,p=-m*g+h*v,i)for(l=0;l<_;l++)v=M[l][E-1],b=M[l][E],M[l][E-1]=v*h+b*m,M[l][E]=-v*m+b*h}A[d]=0,A[u]=f,I[u]=p}for(E=0;E<x;E++)I[E]<a&&(I[E]=0);return{u:M,q:I,v:T}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),sCe=ha((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=r||self,r.TinyQueue=n())})(e,function(){var r=function(i,o){if(i===void 0&&(i=[]),o===void 0&&(o=n),this.data=i,this.length=this.data.length,this.compare=o,this.length>0)for(var a=(this.length>>1)-1;a>=0;a--)this._down(a)};r.prototype.push=function(i){this.data.push(i),this.length++,this._up(this.length-1)},r.prototype.pop=function(){if(this.length!==0){var i=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),i}},r.prototype.peek=function(){return this.data[0]},r.prototype._up=function(i){for(var o=this,a=o.data,s=o.compare,l=a[i];i>0;){var u=i-1>>1,d=a[u];if(s(l,d)>=0)break;a[i]=d,i=u}a[i]=l},r.prototype._down=function(i){for(var o=this,a=o.data,s=o.compare,l=this.length>>1,u=a[i];i<l;){var d=(i<<1)+1,c=a[d],h=d+1;if(h<this.length&&s(a[h],c)<0&&(d=h,c=a[h]),s(c,u)>=0)break;a[i]=c,i=d}a[i]=u};function n(i,o){return i<o?-1:i>o?1:0}return r})}),lCe=ha((e,t)=>{var r=sCe();r.default&&(r=r.default),t.exports=n,t.exports.default=n;function n(u,d,c){d=d||1;for(var h,f,g,y,m=0;m<u[0].length;m++){var p=u[0][m];(!m||p[0]<h)&&(h=p[0]),(!m||p[1]<f)&&(f=p[1]),(!m||p[0]>g)&&(g=p[0]),(!m||p[1]>y)&&(y=p[1])}var v=g-h,b=y-f,x=Math.min(v,b),_=x/2;if(x===0){var A=[h,f];return A.distance=0,A}for(var M=new r(void 0,i),T=h;T<g;T+=x)for(var C=f;C<y;C+=x)M.push(new o(T+_,C+_,_,u));var E=s(u),D=new o(h+v/2,f+b/2,0,u);D.d>E.d&&(E=D);for(var I=M.length;M.length;){var k=M.pop();k.d>E.d&&(E=k,c&&console.log("found best %d after %d probes",Math.round(1e4*k.d)/1e4,I)),!(k.max-E.d<=d)&&(_=k.h/2,M.push(new o(k.x-_,k.y-_,_,u)),M.push(new o(k.x+_,k.y-_,_,u)),M.push(new o(k.x-_,k.y+_,_,u)),M.push(new o(k.x+_,k.y+_,_,u)),I+=4)}c&&(console.log("num probes: "+I),console.log("best distance: "+E.d));var L=[E.x,E.y];return L.distance=E.d,L}function i(u,d){return d.max-u.max}function o(u,d,c,h){this.x=u,this.y=d,this.h=c,this.d=a(u,d,h),this.max=this.d+this.h*Math.SQRT2}function a(u,d,c){for(var h=!1,f=1/0,g=0;g<c.length;g++)for(var y=c[g],m=0,p=y.length,v=p-1;m<p;v=m++){var b=y[m],x=y[v];b[1]>d!=x[1]>d&&u<(x[0]-b[0])*(d-b[1])/(x[1]-b[1])+b[0]&&(h=!h),f=Math.min(f,l(u,d,b,x))}return f===0?0:(h?1:-1)*Math.sqrt(f)}function s(u){for(var d=0,c=0,h=0,f=u[0],g=0,y=f.length,m=y-1;g<y;m=g++){var p=f[g],v=f[m],b=p[0]*v[1]-v[0]*p[1];c+=(p[0]+v[0])*b,h+=(p[1]+v[1])*b,d+=b*3}return d===0?new o(f[0][0],f[0][1],0,u):new o(c/d,h/d,0,u)}function l(u,d,c,h){var f=c[0],g=c[1],y=h[0]-f,m=h[1]-g;if(y!==0||m!==0){var p=((u-f)*y+(d-g)*m)/(y*y+m*m);p>1?(f=h[0],g=h[1]):p>0&&(f+=y*p,g+=m*p)}return y=u-f,m=d-g,y*y+m*m}}),uCe=ha((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){if(n===null||n===!0||n===!1)return NaN;var i=Number(n);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}t.exports=e.default}),cCe=ha((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){var i=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return i.setUTCFullYear(n.getFullYear()),n.getTime()-i.getTime()}t.exports=e.default}),dCe=ha(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var c=this||r;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var h=this||r;if(c=parseFloat(c),h.ctx||d(),typeof c<"u"&&c>=0&&c<=1){if(h._volume=c,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(c,r.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var g=h._howls[f]._getSoundIds(),y=0;y<g.length;y++){var m=h._howls[f]._soundById(g[y]);m&&m._node&&(m._node.volume=m._volume*c)}return h}return h._volume},mute:function(c){var h=this||r;h.ctx||d(),h._muted=c,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(c?0:h._volume,r.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var g=h._howls[f]._getSoundIds(),y=0;y<g.length;y++){var m=h._howls[f]._soundById(g[y]);m&&m._node&&(m._node.muted=c?!0:m._muted)}return h},stop:function(){for(var c=this||r,h=0;h<c._howls.length;h++)c._howls[h].stop();return c},unload:function(){for(var c=this||r,h=c._howls.length-1;h>=0;h--)c._howls[h].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,d()),c},codecs:function(c){return(this||r)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||r;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var h=new Audio;h.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||r,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return c}if(!h||typeof h.canPlayType!="function")return c;var f=h.canPlayType("audio/mpeg;").replace(/^no$/,""),g=c._navigator?c._navigator.userAgent:"",y=g.match(/OPR\/([0-6].)/g),m=y&&parseInt(y[0].split("/")[1],10)<33,p=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,v=g.match(/Version\/(.*?) /),b=p&&v&&parseInt(v[1],10)<15;return c._codecs={mp3:!!(!m&&(f||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||r;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var h=function(f){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,c._releaseHtml5Audio(g)}catch{c.noAudio=!0;break}for(var y=0;y<c._howls.length;y++)if(!c._howls[y]._webAudio)for(var m=c._howls[y]._getSoundIds(),p=0;p<m.length;p++){var v=c._howls[y]._soundById(m[p]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}c._autoResume();var b=c.ctx.createBufferSource();b.buffer=c._scratchBuffer,b.connect(c.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),b.onended=function(){b.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var x=0;x<c._howls.length;x++)c._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),c}},_obtainHtml5Audio:function(){var c=this||r;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var h=this||r;return c._unlocked&&h._html5AudioPool.push(c),h},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!r.usingWebAudio)){for(var h=0;h<c._howls.length;h++)if(c._howls[h]._webAudio){for(var f=0;f<c._howls[h]._sounds.length;f++)if(!c._howls[h]._sounds[f]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var g=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(g,g)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!r.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var h=0;h<c._howls.length;h++)c._howls[h]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var r=new t,n=function(c){var h=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(c)};n.prototype={init:function(c){var h=this;return r.ctx||d(),h._autoplay=c.autoplay||!1,h._format=typeof c.format!="string"?c.format:[c.format],h._html5=c.html5||!1,h._muted=c.mute||!1,h._loop=c.loop||!1,h._pool=c.pool||5,h._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,h._rate=c.rate||1,h._sprite=c.sprite||{},h._src=typeof c.src!="string"?c.src:[c.src],h._volume=c.volume!==void 0?c.volume:1,h._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=c.onend?[{fn:c.onend}]:[],h._onfade=c.onfade?[{fn:c.onfade}]:[],h._onload=c.onload?[{fn:c.onload}]:[],h._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],h._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],h._onpause=c.onpause?[{fn:c.onpause}]:[],h._onplay=c.onplay?[{fn:c.onplay}]:[],h._onstop=c.onstop?[{fn:c.onstop}]:[],h._onmute=c.onmute?[{fn:c.onmute}]:[],h._onvolume=c.onvolume?[{fn:c.onvolume}]:[],h._onrate=c.onrate?[{fn:c.onrate}]:[],h._onseek=c.onseek?[{fn:c.onseek}]:[],h._onunlock=c.onunlock?[{fn:c.onunlock}]:[],h._onresume=[],h._webAudio=r.usingWebAudio&&!h._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var c=this,h=null;if(r.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var f=0;f<c._src.length;f++){var g,y;if(c._format&&c._format[f])g=c._format[f];else{if(y=c._src[f],typeof y!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(y),g||(g=/\.([^.]+)$/.exec(y.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&r.codecs(g)){h=c._src[f];break}}if(!h){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=h,c._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new i(c),c._webAudio&&a(c),c},play:function(c,h){var f=this,g=null;if(typeof c=="number")g=c,c=null;else{if(typeof c=="string"&&f._state==="loaded"&&!f._sprite[c])return null;if(typeof c>"u"&&(c="__default",!f._playLock)){for(var y=0,m=0;m<f._sounds.length;m++)f._sounds[m]._paused&&!f._sounds[m]._ended&&(y++,g=f._sounds[m]._id);y===1?c=null:g=null}}var p=g?f._soundById(g):f._inactiveSound();if(!p)return null;if(g&&!c&&(c=p._sprite||"__default"),f._state!=="loaded"){p._sprite=c,p._ended=!1;var v=p._id;return f._queue.push({event:"play",action:function(){f.play(v)}}),v}if(g&&!p._paused)return h||f._loadQueue("play"),p._id;f._webAudio&&r._autoResume();var b=Math.max(0,p._seek>0?p._seek:f._sprite[c][0]/1e3),x=Math.max(0,(f._sprite[c][0]+f._sprite[c][1])/1e3-b),_=x*1e3/Math.abs(p._rate),A=f._sprite[c][0]/1e3,M=(f._sprite[c][0]+f._sprite[c][1])/1e3;p._sprite=c,p._ended=!1;var T=function(){p._paused=!1,p._seek=b,p._start=A,p._stop=M,p._loop=!!(p._loop||f._sprite[c][2])};if(b>=M){f._ended(p);return}var C=p._node;if(f._webAudio){var E=function(){f._playLock=!1,T(),f._refreshBuffer(p);var L=p._muted||f._muted?0:p._volume;C.gain.setValueAtTime(L,r.ctx.currentTime),p._playStart=r.ctx.currentTime,typeof C.bufferSource.start>"u"?p._loop?C.bufferSource.noteGrainOn(0,b,86400):C.bufferSource.noteGrainOn(0,b,x):p._loop?C.bufferSource.start(0,b,86400):C.bufferSource.start(0,b,x),_!==1/0&&(f._endTimers[p._id]=setTimeout(f._ended.bind(f,p),_)),h||setTimeout(function(){f._emit("play",p._id),f._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?E():(f._playLock=!0,f.once("resume",E),f._clearTimer(p._id))}else{var D=function(){C.currentTime=b,C.muted=p._muted||f._muted||r._muted||C.muted,C.volume=p._volume*r.volume(),C.playbackRate=p._rate;try{var L=C.play();if(L&&typeof Promise<"u"&&(L instanceof Promise||typeof L.then=="function")?(f._playLock=!0,T(),L.then(function(){f._playLock=!1,C._unlocked=!0,h?f._loadQueue():f._emit("play",p._id)}).catch(function(){f._playLock=!1,f._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):h||(f._playLock=!1,T(),f._emit("play",p._id)),C.playbackRate=p._rate,C.paused){f._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||p._loop?f._endTimers[p._id]=setTimeout(f._ended.bind(f,p),_):(f._endTimers[p._id]=function(){f._ended(p),C.removeEventListener("ended",f._endTimers[p._id],!1)},C.addEventListener("ended",f._endTimers[p._id],!1))}catch(U){f._emit("playerror",p._id,U)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=f._src,C.load());var I=window&&window.ejecta||!C.readyState&&r._navigator.isCocoonJS;if(C.readyState>=3||I)D();else{f._playLock=!0,f._state="loading";var k=function(){f._state="loaded",D(),C.removeEventListener(r._canPlayEvent,k,!1)};C.addEventListener(r._canPlayEvent,k,!1),f._clearTimer(p._id)}}return p._id},pause:function(c){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(c)}}),h;for(var f=h._getSoundIds(c),g=0;g<f.length;g++){h._clearTimer(f[g]);var y=h._soundById(f[g]);if(y&&!y._paused&&(y._seek=h.seek(f[g]),y._rateSeek=0,y._paused=!0,h._stopFade(f[g]),y._node))if(h._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),h._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||h._emit("pause",y?y._id:null)}return h},stop:function(c,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(c)}}),f;for(var g=f._getSoundIds(c),y=0;y<g.length;y++){f._clearTimer(g[y]);var m=f._soundById(g[y]);m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,f._stopFade(g[y]),m._node&&(f._webAudio?m._node.bufferSource&&(typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),f._cleanBuffer(m._node)):(!isNaN(m._node.duration)||m._node.duration===1/0)&&(m._node.currentTime=m._start||0,m._node.pause(),m._node.duration===1/0&&f._clearSound(m._node))),h||f._emit("stop",m._id))}return f},mute:function(c,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(c,h)}}),f;if(typeof h>"u")if(typeof c=="boolean")f._muted=c;else return f._muted;for(var g=f._getSoundIds(h),y=0;y<g.length;y++){var m=f._soundById(g[y]);m&&(m._muted=c,m._interval&&f._stopFade(m._id),f._webAudio&&m._node?m._node.gain.setValueAtTime(c?0:m._volume,r.ctx.currentTime):m._node&&(m._node.muted=r._muted?!0:c),f._emit("mute",m._id))}return f},volume:function(){var c=this,h=arguments,f,g;if(h.length===0)return c._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var y=c._getSoundIds(),m=y.indexOf(h[0]);m>=0?g=parseInt(h[0],10):f=parseFloat(h[0])}else h.length>=2&&(f=parseFloat(h[0]),g=parseInt(h[1],10));var p;if(typeof f<"u"&&f>=0&&f<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,h)}}),c;typeof g>"u"&&(c._volume=f),g=c._getSoundIds(g);for(var v=0;v<g.length;v++)p=c._soundById(g[v]),p&&(p._volume=f,h[2]||c._stopFade(g[v]),c._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(f,r.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=f*r.volume()),c._emit("volume",p._id))}else return p=g?c._soundById(g):c._sounds[0],p?p._volume:0;return c},fade:function(c,h,f,g){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(c,h,f,g)}}),y;c=Math.min(Math.max(0,parseFloat(c)),1),h=Math.min(Math.max(0,parseFloat(h)),1),f=parseFloat(f),y.volume(c,g);for(var m=y._getSoundIds(g),p=0;p<m.length;p++){var v=y._soundById(m[p]);if(v){if(g||y._stopFade(m[p]),y._webAudio&&!v._muted){var b=r.ctx.currentTime,x=b+f/1e3;v._volume=c,v._node.gain.setValueAtTime(c,b),v._node.gain.linearRampToValueAtTime(h,x)}y._startFadeInterval(v,c,h,f,m[p],typeof g>"u")}}return y},_startFadeInterval:function(c,h,f,g,y,m){var p=this,v=h,b=f-h,x=Math.abs(b/.01),_=Math.max(4,x>0?g/x:g),A=Date.now();c._fadeTo=f,c._interval=setInterval(function(){var M=(Date.now()-A)/g;A=Date.now(),v+=b*M,v=Math.round(v*100)/100,b<0?v=Math.max(f,v):v=Math.min(f,v),p._webAudio?c._volume=v:p.volume(v,c._id,!0),m&&(p._volume=v),(f<h&&v<=f||f>h&&v>=f)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,p.volume(f,c._id),p._emit("fade",c._id))},_)},_stopFade:function(c){var h=this,f=h._soundById(c);return f&&f._interval&&(h._webAudio&&f._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(f._interval),f._interval=null,h.volume(f._fadeTo,c),f._fadeTo=null,h._emit("fade",c)),h},loop:function(){var c=this,h=arguments,f,g,y;if(h.length===0)return c._loop;if(h.length===1)if(typeof h[0]=="boolean")f=h[0],c._loop=f;else return y=c._soundById(parseInt(h[0],10)),y?y._loop:!1;else h.length===2&&(f=h[0],g=parseInt(h[1],10));for(var m=c._getSoundIds(g),p=0;p<m.length;p++)y=c._soundById(m[p]),y&&(y._loop=f,c._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=f,f&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,c.playing(m[p])&&(c.pause(m[p],!0),c.play(m[p],!0)))));return c},rate:function(){var c=this,h=arguments,f,g;if(h.length===0)g=c._sounds[0]._id;else if(h.length===1){var y=c._getSoundIds(),m=y.indexOf(h[0]);m>=0?g=parseInt(h[0],10):f=parseFloat(h[0])}else h.length===2&&(f=parseFloat(h[0]),g=parseInt(h[1],10));var p;if(typeof f=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,h)}}),c;typeof g>"u"&&(c._rate=f),g=c._getSoundIds(g);for(var v=0;v<g.length;v++)if(p=c._soundById(g[v]),p){c.playing(g[v])&&(p._rateSeek=c.seek(g[v]),p._playStart=c._webAudio?r.ctx.currentTime:p._playStart),p._rate=f,c._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(f,r.ctx.currentTime):p._node&&(p._node.playbackRate=f);var b=c.seek(g[v]),x=(c._sprite[p._sprite][0]+c._sprite[p._sprite][1])/1e3-b,_=x*1e3/Math.abs(p._rate);(c._endTimers[g[v]]||!p._paused)&&(c._clearTimer(g[v]),c._endTimers[g[v]]=setTimeout(c._ended.bind(c,p),_)),c._emit("rate",p._id)}}else return p=c._soundById(g),p?p._rate:c._rate;return c},seek:function(){var c=this,h=arguments,f,g;if(h.length===0)c._sounds.length&&(g=c._sounds[0]._id);else if(h.length===1){var y=c._getSoundIds(),m=y.indexOf(h[0]);m>=0?g=parseInt(h[0],10):c._sounds.length&&(g=c._sounds[0]._id,f=parseFloat(h[0]))}else h.length===2&&(f=parseFloat(h[0]),g=parseInt(h[1],10));if(typeof g>"u")return 0;if(typeof f=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,h)}}),c;var p=c._soundById(g);if(p)if(typeof f=="number"&&f>=0){var v=c.playing(g);v&&c.pause(g,!0),p._seek=f,p._ended=!1,c._clearTimer(g),!c._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=f);var b=function(){v&&c.play(g,!0),c._emit("seek",g)};if(v&&!c._webAudio){var x=function(){c._playLock?setTimeout(x,0):b()};setTimeout(x,0)}else b()}else if(c._webAudio){var _=c.playing(g)?r.ctx.currentTime-p._playStart:0,A=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(A+_*Math.abs(p._rate))}else return p._node.currentTime;return c},playing:function(c){var h=this;if(typeof c=="number"){var f=h._soundById(c);return f?!f._paused:!1}for(var g=0;g<h._sounds.length;g++)if(!h._sounds[g]._paused)return!0;return!1},duration:function(c){var h=this,f=h._duration,g=h._soundById(c);return g&&(f=h._sprite[g._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var c=this,h=c._sounds,f=0;f<h.length;f++)h[f]._paused||c.stop(h[f]._id),c._webAudio||(c._clearSound(h[f]._node),h[f]._node.removeEventListener("error",h[f]._errorFn,!1),h[f]._node.removeEventListener(r._canPlayEvent,h[f]._loadFn,!1),h[f]._node.removeEventListener("ended",h[f]._endFn,!1),r._releaseHtml5Audio(h[f]._node)),delete h[f]._node,c._clearTimer(h[f]._id);var g=r._howls.indexOf(c);g>=0&&r._howls.splice(g,1);var y=!0;for(f=0;f<r._howls.length;f++)if(r._howls[f]._src===c._src||c._src.indexOf(r._howls[f]._src)>=0){y=!1;break}return o&&y&&delete o[c._src],r.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,h,f,g){var y=this,m=y["_on"+c];return typeof h=="function"&&m.push(g?{id:f,fn:h,once:g}:{id:f,fn:h}),y},off:function(c,h,f){var g=this,y=g["_on"+c],m=0;if(typeof h=="number"&&(f=h,h=null),h||f)for(m=0;m<y.length;m++){var p=f===y[m].id;if(h===y[m].fn&&p||!h&&p){y.splice(m,1);break}}else if(c)g["_on"+c]=[];else{var v=Object.keys(g);for(m=0;m<v.length;m++)v[m].indexOf("_on")===0&&Array.isArray(g[v[m]])&&(g[v[m]]=[])}return g},once:function(c,h,f){var g=this;return g.on(c,h,f,1),g},_emit:function(c,h,f){for(var g=this,y=g["_on"+c],m=y.length-1;m>=0;m--)(!y[m].id||y[m].id===h||c==="load")&&(setTimeout((function(p){p.call(this,h,f)}).bind(g,y[m].fn),0),y[m].once&&g.off(c,y[m].fn,y[m].id));return g._loadQueue(c),g},_loadQueue:function(c){var h=this;if(h._queue.length>0){var f=h._queue[0];f.event===c&&(h._queue.shift(),h._loadQueue()),c||f.action()}return h},_ended:function(c){var h=this,f=c._sprite;if(!h._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(h._ended.bind(h,c),100),h;var g=!!(c._loop||h._sprite[f][2]);if(h._emit("end",c._id),!h._webAudio&&g&&h.stop(c._id,!0).play(c._id),h._webAudio&&g){h._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=r.ctx.currentTime;var y=(c._stop-c._start)*1e3/Math.abs(c._rate);h._endTimers[c._id]=setTimeout(h._ended.bind(h,c),y)}return h._webAudio&&!g&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,h._clearTimer(c._id),h._cleanBuffer(c._node),r._autoSuspend()),!h._webAudio&&!g&&h.stop(c._id,!0),h},_clearTimer:function(c){var h=this;if(h._endTimers[c]){if(typeof h._endTimers[c]!="function")clearTimeout(h._endTimers[c]);else{var f=h._soundById(c);f&&f._node&&f._node.removeEventListener("ended",h._endTimers[c],!1)}delete h._endTimers[c]}return h},_soundById:function(c){for(var h=this,f=0;f<h._sounds.length;f++)if(c===h._sounds[f]._id)return h._sounds[f];return null},_inactiveSound:function(){var c=this;c._drain();for(var h=0;h<c._sounds.length;h++)if(c._sounds[h]._ended)return c._sounds[h].reset();return new i(c)},_drain:function(){var c=this,h=c._pool,f=0,g=0;if(!(c._sounds.length<h)){for(g=0;g<c._sounds.length;g++)c._sounds[g]._ended&&f++;for(g=c._sounds.length-1;g>=0;g--){if(f<=h)return;c._sounds[g]._ended&&(c._webAudio&&c._sounds[g]._node&&c._sounds[g]._node.disconnect(0),c._sounds.splice(g,1),f--)}}},_getSoundIds:function(c){var h=this;if(typeof c>"u"){for(var f=[],g=0;g<h._sounds.length;g++)f.push(h._sounds[g]._id);return f}else return[c]},_refreshBuffer:function(c){var h=this;return c._node.bufferSource=r.ctx.createBufferSource(),c._node.bufferSource.buffer=o[h._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,r.ctx.currentTime),h},_cleanBuffer:function(c){var h=this,f=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),f))try{c.bufferSource.buffer=r._scratchBuffer}catch{}return c.bufferSource=null,h},_clearSound:function(c){var h=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);h||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(c){this._parent=c,this.init()};i.prototype={init:function(){var c=this,h=c._parent;return c._muted=h._muted,c._loop=h._loop,c._volume=h._volume,c._rate=h._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,h._sounds.push(c),c.create(),c},create:function(){var c=this,h=c._parent,f=r._muted||c._muted||c._parent._muted?0:c._volume;return h._webAudio?(c._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),c._node.gain.setValueAtTime(f,r.ctx.currentTime),c._node.paused=!0,c._node.connect(r.masterGain)):r.noAudio||(c._node=r._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(r._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=h._src,c._node.preload=h._preload===!0?"auto":h._preload,c._node.volume=f*r.volume(),c._node.load()),c},reset:function(){var c=this,h=c._parent;return c._muted=h._muted,c._loop=h._loop,c._volume=h._volume,c._rate=h._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,h=c._parent;h._duration=Math.ceil(c._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),c._node.removeEventListener(r._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,h=c._parent;h._duration===1/0&&(h._duration=Math.ceil(c._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var o={},a=function(c){var h=c._src;if(o[h]){c._duration=o[h].duration,u(c);return}if(/^data:[^;]+;base64,/.test(h)){for(var f=atob(h.split(",")[1]),g=new Uint8Array(f.length),y=0;y<f.length;++y)g[y]=f.charCodeAt(y);l(g.buffer,c)}else{var m=new XMLHttpRequest;m.open(c._xhr.method,h,!0),m.withCredentials=c._xhr.withCredentials,m.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(p){m.setRequestHeader(p,c._xhr.headers[p])}),m.onload=function(){var p=(m.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+m.status+".");return}l(m.response,c)},m.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete o[h],c.load())},s(m)}},s=function(c){try{c.send()}catch{c.onerror()}},l=function(c,h){var f=function(){h._emit("loaderror",null,"Decoding audio data failed.")},g=function(y){y&&h._sounds.length>0?(o[h._src]=y,u(h,y)):f()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(c).then(g).catch(f):r.ctx.decodeAudioData(c,g,f)},u=function(c,h){h&&!c._duration&&(c._duration=h.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},d=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),h=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=h?parseInt(h[1],10):null;if(c&&f&&f<9){var g=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!g&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:r,Howl:n}}),typeof e<"u"&&(e.Howler=r,e.Howl=n),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=r,global.Howl=n,global.Sound=i):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=n,window.Sound=i)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,i){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(n=typeof n!="number"?o._pos[1]:n,i=typeof i!="number"?o._pos[2]:i,typeof r=="number")o._pos=[r,n,i],typeof o.ctx.listener.positionX<"u"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(r,n,i,o,a,s){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(n=typeof n!="number"?u[1]:n,i=typeof i!="number"?u[2]:i,o=typeof o!="number"?u[3]:o,a=typeof a!="number"?u[4]:a,s=typeof s!="number"?u[5]:s,typeof r=="number")l._orientation=[r,n,i,o,a,s],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(r,n,i,o,a,s);else return u;return l},Howl.prototype.init=function(r){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(r,n)}}),i;var o=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof r=="number")i._stereo=r,i._pos=[r,0,0];else return i._stereo;for(var a=i._getSoundIds(n),s=0;s<a.length;s++){var l=i._soundById(a[s]);if(l)if(typeof r=="number")l._stereo=r,l._pos=[r,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,o),o==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(r,0,0):l._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),i._emit("stereo",l._id);else return l._stereo}return i},Howl.prototype.pos=function(r,n,i,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(r,n,i,o)}}),a;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof o>"u")if(typeof r=="number")a._pos=[r,n,i];else return a._pos;for(var s=a._getSoundIds(o),l=0;l<s.length;l++){var u=a._soundById(s[l]);if(u)if(typeof r=="number")u._pos=[r,n,i],u._node&&((!u._panner||u._panner.pan)&&t(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):u._panner.setPosition(r,n,i)),a._emit("pos",u._id);else return u._pos}return a},Howl.prototype.orientation=function(r,n,i,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(r,n,i,o)}}),a;if(n=typeof n!="number"?a._orientation[1]:n,i=typeof i!="number"?a._orientation[2]:i,typeof o>"u")if(typeof r=="number")a._orientation=[r,n,i];else return a._orientation;for(var s=a._getSoundIds(o),l=0;l<s.length;l++){var u=a._soundById(s[l]);if(u)if(typeof r=="number")u._orientation=[r,n,i],u._node&&(u._panner||(u._pos||(u._pos=a._pos||[0,0,-.5]),t(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):u._panner.setOrientation(r,n,i)),a._emit("orientation",u._id);else return u._orientation}return a},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,i,o,a;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof o>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),r._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:r._panningModel});else return a=r._soundById(parseInt(n[0],10)),a?a._pannerAttr:r._pannerAttr;else n.length===2&&(i=n[0],o=parseInt(n[1],10));for(var s=r._getSoundIds(o),l=0;l<s.length;l++)if(a=r._soundById(s[l]),a){var u=a._pannerAttr;u={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:u.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:u.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:u.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:u.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:u.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:u.panningModel};var d=a._panner;d?(d.coneInnerAngle=u.coneInnerAngle,d.coneOuterAngle=u.coneOuterAngle,d.coneOuterGain=u.coneOuterGain,d.distanceModel=u.distanceModel,d.maxDistance=u.maxDistance,d.refDistance=u.refDistance,d.rolloffFactor=u.rolloffFactor,d.panningModel=u.panningModel):(a._pos||(a._pos=r._pos||[0,0,-.5]),t(a,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,r.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var t=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()}),hCe=ha((e,t)=>{function r(n){for(var i=new Array(n),o=0;o<n;++o)i[o]=o;return i}t.exports=r}),fCe=ha((e,t)=>{t.exports=function(i){return i!=null&&(r(i)||n(i)||!!i._isBuffer)};function r(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function n(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&r(i.slice(0,0))}}),MM=ha((e,t)=>{var r=hCe(),n=fCe(),i=typeof Float64Array<"u";function o(c,h){return c[0]-h[0]}function a(){var c=this.stride,h=new Array(c.length),f;for(f=0;f<h.length;++f)h[f]=[Math.abs(c[f]),f];h.sort(o);var g=new Array(h.length);for(f=0;f<g.length;++f)g[f]=h[f][1];return g}function s(c,h){var f=["View",h,"d",c].join("");h<0&&(f="View_Nil"+c);var g=c==="generic";if(h===-1){var y="function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+c+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+f+"(a){return new "+f+"(a);}",E=new Function(y);return E()}else if(h===0){var y="function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+c+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+f+"_get(){return "+(g?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(g?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}",E=new Function("TrivialArray",y);return E(u[c][0])}var y=["'use strict'"],m=r(h),p=m.map(function(D){return"i"+D}),v="this.offset+"+m.map(function(D){return"this.stride["+D+"]*i"+D}).join("+"),b=m.map(function(D){return"b"+D}).join(","),x=m.map(function(D){return"c"+D}).join(",");y.push("function "+f+"(a,"+b+","+x+",d){this.data=a","this.shape=["+b+"]","this.stride=["+x+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+c+"'","proto.dimension="+h),y.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+m.map(function(D){return"this.shape["+D+"]"}).join("*"),"}})"),h===1?y.push("proto.order=[0]"):(y.push("Object.defineProperty(proto,'order',{get:"),h<4?(y.push("function "+f+"_order(){"),h===2?y.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):h===3&&y.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):y.push("ORDER})")),y.push("proto.set=function "+f+"_set("+p.join(",")+",v){"),g?y.push("return this.data.set("+v+",v)}"):y.push("return this.data["+v+"]=v}"),y.push("proto.get=function "+f+"_get("+p.join(",")+"){"),g?y.push("return this.data.get("+v+")}"):y.push("return this.data["+v+"]}"),y.push("proto.index=function "+f+"_index(",p.join(),"){return "+v+"}"),y.push("proto.hi=function "+f+"_hi("+p.join(",")+"){return new "+f+"(this.data,"+m.map(function(D){return["(typeof i",D,"!=='number'||i",D,"<0)?this.shape[",D,"]:i",D,"|0"].join("")}).join(",")+","+m.map(function(D){return"this.stride["+D+"]"}).join(",")+",this.offset)}");var _=m.map(function(D){return"a"+D+"=this.shape["+D+"]"}),A=m.map(function(D){return"c"+D+"=this.stride["+D+"]"});y.push("proto.lo=function "+f+"_lo("+p.join(",")+"){var b=this.offset,d=0,"+_.join(",")+","+A.join(","));for(var M=0;M<h;++M)y.push("if(typeof i"+M+"==='number'&&i"+M+">=0){d=i"+M+"|0;b+=c"+M+"*d;a"+M+"-=d}");y.push("return new "+f+"(this.data,"+m.map(function(D){return"a"+D}).join(",")+","+m.map(function(D){return"c"+D}).join(",")+",b)}"),y.push("proto.step=function "+f+"_step("+p.join(",")+"){var "+m.map(function(D){return"a"+D+"=this.shape["+D+"]"}).join(",")+","+m.map(function(D){return"b"+D+"=this.stride["+D+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var M=0;M<h;++M)y.push("if(typeof i"+M+"==='number'){d=i"+M+"|0;if(d<0){c+=b"+M+"*(a"+M+"-1);a"+M+"=ceil(-a"+M+"/d)}else{a"+M+"=ceil(a"+M+"/d)}b"+M+"*=d}");y.push("return new "+f+"(this.data,"+m.map(function(D){return"a"+D}).join(",")+","+m.map(function(D){return"b"+D}).join(",")+",c)}");for(var T=new Array(h),C=new Array(h),M=0;M<h;++M)T[M]="a[i"+M+"]",C[M]="b[i"+M+"]";y.push("proto.transpose=function "+f+"_transpose("+p+"){"+p.map(function(D,I){return D+"=("+D+"===undefined?"+I+":"+D+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+T.join(",")+","+C.join(",")+",this.offset)}"),y.push("proto.pick=function "+f+"_pick("+p+"){var a=[],b=[],c=this.offset");for(var M=0;M<h;++M)y.push("if(typeof i"+M+"==='number'&&i"+M+">=0){c=(c+this.stride["+M+"]*i"+M+")|0}else{a.push(this.shape["+M+"]);b.push(this.stride["+M+"])}");y.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),y.push("return function construct_"+f+"(data,shape,stride,offset){return new "+f+"(data,"+m.map(function(D){return"shape["+D+"]"}).join(",")+","+m.map(function(D){return"stride["+D+"]"}).join(",")+",offset)}");var E=new Function("CTOR_LIST","ORDER",y.join(`
`));return E(u[c],a)}function l(c){if(n(c))return"buffer";if(i)switch(Object.prototype.toString.call(c)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(c)?"array":"generic"}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function d(c,h,f,g){if(c===void 0){var x=u.array[0];return x([])}else typeof c=="number"&&(c=[c]);h===void 0&&(h=[c.length]);var y=h.length;if(f===void 0){f=new Array(y);for(var m=y-1,p=1;m>=0;--m)f[m]=p,p*=h[m]}if(g===void 0){g=0;for(var m=0;m<y;++m)f[m]<0&&(g-=(h[m]-1)*f[m])}for(var v=l(c),b=u[v];b.length<=y+1;)b.push(s(v,b.length-1));var x=b[y+1];return x(c,h,f,g)}t.exports=d}),pCe=ha((e,t)=>{function r(o,a){for(var s=1,l=o.length,u=o[0],d=o[0],c=1;c<l;++c)if(d=u,u=o[c],a(u,d)){if(c===s){s++;continue}o[s++]=u}return o.length=s,o}function n(o){for(var a=1,s=o.length,l=o[0],u=o[0],d=1;d<s;++d,u=l)if(u=l,l=o[d],l!==u){if(d===a){a++;continue}o[a++]=l}return o.length=a,o}function i(o,a,s){return o.length===0?o:a?(s||o.sort(a),r(o,a)):(s||o.sort(),n(o))}t.exports=i}),mCe=ha((e,t)=>{var r=pCe();function n(u,d,c){var h=u.length,f=d.arrayArgs.length,g=d.indexArgs.length>0,y=[],m=[],p=0,v=0,b,x;for(b=0;b<h;++b)m.push(["i",b,"=0"].join(""));for(x=0;x<f;++x)for(b=0;b<h;++b)v=p,p=u[b],b===0?m.push(["d",x,"s",b,"=t",x,"p",p].join("")):m.push(["d",x,"s",b,"=(t",x,"p",p,"-s",v,"*t",x,"p",v,")"].join(""));for(m.length>0&&y.push("var "+m.join(",")),b=h-1;b>=0;--b)p=u[b],y.push(["for(i",b,"=0;i",b,"<s",p,";++i",b,"){"].join(""));for(y.push(c),b=0;b<h;++b){for(v=p,p=u[b],x=0;x<f;++x)y.push(["p",x,"+=d",x,"s",b].join(""));g&&(b>0&&y.push(["index[",v,"]-=s",v].join("")),y.push(["++index[",p,"]"].join(""))),y.push("}")}return y.join(`
`)}function i(u,d,c,h){for(var f=d.length,g=c.arrayArgs.length,y=c.blockSize,m=c.indexArgs.length>0,p=[],v=0;v<g;++v)p.push(["var offset",v,"=p",v].join(""));for(var v=u;v<f;++v)p.push(["for(var j"+v+"=SS[",d[v],"]|0;j",v,">0;){"].join("")),p.push(["if(j",v,"<",y,"){"].join("")),p.push(["s",d[v],"=j",v].join("")),p.push(["j",v,"=0"].join("")),p.push(["}else{s",d[v],"=",y].join("")),p.push(["j",v,"-=",y,"}"].join("")),m&&p.push(["index[",d[v],"]=j",v].join(""));for(var v=0;v<g;++v){for(var b=["offset"+v],x=u;x<f;++x)b.push(["j",x,"*t",v,"p",d[x]].join(""));p.push(["p",v,"=(",b.join("+"),")"].join(""))}p.push(n(d,c,h));for(var v=u;v<f;++v)p.push("}");return p.join(`
`)}function o(u){for(var d=0,c=u[0].length;d<c;){for(var h=1;h<u.length;++h)if(u[h][d]!==u[0][d])return d;++d}return d}function a(u,d,c){for(var h=u.body,f=[],g=[],y=0;y<u.args.length;++y){var m=u.args[y];if(!(m.count<=0)){var p=new RegExp(m.name,"g"),v="",b=d.arrayArgs.indexOf(y);switch(d.argTypes[y]){case"offset":var x=d.offsetArgIndex.indexOf(y),_=d.offsetArgs[x];b=_.array,v="+q"+x;case"array":v="p"+b+v;var A="l"+y,M="a"+b;if(d.arrayBlockIndices[b]===0)m.count===1?c[b]==="generic"?m.lvalue?(f.push(["var ",A,"=",M,".get(",v,")"].join("")),h=h.replace(p,A),g.push([M,".set(",v,",",A,")"].join(""))):h=h.replace(p,[M,".get(",v,")"].join("")):h=h.replace(p,[M,"[",v,"]"].join("")):c[b]==="generic"?(f.push(["var ",A,"=",M,".get(",v,")"].join("")),h=h.replace(p,A),m.lvalue&&g.push([M,".set(",v,",",A,")"].join(""))):(f.push(["var ",A,"=",M,"[",v,"]"].join("")),h=h.replace(p,A),m.lvalue&&g.push([M,"[",v,"]=",A].join("")));else{for(var T=[m.name],C=[v],E=0;E<Math.abs(d.arrayBlockIndices[b]);E++)T.push("\\s*\\[([^\\]]+)\\]"),C.push("$"+(E+1)+"*t"+b+"b"+E);if(p=new RegExp(T.join(""),"g"),v=C.join("+"),c[b]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");h=h.replace(p,[M,"[",v,"]"].join(""))}break;case"scalar":h=h.replace(p,"Y"+d.scalarArgs.indexOf(y));break;case"index":h=h.replace(p,"index");break;case"shape":h=h.replace(p,"shape");break}}}return[f.join(`
`),h,g.join(`
`)].join(`
`).trim()}function s(u){for(var d=new Array(u.length),c=!0,h=0;h<u.length;++h){var f=u[h],g=f.match(/\d+/);g?g=g[0]:g="",f.charAt(0)===0?d[h]="u"+f.charAt(1)+g:d[h]=f.charAt(0)+g,h>0&&(c=c&&d[h]===d[h-1])}return c?d[0]:d.join("")}function l(u,d){for(var c=d[1].length-Math.abs(u.arrayBlockIndices[0])|0,h=new Array(u.arrayArgs.length),f=new Array(u.arrayArgs.length),g=0;g<u.arrayArgs.length;++g)f[g]=d[2*g],h[g]=d[2*g+1];for(var y=[],m=[],p=[],v=[],b=[],g=0;g<u.arrayArgs.length;++g){u.arrayBlockIndices[g]<0?(p.push(0),v.push(c),y.push(c),m.push(c+u.arrayBlockIndices[g])):(p.push(u.arrayBlockIndices[g]),v.push(u.arrayBlockIndices[g]+c),y.push(0),m.push(u.arrayBlockIndices[g]));for(var x=[],_=0;_<h[g].length;_++)p[g]<=h[g][_]&&h[g][_]<v[g]&&x.push(h[g][_]-p[g]);b.push(x)}for(var A=["SS"],M=["'use strict'"],T=[],_=0;_<c;++_)T.push(["s",_,"=SS[",_,"]"].join(""));for(var g=0;g<u.arrayArgs.length;++g){A.push("a"+g),A.push("t"+g),A.push("p"+g);for(var _=0;_<c;++_)T.push(["t",g,"p",_,"=t",g,"[",p[g]+_,"]"].join(""));for(var _=0;_<Math.abs(u.arrayBlockIndices[g]);++_)T.push(["t",g,"b",_,"=t",g,"[",y[g]+_,"]"].join(""))}for(var g=0;g<u.scalarArgs.length;++g)A.push("Y"+g);if(u.shapeArgs.length>0&&T.push("shape=SS.slice(0)"),u.indexArgs.length>0){for(var C=new Array(c),g=0;g<c;++g)C[g]="0";T.push(["index=[",C.join(","),"]"].join(""))}for(var g=0;g<u.offsetArgs.length;++g){for(var E=u.offsetArgs[g],D=[],_=0;_<E.offset.length;++_)E.offset[_]!==0&&(E.offset[_]===1?D.push(["t",E.array,"p",_].join("")):D.push([E.offset[_],"*t",E.array,"p",_].join("")));D.length===0?T.push("q"+g+"=0"):T.push(["q",g,"=",D.join("+")].join(""))}var I=r([].concat(u.pre.thisVars).concat(u.body.thisVars).concat(u.post.thisVars));T=T.concat(I),T.length>0&&M.push("var "+T.join(","));for(var g=0;g<u.arrayArgs.length;++g)M.push("p"+g+"|=0");u.pre.body.length>3&&M.push(a(u.pre,u,f));var k=a(u.body,u,f),L=o(b);L<c?M.push(i(L,b[0],u,k)):M.push(n(b[0],u,k)),u.post.body.length>3&&M.push(a(u.post,u,f)),u.debug&&console.log("-----Generated cwise routine for ",d,`:
`+M.join(`
`)+`
----------`);var U=[u.funcName||"unnamed","_cwise_loop_",h[0].join("s"),"m",L,s(f)].join(""),W=new Function(["function ",U,"(",A.join(","),"){",M.join(`
`),"} return ",U].join(""));return W()}t.exports=l}),gCe=ha((e,t)=>{var r=mCe();function n(i){var o=["'use strict'","var CACHED={}"],a=[],s=i.funcName+"_cwise_thunk";o.push(["return function ",s,"(",i.shimArgs.join(","),"){"].join(""));for(var l=[],u=[],d=[["array",i.arrayArgs[0],".shape.slice(",Math.max(0,i.arrayBlockIndices[0]),i.arrayBlockIndices[0]<0?","+i.arrayBlockIndices[0]+")":")"].join("")],c=[],h=[],f=0;f<i.arrayArgs.length;++f){var g=i.arrayArgs[f];a.push(["t",g,"=array",g,".dtype,","r",g,"=array",g,".order"].join("")),l.push("t"+g),l.push("r"+g),u.push("t"+g),u.push("r"+g+".join()"),d.push("array"+g+".data"),d.push("array"+g+".stride"),d.push("array"+g+".offset|0"),f>0&&(c.push("array"+i.arrayArgs[0]+".shape.length===array"+g+".shape.length+"+(Math.abs(i.arrayBlockIndices[0])-Math.abs(i.arrayBlockIndices[f]))),h.push("array"+i.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,i.arrayBlockIndices[0])+"]===array"+g+".shape[shapeIndex+"+Math.max(0,i.arrayBlockIndices[f])+"]"))}i.arrayArgs.length>1&&(o.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),o.push("for(var shapeIndex=array"+i.arrayArgs[0]+".shape.length-"+Math.abs(i.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),o.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),o.push("}"));for(var f=0;f<i.scalarArgs.length;++f)d.push("scalar"+i.scalarArgs[f]);a.push(["type=[",u.join(","),"].join()"].join("")),a.push("proc=CACHED[type]"),o.push("var "+a.join(",")),o.push(["if(!proc){","CACHED[type]=proc=compile([",l.join(","),"])}","return proc(",d.join(","),")}"].join("")),i.debug&&console.log(`-----Generated thunk:
`+o.join(`
`)+`
----------`);var y=new Function("compile",o.join(`
`));return y(r.bind(void 0,i))}t.exports=n}),vCe=ha((e,t)=>{var r=gCe();function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(o){var a=new n;a.pre=o.pre,a.body=o.body,a.post=o.post;var s=o.args.slice(0);a.argTypes=s;for(var l=0;l<s.length;++l){var u=s[l];if(u==="array"||typeof u=="object"&&u.blockIndices){if(a.argTypes[l]="array",a.arrayArgs.push(l),a.arrayBlockIndices.push(u.blockIndices?u.blockIndices:0),a.shimArgs.push("array"+l),l<a.pre.args.length&&a.pre.args[l].count>0)throw new Error("cwise: pre() block may not reference array args");if(l<a.post.args.length&&a.post.args[l].count>0)throw new Error("cwise: post() block may not reference array args")}else if(u==="scalar")a.scalarArgs.push(l),a.shimArgs.push("scalar"+l);else if(u==="index"){if(a.indexArgs.push(l),l<a.pre.args.length&&a.pre.args[l].count>0)throw new Error("cwise: pre() block may not reference array index");if(l<a.body.args.length&&a.body.args[l].lvalue)throw new Error("cwise: body() block may not write to array index");if(l<a.post.args.length&&a.post.args[l].count>0)throw new Error("cwise: post() block may not reference array index")}else if(u==="shape"){if(a.shapeArgs.push(l),l<a.pre.args.length&&a.pre.args[l].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(l<a.body.args.length&&a.body.args[l].lvalue)throw new Error("cwise: body() block may not write to array shape");if(l<a.post.args.length&&a.post.args[l].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof u=="object"&&u.offset)a.argTypes[l]="offset",a.offsetArgs.push({array:u.array,offset:u.offset}),a.offsetArgIndex.push(l);else throw new Error("cwise: Unknown argument type "+s[l])}if(a.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(a.pre.args.length>s.length)throw new Error("cwise: Too many arguments in pre() block");if(a.body.args.length>s.length)throw new Error("cwise: Too many arguments in body() block");if(a.post.args.length>s.length)throw new Error("cwise: Too many arguments in post() block");return a.debug=!!o.printCode||!!o.debug,a.funcName=o.funcName||"cwise",a.blockSize=o.blockSize||64,r(a)}t.exports=i}),CM=ha(e=>{var t=vCe(),r={body:"",args:[],thisVars:[],localVars:[]};function n(h){if(!h)return r;for(var f=0;f<h.args.length;++f){var g=h.args[f];f===0?h.args[f]={name:g,lvalue:!0,rvalue:!!h.rvalue,count:h.count||1}:h.args[f]={name:g,lvalue:!1,rvalue:!0,count:1}}return h.thisVars||(h.thisVars=[]),h.localVars||(h.localVars=[]),h}function i(h){return t({args:h.args,pre:n(h.pre),body:n(h.body),post:n(h.proc),funcName:h.funcName})}function o(h){for(var f=[],g=0;g<h.args.length;++g)f.push("a"+g);var y=new Function("P",["return function ",h.funcName,"_ndarrayops(",f.join(","),") {P(",f.join(","),");return a0}"].join(""));return y(i(h))}var a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var h in a){var f=a[h];e[h]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+f+"c"},funcName:h}),e[h+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+f+"=b"},rvalue:!0,funcName:h+"eq"}),e[h+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+f+"s"},funcName:h+"s"}),e[h+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+f+"=s"},rvalue:!0,funcName:h+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var h in s){var f=s[h];e[h]=o({args:["array","array"],body:{args:["a","b"],body:"a="+f+"b"},funcName:h}),e[h+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+f+"a"},rvalue:!0,count:2,funcName:h+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var h in l){var f=l[h];e[h]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+f+"c"},funcName:h}),e[h+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+f+"s"},funcName:h+"s"}),e[h+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+f+"b"},rvalue:!0,count:2,funcName:h+"eq"}),e[h+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+f+"s"},rvalue:!0,count:2,funcName:h+"seq"})}})();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var h=0;h<u.length;++h){var f=u[h];e[f]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:f}),e[f+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"eq"})}})();var d=["max","min","atan2","pow"];(function(){for(var h=0;h<d.length;++h){var f=d[h];e[f]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f}),e[f+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f+"s"}),e[f+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"eq"}),e[f+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"seq"})}})();var c=["atan2","pow"];(function(){for(var h=0;h<c.length;++h){var f=c[h];e[f+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"op"}),e[f+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"ops"}),e[f+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"opeq"}),e[f+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"opseq"})}})(),e.any=t({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=t({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=t({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=t({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=t({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=t({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=t({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}),yCe=ha((e,t)=>{t.exports=function(r,n){for(var i=r.split("."),o=n.split("."),a=0;a<3;a++){var s=Number(i[a]),l=Number(o[a]);if(s>l)return 1;if(l>s)return-1;if(!isNaN(s)&&isNaN(l))return 1;if(isNaN(s)&&!isNaN(l))return-1}return 0}}),h1="149",_l={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bCe=0,r9=1,xCe=2,TV=1,wCe=2,Q_=3,Wu=0,Ao=1,ys=2,Gi=0,Jg=1,n9=2,i9=3,o9=4,_Ce=5,Jy=100,SCe=101,ACe=102,a9=103,s9=104,MCe=200,CCe=201,TCe=202,ECe=203,cne=204,dne=205,PCe=206,DCe=207,OCe=208,RCe=209,ICe=210,LCe=0,BCe=1,NCe=2,i5=3,kCe=4,FCe=5,zCe=6,UCe=7,hne=0,VCe=1,jCe=2,vh=0,HCe=1,GCe=2,WCe=3,qCe=4,XCe=5,fne=300,p0=301,m0=302,o5=303,a5=304,TM=306,dh=1e3,Ei=1001,s5=1002,Cn=1003,l9=1004,FL=1005,Or=1006,YCe=1007,Dx=1008,ua=1009,KCe=1010,JCe=1011,pne=1012,QCe=1013,hh=1014,ka=1015,g0=1016,ZCe=1017,$Ce=1018,Qg=1020,eTe=1021,Ys=1023,tTe=1024,rTe=1025,Zg=1026,v0=1027,nTe=1028,iTe=1029,SD=1030,oTe=1031,mne=1033,zL=33776,UL=33777,VL=33778,jL=33779,u9=35840,c9=35841,d9=35842,h9=35843,aTe=36196,f9=37492,p9=37496,m9=37808,g9=37809,v9=37810,y9=37811,b9=37812,x9=37813,w9=37814,_9=37815,S9=37816,A9=37817,M9=37818,C9=37819,T9=37820,E9=37821,HL=36492,sTe=36283,P9=36284,D9=36285,O9=36286,gne=2200,vne=2201,EV=2202,AD=2300,MD=2301,GL=2302,xb=2400,wb=2401,CD=2402,PV=2500,lTe=2501,rd=3e3,Ar=3001,Uh=3200,yne=3201,uTe=0,cTe=1,Rc="srgb",TD="srgb-linear",WL=7680,dTe=519,l5=35044,hTe=35048,R9="300 es",u5=1035,Vo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let n=0,i=r.length;n<i;n++)r[n].call(this,e);e.target=null}}},Jo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],I9=1234567,SS=Math.PI/180,AA=180/Math.PI;function Xl(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Jo[e&255]+Jo[e>>8&255]+Jo[e>>16&255]+Jo[e>>24&255]+"-"+Jo[t&255]+Jo[t>>8&255]+"-"+Jo[t>>16&15|64]+Jo[t>>24&255]+"-"+Jo[r&63|128]+Jo[r>>8&255]+"-"+Jo[r>>16&255]+Jo[r>>24&255]+Jo[n&255]+Jo[n>>8&255]+Jo[n>>16&255]+Jo[n>>24&255]).toLowerCase()}function zi(e,t,r){return Math.max(t,Math.min(r,e))}function DV(e,t){return(e%t+t)%t}function fTe(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)}function pTe(e,t,r){return e!==t?(r-e)/(t-e):0}function AS(e,t,r){return(1-r)*e+r*t}function mTe(e,t,r,n){return AS(e,t,1-Math.exp(-r*n))}function gTe(e,t=1){return t-Math.abs(DV(e,t*2)-t)}function vTe(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function yTe(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function bTe(e,t){return e+Math.floor(Math.random()*(t-e+1))}function xTe(e,t){return e+Math.random()*(t-e)}function wTe(e){return e*(.5-Math.random())}function _Te(e){e!==void 0&&(I9=e);let t=I9+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function STe(e){return e*SS}function ATe(e){return e*AA}function c5(e){return(e&e-1)===0&&e!==0}function bne(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ED(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function MTe(e,t,r,n,i){let o=Math.cos,a=Math.sin,s=o(r/2),l=a(r/2),u=o((t+n)/2),d=a((t+n)/2),c=o((t-n)/2),h=a((t-n)/2),f=o((n-t)/2),g=a((n-t)/2);switch(i){case"XYX":e.set(s*d,l*c,l*h,s*u);break;case"YZY":e.set(l*h,s*d,l*c,s*u);break;case"ZXZ":e.set(l*c,l*h,s*d,s*u);break;case"XZX":e.set(s*d,l*g,l*f,s*u);break;case"YXY":e.set(l*f,s*d,l*g,s*u);break;case"ZYZ":e.set(l*g,l*f,s*d,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function fh(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Mn(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Ht=Object.freeze({__proto__:null,DEG2RAD:SS,RAD2DEG:AA,ceilPowerOfTwo:bne,clamp:zi,damp:mTe,degToRad:STe,denormalize:fh,euclideanModulo:DV,floorPowerOfTwo:ED,generateUUID:Xl,inverseLerp:pTe,isPowerOfTwo:c5,lerp:AS,mapLinear:fTe,normalize:Mn,pingpong:gTe,radToDeg:ATe,randFloat:xTe,randFloatSpread:wTe,randInt:bTe,seededRandom:_Te,setQuaternionFromProperEuler:MTe,smootherstep:yTe,smoothstep:vTe}),Ae=class{constructor(t=0,r=0){Ae.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let r=this.x,n=this.y,i=t.elements;return this.x=i[0]*r+i[3]*n+i[6],this.y=i[1]*r+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this}clampLength(t,r){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let r=this.x-t.x,n=this.y-t.y;return r*r+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){let n=Math.cos(r),i=Math.sin(r),o=this.x-t.x,a=this.y-t.y;return this.x=o*n-a*i+t.x,this.y=o*i+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Pi=class{constructor(){Pi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,n,i,o,a,s,l){let u=this.elements;return u[0]=e,u[1]=n,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=r,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[3],s=r[6],l=r[1],u=r[4],d=r[7],c=r[2],h=r[5],f=r[8],g=n[0],y=n[3],m=n[6],p=n[1],v=n[4],b=n[7],x=n[2],_=n[5],A=n[8];return i[0]=o*g+a*p+s*x,i[3]=o*y+a*v+s*_,i[6]=o*m+a*b+s*A,i[1]=l*g+u*p+d*x,i[4]=l*y+u*v+d*_,i[7]=l*m+u*b+d*A,i[2]=c*g+h*p+f*x,i[5]=c*y+h*v+f*_,i[8]=c*m+h*b+f*A,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-r*i*u+r*a*s+n*i*l-n*o*s}invert(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],d=u*o-a*l,c=a*s-u*i,h=l*i-o*s,f=t*d+r*c+n*h;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let g=1/f;return e[0]=d*g,e[1]=(n*l-u*r)*g,e[2]=(a*r-n*o)*g,e[3]=c*g,e[4]=(u*t-n*s)*g,e[5]=(n*i-a*t)*g,e[6]=h*g,e[7]=(r*s-l*t)*g,e[8]=(o*t-r*i)*g,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,n,i,o,a){let s=Math.cos(i),l=Math.sin(i);return this.set(r*s,r*l,-r*(s*o+l*a)+o+e,-n*l,n*s,-n*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(qL.makeScale(e,t)),this}rotate(e){return this.premultiply(qL.makeRotation(-e)),this}translate(e,t){return this.premultiply(qL.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},qL=new Pi;function xne(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var CTe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function SE(e,t){return new CTe[e](t)}function PD(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function $g(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function b2(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var XL={[Rc]:{[TD]:$g},[TD]:{[Rc]:b2}},_a={legacyMode:!0,get workingColorSpace(){return TD},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(XL[t]&&XL[t][r]!==void 0){let n=XL[t][r];return e.r=n(e.r),e.g=n(e.g),e.b=n(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},wne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qi={r:0,g:0,b:0},du={h:0,s:0,l:0},AE={h:0,s:0,l:0};function YL(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function ME(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var tr=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Rc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,_a.toWorkingColorSpace(this,t),this}setRGB(e,t,r,n=_a.workingColorSpace){return this.r=e,this.g=t,this.b=r,_a.toWorkingColorSpace(this,n),this}setHSL(e,t,r,n=_a.workingColorSpace){if(e=DV(e,1),t=zi(t,0,1),r=zi(r,0,1),t===0)this.r=this.g=this.b=r;else{let i=r<=.5?r*(1+t):r+t-r*t,o=2*r-i;this.r=YL(o,i,e+1/3),this.g=YL(o,i,e),this.b=YL(o,i,e-1/3)}return _a.toWorkingColorSpace(this,n),this}setStyle(e,t=Rc){function r(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i,o=n[1],a=n[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,_a.toWorkingColorSpace(this,t),r(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,_a.toWorkingColorSpace(this,t),r(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let s=parseFloat(i[1])/360,l=parseFloat(i[2])/100,u=parseFloat(i[3])/100;return r(i[4]),this.setHSL(s,l,u,t)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let i=n[1],o=i.length;if(o===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,_a.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,_a.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Rc){let r=wne[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=$g(e.r),this.g=$g(e.g),this.b=$g(e.b),this}copyLinearToSRGB(e){return this.r=b2(e.r),this.g=b2(e.g),this.b=b2(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Rc){return _a.fromWorkingColorSpace(ME(this,Qi),e),zi(Qi.r*255,0,255)<<16^zi(Qi.g*255,0,255)<<8^zi(Qi.b*255,0,255)<<0}getHexString(e=Rc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=_a.workingColorSpace){_a.fromWorkingColorSpace(ME(this,Qi),t);let r=Qi.r,n=Qi.g,i=Qi.b,o=Math.max(r,n,i),a=Math.min(r,n,i),s,l,u=(a+o)/2;if(a===o)s=0,l=0;else{let d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case r:s=(n-i)/d+(n<i?6:0);break;case n:s=(i-r)/d+2;break;case i:s=(r-n)/d+4;break}s/=6}return e.h=s,e.s=l,e.l=u,e}getRGB(e,t=_a.workingColorSpace){return _a.fromWorkingColorSpace(ME(this,Qi),t),e.r=Qi.r,e.g=Qi.g,e.b=Qi.b,e}getStyle(e=Rc){return _a.fromWorkingColorSpace(ME(this,Qi),e),e!==Rc?`color(${e} ${Qi.r} ${Qi.g} ${Qi.b})`:`rgb(${Qi.r*255|0},${Qi.g*255|0},${Qi.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(du),du.h+=e,du.s+=t,du.l+=r,this.setHSL(du.h,du.s,du.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(du),e.getHSL(AE);let r=AS(du.h,AE.h,t),n=AS(du.s,AE.s,t),i=AS(du.l,AE.l,t);return this.setHSL(r,n,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};tr.NAMES=wne;var fy,_ne=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{fy===void 0&&(fy=PD("canvas")),fy.width=e.width,fy.height=e.height;let r=fy.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=fy}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=PD("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let n=r.getImageData(0,0,e.width,e.height),i=n.data;for(let o=0;o<i.length;o++)i[o]=$g(i[o]/255)*255;return r.putImageData(n,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor($g(t[r]/255)*255):t[r]=$g(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Sne=class{constructor(e=null){this.isSource=!0,this.uuid=Xl(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},n=this.data;if(n!==null){let i;if(Array.isArray(n)){i=[];for(let o=0,a=n.length;o<a;o++)n[o].isDataTexture?i.push(KL(n[o].image)):i.push(KL(n[o]))}else i=KL(n);r.url=i}return t||(e.images[this.uuid]=r),r}};function KL(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?_ne.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var TTe=0,io=class extends Vo{constructor(e=io.DEFAULT_IMAGE,t=io.DEFAULT_MAPPING,r=Ei,n=Ei,i=Or,o=Dx,a=Ys,s=ua,l=io.DEFAULT_ANISOTROPY,u=rd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:TTe++}),this.uuid=Xl(),this.name="",this.source=new Sne(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=n,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Ae(0,0),this.repeat=new Ae(1,1),this.center=new Ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==fne)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case dh:e.x=e.x-Math.floor(e.x);break;case Ei:e.x=e.x<0?0:1;break;case s5:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case dh:e.y=e.y-Math.floor(e.y);break;case Ei:e.y=e.y<0?0:1;break;case s5:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};io.DEFAULT_IMAGE=null;io.DEFAULT_MAPPING=fne;io.DEFAULT_ANISOTROPY=1;var Mr=class{constructor(e=0,t=0,r=0,n=1){Mr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,n,i,o=e.elements,a=o[0],s=o[4],l=o[8],u=o[1],d=o[5],c=o[9],h=o[2],f=o[6],g=o[10];if(Math.abs(s-u)<.01&&Math.abs(l-h)<.01&&Math.abs(c-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+h)<.1&&Math.abs(c+f)<.1&&Math.abs(a+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let m=(a+1)/2,p=(d+1)/2,v=(g+1)/2,b=(s+u)/4,x=(l+h)/4,_=(c+f)/4;return m>p&&m>v?m<.01?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(m),n=b/r,i=x/r):p>v?p<.01?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(p),r=b/n,i=_/n):v<.01?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(v),r=x/i,n=_/i),this.set(r,n,i,t),this}let y=Math.sqrt((f-c)*(f-c)+(l-h)*(l-h)+(u-s)*(u-s));return Math.abs(y)<.001&&(y=1),this.x=(f-c)/y,this.y=(l-h)/y,this.z=(u-s)/y,this.w=Math.acos((a+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},vn=class extends Vo{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Mr(0,0,e,t),this.scissorTest=!1,this.viewport=new Mr(0,0,e,t);let n={width:e,height:t,depth:1};this.texture=new io(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Or,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Sne(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Ane=class extends io{constructor(e=null,t=1,r=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=Cn,this.minFilter=Cn,this.wrapR=Ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},ETe=class extends io{constructor(e=null,t=1,r=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=Cn,this.minFilter=Cn,this.wrapR=Ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},PTe=class extends vn{constructor(e=1,t=1,r=1,n={}){super(e,t,n),this.isWebGLMultipleRenderTargets=!0;let i=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=i.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let n=0,i=this.texture.length;n<i;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},xr=class{constructor(e=0,t=0,r=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=n}static slerpFlat(e,t,r,n,i,o,a){let s=r[n+0],l=r[n+1],u=r[n+2],d=r[n+3],c=i[o+0],h=i[o+1],f=i[o+2],g=i[o+3];if(a===0){e[t+0]=s,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=c,e[t+1]=h,e[t+2]=f,e[t+3]=g;return}if(d!==g||s!==c||l!==h||u!==f){let y=1-a,m=s*c+l*h+u*f+d*g,p=m>=0?1:-1,v=1-m*m;if(v>Number.EPSILON){let x=Math.sqrt(v),_=Math.atan2(x,m*p);y=Math.sin(y*_)/x,a=Math.sin(a*_)/x}let b=a*p;if(s=s*y+c*b,l=l*y+h*b,u=u*y+f*b,d=d*y+g*b,y===1-a){let x=1/Math.sqrt(s*s+l*l+u*u+d*d);s*=x,l*=x,u*=x,d*=x}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,n,i,o){let a=r[n],s=r[n+1],l=r[n+2],u=r[n+3],d=i[o],c=i[o+1],h=i[o+2],f=i[o+3];return e[t]=a*f+u*d+s*h-l*c,e[t+1]=s*f+u*c+l*d-a*h,e[t+2]=l*f+u*h+a*c-s*d,e[t+3]=u*f-a*d-s*c-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let r=e._x,n=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(r/2),u=a(n/2),d=a(i/2),c=s(r/2),h=s(n/2),f=s(i/2);switch(o){case"XYZ":this._x=c*u*d+l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d-c*h*f;break;case"YXZ":this._x=c*u*d+l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d+c*h*f;break;case"ZXY":this._x=c*u*d-l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d-c*h*f;break;case"ZYX":this._x=c*u*d-l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d+c*h*f;break;case"YZX":this._x=c*u*d+l*h*f,this._y=l*h*d+c*u*f,this._z=l*u*f-c*h*d,this._w=l*u*d-c*h*f;break;case"XZY":this._x=c*u*d-l*h*f,this._y=l*h*d-c*u*f,this._z=l*u*f+c*h*d,this._w=l*u*d+c*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],n=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],u=t[6],d=t[10],c=r+a+d;if(c>0){let h=.5/Math.sqrt(c+1);this._w=.25/h,this._x=(u-s)*h,this._y=(i-l)*h,this._z=(o-n)*h}else if(r>a&&r>d){let h=2*Math.sqrt(1+r-a-d);this._w=(u-s)/h,this._x=.25*h,this._y=(n+o)/h,this._z=(i+l)/h}else if(a>d){let h=2*Math.sqrt(1+a-r-d);this._w=(i-l)/h,this._x=(n+o)/h,this._y=.25*h,this._z=(s+u)/h}else{let h=2*Math.sqrt(1+d-r-a);this._w=(o-n)/h,this._x=(i+l)/h,this._y=(s+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zi(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let n=Math.min(1,t/r);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,n=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+o*a+n*l-i*s,this._y=n*u+o*s+i*a-r*l,this._z=i*u+o*l+r*s-n*a,this._w=o*u-r*a-n*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;let s=1-a*a;if(s<=Number.EPSILON){let h=1-t;return this._w=h*o+t*this._w,this._x=h*r+t*this._x,this._y=h*n+t*this._y,this._z=h*i+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,c=Math.sin(t*u)/l;return this._w=o*d+this._w*c,this._x=r*d+this._x*c,this._y=n*d+this._y*c,this._z=i*d+this._z*c,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),n=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(n),r*Math.sin(i),r*Math.cos(i),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},X=class{constructor(t=0,r=0,n=0){X.prototype.isVector3=!0,this.x=t,this.y=r,this.z=n}set(t,r,n){return n===void 0&&(n=this.z),this.x=t,this.y=r,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(L9.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(L9.setFromAxisAngle(t,r))}applyMatrix3(t){let r=this.x,n=this.y,i=this.z,o=t.elements;return this.x=o[0]*r+o[3]*n+o[6]*i,this.y=o[1]*r+o[4]*n+o[7]*i,this.z=o[2]*r+o[5]*n+o[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let r=this.x,n=this.y,i=this.z,o=t.elements,a=1/(o[3]*r+o[7]*n+o[11]*i+o[15]);return this.x=(o[0]*r+o[4]*n+o[8]*i+o[12])*a,this.y=(o[1]*r+o[5]*n+o[9]*i+o[13])*a,this.z=(o[2]*r+o[6]*n+o[10]*i+o[14])*a,this}applyQuaternion(t){let r=this.x,n=this.y,i=this.z,o=t.x,a=t.y,s=t.z,l=t.w,u=l*r+a*i-s*n,d=l*n+s*r-o*i,c=l*i+o*n-a*r,h=-o*r-a*n-s*i;return this.x=u*l+h*-o+d*-s-c*-a,this.y=d*l+h*-a+c*-o-u*-s,this.z=c*l+h*-s+u*-a-d*-o,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let r=this.x,n=this.y,i=this.z,o=t.elements;return this.x=o[0]*r+o[4]*n+o[8]*i,this.y=o[1]*r+o[5]*n+o[9]*i,this.z=o[2]*r+o[6]*n+o[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this}clampLength(t,r){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this.z=t.z+(r.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){let n=t.x,i=t.y,o=t.z,a=r.x,s=r.y,l=r.z;return this.x=i*l-o*s,this.y=o*a-n*l,this.z=n*s-i*a,this}projectOnVector(t){let r=t.lengthSq();if(r===0)return this.set(0,0,0);let n=t.dot(this)/r;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return JL.copy(this).projectOnVector(t),this.sub(JL)}reflect(t){return this.sub(JL.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;let n=this.dot(t)/r;return Math.acos(zi(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let r=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return r*r+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,n){let i=Math.sin(r)*t;return this.x=i*Math.sin(n),this.y=Math.cos(r)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,n){return this.x=t*Math.sin(r),this.y=n,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){let r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){let r=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=n,this.z=i,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,r*4)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,r*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(r),this.y=n*Math.sin(r),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},JL=new X,L9=new xr,Oi=class{constructor(e=new X(1/0,1/0,1/0),t=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){let u=e[s],d=e[s+1],c=e[s+2];u<t&&(t=u),d<r&&(r=d),c<n&&(n=c),u>i&&(i=u),d>o&&(o=d),c>a&&(a=c)}return this.min.set(t,r,n),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){let u=e.getX(s),d=e.getY(s),c=e.getZ(s);u<t&&(t=u),d<r&&(r=d),c<n&&(n=c),u>i&&(i=u),d>o&&(o=d),c>a&&(a=c)}return this.min.set(t,r,n),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Zm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let i=r.attributes.position;for(let o=0,a=i.count;o<a;o++)Zm.fromBufferAttribute(i,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Zm)}else r.boundingBox===null&&r.computeBoundingBox(),QL.copy(r.boundingBox),QL.applyMatrix4(e.matrixWorld),this.union(QL);let n=e.children;for(let i=0,o=n.length;i<o;i++)this.expandByObject(n[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Zm),Zm.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(u_),CE.subVectors(this.max,u_),py.subVectors(e.a,u_),my.subVectors(e.b,u_),gy.subVectors(e.c,u_),Mf.subVectors(my,py),Cf.subVectors(gy,my),$m.subVectors(py,gy);let t=[0,-Mf.z,Mf.y,0,-Cf.z,Cf.y,0,-$m.z,$m.y,Mf.z,0,-Mf.x,Cf.z,0,-Cf.x,$m.z,0,-$m.x,-Mf.y,Mf.x,0,-Cf.y,Cf.x,0,-$m.y,$m.x,0];return!ZL(t,py,my,gy,CE)||(t=[1,0,0,0,1,0,0,0,1],!ZL(t,py,my,gy,CE))?!1:(TE.crossVectors(Mf,Cf),t=[TE.x,TE.y,TE.z],ZL(t,py,my,gy,CE))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Zm.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Zm).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ld[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ld[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ld[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ld[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ld[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ld[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ld[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ld[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ld),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Ld=[new X,new X,new X,new X,new X,new X,new X,new X],Zm=new X,QL=new Oi,py=new X,my=new X,gy=new X,Mf=new X,Cf=new X,$m=new X,u_=new X,CE=new X,TE=new X,eg=new X;function ZL(e,t,r,n,i){for(let o=0,a=e.length-3;o<=a;o+=3){eg.fromArray(e,o);let s=i.x*Math.abs(eg.x)+i.y*Math.abs(eg.y)+i.z*Math.abs(eg.z),l=t.dot(eg),u=r.dot(eg),d=n.dot(eg);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>s)return!1}return!0}var DTe=new Oi,c_=new X,$L=new X,Ts=class{constructor(e=new X,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):DTe.setFromPoints(e).getCenter(r);let n=0;for(let i=0,o=e.length;i<o;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;c_.subVectors(e,this.center);let t=c_.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),n=(r-this.radius)*.5;this.center.addScaledVector(c_,n/r),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):($L.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(c_.copy(e.center).add($L)),this.expandByPoint(c_.copy(e.center).sub($L))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Bd=new X,eB=new X,EE=new X,Tf=new X,tB=new X,PE=new X,rB=new X,f1=class{constructor(e=new X,t=new X(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bd)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Bd.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Bd.copy(this.direction).multiplyScalar(t).add(this.origin),Bd.distanceToSquared(e))}distanceSqToSegment(e,t,r,n){eB.copy(e).add(t).multiplyScalar(.5),EE.copy(t).sub(e).normalize(),Tf.copy(this.origin).sub(eB);let i=e.distanceTo(t)*.5,o=-this.direction.dot(EE),a=Tf.dot(this.direction),s=-Tf.dot(EE),l=Tf.lengthSq(),u=Math.abs(1-o*o),d,c,h,f;if(u>0)if(d=o*s-a,c=o*a-s,f=i*u,d>=0)if(c>=-f)if(c<=f){let g=1/u;d*=g,c*=g,h=d*(d+o*c+2*a)+c*(o*d+c+2*s)+l}else c=i,d=Math.max(0,-(o*c+a)),h=-d*d+c*(c+2*s)+l;else c=-i,d=Math.max(0,-(o*c+a)),h=-d*d+c*(c+2*s)+l;else c<=-f?(d=Math.max(0,-(-o*i+a)),c=d>0?-i:Math.min(Math.max(-i,-s),i),h=-d*d+c*(c+2*s)+l):c<=f?(d=0,c=Math.min(Math.max(-i,-s),i),h=c*(c+2*s)+l):(d=Math.max(0,-(o*i+a)),c=d>0?i:Math.min(Math.max(-i,-s),i),h=-d*d+c*(c+2*s)+l);else c=o>0?-i:i,d=Math.max(0,-(o*c+a)),h=-d*d+c*(c+2*s)+l;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),n&&n.copy(EE).multiplyScalar(c).add(eB),h}intersectSphere(e,t){Bd.subVectors(e.center,this.origin);let r=Bd.dot(this.direction),n=Bd.dot(Bd)-r*r,i=e.radius*e.radius;if(n>i)return null;let o=Math.sqrt(i-n),a=r-o,s=r+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,n,i,o,a,s,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,c=this.origin;return l>=0?(r=(e.min.x-c.x)*l,n=(e.max.x-c.x)*l):(r=(e.max.x-c.x)*l,n=(e.min.x-c.x)*l),u>=0?(i=(e.min.y-c.y)*u,o=(e.max.y-c.y)*u):(i=(e.max.y-c.y)*u,o=(e.min.y-c.y)*u),r>o||i>n||((i>r||isNaN(r))&&(r=i),(o<n||isNaN(n))&&(n=o),d>=0?(a=(e.min.z-c.z)*d,s=(e.max.z-c.z)*d):(a=(e.max.z-c.z)*d,s=(e.min.z-c.z)*d),r>s||a>n)||((a>r||r!==r)&&(r=a),(s<n||n!==n)&&(n=s),n<0)?null:this.at(r>=0?r:n,t)}intersectsBox(e){return this.intersectBox(e,Bd)!==null}intersectTriangle(e,t,r,n,i){tB.subVectors(t,e),PE.subVectors(r,e),rB.crossVectors(tB,PE);let o=this.direction.dot(rB),a;if(o>0){if(n)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Tf.subVectors(this.origin,e);let s=a*this.direction.dot(PE.crossVectors(Tf,PE));if(s<0)return null;let l=a*this.direction.dot(tB.cross(Tf));if(l<0||s+l>o)return null;let u=-a*Tf.dot(rB);return u<0?null:this.at(u/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ft=class{constructor(){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,n,i,o,a,s,l,u,d,c,h,f,g,y){let m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=n,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=l,m[6]=u,m[10]=d,m[14]=c,m[3]=h,m[7]=f,m[11]=g,m[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,n=1/vy.setFromMatrixColumn(e,0).length(),i=1/vy.setFromMatrixColumn(e,1).length(),o=1/vy.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(n),l=Math.sin(n),u=Math.cos(i),d=Math.sin(i);if(e.order==="XYZ"){let c=o*u,h=o*d,f=a*u,g=a*d;t[0]=s*u,t[4]=-s*d,t[8]=l,t[1]=h+f*l,t[5]=c-g*l,t[9]=-a*s,t[2]=g-c*l,t[6]=f+h*l,t[10]=o*s}else if(e.order==="YXZ"){let c=s*u,h=s*d,f=l*u,g=l*d;t[0]=c+g*a,t[4]=f*a-h,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=h*a-f,t[6]=g+c*a,t[10]=o*s}else if(e.order==="ZXY"){let c=s*u,h=s*d,f=l*u,g=l*d;t[0]=c-g*a,t[4]=-o*d,t[8]=f+h*a,t[1]=h+f*a,t[5]=o*u,t[9]=g-c*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if(e.order==="ZYX"){let c=o*u,h=o*d,f=a*u,g=a*d;t[0]=s*u,t[4]=f*l-h,t[8]=c*l+g,t[1]=s*d,t[5]=g*l+c,t[9]=h*l-f,t[2]=-l,t[6]=a*s,t[10]=o*s}else if(e.order==="YZX"){let c=o*s,h=o*l,f=a*s,g=a*l;t[0]=s*u,t[4]=g-c*d,t[8]=f*d+h,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=h*d+f,t[10]=c-g*d}else if(e.order==="XZY"){let c=o*s,h=o*l,f=a*s,g=a*l;t[0]=s*u,t[4]=-d,t[8]=l*u,t[1]=c*d+g,t[5]=o*u,t[9]=h*d-f,t[2]=f*d-h,t[6]=a*u,t[10]=g*d+c}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(OTe,e,RTe)}lookAt(e,t,r){let n=this.elements;return Vs.subVectors(e,t),Vs.lengthSq()===0&&(Vs.z=1),Vs.normalize(),Ef.crossVectors(r,Vs),Ef.lengthSq()===0&&(Math.abs(r.z)===1?Vs.x+=1e-4:Vs.z+=1e-4,Vs.normalize(),Ef.crossVectors(r,Vs)),Ef.normalize(),DE.crossVectors(Vs,Ef),n[0]=Ef.x,n[4]=DE.x,n[8]=Vs.x,n[1]=Ef.y,n[5]=DE.y,n[9]=Vs.y,n[2]=Ef.z,n[6]=DE.z,n[10]=Vs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[4],s=r[8],l=r[12],u=r[1],d=r[5],c=r[9],h=r[13],f=r[2],g=r[6],y=r[10],m=r[14],p=r[3],v=r[7],b=r[11],x=r[15],_=n[0],A=n[4],M=n[8],T=n[12],C=n[1],E=n[5],D=n[9],I=n[13],k=n[2],L=n[6],U=n[10],W=n[14],G=n[3],z=n[7],V=n[11],j=n[15];return i[0]=o*_+a*C+s*k+l*G,i[4]=o*A+a*E+s*L+l*z,i[8]=o*M+a*D+s*U+l*V,i[12]=o*T+a*I+s*W+l*j,i[1]=u*_+d*C+c*k+h*G,i[5]=u*A+d*E+c*L+h*z,i[9]=u*M+d*D+c*U+h*V,i[13]=u*T+d*I+c*W+h*j,i[2]=f*_+g*C+y*k+m*G,i[6]=f*A+g*E+y*L+m*z,i[10]=f*M+g*D+y*U+m*V,i[14]=f*T+g*I+y*W+m*j,i[3]=p*_+v*C+b*k+x*G,i[7]=p*A+v*E+b*L+x*z,i[11]=p*M+v*D+b*U+x*V,i[15]=p*T+v*I+b*W+x*j,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],d=e[6],c=e[10],h=e[14],f=e[3],g=e[7],y=e[11],m=e[15];return f*(+i*s*d-n*l*d-i*a*c+r*l*c+n*a*h-r*s*h)+g*(+t*s*h-t*l*c+i*o*c-n*o*h+n*l*u-i*s*u)+y*(+t*l*d-t*a*h-i*o*d+r*o*h+i*a*u-r*l*u)+m*(-n*a*u-t*s*d+t*a*c+n*o*d-r*o*c+r*s*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],d=e[9],c=e[10],h=e[11],f=e[12],g=e[13],y=e[14],m=e[15],p=d*y*l-g*c*l+g*s*h-a*y*h-d*s*m+a*c*m,v=f*c*l-u*y*l-f*s*h+o*y*h+u*s*m-o*c*m,b=u*g*l-f*d*l+f*a*h-o*g*h-u*a*m+o*d*m,x=f*d*s-u*g*s-f*a*c+o*g*c+u*a*y-o*d*y,_=t*p+r*v+n*b+i*x;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let A=1/_;return e[0]=p*A,e[1]=(g*c*i-d*y*i-g*n*h+r*y*h+d*n*m-r*c*m)*A,e[2]=(a*y*i-g*s*i+g*n*l-r*y*l-a*n*m+r*s*m)*A,e[3]=(d*s*i-a*c*i-d*n*l+r*c*l+a*n*h-r*s*h)*A,e[4]=v*A,e[5]=(u*y*i-f*c*i+f*n*h-t*y*h-u*n*m+t*c*m)*A,e[6]=(f*s*i-o*y*i-f*n*l+t*y*l+o*n*m-t*s*m)*A,e[7]=(o*c*i-u*s*i+u*n*l-t*c*l-o*n*h+t*s*h)*A,e[8]=b*A,e[9]=(f*d*i-u*g*i-f*r*h+t*g*h+u*r*m-t*d*m)*A,e[10]=(o*g*i-f*a*i+f*r*l-t*g*l-o*r*m+t*a*m)*A,e[11]=(u*a*i-o*d*i-u*r*l+t*d*l+o*r*h-t*a*h)*A,e[12]=x*A,e[13]=(u*g*n-f*d*n+f*r*c-t*g*c-u*r*y+t*d*y)*A,e[14]=(f*a*n-o*g*n-f*r*s+t*g*s+o*r*y-t*a*y)*A,e[15]=(o*d*n-u*a*n+u*r*s-t*d*s-o*r*c+t*a*c)*A,this}scale(e){let t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+r,l*a-n*s,l*s+n*a,0,l*a+n*s,u*a+r,u*s-n*o,0,l*s-n*a,u*s+n*o,i*s*s+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,n,i,o){return this.set(1,r,i,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,r){let n=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,u=o+o,d=a+a,c=i*l,h=i*u,f=i*d,g=o*u,y=o*d,m=a*d,p=s*l,v=s*u,b=s*d,x=r.x,_=r.y,A=r.z;return n[0]=(1-(g+m))*x,n[1]=(h+b)*x,n[2]=(f-v)*x,n[3]=0,n[4]=(h-b)*_,n[5]=(1-(c+m))*_,n[6]=(y+p)*_,n[7]=0,n[8]=(f+v)*A,n[9]=(y-p)*A,n[10]=(1-(c+g))*A,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,r){let n=this.elements,i=vy.set(n[0],n[1],n[2]).length(),o=vy.set(n[4],n[5],n[6]).length(),a=vy.set(n[8],n[9],n[10]).length();this.determinant()<0&&(i=-i),e.x=n[12],e.y=n[13],e.z=n[14],hu.copy(this);let s=1/i,l=1/o,u=1/a;return hu.elements[0]*=s,hu.elements[1]*=s,hu.elements[2]*=s,hu.elements[4]*=l,hu.elements[5]*=l,hu.elements[6]*=l,hu.elements[8]*=u,hu.elements[9]*=u,hu.elements[10]*=u,t.setFromRotationMatrix(hu),r.x=i,r.y=o,r.z=a,this}makePerspective(e,t,r,n,i,o){let a=this.elements,s=2*i/(t-e),l=2*i/(r-n),u=(t+e)/(t-e),d=(r+n)/(r-n),c=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,n,i,o){let a=this.elements,s=1/(t-e),l=1/(r-n),u=1/(o-i),d=(t+e)*s,c=(r+n)*l,h=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},vy=new X,hu=new ft,OTe=new X(0,0,0),RTe=new X(1,1,1),Ef=new X,DE=new X,Vs=new X,B9=new ft,N9=new xr,So=class{constructor(e=0,t=0,r=0,n=So.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,n=this._order){return this._x=e,this._y=t,this._z=r,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let n=e.elements,i=n[0],o=n[4],a=n[8],s=n[1],l=n[5],u=n[9],d=n[2],c=n[6],h=n[10];switch(t){case"XYZ":this._y=Math.asin(zi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-zi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-d,i),this._z=0);break;case"ZXY":this._x=Math.asin(zi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-zi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(c,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(zi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-d,i)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-zi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(c,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return B9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(B9,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return N9.setFromEuler(this),this.setFromQuaternion(N9,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};So.DEFAULT_ORDER="XYZ";var OV=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},ITe=0,k9=new X,yy=new xr,Nd=new ft,OE=new X,d_=new X,LTe=new X,BTe=new xr,F9=new X(1,0,0),z9=new X(0,1,0),U9=new X(0,0,1),NTe={type:"added"},V9={type:"removed"},bn=class extends Vo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ITe++}),this.uuid=Xl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bn.DEFAULT_UP.clone();let e=new X,t=new So,r=new xr,n=new X(1,1,1);function i(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(i),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new ft},normalMatrix:{value:new Pi}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new OV,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return yy.setFromAxisAngle(e,t),this.quaternion.multiply(yy),this}rotateOnWorldAxis(e,t){return yy.setFromAxisAngle(e,t),this.quaternion.premultiply(yy),this}rotateX(e){return this.rotateOnAxis(F9,e)}rotateY(e){return this.rotateOnAxis(z9,e)}rotateZ(e){return this.rotateOnAxis(U9,e)}translateOnAxis(e,t){return k9.copy(e).applyQuaternion(this.quaternion),this.position.add(k9.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(F9,e)}translateY(e){return this.translateOnAxis(z9,e)}translateZ(e){return this.translateOnAxis(U9,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Nd.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?OE.copy(e):OE.set(e,t,r);let n=this.parent;this.updateWorldMatrix(!0,!1),d_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Nd.lookAt(d_,OE,this.up):Nd.lookAt(OE,d_,this.up),this.quaternion.setFromRotationMatrix(Nd),n&&(Nd.extractRotation(n.matrixWorld),yy.setFromRotationMatrix(Nd),this.quaternion.premultiply(yy.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(NTe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(V9)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(V9)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Nd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Nd.multiply(e.parent.matrixWorld)),e.applyMatrix4(Nd),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,n=this.children.length;r<n;r++){let i=this.children[r].getObjectByProperty(e,t);if(i!==void 0)return i}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let n=0,i=this.children.length;n<i;n++){let o=this.children[n].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(d_,e,LTe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(d_,BTe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,n=t.length;r<n;r++){let i=t[r];(i.matrixWorldAutoUpdate===!0||e===!0)&&i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let n=this.children;for(let i=0,o=n.length;i<o;i++){let a=n[i];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function i(a,s){return a[s.uuid]===void 0&&(a[s.uuid]=s.toJSON(e)),s.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let s=a.shapes;if(Array.isArray(s))for(let l=0,u=s.length;l<u;l++){let d=s[l];i(e.shapes,d)}else i(e.shapes,s)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(i(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let s=0,l=this.material.length;s<l;s++)a.push(i(e.materials,this.material[s]));n.material=a}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(let a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let a=0;a<this.animations.length;a++){let s=this.animations[a];n.animations.push(i(e.animations,s))}}if(t){let a=o(e.geometries),s=o(e.materials),l=o(e.textures),u=o(e.images),d=o(e.shapes),c=o(e.skeletons),h=o(e.animations),f=o(e.nodes);a.length>0&&(r.geometries=a),s.length>0&&(r.materials=s),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),c.length>0&&(r.skeletons=c),h.length>0&&(r.animations=h),f.length>0&&(r.nodes=f)}return r.object=n,r;function o(a){let s=[];for(let l in a){let u=a[l];delete u.metadata,s.push(u)}return s}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let n=e.children[r];this.add(n.clone())}return this}};bn.DEFAULT_UP=new X(0,1,0);bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var fu=new X,kd=new X,nB=new X,Fd=new X,by=new X,xy=new X,j9=new X,iB=new X,oB=new X,aB=new X,ra=class{constructor(e=new X,t=new X,r=new X){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,n){n.subVectors(r,t),fu.subVectors(e,t),n.cross(fu);let i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}static getBarycoord(e,t,r,n,i){fu.subVectors(n,t),kd.subVectors(r,t),nB.subVectors(e,t);let o=fu.dot(fu),a=fu.dot(kd),s=fu.dot(nB),l=kd.dot(kd),u=kd.dot(nB),d=o*l-a*a;if(d===0)return i.set(-2,-1,-1);let c=1/d,h=(l*s-a*u)*c,f=(o*u-a*s)*c;return i.set(1-h-f,f,h)}static containsPoint(e,t,r,n){return this.getBarycoord(e,t,r,n,Fd),Fd.x>=0&&Fd.y>=0&&Fd.x+Fd.y<=1}static getUV(e,t,r,n,i,o,a,s){return this.getBarycoord(e,t,r,n,Fd),s.set(0,0),s.addScaledVector(i,Fd.x),s.addScaledVector(o,Fd.y),s.addScaledVector(a,Fd.z),s}static isFrontFacing(e,t,r,n){return fu.subVectors(r,t),kd.subVectors(e,t),fu.cross(kd).dot(n)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,r,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fu.subVectors(this.c,this.b),kd.subVectors(this.a,this.b),fu.cross(kd).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ra.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ra.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,n,i){return ra.getUV(e,this.a,this.b,this.c,t,r,n,i)}containsPoint(e){return ra.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ra.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,n=this.b,i=this.c,o,a;by.subVectors(n,r),xy.subVectors(i,r),iB.subVectors(e,r);let s=by.dot(iB),l=xy.dot(iB);if(s<=0&&l<=0)return t.copy(r);oB.subVectors(e,n);let u=by.dot(oB),d=xy.dot(oB);if(u>=0&&d<=u)return t.copy(n);let c=s*d-u*l;if(c<=0&&s>=0&&u<=0)return o=s/(s-u),t.copy(r).addScaledVector(by,o);aB.subVectors(e,i);let h=by.dot(aB),f=xy.dot(aB);if(f>=0&&h<=f)return t.copy(i);let g=h*l-s*f;if(g<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(r).addScaledVector(xy,a);let y=u*f-h*d;if(y<=0&&d-u>=0&&h-f>=0)return j9.subVectors(i,n),a=(d-u)/(d-u+(h-f)),t.copy(n).addScaledVector(j9,a);let m=1/(y+g+c);return o=g*m,a=c*m,t.copy(r).addScaledVector(by,o).addScaledVector(xy,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},kTe=0,EM=class extends Vo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kTe++}),this.uuid=Xl(),this.name="",this.type="Material",this.blending=Jg,this.side=Wu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=cne,this.blendDst=dne,this.blendEquation=Jy,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=i5,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dTe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=WL,this.stencilZFail=WL,this.stencilZPass=WL,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let n=this[t];if(n===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Jg&&(r.blending=this.blending),this.side!==Wu&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function n(i){let o=[];for(let a in i){let s=i[a];delete s.metadata,o.push(s)}return o}if(t){let i=n(e.textures),o=n(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let n=t.length;r=new Array(n);for(let i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},PM=class extends EM{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hne,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Bi=new X,RE=new Ae,fr=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=l5,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)RE.fromBufferAttribute(this,t),RE.applyMatrix3(e),this.setXY(t,RE.x,RE.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix3(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix4(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Bi.fromBufferAttribute(this,t),Bi.applyNormalMatrix(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Bi.fromBufferAttribute(this,t),Bi.transformDirection(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=fh(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=fh(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=fh(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=fh(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,n){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),n=Mn(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this}setXYZW(e,t,r,n,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),n=Mn(n,this.array),i=Mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==l5&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},Mne=class extends fr{constructor(e,t,r){super(new Uint16Array(e),t,r)}},Wb=class extends fr{constructor(e,t,r){super(new Uint32Array(e),t,r)}},Rt=class extends fr{constructor(e,t,r){super(new Float32Array(e),t,r)}},FTe=0,Sl=new ft,sB=new bn,wy=new X,js=new Oi,h_=new Oi,vo=new X,Jt=class extends Vo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:FTe++}),this.uuid=Xl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xne(e)?Wb:Mne)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let i=new Pi().getNormalMatrix(e);r.applyNormalMatrix(i),r.needsUpdate=!0}let n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Sl.makeRotationFromQuaternion(e),this.applyMatrix4(Sl),this}rotateX(e){return Sl.makeRotationX(e),this.applyMatrix4(Sl),this}rotateY(e){return Sl.makeRotationY(e),this.applyMatrix4(Sl),this}rotateZ(e){return Sl.makeRotationZ(e),this.applyMatrix4(Sl),this}translate(e,t,r){return Sl.makeTranslation(e,t,r),this.applyMatrix4(Sl),this}scale(e,t,r){return Sl.makeScale(e,t,r),this.applyMatrix4(Sl),this}lookAt(e){return sB.lookAt(e),sB.updateMatrix(),this.applyMatrix4(sB.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wy).negate(),this.translate(wy.x,wy.y,wy.z),this}setFromPoints(e){let t=[];for(let r=0,n=e.length;r<n;r++){let i=e[r];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Rt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Oi);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,n=t.length;r<n;r++){let i=t[r];js.setFromBufferAttribute(i),this.morphTargetsRelative?(vo.addVectors(this.boundingBox.min,js.min),this.boundingBox.expandByPoint(vo),vo.addVectors(this.boundingBox.max,js.max),this.boundingBox.expandByPoint(vo)):(this.boundingBox.expandByPoint(js.min),this.boundingBox.expandByPoint(js.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ts);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new X,1/0);return}if(e){let r=this.boundingSphere.center;if(js.setFromBufferAttribute(e),t)for(let i=0,o=t.length;i<o;i++){let a=t[i];h_.setFromBufferAttribute(a),this.morphTargetsRelative?(vo.addVectors(js.min,h_.min),js.expandByPoint(vo),vo.addVectors(js.max,h_.max),js.expandByPoint(vo)):(js.expandByPoint(h_.min),js.expandByPoint(h_.max))}js.getCenter(r);let n=0;for(let i=0,o=e.count;i<o;i++)vo.fromBufferAttribute(e,i),n=Math.max(n,r.distanceToSquared(vo));if(t)for(let i=0,o=t.length;i<o;i++){let a=t[i],s=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)vo.fromBufferAttribute(a,l),s&&(wy.fromBufferAttribute(e,l),vo.add(wy)),n=Math.max(n,r.distanceToSquared(vo))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,n=t.position.array,i=t.normal.array,o=t.uv.array,a=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fr(new Float32Array(4*a),4));let s=this.getAttribute("tangent").array,l=[],u=[];for(let C=0;C<a;C++)l[C]=new X,u[C]=new X;let d=new X,c=new X,h=new X,f=new Ae,g=new Ae,y=new Ae,m=new X,p=new X;function v(C,E,D){d.fromArray(n,C*3),c.fromArray(n,E*3),h.fromArray(n,D*3),f.fromArray(o,C*2),g.fromArray(o,E*2),y.fromArray(o,D*2),c.sub(d),h.sub(d),g.sub(f),y.sub(f);let I=1/(g.x*y.y-y.x*g.y);!isFinite(I)||(m.copy(c).multiplyScalar(y.y).addScaledVector(h,-g.y).multiplyScalar(I),p.copy(h).multiplyScalar(g.x).addScaledVector(c,-y.x).multiplyScalar(I),l[C].add(m),l[E].add(m),l[D].add(m),u[C].add(p),u[E].add(p),u[D].add(p))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let C=0,E=b.length;C<E;++C){let D=b[C],I=D.start,k=D.count;for(let L=I,U=I+k;L<U;L+=3)v(r[L+0],r[L+1],r[L+2])}let x=new X,_=new X,A=new X,M=new X;function T(C){A.fromArray(i,C*3),M.copy(A);let E=l[C];x.copy(E),x.sub(A.multiplyScalar(A.dot(E))).normalize(),_.crossVectors(M,E);let D=_.dot(u[C])<0?-1:1;s[C*4]=x.x,s[C*4+1]=x.y,s[C*4+2]=x.z,s[C*4+3]=D}for(let C=0,E=b.length;C<E;++C){let D=b[C],I=D.start,k=D.count;for(let L=I,U=I+k;L<U;L+=3)T(r[L+0]),T(r[L+1]),T(r[L+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new fr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let c=0,h=r.count;c<h;c++)r.setXYZ(c,0,0,0);let n=new X,i=new X,o=new X,a=new X,s=new X,l=new X,u=new X,d=new X;if(e)for(let c=0,h=e.count;c<h;c+=3){let f=e.getX(c+0),g=e.getX(c+1),y=e.getX(c+2);n.fromBufferAttribute(t,f),i.fromBufferAttribute(t,g),o.fromBufferAttribute(t,y),u.subVectors(o,i),d.subVectors(n,i),u.cross(d),a.fromBufferAttribute(r,f),s.fromBufferAttribute(r,g),l.fromBufferAttribute(r,y),a.add(u),s.add(u),l.add(u),r.setXYZ(f,a.x,a.y,a.z),r.setXYZ(g,s.x,s.y,s.z),r.setXYZ(y,l.x,l.y,l.z)}else for(let c=0,h=t.count;c<h;c+=3)n.fromBufferAttribute(t,c+0),i.fromBufferAttribute(t,c+1),o.fromBufferAttribute(t,c+2),u.subVectors(o,i),d.subVectors(n,i),u.cross(d),r.setXYZ(c+0,u.x,u.y,u.z),r.setXYZ(c+1,u.x,u.y,u.z),r.setXYZ(c+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)vo.fromBufferAttribute(e,t),vo.normalize(),e.setXYZ(t,vo.x,vo.y,vo.z)}toNonIndexed(){function e(a,s){let l=a.array,u=a.itemSize,d=a.normalized,c=new l.constructor(s.length*u),h=0,f=0;for(let g=0,y=s.length;g<y;g++){a.isInterleavedBufferAttribute?h=s[g]*a.data.stride+a.offset:h=s[g]*u;for(let m=0;m<u;m++)c[f++]=l[h++]}return new fr(c,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Jt,r=this.index.array,n=this.attributes;for(let a in n){let s=n[a],l=e(s,r);t.setAttribute(a,l)}let i=this.morphAttributes;for(let a in i){let s=[],l=i[a];for(let u=0,d=l.length;u<d;u++){let c=l[u],h=e(c,r);s.push(h)}t.morphAttributes[a]=s}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,s=o.length;a<s;a++){let l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let s=this.parameters;for(let l in s)s[l]!==void 0&&(e[l]=s[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let s in r){let l=r[s];e.data.attributes[s]=l.toJSON(e.data)}let n={},i=!1;for(let s in this.morphAttributes){let l=this.morphAttributes[s],u=[];for(let d=0,c=l.length;d<c;d++){let h=l[d];u.push(h.toJSON(e.data))}u.length>0&&(n[s]=u,i=!0)}i&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let n=e.attributes;for(let l in n){let u=n[l];this.setAttribute(l,u.clone(t))}let i=e.morphAttributes;for(let l in i){let u=[],d=i[l];for(let c=0,h=d.length;c<h;c++)u.push(d[c].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,u=o.length;l<u;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let s=e.boundingSphere;return s!==null&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},H9=new ft,_y=new f1,lB=new Ts,f_=new X,p_=new X,m_=new X,uB=new X,IE=new X,LE=new Ae,BE=new Ae,NE=new Ae,cB=new X,kE=new X,Fa=class extends bn{constructor(t=new Jt,r=new PM){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let n=t[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=n.length;i<o;i++){let a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(t,r){let n=this.geometry,i=n.attributes.position,o=n.morphAttributes.position,a=n.morphTargetsRelative;r.fromBufferAttribute(i,t);let s=this.morphTargetInfluences;if(o&&s){IE.set(0,0,0);for(let l=0,u=o.length;l<u;l++){let d=s[l],c=o[l];d!==0&&(uB.fromBufferAttribute(c,t),a?IE.addScaledVector(uB,d):IE.addScaledVector(uB.sub(r),d))}r.add(IE)}return this.isSkinnedMesh&&this.boneTransform(t,r),r}raycast(t,r){let n=this.geometry,i=this.material,o=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),lB.copy(n.boundingSphere),lB.applyMatrix4(o),t.ray.intersectsSphere(lB)===!1)||(H9.copy(o).invert(),_y.copy(t.ray).applyMatrix4(H9),n.boundingBox!==null&&_y.intersectsBox(n.boundingBox)===!1))return;let a,s=n.index,l=n.attributes.position,u=n.attributes.uv,d=n.attributes.uv2,c=n.groups,h=n.drawRange;if(s!==null)if(Array.isArray(i))for(let f=0,g=c.length;f<g;f++){let y=c[f],m=i[y.materialIndex],p=Math.max(y.start,h.start),v=Math.min(s.count,Math.min(y.start+y.count,h.start+h.count));for(let b=p,x=v;b<x;b+=3){let _=s.getX(b),A=s.getX(b+1),M=s.getX(b+2);a=FE(this,m,t,_y,u,d,_,A,M),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=y.materialIndex,r.push(a))}}else{let f=Math.max(0,h.start),g=Math.min(s.count,h.start+h.count);for(let y=f,m=g;y<m;y+=3){let p=s.getX(y),v=s.getX(y+1),b=s.getX(y+2);a=FE(this,i,t,_y,u,d,p,v,b),a&&(a.faceIndex=Math.floor(y/3),r.push(a))}}else if(l!==void 0)if(Array.isArray(i))for(let f=0,g=c.length;f<g;f++){let y=c[f],m=i[y.materialIndex],p=Math.max(y.start,h.start),v=Math.min(l.count,Math.min(y.start+y.count,h.start+h.count));for(let b=p,x=v;b<x;b+=3){let _=b,A=b+1,M=b+2;a=FE(this,m,t,_y,u,d,_,A,M),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=y.materialIndex,r.push(a))}}else{let f=Math.max(0,h.start),g=Math.min(l.count,h.start+h.count);for(let y=f,m=g;y<m;y+=3){let p=y,v=y+1,b=y+2;a=FE(this,i,t,_y,u,d,p,v,b),a&&(a.faceIndex=Math.floor(y/3),r.push(a))}}}};function zTe(e,t,r,n,i,o,a,s){let l;if(t.side===Ao?l=n.intersectTriangle(a,o,i,!0,s):l=n.intersectTriangle(i,o,a,t.side===Wu,s),l===null)return null;kE.copy(s),kE.applyMatrix4(e.matrixWorld);let u=r.ray.origin.distanceTo(kE);return u<r.near||u>r.far?null:{distance:u,point:kE.clone(),object:e}}function FE(e,t,r,n,i,o,a,s,l){e.getVertexPosition(a,f_),e.getVertexPosition(s,p_),e.getVertexPosition(l,m_);let u=zTe(e,t,r,n,f_,p_,m_,cB);if(u){i&&(LE.fromBufferAttribute(i,a),BE.fromBufferAttribute(i,s),NE.fromBufferAttribute(i,l),u.uv=ra.getUV(cB,f_,p_,m_,LE,BE,NE,new Ae)),o&&(LE.fromBufferAttribute(o,a),BE.fromBufferAttribute(o,s),NE.fromBufferAttribute(o,l),u.uv2=ra.getUV(cB,f_,p_,m_,LE,BE,NE,new Ae));let d={a,b:s,c:l,normal:new X,materialIndex:0};ra.getNormal(f_,p_,m_,d.normal),u.face=d}return u}var nd=class extends Jt{constructor(e=1,t=1,r=1,n=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o};let a=this;n=Math.floor(n),i=Math.floor(i),o=Math.floor(o);let s=[],l=[],u=[],d=[],c=0,h=0;f("z","y","x",-1,-1,r,t,e,o,i,0),f("z","y","x",1,-1,r,t,-e,o,i,1),f("x","z","y",1,1,e,r,t,n,o,2),f("x","z","y",1,-1,e,r,-t,n,o,3),f("x","y","z",1,-1,e,t,r,n,i,4),f("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(s),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(u,3)),this.setAttribute("uv",new Rt(d,2));function f(g,y,m,p,v,b,x,_,A,M,T){let C=b/A,E=x/M,D=b/2,I=x/2,k=_/2,L=A+1,U=M+1,W=0,G=0,z=new X;for(let V=0;V<U;V++){let j=V*E-I;for(let H=0;H<L;H++){let Y=H*C-D;z[g]=Y*p,z[y]=j*v,z[m]=k,l.push(z.x,z.y,z.z),z[g]=0,z[y]=0,z[m]=_>0?1:-1,u.push(z.x,z.y,z.z),d.push(H/A),d.push(1-V/M),W+=1}}for(let V=0;V<M;V++)for(let j=0;j<A;j++){let H=c+j+L*V,Y=c+j+L*(V+1),Q=c+(j+1)+L*(V+1),$=c+(j+1)+L*V;s.push(H,Y,$),s.push(Y,Q,$),G+=6}a.addGroup(h,G,T),h+=G,c+=W}}static fromJSON(e){return new nd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Ox(e){let t={};for(let r in e){t[r]={};for(let n in e[r]){let i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}}return t}function Ta(e){let t={};for(let r=0;r<e.length;r++){let n=Ox(e[r]);for(let i in n)t[i]=n[i]}return t}function UTe(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}function Cne(e){return e.getRenderTarget()===null&&e.outputEncoding===Ar?Rc:TD}var p1={clone:Ox,merge:Ta},VTe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,jTe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,An=class extends EM{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=VTe,this.fragmentShader=jTe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ox(e.uniforms),this.uniformsGroups=UTe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let n in this.uniforms){let i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let n in this.extensions)this.extensions[n]===!0&&(r[n]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},m1=class extends bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ea=class extends m1{constructor(t=50,r=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let r=.5*this.getFilmHeight()/t;this.fov=AA*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(SS*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return AA*2*Math.atan(Math.tan(SS*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,r,n,i,o,a){this.aspect=t/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,r=t*Math.tan(SS*.5*this.fov)/this.zoom,n=2*r,i=this.aspect*n,o=-.5*i,a=this.view;if(this.view!==null&&this.view.enabled){let l=a.fullWidth,u=a.fullHeight;o+=a.offsetX*i/l,r-=a.offsetY*n/u,i*=a.width/l,n*=a.height/u}let s=this.filmOffset;s!==0&&(o+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,r,r-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}},Sy=-90,Ay=1,HTe=class extends bn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;let n=new ea(Sy,Ay,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);let i=new ea(Sy,Ay,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);let o=new ea(Sy,Ay,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);let a=new ea(Sy,Ay,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);let s=new ea(Sy,Ay,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);let l=new ea(Sy,Ay,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[n,i,o,a,s,l]=this.children,u=e.getRenderTarget(),d=e.toneMapping,c=e.xr.enabled;e.toneMapping=vh,e.xr.enabled=!1;let h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,n),e.setRenderTarget(r,1),e.render(t,i),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,s),r.texture.generateMipmaps=h,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=c,r.texture.needsPMREMUpdate=!0}},RV=class extends io{constructor(e,t,r,n,i,o,a,s,l,u){e=e!==void 0?e:[],t=t!==void 0?t:p0,super(e,t,r,n,i,o,a,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},GTe=class extends vn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},n=[r,r,r,r,r,r];this.texture=new RV(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Or}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new nd(5,5,5),i=new An({name:"CubemapFromEquirect",uniforms:Ox(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ao,blending:Gi});i.uniforms.tEquirect.value=t;let o=new Fa(n,i),a=t.minFilter;return t.minFilter===Dx&&(t.minFilter=Or),new HTe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,n){let i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,n);e.setRenderTarget(i)}},dB=new X,WTe=new X,qTe=new Pi,qs=class{constructor(t=new X(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,n,i){return this.normal.set(t,r,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,n){let i=dB.subVectors(n,r).cross(WTe.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,r){let n=t.delta(dB),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?r.copy(t.start):null;let o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:r.copy(n).multiplyScalar(o).add(t.start)}intersectsLine(t){let r=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return r<0&&n>0||n<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){let n=r||qTe.getNormalMatrix(t),i=this.coplanarPoint(dB).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},My=new Ts,zE=new X,IV=class{constructor(e=new qs,t=new qs,r=new qs,n=new qs,i=new qs,o=new qs){this.planes=[e,t,r,n,i,o]}set(e,t,r,n,i,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=r[5],u=r[6],d=r[7],c=r[8],h=r[9],f=r[10],g=r[11],y=r[12],m=r[13],p=r[14],v=r[15];return t[0].setComponents(a-n,d-s,g-c,v-y).normalize(),t[1].setComponents(a+n,d+s,g+c,v+y).normalize(),t[2].setComponents(a+i,d+l,g+h,v+m).normalize(),t[3].setComponents(a-i,d-l,g-h,v-m).normalize(),t[4].setComponents(a-o,d-u,g-f,v-p).normalize(),t[5].setComponents(a+o,d+u,g+f,v+p).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),My.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(My)}intersectsSprite(e){return My.center.set(0,0,0),My.radius=.7071067811865476,My.applyMatrix4(e.matrixWorld),this.intersectsSphere(My)}intersectsSphere(e){let t=this.planes,r=e.center,n=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(r)<n)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let n=t[r];if(zE.x=n.normal.x>0?e.max.x:e.min.x,zE.y=n.normal.y>0?e.max.y:e.min.y,zE.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(zE)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Tne(){let e=null,t=!1,r=null,n=null;function i(o,a){r(o,a),n=e.requestAnimationFrame(i)}return{start:function(){t!==!0&&r!==null&&(n=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){r=o},setContext:function(o){e=o}}}function XTe(e,t){let r=t.isWebGL2,n=new WeakMap;function i(u,d){let c=u.array,h=u.usage,f=e.createBuffer();e.bindBuffer(d,f),e.bufferData(d,c,h),u.onUploadCallback();let g;if(c instanceof Float32Array)g=5126;else if(c instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(r)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(c instanceof Int16Array)g=5122;else if(c instanceof Uint32Array)g=5125;else if(c instanceof Int32Array)g=5124;else if(c instanceof Int8Array)g=5120;else if(c instanceof Uint8Array)g=5121;else if(c instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:g,bytesPerElement:c.BYTES_PER_ELEMENT,version:u.version}}function o(u,d,c){let h=d.array,f=d.updateRange;e.bindBuffer(c,u),f.count===-1?e.bufferSubData(c,0,h):(r?e.bufferSubData(c,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):e.bufferSubData(c,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),d.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);let d=n.get(u);d&&(e.deleteBuffer(d.buffer),n.delete(u))}function l(u,d){if(u.isGLBufferAttribute){let h=n.get(u);(!h||h.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let c=n.get(u);c===void 0?n.set(u,i(u,d)):c.version<u.version&&(o(c.buffer,u,d),c.version=u.version)}return{get:a,remove:s,update:l}}var jR=class extends Jt{constructor(e=1,t=1,r=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};let i=e/2,o=t/2,a=Math.floor(r),s=Math.floor(n),l=a+1,u=s+1,d=e/a,c=t/s,h=[],f=[],g=[],y=[];for(let m=0;m<u;m++){let p=m*c-o;for(let v=0;v<l;v++){let b=v*d-i;f.push(b,-p,0),g.push(0,0,1),y.push(v/a),y.push(1-m/s)}}for(let m=0;m<s;m++)for(let p=0;p<a;p++){let v=p+l*m,b=p+l*(m+1),x=p+1+l*(m+1),_=p+1+l*m;h.push(v,b,_),h.push(b,x,_)}this.setIndex(h),this.setAttribute("position",new Rt(f,3)),this.setAttribute("normal",new Rt(g,3)),this.setAttribute("uv",new Rt(y,2))}static fromJSON(e){return new jR(e.width,e.height,e.widthSegments,e.heightSegments)}},YTe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,KTe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,JTe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,QTe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ZTe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$Te=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,eEe="vec3 transformed = vec3( position );",tEe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,rEe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,nEe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,iEe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,oEe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,aEe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sEe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,lEe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,uEe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,cEe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,dEe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,hEe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,fEe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,pEe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,mEe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,gEe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vEe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,yEe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,bEe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,xEe="gl_FragColor = linearToOutputTexel( gl_FragColor );",wEe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,_Ee=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,SEe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,AEe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,MEe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,CEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,TEe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,EEe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,PEe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,DEe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,OEe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,REe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,IEe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,LEe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,BEe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,NEe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,kEe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,FEe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zEe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,UEe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,VEe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,jEe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,HEe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,GEe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,WEe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qEe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,XEe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,YEe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KEe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,JEe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,QEe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ZEe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$Ee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ePe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tPe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rPe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,nPe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,iPe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,oPe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,aPe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,sPe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,lPe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,uPe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cPe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dPe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,hPe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,fPe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,pPe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,mPe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,gPe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,vPe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,yPe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,bPe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,xPe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,wPe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_Pe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,SPe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,APe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,MPe=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,CPe=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,TPe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,EPe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,PPe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,DPe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,OPe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,RPe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IPe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,LPe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,BPe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,NPe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,kPe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,FPe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,zPe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,UPe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,VPe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,jPe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,HPe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,GPe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,WPe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,qPe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,XPe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,YPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KPe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QPe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ZPe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$Pe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,e2e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,t2e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,r2e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,n2e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,i2e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,o2e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,a2e=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,s2e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l2e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u2e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c2e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,d2e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h2e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,f2e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,p2e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m2e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g2e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,v2e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y2e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,b2e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x2e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,w2e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_2e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S2e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,A2e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,M2e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Cr={alphamap_fragment:YTe,alphamap_pars_fragment:KTe,alphatest_fragment:JTe,alphatest_pars_fragment:QTe,aomap_fragment:ZTe,aomap_pars_fragment:$Te,begin_vertex:eEe,beginnormal_vertex:tEe,bsdfs:rEe,iridescence_fragment:nEe,bumpmap_pars_fragment:iEe,clipping_planes_fragment:oEe,clipping_planes_pars_fragment:aEe,clipping_planes_pars_vertex:sEe,clipping_planes_vertex:lEe,color_fragment:uEe,color_pars_fragment:cEe,color_pars_vertex:dEe,color_vertex:hEe,common:fEe,cube_uv_reflection_fragment:pEe,defaultnormal_vertex:mEe,displacementmap_pars_vertex:gEe,displacementmap_vertex:vEe,emissivemap_fragment:yEe,emissivemap_pars_fragment:bEe,encodings_fragment:xEe,encodings_pars_fragment:wEe,envmap_fragment:_Ee,envmap_common_pars_fragment:SEe,envmap_pars_fragment:AEe,envmap_pars_vertex:MEe,envmap_physical_pars_fragment:kEe,envmap_vertex:CEe,fog_vertex:TEe,fog_pars_vertex:EEe,fog_fragment:PEe,fog_pars_fragment:DEe,gradientmap_pars_fragment:OEe,lightmap_fragment:REe,lightmap_pars_fragment:IEe,lights_lambert_fragment:LEe,lights_lambert_pars_fragment:BEe,lights_pars_begin:NEe,lights_toon_fragment:FEe,lights_toon_pars_fragment:zEe,lights_phong_fragment:UEe,lights_phong_pars_fragment:VEe,lights_physical_fragment:jEe,lights_physical_pars_fragment:HEe,lights_fragment_begin:GEe,lights_fragment_maps:WEe,lights_fragment_end:qEe,logdepthbuf_fragment:XEe,logdepthbuf_pars_fragment:YEe,logdepthbuf_pars_vertex:KEe,logdepthbuf_vertex:JEe,map_fragment:QEe,map_pars_fragment:ZEe,map_particle_fragment:$Ee,map_particle_pars_fragment:ePe,metalnessmap_fragment:tPe,metalnessmap_pars_fragment:rPe,morphcolor_vertex:nPe,morphnormal_vertex:iPe,morphtarget_pars_vertex:oPe,morphtarget_vertex:aPe,normal_fragment_begin:sPe,normal_fragment_maps:lPe,normal_pars_fragment:uPe,normal_pars_vertex:cPe,normal_vertex:dPe,normalmap_pars_fragment:hPe,clearcoat_normal_fragment_begin:fPe,clearcoat_normal_fragment_maps:pPe,clearcoat_pars_fragment:mPe,iridescence_pars_fragment:gPe,output_fragment:vPe,packing:yPe,premultiplied_alpha_fragment:bPe,project_vertex:xPe,dithering_fragment:wPe,dithering_pars_fragment:_Pe,roughnessmap_fragment:SPe,roughnessmap_pars_fragment:APe,shadowmap_pars_fragment:MPe,shadowmap_pars_vertex:CPe,shadowmap_vertex:TPe,shadowmask_pars_fragment:EPe,skinbase_vertex:PPe,skinning_pars_vertex:DPe,skinning_vertex:OPe,skinnormal_vertex:RPe,specularmap_fragment:IPe,specularmap_pars_fragment:LPe,tonemapping_fragment:BPe,tonemapping_pars_fragment:NPe,transmission_fragment:kPe,transmission_pars_fragment:FPe,uv_pars_fragment:zPe,uv_pars_vertex:UPe,uv_vertex:VPe,uv2_pars_fragment:jPe,uv2_pars_vertex:HPe,uv2_vertex:GPe,worldpos_vertex:WPe,background_vert:qPe,background_frag:XPe,backgroundCube_vert:YPe,backgroundCube_frag:KPe,cube_vert:JPe,cube_frag:QPe,depth_vert:ZPe,depth_frag:$Pe,distanceRGBA_vert:e2e,distanceRGBA_frag:t2e,equirect_vert:r2e,equirect_frag:n2e,linedashed_vert:i2e,linedashed_frag:o2e,meshbasic_vert:a2e,meshbasic_frag:s2e,meshlambert_vert:l2e,meshlambert_frag:u2e,meshmatcap_vert:c2e,meshmatcap_frag:d2e,meshnormal_vert:h2e,meshnormal_frag:f2e,meshphong_vert:p2e,meshphong_frag:m2e,meshphysical_vert:g2e,meshphysical_frag:v2e,meshtoon_vert:y2e,meshtoon_frag:b2e,points_vert:x2e,points_frag:w2e,shadow_vert:_2e,shadow_frag:S2e,sprite_vert:A2e,sprite_frag:M2e},_t={common:{diffuse:{value:new tr(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pi},uv2Transform:{value:new Pi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pi}},sprite:{diffuse:{value:new tr(16777215)},opacity:{value:1},center:{value:new Ae(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pi}}},Ic={basic:{uniforms:Ta([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.fog]),vertexShader:Cr.meshbasic_vert,fragmentShader:Cr.meshbasic_frag},lambert:{uniforms:Ta([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new tr(0)}}]),vertexShader:Cr.meshlambert_vert,fragmentShader:Cr.meshlambert_frag},phong:{uniforms:Ta([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new tr(0)},specular:{value:new tr(1118481)},shininess:{value:30}}]),vertexShader:Cr.meshphong_vert,fragmentShader:Cr.meshphong_frag},standard:{uniforms:Ta([_t.common,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.roughnessmap,_t.metalnessmap,_t.fog,_t.lights,{emissive:{value:new tr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cr.meshphysical_vert,fragmentShader:Cr.meshphysical_frag},toon:{uniforms:Ta([_t.common,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.gradientmap,_t.fog,_t.lights,{emissive:{value:new tr(0)}}]),vertexShader:Cr.meshtoon_vert,fragmentShader:Cr.meshtoon_frag},matcap:{uniforms:Ta([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,{matcap:{value:null}}]),vertexShader:Cr.meshmatcap_vert,fragmentShader:Cr.meshmatcap_frag},points:{uniforms:Ta([_t.points,_t.fog]),vertexShader:Cr.points_vert,fragmentShader:Cr.points_frag},dashed:{uniforms:Ta([_t.common,_t.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cr.linedashed_vert,fragmentShader:Cr.linedashed_frag},depth:{uniforms:Ta([_t.common,_t.displacementmap]),vertexShader:Cr.depth_vert,fragmentShader:Cr.depth_frag},normal:{uniforms:Ta([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,{opacity:{value:1}}]),vertexShader:Cr.meshnormal_vert,fragmentShader:Cr.meshnormal_frag},sprite:{uniforms:Ta([_t.sprite,_t.fog]),vertexShader:Cr.sprite_vert,fragmentShader:Cr.sprite_frag},background:{uniforms:{uvTransform:{value:new Pi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cr.background_vert,fragmentShader:Cr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Cr.backgroundCube_vert,fragmentShader:Cr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cr.cube_vert,fragmentShader:Cr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cr.equirect_vert,fragmentShader:Cr.equirect_frag},distanceRGBA:{uniforms:Ta([_t.common,_t.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cr.distanceRGBA_vert,fragmentShader:Cr.distanceRGBA_frag},shadow:{uniforms:Ta([_t.lights,_t.fog,{color:{value:new tr(0)},opacity:{value:1}}]),vertexShader:Cr.shadow_vert,fragmentShader:Cr.shadow_frag}};Ic.physical={uniforms:Ta([Ic.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ae(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new tr(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ae},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new tr(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new tr(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Cr.meshphysical_vert,fragmentShader:Cr.meshphysical_frag};var UE={r:0,b:0,g:0};function C2e(e,t,r,n,i,o,a){let s=new tr(0),l=o===!0?0:1,u,d,c=null,h=0,f=null;function g(m,p){let v=!1,b=p.isScene===!0?p.background:null;b&&b.isTexture&&(b=(p.backgroundBlurriness>0?r:t).get(b));let x=e.xr,_=x.getSession&&x.getSession();_&&_.environmentBlendMode==="additive"&&(b=null),b===null?y(s,l):b&&b.isColor&&(y(b,1),v=!0),(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),b&&(b.isCubeTexture||b.mapping===TM)?(d===void 0&&(d=new Fa(new nd(1,1,1),new An({name:"BackgroundCubeMaterial",uniforms:Ox(Ic.backgroundCube.uniforms),vertexShader:Ic.backgroundCube.vertexShader,fragmentShader:Ic.backgroundCube.fragmentShader,side:Ao,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(A,M,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=b,d.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,d.material.toneMapped=b.encoding!==Ar,(c!==b||h!==b.version||f!==e.toneMapping)&&(d.material.needsUpdate=!0,c=b,h=b.version,f=e.toneMapping),d.layers.enableAll(),m.unshift(d,d.geometry,d.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new Fa(new jR(2,2),new An({name:"BackgroundMaterial",uniforms:Ox(Ic.background.uniforms),vertexShader:Ic.background.vertexShader,fragmentShader:Ic.background.fragmentShader,side:Wu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=b.encoding!==Ar,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(c!==b||h!==b.version||f!==e.toneMapping)&&(u.material.needsUpdate=!0,c=b,h=b.version,f=e.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null))}function y(m,p){m.getRGB(UE,Cne(e)),n.buffers.color.setClear(UE.r,UE.g,UE.b,p,a)}return{getClearColor:function(){return s},setClearColor:function(m,p=1){s.set(m),l=p,y(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,y(s,l)},render:g}}function T2e(e,t,r,n){let i=e.getParameter(34921),o=n.isWebGL2?null:t.get("OES_vertex_array_object"),a=n.isWebGL2||o!==null,s={},l=m(null),u=l,d=!1;function c(L,U,W,G,z){let V=!1;if(a){let j=y(G,W,U);u!==j&&(u=j,f(u.object)),V=p(L,G,W,z),V&&v(L,G,W,z)}else{let j=U.wireframe===!0;(u.geometry!==G.id||u.program!==W.id||u.wireframe!==j)&&(u.geometry=G.id,u.program=W.id,u.wireframe=j,V=!0)}z!==null&&r.update(z,34963),(V||d)&&(d=!1,T(L,U,W,G),z!==null&&e.bindBuffer(34963,r.get(z).buffer))}function h(){return n.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}function f(L){return n.isWebGL2?e.bindVertexArray(L):o.bindVertexArrayOES(L)}function g(L){return n.isWebGL2?e.deleteVertexArray(L):o.deleteVertexArrayOES(L)}function y(L,U,W){let G=W.wireframe===!0,z=s[L.id];z===void 0&&(z={},s[L.id]=z);let V=z[U.id];V===void 0&&(V={},z[U.id]=V);let j=V[G];return j===void 0&&(j=m(h()),V[G]=j),j}function m(L){let U=[],W=[],G=[];for(let z=0;z<i;z++)U[z]=0,W[z]=0,G[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:W,attributeDivisors:G,object:L,attributes:{},index:null}}function p(L,U,W,G){let z=u.attributes,V=U.attributes,j=0,H=W.getAttributes();for(let Y in H)if(H[Y].location>=0){let Q=z[Y],$=V[Y];if($===void 0&&(Y==="instanceMatrix"&&L.instanceMatrix&&($=L.instanceMatrix),Y==="instanceColor"&&L.instanceColor&&($=L.instanceColor)),Q===void 0||Q.attribute!==$||$&&Q.data!==$.data)return!0;j++}return u.attributesNum!==j||u.index!==G}function v(L,U,W,G){let z={},V=U.attributes,j=0,H=W.getAttributes();for(let Y in H)if(H[Y].location>=0){let Q=V[Y];Q===void 0&&(Y==="instanceMatrix"&&L.instanceMatrix&&(Q=L.instanceMatrix),Y==="instanceColor"&&L.instanceColor&&(Q=L.instanceColor));let $={};$.attribute=Q,Q&&Q.data&&($.data=Q.data),z[Y]=$,j++}u.attributes=z,u.attributesNum=j,u.index=G}function b(){let L=u.newAttributes;for(let U=0,W=L.length;U<W;U++)L[U]=0}function x(L){_(L,0)}function _(L,U){let W=u.newAttributes,G=u.enabledAttributes,z=u.attributeDivisors;W[L]=1,G[L]===0&&(e.enableVertexAttribArray(L),G[L]=1),z[L]!==U&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,U),z[L]=U)}function A(){let L=u.newAttributes,U=u.enabledAttributes;for(let W=0,G=U.length;W<G;W++)U[W]!==L[W]&&(e.disableVertexAttribArray(W),U[W]=0)}function M(L,U,W,G,z,V){n.isWebGL2===!0&&(W===5124||W===5125)?e.vertexAttribIPointer(L,U,W,z,V):e.vertexAttribPointer(L,U,W,G,z,V)}function T(L,U,W,G){if(n.isWebGL2===!1&&(L.isInstancedMesh||G.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;b();let z=G.attributes,V=W.getAttributes(),j=U.defaultAttributeValues;for(let H in V){let Y=V[H];if(Y.location>=0){let Q=z[H];if(Q===void 0&&(H==="instanceMatrix"&&L.instanceMatrix&&(Q=L.instanceMatrix),H==="instanceColor"&&L.instanceColor&&(Q=L.instanceColor)),Q!==void 0){let $=Q.normalized,ne=Q.itemSize,Z=r.get(Q);if(Z===void 0)continue;let ce=Z.buffer,ae=Z.type,ie=Z.bytesPerElement;if(Q.isInterleavedBufferAttribute){let le=Q.data,se=le.stride,re=Q.offset;if(le.isInstancedInterleavedBuffer){for(let ye=0;ye<Y.locationSize;ye++)_(Y.location+ye,le.meshPerAttribute);L.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let ye=0;ye<Y.locationSize;ye++)x(Y.location+ye);e.bindBuffer(34962,ce);for(let ye=0;ye<Y.locationSize;ye++)M(Y.location+ye,ne/Y.locationSize,ae,$,se*ie,(re+ne/Y.locationSize*ye)*ie)}else{if(Q.isInstancedBufferAttribute){for(let le=0;le<Y.locationSize;le++)_(Y.location+le,Q.meshPerAttribute);L.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let le=0;le<Y.locationSize;le++)x(Y.location+le);e.bindBuffer(34962,ce);for(let le=0;le<Y.locationSize;le++)M(Y.location+le,ne/Y.locationSize,ae,$,ne*ie,ne/Y.locationSize*le*ie)}}else if(j!==void 0){let $=j[H];if($!==void 0)switch($.length){case 2:e.vertexAttrib2fv(Y.location,$);break;case 3:e.vertexAttrib3fv(Y.location,$);break;case 4:e.vertexAttrib4fv(Y.location,$);break;default:e.vertexAttrib1fv(Y.location,$)}}}}A()}function C(){I();for(let L in s){let U=s[L];for(let W in U){let G=U[W];for(let z in G)g(G[z].object),delete G[z];delete U[W]}delete s[L]}}function E(L){if(s[L.id]===void 0)return;let U=s[L.id];for(let W in U){let G=U[W];for(let z in G)g(G[z].object),delete G[z];delete U[W]}delete s[L.id]}function D(L){for(let U in s){let W=s[U];if(W[L.id]===void 0)continue;let G=W[L.id];for(let z in G)g(G[z].object),delete G[z];delete W[L.id]}}function I(){k(),d=!0,u!==l&&(u=l,f(u.object))}function k(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:c,reset:I,resetDefaultState:k,dispose:C,releaseStatesOfGeometry:E,releaseStatesOfProgram:D,initAttributes:b,enableAttribute:x,disableUnusedAttributes:A}}function E2e(e,t,r,n){let i=n.isWebGL2,o;function a(u){o=u}function s(u,d){e.drawArrays(o,u,d),r.update(d,o,1)}function l(u,d,c){if(c===0)return;let h,f;if(i)h=e,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](o,u,d,c),r.update(d,o,c)}this.setMode=a,this.render=s,this.renderInstances=l}function P2e(e,t,r){let n;function i(){if(n!==void 0)return n;if(t.has("EXT_texture_filter_anisotropic")===!0){let M=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function o(M){if(M==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";M="mediump"}return M==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,s=r.precision!==void 0?r.precision:"highp",l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);let u=a||t.has("WEBGL_draw_buffers"),d=r.logarithmicDepthBuffer===!0,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),g=e.getParameter(34076),y=e.getParameter(34921),m=e.getParameter(36347),p=e.getParameter(36348),v=e.getParameter(36349),b=h>0,x=a||t.has("OES_texture_float"),_=b&&x,A=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:d,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:g,maxAttributes:y,maxVertexUniforms:m,maxVaryings:p,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:_,maxSamples:A}}function D2e(e){let t=this,r=null,n=0,i=!1,o=!1,a=new qs,s=new Pi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(c,h){let f=c.length!==0||h||n!==0||i;return i=h,n=c.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(c,h){r=d(c,h,0)},this.setState=function(c,h,f){let g=c.clippingPlanes,y=c.clipIntersection,m=c.clipShadows,p=e.get(c);if(!i||g===null||g.length===0||o&&!m)o?d(null):u();else{let v=o?0:n,b=v*4,x=p.clippingState||null;l.value=x,x=d(g,h,b,f);for(let _=0;_!==b;++_)x[_]=r[_];p.clippingState=x,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=v}};function u(){l.value!==r&&(l.value=r,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function d(c,h,f,g){let y=c!==null?c.length:0,m=null;if(y!==0){if(m=l.value,g!==!0||m===null){let p=f+y*4,v=h.matrixWorldInverse;s.getNormalMatrix(v),(m===null||m.length<p)&&(m=new Float32Array(p));for(let b=0,x=f;b!==y;++b,x+=4)a.copy(c[b]).applyMatrix4(v,s),a.normal.toArray(m,x),m[x+3]=a.constant}l.value=m,l.needsUpdate=!0}return t.numPlanes=y,t.numIntersection=0,m}}function O2e(e){let t=new WeakMap;function r(a,s){return s===o5?a.mapping=p0:s===a5&&(a.mapping=m0),a}function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let s=a.mapping;if(s===o5||s===a5)if(t.has(a)){let l=t.get(a).texture;return r(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let u=new GTe(l.height/2);return u.fromEquirectangularTexture(e,a),t.set(a,u),a.addEventListener("dispose",i),r(u.texture,a.mapping)}else return null}}return a}function i(a){let s=a.target;s.removeEventListener("dispose",i);let l=t.get(s);l!==void 0&&(t.delete(s),l.dispose())}function o(){t=new WeakMap}return{get:n,dispose:o}}var LV=class extends m1{constructor(e=-1,t=1,r=1,n=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,n,i,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,o=r+e,a=n+t,s=n-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=l*this.view.offsetX,o=i+l*this.view.width,a-=u*this.view.offsetY,s=a-u*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},_b=4,G9=[.125,.215,.35,.446,.526,.582],wg=20,hB=new LV,W9=new tr,fB=null,fg=(1+Math.sqrt(5))/2,Cy=1/fg,q9=[new X(1,1,1),new X(-1,1,1),new X(1,1,-1),new X(-1,1,-1),new X(0,fg,Cy),new X(0,fg,-Cy),new X(Cy,0,fg),new X(-Cy,0,fg),new X(fg,Cy,0),new X(-fg,Cy,0)],X9=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,n=100){fB=this._renderer.getRenderTarget(),this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,r,n,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=J9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=K9(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(fB),e.scissorTest=!1,VE(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===p0||e.mapping===m0?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),fB=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Or,minFilter:Or,generateMipmaps:!1,type:g0,format:Ys,encoding:rd,depthBuffer:!1},n=Y9(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Y9(e,t,r);let{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=R2e(i)),this._blurMaterial=I2e(i,e,t)}return n}_compileMaterial(e){let t=new Fa(this._lodPlanes[0],e);this._renderer.compile(t,hB)}_sceneToCubeUV(e,t,r,n){let i=new ea(90,1,t,r),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(W9),s.toneMapping=vh,s.autoClear=!1;let d=new PM({name:"PMREM.Background",side:Ao,depthWrite:!1,depthTest:!1}),c=new Fa(new nd,d),h=!1,f=e.background;f?f.isColor&&(d.color.copy(f),e.background=null,h=!0):(d.color.copy(W9),h=!0);for(let g=0;g<6;g++){let y=g%3;y===0?(i.up.set(0,o[g],0),i.lookAt(a[g],0,0)):y===1?(i.up.set(0,0,o[g]),i.lookAt(0,a[g],0)):(i.up.set(0,o[g],0),i.lookAt(0,0,a[g]));let m=this._cubeSize;VE(n,y*m,g>2?m:0,m,m),s.setRenderTarget(n),h&&s.render(c,i),s.render(e,i)}c.geometry.dispose(),c.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){let r=this._renderer,n=e.mapping===p0||e.mapping===m0;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=J9()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=K9());let i=n?this._cubemapMaterial:this._equirectMaterial,o=new Fa(this._lodPlanes[0],i),a=i.uniforms;a.envMap.value=e;let s=this._cubeSize;VE(t,0,0,3*s,2*s),r.setRenderTarget(t),r.render(o,hB)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){let i=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),o=q9[(n-1)%q9.length];this._blur(e,n-1,n,i,o)}t.autoClear=r}_blur(e,t,r,n,i){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,n,"latitudinal",i),this._halfBlur(o,e,r,r,n,"longitudinal",i)}_halfBlur(e,t,r,n,i,o,a){let s=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,d=new Fa(this._lodPlanes[n],l),c=l.uniforms,h=this._sizeLods[r]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*wg-1),g=i/f,y=isFinite(i)?1+Math.floor(u*g):wg;y>wg&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${wg}`);let m=[],p=0;for(let A=0;A<wg;++A){let M=A/g,T=Math.exp(-M*M/2);m.push(T),A===0?p+=T:A<y&&(p+=2*T)}for(let A=0;A<m.length;A++)m[A]=m[A]/p;c.envMap.value=e.texture,c.samples.value=y,c.weights.value=m,c.latitudinal.value=o==="latitudinal",a&&(c.poleAxis.value=a);let{_lodMax:v}=this;c.dTheta.value=f,c.mipInt.value=v-r;let b=this._sizeLods[n],x=3*b*(n>v-_b?n-v+_b:0),_=4*(this._cubeSize-b);VE(t,x,_,3*b,2*b),s.setRenderTarget(t),s.render(d,hB)}};function R2e(e){let t=[],r=[],n=[],i=e,o=e-_b+1+G9.length;for(let a=0;a<o;a++){let s=Math.pow(2,i);r.push(s);let l=1/s;a>e-_b?l=G9[a-e+_b-1]:a===0&&(l=0),n.push(l);let u=1/(s-2),d=-u,c=1+u,h=[d,d,c,d,c,c,d,d,c,c,d,c],f=6,g=6,y=3,m=2,p=1,v=new Float32Array(y*g*f),b=new Float32Array(m*g*f),x=new Float32Array(p*g*f);for(let A=0;A<f;A++){let M=A%3*2/3-1,T=A>2?0:-1,C=[M,T,0,M+2/3,T,0,M+2/3,T+1,0,M,T,0,M+2/3,T+1,0,M,T+1,0];v.set(C,y*g*A),b.set(h,m*g*A);let E=[A,A,A,A,A,A];x.set(E,p*g*A)}let _=new Jt;_.setAttribute("position",new fr(v,y)),_.setAttribute("uv",new fr(b,m)),_.setAttribute("faceIndex",new fr(x,p)),t.push(_),i>_b&&i--}return{lodPlanes:t,sizeLods:r,sigmas:n}}function Y9(e,t,r){let n=new vn(e,t,r);return n.texture.mapping=TM,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function VE(e,t,r,n,i){e.viewport.set(t,r,n,i),e.scissor.set(t,r,n,i)}function I2e(e,t,r){let n=new Float32Array(wg),i=new X(0,1,0);return new An({name:"SphericalGaussianBlur",defines:{n:wg,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:BV(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gi,depthTest:!1,depthWrite:!1})}function K9(){return new An({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:BV(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gi,depthTest:!1,depthWrite:!1})}function J9(){return new An({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:BV(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gi,depthTest:!1,depthWrite:!1})}function BV(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function L2e(e){let t=new WeakMap,r=null;function n(s){if(s&&s.isTexture){let l=s.mapping,u=l===o5||l===a5,d=l===p0||l===m0;if(u||d)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let c=t.get(s);return r===null&&(r=new X9(e)),c=u?r.fromEquirectangular(s,c):r.fromCubemap(s,c),t.set(s,c),c.texture}else{if(t.has(s))return t.get(s).texture;{let c=s.image;if(u&&c&&c.height>0||d&&c&&i(c)){r===null&&(r=new X9(e));let h=u?r.fromEquirectangular(s):r.fromCubemap(s);return t.set(s,h),s.addEventListener("dispose",o),h.texture}else return null}}}return s}function i(s){let l=0,u=6;for(let d=0;d<u;d++)s[d]!==void 0&&l++;return l===u}function o(s){let l=s.target;l.removeEventListener("dispose",o);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function a(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:n,dispose:a}}function B2e(e){let t={};function r(n){if(t[n]!==void 0)return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(n){return r(n)!==null},init:function(n){n.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(n){let i=r(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function N2e(e,t,r,n){let i={},o=new WeakMap;function a(c){let h=c.target;h.index!==null&&t.remove(h.index);for(let g in h.attributes)t.remove(h.attributes[g]);h.removeEventListener("dispose",a),delete i[h.id];let f=o.get(h);f&&(t.remove(f),o.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function s(c,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,r.memory.geometries++),h}function l(c){let h=c.attributes;for(let g in h)t.update(h[g],34962);let f=c.morphAttributes;for(let g in f){let y=f[g];for(let m=0,p=y.length;m<p;m++)t.update(y[m],34962)}}function u(c){let h=[],f=c.index,g=c.attributes.position,y=0;if(f!==null){let v=f.array;y=f.version;for(let b=0,x=v.length;b<x;b+=3){let _=v[b+0],A=v[b+1],M=v[b+2];h.push(_,A,A,M,M,_)}}else{let v=g.array;y=g.version;for(let b=0,x=v.length/3-1;b<x;b+=3){let _=b+0,A=b+1,M=b+2;h.push(_,A,A,M,M,_)}}let m=new(xne(h)?Wb:Mne)(h,1);m.version=y;let p=o.get(c);p&&t.remove(p),o.set(c,m)}function d(c){let h=o.get(c);if(h){let f=c.index;f!==null&&h.version<f.version&&u(c)}else u(c);return o.get(c)}return{get:s,update:l,getWireframeAttribute:d}}function k2e(e,t,r,n){let i=n.isWebGL2,o;function a(h){o=h}let s,l;function u(h){s=h.type,l=h.bytesPerElement}function d(h,f){e.drawElements(o,f,s,h*l),r.update(f,o,1)}function c(h,f,g){if(g===0)return;let y,m;if(i)y=e,m="drawElementsInstanced";else if(y=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[m](o,f,s,h*l,g),r.update(f,o,g)}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=c}function F2e(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,a,s){switch(r.calls++,a){case 4:r.triangles+=s*(o/3);break;case 1:r.lines+=s*(o/2);break;case 3:r.lines+=s*(o-1);break;case 2:r.lines+=s*o;break;case 0:r.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:i,update:n}}function z2e(e,t){return e[0]-t[0]}function U2e(e,t){return Math.abs(t[1])-Math.abs(e[1])}function V2e(e,t,r){let n={},i=new Float32Array(8),o=new WeakMap,a=new Mr,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,d,c,h){let f=u.morphTargetInfluences;if(t.isWebGL2===!0){let g=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,y=g!==void 0?g.length:0,m=o.get(d);if(m===void 0||m.count!==y){let b=function(){L.dispose(),o.delete(d),d.removeEventListener("dispose",b)};m!==void 0&&m.texture.dispose();let x=d.morphAttributes.position!==void 0,_=d.morphAttributes.normal!==void 0,A=d.morphAttributes.color!==void 0,M=d.morphAttributes.position||[],T=d.morphAttributes.normal||[],C=d.morphAttributes.color||[],E=0;x===!0&&(E=1),_===!0&&(E=2),A===!0&&(E=3);let D=d.attributes.position.count*E,I=1;D>t.maxTextureSize&&(I=Math.ceil(D/t.maxTextureSize),D=t.maxTextureSize);let k=new Float32Array(D*I*4*y),L=new Ane(k,D,I,y);L.type=ka,L.needsUpdate=!0;let U=E*4;for(let W=0;W<y;W++){let G=M[W],z=T[W],V=C[W],j=D*I*4*W;for(let H=0;H<G.count;H++){let Y=H*U;x===!0&&(a.fromBufferAttribute(G,H),k[j+Y+0]=a.x,k[j+Y+1]=a.y,k[j+Y+2]=a.z,k[j+Y+3]=0),_===!0&&(a.fromBufferAttribute(z,H),k[j+Y+4]=a.x,k[j+Y+5]=a.y,k[j+Y+6]=a.z,k[j+Y+7]=0),A===!0&&(a.fromBufferAttribute(V,H),k[j+Y+8]=a.x,k[j+Y+9]=a.y,k[j+Y+10]=a.z,k[j+Y+11]=V.itemSize===4?a.w:1)}}m={count:y,texture:L,size:new Ae(D,I)},o.set(d,m),d.addEventListener("dispose",b)}let p=0;for(let b=0;b<f.length;b++)p+=f[b];let v=d.morphTargetsRelative?1:1-p;h.getUniforms().setValue(e,"morphTargetBaseInfluence",v),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,r),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{let g=f===void 0?0:f.length,y=n[d.id];if(y===void 0||y.length!==g){y=[];for(let x=0;x<g;x++)y[x]=[x,0];n[d.id]=y}for(let x=0;x<g;x++){let _=y[x];_[0]=x,_[1]=f[x]}y.sort(U2e);for(let x=0;x<8;x++)x<g&&y[x][1]?(s[x][0]=y[x][0],s[x][1]=y[x][1]):(s[x][0]=Number.MAX_SAFE_INTEGER,s[x][1]=0);s.sort(z2e);let m=d.morphAttributes.position,p=d.morphAttributes.normal,v=0;for(let x=0;x<8;x++){let _=s[x],A=_[0],M=_[1];A!==Number.MAX_SAFE_INTEGER&&M?(m&&d.getAttribute("morphTarget"+x)!==m[A]&&d.setAttribute("morphTarget"+x,m[A]),p&&d.getAttribute("morphNormal"+x)!==p[A]&&d.setAttribute("morphNormal"+x,p[A]),i[x]=M,v+=M):(m&&d.hasAttribute("morphTarget"+x)===!0&&d.deleteAttribute("morphTarget"+x),p&&d.hasAttribute("morphNormal"+x)===!0&&d.deleteAttribute("morphNormal"+x),i[x]=0)}let b=d.morphTargetsRelative?1:1-v;h.getUniforms().setValue(e,"morphTargetBaseInfluence",b),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}return{update:l}}function j2e(e,t,r,n){let i=new WeakMap;function o(l){let u=n.render.frame,d=l.geometry,c=t.get(l,d);return i.get(c)!==u&&(t.update(c),i.set(c,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),c}function a(){i=new WeakMap}function s(l){let u=l.target;u.removeEventListener("dispose",s),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:o,dispose:a}}var Ene=new io,Pne=new Ane,Dne=new ETe,One=new RV,Q9=[],Z9=[],$9=new Float32Array(16),e7=new Float32Array(9),t7=new Float32Array(4);function g1(e,t,r){let n=e[0];if(n<=0||n>0)return e;let i=t*r,o=Q9[i];if(o===void 0&&(o=new Float32Array(i),Q9[i]=o),t!==0){n.toArray(o,0);for(let a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function lo(e,t){if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function uo(e,t){for(let r=0,n=t.length;r<n;r++)e[r]=t[r]}function HR(e,t){let r=Z9[t];r===void 0&&(r=new Int32Array(t),Z9[t]=r);for(let n=0;n!==t;++n)r[n]=e.allocateTextureUnit();return r}function H2e(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function G2e(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(lo(r,t))return;e.uniform2fv(this.addr,t),uo(r,t)}}function W2e(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(lo(r,t))return;e.uniform3fv(this.addr,t),uo(r,t)}}function q2e(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(lo(r,t))return;e.uniform4fv(this.addr,t),uo(r,t)}}function X2e(e,t){let r=this.cache,n=t.elements;if(n===void 0){if(lo(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),uo(r,t)}else{if(lo(r,n))return;t7.set(n),e.uniformMatrix2fv(this.addr,!1,t7),uo(r,n)}}function Y2e(e,t){let r=this.cache,n=t.elements;if(n===void 0){if(lo(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),uo(r,t)}else{if(lo(r,n))return;e7.set(n),e.uniformMatrix3fv(this.addr,!1,e7),uo(r,n)}}function K2e(e,t){let r=this.cache,n=t.elements;if(n===void 0){if(lo(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),uo(r,t)}else{if(lo(r,n))return;$9.set(n),e.uniformMatrix4fv(this.addr,!1,$9),uo(r,n)}}function J2e(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function Q2e(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(lo(r,t))return;e.uniform2iv(this.addr,t),uo(r,t)}}function Z2e(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(lo(r,t))return;e.uniform3iv(this.addr,t),uo(r,t)}}function $2e(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(lo(r,t))return;e.uniform4iv(this.addr,t),uo(r,t)}}function eDe(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function tDe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(lo(r,t))return;e.uniform2uiv(this.addr,t),uo(r,t)}}function rDe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(lo(r,t))return;e.uniform3uiv(this.addr,t),uo(r,t)}}function nDe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(lo(r,t))return;e.uniform4uiv(this.addr,t),uo(r,t)}}function iDe(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2D(t||Ene,i)}function oDe(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||Dne,i)}function aDe(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(t||One,i)}function sDe(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(t||Pne,i)}function lDe(e){switch(e){case 5126:return H2e;case 35664:return G2e;case 35665:return W2e;case 35666:return q2e;case 35674:return X2e;case 35675:return Y2e;case 35676:return K2e;case 5124:case 35670:return J2e;case 35667:case 35671:return Q2e;case 35668:case 35672:return Z2e;case 35669:case 35673:return $2e;case 5125:return eDe;case 36294:return tDe;case 36295:return rDe;case 36296:return nDe;case 35678:case 36198:case 36298:case 36306:case 35682:return iDe;case 35679:case 36299:case 36307:return oDe;case 35680:case 36300:case 36308:case 36293:return aDe;case 36289:case 36303:case 36311:case 36292:return sDe}}function uDe(e,t){e.uniform1fv(this.addr,t)}function cDe(e,t){let r=g1(t,this.size,2);e.uniform2fv(this.addr,r)}function dDe(e,t){let r=g1(t,this.size,3);e.uniform3fv(this.addr,r)}function hDe(e,t){let r=g1(t,this.size,4);e.uniform4fv(this.addr,r)}function fDe(e,t){let r=g1(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function pDe(e,t){let r=g1(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function mDe(e,t){let r=g1(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function gDe(e,t){e.uniform1iv(this.addr,t)}function vDe(e,t){e.uniform2iv(this.addr,t)}function yDe(e,t){e.uniform3iv(this.addr,t)}function bDe(e,t){e.uniform4iv(this.addr,t)}function xDe(e,t){e.uniform1uiv(this.addr,t)}function wDe(e,t){e.uniform2uiv(this.addr,t)}function _De(e,t){e.uniform3uiv(this.addr,t)}function SDe(e,t){e.uniform4uiv(this.addr,t)}function ADe(e,t,r){let n=this.cache,i=t.length,o=HR(r,i);lo(n,o)||(e.uniform1iv(this.addr,o),uo(n,o));for(let a=0;a!==i;++a)r.setTexture2D(t[a]||Ene,o[a])}function MDe(e,t,r){let n=this.cache,i=t.length,o=HR(r,i);lo(n,o)||(e.uniform1iv(this.addr,o),uo(n,o));for(let a=0;a!==i;++a)r.setTexture3D(t[a]||Dne,o[a])}function CDe(e,t,r){let n=this.cache,i=t.length,o=HR(r,i);lo(n,o)||(e.uniform1iv(this.addr,o),uo(n,o));for(let a=0;a!==i;++a)r.setTextureCube(t[a]||One,o[a])}function TDe(e,t,r){let n=this.cache,i=t.length,o=HR(r,i);lo(n,o)||(e.uniform1iv(this.addr,o),uo(n,o));for(let a=0;a!==i;++a)r.setTexture2DArray(t[a]||Pne,o[a])}function EDe(e){switch(e){case 5126:return uDe;case 35664:return cDe;case 35665:return dDe;case 35666:return hDe;case 35674:return fDe;case 35675:return pDe;case 35676:return mDe;case 5124:case 35670:return gDe;case 35667:case 35671:return vDe;case 35668:case 35672:return yDe;case 35669:case 35673:return bDe;case 5125:return xDe;case 36294:return wDe;case 36295:return _De;case 36296:return SDe;case 35678:case 36198:case 36298:case 36306:case 35682:return ADe;case 35679:case 36299:case 36307:return MDe;case 35680:case 36300:case 36308:case 36293:return CDe;case 36289:case 36303:case 36311:case 36292:return TDe}}var PDe=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=lDe(t.type)}},DDe=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=EDe(t.type)}},ODe=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let n=this.seq;for(let i=0,o=n.length;i!==o;++i){let a=n[i];a.setValue(e,t[a.id],r)}}},pB=/(\w+)(\])?(\[|\.)?/g;function r7(e,t){e.seq.push(t),e.map[t.id]=t}function RDe(e,t,r){let n=e.name,i=n.length;for(pB.lastIndex=0;;){let o=pB.exec(n),a=pB.lastIndex,s=o[1],l=o[2]==="]",u=o[3];if(l&&(s=s|0),u===void 0||u==="["&&a+2===i){r7(r,u===void 0?new PDe(s,e,t):new DDe(s,e,t));break}else{let d=r.map[s];d===void 0&&(d=new ODe(s),r7(r,d)),r=d}}}var x2=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let n=0;n<r;++n){let i=e.getActiveUniform(t,n),o=e.getUniformLocation(t,i.name);RDe(i,o,this)}}setValue(e,t,r,n){let i=this.map[t];i!==void 0&&i.setValue(e,r,n)}setOptional(e,t,r){let n=t[r];n!==void 0&&this.setValue(e,r,n)}static upload(e,t,r,n){for(let i=0,o=t.length;i!==o;++i){let a=t[i],s=r[a.id];s.needsUpdate!==!1&&a.setValue(e,s.value,n)}}static seqWithValue(e,t){let r=[];for(let n=0,i=e.length;n!==i;++n){let o=e[n];o.id in t&&r.push(o)}return r}};function n7(e,t,r){let n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}var IDe=0;function LDe(e,t){let r=e.split(`
`),n=[],i=Math.max(t-6,0),o=Math.min(t+6,r.length);for(let a=i;a<o;a++){let s=a+1;n.push(`${s===t?">":" "} ${s}: ${r[a]}`)}return n.join(`
`)}function BDe(e){switch(e){case rd:return["Linear","( value )"];case Ar:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function i7(e,t,r){let n=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(n&&i==="")return"";let o=/ERROR: 0:(\d+)/.exec(i);if(o){let a=parseInt(o[1]);return r.toUpperCase()+`

`+i+`

`+LDe(e.getShaderSource(t),a)}else return i}function NDe(e,t){let r=BDe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function kDe(e,t){let r;switch(t){case HCe:r="Linear";break;case GCe:r="Reinhard";break;case WCe:r="OptimizedCineon";break;case qCe:r="ACESFilmic";break;case XCe:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function FDe(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Z_).join(`
`)}function zDe(e){let t=[];for(let r in e){let n=e[r];n!==!1&&t.push("#define "+r+" "+n)}return t.join(`
`)}function UDe(e,t){let r={},n=e.getProgramParameter(t,35721);for(let i=0;i<n;i++){let o=e.getActiveAttrib(t,i),a=o.name,s=1;o.type===35674&&(s=2),o.type===35675&&(s=3),o.type===35676&&(s=4),r[a]={type:o.type,location:e.getAttribLocation(t,a),locationSize:s}}return r}function Z_(e){return e!==""}function o7(e,t){let r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function a7(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var VDe=/^[ \t]*#include +<([\w\d./]+)>/gm;function d5(e){return e.replace(VDe,jDe)}function jDe(e,t){let r=Cr[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return d5(r)}var HDe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s7(e){return e.replace(HDe,GDe)}function GDe(e,t,r,n){let i="";for(let o=parseInt(t);o<parseInt(r);o++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function l7(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function WDe(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===TV?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===wCe?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Q_&&(t="SHADOWMAP_TYPE_VSM"),t}function qDe(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case p0:case m0:t="ENVMAP_TYPE_CUBE";break;case TM:t="ENVMAP_TYPE_CUBE_UV";break}return t}function XDe(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case m0:t="ENVMAP_MODE_REFRACTION";break}return t}function YDe(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case hne:t="ENVMAP_BLENDING_MULTIPLY";break;case VCe:t="ENVMAP_BLENDING_MIX";break;case jCe:t="ENVMAP_BLENDING_ADD";break}return t}function KDe(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let r=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:n,maxMip:r}}function JDe(e,t,r,n){let i=e.getContext(),o=r.defines,a=r.vertexShader,s=r.fragmentShader,l=WDe(r),u=qDe(r),d=XDe(r),c=YDe(r),h=KDe(r),f=r.isWebGL2?"":FDe(r),g=zDe(o),y=i.createProgram(),m,p,v=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(m=[g].filter(Z_).join(`
`),m.length>0&&(m+=`
`),p=[f,g].filter(Z_).join(`
`),p.length>0&&(p+=`
`)):(m=[l7(r),"#define SHADER_NAME "+r.shaderName,g,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Z_).join(`
`),p=[f,l7(r),"#define SHADER_NAME "+r.shaderName,g,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+d:"",r.envMap?"#define "+c:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==vh?"#define TONE_MAPPING":"",r.toneMapping!==vh?Cr.tonemapping_pars_fragment:"",r.toneMapping!==vh?kDe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Cr.encodings_pars_fragment,NDe("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Z_).join(`
`)),a=d5(a),a=o7(a,r),a=a7(a,r),s=d5(s),s=o7(s,r),s=a7(s,r),a=s7(a),s=s7(s),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,p=["#define varying in",r.glslVersion===R9?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===R9?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);let b=v+m+a,x=v+p+s,_=n7(i,35633,b),A=n7(i,35632,x);if(i.attachShader(y,_),i.attachShader(y,A),r.index0AttributeName!==void 0?i.bindAttribLocation(y,0,r.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),e.debug.checkShaderErrors){let C=i.getProgramInfoLog(y).trim(),E=i.getShaderInfoLog(_).trim(),D=i.getShaderInfoLog(A).trim(),I=!0,k=!0;if(i.getProgramParameter(y,35714)===!1){I=!1;let L=i7(i,_,"vertex"),U=i7(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+`

Program Info Log: `+C+`
`+L+`
`+U)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(E===""||D==="")&&(k=!1);k&&(this.diagnostics={runnable:I,programLog:C,vertexShader:{log:E,prefix:m},fragmentShader:{log:D,prefix:p}})}i.deleteShader(_),i.deleteShader(A);let M;this.getUniforms=function(){return M===void 0&&(M=new x2(i,y)),M};let T;return this.getAttributes=function(){return T===void 0&&(T=UDe(i,y)),T},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=r.shaderName,this.id=IDe++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=_,this.fragmentShader=A,this}var QDe=0,ZDe=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,n=this._getShaderStage(t),i=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(n)===!1&&(o.add(n),n.usedTimes++),o.has(i)===!1&&(o.add(i),i.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new $De(e),t.set(e,r)),r}},$De=class{constructor(e){this.id=QDe++,this.code=e,this.usedTimes=0}};function eOe(e,t,r,n,i,o,a){let s=new OV,l=new ZDe,u=[],d=i.isWebGL2,c=i.logarithmicDepthBuffer,h=i.vertexTextures,f=i.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(T,C,E,D,I){let k=D.fog,L=I.geometry,U=T.isMeshStandardMaterial?D.environment:null,W=(T.isMeshStandardMaterial?r:t).get(T.envMap||U),G=W&&W.mapping===TM?W.image.height:null,z=g[T.type];T.precision!==null&&(f=i.getMaxPrecision(T.precision),f!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",f,"instead."));let V=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,j=V!==void 0?V.length:0,H=0;L.morphAttributes.position!==void 0&&(H=1),L.morphAttributes.normal!==void 0&&(H=2),L.morphAttributes.color!==void 0&&(H=3);let Y,Q,$,ne;if(z){let le=Ic[z];Y=le.vertexShader,Q=le.fragmentShader}else Y=T.vertexShader,Q=T.fragmentShader,l.update(T),$=l.getVertexShaderID(T),ne=l.getFragmentShaderID(T);let Z=e.getRenderTarget(),ce=T.alphaTest>0,ae=T.clearcoat>0,ie=T.iridescence>0;return{isWebGL2:d,shaderID:z,shaderName:T.type,vertexShader:Y,fragmentShader:Q,defines:T.defines,customVertexShaderID:$,customFragmentShaderID:ne,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:f,instancing:I.isInstancedMesh===!0,instancingColor:I.isInstancedMesh===!0&&I.instanceColor!==null,supportsVertexTextures:h,outputEncoding:Z===null?e.outputEncoding:Z.isXRRenderTarget===!0?Z.texture.encoding:rd,map:!!T.map,matcap:!!T.matcap,envMap:!!W,envMapMode:W&&W.mapping,envMapCubeUVHeight:G,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===cTe,tangentSpaceNormalMap:T.normalMapType===uTe,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===Ar,clearcoat:ae,clearcoatMap:ae&&!!T.clearcoatMap,clearcoatRoughnessMap:ae&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:ae&&!!T.clearcoatNormalMap,iridescence:ie,iridescenceMap:ie&&!!T.iridescenceMap,iridescenceThicknessMap:ie&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===Jg,alphaMap:!!T.alphaMap,alphaTest:ce,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!L.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!k,useFog:T.fog===!0,fogExp2:k&&k.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:c,skinning:I.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:H,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:T.dithering,shadowMapEnabled:e.shadowMap.enabled&&E.length>0,shadowMapType:e.shadowMap.type,toneMapping:T.toneMapped?e.toneMapping:vh,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===ys,flipSided:T.side===Ao,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function m(T){let C=[];if(T.shaderID?C.push(T.shaderID):(C.push(T.customVertexShaderID),C.push(T.customFragmentShaderID)),T.defines!==void 0)for(let E in T.defines)C.push(E),C.push(T.defines[E]);return T.isRawShaderMaterial===!1&&(p(C,T),v(C,T),C.push(e.outputEncoding)),C.push(T.customProgramCacheKey),C.join()}function p(T,C){T.push(C.precision),T.push(C.outputEncoding),T.push(C.envMapMode),T.push(C.envMapCubeUVHeight),T.push(C.combine),T.push(C.vertexUvs),T.push(C.fogExp2),T.push(C.sizeAttenuation),T.push(C.morphTargetsCount),T.push(C.morphAttributeCount),T.push(C.numDirLights),T.push(C.numPointLights),T.push(C.numSpotLights),T.push(C.numSpotLightMaps),T.push(C.numHemiLights),T.push(C.numRectAreaLights),T.push(C.numDirLightShadows),T.push(C.numPointLightShadows),T.push(C.numSpotLightShadows),T.push(C.numSpotLightShadowsWithMaps),T.push(C.shadowMapType),T.push(C.toneMapping),T.push(C.numClippingPlanes),T.push(C.numClipIntersection),T.push(C.depthPacking)}function v(T,C){s.disableAll(),C.isWebGL2&&s.enable(0),C.supportsVertexTextures&&s.enable(1),C.instancing&&s.enable(2),C.instancingColor&&s.enable(3),C.map&&s.enable(4),C.matcap&&s.enable(5),C.envMap&&s.enable(6),C.lightMap&&s.enable(7),C.aoMap&&s.enable(8),C.emissiveMap&&s.enable(9),C.bumpMap&&s.enable(10),C.normalMap&&s.enable(11),C.objectSpaceNormalMap&&s.enable(12),C.tangentSpaceNormalMap&&s.enable(13),C.clearcoat&&s.enable(14),C.clearcoatMap&&s.enable(15),C.clearcoatRoughnessMap&&s.enable(16),C.clearcoatNormalMap&&s.enable(17),C.iridescence&&s.enable(18),C.iridescenceMap&&s.enable(19),C.iridescenceThicknessMap&&s.enable(20),C.displacementMap&&s.enable(21),C.specularMap&&s.enable(22),C.roughnessMap&&s.enable(23),C.metalnessMap&&s.enable(24),C.gradientMap&&s.enable(25),C.alphaMap&&s.enable(26),C.alphaTest&&s.enable(27),C.vertexColors&&s.enable(28),C.vertexAlphas&&s.enable(29),C.vertexUvs&&s.enable(30),C.vertexTangents&&s.enable(31),C.uvsVertexOnly&&s.enable(32),T.push(s.mask),s.disableAll(),C.fog&&s.enable(0),C.useFog&&s.enable(1),C.flatShading&&s.enable(2),C.logarithmicDepthBuffer&&s.enable(3),C.skinning&&s.enable(4),C.morphTargets&&s.enable(5),C.morphNormals&&s.enable(6),C.morphColors&&s.enable(7),C.premultipliedAlpha&&s.enable(8),C.shadowMapEnabled&&s.enable(9),C.physicallyCorrectLights&&s.enable(10),C.doubleSided&&s.enable(11),C.flipSided&&s.enable(12),C.useDepthPacking&&s.enable(13),C.dithering&&s.enable(14),C.specularIntensityMap&&s.enable(15),C.specularColorMap&&s.enable(16),C.transmission&&s.enable(17),C.transmissionMap&&s.enable(18),C.thicknessMap&&s.enable(19),C.sheen&&s.enable(20),C.sheenColorMap&&s.enable(21),C.sheenRoughnessMap&&s.enable(22),C.decodeVideoTexture&&s.enable(23),C.opaque&&s.enable(24),T.push(s.mask)}function b(T){let C=g[T.type],E;if(C){let D=Ic[C];E=p1.clone(D.uniforms)}else E=T.uniforms;return E}function x(T,C){let E;for(let D=0,I=u.length;D<I;D++){let k=u[D];if(k.cacheKey===C){E=k,++E.usedTimes;break}}return E===void 0&&(E=new JDe(e,C,T,o),u.push(E)),E}function _(T){if(--T.usedTimes===0){let C=u.indexOf(T);u[C]=u[u.length-1],u.pop(),T.destroy()}}function A(T){l.remove(T)}function M(){l.dispose()}return{getParameters:y,getProgramCacheKey:m,getUniforms:b,acquireProgram:x,releaseProgram:_,releaseShaderCache:A,programs:u,dispose:M}}function tOe(){let e=new WeakMap;function t(o){let a=e.get(o);return a===void 0&&(a={},e.set(o,a)),a}function r(o){e.delete(o)}function n(o,a,s){e.get(o)[a]=s}function i(){e=new WeakMap}return{get:t,remove:r,update:n,dispose:i}}function rOe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function u7(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function c7(){let e=[],t=0,r=[],n=[],i=[];function o(){t=0,r.length=0,n.length=0,i.length=0}function a(c,h,f,g,y,m){let p=e[t];return p===void 0?(p={id:c.id,object:c,geometry:h,material:f,groupOrder:g,renderOrder:c.renderOrder,z:y,group:m},e[t]=p):(p.id=c.id,p.object=c,p.geometry=h,p.material=f,p.groupOrder=g,p.renderOrder=c.renderOrder,p.z=y,p.group=m),t++,p}function s(c,h,f,g,y,m){let p=a(c,h,f,g,y,m);f.transmission>0?n.push(p):f.transparent===!0?i.push(p):r.push(p)}function l(c,h,f,g,y,m){let p=a(c,h,f,g,y,m);f.transmission>0?n.unshift(p):f.transparent===!0?i.unshift(p):r.unshift(p)}function u(c,h){r.length>1&&r.sort(c||rOe),n.length>1&&n.sort(h||u7),i.length>1&&i.sort(h||u7)}function d(){for(let c=t,h=e.length;c<h;c++){let f=e[c];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:r,transmissive:n,transparent:i,init:o,push:s,unshift:l,finish:d,sort:u}}function nOe(){let e=new WeakMap;function t(n,i){let o=e.get(n),a;return o===void 0?(a=new c7,e.set(n,[a])):i>=o.length?(a=new c7,o.push(a)):a=o[i],a}function r(){e=new WeakMap}return{get:t,dispose:r}}function iOe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new X,color:new tr};break;case"SpotLight":r={position:new X,direction:new X,color:new tr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new X,color:new tr,distance:0,decay:0};break;case"HemisphereLight":r={direction:new X,skyColor:new tr,groundColor:new tr};break;case"RectAreaLight":r={color:new tr,position:new X,halfWidth:new X,halfHeight:new X};break}return e[t.id]=r,r}}}function oOe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var aOe=0;function sOe(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function lOe(e,t){let r=new iOe,n=oOe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)i.probe.push(new X);let o=new X,a=new ft,s=new ft;function l(d,c){let h=0,f=0,g=0;for(let D=0;D<9;D++)i.probe[D].set(0,0,0);let y=0,m=0,p=0,v=0,b=0,x=0,_=0,A=0,M=0,T=0;d.sort(sOe);let C=c!==!0?Math.PI:1;for(let D=0,I=d.length;D<I;D++){let k=d[D],L=k.color,U=k.intensity,W=k.distance,G=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)h+=L.r*U*C,f+=L.g*U*C,g+=L.b*U*C;else if(k.isLightProbe)for(let z=0;z<9;z++)i.probe[z].addScaledVector(k.sh.coefficients[z],U);else if(k.isDirectionalLight){let z=r.get(k);if(z.color.copy(k.color).multiplyScalar(k.intensity*C),k.castShadow){let V=k.shadow,j=n.get(k);j.shadowBias=V.bias,j.shadowNormalBias=V.normalBias,j.shadowRadius=V.radius,j.shadowMapSize=V.mapSize,i.directionalShadow[y]=j,i.directionalShadowMap[y]=G,i.directionalShadowMatrix[y]=k.shadow.matrix,x++}i.directional[y]=z,y++}else if(k.isSpotLight){let z=r.get(k);z.position.setFromMatrixPosition(k.matrixWorld),z.color.copy(L).multiplyScalar(U*C),z.distance=W,z.coneCos=Math.cos(k.angle),z.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),z.decay=k.decay,i.spot[p]=z;let V=k.shadow;if(k.map&&(i.spotLightMap[M]=k.map,M++,V.updateMatrices(k),k.castShadow&&T++),i.spotLightMatrix[p]=V.matrix,k.castShadow){let j=n.get(k);j.shadowBias=V.bias,j.shadowNormalBias=V.normalBias,j.shadowRadius=V.radius,j.shadowMapSize=V.mapSize,i.spotShadow[p]=j,i.spotShadowMap[p]=G,A++}p++}else if(k.isRectAreaLight){let z=r.get(k);z.color.copy(L).multiplyScalar(U),z.halfWidth.set(k.width*.5,0,0),z.halfHeight.set(0,k.height*.5,0),i.rectArea[v]=z,v++}else if(k.isPointLight){let z=r.get(k);if(z.color.copy(k.color).multiplyScalar(k.intensity*C),z.distance=k.distance,z.decay=k.decay,k.castShadow){let V=k.shadow,j=n.get(k);j.shadowBias=V.bias,j.shadowNormalBias=V.normalBias,j.shadowRadius=V.radius,j.shadowMapSize=V.mapSize,j.shadowCameraNear=V.camera.near,j.shadowCameraFar=V.camera.far,i.pointShadow[m]=j,i.pointShadowMap[m]=G,i.pointShadowMatrix[m]=k.shadow.matrix,_++}i.point[m]=z,m++}else if(k.isHemisphereLight){let z=r.get(k);z.skyColor.copy(k.color).multiplyScalar(U*C),z.groundColor.copy(k.groundColor).multiplyScalar(U*C),i.hemi[b]=z,b++}}v>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=_t.LTC_FLOAT_1,i.rectAreaLTC2=_t.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=_t.LTC_HALF_1,i.rectAreaLTC2=_t.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=g;let E=i.hash;(E.directionalLength!==y||E.pointLength!==m||E.spotLength!==p||E.rectAreaLength!==v||E.hemiLength!==b||E.numDirectionalShadows!==x||E.numPointShadows!==_||E.numSpotShadows!==A||E.numSpotMaps!==M)&&(i.directional.length=y,i.spot.length=p,i.rectArea.length=v,i.point.length=m,i.hemi.length=b,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=A+M-T,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=T,E.directionalLength=y,E.pointLength=m,E.spotLength=p,E.rectAreaLength=v,E.hemiLength=b,E.numDirectionalShadows=x,E.numPointShadows=_,E.numSpotShadows=A,E.numSpotMaps=M,i.version=aOe++)}function u(d,c){let h=0,f=0,g=0,y=0,m=0,p=c.matrixWorldInverse;for(let v=0,b=d.length;v<b;v++){let x=d[v];if(x.isDirectionalLight){let _=i.directional[h];_.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),_.direction.sub(o),_.direction.transformDirection(p),h++}else if(x.isSpotLight){let _=i.spot[g];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(p),_.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),_.direction.sub(o),_.direction.transformDirection(p),g++}else if(x.isRectAreaLight){let _=i.rectArea[y];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(p),s.identity(),a.copy(x.matrixWorld),a.premultiply(p),s.extractRotation(a),_.halfWidth.set(x.width*.5,0,0),_.halfHeight.set(0,x.height*.5,0),_.halfWidth.applyMatrix4(s),_.halfHeight.applyMatrix4(s),y++}else if(x.isPointLight){let _=i.point[f];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(p),f++}else if(x.isHemisphereLight){let _=i.hemi[m];_.direction.setFromMatrixPosition(x.matrixWorld),_.direction.transformDirection(p),m++}}}return{setup:l,setupView:u,state:i}}function d7(e,t){let r=new lOe(e,t),n=[],i=[];function o(){n.length=0,i.length=0}function a(d){n.push(d)}function s(d){i.push(d)}function l(d){r.setup(n,d)}function u(d){r.setupView(n,d)}return{init:o,state:{lightsArray:n,shadowsArray:i,lights:r},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:s}}function uOe(e,t){let r=new WeakMap;function n(o,a=0){let s=r.get(o),l;return s===void 0?(l=new d7(e,t),r.set(o,[l])):a>=s.length?(l=new d7(e,t),s.push(l)):l=s[a],l}function i(){r=new WeakMap}return{get:n,dispose:i}}var Rne=class extends EM{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Uh,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},cOe=class extends EM{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new X,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},dOe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,hOe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function fOe(e,t,r){let n=new IV,i=new Ae,o=new Ae,a=new Mr,s=new Rne({depthPacking:yne}),l=new cOe,u={},d=r.maxTextureSize,c={[Wu]:Ao,[Ao]:Wu,[ys]:ys},h=new An({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ae},radius:{value:4}},vertexShader:dOe,fragmentShader:hOe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let g=new Jt;g.setAttribute("position",new fr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let y=new Fa(g,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=TV,this.render=function(x,_,A){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||x.length===0)return;let M=e.getRenderTarget(),T=e.getActiveCubeFace(),C=e.getActiveMipmapLevel(),E=e.state;E.setBlending(Gi),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);for(let D=0,I=x.length;D<I;D++){let k=x[D],L=k.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",k,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;i.copy(L.mapSize);let U=L.getFrameExtents();if(i.multiply(U),o.copy(L.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(o.x=Math.floor(d/U.x),i.x=o.x*U.x,L.mapSize.x=o.x),i.y>d&&(o.y=Math.floor(d/U.y),i.y=o.y*U.y,L.mapSize.y=o.y)),L.map===null){let G=this.type!==Q_?{minFilter:Cn,magFilter:Cn}:{};L.map=new vn(i.x,i.y,G),L.map.texture.name=k.name+".shadowMap",L.camera.updateProjectionMatrix()}e.setRenderTarget(L.map),e.clear();let W=L.getViewportCount();for(let G=0;G<W;G++){let z=L.getViewport(G);a.set(o.x*z.x,o.y*z.y,o.x*z.z,o.y*z.w),E.viewport(a),L.updateMatrices(k,G),n=L.getFrustum(),b(_,A,L.camera,k,this.type)}L.isPointLightShadow!==!0&&this.type===Q_&&p(L,A),L.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(M,T,C)};function p(x,_){let A=t.update(y);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new vn(i.x,i.y)),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,e.setRenderTarget(x.mapPass),e.clear(),e.renderBufferDirect(_,null,A,h,y,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,e.setRenderTarget(x.map),e.clear(),e.renderBufferDirect(_,null,A,f,y,null)}function v(x,_,A,M,T,C){let E=null,D=A.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(D!==void 0)E=D;else if(E=A.isPointLight===!0?l:s,e.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0){let I=E.uuid,k=_.uuid,L=u[I];L===void 0&&(L={},u[I]=L);let U=L[k];U===void 0&&(U=E.clone(),L[k]=U),E=U}return E.visible=_.visible,E.wireframe=_.wireframe,C===Q_?E.side=_.shadowSide!==null?_.shadowSide:_.side:E.side=_.shadowSide!==null?_.shadowSide:c[_.side],E.alphaMap=_.alphaMap,E.alphaTest=_.alphaTest,E.map=_.map,E.clipShadows=_.clipShadows,E.clippingPlanes=_.clippingPlanes,E.clipIntersection=_.clipIntersection,E.displacementMap=_.displacementMap,E.displacementScale=_.displacementScale,E.displacementBias=_.displacementBias,E.wireframeLinewidth=_.wireframeLinewidth,E.linewidth=_.linewidth,A.isPointLight===!0&&E.isMeshDistanceMaterial===!0&&(E.referencePosition.setFromMatrixPosition(A.matrixWorld),E.nearDistance=M,E.farDistance=T),E}function b(x,_,A,M,T){if(x.visible===!1)return;if(x.layers.test(_.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&T===Q_)&&(!x.frustumCulled||n.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,x.matrixWorld);let E=t.update(x),D=x.material;if(Array.isArray(D)){let I=E.groups;for(let k=0,L=I.length;k<L;k++){let U=I[k],W=D[U.materialIndex];if(W&&W.visible){let G=v(x,W,M,A.near,A.far,T);e.renderBufferDirect(A,null,E,G,x,U)}}}else if(D.visible){let I=v(x,D,M,A.near,A.far,T);e.renderBufferDirect(A,null,E,I,x,null)}}let C=x.children;for(let E=0,D=C.length;E<D;E++)b(C[E],_,A,M,T)}}function pOe(e,t,r){let n=r.isWebGL2;function i(){let fe=!1,Be=new Mr,de=null,Ye=new Mr(0,0,0,0);return{setMask:function($e){de!==$e&&!fe&&(e.colorMask($e,$e,$e,$e),de=$e)},setLocked:function($e){fe=$e},setClear:function($e,ze,ct,At,rr){rr===!0&&($e*=At,ze*=At,ct*=At),Be.set($e,ze,ct,At),Ye.equals(Be)===!1&&(e.clearColor($e,ze,ct,At),Ye.copy(Be))},reset:function(){fe=!1,de=null,Ye.set(-1,0,0,0)}}}function o(){let fe=!1,Be=null,de=null,Ye=null;return{setTest:function($e){$e?ce(2929):ae(2929)},setMask:function($e){Be!==$e&&!fe&&(e.depthMask($e),Be=$e)},setFunc:function($e){if(de!==$e){switch($e){case LCe:e.depthFunc(512);break;case BCe:e.depthFunc(519);break;case NCe:e.depthFunc(513);break;case i5:e.depthFunc(515);break;case kCe:e.depthFunc(514);break;case FCe:e.depthFunc(518);break;case zCe:e.depthFunc(516);break;case UCe:e.depthFunc(517);break;default:e.depthFunc(515)}de=$e}},setLocked:function($e){fe=$e},setClear:function($e){Ye!==$e&&(e.clearDepth($e),Ye=$e)},reset:function(){fe=!1,Be=null,de=null,Ye=null}}}function a(){let fe=!1,Be=null,de=null,Ye=null,$e=null,ze=null,ct=null,At=null,rr=null;return{setTest:function(Gt){fe||(Gt?ce(2960):ae(2960))},setMask:function(Gt){Be!==Gt&&!fe&&(e.stencilMask(Gt),Be=Gt)},setFunc:function(Gt,Lr,nr){(de!==Gt||Ye!==Lr||$e!==nr)&&(e.stencilFunc(Gt,Lr,nr),de=Gt,Ye=Lr,$e=nr)},setOp:function(Gt,Lr,nr){(ze!==Gt||ct!==Lr||At!==nr)&&(e.stencilOp(Gt,Lr,nr),ze=Gt,ct=Lr,At=nr)},setLocked:function(Gt){fe=Gt},setClear:function(Gt){rr!==Gt&&(e.clearStencil(Gt),rr=Gt)},reset:function(){fe=!1,Be=null,de=null,Ye=null,$e=null,ze=null,ct=null,At=null,rr=null}}}let s=new i,l=new o,u=new a,d=new WeakMap,c=new WeakMap,h={},f={},g=new WeakMap,y=[],m=null,p=!1,v=null,b=null,x=null,_=null,A=null,M=null,T=null,C=!1,E=null,D=null,I=null,k=null,L=null,U=e.getParameter(35661),W=!1,G=0,z=e.getParameter(7938);z.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(z)[1]),W=G>=1):z.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),W=G>=2);let V=null,j={},H=e.getParameter(3088),Y=e.getParameter(2978),Q=new Mr().fromArray(H),$=new Mr().fromArray(Y);function ne(fe,Be,de){let Ye=new Uint8Array(4),$e=e.createTexture();e.bindTexture(fe,$e),e.texParameteri(fe,10241,9728),e.texParameteri(fe,10240,9728);for(let ze=0;ze<de;ze++)e.texImage2D(Be+ze,0,6408,1,1,0,6408,5121,Ye);return $e}let Z={};Z[3553]=ne(3553,3553,1),Z[34067]=ne(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ce(2929),l.setFunc(i5),Se(!1),Fe(r9),ce(2884),be(Gi);function ce(fe){h[fe]!==!0&&(e.enable(fe),h[fe]=!0)}function ae(fe){h[fe]!==!1&&(e.disable(fe),h[fe]=!1)}function ie(fe,Be){return f[fe]!==Be?(e.bindFramebuffer(fe,Be),f[fe]=Be,n&&(fe===36009&&(f[36160]=Be),fe===36160&&(f[36009]=Be)),!0):!1}function le(fe,Be){let de=y,Ye=!1;if(fe)if(de=g.get(Be),de===void 0&&(de=[],g.set(Be,de)),fe.isWebGLMultipleRenderTargets){let $e=fe.texture;if(de.length!==$e.length||de[0]!==36064){for(let ze=0,ct=$e.length;ze<ct;ze++)de[ze]=36064+ze;de.length=$e.length,Ye=!0}}else de[0]!==36064&&(de[0]=36064,Ye=!0);else de[0]!==1029&&(de[0]=1029,Ye=!0);Ye&&(r.isWebGL2?e.drawBuffers(de):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(de))}function se(fe){return m!==fe?(e.useProgram(fe),m=fe,!0):!1}let re={[Jy]:32774,[SCe]:32778,[ACe]:32779};if(n)re[a9]=32775,re[s9]=32776;else{let fe=t.get("EXT_blend_minmax");fe!==null&&(re[a9]=fe.MIN_EXT,re[s9]=fe.MAX_EXT)}let ye={[MCe]:0,[CCe]:1,[TCe]:768,[cne]:770,[ICe]:776,[OCe]:774,[PCe]:772,[ECe]:769,[dne]:771,[RCe]:775,[DCe]:773};function be(fe,Be,de,Ye,$e,ze,ct,At){if(fe===Gi){p===!0&&(ae(3042),p=!1);return}if(p===!1&&(ce(3042),p=!0),fe!==_Ce){if(fe!==v||At!==C){if((b!==Jy||A!==Jy)&&(e.blendEquation(32774),b=Jy,A=Jy),At)switch(fe){case Jg:e.blendFuncSeparate(1,771,1,771);break;case n9:e.blendFunc(1,1);break;case i9:e.blendFuncSeparate(0,769,0,1);break;case o9:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}else switch(fe){case Jg:e.blendFuncSeparate(770,771,1,771);break;case n9:e.blendFunc(770,1);break;case i9:e.blendFuncSeparate(0,769,0,1);break;case o9:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}x=null,_=null,M=null,T=null,v=fe,C=At}return}$e=$e||Be,ze=ze||de,ct=ct||Ye,(Be!==b||$e!==A)&&(e.blendEquationSeparate(re[Be],re[$e]),b=Be,A=$e),(de!==x||Ye!==_||ze!==M||ct!==T)&&(e.blendFuncSeparate(ye[de],ye[Ye],ye[ze],ye[ct]),x=de,_=Ye,M=ze,T=ct),v=fe,C=!1}function _e(fe,Be){fe.side===ys?ae(2884):ce(2884);let de=fe.side===Ao;Be&&(de=!de),Se(de),fe.blending===Jg&&fe.transparent===!1?be(Gi):be(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.premultipliedAlpha),l.setFunc(fe.depthFunc),l.setTest(fe.depthTest),l.setMask(fe.depthWrite),s.setMask(fe.colorWrite);let Ye=fe.stencilWrite;u.setTest(Ye),Ye&&(u.setMask(fe.stencilWriteMask),u.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),u.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),Le(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),fe.alphaToCoverage===!0?ce(32926):ae(32926)}function Se(fe){E!==fe&&(fe?e.frontFace(2304):e.frontFace(2305),E=fe)}function Fe(fe){fe!==bCe?(ce(2884),fe!==D&&(fe===r9?e.cullFace(1029):fe===xCe?e.cullFace(1028):e.cullFace(1032))):ae(2884),D=fe}function Re(fe){fe!==I&&(W&&e.lineWidth(fe),I=fe)}function Le(fe,Be,de){fe?(ce(32823),(k!==Be||L!==de)&&(e.polygonOffset(Be,de),k=Be,L=de)):ae(32823)}function rt(fe){fe?ce(3089):ae(3089)}function st(fe){fe===void 0&&(fe=33984+U-1),V!==fe&&(e.activeTexture(fe),V=fe)}function he(fe,Be,de){de===void 0&&(V===null?de=33984+U-1:de=V);let Ye=j[de];Ye===void 0&&(Ye={type:void 0,texture:void 0},j[de]=Ye),(Ye.type!==fe||Ye.texture!==Be)&&(V!==de&&(e.activeTexture(de),V=de),e.bindTexture(fe,Be||Z[fe]),Ye.type=fe,Ye.texture=Be)}function q(){let fe=j[V];fe!==void 0&&fe.type!==void 0&&(e.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)}function J(){try{e.compressedTexImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function ge(){try{e.compressedTexImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Pe(){try{e.texSubImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function De(){try{e.texSubImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ve(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function et(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ce(){try{e.texStorage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Je(){try{e.texStorage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function ut(){try{e.texImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function pt(){try{e.texImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ke(fe){Q.equals(fe)===!1&&(e.scissor(fe.x,fe.y,fe.z,fe.w),Q.copy(fe))}function gt(fe){$.equals(fe)===!1&&(e.viewport(fe.x,fe.y,fe.z,fe.w),$.copy(fe))}function we(fe,Be){let de=c.get(Be);de===void 0&&(de=new WeakMap,c.set(Be,de));let Ye=de.get(fe);Ye===void 0&&(Ye=e.getUniformBlockIndex(Be,fe.name),de.set(fe,Ye))}function Xe(fe,Be){let de=c.get(Be).get(fe);d.get(Be)!==de&&(e.uniformBlockBinding(Be,de,fe.__bindingPointIndex),d.set(Be,de))}function nt(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),n===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},V=null,j={},f={},g=new WeakMap,y=[],m=null,p=!1,v=null,b=null,x=null,_=null,A=null,M=null,T=null,C=!1,E=null,D=null,I=null,k=null,L=null,Q.set(0,0,e.canvas.width,e.canvas.height),$.set(0,0,e.canvas.width,e.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:ce,disable:ae,bindFramebuffer:ie,drawBuffers:le,useProgram:se,setBlending:be,setMaterial:_e,setFlipSided:Se,setCullFace:Fe,setLineWidth:Re,setPolygonOffset:Le,setScissorTest:rt,activeTexture:st,bindTexture:he,unbindTexture:q,compressedTexImage2D:J,compressedTexImage3D:ge,texImage2D:ut,texImage3D:pt,updateUBOMapping:we,uniformBlockBinding:Xe,texStorage2D:Ce,texStorage3D:Je,texSubImage2D:Pe,texSubImage3D:De,compressedTexSubImage2D:Ve,compressedTexSubImage3D:et,scissor:Ke,viewport:gt,reset:nt}}function mOe(e,t,r,n,i,o,a){let s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,d=i.maxTextureSize,c=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap,y,m=new WeakMap,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(he,q){return p?new OffscreenCanvas(he,q):PD("canvas")}function b(he,q,J,ge){let Pe=1;if((he.width>ge||he.height>ge)&&(Pe=ge/Math.max(he.width,he.height)),Pe<1||q===!0)if(typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&he instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&he instanceof ImageBitmap){let De=q?ED:Math.floor,Ve=De(Pe*he.width),et=De(Pe*he.height);y===void 0&&(y=v(Ve,et));let Ce=J?v(Ve,et):y;return Ce.width=Ve,Ce.height=et,Ce.getContext("2d").drawImage(he,0,0,Ve,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+he.width+"x"+he.height+") to ("+Ve+"x"+et+")."),Ce}else return"data"in he&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+he.width+"x"+he.height+")."),he;return he}function x(he){return c5(he.width)&&c5(he.height)}function _(he){return s?!1:he.wrapS!==Ei||he.wrapT!==Ei||he.minFilter!==Cn&&he.minFilter!==Or}function A(he,q){return he.generateMipmaps&&q&&he.minFilter!==Cn&&he.minFilter!==Or}function M(he){e.generateMipmap(he)}function T(he,q,J,ge,Pe=!1){if(s===!1)return q;if(he!==null){if(e[he]!==void 0)return e[he];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+he+"'")}let De=q;return q===6403&&(J===5126&&(De=33326),J===5131&&(De=33325),J===5121&&(De=33321)),q===33319&&(J===5126&&(De=33328),J===5131&&(De=33327),J===5121&&(De=33323)),q===6408&&(J===5126&&(De=34836),J===5131&&(De=34842),J===5121&&(De=ge===Ar&&Pe===!1?35907:32856),J===32819&&(De=32854),J===32820&&(De=32855)),(De===33325||De===33326||De===33327||De===33328||De===34842||De===34836)&&t.get("EXT_color_buffer_float"),De}function C(he,q,J){return A(he,J)===!0||he.isFramebufferTexture&&he.minFilter!==Cn&&he.minFilter!==Or?Math.log2(Math.max(q.width,q.height))+1:he.mipmaps!==void 0&&he.mipmaps.length>0?he.mipmaps.length:he.isCompressedTexture&&Array.isArray(he.image)?q.mipmaps.length:1}function E(he){return he===Cn||he===l9||he===FL?9728:9729}function D(he){let q=he.target;q.removeEventListener("dispose",D),k(q),q.isVideoTexture&&g.delete(q)}function I(he){let q=he.target;q.removeEventListener("dispose",I),U(q)}function k(he){let q=n.get(he);if(q.__webglInit===void 0)return;let J=he.source,ge=m.get(J);if(ge){let Pe=ge[q.__cacheKey];Pe.usedTimes--,Pe.usedTimes===0&&L(he),Object.keys(ge).length===0&&m.delete(J)}n.remove(he)}function L(he){let q=n.get(he);e.deleteTexture(q.__webglTexture);let J=he.source,ge=m.get(J);delete ge[q.__cacheKey],a.memory.textures--}function U(he){let q=he.texture,J=n.get(he),ge=n.get(q);if(ge.__webglTexture!==void 0&&(e.deleteTexture(ge.__webglTexture),a.memory.textures--),he.depthTexture&&he.depthTexture.dispose(),he.isWebGLCubeRenderTarget)for(let Pe=0;Pe<6;Pe++)e.deleteFramebuffer(J.__webglFramebuffer[Pe]),J.__webglDepthbuffer&&e.deleteRenderbuffer(J.__webglDepthbuffer[Pe]);else{if(e.deleteFramebuffer(J.__webglFramebuffer),J.__webglDepthbuffer&&e.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&e.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer)for(let Pe=0;Pe<J.__webglColorRenderbuffer.length;Pe++)J.__webglColorRenderbuffer[Pe]&&e.deleteRenderbuffer(J.__webglColorRenderbuffer[Pe]);J.__webglDepthRenderbuffer&&e.deleteRenderbuffer(J.__webglDepthRenderbuffer)}if(he.isWebGLMultipleRenderTargets)for(let Pe=0,De=q.length;Pe<De;Pe++){let Ve=n.get(q[Pe]);Ve.__webglTexture&&(e.deleteTexture(Ve.__webglTexture),a.memory.textures--),n.remove(q[Pe])}n.remove(q),n.remove(he)}let W=0;function G(){W=0}function z(){let he=W;return he>=l&&console.warn("THREE.WebGLTextures: Trying to use "+he+" texture units while this GPU supports only "+l),W+=1,he}function V(he){let q=[];return q.push(he.wrapS),q.push(he.wrapT),q.push(he.wrapR||0),q.push(he.magFilter),q.push(he.minFilter),q.push(he.anisotropy),q.push(he.internalFormat),q.push(he.format),q.push(he.type),q.push(he.generateMipmaps),q.push(he.premultiplyAlpha),q.push(he.flipY),q.push(he.unpackAlignment),q.push(he.encoding),q.join()}function j(he,q){let J=n.get(he);if(he.isVideoTexture&&rt(he),he.isRenderTargetTexture===!1&&he.version>0&&J.__version!==he.version){let ge=he.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ae(J,he,q);return}}r.bindTexture(3553,J.__webglTexture,33984+q)}function H(he,q){let J=n.get(he);if(he.version>0&&J.__version!==he.version){ae(J,he,q);return}r.bindTexture(35866,J.__webglTexture,33984+q)}function Y(he,q){let J=n.get(he);if(he.version>0&&J.__version!==he.version){ae(J,he,q);return}r.bindTexture(32879,J.__webglTexture,33984+q)}function Q(he,q){let J=n.get(he);if(he.version>0&&J.__version!==he.version){ie(J,he,q);return}r.bindTexture(34067,J.__webglTexture,33984+q)}let $={[dh]:10497,[Ei]:33071,[s5]:33648},ne={[Cn]:9728,[l9]:9984,[FL]:9986,[Or]:9729,[YCe]:9985,[Dx]:9987};function Z(he,q,J){if(J?(e.texParameteri(he,10242,$[q.wrapS]),e.texParameteri(he,10243,$[q.wrapT]),(he===32879||he===35866)&&e.texParameteri(he,32882,$[q.wrapR]),e.texParameteri(he,10240,ne[q.magFilter]),e.texParameteri(he,10241,ne[q.minFilter])):(e.texParameteri(he,10242,33071),e.texParameteri(he,10243,33071),(he===32879||he===35866)&&e.texParameteri(he,32882,33071),(q.wrapS!==Ei||q.wrapT!==Ei)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(he,10240,E(q.magFilter)),e.texParameteri(he,10241,E(q.minFilter)),q.minFilter!==Cn&&q.minFilter!==Or&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let ge=t.get("EXT_texture_filter_anisotropic");if(q.magFilter===Cn||q.minFilter!==FL&&q.minFilter!==Dx||q.type===ka&&t.has("OES_texture_float_linear")===!1||s===!1&&q.type===g0&&t.has("OES_texture_half_float_linear")===!1)return;(q.anisotropy>1||n.get(q).__currentAnisotropy)&&(e.texParameterf(he,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),n.get(q).__currentAnisotropy=q.anisotropy)}}function ce(he,q){let J=!1;he.__webglInit===void 0&&(he.__webglInit=!0,q.addEventListener("dispose",D));let ge=q.source,Pe=m.get(ge);Pe===void 0&&(Pe={},m.set(ge,Pe));let De=V(q);if(De!==he.__cacheKey){Pe[De]===void 0&&(Pe[De]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,J=!0),Pe[De].usedTimes++;let Ve=Pe[he.__cacheKey];Ve!==void 0&&(Pe[he.__cacheKey].usedTimes--,Ve.usedTimes===0&&L(q)),he.__cacheKey=De,he.__webglTexture=Pe[De].texture}return J}function ae(he,q,J){let ge=3553;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(ge=35866),q.isData3DTexture&&(ge=32879);let Pe=ce(he,q),De=q.source;r.bindTexture(ge,he.__webglTexture,33984+J);let Ve=n.get(De);if(De.version!==Ve.__version||Pe===!0){r.activeTexture(33984+J),e.pixelStorei(37440,q.flipY),e.pixelStorei(37441,q.premultiplyAlpha),e.pixelStorei(3317,q.unpackAlignment),e.pixelStorei(37443,0);let et=_(q)&&x(q.image)===!1,Ce=b(q.image,et,!1,d);Ce=st(q,Ce);let Je=x(Ce)||s,ut=o.convert(q.format,q.encoding),pt=o.convert(q.type),Ke=T(q.internalFormat,ut,pt,q.encoding,q.isVideoTexture);Z(ge,q,Je);let gt,we=q.mipmaps,Xe=s&&q.isVideoTexture!==!0,nt=Ve.__version===void 0||Pe===!0,fe=C(q,Ce,Je);if(q.isDepthTexture)Ke=6402,s?q.type===ka?Ke=36012:q.type===hh?Ke=33190:q.type===Qg?Ke=35056:Ke=33189:q.type===ka&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),q.format===Zg&&Ke===6402&&q.type!==pne&&q.type!==hh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=hh,pt=o.convert(q.type)),q.format===v0&&Ke===6402&&(Ke=34041,q.type!==Qg&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=Qg,pt=o.convert(q.type))),nt&&(Xe?r.texStorage2D(3553,1,Ke,Ce.width,Ce.height):r.texImage2D(3553,0,Ke,Ce.width,Ce.height,0,ut,pt,null));else if(q.isDataTexture)if(we.length>0&&Je){Xe&&nt&&r.texStorage2D(3553,fe,Ke,we[0].width,we[0].height);for(let Be=0,de=we.length;Be<de;Be++)gt=we[Be],Xe?r.texSubImage2D(3553,Be,0,0,gt.width,gt.height,ut,pt,gt.data):r.texImage2D(3553,Be,Ke,gt.width,gt.height,0,ut,pt,gt.data);q.generateMipmaps=!1}else Xe?(nt&&r.texStorage2D(3553,fe,Ke,Ce.width,Ce.height),r.texSubImage2D(3553,0,0,0,Ce.width,Ce.height,ut,pt,Ce.data)):r.texImage2D(3553,0,Ke,Ce.width,Ce.height,0,ut,pt,Ce.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){Xe&&nt&&r.texStorage3D(35866,fe,Ke,we[0].width,we[0].height,Ce.depth);for(let Be=0,de=we.length;Be<de;Be++)gt=we[Be],q.format!==Ys?ut!==null?Xe?r.compressedTexSubImage3D(35866,Be,0,0,0,gt.width,gt.height,Ce.depth,ut,gt.data,0,0):r.compressedTexImage3D(35866,Be,Ke,gt.width,gt.height,Ce.depth,0,gt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xe?r.texSubImage3D(35866,Be,0,0,0,gt.width,gt.height,Ce.depth,ut,pt,gt.data):r.texImage3D(35866,Be,Ke,gt.width,gt.height,Ce.depth,0,ut,pt,gt.data)}else{Xe&&nt&&r.texStorage2D(3553,fe,Ke,we[0].width,we[0].height);for(let Be=0,de=we.length;Be<de;Be++)gt=we[Be],q.format!==Ys?ut!==null?Xe?r.compressedTexSubImage2D(3553,Be,0,0,gt.width,gt.height,ut,gt.data):r.compressedTexImage2D(3553,Be,Ke,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xe?r.texSubImage2D(3553,Be,0,0,gt.width,gt.height,ut,pt,gt.data):r.texImage2D(3553,Be,Ke,gt.width,gt.height,0,ut,pt,gt.data)}else if(q.isDataArrayTexture)Xe?(nt&&r.texStorage3D(35866,fe,Ke,Ce.width,Ce.height,Ce.depth),r.texSubImage3D(35866,0,0,0,0,Ce.width,Ce.height,Ce.depth,ut,pt,Ce.data)):r.texImage3D(35866,0,Ke,Ce.width,Ce.height,Ce.depth,0,ut,pt,Ce.data);else if(q.isData3DTexture)Xe?(nt&&r.texStorage3D(32879,fe,Ke,Ce.width,Ce.height,Ce.depth),r.texSubImage3D(32879,0,0,0,0,Ce.width,Ce.height,Ce.depth,ut,pt,Ce.data)):r.texImage3D(32879,0,Ke,Ce.width,Ce.height,Ce.depth,0,ut,pt,Ce.data);else if(q.isFramebufferTexture){if(nt)if(Xe)r.texStorage2D(3553,fe,Ke,Ce.width,Ce.height);else{let Be=Ce.width,de=Ce.height;for(let Ye=0;Ye<fe;Ye++)r.texImage2D(3553,Ye,Ke,Be,de,0,ut,pt,null),Be>>=1,de>>=1}}else if(we.length>0&&Je){Xe&&nt&&r.texStorage2D(3553,fe,Ke,we[0].width,we[0].height);for(let Be=0,de=we.length;Be<de;Be++)gt=we[Be],Xe?r.texSubImage2D(3553,Be,0,0,ut,pt,gt):r.texImage2D(3553,Be,Ke,ut,pt,gt);q.generateMipmaps=!1}else Xe?(nt&&r.texStorage2D(3553,fe,Ke,Ce.width,Ce.height),r.texSubImage2D(3553,0,0,0,ut,pt,Ce)):r.texImage2D(3553,0,Ke,ut,pt,Ce);A(q,Je)&&M(ge),Ve.__version=De.version,q.onUpdate&&q.onUpdate(q)}he.__version=q.version}function ie(he,q,J){if(q.image.length!==6)return;let ge=ce(he,q),Pe=q.source;r.bindTexture(34067,he.__webglTexture,33984+J);let De=n.get(Pe);if(Pe.version!==De.__version||ge===!0){r.activeTexture(33984+J),e.pixelStorei(37440,q.flipY),e.pixelStorei(37441,q.premultiplyAlpha),e.pixelStorei(3317,q.unpackAlignment),e.pixelStorei(37443,0);let Ve=q.isCompressedTexture||q.image[0].isCompressedTexture,et=q.image[0]&&q.image[0].isDataTexture,Ce=[];for(let Be=0;Be<6;Be++)!Ve&&!et?Ce[Be]=b(q.image[Be],!1,!0,u):Ce[Be]=et?q.image[Be].image:q.image[Be],Ce[Be]=st(q,Ce[Be]);let Je=Ce[0],ut=x(Je)||s,pt=o.convert(q.format,q.encoding),Ke=o.convert(q.type),gt=T(q.internalFormat,pt,Ke,q.encoding),we=s&&q.isVideoTexture!==!0,Xe=De.__version===void 0||ge===!0,nt=C(q,Je,ut);Z(34067,q,ut);let fe;if(Ve){we&&Xe&&r.texStorage2D(34067,nt,gt,Je.width,Je.height);for(let Be=0;Be<6;Be++){fe=Ce[Be].mipmaps;for(let de=0;de<fe.length;de++){let Ye=fe[de];q.format!==Ys?pt!==null?we?r.compressedTexSubImage2D(34069+Be,de,0,0,Ye.width,Ye.height,pt,Ye.data):r.compressedTexImage2D(34069+Be,de,gt,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):we?r.texSubImage2D(34069+Be,de,0,0,Ye.width,Ye.height,pt,Ke,Ye.data):r.texImage2D(34069+Be,de,gt,Ye.width,Ye.height,0,pt,Ke,Ye.data)}}}else{fe=q.mipmaps,we&&Xe&&(fe.length>0&&nt++,r.texStorage2D(34067,nt,gt,Ce[0].width,Ce[0].height));for(let Be=0;Be<6;Be++)if(et){we?r.texSubImage2D(34069+Be,0,0,0,Ce[Be].width,Ce[Be].height,pt,Ke,Ce[Be].data):r.texImage2D(34069+Be,0,gt,Ce[Be].width,Ce[Be].height,0,pt,Ke,Ce[Be].data);for(let de=0;de<fe.length;de++){let Ye=fe[de].image[Be].image;we?r.texSubImage2D(34069+Be,de+1,0,0,Ye.width,Ye.height,pt,Ke,Ye.data):r.texImage2D(34069+Be,de+1,gt,Ye.width,Ye.height,0,pt,Ke,Ye.data)}}else{we?r.texSubImage2D(34069+Be,0,0,0,pt,Ke,Ce[Be]):r.texImage2D(34069+Be,0,gt,pt,Ke,Ce[Be]);for(let de=0;de<fe.length;de++){let Ye=fe[de];we?r.texSubImage2D(34069+Be,de+1,0,0,pt,Ke,Ye.image[Be]):r.texImage2D(34069+Be,de+1,gt,pt,Ke,Ye.image[Be])}}}A(q,ut)&&M(34067),De.__version=Pe.version,q.onUpdate&&q.onUpdate(q)}he.__version=q.version}function le(he,q,J,ge,Pe){let De=o.convert(J.format,J.encoding),Ve=o.convert(J.type),et=T(J.internalFormat,De,Ve,J.encoding);n.get(q).__hasExternalTextures||(Pe===32879||Pe===35866?r.texImage3D(Pe,0,et,q.width,q.height,q.depth,0,De,Ve,null):r.texImage2D(Pe,0,et,q.width,q.height,0,De,Ve,null)),r.bindFramebuffer(36160,he),Le(q)?h.framebufferTexture2DMultisampleEXT(36160,ge,Pe,n.get(J).__webglTexture,0,Re(q)):(Pe===3553||Pe>=34069&&Pe<=34074)&&e.framebufferTexture2D(36160,ge,Pe,n.get(J).__webglTexture,0),r.bindFramebuffer(36160,null)}function se(he,q,J){if(e.bindRenderbuffer(36161,he),q.depthBuffer&&!q.stencilBuffer){let ge=33189;if(J||Le(q)){let Pe=q.depthTexture;Pe&&Pe.isDepthTexture&&(Pe.type===ka?ge=36012:Pe.type===hh&&(ge=33190));let De=Re(q);Le(q)?h.renderbufferStorageMultisampleEXT(36161,De,ge,q.width,q.height):e.renderbufferStorageMultisample(36161,De,ge,q.width,q.height)}else e.renderbufferStorage(36161,ge,q.width,q.height);e.framebufferRenderbuffer(36160,36096,36161,he)}else if(q.depthBuffer&&q.stencilBuffer){let ge=Re(q);J&&Le(q)===!1?e.renderbufferStorageMultisample(36161,ge,35056,q.width,q.height):Le(q)?h.renderbufferStorageMultisampleEXT(36161,ge,35056,q.width,q.height):e.renderbufferStorage(36161,34041,q.width,q.height),e.framebufferRenderbuffer(36160,33306,36161,he)}else{let ge=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let Pe=0;Pe<ge.length;Pe++){let De=ge[Pe],Ve=o.convert(De.format,De.encoding),et=o.convert(De.type),Ce=T(De.internalFormat,Ve,et,De.encoding),Je=Re(q);J&&Le(q)===!1?e.renderbufferStorageMultisample(36161,Je,Ce,q.width,q.height):Le(q)?h.renderbufferStorageMultisampleEXT(36161,Je,Ce,q.width,q.height):e.renderbufferStorage(36161,Ce,q.width,q.height)}}e.bindRenderbuffer(36161,null)}function re(he,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,he),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),j(q.depthTexture,0);let J=n.get(q.depthTexture).__webglTexture,ge=Re(q);if(q.depthTexture.format===Zg)Le(q)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,J,0,ge):e.framebufferTexture2D(36160,36096,3553,J,0);else if(q.depthTexture.format===v0)Le(q)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,J,0,ge):e.framebufferTexture2D(36160,33306,3553,J,0);else throw new Error("Unknown depthTexture format")}function ye(he){let q=n.get(he),J=he.isWebGLCubeRenderTarget===!0;if(he.depthTexture&&!q.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");re(q.__webglFramebuffer,he)}else if(J){q.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)r.bindFramebuffer(36160,q.__webglFramebuffer[ge]),q.__webglDepthbuffer[ge]=e.createRenderbuffer(),se(q.__webglDepthbuffer[ge],he,!1)}else r.bindFramebuffer(36160,q.__webglFramebuffer),q.__webglDepthbuffer=e.createRenderbuffer(),se(q.__webglDepthbuffer,he,!1);r.bindFramebuffer(36160,null)}function be(he,q,J){let ge=n.get(he);q!==void 0&&le(ge.__webglFramebuffer,he,he.texture,36064,3553),J!==void 0&&ye(he)}function _e(he){let q=he.texture,J=n.get(he),ge=n.get(q);he.addEventListener("dispose",I),he.isWebGLMultipleRenderTargets!==!0&&(ge.__webglTexture===void 0&&(ge.__webglTexture=e.createTexture()),ge.__version=q.version,a.memory.textures++);let Pe=he.isWebGLCubeRenderTarget===!0,De=he.isWebGLMultipleRenderTargets===!0,Ve=x(he)||s;if(Pe){J.__webglFramebuffer=[];for(let et=0;et<6;et++)J.__webglFramebuffer[et]=e.createFramebuffer()}else{if(J.__webglFramebuffer=e.createFramebuffer(),De)if(i.drawBuffers){let et=he.texture;for(let Ce=0,Je=et.length;Ce<Je;Ce++){let ut=n.get(et[Ce]);ut.__webglTexture===void 0&&(ut.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&he.samples>0&&Le(he)===!1){let et=De?q:[q];J.__webglMultisampledFramebuffer=e.createFramebuffer(),J.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,J.__webglMultisampledFramebuffer);for(let Ce=0;Ce<et.length;Ce++){let Je=et[Ce];J.__webglColorRenderbuffer[Ce]=e.createRenderbuffer(),e.bindRenderbuffer(36161,J.__webglColorRenderbuffer[Ce]);let ut=o.convert(Je.format,Je.encoding),pt=o.convert(Je.type),Ke=T(Je.internalFormat,ut,pt,Je.encoding,he.isXRRenderTarget===!0),gt=Re(he);e.renderbufferStorageMultisample(36161,gt,Ke,he.width,he.height),e.framebufferRenderbuffer(36160,36064+Ce,36161,J.__webglColorRenderbuffer[Ce])}e.bindRenderbuffer(36161,null),he.depthBuffer&&(J.__webglDepthRenderbuffer=e.createRenderbuffer(),se(J.__webglDepthRenderbuffer,he,!0)),r.bindFramebuffer(36160,null)}}if(Pe){r.bindTexture(34067,ge.__webglTexture),Z(34067,q,Ve);for(let et=0;et<6;et++)le(J.__webglFramebuffer[et],he,q,36064,34069+et);A(q,Ve)&&M(34067),r.unbindTexture()}else if(De){let et=he.texture;for(let Ce=0,Je=et.length;Ce<Je;Ce++){let ut=et[Ce],pt=n.get(ut);r.bindTexture(3553,pt.__webglTexture),Z(3553,ut,Ve),le(J.__webglFramebuffer,he,ut,36064+Ce,3553),A(ut,Ve)&&M(3553)}r.unbindTexture()}else{let et=3553;(he.isWebGL3DRenderTarget||he.isWebGLArrayRenderTarget)&&(s?et=he.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(et,ge.__webglTexture),Z(et,q,Ve),le(J.__webglFramebuffer,he,q,36064,et),A(q,Ve)&&M(et),r.unbindTexture()}he.depthBuffer&&ye(he)}function Se(he){let q=x(he)||s,J=he.isWebGLMultipleRenderTargets===!0?he.texture:[he.texture];for(let ge=0,Pe=J.length;ge<Pe;ge++){let De=J[ge];if(A(De,q)){let Ve=he.isWebGLCubeRenderTarget?34067:3553,et=n.get(De).__webglTexture;r.bindTexture(Ve,et),M(Ve),r.unbindTexture()}}}function Fe(he){if(s&&he.samples>0&&Le(he)===!1){let q=he.isWebGLMultipleRenderTargets?he.texture:[he.texture],J=he.width,ge=he.height,Pe=16384,De=[],Ve=he.stencilBuffer?33306:36096,et=n.get(he),Ce=he.isWebGLMultipleRenderTargets===!0;if(Ce)for(let Je=0;Je<q.length;Je++)r.bindFramebuffer(36160,et.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Je,36161,null),r.bindFramebuffer(36160,et.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Je,3553,null,0);r.bindFramebuffer(36008,et.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,et.__webglFramebuffer);for(let Je=0;Je<q.length;Je++){De.push(36064+Je),he.depthBuffer&&De.push(Ve);let ut=et.__ignoreDepthValues!==void 0?et.__ignoreDepthValues:!1;if(ut===!1&&(he.depthBuffer&&(Pe|=256),he.stencilBuffer&&(Pe|=1024)),Ce&&e.framebufferRenderbuffer(36008,36064,36161,et.__webglColorRenderbuffer[Je]),ut===!0&&(e.invalidateFramebuffer(36008,[Ve]),e.invalidateFramebuffer(36009,[Ve])),Ce){let pt=n.get(q[Je]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,pt,0)}e.blitFramebuffer(0,0,J,ge,0,0,J,ge,Pe,9728),f&&e.invalidateFramebuffer(36008,De)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),Ce)for(let Je=0;Je<q.length;Je++){r.bindFramebuffer(36160,et.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Je,36161,et.__webglColorRenderbuffer[Je]);let ut=n.get(q[Je]).__webglTexture;r.bindFramebuffer(36160,et.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Je,3553,ut,0)}r.bindFramebuffer(36009,et.__webglMultisampledFramebuffer)}}function Re(he){return Math.min(c,he.samples)}function Le(he){let q=n.get(he);return s&&he.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function rt(he){let q=a.render.frame;g.get(he)!==q&&(g.set(he,q),he.update())}function st(he,q){let J=he.encoding,ge=he.format,Pe=he.type;return he.isCompressedTexture===!0||he.isVideoTexture===!0||he.format===u5||J!==rd&&(J===Ar?s===!1?t.has("EXT_sRGB")===!0&&ge===Ys?(he.format=u5,he.minFilter=Or,he.generateMipmaps=!1):q=_ne.sRGBToLinear(q):(ge!==Ys||Pe!==ua)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",J)),q}this.allocateTextureUnit=z,this.resetTextureUnits=G,this.setTexture2D=j,this.setTexture2DArray=H,this.setTexture3D=Y,this.setTextureCube=Q,this.rebindTextures=be,this.setupRenderTarget=_e,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=Fe,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=le,this.useMultisampledRTT=Le}function gOe(e,t,r){let n=r.isWebGL2;function i(o,a=null){let s;if(o===ua)return 5121;if(o===ZCe)return 32819;if(o===$Ce)return 32820;if(o===KCe)return 5120;if(o===JCe)return 5122;if(o===pne)return 5123;if(o===QCe)return 5124;if(o===hh)return 5125;if(o===ka)return 5126;if(o===g0)return n?5131:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===eTe)return 6406;if(o===Ys)return 6408;if(o===tTe)return 6409;if(o===rTe)return 6410;if(o===Zg)return 6402;if(o===v0)return 34041;if(o===u5)return s=t.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(o===nTe)return 6403;if(o===iTe)return 36244;if(o===SD)return 33319;if(o===oTe)return 33320;if(o===mne)return 36249;if(o===zL||o===UL||o===VL||o===jL)if(a===Ar)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(o===zL)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===UL)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===VL)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===jL)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===zL)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===UL)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===VL)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===jL)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===u9||o===c9||o===d9||o===h9)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===u9)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===c9)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===d9)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===h9)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===aTe)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===f9||o===p9)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(o===f9)return a===Ar?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(o===p9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===m9||o===g9||o===v9||o===y9||o===b9||o===x9||o===w9||o===_9||o===S9||o===A9||o===M9||o===C9||o===T9||o===E9)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(o===m9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===g9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===v9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===y9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===b9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===x9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===w9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===_9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===S9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===A9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===M9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===C9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===T9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===E9)return a===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===HL)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(o===HL)return a===Ar?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(o===sTe||o===P9||o===D9||o===O9)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(o===HL)return s.COMPRESSED_RED_RGTC1_EXT;if(o===P9)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===D9)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===O9)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Qg?n?34042:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):e[o]!==void 0?e[o]:null}return{convert:i}}var vOe=class extends ea{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Sb=class extends bn{constructor(){super(),this.isGroup=!0,this.type="Group"}},yOe={type:"move"},mB=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Sb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Sb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Sb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let n=null,i=null,o=null,a=this._targetRay,s=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(let g of e.hand.values()){let y=t.getJointPose(g,r),m=this._getHandJoint(l,g);y!==null&&(m.matrix.fromArray(y.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.jointRadius=y.radius),m.visible=y!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],c=u.position.distanceTo(d.position),h=.02,f=.005;l.inputState.pinching&&c>h+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&c<=h-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else s!==null&&e.gripSpace&&(i=t.getPose(e.gripSpace,r),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));a!==null&&(n=t.getPose(e.targetRaySpace,r),n===null&&i!==null&&(n=i),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(yOe)))}return a!==null&&(a.visible=n!==null),s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new Sb;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},Rx=class extends io{constructor(e,t,r,n,i,o,a,s,l,u){if(u=u!==void 0?u:Zg,u!==Zg&&u!==v0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Zg&&(r=hh),r===void 0&&u===v0&&(r=Qg),super(null,n,i,o,a,s,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Cn,this.minFilter=s!==void 0?s:Cn,this.flipY=!1,this.generateMipmaps=!1}},bOe=class extends Vo{constructor(e,t){super();let r=this,n=null,i=1,o=null,a="local-floor",s=1,l=null,u=null,d=null,c=null,h=null,f=null,g=t.getContextAttributes(),y=null,m=null,p=[],v=[],b=new Set,x=new Map,_=new ea;_.layers.enable(1),_.viewport=new Mr;let A=new ea;A.layers.enable(2),A.viewport=new Mr;let M=[_,A],T=new vOe;T.layers.enable(1),T.layers.enable(2);let C=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(H){let Y=p[H];return Y===void 0&&(Y=new mB,p[H]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(H){let Y=p[H];return Y===void 0&&(Y=new mB,p[H]=Y),Y.getGripSpace()},this.getHand=function(H){let Y=p[H];return Y===void 0&&(Y=new mB,p[H]=Y),Y.getHandSpace()};function D(H){let Y=v.indexOf(H.inputSource);if(Y===-1)return;let Q=p[Y];Q!==void 0&&Q.dispatchEvent({type:H.type,data:H.inputSource})}function I(){n.removeEventListener("select",D),n.removeEventListener("selectstart",D),n.removeEventListener("selectend",D),n.removeEventListener("squeeze",D),n.removeEventListener("squeezestart",D),n.removeEventListener("squeezeend",D),n.removeEventListener("end",I),n.removeEventListener("inputsourceschange",k);for(let H=0;H<p.length;H++){let Y=v[H];Y!==null&&(v[H]=null,p[H].disconnect(Y))}C=null,E=null,e.setRenderTarget(y),h=null,c=null,d=null,n=null,m=null,j.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(H){i=H,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(H){a=H,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(H){l=H},this.getBaseLayer=function(){return c!==null?c:h},this.getBinding=function(){return d},this.getFrame=function(){return f},this.getSession=function(){return n},this.setSession=async function(H){if(n=H,n!==null){if(y=e.getRenderTarget(),n.addEventListener("select",D),n.addEventListener("selectstart",D),n.addEventListener("selectend",D),n.addEventListener("squeeze",D),n.addEventListener("squeezestart",D),n.addEventListener("squeezeend",D),n.addEventListener("end",I),n.addEventListener("inputsourceschange",k),g.xrCompatible!==!0&&await t.makeXRCompatible(),n.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let Y={antialias:n.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(n,t,Y),n.updateRenderState({baseLayer:h}),m=new vn(h.framebufferWidth,h.framebufferHeight,{format:Ys,type:ua,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let Y=null,Q=null,$=null;g.depth&&($=g.stencil?35056:33190,Y=g.stencil?v0:Zg,Q=g.stencil?Qg:hh);let ne={colorFormat:32856,depthFormat:$,scaleFactor:i};d=new XRWebGLBinding(n,t),c=d.createProjectionLayer(ne),n.updateRenderState({layers:[c]}),m=new vn(c.textureWidth,c.textureHeight,{format:Ys,type:ua,depthTexture:new Rx(c.textureWidth,c.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});let Z=e.properties.get(m);Z.__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await n.requestReferenceSpace(a),j.setContext(n),j.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function k(H){for(let Y=0;Y<H.removed.length;Y++){let Q=H.removed[Y],$=v.indexOf(Q);$>=0&&(v[$]=null,p[$].disconnect(Q))}for(let Y=0;Y<H.added.length;Y++){let Q=H.added[Y],$=v.indexOf(Q);if($===-1){for(let Z=0;Z<p.length;Z++)if(Z>=v.length){v.push(Q),$=Z;break}else if(v[Z]===null){v[Z]=Q,$=Z;break}if($===-1)break}let ne=p[$];ne&&ne.connect(Q)}}let L=new X,U=new X;function W(H,Y,Q){L.setFromMatrixPosition(Y.matrixWorld),U.setFromMatrixPosition(Q.matrixWorld);let $=L.distanceTo(U),ne=Y.projectionMatrix.elements,Z=Q.projectionMatrix.elements,ce=ne[14]/(ne[10]-1),ae=ne[14]/(ne[10]+1),ie=(ne[9]+1)/ne[5],le=(ne[9]-1)/ne[5],se=(ne[8]-1)/ne[0],re=(Z[8]+1)/Z[0],ye=ce*se,be=ce*re,_e=$/(-se+re),Se=_e*-se;Y.matrixWorld.decompose(H.position,H.quaternion,H.scale),H.translateX(Se),H.translateZ(_e),H.matrixWorld.compose(H.position,H.quaternion,H.scale),H.matrixWorldInverse.copy(H.matrixWorld).invert();let Fe=ce+_e,Re=ae+_e,Le=ye-Se,rt=be+($-Se),st=ie*ae/Re*Fe,he=le*ae/Re*Fe;H.projectionMatrix.makePerspective(Le,rt,st,he,Fe,Re)}function G(H,Y){Y===null?H.matrixWorld.copy(H.matrix):H.matrixWorld.multiplyMatrices(Y.matrixWorld,H.matrix),H.matrixWorldInverse.copy(H.matrixWorld).invert()}this.updateCamera=function(H){if(n===null)return;T.near=A.near=_.near=H.near,T.far=A.far=_.far=H.far,(C!==T.near||E!==T.far)&&(n.updateRenderState({depthNear:T.near,depthFar:T.far}),C=T.near,E=T.far);let Y=H.parent,Q=T.cameras;G(T,Y);for(let ne=0;ne<Q.length;ne++)G(Q[ne],Y);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),H.matrix.copy(T.matrix),H.matrix.decompose(H.position,H.quaternion,H.scale);let $=H.children;for(let ne=0,Z=$.length;ne<Z;ne++)$[ne].updateMatrixWorld(!0);Q.length===2?W(T,_,A):T.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(!(c===null&&h===null))return s},this.setFoveation=function(H){s=H,c!==null&&(c.fixedFoveation=H),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=H)},this.getPlanes=function(){return b};let z=null;function V(H,Y){if(u=Y.getViewerPose(l||o),f=Y,u!==null){let Q=u.views;h!==null&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let $=!1;Q.length!==T.cameras.length&&(T.cameras.length=0,$=!0);for(let ne=0;ne<Q.length;ne++){let Z=Q[ne],ce=null;if(h!==null)ce=h.getViewport(Z);else{let ie=d.getViewSubImage(c,Z);ce=ie.viewport,ne===0&&(e.setRenderTargetTextures(m,ie.colorTexture,c.ignoreDepthValues?void 0:ie.depthStencilTexture),e.setRenderTarget(m))}let ae=M[ne];ae===void 0&&(ae=new ea,ae.layers.enable(ne),ae.viewport=new Mr,M[ne]=ae),ae.matrix.fromArray(Z.transform.matrix),ae.projectionMatrix.fromArray(Z.projectionMatrix),ae.viewport.set(ce.x,ce.y,ce.width,ce.height),ne===0&&T.matrix.copy(ae.matrix),$===!0&&T.cameras.push(ae)}}for(let Q=0;Q<p.length;Q++){let $=v[Q],ne=p[Q];$!==null&&ne!==void 0&&ne.update($,Y,l||o)}if(z&&z(H,Y),Y.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:Y.detectedPlanes});let Q=null;for(let $ of b)Y.detectedPlanes.has($)||(Q===null&&(Q=[]),Q.push($));if(Q!==null)for(let $ of Q)b.delete($),x.delete($),r.dispatchEvent({type:"planeremoved",data:$});for(let $ of Y.detectedPlanes)if(!b.has($))b.add($),x.set($,Y.lastChangedTime),r.dispatchEvent({type:"planeadded",data:$});else{let ne=x.get($);$.lastChangedTime>ne&&(x.set($,$.lastChangedTime),r.dispatchEvent({type:"planechanged",data:$}))}}f=null}let j=new Tne;j.setAnimationLoop(V),this.setAnimationLoop=function(H){z=H},this.dispose=function(){}}};function xOe(e,t){function r(y,m){m.color.getRGB(y.fogColor.value,Cne(e)),m.isFog?(y.fogNear.value=m.near,y.fogFar.value=m.far):m.isFogExp2&&(y.fogDensity.value=m.density)}function n(y,m,p,v,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?i(y,m):m.isMeshToonMaterial?(i(y,m),d(y,m)):m.isMeshPhongMaterial?(i(y,m),u(y,m)):m.isMeshStandardMaterial?(i(y,m),c(y,m),m.isMeshPhysicalMaterial&&h(y,m,b)):m.isMeshMatcapMaterial?(i(y,m),f(y,m)):m.isMeshDepthMaterial?i(y,m):m.isMeshDistanceMaterial?(i(y,m),g(y,m)):m.isMeshNormalMaterial?i(y,m):m.isLineBasicMaterial?(o(y,m),m.isLineDashedMaterial&&a(y,m)):m.isPointsMaterial?s(y,m,p,v):m.isSpriteMaterial?l(y,m):m.isShadowMaterial?(y.color.value.copy(m.color),y.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function i(y,m){y.opacity.value=m.opacity,m.color&&y.diffuse.value.copy(m.color),m.emissive&&y.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(y.map.value=m.map),m.alphaMap&&(y.alphaMap.value=m.alphaMap),m.bumpMap&&(y.bumpMap.value=m.bumpMap,y.bumpScale.value=m.bumpScale,m.side===Ao&&(y.bumpScale.value*=-1)),m.displacementMap&&(y.displacementMap.value=m.displacementMap,y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias),m.emissiveMap&&(y.emissiveMap.value=m.emissiveMap),m.normalMap&&(y.normalMap.value=m.normalMap,y.normalScale.value.copy(m.normalScale),m.side===Ao&&y.normalScale.value.negate()),m.specularMap&&(y.specularMap.value=m.specularMap),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest);let p=t.get(m).envMap;if(p&&(y.envMap.value=p,y.flipEnvMap.value=p.isCubeTexture&&p.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=m.reflectivity,y.ior.value=m.ior,y.refractionRatio.value=m.refractionRatio),m.lightMap){y.lightMap.value=m.lightMap;let x=e.physicallyCorrectLights!==!0?Math.PI:1;y.lightMapIntensity.value=m.lightMapIntensity*x}m.aoMap&&(y.aoMap.value=m.aoMap,y.aoMapIntensity.value=m.aoMapIntensity);let v;m.map?v=m.map:m.specularMap?v=m.specularMap:m.displacementMap?v=m.displacementMap:m.normalMap?v=m.normalMap:m.bumpMap?v=m.bumpMap:m.roughnessMap?v=m.roughnessMap:m.metalnessMap?v=m.metalnessMap:m.alphaMap?v=m.alphaMap:m.emissiveMap?v=m.emissiveMap:m.clearcoatMap?v=m.clearcoatMap:m.clearcoatNormalMap?v=m.clearcoatNormalMap:m.clearcoatRoughnessMap?v=m.clearcoatRoughnessMap:m.iridescenceMap?v=m.iridescenceMap:m.iridescenceThicknessMap?v=m.iridescenceThicknessMap:m.specularIntensityMap?v=m.specularIntensityMap:m.specularColorMap?v=m.specularColorMap:m.transmissionMap?v=m.transmissionMap:m.thicknessMap?v=m.thicknessMap:m.sheenColorMap?v=m.sheenColorMap:m.sheenRoughnessMap&&(v=m.sheenRoughnessMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),y.uvTransform.value.copy(v.matrix));let b;m.aoMap?b=m.aoMap:m.lightMap&&(b=m.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),y.uv2Transform.value.copy(b.matrix))}function o(y,m){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity}function a(y,m){y.dashSize.value=m.dashSize,y.totalSize.value=m.dashSize+m.gapSize,y.scale.value=m.scale}function s(y,m,p,v){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,y.size.value=m.size*p,y.scale.value=v*.5,m.map&&(y.map.value=m.map),m.alphaMap&&(y.alphaMap.value=m.alphaMap),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest);let b;m.map?b=m.map:m.alphaMap&&(b=m.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),y.uvTransform.value.copy(b.matrix))}function l(y,m){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,y.rotation.value=m.rotation,m.map&&(y.map.value=m.map),m.alphaMap&&(y.alphaMap.value=m.alphaMap),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest);let p;m.map?p=m.map:m.alphaMap&&(p=m.alphaMap),p!==void 0&&(p.matrixAutoUpdate===!0&&p.updateMatrix(),y.uvTransform.value.copy(p.matrix))}function u(y,m){y.specular.value.copy(m.specular),y.shininess.value=Math.max(m.shininess,1e-4)}function d(y,m){m.gradientMap&&(y.gradientMap.value=m.gradientMap)}function c(y,m){y.roughness.value=m.roughness,y.metalness.value=m.metalness,m.roughnessMap&&(y.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(y.metalnessMap.value=m.metalnessMap),t.get(m).envMap&&(y.envMapIntensity.value=m.envMapIntensity)}function h(y,m,p){y.ior.value=m.ior,m.sheen>0&&(y.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),y.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(y.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(y.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(y.clearcoat.value=m.clearcoat,y.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(y.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),y.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===Ao&&y.clearcoatNormalScale.value.negate())),m.iridescence>0&&(y.iridescence.value=m.iridescence,y.iridescenceIOR.value=m.iridescenceIOR,y.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(y.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(y.transmission.value=m.transmission,y.transmissionSamplerMap.value=p.texture,y.transmissionSamplerSize.value.set(p.width,p.height),m.transmissionMap&&(y.transmissionMap.value=m.transmissionMap),y.thickness.value=m.thickness,m.thicknessMap&&(y.thicknessMap.value=m.thicknessMap),y.attenuationDistance.value=m.attenuationDistance,y.attenuationColor.value.copy(m.attenuationColor)),y.specularIntensity.value=m.specularIntensity,y.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(y.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(y.specularColorMap.value=m.specularColorMap)}function f(y,m){m.matcap&&(y.matcap.value=m.matcap)}function g(y,m){y.referencePosition.value.copy(m.referencePosition),y.nearDistance.value=m.nearDistance,y.farDistance.value=m.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:n}}function wOe(e,t,r,n){let i={},o={},a=[],s=r.isWebGL2?e.getParameter(35375):0;function l(v,b){let x=b.program;n.uniformBlockBinding(v,x)}function u(v,b){let x=i[v.id];x===void 0&&(g(v),x=d(v),i[v.id]=x,v.addEventListener("dispose",m));let _=b.program;n.updateUBOMapping(v,_);let A=t.render.frame;o[v.id]!==A&&(h(v),o[v.id]=A)}function d(v){let b=c();v.__bindingPointIndex=b;let x=e.createBuffer(),_=v.__size,A=v.usage;return e.bindBuffer(35345,x),e.bufferData(35345,_,A),e.bindBuffer(35345,null),e.bindBufferBase(35345,b,x),x}function c(){for(let v=0;v<s;v++)if(a.indexOf(v)===-1)return a.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){let b=i[v.id],x=v.uniforms,_=v.__cache;e.bindBuffer(35345,b);for(let A=0,M=x.length;A<M;A++){let T=x[A];if(f(T,A,_)===!0){let C=T.__offset,E=Array.isArray(T.value)?T.value:[T.value],D=0;for(let I=0;I<E.length;I++){let k=E[I],L=y(k);typeof k=="number"?(T.__data[0]=k,e.bufferSubData(35345,C+D,T.__data)):k.isMatrix3?(T.__data[0]=k.elements[0],T.__data[1]=k.elements[1],T.__data[2]=k.elements[2],T.__data[3]=k.elements[0],T.__data[4]=k.elements[3],T.__data[5]=k.elements[4],T.__data[6]=k.elements[5],T.__data[7]=k.elements[0],T.__data[8]=k.elements[6],T.__data[9]=k.elements[7],T.__data[10]=k.elements[8],T.__data[11]=k.elements[0]):(k.toArray(T.__data,D),D+=L.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,C,T.__data)}}e.bindBuffer(35345,null)}function f(v,b,x){let _=v.value;if(x[b]===void 0){if(typeof _=="number")x[b]=_;else{let A=Array.isArray(_)?_:[_],M=[];for(let T=0;T<A.length;T++)M.push(A[T].clone());x[b]=M}return!0}else if(typeof _=="number"){if(x[b]!==_)return x[b]=_,!0}else{let A=Array.isArray(x[b])?x[b]:[x[b]],M=Array.isArray(_)?_:[_];for(let T=0;T<A.length;T++){let C=A[T];if(C.equals(M[T])===!1)return C.copy(M[T]),!0}}return!1}function g(v){let b=v.uniforms,x=0,_=16,A=0;for(let M=0,T=b.length;M<T;M++){let C=b[M],E={boundary:0,storage:0},D=Array.isArray(C.value)?C.value:[C.value];for(let I=0,k=D.length;I<k;I++){let L=D[I],U=y(L);E.boundary+=U.boundary,E.storage+=U.storage}if(C.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=x,M>0){A=x%_;let I=_-A;A!==0&&I-E.boundary<0&&(x+=_-A,C.__offset=x)}x+=E.storage}return A=x%_,A>0&&(x+=_-A),v.__size=x,v.__cache={},this}function y(v){let b={boundary:0,storage:0};return typeof v=="number"?(b.boundary=4,b.storage=4):v.isVector2?(b.boundary=8,b.storage=8):v.isVector3||v.isColor?(b.boundary=16,b.storage=12):v.isVector4?(b.boundary=16,b.storage=16):v.isMatrix3?(b.boundary=48,b.storage=48):v.isMatrix4?(b.boundary=64,b.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),b}function m(v){let b=v.target;b.removeEventListener("dispose",m);let x=a.indexOf(b.__bindingPointIndex);a.splice(x,1),e.deleteBuffer(i[b.id]),delete i[b.id],delete o[b.id]}function p(){for(let v in i)e.deleteBuffer(i[v]);a=[],i={},o={}}return{bind:l,update:u,dispose:p}}function _Oe(){let e=PD("canvas");return e.style.display="block",e}function Ine(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:_Oe(),r=e.context!==void 0?e.context:null,n=e.depth!==void 0?e.depth:!0,i=e.stencil!==void 0?e.stencil:!0,o=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,s=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,d;r!==null?d=r.getContextAttributes().alpha:d=e.alpha!==void 0?e.alpha:!1;let c=null,h=null,f=[],g=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=rd,this.physicallyCorrectLights=!1,this.toneMapping=vh,this.toneMappingExposure=1;let y=this,m=!1,p=0,v=0,b=null,x=-1,_=null,A=new Mr,M=new Mr,T=null,C=t.width,E=t.height,D=1,I=null,k=null,L=new Mr(0,0,C,E),U=new Mr(0,0,C,E),W=!1,G=new IV,z=!1,V=!1,j=null,H=new ft,Y=new Ae,Q=new X,$={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ne(){return b===null?D:1}let Z=r;function ce(me,qe){for(let it=0;it<me.length;it++){let je=me[it],at=t.getContext(je,qe);if(at!==null)return at}return null}try{let me={alpha:!0,depth:n,stencil:i,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${h1}`),t.addEventListener("webglcontextlost",Ke,!1),t.addEventListener("webglcontextrestored",gt,!1),t.addEventListener("webglcontextcreationerror",we,!1),Z===null){let qe=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&qe.shift(),Z=ce(qe,me),Z===null)throw ce(qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(me){throw console.error("THREE.WebGLRenderer: "+me.message),me}let ae,ie,le,se,re,ye,be,_e,Se,Fe,Re,Le,rt,st,he,q,J,ge,Pe,De,Ve,et,Ce,Je;function ut(){ae=new B2e(Z),ie=new P2e(Z,ae,e),ae.init(ie),et=new gOe(Z,ae,ie),le=new pOe(Z,ae,ie),se=new F2e,re=new tOe,ye=new mOe(Z,ae,le,re,ie,et,se),be=new O2e(y),_e=new L2e(y),Se=new XTe(Z,ie),Ce=new T2e(Z,ae,Se,ie),Fe=new N2e(Z,Se,se,Ce),Re=new j2e(Z,Fe,Se,se),Pe=new V2e(Z,ie,ye),q=new D2e(re),Le=new eOe(y,be,_e,ae,ie,Ce,q),rt=new xOe(y,re),st=new nOe,he=new uOe(ae,ie),ge=new C2e(y,be,_e,le,Re,d,a),J=new fOe(y,Re,ie),Je=new wOe(Z,se,ie,le),De=new E2e(Z,ae,se,ie),Ve=new k2e(Z,ae,se,ie),se.programs=Le.programs,y.capabilities=ie,y.extensions=ae,y.properties=re,y.renderLists=st,y.shadowMap=J,y.state=le,y.info=se}ut();let pt=new bOe(y,Z);this.xr=pt,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){let me=ae.get("WEBGL_lose_context");me&&me.loseContext()},this.forceContextRestore=function(){let me=ae.get("WEBGL_lose_context");me&&me.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(me){me!==void 0&&(D=me,this.setSize(C,E,!1))},this.getSize=function(me){return me.set(C,E)},this.setSize=function(me,qe,it){if(pt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=me,E=qe,t.width=Math.floor(me*D),t.height=Math.floor(qe*D),it!==!1&&(t.style.width=me+"px",t.style.height=qe+"px"),this.setViewport(0,0,me,qe)},this.getDrawingBufferSize=function(me){return me.set(C*D,E*D).floor()},this.setDrawingBufferSize=function(me,qe,it){C=me,E=qe,D=it,t.width=Math.floor(me*it),t.height=Math.floor(qe*it),this.setViewport(0,0,me,qe)},this.getCurrentViewport=function(me){return me.copy(A)},this.getViewport=function(me){return me.copy(L)},this.setViewport=function(me,qe,it,je){me.isVector4?L.set(me.x,me.y,me.z,me.w):L.set(me,qe,it,je),le.viewport(A.copy(L).multiplyScalar(D).floor())},this.getScissor=function(me){return me.copy(U)},this.setScissor=function(me,qe,it,je){me.isVector4?U.set(me.x,me.y,me.z,me.w):U.set(me,qe,it,je),le.scissor(M.copy(U).multiplyScalar(D).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(me){le.setScissorTest(W=me)},this.setOpaqueSort=function(me){I=me},this.setTransparentSort=function(me){k=me},this.getClearColor=function(me){return me.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor.apply(ge,arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha.apply(ge,arguments)},this.clear=function(me=!0,qe=!0,it=!0){let je=0;me&&(je|=16384),qe&&(je|=256),it&&(je|=1024),Z.clear(je)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ke,!1),t.removeEventListener("webglcontextrestored",gt,!1),t.removeEventListener("webglcontextcreationerror",we,!1),st.dispose(),he.dispose(),re.dispose(),be.dispose(),_e.dispose(),Re.dispose(),Ce.dispose(),Je.dispose(),Le.dispose(),pt.dispose(),pt.removeEventListener("sessionstart",Ye),pt.removeEventListener("sessionend",$e),j&&(j.dispose(),j=null),ze.stop()};function Ke(me){me.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function gt(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;let me=se.autoReset,qe=J.enabled,it=J.autoUpdate,je=J.needsUpdate,at=J.type;ut(),se.autoReset=me,J.enabled=qe,J.autoUpdate=it,J.needsUpdate=je,J.type=at}function we(me){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",me.statusMessage)}function Xe(me){let qe=me.target;qe.removeEventListener("dispose",Xe),nt(qe)}function nt(me){fe(me),re.remove(me)}function fe(me){let qe=re.get(me).programs;qe!==void 0&&(qe.forEach(function(it){Le.releaseProgram(it)}),me.isShaderMaterial&&Le.releaseShaderCache(me))}this.renderBufferDirect=function(me,qe,it,je,at,Ft){qe===null&&(qe=$);let ur=at.isMesh&&at.matrixWorld.determinant()<0,er=bi(me,qe,it,je,at);le.setMaterial(je,ur);let ue=it.index,Ie=1;je.wireframe===!0&&(ue=Fe.getWireframeAttribute(it),Ie=2);let Ne=it.drawRange,Ue=it.attributes.position,Ge=Ne.start*Ie,yt=(Ne.start+Ne.count)*Ie;Ft!==null&&(Ge=Math.max(Ge,Ft.start*Ie),yt=Math.min(yt,(Ft.start+Ft.count)*Ie)),ue!==null?(Ge=Math.max(Ge,0),yt=Math.min(yt,ue.count)):Ue!=null&&(Ge=Math.max(Ge,0),yt=Math.min(yt,Ue.count));let It=yt-Ge;if(It<0||It===1/0)return;Ce.setup(at,je,er,it,ue);let Ut,Ot=De;if(ue!==null&&(Ut=Se.get(ue),Ot=Ve,Ot.setIndex(Ut)),at.isMesh)je.wireframe===!0?(le.setLineWidth(je.wireframeLinewidth*ne()),Ot.setMode(1)):Ot.setMode(4);else if(at.isLine){let xt=je.linewidth;xt===void 0&&(xt=1),le.setLineWidth(xt*ne()),at.isLineSegments?Ot.setMode(1):at.isLineLoop?Ot.setMode(2):Ot.setMode(3)}else at.isPoints?Ot.setMode(0):at.isSprite&&Ot.setMode(4);if(at.isInstancedMesh)Ot.renderInstances(Ge,It,at.count);else if(it.isInstancedBufferGeometry){let xt=it._maxInstanceCount!==void 0?it._maxInstanceCount:1/0,qt=Math.min(it.instanceCount,xt);Ot.renderInstances(Ge,It,qt)}else Ot.render(Ge,It)},this.compile=function(me,qe){function it(je,at,Ft){je.transparent===!0&&je.side===ys&&je.forceSinglePass===!1?(je.side=Ao,je.needsUpdate=!0,nr(je,at,Ft),je.side=Wu,je.needsUpdate=!0,nr(je,at,Ft),je.side=ys):nr(je,at,Ft)}h=he.get(me),h.init(),g.push(h),me.traverseVisible(function(je){je.isLight&&je.layers.test(qe.layers)&&(h.pushLight(je),je.castShadow&&h.pushShadow(je))}),h.setupLights(y.physicallyCorrectLights),me.traverse(function(je){let at=je.material;if(at)if(Array.isArray(at))for(let Ft=0;Ft<at.length;Ft++){let ur=at[Ft];it(ur,me,je)}else it(at,me,je)}),g.pop(),h=null};let Be=null;function de(me){Be&&Be(me)}function Ye(){ze.stop()}function $e(){ze.start()}let ze=new Tne;ze.setAnimationLoop(de),typeof self<"u"&&ze.setContext(self),this.setAnimationLoop=function(me){Be=me,pt.setAnimationLoop(me),me===null?ze.stop():ze.start()},pt.addEventListener("sessionstart",Ye),pt.addEventListener("sessionend",$e),this.render=function(me,qe){if(qe!==void 0&&qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),qe.parent===null&&qe.matrixWorldAutoUpdate===!0&&qe.updateMatrixWorld(),pt.enabled===!0&&pt.isPresenting===!0&&(pt.cameraAutoUpdate===!0&&pt.updateCamera(qe),qe=pt.getCamera()),me.isScene===!0&&me.onBeforeRender(y,me,qe,b),h=he.get(me,g.length),h.init(),g.push(h),H.multiplyMatrices(qe.projectionMatrix,qe.matrixWorldInverse),G.setFromProjectionMatrix(H),V=this.localClippingEnabled,z=q.init(this.clippingPlanes,V),c=st.get(me,f.length),c.init(),f.push(c),ct(me,qe,0,y.sortObjects),c.finish(),y.sortObjects===!0&&c.sort(I,k),z===!0&&q.beginShadows();let it=h.state.shadowsArray;if(J.render(it,me,qe),z===!0&&q.endShadows(),this.info.autoReset===!0&&this.info.reset(),ge.render(c,me),h.setupLights(y.physicallyCorrectLights),qe.isArrayCamera){let je=qe.cameras;for(let at=0,Ft=je.length;at<Ft;at++){let ur=je[at];At(c,me,ur,ur.viewport)}}else At(c,me,qe);b!==null&&(ye.updateMultisampleRenderTarget(b),ye.updateRenderTargetMipmap(b)),me.isScene===!0&&me.onAfterRender(y,me,qe),Ce.resetDefaultState(),x=-1,_=null,g.pop(),g.length>0?h=g[g.length-1]:h=null,f.pop(),f.length>0?c=f[f.length-1]:c=null};function ct(me,qe,it,je){if(me.visible===!1)return;if(me.layers.test(qe.layers)){if(me.isGroup)it=me.renderOrder;else if(me.isLOD)me.autoUpdate===!0&&me.update(qe);else if(me.isLight)h.pushLight(me),me.castShadow&&h.pushShadow(me);else if(me.isSprite){if(!me.frustumCulled||G.intersectsSprite(me)){je&&Q.setFromMatrixPosition(me.matrixWorld).applyMatrix4(H);let Ft=Re.update(me),ur=me.material;ur.visible&&c.push(me,Ft,ur,it,Q.z,null)}}else if((me.isMesh||me.isLine||me.isPoints)&&(me.isSkinnedMesh&&me.skeleton.frame!==se.render.frame&&(me.skeleton.update(),me.skeleton.frame=se.render.frame),!me.frustumCulled||G.intersectsObject(me))){je&&Q.setFromMatrixPosition(me.matrixWorld).applyMatrix4(H);let Ft=Re.update(me),ur=me.material;if(Array.isArray(ur)){let er=Ft.groups;for(let ue=0,Ie=er.length;ue<Ie;ue++){let Ne=er[ue],Ue=ur[Ne.materialIndex];Ue&&Ue.visible&&c.push(me,Ft,Ue,it,Q.z,Ne)}}else ur.visible&&c.push(me,Ft,ur,it,Q.z,null)}}let at=me.children;for(let Ft=0,ur=at.length;Ft<ur;Ft++)ct(at[Ft],qe,it,je)}function At(me,qe,it,je){let at=me.opaque,Ft=me.transmissive,ur=me.transparent;h.setupLightsView(it),z===!0&&q.setGlobalState(y.clippingPlanes,it),Ft.length>0&&rr(at,qe,it),je&&le.viewport(A.copy(je)),at.length>0&&Gt(at,qe,it),Ft.length>0&&Gt(Ft,qe,it),ur.length>0&&Gt(ur,qe,it),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1)}function rr(me,qe,it){let je=ie.isWebGL2;j===null&&(j=new vn(1,1,{generateMipmaps:!0,type:ae.has("EXT_color_buffer_half_float")?g0:ua,minFilter:Dx,samples:je&&o===!0?4:0})),y.getDrawingBufferSize(Y),je?j.setSize(Y.x,Y.y):j.setSize(ED(Y.x),ED(Y.y));let at=y.getRenderTarget();y.setRenderTarget(j),y.clear();let Ft=y.toneMapping;y.toneMapping=vh,Gt(me,qe,it),y.toneMapping=Ft,ye.updateMultisampleRenderTarget(j),ye.updateRenderTargetMipmap(j),y.setRenderTarget(at)}function Gt(me,qe,it){let je=qe.isScene===!0?qe.overrideMaterial:null;for(let at=0,Ft=me.length;at<Ft;at++){let ur=me[at],er=ur.object,ue=ur.geometry,Ie=je===null?ur.material:je,Ne=ur.group;er.layers.test(it.layers)&&Lr(er,qe,it,ue,Ie,Ne)}}function Lr(me,qe,it,je,at,Ft){me.onBeforeRender(y,qe,it,je,at,Ft),me.modelViewMatrix.multiplyMatrices(it.matrixWorldInverse,me.matrixWorld),me.normalMatrix.getNormalMatrix(me.modelViewMatrix),at.onBeforeRender(y,qe,it,je,me,Ft),at.transparent===!0&&at.side===ys&&at.forceSinglePass===!1?(at.side=Ao,at.needsUpdate=!0,y.renderBufferDirect(it,qe,je,at,me,Ft),at.side=Wu,at.needsUpdate=!0,y.renderBufferDirect(it,qe,je,at,me,Ft),at.side=ys):y.renderBufferDirect(it,qe,je,at,me,Ft),me.onAfterRender(y,qe,it,je,at,Ft)}function nr(me,qe,it){qe.isScene!==!0&&(qe=$);let je=re.get(me),at=h.state.lights,Ft=h.state.shadowsArray,ur=at.state.version,er=Le.getParameters(me,at.state,Ft,qe,it),ue=Le.getProgramCacheKey(er),Ie=je.programs;je.environment=me.isMeshStandardMaterial?qe.environment:null,je.fog=qe.fog,je.envMap=(me.isMeshStandardMaterial?_e:be).get(me.envMap||je.environment),Ie===void 0&&(me.addEventListener("dispose",Xe),Ie=new Map,je.programs=Ie);let Ne=Ie.get(ue);if(Ne!==void 0){if(je.currentProgram===Ne&&je.lightsStateVersion===ur)return on(me,er),Ne}else er.uniforms=Le.getUniforms(me),me.onBuild(it,er,y),me.onBeforeCompile(er,y),Ne=Le.acquireProgram(er,ue),Ie.set(ue,Ne),je.uniforms=er.uniforms;let Ue=je.uniforms;(!me.isShaderMaterial&&!me.isRawShaderMaterial||me.clipping===!0)&&(Ue.clippingPlanes=q.uniform),on(me,er),je.needsLights=Ka(me),je.lightsStateVersion=ur,je.needsLights&&(Ue.ambientLightColor.value=at.state.ambient,Ue.lightProbe.value=at.state.probe,Ue.directionalLights.value=at.state.directional,Ue.directionalLightShadows.value=at.state.directionalShadow,Ue.spotLights.value=at.state.spot,Ue.spotLightShadows.value=at.state.spotShadow,Ue.rectAreaLights.value=at.state.rectArea,Ue.ltc_1.value=at.state.rectAreaLTC1,Ue.ltc_2.value=at.state.rectAreaLTC2,Ue.pointLights.value=at.state.point,Ue.pointLightShadows.value=at.state.pointShadow,Ue.hemisphereLights.value=at.state.hemi,Ue.directionalShadowMap.value=at.state.directionalShadowMap,Ue.directionalShadowMatrix.value=at.state.directionalShadowMatrix,Ue.spotShadowMap.value=at.state.spotShadowMap,Ue.spotLightMatrix.value=at.state.spotLightMatrix,Ue.spotLightMap.value=at.state.spotLightMap,Ue.pointShadowMap.value=at.state.pointShadowMap,Ue.pointShadowMatrix.value=at.state.pointShadowMatrix);let Ge=Ne.getUniforms(),yt=x2.seqWithValue(Ge.seq,Ue);return je.currentProgram=Ne,je.uniformsList=yt,Ne}function on(me,qe){let it=re.get(me);it.outputEncoding=qe.outputEncoding,it.instancing=qe.instancing,it.skinning=qe.skinning,it.morphTargets=qe.morphTargets,it.morphNormals=qe.morphNormals,it.morphColors=qe.morphColors,it.morphTargetsCount=qe.morphTargetsCount,it.numClippingPlanes=qe.numClippingPlanes,it.numIntersection=qe.numClipIntersection,it.vertexAlphas=qe.vertexAlphas,it.vertexTangents=qe.vertexTangents,it.toneMapping=qe.toneMapping}function bi(me,qe,it,je,at){qe.isScene!==!0&&(qe=$),ye.resetTextureUnits();let Ft=qe.fog,ur=je.isMeshStandardMaterial?qe.environment:null,er=b===null?y.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:rd,ue=(je.isMeshStandardMaterial?_e:be).get(je.envMap||ur),Ie=je.vertexColors===!0&&!!it.attributes.color&&it.attributes.color.itemSize===4,Ne=!!je.normalMap&&!!it.attributes.tangent,Ue=!!it.morphAttributes.position,Ge=!!it.morphAttributes.normal,yt=!!it.morphAttributes.color,It=je.toneMapped?y.toneMapping:vh,Ut=it.morphAttributes.position||it.morphAttributes.normal||it.morphAttributes.color,Ot=Ut!==void 0?Ut.length:0,xt=re.get(je),qt=h.state.lights;if(z===!0&&(V===!0||me!==_)){let Xt=me===_&&je.id===x;q.setState(je,me,Xt)}let ar=!1;je.version===xt.__version?(xt.needsLights&&xt.lightsStateVersion!==qt.state.version||xt.outputEncoding!==er||at.isInstancedMesh&&xt.instancing===!1||!at.isInstancedMesh&&xt.instancing===!0||at.isSkinnedMesh&&xt.skinning===!1||!at.isSkinnedMesh&&xt.skinning===!0||xt.envMap!==ue||je.fog===!0&&xt.fog!==Ft||xt.numClippingPlanes!==void 0&&(xt.numClippingPlanes!==q.numPlanes||xt.numIntersection!==q.numIntersection)||xt.vertexAlphas!==Ie||xt.vertexTangents!==Ne||xt.morphTargets!==Ue||xt.morphNormals!==Ge||xt.morphColors!==yt||xt.toneMapping!==It||ie.isWebGL2===!0&&xt.morphTargetsCount!==Ot)&&(ar=!0):(ar=!0,xt.__version=je.version);let zr=xt.currentProgram;ar===!0&&(zr=nr(je,qe,at));let an=!1,Ur=!1,tn=!1,Bt=zr.getUniforms(),Tt=xt.uniforms;if(le.useProgram(zr.program)&&(an=!0,Ur=!0,tn=!0),je.id!==x&&(x=je.id,Ur=!0),an||_!==me){if(Bt.setValue(Z,"projectionMatrix",me.projectionMatrix),ie.logarithmicDepthBuffer&&Bt.setValue(Z,"logDepthBufFC",2/(Math.log(me.far+1)/Math.LN2)),_!==me&&(_=me,Ur=!0,tn=!0),je.isShaderMaterial||je.isMeshPhongMaterial||je.isMeshToonMaterial||je.isMeshStandardMaterial||je.envMap){let Xt=Bt.map.cameraPosition;Xt!==void 0&&Xt.setValue(Z,Q.setFromMatrixPosition(me.matrixWorld))}(je.isMeshPhongMaterial||je.isMeshToonMaterial||je.isMeshLambertMaterial||je.isMeshBasicMaterial||je.isMeshStandardMaterial||je.isShaderMaterial)&&Bt.setValue(Z,"isOrthographic",me.isOrthographicCamera===!0),(je.isMeshPhongMaterial||je.isMeshToonMaterial||je.isMeshLambertMaterial||je.isMeshBasicMaterial||je.isMeshStandardMaterial||je.isShaderMaterial||je.isShadowMaterial||at.isSkinnedMesh)&&Bt.setValue(Z,"viewMatrix",me.matrixWorldInverse)}if(at.isSkinnedMesh){Bt.setOptional(Z,at,"bindMatrix"),Bt.setOptional(Z,at,"bindMatrixInverse");let Xt=at.skeleton;Xt&&(ie.floatVertexTextures?(Xt.boneTexture===null&&Xt.computeBoneTexture(),Bt.setValue(Z,"boneTexture",Xt.boneTexture,ye),Bt.setValue(Z,"boneTextureSize",Xt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Ii=it.morphAttributes;if((Ii.position!==void 0||Ii.normal!==void 0||Ii.color!==void 0&&ie.isWebGL2===!0)&&Pe.update(at,it,je,zr),(Ur||xt.receiveShadow!==at.receiveShadow)&&(xt.receiveShadow=at.receiveShadow,Bt.setValue(Z,"receiveShadow",at.receiveShadow)),je.isMeshGouraudMaterial&&je.envMap!==null&&(Tt.envMap.value=ue,Tt.flipEnvMap.value=ue.isCubeTexture&&ue.isRenderTargetTexture===!1?-1:1),Ur&&(Bt.setValue(Z,"toneMappingExposure",y.toneMappingExposure),xt.needsLights&&dl(Tt,tn),Ft&&je.fog===!0&&rt.refreshFogUniforms(Tt,Ft),rt.refreshMaterialUniforms(Tt,je,D,E,j),x2.upload(Z,xt.uniformsList,Tt,ye)),je.isShaderMaterial&&je.uniformsNeedUpdate===!0&&(x2.upload(Z,xt.uniformsList,Tt,ye),je.uniformsNeedUpdate=!1),je.isSpriteMaterial&&Bt.setValue(Z,"center",at.center),Bt.setValue(Z,"modelViewMatrix",at.modelViewMatrix),Bt.setValue(Z,"normalMatrix",at.normalMatrix),Bt.setValue(Z,"modelMatrix",at.matrixWorld),at.previousModelViewMatrix&&Bt.setValue(Z,"previousModelViewMatrix",at.previousModelViewMatrix),me.previousProjectionMatrix&&Bt.setValue(Z,"previousProjectionMatrix",me.previousProjectionMatrix),je.isShaderMaterial||je.isRawShaderMaterial){let Xt=je.uniformsGroups;for(let mr=0,Vr=Xt.length;mr<Vr;mr++)if(ie.isWebGL2){let kr=Xt[mr];Je.update(kr,zr),Je.bind(kr,zr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return zr}function dl(me,qe){me.ambientLightColor.needsUpdate=qe,me.lightProbe.needsUpdate=qe,me.directionalLights.needsUpdate=qe,me.directionalLightShadows.needsUpdate=qe,me.pointLights.needsUpdate=qe,me.pointLightShadows.needsUpdate=qe,me.spotLights.needsUpdate=qe,me.spotLightShadows.needsUpdate=qe,me.rectAreaLights.needsUpdate=qe,me.hemisphereLights.needsUpdate=qe}function Ka(me){return me.isMeshLambertMaterial||me.isMeshToonMaterial||me.isMeshPhongMaterial||me.isMeshStandardMaterial||me.isShadowMaterial||me.isShaderMaterial&&me.lights===!0}this.getActiveCubeFace=function(){return p},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(me,qe,it){re.get(me.texture).__webglTexture=qe,re.get(me.depthTexture).__webglTexture=it;let je=re.get(me);je.__hasExternalTextures=!0,je.__hasExternalTextures&&(je.__autoAllocateDepthBuffer=it===void 0,je.__autoAllocateDepthBuffer||ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),je.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(me,qe){let it=re.get(me);it.__webglFramebuffer=qe,it.__useDefaultFramebuffer=qe===void 0},this.setRenderTarget=function(me,qe=0,it=0){b=me,p=qe,v=it;let je=!0,at=null,Ft=!1,ur=!1;if(me){let er=re.get(me);er.__useDefaultFramebuffer!==void 0?(le.bindFramebuffer(36160,null),je=!1):er.__webglFramebuffer===void 0?ye.setupRenderTarget(me):er.__hasExternalTextures&&ye.rebindTextures(me,re.get(me.texture).__webglTexture,re.get(me.depthTexture).__webglTexture);let ue=me.texture;(ue.isData3DTexture||ue.isDataArrayTexture||ue.isCompressedArrayTexture)&&(ur=!0);let Ie=re.get(me).__webglFramebuffer;me.isWebGLCubeRenderTarget?(at=Ie[qe],Ft=!0):ie.isWebGL2&&me.samples>0&&ye.useMultisampledRTT(me)===!1?at=re.get(me).__webglMultisampledFramebuffer:at=Ie,A.copy(me.viewport),M.copy(me.scissor),T=me.scissorTest}else A.copy(L).multiplyScalar(D).floor(),M.copy(U).multiplyScalar(D).floor(),T=W;if(le.bindFramebuffer(36160,at)&&ie.drawBuffers&&je&&le.drawBuffers(me,at),le.viewport(A),le.scissor(M),le.setScissorTest(T),Ft){let er=re.get(me.texture);Z.framebufferTexture2D(36160,36064,34069+qe,er.__webglTexture,it)}else if(ur){let er=re.get(me.texture),ue=qe||0;Z.framebufferTextureLayer(36160,36064,er.__webglTexture,it||0,ue)}x=-1},this.readRenderTargetPixels=function(me,qe,it,je,at,Ft,ur){if(!(me&&me.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let er=re.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&ur!==void 0&&(er=er[ur]),er){le.bindFramebuffer(36160,er);try{let ue=me.texture,Ie=ue.format,Ne=ue.type;if(Ie!==Ys&&et.convert(Ie)!==Z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Ue=Ne===g0&&(ae.has("EXT_color_buffer_half_float")||ie.isWebGL2&&ae.has("EXT_color_buffer_float"));if(Ne!==ua&&et.convert(Ne)!==Z.getParameter(35738)&&!(Ne===ka&&(ie.isWebGL2||ae.has("OES_texture_float")||ae.has("WEBGL_color_buffer_float")))&&!Ue){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}qe>=0&&qe<=me.width-je&&it>=0&&it<=me.height-at&&Z.readPixels(qe,it,je,at,et.convert(Ie),et.convert(Ne),Ft)}finally{let ue=b!==null?re.get(b).__webglFramebuffer:null;le.bindFramebuffer(36160,ue)}}},this.copyFramebufferToTexture=function(me,qe,it=0){let je=Math.pow(2,-it),at=Math.floor(qe.image.width*je),Ft=Math.floor(qe.image.height*je);ye.setTexture2D(qe,0),Z.copyTexSubImage2D(3553,it,0,0,me.x,me.y,at,Ft),le.unbindTexture()},this.copyTextureToTexture=function(me,qe,it,je=0){let at=qe.image.width,Ft=qe.image.height,ur=et.convert(it.format),er=et.convert(it.type);ye.setTexture2D(it,0),Z.pixelStorei(37440,it.flipY),Z.pixelStorei(37441,it.premultiplyAlpha),Z.pixelStorei(3317,it.unpackAlignment),qe.isDataTexture?Z.texSubImage2D(3553,je,me.x,me.y,at,Ft,ur,er,qe.image.data):qe.isCompressedTexture?Z.compressedTexSubImage2D(3553,je,me.x,me.y,qe.mipmaps[0].width,qe.mipmaps[0].height,ur,qe.mipmaps[0].data):Z.texSubImage2D(3553,je,me.x,me.y,ur,er,qe.image),je===0&&it.generateMipmaps&&Z.generateMipmap(3553),le.unbindTexture()},this.copyTextureToTexture3D=function(me,qe,it,je,at=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Ft=me.max.x-me.min.x+1,ur=me.max.y-me.min.y+1,er=me.max.z-me.min.z+1,ue=et.convert(je.format),Ie=et.convert(je.type),Ne;if(je.isData3DTexture)ye.setTexture3D(je,0),Ne=32879;else if(je.isDataArrayTexture)ye.setTexture2DArray(je,0),Ne=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(37440,je.flipY),Z.pixelStorei(37441,je.premultiplyAlpha),Z.pixelStorei(3317,je.unpackAlignment);let Ue=Z.getParameter(3314),Ge=Z.getParameter(32878),yt=Z.getParameter(3316),It=Z.getParameter(3315),Ut=Z.getParameter(32877),Ot=it.isCompressedTexture?it.mipmaps[0]:it.image;Z.pixelStorei(3314,Ot.width),Z.pixelStorei(32878,Ot.height),Z.pixelStorei(3316,me.min.x),Z.pixelStorei(3315,me.min.y),Z.pixelStorei(32877,me.min.z),it.isDataTexture||it.isData3DTexture?Z.texSubImage3D(Ne,at,qe.x,qe.y,qe.z,Ft,ur,er,ue,Ie,Ot.data):it.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(Ne,at,qe.x,qe.y,qe.z,Ft,ur,er,ue,Ot.data)):Z.texSubImage3D(Ne,at,qe.x,qe.y,qe.z,Ft,ur,er,ue,Ie,Ot),Z.pixelStorei(3314,Ue),Z.pixelStorei(32878,Ge),Z.pixelStorei(3316,yt),Z.pixelStorei(3315,It),Z.pixelStorei(32877,Ut),at===0&&je.generateMipmaps&&Z.generateMipmap(Ne),le.unbindTexture()},this.initTexture=function(me){me.isCubeTexture?ye.setTextureCube(me,0):me.isData3DTexture?ye.setTexture3D(me,0):me.isDataArrayTexture||me.isCompressedArrayTexture?ye.setTexture2DArray(me,0):ye.setTexture2D(me,0),le.unbindTexture()},this.resetState=function(){p=0,v=0,b=null,le.reset(),Ce.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var SOe=class extends Ine{};SOe.prototype.isWebGL1Renderer=!0;var Lne=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new tr(e),this.near=t,this.far=r}clone(){return new Lne(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Cp=class extends bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},AOe=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=l5,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Sa=new X,h5=class{constructor(e,t,r,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Sa.fromBufferAttribute(this,t),Sa.applyMatrix4(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Sa.fromBufferAttribute(this,t),Sa.applyNormalMatrix(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Sa.fromBufferAttribute(this,t),Sa.transformDirection(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=fh(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=fh(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=fh(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=fh(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),n=Mn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this}setXYZW(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),n=Mn(n,this.array),i=Mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let n=r*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[n+i])}return new fr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new h5(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let n=r*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[n+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Bne=class extends bn{constructor(){super(),this.isBone=!0,this.type="Bone"}},ap=class extends io{constructor(e=null,t=1,r=1,n,i,o,a,s,l=Cn,u=Cn,d,c){super(null,o,a,s,l,u,n,i,d,c),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},h7=new ft,MOe=new ft,NV=class{constructor(e=[],t=[]){this.uuid=Xl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new ft;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture;for(let i=0,o=e.length;i<o;i++){let a=e[i]?e[i].matrixWorld:MOe;h7.multiplyMatrices(a,t[i]),h7.toArray(r,i*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new NV(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=bne(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new ap(t,e,e,Ys,ka);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let n=this.bones[t];if(n.name===e)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,n=e.bones.length;r<n;r++){let i=e.bones[r],o=t[i];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),o=new Bne),this.bones.push(o),this.boneInverses.push(new ft().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let n=0,i=t.length;n<i;n++){let o=t[n];e.bones.push(o.uuid);let a=r[n];e.boneInverses.push(a.toArray())}return e}},Nne=class extends fr{constructor(e,t,r,n=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},em=class extends EM{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new tr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},f7=new X,p7=new X,m7=new ft,gB=new f1,jE=new Ts,DD=class extends bn{constructor(e=new Jt,t=new em){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let n=1,i=t.count;n<i;n++)f7.fromBufferAttribute(t,n-1),p7.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=f7.distanceTo(p7);e.setAttribute("lineDistance",new Rt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,n=this.matrixWorld,i=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),jE.copy(r.boundingSphere),jE.applyMatrix4(n),jE.radius+=i,e.ray.intersectsSphere(jE)===!1)return;m7.copy(n).invert(),gB.copy(e.ray).applyMatrix4(m7);let a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new X,u=new X,d=new X,c=new X,h=this.isLineSegments?2:1,f=r.index,g=r.attributes.position;if(f!==null){let y=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let p=y,v=m-1;p<v;p+=h){let b=f.getX(p),x=f.getX(p+1);if(l.fromBufferAttribute(g,b),u.fromBufferAttribute(g,x),gB.distanceSqToSegment(l,u,c,d)>s)continue;c.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(c);_<e.near||_>e.far||t.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}else{let y=Math.max(0,o.start),m=Math.min(g.count,o.start+o.count);for(let p=y,v=m-1;p<v;p+=h){if(l.fromBufferAttribute(g,p),u.fromBufferAttribute(g,p+1),gB.distanceSqToSegment(l,u,c,d)>s)continue;c.applyMatrix4(this.matrixWorld);let b=e.ray.origin.distanceTo(c);b<e.near||b>e.far||t.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,i=r.length;n<i;n++){let o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}},g7=new X,v7=new X,DM=class extends DD{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let n=0,i=t.count;n<i;n+=2)g7.fromBufferAttribute(t,n),v7.fromBufferAttribute(t,n+1),r[n]=n===0?0:r[n-1],r[n+1]=r[n]+g7.distanceTo(v7);e.setAttribute("lineDistance",new Rt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},COe=class extends io{constructor(e,t,r,n,i,o,a,s,l){super(e,t,r,n,i,o,a,s,l),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Or,this.magFilter=i!==void 0?i:Or,this.generateMipmaps=!1;let u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},dd=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,n=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),i+=r.distanceTo(n),t.push(i),n=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),n=0,i=r.length,o;t?o=t:o=e*r[i-1];let a=0,s=i-1,l;for(;a<=s;)if(n=Math.floor(a+(s-a)/2),l=r[n]-o,l<0)a=n+1;else if(l>0)s=n-1;else{s=n;break}if(n=s,r[n]===o)return n/(i-1);let u=r[n],d=r[n+1]-u,c=(o-u)/d;return(n+c)/(i-1)}getTangent(e,t){let r=e-1e-4,n=e+1e-4;r<0&&(r=0),n>1&&(n=1);let i=this.getPoint(r),o=this.getPoint(n),a=t||(i.isVector2?new Ae:new X);return a.copy(o).sub(i).normalize(),a}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new X,n=[],i=[],o=[],a=new X,s=new ft;for(let h=0;h<=e;h++){let f=h/e;n[h]=this.getTangentAt(f,new X)}i[0]=new X,o[0]=new X;let l=Number.MAX_VALUE,u=Math.abs(n[0].x),d=Math.abs(n[0].y),c=Math.abs(n[0].z);u<=l&&(l=u,r.set(1,0,0)),d<=l&&(l=d,r.set(0,1,0)),c<=l&&r.set(0,0,1),a.crossVectors(n[0],r).normalize(),i[0].crossVectors(n[0],a),o[0].crossVectors(n[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(n[h-1],n[h]),a.length()>Number.EPSILON){a.normalize();let f=Math.acos(zi(n[h-1].dot(n[h]),-1,1));i[h].applyMatrix4(s.makeRotationAxis(a,f))}o[h].crossVectors(n[h],i[h])}if(t===!0){let h=Math.acos(zi(i[0].dot(i[e]),-1,1));h/=e,n[0].dot(a.crossVectors(i[0],i[e]))>0&&(h=-h);for(let f=1;f<=e;f++)i[f].applyMatrix4(s.makeRotationAxis(n[f],h*f)),o[f].crossVectors(n[f],i[f])}return{tangents:n,normals:i,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},GR=class extends dd{constructor(e=0,t=0,r=1,n=1,i=0,o=Math.PI*2,a=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){let r=t||new Ae,n=Math.PI*2,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(o?i=0:i=n),this.aClockwise===!0&&!o&&(i===n?i=-n:i=i-n);let a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),c=s-this.aX,h=l-this.aY;s=c*u-h*d+this.aX,l=c*d+h*u+this.aY}return r.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},TOe=class extends GR{constructor(e,t,r,n,i,o){super(e,t,r,r,n,i,o),this.isArcCurve=!0,this.type="ArcCurve"}};function kV(){let e=0,t=0,r=0,n=0;function i(o,a,s,l){e=o,t=s,r=-3*o+3*a-2*s-l,n=2*o-2*a+s+l}return{initCatmullRom:function(o,a,s,l,u){i(a,s,u*(s-o),u*(l-a))},initNonuniformCatmullRom:function(o,a,s,l,u,d,c){let h=(a-o)/u-(s-o)/(u+d)+(s-a)/d,f=(s-a)/d-(l-a)/(d+c)+(l-s)/c;h*=d,f*=d,i(a,s,h,f)},calc:function(o){let a=o*o,s=a*o;return e+t*o+r*a+n*s}}}var HE=new X,vB=new kV,yB=new kV,bB=new kV,EOe=class extends dd{constructor(e=[],t=!1,r="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=n}getPoint(e,t=new X){let r=t,n=this.points,i=n.length,o=(i-(this.closed?0:1))*e,a=Math.floor(o),s=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:s===0&&a===i-1&&(a=i-2,s=1);let l,u;this.closed||a>0?l=n[(a-1)%i]:(HE.subVectors(n[0],n[1]).add(n[0]),l=HE);let d=n[a%i],c=n[(a+1)%i];if(this.closed||a+2<i?u=n[(a+2)%i]:(HE.subVectors(n[i-1],n[i-2]).add(n[i-1]),u=HE),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(d),h),g=Math.pow(d.distanceToSquared(c),h),y=Math.pow(c.distanceToSquared(u),h);g<1e-4&&(g=1),f<1e-4&&(f=g),y<1e-4&&(y=g),vB.initNonuniformCatmullRom(l.x,d.x,c.x,u.x,f,g,y),yB.initNonuniformCatmullRom(l.y,d.y,c.y,u.y,f,g,y),bB.initNonuniformCatmullRom(l.z,d.z,c.z,u.z,f,g,y)}else this.curveType==="catmullrom"&&(vB.initCatmullRom(l.x,d.x,c.x,u.x,this.tension),yB.initCatmullRom(l.y,d.y,c.y,u.y,this.tension),bB.initCatmullRom(l.z,d.z,c.z,u.z,this.tension));return r.set(vB.calc(s),yB.calc(s),bB.calc(s)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let n=e.points[t];this.points.push(new X().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function y7(e,t,r,n,i){let o=(n-t)*.5,a=(i-r)*.5,s=e*e,l=e*s;return(2*r-2*n+o+a)*l+(-3*r+3*n-2*o-a)*s+o*e+r}function POe(e,t){let r=1-e;return r*r*t}function DOe(e,t){return 2*(1-e)*e*t}function OOe(e,t){return e*e*t}function MS(e,t,r,n){return POe(e,t)+DOe(e,r)+OOe(e,n)}function ROe(e,t){let r=1-e;return r*r*r*t}function IOe(e,t){let r=1-e;return 3*r*r*e*t}function LOe(e,t){return 3*(1-e)*e*e*t}function BOe(e,t){return e*e*e*t}function CS(e,t,r,n,i){return ROe(e,t)+IOe(e,r)+LOe(e,n)+BOe(e,i)}var Ou=class extends dd{constructor(e=new Ae,t=new Ae,r=new Ae,n=new Ae){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=n}getPoint(e,t=new Ae){let r=t,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(CS(e,n.x,i.x,o.x,a.x),CS(e,n.y,i.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},w2=class extends dd{constructor(e=new X,t=new X,r=new X,n=new X){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=n}getPoint(e,t=new X){let r=t,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(CS(e,n.x,i.x,o.x,a.x),CS(e,n.y,i.y,o.y,a.y),CS(e,n.z,i.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Uu=class extends dd{constructor(e=new Ae,t=new Ae){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ae){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new Ae;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},kne=class extends dd{constructor(e=new X,t=new X){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new X){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Vp=class extends dd{constructor(e=new Ae,t=new Ae,r=new Ae){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ae){let r=t,n=this.v0,i=this.v1,o=this.v2;return r.set(MS(e,n.x,i.x,o.x),MS(e,n.y,i.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},NOe=class extends dd{constructor(e=new X,t=new X,r=new X){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new X){let r=t,n=this.v0,i=this.v1,o=this.v2;return r.set(MS(e,n.x,i.x,o.x),MS(e,n.y,i.y,o.y),MS(e,n.z,i.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},FV=class extends dd{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ae){let r=t,n=this.points,i=(n.length-1)*e,o=Math.floor(i),a=i-o,s=n[o===0?o:o-1],l=n[o],u=n[o>n.length-2?n.length-1:o+1],d=n[o>n.length-3?n.length-1:o+2];return r.set(y7(a,s.x,l.x,u.x,d.x),y7(a,s.y,l.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let n=e.points[t];this.points.push(new Ae().fromArray(n))}return this}},kOe=Object.freeze({__proto__:null,ArcCurve:TOe,CatmullRomCurve3:EOe,CubicBezierCurve:Ou,CubicBezierCurve3:w2,EllipseCurve:GR,LineCurve:Uu,LineCurve3:kne,QuadraticBezierCurve:Vp,QuadraticBezierCurve3:NOe,SplineCurve:FV}),Fne=class extends dd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Uu(t,e))}getPoint(e,t){let r=e*this.getLength(),n=this.getCurveLengths(),i=0;for(;i<n.length;){if(n[i]>=r){let o=n[i]-r,a=this.curves[i],s=a.getLength(),l=s===0?0:1-o/s;return a.getPointAt(l,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let n=0,i=this.curves;n<i.length;n++){let o=i[n],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let l=0;l<s.length;l++){let u=s[l];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let n=e.curves[t];this.curves.push(new kOe[n.type]().fromJSON(n))}return this}},OD=class extends Fne{constructor(e){super(),this.type="Path",this.currentPoint=new Ae,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new Uu(this.currentPoint.clone(),new Ae(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,n){let i=new Vp(this.currentPoint.clone(),new Ae(e,t),new Ae(r,n));return this.curves.push(i),this.currentPoint.set(r,n),this}bezierCurveTo(e,t,r,n,i,o){let a=new Ou(this.currentPoint.clone(),new Ae(e,t),new Ae(r,n),new Ae(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new FV(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,n,i,o){let a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,r,n,i,o),this}absarc(e,t,r,n,i,o){return this.absellipse(e,t,r,r,n,i,o),this}ellipse(e,t,r,n,i,o,a,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,n,i,o,a,s),this}absellipse(e,t,r,n,i,o,a,s){let l=new GR(e,t,r,n,i,o,a,s);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},zne=class extends Jt{constructor(e=[new Ae(0,-.5),new Ae(.5,0),new Ae(0,.5)],t=12,r=0,n=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t),n=zi(n,0,Math.PI*2);let i=[],o=[],a=[],s=[],l=[],u=1/t,d=new X,c=new Ae,h=new X,f=new X,g=new X,y=0,m=0;for(let p=0;p<=e.length-1;p++)switch(p){case 0:y=e[p+1].x-e[p].x,m=e[p+1].y-e[p].y,h.x=m*1,h.y=-y,h.z=m*0,g.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(g.x,g.y,g.z);break;default:y=e[p+1].x-e[p].x,m=e[p+1].y-e[p].y,h.x=m*1,h.y=-y,h.z=m*0,f.copy(h),h.x+=g.x,h.y+=g.y,h.z+=g.z,h.normalize(),s.push(h.x,h.y,h.z),g.copy(f)}for(let p=0;p<=t;p++){let v=r+p*u*n,b=Math.sin(v),x=Math.cos(v);for(let _=0;_<=e.length-1;_++){d.x=e[_].x*b,d.y=e[_].y,d.z=e[_].x*x,o.push(d.x,d.y,d.z),c.x=p/t,c.y=_/(e.length-1),a.push(c.x,c.y);let A=s[3*_+0]*b,M=s[3*_+1],T=s[3*_+0]*x;l.push(A,M,T)}}for(let p=0;p<t;p++)for(let v=0;v<e.length-1;v++){let b=v+p*e.length,x=b,_=b+e.length,A=b+e.length+1,M=b+1;i.push(x,_,M),i.push(A,M,_)}this.setIndex(i),this.setAttribute("position",new Rt(o,3)),this.setAttribute("uv",new Rt(a,2)),this.setAttribute("normal",new Rt(l,3))}static fromJSON(e){return new zne(e.points,e.segments,e.phiStart,e.phiLength)}},zV=class extends Jt{constructor(e=1,t=1,r=1,n=32,i=1,o=!1,a=0,s=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};let l=this;n=Math.floor(n),i=Math.floor(i);let u=[],d=[],c=[],h=[],f=0,g=[],y=r/2,m=0;p(),o===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new Rt(d,3)),this.setAttribute("normal",new Rt(c,3)),this.setAttribute("uv",new Rt(h,2));function p(){let b=new X,x=new X,_=0,A=(t-e)/r;for(let M=0;M<=i;M++){let T=[],C=M/i,E=C*(t-e)+e;for(let D=0;D<=n;D++){let I=D/n,k=I*s+a,L=Math.sin(k),U=Math.cos(k);x.x=E*L,x.y=-C*r+y,x.z=E*U,d.push(x.x,x.y,x.z),b.set(L,A,U).normalize(),c.push(b.x,b.y,b.z),h.push(I,1-C),T.push(f++)}g.push(T)}for(let M=0;M<n;M++)for(let T=0;T<i;T++){let C=g[T][M],E=g[T+1][M],D=g[T+1][M+1],I=g[T][M+1];u.push(C,E,I),u.push(E,D,I),_+=6}l.addGroup(m,_,0),m+=_}function v(b){let x=f,_=new Ae,A=new X,M=0,T=b===!0?e:t,C=b===!0?1:-1;for(let D=1;D<=n;D++)d.push(0,y*C,0),c.push(0,C,0),h.push(.5,.5),f++;let E=f;for(let D=0;D<=n;D++){let I=D/n*s+a,k=Math.cos(I),L=Math.sin(I);A.x=T*L,A.y=y*C,A.z=T*k,d.push(A.x,A.y,A.z),c.push(0,C,0),_.x=k*.5+.5,_.y=L*.5*C+.5,h.push(_.x,_.y),f++}for(let D=0;D<n;D++){let I=x+D,k=E+D;b===!0?u.push(k,k+1,I):u.push(k+1,k,I),M+=3}l.addGroup(m,M,b===!0?1:2),m+=M}}static fromJSON(e){return new zV(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Une=class extends zV{constructor(e=1,t=1,r=32,n=1,i=!1,o=0,a=Math.PI*2){super(0,e,t,r,n,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Une(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},UV=class extends Jt{constructor(e=[],t=[],r=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n};let i=[],o=[];a(n),l(r),u(),this.setAttribute("position",new Rt(i,3)),this.setAttribute("normal",new Rt(i.slice(),3)),this.setAttribute("uv",new Rt(o,2)),n===0?this.computeVertexNormals():this.normalizeNormals();function a(p){let v=new X,b=new X,x=new X;for(let _=0;_<t.length;_+=3)h(t[_+0],v),h(t[_+1],b),h(t[_+2],x),s(v,b,x,p)}function s(p,v,b,x){let _=x+1,A=[];for(let M=0;M<=_;M++){A[M]=[];let T=p.clone().lerp(b,M/_),C=v.clone().lerp(b,M/_),E=_-M;for(let D=0;D<=E;D++)D===0&&M===_?A[M][D]=T:A[M][D]=T.clone().lerp(C,D/E)}for(let M=0;M<_;M++)for(let T=0;T<2*(_-M)-1;T++){let C=Math.floor(T/2);T%2===0?(c(A[M][C+1]),c(A[M+1][C]),c(A[M][C])):(c(A[M][C+1]),c(A[M+1][C+1]),c(A[M+1][C]))}}function l(p){let v=new X;for(let b=0;b<i.length;b+=3)v.x=i[b+0],v.y=i[b+1],v.z=i[b+2],v.normalize().multiplyScalar(p),i[b+0]=v.x,i[b+1]=v.y,i[b+2]=v.z}function u(){let p=new X;for(let v=0;v<i.length;v+=3){p.x=i[v+0],p.y=i[v+1],p.z=i[v+2];let b=y(p)/2/Math.PI+.5,x=m(p)/Math.PI+.5;o.push(b,1-x)}f(),d()}function d(){for(let p=0;p<o.length;p+=6){let v=o[p+0],b=o[p+2],x=o[p+4],_=Math.max(v,b,x),A=Math.min(v,b,x);_>.9&&A<.1&&(v<.2&&(o[p+0]+=1),b<.2&&(o[p+2]+=1),x<.2&&(o[p+4]+=1))}}function c(p){i.push(p.x,p.y,p.z)}function h(p,v){let b=p*3;v.x=e[b+0],v.y=e[b+1],v.z=e[b+2]}function f(){let p=new X,v=new X,b=new X,x=new X,_=new Ae,A=new Ae,M=new Ae;for(let T=0,C=0;T<i.length;T+=9,C+=6){p.set(i[T+0],i[T+1],i[T+2]),v.set(i[T+3],i[T+4],i[T+5]),b.set(i[T+6],i[T+7],i[T+8]),_.set(o[C+0],o[C+1]),A.set(o[C+2],o[C+3]),M.set(o[C+4],o[C+5]),x.copy(p).add(v).add(b).divideScalar(3);let E=y(x);g(_,C+0,p,E),g(A,C+2,v,E),g(M,C+4,b,E)}}function g(p,v,b,x){x<0&&p.x===1&&(o[v]=p.x-1),b.x===0&&b.z===0&&(o[v]=x/2/Math.PI+.5)}function y(p){return Math.atan2(p.z,-p.x)}function m(p){return Math.atan2(-p.y,Math.sqrt(p.x*p.x+p.z*p.z))}}static fromJSON(e){return new UV(e.vertices,e.indices,e.radius,e.details)}},Vne=class extends UV{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(i,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vne(e.radius,e.detail)}},RD=class extends OD{constructor(e){super(e),this.uuid=Xl(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let n=e.holes[t];this.holes.push(new OD().fromJSON(n))}return this}},FOe={triangulate:function(e,t,r=2){let n=t&&t.length,i=n?t[0]*r:e.length,o=jne(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;let s,l,u,d,c,h,f;if(n&&(o=HOe(e,t,o,r)),e.length>80*r){s=u=e[0],l=d=e[1];for(let g=r;g<i;g+=r)c=e[g],h=e[g+1],c<s&&(s=c),h<l&&(l=h),c>u&&(u=c),h>d&&(d=h);f=Math.max(u-s,d-l),f=f!==0?32767/f:0}return MA(o,a,r,s,l,f,0),a}};function jne(e,t,r,n,i){let o,a;if(i===eRe(e,t,r,n)>0)for(o=t;o<r;o+=n)a=b7(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=b7(o,e[o],e[o+1],a);return a&&WR(a,a.next)&&(TA(a),a=a.next),a}function y0(e,t){if(!e)return e;t||(t=e);let r=e,n;do if(n=!1,!r.steiner&&(WR(r,r.next)||$n(r.prev,r,r.next)===0)){if(TA(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function MA(e,t,r,n,i,o,a){if(!e)return;!a&&o&&YOe(e,n,i,o);let s=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,o?UOe(e,n,i,o):zOe(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),TA(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=VOe(y0(e),t,r),MA(e,t,r,n,i,o,2)):a===2&&jOe(e,t,r,n,i,o):MA(y0(e),t,r,n,i,o,1);break}}}function zOe(e){let t=e.prev,r=e,n=e.next;if($n(t,r,n)>=0)return!1;let i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,d=i<o?i<a?i:a:o<a?o:a,c=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,f=s>l?s>u?s:u:l>u?l:u,g=n.next;for(;g!==t;){if(g.x>=d&&g.x<=h&&g.y>=c&&g.y<=f&&Ab(i,s,o,l,a,u,g.x,g.y)&&$n(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function UOe(e,t,r,n){let i=e.prev,o=e,a=e.next;if($n(i,o,a)>=0)return!1;let s=i.x,l=o.x,u=a.x,d=i.y,c=o.y,h=a.y,f=s<l?s<u?s:u:l<u?l:u,g=d<c?d<h?d:h:c<h?c:h,y=s>l?s>u?s:u:l>u?l:u,m=d>c?d>h?d:h:c>h?c:h,p=f5(f,g,t,r,n),v=f5(y,m,t,r,n),b=e.prevZ,x=e.nextZ;for(;b&&b.z>=p&&x&&x.z<=v;){if(b.x>=f&&b.x<=y&&b.y>=g&&b.y<=m&&b!==i&&b!==a&&Ab(s,d,l,c,u,h,b.x,b.y)&&$n(b.prev,b,b.next)>=0||(b=b.prevZ,x.x>=f&&x.x<=y&&x.y>=g&&x.y<=m&&x!==i&&x!==a&&Ab(s,d,l,c,u,h,x.x,x.y)&&$n(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;b&&b.z>=p;){if(b.x>=f&&b.x<=y&&b.y>=g&&b.y<=m&&b!==i&&b!==a&&Ab(s,d,l,c,u,h,b.x,b.y)&&$n(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=v;){if(x.x>=f&&x.x<=y&&x.y>=g&&x.y<=m&&x!==i&&x!==a&&Ab(s,d,l,c,u,h,x.x,x.y)&&$n(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function VOe(e,t,r){let n=e;do{let i=n.prev,o=n.next.next;!WR(i,o)&&Hne(i,n,n.next,o)&&CA(i,o)&&CA(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),TA(n),TA(n.next),n=e=o),n=n.next}while(n!==e);return y0(n)}function jOe(e,t,r,n,i,o){let a=e;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&QOe(a,s)){let l=Gne(a,s);a=y0(a,a.next),l=y0(l,l.next),MA(a,t,r,n,i,o,0),MA(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function HOe(e,t,r,n){let i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=jne(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(JOe(u));for(i.sort(GOe),o=0;o<i.length;o++)r=WOe(i[o],r);return r}function GOe(e,t){return e.x-t.x}function WOe(e,t){let r=qOe(e,t);if(!r)return t;let n=Gne(r,e);return y0(n,n.next),y0(r,r.next)}function qOe(e,t){let r=t,n=-1/0,i,o=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){let h=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=o&&h>n&&(n=h,i=r.x<r.next.x?r:r.next,h===o))return i}r=r.next}while(r!==t);if(!i)return null;let s=i,l=i.x,u=i.y,d=1/0,c;r=i;do o>=r.x&&r.x>=l&&o!==r.x&&Ab(a<u?o:n,a,l,u,a<u?n:o,a,r.x,r.y)&&(c=Math.abs(a-r.y)/(o-r.x),CA(r,e)&&(c<d||c===d&&(r.x>i.x||r.x===i.x&&XOe(i,r)))&&(i=r,d=c)),r=r.next;while(r!==s);return i}function XOe(e,t){return $n(e.prev,e,t.prev)<0&&$n(t.next,e,e.next)<0}function YOe(e,t,r,n){let i=e;do i.z===0&&(i.z=f5(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,KOe(i)}function KOe(e){let t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function f5(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function JOe(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Ab(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function QOe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!ZOe(e,t)&&(CA(e,t)&&CA(t,e)&&$Oe(e,t)&&($n(e.prev,e,t.prev)||$n(e,t.prev,t))||WR(e,t)&&$n(e.prev,e,e.next)>0&&$n(t.prev,t,t.next)>0)}function $n(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function WR(e,t){return e.x===t.x&&e.y===t.y}function Hne(e,t,r,n){let i=WE($n(e,t,r)),o=WE($n(e,t,n)),a=WE($n(r,n,e)),s=WE($n(r,n,t));return!!(i!==o&&a!==s||i===0&&GE(e,r,t)||o===0&&GE(e,n,t)||a===0&&GE(r,e,n)||s===0&&GE(r,t,n))}function GE(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function WE(e){return e>0?1:e<0?-1:0}function ZOe(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Hne(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function CA(e,t){return $n(e.prev,e,e.next)<0?$n(e,t,e.next)>=0&&$n(e,e.prev,t)>=0:$n(e,t,e.prev)<0||$n(e,e.next,t)<0}function $Oe(e,t){let r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function Gne(e,t){let r=new p5(e.i,e.x,e.y),n=new p5(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function b7(e,t,r,n){let i=new p5(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function TA(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function p5(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function eRe(e,t,r,n){let i=0;for(let o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}var Wne=class{static area(e){let t=e.length,r=0;for(let n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return r*.5}static isClockWise(e){return Wne.area(e)<0}static triangulateShape(e,t){let r=[],n=[],i=[];x7(e),w7(r,e);let o=e.length;t.forEach(x7);for(let s=0;s<t.length;s++)n.push(o),o+=t[s].length,w7(r,t[s]);let a=FOe.triangulate(r,n);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}};function x7(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function w7(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var qne=class extends UV{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(n,i,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qne(e.radius,e.detail)}},VV=class extends Jt{constructor(e=1,t=32,r=16,n=0,i=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let s=Math.min(o+a,Math.PI),l=0,u=[],d=new X,c=new X,h=[],f=[],g=[],y=[];for(let m=0;m<=r;m++){let p=[],v=m/r,b=0;m==0&&o==0?b=.5/t:m==r&&s==Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){let _=x/t;d.x=-e*Math.cos(n+_*i)*Math.sin(o+v*a),d.y=e*Math.cos(o+v*a),d.z=e*Math.sin(n+_*i)*Math.sin(o+v*a),f.push(d.x,d.y,d.z),c.copy(d).normalize(),g.push(c.x,c.y,c.z),y.push(_+b,1-v),p.push(l++)}u.push(p)}for(let m=0;m<r;m++)for(let p=0;p<t;p++){let v=u[m][p+1],b=u[m][p],x=u[m+1][p],_=u[m+1][p+1];(m!==0||o>0)&&h.push(v,b,_),(m!==r-1||s<Math.PI)&&h.push(b,x,_)}this.setIndex(h),this.setAttribute("position",new Rt(f,3)),this.setAttribute("normal",new Rt(g,3)),this.setAttribute("uv",new Rt(y,2))}static fromJSON(e){return new VV(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},Xne=class extends Jt{constructor(e=1,t=.4,r=64,n=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},r=Math.floor(r),n=Math.floor(n);let a=[],s=[],l=[],u=[],d=new X,c=new X,h=new X,f=new X,g=new X,y=new X,m=new X;for(let v=0;v<=r;++v){let b=v/r*i*Math.PI*2;p(b,i,o,e,h),p(b+.01,i,o,e,f),y.subVectors(f,h),m.addVectors(f,h),g.crossVectors(y,m),m.crossVectors(g,y),g.normalize(),m.normalize();for(let x=0;x<=n;++x){let _=x/n*Math.PI*2,A=-t*Math.cos(_),M=t*Math.sin(_);d.x=h.x+(A*m.x+M*g.x),d.y=h.y+(A*m.y+M*g.y),d.z=h.z+(A*m.z+M*g.z),s.push(d.x,d.y,d.z),c.subVectors(d,h).normalize(),l.push(c.x,c.y,c.z),u.push(v/r),u.push(x/n)}}for(let v=1;v<=r;v++)for(let b=1;b<=n;b++){let x=(n+1)*(v-1)+(b-1),_=(n+1)*v+(b-1),A=(n+1)*v+b,M=(n+1)*(v-1)+b;a.push(x,_,M),a.push(_,A,M)}this.setIndex(a),this.setAttribute("position",new Rt(s,3)),this.setAttribute("normal",new Rt(l,3)),this.setAttribute("uv",new Rt(u,2));function p(v,b,x,_,A){let M=Math.cos(v),T=Math.sin(v),C=x/b*v,E=Math.cos(C);A.x=_*(2+E)*.5*M,A.y=_*(2+E)*T*.5,A.z=_*Math.sin(C)*.5}}static fromJSON(e){return new Xne(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function Pf(e,t,r){return Yne(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)}function qE(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function Yne(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function tRe(e){function t(i,o){return e[i]-e[o]}let r=e.length,n=new Array(r);for(let i=0;i!==r;++i)n[i]=i;return n.sort(t),n}function _7(e,t,r){let n=e.length,i=new e.constructor(n);for(let o=0,a=0;a!==n;++o){let s=r[o]*t;for(let l=0;l!==t;++l)i[a++]=e[s+l]}return i}function Kne(e,t,r,n){let i=1,o=e[0];for(;o!==void 0&&o[n]===void 0;)o=e[i++];if(o===void 0)return;let a=o[n];if(a!==void 0)if(Array.isArray(a))do a=o[n],a!==void 0&&(t.push(o.time),r.push.apply(r,a)),o=e[i++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[n],a!==void 0&&(t.push(o.time),a.toArray(r,r.length)),o=e[i++];while(o!==void 0);else do a=o[n],a!==void 0&&(t.push(o.time),r.push(a)),o=e[i++];while(o!==void 0)}var qR=class{constructor(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{let o;r:{n:if(!(e<n)){for(let a=r+2;;){if(n===void 0){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(i=n,n=t[++r],e<n)break t}o=t.length;break r}if(!(e>=i)){let a=t[1];e<a&&(r=2,i=a);for(let s=r-2;;){if(i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===s)break;if(n=i,i=t[--r-1],e>=i)break t}o=r,r=0;break r}break e}for(;r<o;){let a=r+o>>>1;e<t[a]?o=a:r=a+1}if(n=t[r],i=t[r-1],i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n;for(let o=0;o!==n;++o)t[o]=r[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},rRe=class extends qR{constructor(e,t,r,n){super(e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xb,endingEnd:xb}}intervalChanged_(e,t,r){let n=this.parameterPositions,i=e-2,o=e+1,a=n[i],s=n[o];if(a===void 0)switch(this.getSettings_().endingStart){case wb:i=e,a=2*t-r;break;case CD:i=n.length-2,a=t+n[i]-n[i+1];break;default:i=e,a=r}if(s===void 0)switch(this.getSettings_().endingEnd){case wb:o=e,s=2*r-t;break;case CD:o=1,s=r+n[1]-n[0];break;default:o=e-1,s=t}let l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-r),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(e,t,r,n){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=this._offsetPrev,d=this._offsetNext,c=this._weightPrev,h=this._weightNext,f=(r-t)/(n-t),g=f*f,y=g*f,m=-c*y+2*c*g-c*f,p=(1+c)*y+(-1.5-2*c)*g+(-.5+c)*f+1,v=(-1-h)*y+(1.5+h)*g+.5*f,b=h*y-h*g;for(let x=0;x!==a;++x)i[x]=m*o[u+x]+p*o[l+x]+v*o[s+x]+b*o[d+x];return i}},Jne=class extends qR{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=(r-t)/(n-t),d=1-u;for(let c=0;c!==a;++c)i[c]=o[l+c]*d+o[s+c]*u;return i}},nRe=class extends qR{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e){return this.copySampleValue_(e-1)}},hd=class{constructor(e,t,r,n){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qE(t,this.TimeBufferType),this.values=qE(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:qE(e.times,Array),values:qE(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(r.interpolation=n)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new nRe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jne(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new rRe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case AD:t=this.InterpolantFactoryMethodDiscrete;break;case MD:t=this.InterpolantFactoryMethodLinear;break;case GL:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return AD;case this.InterpolantFactoryMethodLinear:return MD;case this.InterpolantFactoryMethodSmooth:return GL}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]*=e}return this}trim(e,t){let r=this.times,n=r.length,i=0,o=n-1;for(;i!==n&&r[i]<e;)++i;for(;o!==-1&&r[o]>t;)--o;if(++o,i!==0||o!==n){i>=o&&(o=Math.max(o,1),i=o-1);let a=this.getValueSize();this.times=Pf(r,i,o),this.values=Pf(this.values,i*a,o*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,n=this.values,i=r.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){let s=r[a];if(typeof s=="number"&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(o!==null&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(n!==void 0&&Yne(n))for(let a=0,s=n.length;a!==s;++a){let l=n[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=Pf(this.times),t=Pf(this.values),r=this.getValueSize(),n=this.getInterpolation()===GL,i=e.length-1,o=1;for(let a=1;a<i;++a){let s=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(n)s=!0;else{let d=a*r,c=d-r,h=d+r;for(let f=0;f!==r;++f){let g=t[d+f];if(g!==t[c+f]||g!==t[h+f]){s=!0;break}}}if(s){if(a!==o){e[o]=e[a];let d=a*r,c=o*r;for(let h=0;h!==r;++h)t[c+h]=t[d+h]}++o}}if(i>0){e[o]=e[i];for(let a=i*r,s=o*r,l=0;l!==r;++l)t[s+l]=t[a+l];++o}return o!==e.length?(this.times=Pf(e,0,o),this.values=Pf(t,0,o*r)):(this.times=e,this.values=t),this}clone(){let e=Pf(this.times,0),t=Pf(this.values,0),r=this.constructor,n=new r(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}};hd.prototype.TimeBufferType=Float32Array;hd.prototype.ValueBufferType=Float32Array;hd.prototype.DefaultInterpolation=MD;var v1=class extends hd{};v1.prototype.ValueTypeName="bool";v1.prototype.ValueBufferType=Array;v1.prototype.DefaultInterpolation=AD;v1.prototype.InterpolantFactoryMethodLinear=void 0;v1.prototype.InterpolantFactoryMethodSmooth=void 0;var Qne=class extends hd{};Qne.prototype.ValueTypeName="color";var ID=class extends hd{};ID.prototype.ValueTypeName="number";var iRe=class extends qR{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(r-t)/(n-t),l=e*a;for(let u=l+a;l!==u;l+=4)xr.slerpFlat(i,0,o,l-a,o,l,s);return i}},OM=class extends hd{InterpolantFactoryMethodLinear(e){return new iRe(this.times,this.values,this.getValueSize(),e)}};OM.prototype.ValueTypeName="quaternion";OM.prototype.DefaultInterpolation=MD;OM.prototype.InterpolantFactoryMethodSmooth=void 0;var y1=class extends hd{};y1.prototype.ValueTypeName="string";y1.prototype.ValueBufferType=Array;y1.prototype.DefaultInterpolation=AD;y1.prototype.InterpolantFactoryMethodLinear=void 0;y1.prototype.InterpolantFactoryMethodSmooth=void 0;var LD=class extends hd{};LD.prototype.ValueTypeName="vector";var m5=class{constructor(e,t=-1,r,n=PV){this.name=e,this.tracks=r,this.duration=t,this.blendMode=n,this.uuid=Xl(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,n=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(aRe(r[o]).scale(n));let i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){let t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=r.length;i!==o;++i)t.push(hd.toJSON(r[i]));return n}static CreateFromMorphTargetSequence(e,t,r,n){let i=t.length,o=[];for(let a=0;a<i;a++){let s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);let u=tRe(s);s=_7(s,1,u),l=_7(l,1,u),!n&&s[0]===0&&(s.push(i),l.push(l[0])),o.push(new ID(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let n=e;r=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let n={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){let l=e[a],u=l.name.match(i);if(u&&u.length>1){let d=u[1],c=n[d];c||(n[d]=c=[]),c.push(l)}}let o=[];for(let a in n)o.push(this.CreateFromMorphTargetSequence(a,n[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(u,d,c,h,f){if(c.length!==0){let g=[],y=[];Kne(c,g,y,h),g.length!==0&&f.push(new u(d,g,y))}},n=[],i=e.name||"default",o=e.fps||30,a=e.blendMode,s=e.length||-1,l=e.hierarchy||[];for(let u=0;u<l.length;u++){let d=l[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){let c={},h;for(h=0;h<d.length;h++)if(d[h].morphTargets)for(let f=0;f<d[h].morphTargets.length;f++)c[d[h].morphTargets[f]]=-1;for(let f in c){let g=[],y=[];for(let m=0;m!==d[h].morphTargets.length;++m){let p=d[h];g.push(p.time),y.push(p.morphTarget===f?1:0)}n.push(new ID(".morphTargetInfluence["+f+"]",g,y))}s=c.length*o}else{let c=".bones["+t[u].name+"]";r(LD,c+".position",d,"pos",n),r(OM,c+".quaternion",d,"rot",n),r(LD,c+".scale",d,"scl",n)}}return n.length===0?null:new this(i,s,n,a)}resetDuration(){let e=this.tracks,t=0;for(let r=0,n=e.length;r!==n;++r){let i=this.tracks[r];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function oRe(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ID;case"vector":case"vector2":case"vector3":case"vector4":return LD;case"color":return Qne;case"quaternion":return OM;case"bool":case"boolean":return v1;case"string":return y1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function aRe(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=oRe(e.type);if(e.times===void 0){let r=[],n=[];Kne(e.keys,r,n,"value"),e.times=r,e.values=n}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var S7={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Zne=class{constructor(e,t,r){let n=this,i=!1,o=0,a=0,s,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,i===!1&&n.onStart!==void 0&&n.onStart(u,o,a),i=!0},this.itemEnd=function(u){o++,n.onProgress!==void 0&&n.onProgress(u,o,a),o===a&&(i=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(u){n.onError!==void 0&&n.onError(u)},this.resolveURL=function(u){return s?s(u):u},this.setURLModifier=function(u){return s=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){let d=l.indexOf(u);return d!==-1&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,c=l.length;d<c;d+=2){let h=l[d],f=l[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return f}return null}}},sRe=new Zne,jV=class{constructor(e){this.manager=e!==void 0?e:sRe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(n,i){r.load(e,n,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},zd={},lRe=class extends Error{constructor(e,t){super(e),this.response=t}},g5=class extends jV{constructor(e){super(e)}load(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let i=S7.get(e);if(i!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(zd[e]!==void 0){zd[e].push({onLoad:t,onProgress:r,onError:n});return}zd[e]=[],zd[e].push({onLoad:t,onProgress:r,onError:n});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=zd[e],d=l.body.getReader(),c=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=c?parseInt(c):0,f=h!==0,g=0,y=new ReadableStream({start(m){p();function p(){d.read().then(({done:v,value:b})=>{if(v)m.close();else{g+=b.byteLength;let x=new ProgressEvent("progress",{lengthComputable:f,loaded:g,total:h});for(let _=0,A=u.length;_<A;_++){let M=u[_];M.onProgress&&M.onProgress(x)}m.enqueue(b),p()}})}}});return new Response(y)}else throw new lRe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(s){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(a),d=u&&u[1]?u[1].toLowerCase():void 0,c=new TextDecoder(d);return l.arrayBuffer().then(h=>c.decode(h))}}}).then(l=>{S7.add(e,l);let u=zd[e];delete zd[e];for(let d=0,c=u.length;d<c;d++){let h=u[d];h.onLoad&&h.onLoad(l)}}).catch(l=>{let u=zd[e];if(u===void 0)throw this.manager.itemError(e),l;delete zd[e];for(let d=0,c=u.length;d<c;d++){let h=u[d];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},RM=class extends bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new tr(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},uRe=class extends RM{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new tr(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},xB=new ft,A7=new X,M7=new X,HV=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ae(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new IV,this._frameExtents=new Ae(1,1),this._viewportCount=1,this._viewports=[new Mr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;A7.setFromMatrixPosition(e.matrixWorld),t.position.copy(A7),M7.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(M7),t.updateMatrixWorld(),xB.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xB),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(xB)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},cRe=class extends HV{constructor(){super(new ea(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=AA*2*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(r!==t.fov||n!==t.aspect||i!==t.far)&&(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},dRe=class extends RM{constructor(e,t,r=0,n=Math.PI/3,i=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.target=new bn,this.distance=r,this.angle=n,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new cRe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},C7=new ft,g_=new X,wB=new X,hRe=class extends HV{constructor(){super(new ea(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ae(4,2),this._viewportCount=6,this._viewports=[new Mr(2,1,1,1),new Mr(0,1,1,1),new Mr(3,1,1,1),new Mr(1,1,1,1),new Mr(3,0,1,1),new Mr(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,n=this.matrix,i=e.distance||r.far;i!==r.far&&(r.far=i,r.updateProjectionMatrix()),g_.setFromMatrixPosition(e.matrixWorld),r.position.copy(g_),wB.copy(r.position),wB.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(wB),r.updateMatrixWorld(),n.makeTranslation(-g_.x,-g_.y,-g_.z),C7.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(C7)}},fRe=class extends RM{constructor(e,t,r=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=n,this.shadow=new hRe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},pRe=class extends HV{constructor(){super(new LV(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},mRe=class extends RM{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.target=new bn,this.shadow=new pRe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},$ne=class extends Jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},eie=class extends jV{constructor(e){super(e)}load(e,t,r,n){let i=this,o=new g5(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(a){try{t(i.parse(JSON.parse(a)))}catch(s){n?n(s):console.error(s),i.manager.itemError(e)}},r,n)}parse(e){let t={},r={};function n(c,h){if(t[h]!==void 0)return t[h];let f=c.interleavedBuffers[h],g=i(c,f.buffer),y=SE(f.type,g),m=new AOe(y,f.stride);return m.uuid=f.uuid,t[h]=m,m}function i(c,h){if(r[h]!==void 0)return r[h];let f=c.arrayBuffers[h],g=new Uint32Array(f).buffer;return r[h]=g,g}let o=e.isInstancedBufferGeometry?new $ne:new Jt,a=e.data.index;if(a!==void 0){let c=SE(a.type,a.array);o.setIndex(new fr(c,1))}let s=e.data.attributes;for(let c in s){let h=s[c],f;if(h.isInterleavedBufferAttribute){let g=n(e.data,h.data);f=new h5(g,h.itemSize,h.offset,h.normalized)}else{let g=SE(h.type,h.array),y=h.isInstancedBufferAttribute?Nne:fr;f=new y(g,h.itemSize,h.normalized)}h.name!==void 0&&(f.name=h.name),h.usage!==void 0&&f.setUsage(h.usage),h.updateRange!==void 0&&(f.updateRange.offset=h.updateRange.offset,f.updateRange.count=h.updateRange.count),o.setAttribute(c,f)}let l=e.data.morphAttributes;if(l)for(let c in l){let h=l[c],f=[];for(let g=0,y=h.length;g<y;g++){let m=h[g],p;if(m.isInterleavedBufferAttribute){let v=n(e.data,m.data);p=new h5(v,m.itemSize,m.offset,m.normalized)}else{let v=SE(m.type,m.array);p=new fr(v,m.itemSize,m.normalized)}m.name!==void 0&&(p.name=m.name),f.push(p)}o.morphAttributes[c]=f}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let c=0,h=u.length;c!==h;++c){let f=u[c];o.addGroup(f.start,f.count,f.materialIndex)}let d=e.data.boundingSphere;if(d!==void 0){let c=new X;d.center!==void 0&&c.fromArray(d.center),o.boundingSphere=new Ts(c,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}},gRe=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=T7(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=T7();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function T7(){return(typeof performance>"u"?Date:performance).now()}var vRe=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let n,i,o;switch(t){case"quaternion":n=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":n=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:n=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,n=this.valueSize,i=e*n+n,o=this.cumulativeWeight;if(o===0){for(let a=0;a!==n;++a)r[i+a]=r[a];o=t}else{o+=t;let a=t/o;this._mixBufferRegion(r,i,0,a,n)}this.cumulativeWeight=o}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,n=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){let s=t*this._origIndex;this._mixBufferRegion(r,n,s,1-i,t)}o>0&&this._mixBufferRegionAdditive(r,n,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){a.setValue(r,n);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,n=r*this._origIndex;e.getValue(t,n);for(let i=r,o=n;i!==o;++i)t[i]=t[n+i%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,n,i){if(n>=.5)for(let o=0;o!==i;++o)e[t+o]=e[r+o]}_slerp(e,t,r,n){xr.slerpFlat(e,t,e,t,e,r,n)}_slerpAdditive(e,t,r,n,i){let o=this._workIndex*i;xr.multiplyQuaternionsFlat(e,o,e,t,e,r),xr.slerpFlat(e,t,e,t,e,o,n)}_lerp(e,t,r,n,i){let o=1-n;for(let a=0;a!==i;++a){let s=t+a;e[s]=e[s]*o+e[r+a]*n}}_lerpAdditive(e,t,r,n,i){for(let o=0;o!==i;++o){let a=t+o;e[a]=e[a]+e[r+o]*n}}},GV="\\[\\]\\.:\\/",yRe=new RegExp("["+GV+"]","g"),WV="[^"+GV+"]",bRe="[^"+GV.replace("\\.","")+"]",xRe=/((?:WC+[\/:])*)/.source.replace("WC",WV),wRe=/(WCOD+)?/.source.replace("WCOD",bRe),_Re=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",WV),SRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",WV),ARe=new RegExp("^"+xRe+wRe+_Re+SRe+"$"),MRe=["material","materials","bones","map"],CRe=class{constructor(e,t,r){let n=r||_n.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,n=this._bindings[r];n!==void 0&&n.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},_n=class{constructor(e,t,r){this.path=t,this.parsedPath=r||_n.parseTrackName(t),this.node=_n.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new _n.Composite(e,t,r):new _n(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(yRe,"")}static parseTrackName(e){let t=ARe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){let i=r.nodeName.substring(n+1);MRe.indexOf(i)!==-1&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(i){for(let o=0;o<i.length;o++){let a=i[o];if(a.name===t||a.uuid===t)return a;let s=r(a.children);if(s)return s}return null},n=r(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)e[t++]=r[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=_n.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let o=e[n];if(o===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(i!==void 0){if(n==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[i]!==void 0&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else o.fromArray!==void 0&&o.toArray!==void 0?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};_n.Composite=CRe;_n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_n.prototype.GetterByBindingType=[_n.prototype._getValue_direct,_n.prototype._getValue_array,_n.prototype._getValue_arrayElement,_n.prototype._getValue_toArray];_n.prototype.SetterByBindingTypeAndVersioning=[[_n.prototype._setValue_direct,_n.prototype._setValue_direct_setNeedsUpdate,_n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_array,_n.prototype._setValue_array_setNeedsUpdate,_n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_arrayElement,_n.prototype._setValue_arrayElement_setNeedsUpdate,_n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_fromArray,_n.prototype._setValue_fromArray_setNeedsUpdate,_n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var TRe=class{constructor(e,t,r=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=n;let i=t.tracks,o=i.length,a=new Array(o),s={endingStart:xb,endingEnd:xb};for(let l=0;l!==o;++l){let u=i[l].createInterpolant(null);a[l]=u,u.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vne,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let n=this._clip.duration,i=e._clip.duration,o=i/n,a=n/i;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let n=this._mixer,i=n.time,o=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);let s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+r,l[0]=e/o,l[1]=t/o,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,n){if(!this.enabled){this._updateWeight(e);return}let i=this._startTime;if(i!==null){let s=(e-i)*r;s<0||r===0?t=0:(this._startTime=null,t=r*s)}t*=this._updateTimeScale(e);let o=this._updateTime(t),a=this._updateWeight(e);if(a>0){let s=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case lTe:for(let u=0,d=s.length;u!==d;++u)s[u].evaluate(o),l[u].accumulateAdditive(a);break;case PV:default:for(let u=0,d=s.length;u!==d;++u)s[u].evaluate(o),l[u].accumulate(n,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;if(r!==null){let n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,n=this.time+e,i=this._loopCount,o=r===EV;if(e===0)return i===-1?n:o&&(i&1)===1?t-n:n;if(r===gne){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(i===-1&&(e>=0?(i=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),n>=t||n<0){let a=Math.floor(n/t);n-=t*a,i+=Math.abs(a);let s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(s===1){let l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=n;if(o&&(i&1)===1)return t-n}return n}_setEndings(e,t,r){let n=this._interpolantSettings;r?(n.endingStart=wb,n.endingEnd=wb):(e?n.endingStart=this.zeroSlopeAtStart?wb:xb:n.endingStart=CD,t?n.endingEnd=this.zeroSlopeAtEnd?wb:xb:n.endingEnd=CD)}_scheduleFading(e,t,r){let n=this._mixer,i=n.time,o=this._weightInterpolant;o===null&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);let a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=r,this}},ERe=new Float32Array(1),PRe=class extends Vo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,o=e._propertyBindings,a=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];u===void 0&&(u={},l[s]=u);for(let d=0;d!==i;++d){let c=n[d],h=c.name,f=u[h];if(f!==void 0)++f.referenceCount,o[d]=f;else{if(f=o[d],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,s,h));continue}let g=t&&t._propertyBindings[d].binding.parsedPath;f=new vRe(_n.create(r,h,g),c.ValueTypeName,c.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,h),o[d]=f}a[d].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,r)}let t=e._propertyBindings;for(let r=0,n=t.length;r!==n;++r){let i=t[r];i.useCount++===0&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,n=t.length;r!==n;++r){let i=t[r];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let n=this._actions,i=this._actionsByClip,o=i[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{let a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;let i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;let d=a.actionByRoot,c=(e._localRoot||this._root).uuid;delete d[c],s.length===0&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,n=t.length;r!==n;++r){let i=t[r];--i.referenceCount===0&&this._removeInactiveBinding(i)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_addInactiveBinding(e,t,r){let n=this._bindingsByRootAndName,i=this._bindings,o=n[t];o===void 0&&(o={},n[t]=o),o[r]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,o=this._bindingsByRootAndName,a=o[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],Object.keys(a).length===0&&delete o[n]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new Jne(new Float32Array(2),new Float32Array(2),1,ERe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i}clipAction(e,t,r){let n=t||this._root,i=n.uuid,o=typeof e=="string"?m5.findByName(n,e):e,a=o!==null?o.uuid:e,s=this._actionsByClip[a],l=null;if(r===void 0&&(o!==null?r=o.blendMode:r=PV),s!==void 0){let d=s.actionByRoot[i];if(d!==void 0&&d.blendMode===r)return d;l=s.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;let u=new TRe(this,o,t,r);return this._bindAction(u,l),this._addInactiveAction(u,a,i),u}existingAction(e,t){let r=t||this._root,n=r.uuid,i=typeof e=="string"?m5.findByName(r,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[n]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(n,e,i,o);let a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(i!==void 0){let o=i.knownActions;for(let a=0,s=o.length;a!==s;++a){let l=o[a];this._deactivateAction(l);let u=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete n[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let o in r){let a=r[o].actionByRoot,s=a[t];s!==void 0&&(this._deactivateAction(s),this._removeInactiveAction(s))}let n=this._bindingsByRootAndName,i=n[t];if(i!==void 0)for(let o in i){let a=i[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}},ht=class{constructor(e){this.value=e}clone(){return new ht(this.value.clone===void 0?this.value:this.value.clone())}},tie=class{constructor(e,t,r=0,n=1/0){this.ray=new f1(e,t),this.near=r,this.far=n,this.camera=null,this.layers=new OV,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return v5(e,this,r,t),r.sort(E7),r}intersectObjects(e,t=!0,r=[]){for(let n=0,i=e.length;n<i;n++)v5(e[n],this,r,t);return r.sort(E7),r}};function E7(e,t){return e.distance-t.distance}function v5(e,t,r,n){if(e.layers.test(t.layers)&&e.raycast(t,r),n===!0){let i=e.children;for(let o=0,a=i.length;o<a;o++)v5(i[o],t,r,!0)}}var P7=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(zi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},D7=new Ae,rie=class{constructor(e=new Ae(1/0,1/0),t=new Ae(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=D7.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return D7.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},O7=new X,XE=new X,Yl=class{constructor(e=new X,t=new X){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){O7.subVectors(e,this.start),XE.subVectors(this.end,this.start);let r=XE.dot(XE),n=XE.dot(O7)/r;return t&&(n=zi(n,0,1)),n}closestPointToPoint(e,t,r){let n=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},R7=new X,DRe=class extends bn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let r=new Jt,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){let l=o/s*Math.PI*2,u=a/s*Math.PI*2;n.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Rt(n,3));let i=new em({fog:!1,toneMapped:!1});this.cone=new DM(r,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),R7.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(R7),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},ORe=class extends Fa{constructor(e,t,r){let n=new VV(t,4,2),i=new PM({wireframe:!0,fog:!1,toneMapped:!1});super(n,i),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},I7=new X,YE=new X,L7=new X,RRe=class extends bn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let n=new Jt;n.setAttribute("position",new Rt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new em({fog:!1,toneMapped:!1});this.lightPlane=new DD(n,i),this.add(this.lightPlane),n=new Jt,n.setAttribute("position",new Rt([0,0,0,0,0,1],3)),this.targetLine=new DD(n,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),I7.setFromMatrixPosition(this.light.matrixWorld),YE.setFromMatrixPosition(this.light.target.matrixWorld),L7.subVectors(YE,I7),this.lightPlane.lookAt(YE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(YE),this.targetLine.scale.z=L7.length()}},KE=new X,ui=new m1,BD=class extends DM{constructor(e){let t=new Jt,r=new em({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],i=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(f,g){s(f),s(g)}function s(f){n.push(0,0,0),i.push(0,0,0),o[f]===void 0&&(o[f]=[]),o[f].push(n.length/3-1)}t.setAttribute("position",new Rt(n,3)),t.setAttribute("color",new Rt(i,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();let l=new tr(16755200),u=new tr(16711680),d=new tr(43775),c=new tr(16777215),h=new tr(3355443);this.setColors(l,u,d,c,h)}setColors(e,t,r,n,i){let o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,n.r,n.g,n.b),o.setXYZ(39,n.r,n.g,n.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,n=1;ui.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Si("c",t,e,ui,0,0,-1),Si("t",t,e,ui,0,0,1),Si("n1",t,e,ui,-r,-n,-1),Si("n2",t,e,ui,r,-n,-1),Si("n3",t,e,ui,-r,n,-1),Si("n4",t,e,ui,r,n,-1),Si("f1",t,e,ui,-r,-n,1),Si("f2",t,e,ui,r,-n,1),Si("f3",t,e,ui,-r,n,1),Si("f4",t,e,ui,r,n,1),Si("u1",t,e,ui,r*.7,n*1.1,-1),Si("u2",t,e,ui,-r*.7,n*1.1,-1),Si("u3",t,e,ui,0,n*2,-1),Si("cf1",t,e,ui,-r,0,1),Si("cf2",t,e,ui,r,0,1),Si("cf3",t,e,ui,0,-n,1),Si("cf4",t,e,ui,0,n,1),Si("cn1",t,e,ui,-r,0,-1),Si("cn2",t,e,ui,r,0,-1),Si("cn3",t,e,ui,0,-n,-1),Si("cn4",t,e,ui,0,n,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Si(e,t,r,n,i,o,a){KE.set(i,o,a).unproject(n);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,d=s.length;u<d;u++)l.setXYZ(s[u],KE.x,KE.y,KE.z)}}var ND=class extends DM{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new Jt;i.setIndex(new fr(r,1)),i.setAttribute("position",new Rt(n,3)),super(i,new em({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},IRe=class extends DM{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new Jt;n.setAttribute("position",new Rt(t,3)),n.setAttribute("color",new Rt(r,3));let i=new em({vertexColors:!0,toneMapped:!1});super(n,i),this.type="AxesHelper"}setColors(e,t,r){let n=new tr,i=this.geometry.attributes.color.array;return n.set(e),n.toArray(i,0),n.toArray(i,3),n.set(t),n.toArray(i,6),n.toArray(i,9),n.set(r),n.toArray(i,12),n.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},oh=LRe();function LRe(){let e=new ArrayBuffer(4),t=new Float32Array(e),r=new Uint32Array(e),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){let u=l-127;u<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}let o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,o[l]=u|d}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:t,uint32View:r,baseTable:n,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}function BRe(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=zi(e,-65504,65504),oh.floatView[0]=e;let t=oh.uint32View[0],r=t>>23&511;return oh.baseTable[r]+((t&8388607)>>oh.shiftTable[r])}function NRe(e){let t=e>>10;return oh.uint32View[0]=oh.mantissaTable[oh.offsetTable[t]+(e&1023)]+oh.exponentTable[t],oh.floatView[0]}var kRe=Object.freeze({__proto__:null,fromHalfFloat:NRe,toHalfFloat:BRe});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:h1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=h1);var v_=".",qV=Symbol("target"),nie=Symbol("unsubscribe");function y5(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function FRe(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var kc=Array.isArray;function XV(e){return typeof e=="symbol"}var zRe={after:(e,t)=>kc(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>kc(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=v_),XV(t)?e+t.toString():e+t):e,initial:e=>{if(kc(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(v_);return t===-1?"":e.slice(0,t)},last:e=>{if(kc(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(v_);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(kc(e))for(let r of e)t(r);else if(e!==""){let r=0,n=e.indexOf(v_);if(n===-1)t(e);else for(;r<e.length;)n===-1&&(n=e.length),t(e.slice(r,n)),r=n+1,n=e.indexOf(v_,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},Ll=zRe;function URe(e){return typeof e=="object"&&typeof e.next=="function"}function VRe(e,t,r,n,i){let o=e.next;if(t.name==="entries")e.next=function(){let a=o.call(this);return a.done===!1&&(a.value[0]=i(a.value[0],t,a.value[0],n),a.value[1]=i(a.value[1],t,a.value[0],n)),a};else if(t.name==="values"){let a=r[qV].keys();e.next=function(){let s=o.call(this);return s.done===!1&&(s.value=i(s.value,t,a.next().value,n)),s}}else e.next=function(){let a=o.call(this);return a.done===!1&&(a.value=i(a.value,t,a.value,n)),a};return e}function B7(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&XV(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var jRe=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),n=r[t];return n===void 0&&(n=Reflect.getOwnPropertyDescriptor(e,t),r[t]=n),n}getProxy(e,t,r,n){if(this.isUnsubscribed)return e;let i=e[n],o=i||e;this._pathCache.set(o,t);let a=this._proxyCache.get(o);return a===void 0&&(a=i===void 0?new Proxy(e,r):e,this._proxyCache.set(o,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,Ll.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,n,i){if(!this._equals(i,r)||!(t in e)){let o=this._getOwnPropertyDescriptor(e,t);return o!==void 0&&"set"in o?Reflect.set(e,t,r,n):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let n=this._getDescriptorCache().get(e);n&&(delete n[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let n=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&n!==void 0&&Object.is(e.value,n.value)&&(e.writable||!1)===(n.writable||!1)&&(e.enumerable||!1)===(n.enumerable||!1)&&(e.configurable||!1)===(n.configurable||!1)&&e.get===n.get&&e.set===n.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function b5(e){return toString.call(e)==="[object Object]"}function JE(){return!0}function Ty(e,t){return e.length!==t.length||e.some((r,n)=>t[n]!==r)}var iie=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),HRe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),oie={push:JE,pop:JE,shift:JE,unshift:JE,copyWithin:Ty,reverse:Ty,sort:Ty,splice:Ty,flat:Ty,fill:Ty},GRe=new Set([...iie,...HRe,...Object.keys(oie)]);function QE(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var aie=["keys","values","entries"],sie=new Set(["has","toString"]),lie={add:QE,clear:QE,delete:QE,forEach:QE},WRe=new Set([...sie,...Object.keys(lie),...aie]);function ZE(e,t){if(e.size!==t.size)return!0;let r;for(let[n,i]of e)if(r=t.get(n),r!==i||r===void 0&&!t.has(n))return!0;return!1}var qRe=new Set([...sie,"get"]),uie={set:ZE,clear:ZE,delete:ZE,forEach:ZE},XRe=new Set([...qRe,...Object.keys(uie),...aie]),jp=class{constructor(e,t,r,n){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=n,this._changes=n?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return iie.has(e)}_shallowClone(e){let t=e;if(b5(e))t={...e};else if(kc(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,n]of e.entries())t.set(r,this._shallowClone(n))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,n){return e?(kc(n)?this._onIsChanged=oie[t]:n instanceof Set?this._onIsChanged=lie[t]:n instanceof Map&&(this._onIsChanged=uie[t]),n):r}update(e,t,r){let n=Ll.after(e,this._path);if(t!=="length"){let i=this.clone;Ll.walk(n,o=>{i&&i[o]&&(this._clonedCache.has(i[o])||(i[o]=this._shallowClone(i[o])),i=i[o])}),this._hasOnValidate&&this._changes.push({path:n,property:t,previous:r}),i&&i[t]&&(i[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],Ll.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},N7=class extends jp{static isHandledMethod(e){return GRe.has(e)}},YRe=class extends jp{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},k7=class extends jp{static isHandledMethod(e){return WRe.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},F7=class extends jp{static isHandledMethod(e){return XRe.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},KRe=class extends jp{constructor(e,t,r,n){super(void 0,t,r,n),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},JRe=class extends jp{constructor(e,t,r,n){super(void 0,t,r,n),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Qy=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return b5(e)||kc(e)||y5(e)}static isHandledMethod(e,t){return b5(e)?jp.isHandledMethod(t):kc(e)?N7.isHandledMethod(t):e instanceof Set?k7.isHandledMethod(t):e instanceof Map?F7.isHandledMethod(t):y5(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let n=jp;kc(e)?n=N7:e instanceof Date?n=YRe:e instanceof Set?n=k7:e instanceof Map?n=F7:e instanceof WeakSet?n=KRe:e instanceof WeakMap&&(n=JRe),this._stack.push(new n(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:n}=e,i=Qy.isHandledMethod(r,n);return this._stack[this._stack.length-1].preferredThisArg(i,n,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},QRe={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},YV=(e,t,r={})=>{r={...QRe,...r};let n=Symbol("ProxyTarget"),{equals:i,isShallow:o,ignoreDetached:a,details:s}=r,l=new jRe(i),u=typeof r.onValidate=="function",d=new Qy(u),c=(v,b,x,_,A)=>!u||d.isCloning||r.onValidate(Ll.concat(l.getPath(v),b),x,_,A)===!0,h=(v,b,x,_)=>{!B7(l,r,b)&&!(a&&l.isDetached(v,e))&&f(l.getPath(v),b,x,_)},f=(v,b,x,_,A)=>{d.isCloning?d.update(v,b,_):t(Ll.concat(v,b),x,_,A)},g=v=>v&&(v[n]||v),y=(v,b,x,_)=>FRe(v)||x==="constructor"||o&&!Qy.isHandledMethod(b,x)||B7(l,r,x)||l.isGetInvariant(b,x)||a&&l.isDetached(b,e)?v:(_===void 0&&(_=l.getPath(b)),l.getProxy(v,Ll.concat(_,x),m,n)),m={get(v,b,x){if(XV(b)){if(b===n||b===qV)return v;if(b===nie&&!l.isUnsubscribed&&l.getPath(v).length===0)return l.unsubscribe(),v}let _=y5(v)?Reflect.get(v,b):Reflect.get(v,b,x);return y(_,v,b)},set(v,b,x,_){x=g(x);let A=v[n]||v,M=A[b];if(i(M,x)&&b in v)return!0;let T=c(v,b,x,M);return T&&l.setProperty(A,b,x,_,M)?(h(v,b,v[b],M),!0):!T},defineProperty(v,b,x){if(!l.isSameDescriptor(x,v,b)){let _=v[b];c(v,b,x.value,_)&&l.defineProperty(v,b,x,_)&&h(v,b,x.value,_)}return!0},deleteProperty(v,b){if(!Reflect.has(v,b))return!0;let x=Reflect.get(v,b),_=c(v,b,void 0,x);return _&&l.deleteProperty(v,b,x)?(h(v,b,void 0,x),!0):!_},apply(v,b,x){let _=b[n]||b;if(l.isUnsubscribed)return Reflect.apply(v,_,x);if((s===!1||s!==!0&&!s.includes(v.name))&&Qy.isHandledType(_)){let A=Ll.initial(l.getPath(v)),M=Qy.isHandledMethod(_,v.name);d.start(_,A,x);let T=Reflect.apply(v,d.preferredThisArg(v,b,_),M?x.map(D=>g(D)):x),C=d.isChanged(_,i),E=d.stop();if(Qy.isHandledType(T)&&M&&(b instanceof Map&&v.name==="get"&&(A=Ll.concat(A,x[0])),T=l.getProxy(T,A,m)),C){let D={name:v.name,args:x,result:T},I=d.isCloning?Ll.initial(A):A,k=d.isCloning?Ll.last(A):"";c(Ll.get(e,I),k,_,E,D)?f(I,k,_,E,D):d.undo(_)}return(b instanceof Map||b instanceof Set)&&URe(T)?VRe(T,v,b,A,y):T}return Reflect.apply(v,b,x)}},p=l.getProxy(e,r.pathAsArray?[]:"",m);return t=t.bind(p),u&&(r.onValidate=r.onValidate.bind(p)),p};YV.target=e=>e&&e[qV]||e;YV.unsubscribe=e=>e[nie]||e;var z7=YV,ZRe=typeof global=="object"&&global&&global.Object===Object&&global,cie=ZRe,$Re=typeof self=="object"&&self&&self.Object===Object&&self,eIe=cie||$Re||Function("return this")(),Zu=eIe,tIe=Zu.Symbol,Zl=tIe,die=Object.prototype,rIe=die.hasOwnProperty,nIe=die.toString,y_=Zl?Zl.toStringTag:void 0;function iIe(e){var t=rIe.call(e,y_),r=e[y_];try{e[y_]=void 0;var n=!0}catch{}var i=nIe.call(e);return n&&(t?e[y_]=r:delete e[y_]),i}var oIe=iIe,aIe=Object.prototype,sIe=aIe.toString;function lIe(e){return sIe.call(e)}var uIe=lIe,cIe="[object Null]",dIe="[object Undefined]",U7=Zl?Zl.toStringTag:void 0;function hIe(e){return e==null?e===void 0?dIe:cIe:U7&&U7 in Object(e)?oIe(e):uIe(e)}var R0=hIe;function fIe(e){return e!=null&&typeof e=="object"}var Rh=fIe,pIe="[object Symbol]";function mIe(e){return typeof e=="symbol"||Rh(e)&&R0(e)==pIe}var XR=mIe;function gIe(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var hie=gIe,vIe=Array.isArray,id=vIe,yIe=1/0,V7=Zl?Zl.prototype:void 0,j7=V7?V7.toString:void 0;function fie(e){if(typeof e=="string")return e;if(id(e))return hie(e,fie)+"";if(XR(e))return j7?j7.call(e):"";var t=e+"";return t=="0"&&1/e==-yIe?"-0":t}var bIe=fie,xIe=/\s/;function wIe(e){for(var t=e.length;t--&&xIe.test(e.charAt(t)););return t}var _Ie=wIe,SIe=/^\s+/;function AIe(e){return e&&e.slice(0,_Ie(e)+1).replace(SIe,"")}var MIe=AIe;function CIe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var qu=CIe,H7=NaN,TIe=/^[-+]0x[0-9a-f]+$/i,EIe=/^0b[01]+$/i,PIe=/^0o[0-7]+$/i,DIe=parseInt;function OIe(e){if(typeof e=="number")return e;if(XR(e))return H7;if(qu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=qu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=MIe(e);var r=EIe.test(e);return r||PIe.test(e)?DIe(e.slice(2),r?2:8):TIe.test(e)?H7:+e}var G7=OIe;function RIe(e){return e}var IIe=RIe,LIe="[object AsyncFunction]",BIe="[object Function]",NIe="[object GeneratorFunction]",kIe="[object Proxy]";function FIe(e){if(!qu(e))return!1;var t=R0(e);return t==BIe||t==NIe||t==LIe||t==kIe}var pie=FIe,zIe=Zu["__core-js_shared__"],_B=zIe,W7=function(){var e=/[^.]+$/.exec(_B&&_B.keys&&_B.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function UIe(e){return!!W7&&W7 in e}var VIe=UIe,jIe=Function.prototype,HIe=jIe.toString;function GIe(e){if(e!=null){try{return HIe.call(e)}catch{}try{return e+""}catch{}}return""}var I0=GIe,WIe=/[\\^$.*+?()[\]{}|]/g,qIe=/^\[object .+?Constructor\]$/,XIe=Function.prototype,YIe=Object.prototype,KIe=XIe.toString,JIe=YIe.hasOwnProperty,QIe=RegExp("^"+KIe.call(JIe).replace(WIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZIe(e){if(!qu(e)||VIe(e))return!1;var t=pie(e)?QIe:qIe;return t.test(I0(e))}var $Ie=ZIe;function e3e(e,t){return e==null?void 0:e[t]}var t3e=e3e;function r3e(e,t){var r=t3e(e,t);return $Ie(r)?r:void 0}var L0=r3e,n3e=L0(Zu,"WeakMap"),x5=n3e,q7=Object.create,i3e=function(){function e(){}return function(t){if(!qu(t))return{};if(q7)return q7(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),o3e=i3e;function a3e(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var s3e=a3e;function l3e(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var u3e=l3e,c3e=800,d3e=16,h3e=Date.now;function f3e(e){var t=0,r=0;return function(){var n=h3e(),i=d3e-(n-r);if(r=n,i>0){if(++t>=c3e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var p3e=f3e;function m3e(e){return function(){return e}}var g3e=m3e,v3e=function(){try{var e=L0(Object,"defineProperty");return e({},"",{}),e}catch{}}(),kD=v3e,y3e=kD?function(e,t){return kD(e,"toString",{configurable:!0,enumerable:!1,value:g3e(t),writable:!0})}:IIe,b3e=y3e,x3e=p3e(b3e),w3e=x3e;function _3e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var S3e=_3e,A3e=9007199254740991,M3e=/^(?:0|[1-9]\d*)$/;function C3e(e,t){var r=typeof e;return t=t??A3e,!!t&&(r=="number"||r!="symbol"&&M3e.test(e))&&e>-1&&e%1==0&&e<t}var KV=C3e;function T3e(e,t,r){t=="__proto__"&&kD?kD(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var mie=T3e;function E3e(e,t){return e===t||e!==e&&t!==t}var JV=E3e,P3e=Object.prototype,D3e=P3e.hasOwnProperty;function O3e(e,t,r){var n=e[t];(!(D3e.call(e,t)&&JV(n,r))||r===void 0&&!(t in e))&&mie(e,t,r)}var QV=O3e;function R3e(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;l===void 0&&(l=e[s]),i?mie(r,s,l):QV(r,s,l)}return r}var IM=R3e,X7=Math.max;function I3e(e,t,r){return t=X7(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=X7(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),s3e(e,this,s)}}var L3e=I3e,B3e=9007199254740991;function N3e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=B3e}var ZV=N3e;function k3e(e){return e!=null&&ZV(e.length)&&!pie(e)}var gie=k3e,F3e=Object.prototype;function z3e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||F3e;return e===r}var $V=z3e;function U3e(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var V3e=U3e,j3e="[object Arguments]";function H3e(e){return Rh(e)&&R0(e)==j3e}var Y7=H3e,vie=Object.prototype,G3e=vie.hasOwnProperty,W3e=vie.propertyIsEnumerable,q3e=Y7(function(){return arguments}())?Y7:function(e){return Rh(e)&&G3e.call(e,"callee")&&!W3e.call(e,"callee")},ej=q3e;function X3e(){return!1}var Y3e=X3e,yie=typeof $s=="object"&&$s&&!$s.nodeType&&$s,K7=yie&&typeof el=="object"&&el&&!el.nodeType&&el,K3e=K7&&K7.exports===yie,J7=K3e?Zu.Buffer:void 0,J3e=J7?J7.isBuffer:void 0,Q3e=J3e||Y3e,FD=Q3e,Z3e="[object Arguments]",$3e="[object Array]",eLe="[object Boolean]",tLe="[object Date]",rLe="[object Error]",nLe="[object Function]",iLe="[object Map]",oLe="[object Number]",aLe="[object Object]",sLe="[object RegExp]",lLe="[object Set]",uLe="[object String]",cLe="[object WeakMap]",dLe="[object ArrayBuffer]",hLe="[object DataView]",fLe="[object Float32Array]",pLe="[object Float64Array]",mLe="[object Int8Array]",gLe="[object Int16Array]",vLe="[object Int32Array]",yLe="[object Uint8Array]",bLe="[object Uint8ClampedArray]",xLe="[object Uint16Array]",wLe="[object Uint32Array]",Bn={};Bn[fLe]=Bn[pLe]=Bn[mLe]=Bn[gLe]=Bn[vLe]=Bn[yLe]=Bn[bLe]=Bn[xLe]=Bn[wLe]=!0;Bn[Z3e]=Bn[$3e]=Bn[dLe]=Bn[eLe]=Bn[hLe]=Bn[tLe]=Bn[rLe]=Bn[nLe]=Bn[iLe]=Bn[oLe]=Bn[aLe]=Bn[sLe]=Bn[lLe]=Bn[uLe]=Bn[cLe]=!1;function _Le(e){return Rh(e)&&ZV(e.length)&&!!Bn[R0(e)]}var SLe=_Le;function ALe(e){return function(t){return e(t)}}var tj=ALe,bie=typeof $s=="object"&&$s&&!$s.nodeType&&$s,TS=bie&&typeof el=="object"&&el&&!el.nodeType&&el,MLe=TS&&TS.exports===bie,SB=MLe&&cie.process,CLe=function(){try{var e=TS&&TS.require&&TS.require("util").types;return e||SB&&SB.binding&&SB.binding("util")}catch{}}(),Ix=CLe,Q7=Ix&&Ix.isTypedArray,TLe=Q7?tj(Q7):SLe,xie=TLe,ELe=Object.prototype,PLe=ELe.hasOwnProperty;function DLe(e,t){var r=id(e),n=!r&&ej(e),i=!r&&!n&&FD(e),o=!r&&!n&&!i&&xie(e),a=r||n||i||o,s=a?V3e(e.length,String):[],l=s.length;for(var u in e)(t||PLe.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||KV(u,l)))&&s.push(u);return s}var wie=DLe;function OLe(e,t){return function(r){return e(t(r))}}var _ie=OLe,RLe=_ie(Object.keys,Object),ILe=RLe,LLe=Object.prototype,BLe=LLe.hasOwnProperty;function NLe(e){if(!$V(e))return ILe(e);var t=[];for(var r in Object(e))BLe.call(e,r)&&r!="constructor"&&t.push(r);return t}var kLe=NLe;function FLe(e){return gie(e)?wie(e):kLe(e)}var rj=FLe;function zLe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var ULe=zLe,VLe=Object.prototype,jLe=VLe.hasOwnProperty;function HLe(e){if(!qu(e))return ULe(e);var t=$V(e),r=[];for(var n in e)n=="constructor"&&(t||!jLe.call(e,n))||r.push(n);return r}var GLe=HLe;function WLe(e){return gie(e)?wie(e,!0):GLe(e)}var Bg=WLe,qLe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,XLe=/^\w*$/;function YLe(e,t){if(id(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||XR(e)?!0:XLe.test(e)||!qLe.test(e)||t!=null&&e in Object(t)}var KLe=YLe,JLe=L0(Object,"create"),EA=JLe;function QLe(){this.__data__=EA?EA(null):{},this.size=0}var ZLe=QLe;function $Le(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var eBe=$Le,tBe="__lodash_hash_undefined__",rBe=Object.prototype,nBe=rBe.hasOwnProperty;function iBe(e){var t=this.__data__;if(EA){var r=t[e];return r===tBe?void 0:r}return nBe.call(t,e)?t[e]:void 0}var oBe=iBe,aBe=Object.prototype,sBe=aBe.hasOwnProperty;function lBe(e){var t=this.__data__;return EA?t[e]!==void 0:sBe.call(t,e)}var uBe=lBe,cBe="__lodash_hash_undefined__";function dBe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=EA&&t===void 0?cBe:t,this}var hBe=dBe;function b1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}b1.prototype.clear=ZLe;b1.prototype.delete=eBe;b1.prototype.get=oBe;b1.prototype.has=uBe;b1.prototype.set=hBe;var Z7=b1;function fBe(){this.__data__=[],this.size=0}var pBe=fBe;function mBe(e,t){for(var r=e.length;r--;)if(JV(e[r][0],t))return r;return-1}var YR=mBe,gBe=Array.prototype,vBe=gBe.splice;function yBe(e){var t=this.__data__,r=YR(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():vBe.call(t,r,1),--this.size,!0}var bBe=yBe;function xBe(e){var t=this.__data__,r=YR(t,e);return r<0?void 0:t[r][1]}var wBe=xBe;function _Be(e){return YR(this.__data__,e)>-1}var SBe=_Be;function ABe(e,t){var r=this.__data__,n=YR(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var MBe=ABe;function x1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}x1.prototype.clear=pBe;x1.prototype.delete=bBe;x1.prototype.get=wBe;x1.prototype.has=SBe;x1.prototype.set=MBe;var KR=x1,CBe=L0(Zu,"Map"),PA=CBe;function TBe(){this.size=0,this.__data__={hash:new Z7,map:new(PA||KR),string:new Z7}}var EBe=TBe;function PBe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var DBe=PBe;function OBe(e,t){var r=e.__data__;return DBe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var JR=OBe;function RBe(e){var t=JR(this,e).delete(e);return this.size-=t?1:0,t}var IBe=RBe;function LBe(e){return JR(this,e).get(e)}var BBe=LBe;function NBe(e){return JR(this,e).has(e)}var kBe=NBe;function FBe(e,t){var r=JR(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var zBe=FBe;function w1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}w1.prototype.clear=EBe;w1.prototype.delete=IBe;w1.prototype.get=BBe;w1.prototype.has=kBe;w1.prototype.set=zBe;var QR=w1,UBe="Expected a function";function nj(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(UBe);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(nj.Cache||QR),r}nj.Cache=QR;var VBe=nj,jBe=500;function HBe(e){var t=VBe(e,function(n){return r.size===jBe&&r.clear(),n}),r=t.cache;return t}var GBe=HBe,WBe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qBe=/\\(\\)?/g,XBe=GBe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(WBe,function(r,n,i,o){t.push(i?o.replace(qBe,"$1"):n||r)}),t}),YBe=XBe;function KBe(e){return e==null?"":bIe(e)}var JBe=KBe;function QBe(e,t){return id(e)?e:KLe(e,t)?[e]:YBe(JBe(e))}var _1=QBe,ZBe=1/0;function $Be(e){if(typeof e=="string"||XR(e))return e;var t=e+"";return t=="0"&&1/e==-ZBe?"-0":t}var ZR=$Be;function eNe(e,t){t=_1(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ZR(t[r++])];return r&&r==n?e:void 0}var Sie=eNe;function tNe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var ij=tNe,$7=Zl?Zl.isConcatSpreadable:void 0;function rNe(e){return id(e)||ej(e)||!!($7&&e&&e[$7])}var nNe=rNe;function Aie(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=nNe),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?Aie(s,t-1,r,n,i):ij(i,s):n||(i[i.length]=s)}return i}var iNe=Aie;function oNe(e){var t=e==null?0:e.length;return t?iNe(e,1):[]}var aNe=oNe;function sNe(e){return w3e(L3e(e,void 0,aNe),e+"")}var Mie=sNe,lNe=_ie(Object.getPrototypeOf,Object),oj=lNe,uNe="[object Object]",cNe=Function.prototype,dNe=Object.prototype,Cie=cNe.toString,hNe=dNe.hasOwnProperty,fNe=Cie.call(Object);function pNe(e){if(!Rh(e)||R0(e)!=uNe)return!1;var t=oj(e);if(t===null)return!0;var r=hNe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Cie.call(r)==fNe}var mNe=pNe;function gNe(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}var vNe=gNe;function yNe(){this.__data__=new KR,this.size=0}var bNe=yNe;function xNe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var wNe=xNe;function _Ne(e){return this.__data__.get(e)}var SNe=_Ne;function ANe(e){return this.__data__.has(e)}var MNe=ANe,CNe=200;function TNe(e,t){var r=this.__data__;if(r instanceof KR){var n=r.__data__;if(!PA||n.length<CNe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new QR(n)}return r.set(e,t),this.size=r.size,this}var ENe=TNe;function S1(e){var t=this.__data__=new KR(e);this.size=t.size}S1.prototype.clear=bNe;S1.prototype.delete=wNe;S1.prototype.get=SNe;S1.prototype.has=MNe;S1.prototype.set=ENe;var _2=S1;function PNe(e,t){return e&&IM(t,rj(t),e)}var DNe=PNe;function ONe(e,t){return e&&IM(t,Bg(t),e)}var RNe=ONe,Tie=typeof $s=="object"&&$s&&!$s.nodeType&&$s,eq=Tie&&typeof el=="object"&&el&&!el.nodeType&&el,INe=eq&&eq.exports===Tie,tq=INe?Zu.Buffer:void 0,rq=tq?tq.allocUnsafe:void 0;function LNe(e,t){if(t)return e.slice();var r=e.length,n=rq?rq(r):new e.constructor(r);return e.copy(n),n}var BNe=LNe;function NNe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var kNe=NNe;function FNe(){return[]}var Eie=FNe,zNe=Object.prototype,UNe=zNe.propertyIsEnumerable,nq=Object.getOwnPropertySymbols,VNe=nq?function(e){return e==null?[]:(e=Object(e),kNe(nq(e),function(t){return UNe.call(e,t)}))}:Eie,aj=VNe;function jNe(e,t){return IM(e,aj(e),t)}var HNe=jNe,GNe=Object.getOwnPropertySymbols,WNe=GNe?function(e){for(var t=[];e;)ij(t,aj(e)),e=oj(e);return t}:Eie,Pie=WNe;function qNe(e,t){return IM(e,Pie(e),t)}var XNe=qNe;function YNe(e,t,r){var n=t(e);return id(e)?n:ij(n,r(e))}var Die=YNe;function KNe(e){return Die(e,rj,aj)}var w5=KNe;function JNe(e){return Die(e,Bg,Pie)}var Oie=JNe,QNe=L0(Zu,"DataView"),_5=QNe,ZNe=L0(Zu,"Promise"),S5=ZNe,$Ne=L0(Zu,"Set"),A5=$Ne,iq="[object Map]",eke="[object Object]",oq="[object Promise]",aq="[object Set]",sq="[object WeakMap]",lq="[object DataView]",tke=I0(_5),rke=I0(PA),nke=I0(S5),ike=I0(A5),oke=I0(x5),pg=R0;(_5&&pg(new _5(new ArrayBuffer(1)))!=lq||PA&&pg(new PA)!=iq||S5&&pg(S5.resolve())!=oq||A5&&pg(new A5)!=aq||x5&&pg(new x5)!=sq)&&(pg=function(e){var t=R0(e),r=t==eke?e.constructor:void 0,n=r?I0(r):"";if(n)switch(n){case tke:return lq;case rke:return iq;case nke:return oq;case ike:return aq;case oke:return sq}return t});var DA=pg,ake=Object.prototype,ske=ake.hasOwnProperty;function lke(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&ske.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var uke=lke,cke=Zu.Uint8Array,zD=cke;function dke(e){var t=new e.constructor(e.byteLength);return new zD(t).set(new zD(e)),t}var sj=dke;function hke(e,t){var r=t?sj(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var fke=hke,pke=/\w*$/;function mke(e){var t=new e.constructor(e.source,pke.exec(e));return t.lastIndex=e.lastIndex,t}var gke=mke,uq=Zl?Zl.prototype:void 0,cq=uq?uq.valueOf:void 0;function vke(e){return cq?Object(cq.call(e)):{}}var yke=vke;function bke(e,t){var r=t?sj(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var xke=bke,wke="[object Boolean]",_ke="[object Date]",Ske="[object Map]",Ake="[object Number]",Mke="[object RegExp]",Cke="[object Set]",Tke="[object String]",Eke="[object Symbol]",Pke="[object ArrayBuffer]",Dke="[object DataView]",Oke="[object Float32Array]",Rke="[object Float64Array]",Ike="[object Int8Array]",Lke="[object Int16Array]",Bke="[object Int32Array]",Nke="[object Uint8Array]",kke="[object Uint8ClampedArray]",Fke="[object Uint16Array]",zke="[object Uint32Array]";function Uke(e,t,r){var n=e.constructor;switch(t){case Pke:return sj(e);case wke:case _ke:return new n(+e);case Dke:return fke(e,r);case Oke:case Rke:case Ike:case Lke:case Bke:case Nke:case kke:case Fke:case zke:return xke(e,r);case Ske:return new n;case Ake:case Tke:return new n(e);case Mke:return gke(e);case Cke:return new n;case Eke:return yke(e)}}var Vke=Uke;function jke(e){return typeof e.constructor=="function"&&!$V(e)?o3e(oj(e)):{}}var Hke=jke,Gke="[object Map]";function Wke(e){return Rh(e)&&DA(e)==Gke}var qke=Wke,dq=Ix&&Ix.isMap,Xke=dq?tj(dq):qke,Yke=Xke,Kke="[object Set]";function Jke(e){return Rh(e)&&DA(e)==Kke}var Qke=Jke,hq=Ix&&Ix.isSet,Zke=hq?tj(hq):Qke,$ke=Zke,eFe=1,tFe=2,rFe=4,Rie="[object Arguments]",nFe="[object Array]",iFe="[object Boolean]",oFe="[object Date]",aFe="[object Error]",Iie="[object Function]",sFe="[object GeneratorFunction]",lFe="[object Map]",uFe="[object Number]",Lie="[object Object]",cFe="[object RegExp]",dFe="[object Set]",hFe="[object String]",fFe="[object Symbol]",pFe="[object WeakMap]",mFe="[object ArrayBuffer]",gFe="[object DataView]",vFe="[object Float32Array]",yFe="[object Float64Array]",bFe="[object Int8Array]",xFe="[object Int16Array]",wFe="[object Int32Array]",_Fe="[object Uint8Array]",SFe="[object Uint8ClampedArray]",AFe="[object Uint16Array]",MFe="[object Uint32Array]",Tn={};Tn[Rie]=Tn[nFe]=Tn[mFe]=Tn[gFe]=Tn[iFe]=Tn[oFe]=Tn[vFe]=Tn[yFe]=Tn[bFe]=Tn[xFe]=Tn[wFe]=Tn[lFe]=Tn[uFe]=Tn[Lie]=Tn[cFe]=Tn[dFe]=Tn[hFe]=Tn[fFe]=Tn[_Fe]=Tn[SFe]=Tn[AFe]=Tn[MFe]=!0;Tn[aFe]=Tn[Iie]=Tn[pFe]=!1;function S2(e,t,r,n,i,o){var a,s=t&eFe,l=t&tFe,u=t&rFe;if(r&&(a=i?r(e,n,i,o):r(e)),a!==void 0)return a;if(!qu(e))return e;var d=id(e);if(d){if(a=uke(e),!s)return u3e(e,a)}else{var c=DA(e),h=c==Iie||c==sFe;if(FD(e))return BNe(e,s);if(c==Lie||c==Rie||h&&!i){if(a=l||h?{}:Hke(e),!s)return l?XNe(e,RNe(a,e)):HNe(e,DNe(a,e))}else{if(!Tn[c])return i?e:{};a=Vke(e,c,s)}}o||(o=new _2);var f=o.get(e);if(f)return f;o.set(e,a),$ke(e)?e.forEach(function(m){a.add(S2(m,t,r,m,e,o))}):Yke(e)&&e.forEach(function(m,p){a.set(p,S2(m,t,r,p,e,o))});var g=u?l?Oie:w5:l?Bg:rj,y=d?void 0:g(e);return S3e(y||e,function(m,p){y&&(p=m,m=e[p]),QV(a,p,S2(m,t,r,p,e,o))}),a}var Bie=S2,CFe=1,TFe=4;function EFe(e){return Bie(e,CFe|TFe)}var $R=EFe,PFe="__lodash_hash_undefined__";function DFe(e){return this.__data__.set(e,PFe),this}var OFe=DFe;function RFe(e){return this.__data__.has(e)}var IFe=RFe;function UD(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new QR;++t<r;)this.add(e[t])}UD.prototype.add=UD.prototype.push=OFe;UD.prototype.has=IFe;var LFe=UD;function BFe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var NFe=BFe;function kFe(e,t){return e.has(t)}var FFe=kFe,zFe=1,UFe=2;function VFe(e,t,r,n,i,o){var a=r&zFe,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var c=-1,h=!0,f=r&UFe?new LFe:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var g=e[c],y=t[c];if(n)var m=a?n(y,g,c,t,e,o):n(g,y,c,e,t,o);if(m!==void 0){if(m)continue;h=!1;break}if(f){if(!NFe(t,function(p,v){if(!FFe(f,v)&&(g===p||i(g,p,r,n,o)))return f.push(v)})){h=!1;break}}else if(!(g===y||i(g,y,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var Nie=VFe;function jFe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var HFe=jFe;function GFe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var WFe=GFe,qFe=1,XFe=2,YFe="[object Boolean]",KFe="[object Date]",JFe="[object Error]",QFe="[object Map]",ZFe="[object Number]",$Fe="[object RegExp]",e5e="[object Set]",t5e="[object String]",r5e="[object Symbol]",n5e="[object ArrayBuffer]",i5e="[object DataView]",fq=Zl?Zl.prototype:void 0,AB=fq?fq.valueOf:void 0;function o5e(e,t,r,n,i,o,a){switch(r){case i5e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case n5e:return!(e.byteLength!=t.byteLength||!o(new zD(e),new zD(t)));case YFe:case KFe:case ZFe:return JV(+e,+t);case JFe:return e.name==t.name&&e.message==t.message;case $Fe:case t5e:return e==t+"";case QFe:var s=HFe;case e5e:var l=n&qFe;if(s||(s=WFe),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=XFe,a.set(e,t);var d=Nie(s(e),s(t),n,i,o,a);return a.delete(e),d;case r5e:if(AB)return AB.call(e)==AB.call(t)}return!1}var a5e=o5e,s5e=1,l5e=Object.prototype,u5e=l5e.hasOwnProperty;function c5e(e,t,r,n,i,o){var a=r&s5e,s=w5(e),l=s.length,u=w5(t),d=u.length;if(l!=d&&!a)return!1;for(var c=l;c--;){var h=s[c];if(!(a?h in t:u5e.call(t,h)))return!1}var f=o.get(e),g=o.get(t);if(f&&g)return f==t&&g==e;var y=!0;o.set(e,t),o.set(t,e);for(var m=a;++c<l;){h=s[c];var p=e[h],v=t[h];if(n)var b=a?n(v,p,h,t,e,o):n(p,v,h,e,t,o);if(!(b===void 0?p===v||i(p,v,r,n,o):b)){y=!1;break}m||(m=h=="constructor")}if(y&&!m){var x=e.constructor,_=t.constructor;x!=_&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return o.delete(e),o.delete(t),y}var d5e=c5e,h5e=1,pq="[object Arguments]",mq="[object Array]",$E="[object Object]",f5e=Object.prototype,gq=f5e.hasOwnProperty;function p5e(e,t,r,n,i,o){var a=id(e),s=id(t),l=a?mq:DA(e),u=s?mq:DA(t);l=l==pq?$E:l,u=u==pq?$E:u;var d=l==$E,c=u==$E,h=l==u;if(h&&FD(e)){if(!FD(t))return!1;a=!0,d=!1}if(h&&!d)return o||(o=new _2),a||xie(e)?Nie(e,t,r,n,i,o):a5e(e,t,l,r,n,i,o);if(!(r&h5e)){var f=d&&gq.call(e,"__wrapped__"),g=c&&gq.call(t,"__wrapped__");if(f||g){var y=f?e.value():e,m=g?t.value():t;return o||(o=new _2),i(y,m,r,n,o)}}return h?(o||(o=new _2),d5e(e,t,r,n,i,o)):!1}var m5e=p5e;function kie(e,t,r,n,i){return e===t?!0:e==null||t==null||!Rh(e)&&!Rh(t)?e!==e&&t!==t:m5e(e,t,r,n,kie,i)}var g5e=kie;function v5e(e,t){return e!=null&&t in Object(e)}var y5e=v5e;function b5e(e,t,r){t=_1(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var a=ZR(t[n]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&ZV(i)&&KV(a,i)&&(id(e)||ej(e)))}var x5e=b5e;function w5e(e,t){return e!=null&&x5e(e,t,y5e)}var _5e=w5e,S5e=function(){return Zu.Date.now()},MB=S5e,A5e="Expected a function",M5e=Math.max,C5e=Math.min;function T5e(e,t,r){var n,i,o,a,s,l,u=0,d=!1,c=!1,h=!0;if(typeof e!="function")throw new TypeError(A5e);t=G7(t)||0,qu(r)&&(d=!!r.leading,c="maxWait"in r,o=c?M5e(G7(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h);function f(A){var M=n,T=i;return n=i=void 0,u=A,a=e.apply(T,M),a}function g(A){return u=A,s=setTimeout(p,t),d?f(A):a}function y(A){var M=A-l,T=A-u,C=t-M;return c?C5e(C,o-T):C}function m(A){var M=A-l,T=A-u;return l===void 0||M>=t||M<0||c&&T>=o}function p(){var A=MB();if(m(A))return v(A);s=setTimeout(p,y(A))}function v(A){return s=void 0,h&&n?f(A):(n=i=void 0,a)}function b(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function x(){return s===void 0?a:v(MB())}function _(){var A=MB(),M=m(A);if(n=arguments,i=this,l=A,M){if(s===void 0)return g(l);if(c)return clearTimeout(s),s=setTimeout(p,t),f(l)}return s===void 0&&(s=setTimeout(p,t)),a}return _.cancel=b,_.flush=x,_}var lj=T5e;function E5e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var P5e=E5e;function D5e(e,t){return t.length<2?e:Sie(e,vNe(t,0,-1))}var O5e=D5e;function R5e(e,t){return g5e(e,t)}var Fie=R5e;function I5e(e,t){return t=_1(t,e),e=O5e(e,t),e==null||delete e[ZR(P5e(t))]}var L5e=I5e;function B5e(e){return mNe(e)?void 0:e}var N5e=B5e,k5e=1,F5e=2,z5e=4,U5e=Mie(function(e,t){var r={};if(e==null)return r;var n=!1;t=hie(t,function(o){return o=_1(o,e),n||(n=o.length>1),o}),IM(e,Oie(e),r),n&&(r=Bie(r,k5e|F5e|z5e,N5e));for(var i=t.length;i--;)L5e(r,t[i]);return r}),M5=U5e;function V5e(e,t,r,n){if(!qu(e))return e;t=_1(t,e);for(var i=-1,o=t.length,a=o-1,s=e;s!=null&&++i<o;){var l=ZR(t[i]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=a){var d=s[l];u=n?n(d,l,s):void 0,u===void 0&&(u=qu(d)?d:KV(t[i+1])?[]:{})}QV(s,l,u),s=s[l]}return e}var j5e=V5e;function H5e(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=Sie(e,a);r(s,a)&&j5e(o,_1(a,e),s)}return o}var G5e=H5e;function W5e(e,t){return G5e(e,t,function(r,n){return _5e(e,n)})}var q5e=W5e,X5e=Mie(function(e,t){return e==null?{}:q5e(e,t)}),yh=X5e,Y5e="Expected a function";function K5e(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Y5e);return qu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),lj(e,t,{leading:n,maxWait:t,trailing:i})}var J5e=K5e;function Q5e(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function Ih(e,t){return Object.setPrototypeOf(e,t),e}var Z5e=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),$5e=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),eze=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||eI&&"ontouchend"in document,tze=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,rze=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,nze=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},ize=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},oze=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},aze=Z5e();aze&&oze();var eI=$5e(),uj=eze(),sze=tze(),Qs=rze(),vq=nze(),yq=Number(ize());function zie(e){return Array.isArray(e)?e:[e]}function lze(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}function eP(e){return eI?e.metaKey:e.ctrlKey}var cr=[],VD={},$_={},A2={};function Uie(e){cr.includes(e)||cr.push(e)}function qb(e){delete VD[e.pointerId];for(let t=0;t<cr.length;t++)if(cr[t].pointerId===e.pointerId){cr.splice(t,1);break}}function uze(){cr.splice(0,cr.length)}function jD(e){if(e.pointerType!=="touch")return;let t=VD[e.pointerId];t===void 0&&(t={x:0,y:0},VD[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function CB(e){let t=e.pointerId===cr[0].pointerId?cr[1]:cr[0];return VD[t.pointerId]}function Vie(e){$_[e.key]=!0,A2[e.key]=A2[e.key]===void 0?1:A2[e.key]+1}function jie(e){if(eI&&$_.Meta)for(let t in $_)$_[t]=!1;else $_[e.key]=!1;A2={}}function cze(e){e.addEventListener("pointerdown",Uie,!0),e.addEventListener("pointerdown",jD,!0),e.addEventListener("pointermove",jD,!0),e.addEventListener("pointerup",qb,!0),e.addEventListener("pointercancel",qb,!0),e.addEventListener("pointerleave",qb,!0),window.addEventListener("keydown",Vie,!0),window.addEventListener("keyup",jie,!0)}function dze(e){e.removeEventListener("pointerdown",Uie,!0),e.removeEventListener("pointerdown",jD,!0),e.removeEventListener("pointermove",jD,!0),e.removeEventListener("pointerup",qb,!0),e.removeEventListener("pointercancel",qb,!0),e.removeEventListener("pointerleave",qb,!0),window.removeEventListener("keydown",Vie,!0),window.removeEventListener("keyup",jie,!0)}var Hie,hze=new Promise(e=>{Hie=e}),tP;function fze(){if(tP)return tP;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@0.9.520/build",r=AM(()=>import("./navmesh-QdgGSsus.js"),__vite__mapDeps([])),[n,i]=await Promise.all([r,fetch(`${t}/navmesh.wasm`).then(s=>s.arrayBuffer())]),o=n.default,a=await o({wasmBinary:i});Hie(a)}return tP=e(),tP}var Gie,pze=new Promise(e=>{Gie=e}),rP;function mze(){if(rP)return rP;async function e(){let t=await AM(()=>import("./physics-XY0FX9ij.js"),__vite__mapDeps([]));await t.init(),Gie(t)}return rP=e(),rP}var Dr=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let n={...r,[e]:t};return Object.setPrototypeOf(n,Dr.prototype),n}}add(e,t){var r;return((r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)??this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],n;r===void 0?n={type:2,id:e.id}:n={type:1,id:e.id,data:r};let{id:i,data:o}=e,a={...t,[i]:o};return Object.setPrototypeOf(a,Dr.prototype),{data:a,actual:e,reverse:n}}else if(e.type===2){let{id:r}=e,n=t[r];if(n===void 0)return null;{let i={...t};return Object.setPrototypeOf(i,Dr.prototype),delete i[r],{data:i,actual:e,reverse:{type:1,id:r,data:n}}}}return null}};function cj(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let n=e[r];n&&typeof n=="object"&&cj(n)}return Object.freeze(e)}function gze(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var Wie=class extends Error{};function TB(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function sp(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let o=e;e=t,t=o}let n=[],i=1/(r+1);for(let o=0;o<r;o++){let a=e+(t-e)*(o+.75+Math.random()*.5)*i;n.push(a)}return n}function dj(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function vze(){return typeof process<"u"}function qie(e,t){for(let r of e)t(r.id,r.data)!==!0&&qie(r.children,t)}function Xie(e,t){if(t(e.id,e.data)!==!0)for(let r of e.children)Xie(r,t)}var Ms=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ms.prototype)}deepFreeze(){let e=0;for(;e<this.length;)cj(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&Xie(r,t)}}traverse(e){qie(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),n=this.childrenArray(r),i=n.findIndex(a=>a.id===e);if(i<0)throw new Error("not expected");let o=n[i];return n=[...n],n[i]={...o,data:t},this.modifyArrayBy(r,n)}}modifyArrayBy(e,t){let r=e,n=t;for(;r!==null;){let o=n,a=r;if(r=this.parent(r),r===void 0)throw new Error;n=this.childrenArray(r);let s=n.findIndex(l=>l.id===a);if(s<0)throw new Error;n=[...n],n[s]={...n[s],children:o}}Object.setPrototypeOf(n,Ms.prototype);let i=n;return i.fillCaches(),i}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:n,data:i,children:o}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let a=t,s=this.childrenArray(a),l={fi:r,id:n,data:i,children:o};return s=[...s,l],s.sort((u,d)=>u.fi-d.fi),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(a,s),actual:e,reverse:{type:8,id:n}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let n=this.childrenArray(r),i=n.findIndex(a=>a.id===t);e.localIndex=i,n=[...n];let o=n.splice(i,1)[0];return{data:this.modifyArrayBy(r,n),actual:e,reverse:{type:7,...o,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:n}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:n});if(t!==null){let c=t;for(;c!==null;){if(c===void 0)throw new Error;if(c===n)throw new Wie("cyclic tree");c=this.parent(c)}}let i=this.parent(n);if(i===void 0)return null;let o=i,a=this.childrenArray(i),s=a.findIndex(c=>c.id===n);a=[...a];let l=a.splice(s,1)[0],u=this.modifyArrayBy(i,a);i=t,a=u.childrenArray(i);let d=l.fi;return l={...l,fi:r},a=[...a,l],a.sort((c,h)=>c.fi-h.fi),e.localIndex=a.indexOf(l),u=u.modifyArrayBy(i,a),{data:u,actual:e,reverse:{type:9,parent:o,fi:d,id:n}}}previous(e,t){if(t===null){let n=this.childrenArray(e);return n.length===0?null:n[n.length-1].id}let r=null;for(let n of this.childrenArray(e)){if(n.id===t)return r;r=n.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),n=r.findIndex(i=>i.id===e)+1;if(n<r.length)return r[n].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),n=r.findIndex(i=>i.id===e)-1;return n>=0?this.traverseSortPrevious(r[n].id):t}}getAllSorted(e){let t=[];for(let r of e){let n=this.getWithSortKey(r.id);n!==void 0&&t.push({...r,...n})}t.sort((r,n)=>gze(r.sortKey,n.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],n=this.get(t),i=n;if(n!==void 0){for(;t;)r.splice(0,0,n.fi),t=this.parent(t),t!==null&&(n=this.get(t));return{...i,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let n=this.childrenArray(e);if(t===null){if(n.length===0)return sp(0,r,r);{let i=n[0].fi;return sp(i-r,i,r)}}else{let i=this.get(t);if(i===void 0||this.parent(t)!==e)throw new Error("illegal args");let o=n.find(a=>a.fi>i.fi);if(o===void 0){let a=n[n.length-1].fi;return sp(a,a+r,r)}else return sp(i.fi,o.fi,r)}}},HD;(e=>{function t(r,n){if(n.type!==0)return null;if(Array.isArray(r)){let i=n.props,o={},a=[...r],s=!1;if(i)for(let l of Object.keys(i)){let u=parseInt(l);if(isNaN(u))throw new Error("wrong index");o[l]=a[u],a[u]=i[l],s=!0}return s?{data:a,actual:n,reverse:{type:0,props:o}}:null}else{let i=n.props,o={},a={...r},s=!1;if(i)for(let l of Object.keys(i)){o[l]=a[l];let u=i[l];u===void 0?delete a[l]:a[l]=u,s=!0}return s?{data:a,actual:n,reverse:{type:0,props:o}}:null}}e.runOp=t})(HD||(HD={}));var sr=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,sr.prototype)}deepFreeze(){let t=0;for(;t<this.length;)cj(this[t]),t++}fillCaches0(t){this.objCaches.set(t.id,t)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let t of this)this.fillCaches0(t)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}data(t){var r;return(r=this.get(t))==null?void 0:r.data}get(t){return this.fillCaches(),this.objCaches.get(t)}modifyById(t,r){if(this.get(t)===void 0)throw new Error("not expected");{let n=this,i=n.findIndex(a=>a.id===t);if(i<0)throw new Error("not expected");let o=n[i];return n=[...n],n[i]={...o,data:r},this.modifyArrayBy(n)}}modifyArrayBy(t){Object.setPrototypeOf(t,sr.prototype);let r=t;return vze()||r.fillCaches(),r}runOp(t){switch(t.type){case 4:return this.addOp(t);case 5:return this.deleteOp(t);case 6:return this.moveOp(t)}return null}addOp(t){let{fi:r,id:n,data:i}=t,o=this,a={fi:r,id:n,data:i};return o=[...o,a],o.sort((s,l)=>s.fi-l.fi),t.localIndex=o.indexOf(a),{data:this.modifyArrayBy(o),actual:t,reverse:{type:5,id:n}}}deleteOp(t){let{id:r}=t,n=this,i=n.findIndex(a=>a.id===r);if(i===-1)return null;t.localIndex=i,n=[...n];let o=n.splice(i,1)[0];return{data:this.modifyArrayBy(n),actual:t,reverse:{type:4,...o}}}moveOp(t){let{fi:r,id:n}=t,i=this;i=[...i];let o=i.findIndex(l=>l.id===n);if(o===-1)return null;let a=i[o].fi,s={...i[o],fi:r};return i[o]=s,i.sort((l,u)=>l.fi-u.fi),t.localIndex=i.indexOf(s),{data:this.modifyArrayBy(i),actual:t,reverse:{type:6,fi:a,id:n}}}previous(t){if(t===null)return this.length===0?null:this[this.length-1].id;let r=null;for(let n of this){if(n.id===t)return r;r=n.id}return null}insertBeforeHelper(t,r){return this.insertAfterHelper(this.previous(t),r)}insertAfterHelper(t,r){let n=this;if(t===null){if(n.length===0)return sp(0,r,r);{let i=n[0].fi;return sp(i-r,i,r)}}else{let i=this.get(t);if(i===void 0)throw new Error("illegal args");let o=n.find(a=>a.fi>i.fi);if(o===void 0){let a=n[n.length-1].fi;return sp(a,a+r,r)}else return sp(i.fi,o.fi,r)}}};function Lx(e){return e&&typeof e=="object"&&e instanceof oo}var oo=class{unusedFunOverridesTable(e){}runOp(e){let t=[],r=this,n=0,i={};for(;n<e.path.length;){if(t.push(r),r=r===void 0?void 0:r[e.path[n]],r!==void 0&&!Lx(r))return null;n+=1}r=r?TB(r):new oo;for(let[s,l]of Object.entries(e.props)){let u=r[s];i[s]=u,l===void 0?delete r[s]:r[s]=l}for(;n>0;){if(Object.keys(r).length===0){let s=t[n-1];s&&(r=TB(s),delete r[e.path[n-1]])}else{let s=t[n-1];if(s){let l=TB(s);l[e.path[n-1]]=r,r=l}else{let l=new oo;l[e.path[n-1]]=r,r=l}}n-=1}let o=Object.setPrototypeOf(r,oo.prototype),a={...e,props:i};return{data:o,actual:e,reverse:a}}},Tp;(e=>{function t(i,o){return OA(i,o)??i}e.apply=t;function r(i,o){return fj(i,o)}e.merge=r;function n(i,o){let a=0,s=o.path,l=i;for(;a<s.length&&l!==void 0;){if(l=La.zoomOnce(l,s[a]),l===void 0)return o;if(!Lx(l))return;a+=1}if(l===void 0)return o;if(Lx(l))if(o.type===0){let u={...o.props};for(let d of Object.keys(l))delete u[d];return{...o,props:u}}else if(o.type===1||o.type===4||o.type===7){let u=hj([o],l);return u?(console.log(u),u):o}else return o}e.filterOp=n})(Tp||(Tp={}));function hj(e,t){if(t===void 0)return;let r=!1,n=e.map(i=>{let o=i.id,a=OA(i.data,t[o]);if(r=r||a!==void 0,a===void 0&&(a=i.data),i.children){let s=hj(i.children,t);return s!==void 0?r=!0:s=i.children,{...i,id:o,data:a,children:s}}else return{...i,id:o,data:a}});if(r)return n}function yze(e,t){if(t===void 0)return;let r=!1,n=e.map(i=>{let o=i.id,a=OA(i.data,t[o]);return r=r||a!==void 0,a===void 0&&(a=i.data),{...i,id:o,data:a}});if(r)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function OA(e,t){if(!Lx(t))return t;if(e instanceof Ms){let r=hj(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof sr)return yze(e,t);if(Array.isArray(e)){let r=!1,n=e.map((i,o)=>{let a=OA(i,t[o]);return r=r||a!==void 0,a===void 0&&(a=i),a});return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else{if(e instanceof oo)return fj(e,t);if(e&&typeof e=="object"){let r={},n=!1;for(let[i,o]of Object.entries(e)){let a=OA(o,t[i]);n=n||a!==void 0,a===void 0&&(a=o),r[i]=a}return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}}}}function fj(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!Lx(t))return t;if(!Lx(e))return Tp.apply(e,t);let r=new Set;for(let i of Object.keys(e))r.add(i);for(let i of Object.keys(t))r.add(i);let n=new oo;for(let i of r){let o=fj(e===void 0?void 0:e[i],t===void 0?void 0:t[i]);n[i]=o}return n}function bze(e,t){let r={cur:[],result:[],len:0};return e=RA(e,t,r)??e,[e,r.result]}function GD(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function WD(e){e&&(e.len-=1)}function xze(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function Yie(e,t,r){let n=!1,i=e.map(o=>{let a=o.id,s=t[a];if(s!==void 0&&typeof s=="string"&&(n=!0,a=s,r!==null))throw new Error("not supported");let l=RA(o.data,t,GD(r,a));WD(r),n=n||l!==void 0,l===void 0&&(l=o.data);let u=Yie(o.children,t,r);return u!==void 0?n=!0:u=o.children,{...o,id:a,data:l,children:u}});if(n)return i}function wze(e,t,r){let n=!1,i=e.map(o=>{let a=o.id,s=t[a];if(s!==void 0&&typeof s=="string"&&(n=!0,a=s,r!==null))throw new Error("not supported");let l=RA(o.data,t,GD(r,a));return WD(r),n=n||l!==void 0,l===void 0&&(l=o.data),{...o,id:a,data:l}});if(n)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function RA(e,t,r){if(e instanceof Ms){let n=Yie(e,t,r);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}else{if(e instanceof sr)return wze(e,t,r);if(Array.isArray(e)){let n=!1,i=e.map((o,a)=>{let s=RA(o,t,GD(r,a));return WD(r),n=n||s!==void 0,s===void 0&&(s=o),s});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(e&&typeof e=="object"&&!dj(e)){let n={},i=!1;for(let[o,a]of Object.entries(e))if(o!=="name"){let s=t[o];if(typeof s=="string"){if(r!==null)throw new Error("not supported");i=!0,o=s}let l=RA(a,t,GD(r,o));WD(r),i=i||l!==void 0,l===void 0&&(l=a),n[o]=l}else n[o]=a;return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(typeof e=="string"){let n=t[e];return n!==void 0&&xze(r),n}else return}}var C5;(e=>{function t(r,n){let i=La.zoom(n,r.path);if(typeof i=="object"){let o={};for(let a of Object.keys(r.props))o[a]=i[a];return{...r,props:o}}else return{...r,props:{}}}e.replaceProps=t})(C5||(C5={}));var na;(e=>{function t(l,u){return{...l,path:l.path.slice(u)}}e.drop=t;function r(l,u){var d;return((d=n(l,u))==null?void 0:d.data)??l}e.applySimple=r;function n(l,u){var h,f;let d=u.path;for(var c=[];;){let g;if(l instanceof oo&&u.type===0&&(g=l.runOp({...u,path:d.slice(c.length)}),g===null&&(g=void 0)),g===void 0&&c.length===d.length&&(l instanceof Ms||l instanceof sr||l instanceof Dr?g=l.runOp(u):g=HD.runOp(l,u)),g!==void 0)if(g!==null){let p=g.data;for(let v=c.length-1;v>=0;v--){let b=d[v],x=c[v];if(x instanceof Ms){if(typeof b=="number")throw new Error("illegal arg");p=x.modifyById(b,p)}else if(x instanceof sr){if(typeof b=="number")throw new Error("illegal arg");p=x.modifyById(b,p)}else if(x instanceof Dr){if(typeof b=="number")throw new Error("illegal arg");p=x.modifyById(b,p)}else if(x instanceof oo){let _={...x,[b]:p};p=Object.setPrototypeOf(_,oo.prototype)}else if(typeof x=="object")if(Array.isArray(x)){if(typeof b=="string"&&(b=parseInt(b),isNaN(b)))throw new Error("Invalid path");let _=p;p=[...x],p[b]=_}else p={...x,[b]:p};else return null}return{data:p,actual:{...g.actual,path:d},reverse:{...g.reverse,path:d}}}else return null;let y=d[c.length],m;if(l instanceof Ms){if(typeof y=="number")throw new Error("");m=(h=l.get(y))==null?void 0:h.data}else if(l instanceof sr){if(typeof y=="number")throw new Error("");m=(f=l.get(y))==null?void 0:f.data}else l!==null&&(m=l[y]);if(m!==void 0)c.push(l),l=m;else return null}}e.apply=n;function i(l,u){for(let d=0;d<l.length&&d<u.length;d++)if(l[d]!==u[d])return!0;return!1}e.pathDisjoint=i;function o(l,u){if(l.length!==u.length)return!1;for(let d=0;d<l.length;d++)if(l[d]!==u[d])return!1;return!0}e.pathEq=o;function a(l,u){return i(l.path,u.path)}e.commutative=a;function s(l,u){return l.type===0&&u.type===0&&o(l.path,u.path)?Object.keys(l.props).every(d=>u.props[d]!==void 0):!1}e.subsumed=s})(na||(na={}));var T5;(e=>{function t(){return[]}e.empty=t;function r(u,d){let c=[];for(let h of u){let[f,...g]=h.path;f===d&&c.push({...h,path:g})}return c}e.removePrefix=r;function n(u,d){return u.map(c=>({...c,path:[d,...c.path]}))}e.addPrefix=n;function i(u,d){return[...u,...d]}e.concat=i;function o(u,d){return[...u.filter(c=>!d.some(h=>na.subsumed(c,h))),...d]}e.compress=o;function a(u,d){return u.every(c=>d.every(h=>na.commutative(c,h)))}e.commutative=a;function s(u,d){for(let c of d){let h=l(u,c);h!==null&&(u=h.data)}return u}e.applyAll=s;function l(u,d){var c=u;let h=[],f=[];for(let g of d)try{if(g.type===3||g.type===5&&g.path[g.path.length-1]==="variables"){let y,m,p;if(g.type===3?(y=La.zoom(c,[...g.path,g.id]),p=na.apply(c,{...g,type:2})):(y=La.zoom(c,[...g.path,g.id,"value"]),p=na.apply(c,g)),p!==null){c=p.data;let[v,b]=bze(c,{[g.id]:y});c=v;for(let x=0;x<b.length;x++){let _=b[x],A=_.pop();if(typeof A=="number"){let M=[A];for(let C=x+1;C<b.length;C++){let E=b[C],D=E[E.length-1];if(typeof D=="number"&&La.equal(_,E.slice(0,E.length-1)))M.push(D),b.splice(C,1);else break}let T=La.zoom(c,_);m=T.map((C,E)=>M.includes(E)?g.id:C),y=T,A=_.pop()}else{if(A==="alphaOverride"||A==="alpha"){y/=100;let M=y,T=La.zoom(c,_.slice(0,_.length-2)),C=T.layers.map(E=>E.id===_[_.length-1]?{...E,data:{...E.data,[A]:M}}:E);Object.setPrototypeOf(C,Object.getPrototypeOf(T.layers)),T.layers=C}m=g.id}h.push({type:0,path:_,props:{[A]:y}}),f.push({type:0,path:_,props:{[A]:m}})}f.push(p.reverse),h.push(p.actual)}}else{let y=na.apply(c,g);y!==null&&(h.push(y.actual),c=y.data,f.push(y.reverse))}}catch(y){if(y instanceof Wie)return null;throw y}return{data:c,actual:h,reverse:f.reverse()}}e.apply=l})(T5||(T5={}));var Kie=Symbol(),_ze=Symbol(),tI=Symbol(),LM=class{reportOp(e,t,r=[]){let n=this;if(t===null)return;n._current=t.data;let i=r;for(;!(n instanceof Qie);){let o=n._path,a=n._current;if(o!==""&&i.splice(0,0,o),n=n._parent,n===null)return;n.update(o,a)}n.push(i,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[tI];r&&r(),delete this._children[e]}}}},Sze=class extends LM{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,HD.runOp(this._current,e),e.path)}},Aze=class extends LM{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Dr.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},Jie={get(e,t){if(t===tI)return()=>{e._parent=null};if(t===Kie)return e._current;if(t===_ze)return e;let{_current:r,_children:n}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let i=n===void 0?void 0:n[t];if(i!==void 0)return i;let o=r[t],a=rI(e,t,o);return a!==o?(n===void 0&&(n={},e._children=n),n[t]=a,a):o},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:!0,enumerable:n.enumerable,value:r[t]}}},Mze={...Jie,set(e,t,r){let n={type:0,props:{[t]:Wi(r)??r}};return e.deleteChildren(t),e.runOp(n),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},Cze={...Jie,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},pj=class extends LM{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[tI]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var a;let{_current:t,_children:r}=this,n=r===void 0?void 0:r[e];if(n!==void 0)return n;let i=(a=t.get(e))==null?void 0:a.data,o=rI(this,e,i);return o!==i?(r===void 0&&(r={},this._children=r),r[e]=o,o):i}add(e,t,r,n,i){this.runOp({type:7,parent:e,fi:t,id:r,data:n,children:i})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let n=this._current.insertAfterHelper(e,t,r.length);for(let i=0;i<r.length;i++){let o=r[i];this.add(e,n[i],o.id,o.data,o.children)}}insertBefore(e,t,r){let n=this._current.insertBeforeHelper(e,t,r.length);for(let i=0;i<r.length;i++){let o=r[i];this.add(e,n[i],o.id,o.data,o.children)}}moveAfter(e,t,r){let n=this._current.insertAfterHelper(e,t,r.length);for(let i=0;i<r.length;i++){let o=r[i];this.move(e,n[i],o)}}moveBefore(e,t,r){let n=this._current.insertBeforeHelper(e,t,r.length);for(let i=0;i<r.length;i++){let o=r[i];this.move(e,n[i],o)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},mj=class extends LM{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[tI]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let n=this._current[r].id,i=this._current[r].fi;e(this.data(this._current[r].id),n,i)}}find(e){let t=this.length;for(let r=0;r<t;r++){let n=this._current[r].id;if(e(this.data(n),n))return this.get(n)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var a;let{_current:t,_children:r}=this,n=r===void 0?void 0:r[e];if(n!==void 0)return n;let i=(a=t.get(e))==null?void 0:a.data,o=rI(this,e,i);return o!==i?(r===void 0&&(r={},this._children=r),r[e]=o,o):i}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let n=0;n<t.length;n++){let i=t[n];this.add(r[n],i.id,i.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let n=0;n<t.length;n++){let i=t[n];this.add(r[n],i.id,i.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let n=0;n<t.length;n++){let i=t[n];this.move(r[n],i)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let n=0;n<t.length;n++){let i=t[n];this.move(r[n],i)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function EB(e,t,r){if(e.length>0){let n=e[e.length-1];if(n.type===0&&t.type===0&&La.equal(n.path,r)){Object.assign(n.props,t.props);return}}e.push({...t,path:r})}var Qie=class extends LM{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,n){EB(this.ts,t,e),EB(this.actual,r,e),EB(this.reverse,n,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function rI(e,t,r){return r instanceof Ms?new pj(e,t,r):r instanceof sr?new mj(e,t,r):r instanceof Dr?new Proxy(new Aze(e,t,r),Cze):r!==null&&typeof r=="object"?dj(r)?r:new Proxy(new Sze(e,t,r),Mze):r}function Zie(e){let t=new Qie(e);return[rI(t,"",e),t]}function IA(e,t){let[r,n]=Zie(e);return t(r),n.result()}function Wi(e){return e instanceof pj||e instanceof mj?e._current:e!==null&&typeof e=="object"?e[Kie]:e}var La;(e=>{function t(o,a){if(a.length===o.length)for(var s=0;s<o.length;){if(o[s]!==a[s])return!1;s+=1}else return!1;return!0}e.equal=t;function r(o,a,s){let l=i(s,o);if(l!==void 0&&typeof l=="object"&&l!==null){let u={...a};return Object.keys(l).forEach(d=>{delete u[d]}),u}else return a}e.removeOverridden=r;function n(o,a){if((o instanceof Ms||o instanceof pj)&&typeof a=="string"||(o instanceof sr||o instanceof mj)&&typeof a=="string")return o.data(a);if(typeof a=="number"&&Array.isArray(o)||typeof a=="string"&&typeof o=="object"&&o!==null)return o[a]}e.zoomOnce=n;function i(o,a,s=0){for(;s<a.length&&o!==void 0;)o=n(o,a[s]),s+=1;return o}e.zoom=i})(La||(La={}));function Tze(e,t){let r=[];if(t.length===e.length)for(var n=0;n<e.length;){if(t[n]==="*")r.push(e[n]);else if(e[n]!==t[n])return null;n+=1}else return null;return r}function Vl(e,t){let r=[];if(t.length<=e.length)for(var n=0;n<t.length;){if(t[n]==="*")r.push(e[n]);else if(e[n]!==t[n])return null;n+=1}else return null;return r}var $ie=class{},bq=class extends $ie{constructor(e){super(),this.id=e}},xq=class extends $ie{constructor(e){super(),this.data=e}},E5;try{E5=new TextDecoder}catch{}var kt,Ep,We=0,ps={},en,lp,Bl=0,Fc=0,Ws,bh,Ga=[],un,wq={useRecords:!1,mapsAsObjects:!0},eoe=class{},toe=new eoe;toe.name="MessagePack 0xC1";var Bx=!1,qD=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(kt)return soe(()=>(D5(),this?this.unpack(e,t):qD.prototype.unpack.call(wq,e,t)));Ep=t>-1?t:e.length,We=0,Fc=0,lp=null,Ws=null,kt=e;try{un=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw kt=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof qD){if(ps=this,this.structures)return en=this.structures,nP();(!en||en.length>0)&&(en=[])}else ps=wq,(!en||en.length>0)&&(en=[]);return nP()}unpackMultiple(e,t){let r,n=0;try{Bx=!0;let i=e.length,o=this?this.unpack(e,i):iI.unpack(e,i);if(t){for(t(o);We<i;)if(n=We,t(nP())===!1)return}else{for(r=[o];We<i;)n=We,r.push(nP());return r}}catch(i){throw i.lastPosition=n,i.values=r,i}finally{Bx=!1,D5()}}_mergeStructures(e,t){e=e||[];for(let r=0,n=e.length;r<n;r++){let i=e[r];i&&(i.isShared=!0,r>=32&&(i.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let n=e[r],i=t[r];i&&(n&&((e.restoreStructures||(e.restoreStructures=[]))[r]=n),e[r]=i)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function nP(){try{if(!ps.trusted&&!Bx){let t=en.sharedLength||0;t<en.length&&(en.length=t)}let e=mi();if(We==Ep)en.restoreStructures&&_q(),en=null,kt=null,bh&&(bh=null);else if(We>Ep){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!Bx)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw en.restoreStructures&&_q(),D5(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function _q(){for(let e in en.restoreStructures)en[e]=en.restoreStructures[e];en.restoreStructures=null}function mi(){let e=kt[We++];if(e<160)if(e<128){if(e<64)return e;{let t=en[e&63]||ps.getStructures&&roe()[e&63];return t?(t.read||(t.read=gj(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,ps.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[ioe()]=mi();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(mi(),mi());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=mi();return t}else if(e<192){let t=e-160;if(Fc>=We)return lp.slice(We-Bl,(We+=t)-Bl);if(Fc==0&&Ep<140){let r=t<16?vj(t):noe(t);if(r!=null)return r}return P5(t)}else{let t;switch(e){case 192:return null;case 193:return Ws?(t=mi(),t>0?Ws[1].slice(Ws.position1,Ws.position1+=t):Ws[0].slice(Ws.position0,Ws.position0-=t)):toe;case 194:return!1;case 195:return!0;case 196:return PB(kt[We++]);case 197:return t=un.getUint16(We),We+=2,PB(t);case 198:return t=un.getUint32(We),We+=4,PB(t);case 199:return tg(kt[We++]);case 200:return t=un.getUint16(We),We+=2,tg(t);case 201:return t=un.getUint32(We),We+=4,tg(t);case 202:if(t=un.getFloat32(We),ps.useFloat32>2){let r=yj[(kt[We]&127)<<1|kt[We+1]>>7];return We+=4,(r*t+(t>0?.5:-.5)>>0)/r}return We+=4,t;case 203:return t=un.getFloat64(We),We+=8,t;case 204:return kt[We++];case 205:return t=un.getUint16(We),We+=2,t;case 206:return t=un.getUint32(We),We+=4,t;case 207:return ps.int64AsNumber?(t=un.getUint32(We)*4294967296,t+=un.getUint32(We+4)):t=un.getBigUint64(We),We+=8,t;case 208:return un.getInt8(We++);case 209:return t=un.getInt16(We),We+=2,t;case 210:return t=un.getInt32(We),We+=4,t;case 211:return ps.int64AsNumber?(t=un.getInt32(We)*4294967296,t+=un.getUint32(We+4)):t=un.getBigInt64(We),We+=8,t;case 212:if(t=kt[We++],t==114)return Tq(kt[We++]&63);{let r=Ga[t];if(r)return r.read?(We++,r.read(mi())):r.noBuffer?(We++,r()):r(kt.subarray(We,++We));throw new Error("Unknown extension "+t)}case 213:return t=kt[We],t==114?(We++,Tq(kt[We++]&63,kt[We++])):tg(2);case 214:return tg(4);case 215:return tg(8);case 216:return tg(16);case 217:return t=kt[We++],Fc>=We?lp.slice(We-Bl,(We+=t)-Bl):Pze(t);case 218:return t=un.getUint16(We),We+=2,Fc>=We?lp.slice(We-Bl,(We+=t)-Bl):Dze(t);case 219:return t=un.getUint32(We),We+=4,Fc>=We?lp.slice(We-Bl,(We+=t)-Bl):Oze(t);case 220:return t=un.getUint16(We),We+=2,Aq(t);case 221:return t=un.getUint32(We),We+=4,Aq(t);case 222:return t=un.getUint16(We),We+=2,Mq(t);case 223:return t=un.getUint32(We),We+=4,Mq(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var Eze=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function gj(e,t){function r(){if(r.count++>2){let i=e.read=new Function("r","return function(){return {"+e.map(o=>Eze.test(o)?o+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}}")(mi);return e.highByte===0&&(e.read=Sq(t,e.read)),i()}let n={};for(let i=0,o=e.length;i<o;i++){let a=e[i];n[a]=mi()}return n}return r.count=0,e.highByte===0?Sq(t,r):r}var Sq=(e,t)=>function(){let r=kt[We++];if(r===0)return t();let n=e<32?-(e+(r<<5)):e+(r<<5),i=en[n]||roe()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=gj(i,e)),i.read()};function roe(){let e=soe(()=>(kt=null,ps.getStructures()));return en=ps._mergeStructures(e,en)}var P5=nI,Pze=nI,Dze=nI,Oze=nI;function nI(e){let t;if(e<16&&(t=vj(e)))return t;if(e>64&&E5)return E5.decode(kt.subarray(We,We+=e));let r=We+e,n=[];for(t="";We<r;){let i=kt[We++];if(!(i&128))n.push(i);else if((i&224)===192){let o=kt[We++]&63;n.push((i&31)<<6|o)}else if((i&240)===224){let o=kt[We++]&63,a=kt[We++]&63;n.push((i&31)<<12|o<<6|a)}else if((i&248)===240){let o=kt[We++]&63,a=kt[We++]&63,s=kt[We++]&63,l=(i&7)<<18|o<<12|a<<6|s;l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|l&1023),n.push(l)}else n.push(i);n.length>=4096&&(t+=xo.apply(String,n),n.length=0)}return n.length>0&&(t+=xo.apply(String,n)),t}function Aq(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=mi();return t}function Mq(e){if(ps.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[ioe()]=mi();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(mi(),mi());return t}}var xo=String.fromCharCode;function noe(e){let t=We,r=new Array(e);for(let n=0;n<e;n++){let i=kt[We++];if((i&128)>0){We=t;return}r[n]=i}return xo.apply(String,r)}function vj(e){if(e<4)if(e<2){if(e===0)return"";{let t=kt[We++];if((t&128)>1){We-=1;return}return xo(t)}}else{let t=kt[We++],r=kt[We++];if((t&128)>0||(r&128)>0){We-=2;return}if(e<3)return xo(t,r);let n=kt[We++];if((n&128)>0){We-=3;return}return xo(t,r,n)}else{let t=kt[We++],r=kt[We++],n=kt[We++],i=kt[We++];if((t&128)>0||(r&128)>0||(n&128)>0||(i&128)>0){We-=4;return}if(e<6){if(e===4)return xo(t,r,n,i);{let o=kt[We++];if((o&128)>0){We-=5;return}return xo(t,r,n,i,o)}}else if(e<8){let o=kt[We++],a=kt[We++];if((o&128)>0||(a&128)>0){We-=6;return}if(e<7)return xo(t,r,n,i,o,a);let s=kt[We++];if((s&128)>0){We-=7;return}return xo(t,r,n,i,o,a,s)}else{let o=kt[We++],a=kt[We++],s=kt[We++],l=kt[We++];if((o&128)>0||(a&128)>0||(s&128)>0||(l&128)>0){We-=8;return}if(e<10){if(e===8)return xo(t,r,n,i,o,a,s,l);{let u=kt[We++];if((u&128)>0){We-=9;return}return xo(t,r,n,i,o,a,s,l,u)}}else if(e<12){let u=kt[We++],d=kt[We++];if((u&128)>0||(d&128)>0){We-=10;return}if(e<11)return xo(t,r,n,i,o,a,s,l,u,d);let c=kt[We++];if((c&128)>0){We-=11;return}return xo(t,r,n,i,o,a,s,l,u,d,c)}else{let u=kt[We++],d=kt[We++],c=kt[We++],h=kt[We++];if((u&128)>0||(d&128)>0||(c&128)>0||(h&128)>0){We-=12;return}if(e<14){if(e===12)return xo(t,r,n,i,o,a,s,l,u,d,c,h);{let f=kt[We++];if((f&128)>0){We-=13;return}return xo(t,r,n,i,o,a,s,l,u,d,c,h,f)}}else{let f=kt[We++],g=kt[We++];if((f&128)>0||(g&128)>0){We-=14;return}if(e<15)return xo(t,r,n,i,o,a,s,l,u,d,c,h,f,g);let y=kt[We++];if((y&128)>0){We-=15;return}return xo(t,r,n,i,o,a,s,l,u,d,c,h,f,g,y)}}}}}function PB(e){return ps.copyBuffers?Uint8Array.prototype.slice.call(kt,We,We+=e):kt.subarray(We,We+=e)}function tg(e){let t=kt[We++];if(Ga[t])return Ga[t](kt.subarray(We,We+=e));throw new Error("Unknown extension type "+t)}var Cq=new Array(4096);function ioe(){let e=kt[We++];if(e>=160&&e<192){if(e=e-160,Fc>=We)return lp.slice(We-Bl,(We+=e)-Bl);if(!(Fc==0&&Ep<180))return P5(e)}else return We--,mi();let t=(e<<5^(e>1?un.getUint16(We):e>0?kt[We]:0))&4095,r=Cq[t],n=We,i=We+e-3,o,a=0;if(r&&r.bytes==e){for(;n<i;){if(o=un.getUint32(n),o!=r[a++]){n=1879048192;break}n+=4}for(i+=3;n<i;)if(o=kt[n++],o!=r[a++]){n=1879048192;break}if(n===i)return We=n,r.string;i-=3,n=We}for(r=[],Cq[t]=r,r.bytes=e;n<i;)o=un.getUint32(n),r.push(o),n+=4;for(i+=3;n<i;)o=kt[n++],r.push(o);let s=e<16?vj(e):noe(e);return s!=null?r.string=s:r.string=P5(e)}var Tq=(e,t)=>{var r=mi();let n=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let i=en[e];return i&&i.isShared&&((en.restoreStructures||(en.restoreStructures=[]))[e]=i),en[e]=r,r.read=gj(r,n),r.read()},ooe=typeof self=="object"?self:global;Ga[0]=()=>{};Ga[0].noBuffer=!0;Ga[101]=()=>{let e=mi();return(ooe[e[0]]||Error)(e[1])};Ga[105]=e=>{let t=un.getUint32(We-4);bh||(bh=new Map);let r=kt[We],n;r>=144&&r<160||r==220||r==221?n=[]:n={};let i={target:n};bh.set(t,i);let o=mi();return i.used?Object.assign(n,o):(i.target=o,o)};Ga[112]=e=>{let t=un.getUint32(We-4),r=bh.get(t);return r.used=!0,r.target};Ga[115]=()=>new Set(mi());var aoe=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");Ga[116]=e=>{let t=e[0],r=aoe[t];if(!r)throw new Error("Could not find typed array for code "+t);return new ooe[r](Uint8Array.prototype.slice.call(e,1).buffer)};Ga[120]=()=>{let e=mi();return new RegExp(e[0],e[1])};Ga[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=We;We+=t-4,Ws=[mi(),mi()],Ws.position0=0,Ws.position1=0;let n=We;We=r;try{return mi()}finally{We=n}};Ga[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function soe(e){let t=Ep,r=We,n=Bl,i=Fc,o=lp,a=bh,s=Ws,l=new Uint8Array(kt.slice(0,Ep)),u=en,d=en.slice(0,en.length),c=ps,h=Bx,f=e();return Ep=t,We=r,Bl=n,Fc=i,lp=o,bh=a,Ws=s,kt=l,Bx=h,en=u,en.splice(0,en.length,...d),ps=c,un=new DataView(kt.buffer,kt.byteOffset,kt.byteLength),f}function D5(){kt=null,bh=null,en=null}function Rze(e){e.unpack?Ga[e.type]=e.unpack:Ga[e.type]=e}var yj=new Array(147);for(let e=0;e<256;e++)yj[e]=+("1e"+Math.floor(45.15-e*.30103));var iI=new qD({useRecords:!1});iI.unpack;iI.unpackMultiple;iI.unpack;var Ize=new Float32Array(1);new Uint8Array(Ize.buffer,0,4);var M2;try{M2=new TextEncoder}catch{}var XD,bj,oI=typeof Buffer<"u",DB=oI?Buffer.allocUnsafeSlow:Uint8Array,loe=oI?Buffer:Uint8Array,Eq=oI?4294967296:2144337920,dt,Ai,tt=0,vc,yc=null,Lze=/[\u0080-\uFFFF]/,b_=Symbol("record-id"),uoe=class extends qD{constructor(e){super(e),this.offset=0;let t,r,n,i,o,a=0,s=loe.prototype.utf8Write?function(A,M,T){return dt.utf8Write(A,M,T)}:M2&&M2.encodeInto?function(A,M){return M2.encodeInto(A,dt.subarray(M)).written}:!1,l=this;e||(e={});let u=e&&e.sequential,d=e.structures||e.saveStructures,c=e.maxSharedStructures;if(c==null&&(c=d?32:0),c>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;h==null&&(h=d?32:64),u&&!e.saveStructures&&(this.structures=[]);let f=c>32||h+c>64,g=c+64,y=c+h+64;if(y>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let m=[],p=0,v=0;this.pack=this.encode=function(A,M){if(dt||(dt=new DB(8192),Ai=new DataView(dt.buffer,0,8192),tt=0),vc=dt.length-10,vc-tt<2048?(dt=new DB(dt.length),Ai=new DataView(dt.buffer,0,dt.length),vc=dt.length-10,tt=0):tt=tt+7&2147483640,t=tt,o=l.structuredClone?new Map:null,l.bundleStrings?(yc=["",""],dt[tt++]=214,dt[tt++]=98,yc.position=tt-t,tt+=4):yc=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let T=r.sharedLength||0;if(T>c)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let C=0;C<T;C++){let E=r[C];if(!E)continue;let D,I=r.transitions;for(let k=0,L=E.length;k<L;k++){let U=E[k];D=I[U],D||(D=I[U]=Object.create(null)),I=D}I[b_]=C+64}a=T}u||(r.nextId=T+64)}n&&(n=!1),i=r||[];try{if(b(A),yc){Ai.setUint32(yc.position+t,tt-yc.position-t);let T=yc;yc=null,b(T[0]),b(T[1])}if(l.offset=tt,o&&o.idsToInsert){tt+=o.idsToInsert.length*6,tt>vc&&_(tt),l.offset=tt;let T=Nze(dt.subarray(t,tt),o.idsToInsert);return o=null,T}return M&kze?(dt.start=t,dt.end=tt,dt):dt.subarray(t,tt)}finally{if(r){if(v<10&&v++,p>1e4)r.transitions=null,v=0,p=0,m.length>0&&(m=[]);else if(m.length>0&&!u){for(let T=0,C=m.length;T<C;T++)m[T][b_]=0;m=[]}if(n&&l.saveStructures){let T=r.sharedLength||c;r.length>T&&(r=r.slice(0,T));let C=dt.subarray(t,tt);return l.saveStructures(r,a)===!1?(l._mergeStructures(l.getStructures()),l.pack(A)):(a=T,C)}}M&Fze&&(tt=t)}};let b=A=>{tt>vc&&(dt=_(tt));var M=typeof A,T;if(M==="string"){let C=A.length;if(yc&&C>=8&&C<4096){let I=Lze.test(A);yc[I?0:1]+=A,dt[tt++]=193,b(I?-C:C);return}let E;C<32?E=1:C<256?E=2:C<65536?E=3:E=5;let D=C*3;if(tt+D>vc&&(dt=_(tt+D)),C<64||!s){let I,k,L,U=tt+E;for(I=0;I<C;I++)k=A.charCodeAt(I),k<128?dt[U++]=k:k<2048?(dt[U++]=k>>6|192,dt[U++]=k&63|128):(k&64512)===55296&&((L=A.charCodeAt(I+1))&64512)===56320?(k=65536+((k&1023)<<10)+(L&1023),I++,dt[U++]=k>>18|240,dt[U++]=k>>12&63|128,dt[U++]=k>>6&63|128,dt[U++]=k&63|128):(dt[U++]=k>>12|224,dt[U++]=k>>6&63|128,dt[U++]=k&63|128);T=U-tt-E}else T=s(A,tt+E,D);T<32?dt[tt++]=160|T:T<256?(E<2&&dt.copyWithin(tt+2,tt+1,tt+1+T),dt[tt++]=217,dt[tt++]=T):T<65536?(E<3&&dt.copyWithin(tt+3,tt+2,tt+2+T),dt[tt++]=218,dt[tt++]=T>>8,dt[tt++]=T&255):(E<5&&dt.copyWithin(tt+5,tt+3,tt+3+T),dt[tt++]=219,Ai.setUint32(tt,T),tt+=4),tt+=T}else if(M==="number")if(A>>>0===A)A<64?dt[tt++]=A:A<256?(dt[tt++]=204,dt[tt++]=A):A<65536?(dt[tt++]=205,dt[tt++]=A>>8,dt[tt++]=A&255):(dt[tt++]=206,Ai.setUint32(tt,A),tt+=4);else if(A>>0===A)A>=-32?dt[tt++]=256+A:A>=-128?(dt[tt++]=208,dt[tt++]=A+256):A>=-32768?(dt[tt++]=209,Ai.setInt16(tt,A),tt+=2):(dt[tt++]=210,Ai.setInt32(tt,A),tt+=4);else{let C;if((C=this.useFloat32)>0&&A<4294967296&&A>=-2147483648){dt[tt++]=202,Ai.setFloat32(tt,A);let E;if(C<4||(E=A*yj[(dt[tt]&127)<<1|dt[tt+1]>>7])>>0===E){tt+=4;return}else tt--}dt[tt++]=203,Ai.setFloat64(tt,A),tt+=8}else if(M==="object")if(!A)dt[tt++]=192;else{if(o){let E=o.get(A);if(E){if(!E.id){let D=o.idsToInsert||(o.idsToInsert=[]);E.id=D.push(E)}dt[tt++]=214,dt[tt++]=112,Ai.setUint32(tt,E.id),tt+=4;return}else o.set(A,{offset:tt-t})}let C=A.constructor;if(C===Object)x(A,!0);else if(C===Array){T=A.length,T<16?dt[tt++]=144|T:T<65536?(dt[tt++]=220,dt[tt++]=T>>8,dt[tt++]=T&255):(dt[tt++]=221,Ai.setUint32(tt,T),tt+=4);for(let E=0;E<T;E++)b(A[E])}else if(C===Map){T=A.size,T<16?dt[tt++]=128|T:T<65536?(dt[tt++]=222,dt[tt++]=T>>8,dt[tt++]=T&255):(dt[tt++]=223,Ai.setUint32(tt,T),tt+=4);for(let[E,D]of A)b(E),b(D)}else{for(let E=0,D=XD.length;E<D;E++){let I=bj[E];if(A instanceof I){let k=XD[E];if(k.write){k.type&&(dt[tt++]=212,dt[tt++]=k.type,dt[tt++]=0),b(k.write.call(this,A));return}let L=dt,U=Ai,W=tt;dt=null;let G;try{G=k.pack.call(this,A,z=>(dt=L,L=null,tt+=z,tt>vc&&_(tt),{target:dt,targetView:Ai,position:tt-z}),b)}finally{L&&(dt=L,Ai=U,tt=W,vc=dt.length-10)}G&&(G.length+tt>vc&&_(G.length+tt),tt=Bze(G,dt,tt,k.type));return}}x(A,!A.hasOwnProperty)}}else if(M==="boolean")dt[tt++]=A?195:194;else if(M==="bigint"){if(A<BigInt(1)<<BigInt(63)&&A>=-(BigInt(1)<<BigInt(63)))dt[tt++]=211,Ai.setBigInt64(tt,A);else if(A<BigInt(1)<<BigInt(64)&&A>0)dt[tt++]=207,Ai.setBigUint64(tt,A);else if(this.largeBigIntToFloat)dt[tt++]=203,Ai.setFloat64(tt,Number(A));else throw new RangeError(A+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");tt+=8}else if(M==="undefined")this.encodeUndefinedAsNil?dt[tt++]=192:(dt[tt++]=212,dt[tt++]=0,dt[tt++]=0);else if(M==="function")b(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+M)},x=this.useRecords===!1?this.variableMapSize?A=>{let M=Object.keys(A),T=M.length;T<16?dt[tt++]=128|T:T<65536?(dt[tt++]=222,dt[tt++]=T>>8,dt[tt++]=T&255):(dt[tt++]=223,Ai.setUint32(tt,T),tt+=4);let C;for(let E=0;E<T;E++)b(C=M[E]),b(A[C])}:(A,M)=>{dt[tt++]=222;let T=tt-t;tt+=2;let C=0;for(let E in A)(M||A.hasOwnProperty(E))&&(b(E),b(A[E]),C++);dt[T+++t]=C>>8,dt[T+t]=C&255}:A=>{let M=Object.keys(A),T,C=i.transitions||(i.transitions=Object.create(null)),E=0;for(let I=0,k=M.length;I<k;I++){let L=M[I];T=C[L],T||(T=C[L]=Object.create(null),E++),C=T}let D=C[b_];if(D)D>=96&&f?(dt[tt++]=((D-=96)&31)+96,dt[tt++]=D>>5):dt[tt++]=D;else{D=i.nextId,D||(D=64),D<g&&this.shouldShareStructure&&!this.shouldShareStructure(M)?(D=i.nextOwnId,D<y||(D=g),i.nextOwnId=D+1):(D>=y&&(D=g),i.nextId=D+1);let I=M.highByte=D>=96&&f?D-96>>5:-1;C[b_]=D,i[D-64]=M,D<g?(M.isShared=!0,i.sharedLength=D-63,n=!0,I>=0?(dt[tt++]=(D&31)+96,dt[tt++]=I):dt[tt++]=D):(I>=0?(dt[tt++]=213,dt[tt++]=114,dt[tt++]=(D&31)+96,dt[tt++]=I):(dt[tt++]=212,dt[tt++]=114,dt[tt++]=D),E&&(p+=v*E),m.length>=h&&(m.shift()[b_]=0),m.push(C),b(M))}for(let I=0,k=M.length;I<k;I++)b(A[M[I]])},_=A=>{let M;if(A>16777216){if(A-t>Eq)throw new Error("Packed buffer would be larger than maximum buffer size");M=Math.min(Eq,Math.round(Math.max((A-t)*(A>67108864?1.25:2),4194304)/4096)*4096)}else M=(Math.max(A-t<<2,dt.length-1)>>12)+1<<12;let T=new DB(M);return Ai=new DataView(T.buffer,0,M),dt.copy?dt.copy(T,0,t,A):T.set(dt.slice(t,A)),tt-=t,t=0,vc=T.length-10,dt=T}}useBuffer(e){dt=e,Ai=new DataView(dt.buffer,dt.byteOffset,dt.byteLength),tt=0}};bj=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,eoe];XD=[{pack(e,t,r){let n=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:i,targetView:o,position:a}=t(6);i[a++]=214,i[a++]=255,o.setUint32(a,n)}else if(n>0&&n<17179869184){let{target:i,targetView:o,position:a}=t(10);i[a++]=215,i[a++]=255,o.setUint32(a,e.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),o.setUint32(a+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:i,targetView:o,position:a}=t(3);i[a++]=212,i[a++]=255,i[a++]=255}else{let{target:i,targetView:o,position:a}=t(15);i[a++]=199,i[a++]=12,i[a++]=255,o.setUint32(a,e.getMilliseconds()*1e6),o.setBigInt64(a+4,BigInt(Math.floor(n)))}}},{pack(e,t,r){let n=Array.from(e),{target:i,position:o}=t(this.structuredClone?3:0);this.structuredClone&&(i[o++]=212,i[o++]=115,i[o++]=0),r(n)}},{pack(e,t,r){let{target:n,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(n[i++]=212,n[i++]=101,n[i++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:n,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(n[i++]=212,n[i++]=120,n[i++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?Pq(e,16,t):Dq(oI?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==loe&&this.structuredClone?Pq(e,aoe.indexOf(r.name),t):Dq(e,t)}},{pack(e,t){let{target:r,position:n}=t(1);r[n]=193}}];function Pq(e,t,r,n){let i=e.byteLength;if(i+1<256){var{target:o,position:a}=r(4+i);o[a++]=199,o[a++]=i+1}else if(i+1<65536){var{target:o,position:a}=r(5+i);o[a++]=200,o[a++]=i+1>>8,o[a++]=i+1&255}else{var{target:o,position:a,targetView:s}=r(7+i);o[a++]=201,s.setUint32(a,i+1),a+=4}o[a++]=116,o[a++]=t,o.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function Dq(e,t){let r=e.byteLength;var n,i;if(r<256){var{target:n,position:i}=t(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=t(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=r&255}else{var{target:n,position:i,targetView:o}=t(r+5);n[i++]=198,o.setUint32(i,r),i+=4}n.set(e,i)}function Bze(e,t,r,n){let i=e.length;switch(i){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:i<256?(t[r++]=199,t[r++]=i):i<65536?(t[r++]=200,t[r++]=i>>8,t[r++]=i&255):(t[r++]=201,t[r++]=i>>24,t[r++]=i>>16&255,t[r++]=i>>8&255,t[r++]=i&255)}return t[r++]=n,t.set(e,r),r+=i,r}function Nze(e,t){let r,n=t.length*6,i=e.length-n;for(t.sort((o,a)=>o.offset>a.offset?1:-1);r=t.pop();){let o=r.offset,a=r.id;e.copyWithin(o+n,o,i),n-=6;let s=o+n;e[s++]=214,e[s++]=105,e[s++]=a>>24,e[s++]=a>>16&255,e[s++]=a>>8&255,e[s++]=a&255,i=o}return e}function A1(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");bj.unshift(e.Class),XD.unshift(e)}Rze(e)}var coe=new uoe({useRecords:!1});coe.pack;coe.pack;var kze=512,Fze=1024,Oq=new uoe({structuredClone:!0});A1({Class:Dr.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Dr.prototype),e}});A1({Class:sr.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,sr.prototype),e}});A1({Class:Ms.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Ms.prototype),e}});A1({Class:bq.prototype.constructor,type:4,write(e){return e.id},read(e){return new bq(e)}});A1({Class:xq.prototype.constructor,type:5,write(e){return e.data},read(e){return new xq(e)}});A1({Class:oo.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,oo.prototype),e}});function zze(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let n=e[r];t=(t<<5)-t+n,t=t&t}return t}function O5(e){if(dj(e))return e;if(Array.isArray(e))return e.map(O5);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=O5(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var R5;(e=>{function t(i){return Oq.pack(i)}e.serialize=t;function r(i){return Oq.unpack(i)}e.deserialize=r;function n(i){return zze(t(O5(i))).toString()}e.checksum=n})(R5||(R5={}));var Rq;(e=>{function t(n){return n.type==="Conditional"?n.condition.type==="Distance"?"Distance":"StateChange":n.type}e.toEventUIType=t;function r(n){return n==="Distance"||n==="StateChange"?"Conditional":n}e.fromEventUIType=r})(Rq||(Rq={}));var Hs={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Create","SetVariable","DynamicVariablePlay","Conditional"],MouseHover:["Transition","Animation","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional"],Start:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Conditional:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MousePress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyPress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional"],GameControl:["Transition","Animation","Audio","Create","Conditional"],Collision:["Transition","Animation","Audio","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional"],Trigger:["Transition","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Resize:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],VariableChange:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"]},Iq;(e=>{function t(n){return n.type==="MouseDown"||n.type==="MouseUp"||n.type==="MousePress"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="KeyPress"}e.is=t;function r(n){return n==="MouseDown"||n==="MouseUp"||n==="MousePress"?{type:n,mode:"Object",disabled:!1,runMode:"Once",actions:new sr}:{type:n,disabled:!1,key:void 0,runMode:"Once",actions:new sr}}e.defaultData=r})(Iq||(Iq={}));var YD;(e=>{function t(r){return{type:"Property",value:[r??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(YD||(YD={}));var I5;(e=>{function t(i){return{type:"Comparison",operator:"==",lOperand:YD.propertyDefaultData(i),rOperand:{...YD.valueDefaultData}}}e.comparisonDefaultData=t;function r(i){return{type:"Distance",toObject:i??null,fromObject:i??null,distance:200}}e.distanceDefaultData=r;function n(i,o){return{type:"State",object:i??null,state:o??null}}e.stateDefaultData=n})(I5||(I5={}));var Lq;(e=>{function t(n){return n.type==="Conditional"}e.is=t;function r(n){return{type:"Conditional",disabled:!1,inActions:new sr,outActions:new sr,condition:I5.distanceDefaultData(n)}}e.defaultData=r})(Lq||(Lq={}));var Bq;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new sr,drop:new sr}})(Bq||(Bq={}));var L5;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new sr})(L5||(L5={}));var B5;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(B5||(B5={}));var Nq;(e=>{function t(n){return n.type==="MouseHover"}e.is=t;function r(){return{type:"MouseHover",disabled:!1,actions:new sr}}e.defaultData=r})(Nq||(Nq={}));var kq;(e=>{function t(n){return n.type==="Scroll"}e.is=t;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new sr}}e.defaultData=r})(kq||(kq={}));var Fq;(e=>{function t(n){return n.type==="Start"}e.is=t;function r(){return{type:"Start",disabled:!1,actions:new sr}}e.defaultData=r})(Fq||(Fq={}));var zq;(e=>{function t(n){return n.type==="Collision"}e.is=t;function r(){return{type:"Collision",disabled:!1,runMode:"Once",target:"character",actions:new sr}}e.defaultData=r})(zq||(zq={}));var Uq;(e=>{function t(n){return n.type==="Trigger"}e.is=t;function r(n,i){return{type:"Trigger",disabled:!1,runMode:"Once",target:"all",triggeringObjects:[],actions:new sr,triggerZone:"box",position:i.toArray(),rotation:[0,0,0],size:n.toArray(),radius:n.length()/2,helperVisible:!0}}e.defaultData=r})(Uq||(Uq={}));var N5;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(a){return a.type==="Resize"}e.is=t;function r(a){return typeof a=="string"?a:"custom"}e.sizeToDevice=r;function n(a){return typeof a=="string"?[...e.defaultSizes[a]]:[...a]}e.deviceToSize=n;function i(){let a={size:"mobile",operator:"<",actions:new sr},s={size:"tablet",operator:"<",actions:new sr},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new sr},u=new sr;return u.push({id:Ht.generateUUID(),fi:0,data:a},{id:Ht.generateUUID(),fi:1,data:s},{id:Ht.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:u}}e.defaultData=i;function o(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new sr}}e.defaultBreakpointData=o})(N5||(N5={}));var k5;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(n){return n.type==="VariableChange"}e.is=t;function r(){return{disabled:!1,type:"VariableChange",actions:new sr,variableId:"",objectId:null,property:"Position X"}}e.defaultData=r})(k5||(k5={}));var M1="personal camera",ES="a218fcc3-276b-49b9-b485-49037fd14f5f",Uze=2960946,$l=5526619,Mb;(e=>{function t(n,i){return n[0]===i[0]&&n[1]===i[1]}e.isEqual=t;function r(n,i,o){return[n[0]+(i[0]-n[0])*o,n[1]+(i[1]-n[1])*o]}e.lerp=r})(Mb||(Mb={}));var e0;(e=>{function t(l,u){return l[0]===u[0]&&l[1]===u[1]&&l[2]===u[2]}e.isEqual=t;function r(l,u){return[l[0]+u[0],l[1]+u[1],l[2]+u[2]]}e.add=r;function n(l,u){return[l[0]-u[0],l[1]-u[1],l[2]-u[2]]}e.sub=n;function i(l,u){return[l[0]/u[0],l[1]/u[1],l[2]/u[2]]}e.div=i;function o(l,u){return[l[0]*u[0],l[1]*u[1],l[2]*u[2]]}e.mul=o;function a(l,u){return Math.hypot(l[0]-u[0],l[1]-u[1],l[2]-u[2])}e.dist=a;function s(l,u,d){return[l[0]+(u[0]-l[0])*d,l[1]+(u[1]-l[1])*d,l[2]+(u[2]-l[2])*d]}e.lerp=s})(e0||(e0={}));var KD;(e=>{function t(n,i){return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[3]===i[3]}e.isEqual=t;function r(n,i,o){return[n[0]+(i[0]-n[0])*o,n[1]+(i[1]-n[1])*o,n[2]+(i[2]-n[2])*o,n[3]+(i[3]-n[3])*o]}e.lerp=r})(KD||(KD={}));var Nx;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(i,o){for(let a=0;a<16;a++)if(i[a]!==o[a])return!1;return!0}e.isEqual=t;function r(i){return i??e.identity}e.simplify=r;function n(i,o){let a=o.slice(0);for(var s=0,l=o.length;s<l;s+=3){let u=i[3]*o[s]+i[7]*o[s+1]+i[11]*o[s+2]+i[15];a[s]=(i[0]*o[s]+i[4]*o[s+1]+i[8]*o[s+2]+i[12])/u,a[s+1]=(i[1]*o[s]+i[5]*o[s+1]+i[9]*o[s+2]+i[13])/u,a[s+2]=(i[2]*o[s]+i[6]*o[s+1]+i[10]*o[s+2]+i[14])/u}return a}e.applyMatrix4=n})(Nx||(Nx={}));var Oa;(e=>{function t(l){return typeof l=="object"&&typeof l.r=="number"&&typeof l.g=="number"&&typeof l.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:1}}e.toRgb255a1=r;function n(l){return{r:l.r,g:l.g,b:l.b}}e.clone=n;function i(l){return l=Math.floor(l),{r:(l>>16&255)/255,g:(l>>8&255)/255,b:(l&255)/255}}e.fromHex=i;function o(l){return Math.round(l.r*255)*65536+Math.round(l.g*255)*256+Math.round(l.b*255)}e.toHex=o;function a(l,u){return l.r===u.r&&l.g===u.g&&l.b===u.b}e.equals=a;function s(l,u,d){return{r:l.r+(u.r-l.r)*d,g:l.g+(u.g-l.g)*d,b:l.b+(u.b-l.b)*d}}e.lerp=s})(Oa||(Oa={}));var Ru;(e=>{e.white={...Oa.white,a:1},e.transparent={...Oa.white,a:0};function t(a){return{r:a[0],g:a[1],b:a[2],a:a[3]}}e.from0to1=t;function r(a,s){return{...Oa.fromHex(a),a:s}}e.fromHexAndA=r;function n(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:a.a}}e.toRgb255a1=n;function i(a,s){return Oa.equals(a,s)&&a.a===s.a}e.equals=i;function o(a,s,l){return{r:a.r+(s.r-a.r)*l,g:a.g+(s.g-a.g)*l,b:a.b+(s.b-a.b)*l,a:a.a+(s.a-a.a)*l}}e.lerp=o})(Ru||(Ru={}));var F5;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(F5||(F5={}));var Vq;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(Vq||(Vq={}));var jq;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(jq||(jq={}));var Yf;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Yf||(Yf={}));function Vze(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var b0;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(b0||(b0={}));var kx;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(kx||(kx={}));var up;(e=>{function t(n,i=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(n[0],n[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[n[0]+n[0]*i,0,0]},grid:{count:[2,2,2],size:n.map(o=>o*(1+i)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function r(n,i){let o={...n};if(doe.forEach(a=>{Object.assign(o,{[a]:i[a]??n[a]})}),o.radial={...n.radial},i.radial){let a=n.radial,s=i.radial;hoe.forEach(l=>{Object.assign(o.radial,{[l]:s[l]??a[l]})})}if(o.linear={...n.linear},i.linear){let a=n.linear,s=i.linear;foe.forEach(l=>{Object.assign(o.linear,{[l]:s[l]??a[l]})})}if(o.grid={...n.grid},i.grid){let a=n.grid,s=i.grid;poe.forEach(l=>{Object.assign(o.grid,{[l]:s[l]??a[l]})})}if(o.toObject={...n.toObject},i.toObject){let a=n.toObject,s=i.toObject;moe.forEach(l=>{Object.assign(o.toObject,{[l]:s[l]??a[l]})})}if(o.randomnessObject={...n.randomnessObject},i.randomnessObject){let a=n.randomnessObject,s=i.randomnessObject;goe.forEach(l=>{Object.assign(o.randomnessObject,{[l]:s[l]??a[l]})})}return o}e.merge=r})(up||(up={}));var z5;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function r(n,i){let o=[];n.count!==void 0&&o.push({type:0,path:i,props:{count:n.count}});for(let a of t){let s=n[a];s&&Object.keys(s).length>0&&o.push({type:0,path:[...i,a],props:s})}return o}e.toOps=r})(z5||(z5={}));var doe=["count"],hoe=["radius","start","end","position","scale","rotation"],foe=["position","scale","rotation"],poe=["count","size"],moe=["count","position","scale","rotation"],goe=["strength","scale","rotation","position","movement","seed","freqScale"],U5;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(U5||(U5={}));var V5;(e=>{function t(n){return r(n)}e.defaultData=t;function r(n){if(n==="PointLight")return{type:n,color:Ru.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(n==="SpotLight")return{type:n,color:Ru.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(n==="DirectionalLight")return{type:n,color:Ru.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(V5||(V5={}));var Fx;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Fx||(Fx={}));var j5;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,n){return r.castShadow===n.castShadow&&r.receiveShadow===n.receiveShadow}e.equals=t})(j5||(j5={}));var H5;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,n){return r.flatShading===n.flatShading&&r.side===n.side&&r.wireframe===n.wireframe}e.equals=t})(H5||(H5={}));var G5;(e=>e.defaultData={...H5.defaultData,...j5.defaultData})(G5||(G5={}));var Hq;(e=>{function t(r,n){var o,a;let i=[];if("material"in r){let s=typeof r.material=="string"?n.materials[r.material]??((o=n.lib.materials[r.material])==null?void 0:o.asset):r.material;s&&i.push(s)}else if("materials"in r)for(let s of r.materials){let l=typeof s=="string"?n.materials[s]??((a=n.lib.materials[s])==null?void 0:a.asset):s;l&&i.push(l)}return i}e.getMaterialData=t})(Hq||(Hq={}));var JD;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(JD||(JD={}));var Gq;(e=>{function t(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}e.is=t})(Gq||(Gq={}));function jze(e){return e.type!=="displace"}var Wq;(e=>{function t(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}e.is=t})(Wq||(Wq={}));var voe=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Hze=["wrapping","image","video","name"],ds;(e=>{function t(o,a){let{texture:s,...l}=a;if(Object.assign(o,l),s){let u=o.texture;u&&Object.assign(u,s)}}e.patch=t;function r(o,a){return o==="light"&&a?n(a):i(o)}e.defaultData=r;function n(o){let a={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(o){case"phong":return{...a,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...a,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...a,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...a,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function i(o){let a={alpha:1,mode:0,isMask:!1,visible:!0};switch(o){case"texture":return{...a,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{...a,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:JD.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1};case"color":return{...a,type:"color",color:Oa.fromHex($l)};case"depth":return{...a,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...a,type:"normal",cnormal:[1,1,1]};case"gradient":return{...a,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...a,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Oa.fromHex(6710886),a:1},colorB:{...Oa.fromHex(6710886),a:1},colorC:{...Oa.fromHex(16777215),a:1},colorD:{...Oa.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...a,type:"fresnel",color:Ru.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...a,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...a,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Ru.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...a,type:"outline",outlineColor:Ru.fromHexAndA(0,1),contourColor:Ru.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...a,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{...a,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...a,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Oa.fromHex(0),a:1},colorB:{...Oa.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(ds||(ds={}));var aa;(e=>{function t(u){return!u.layers.some(d=>d.data.type==="texture"&&d.data.projection!==0||d.data.type==="depth"&&!d.data.isWorldSpace||d.data.type==="noise"||d.data.type==="displace")}e.isMergable=t;function r(u){let d="";return u.layers.forEach(c=>{Object.entries(c.data).forEach(([h,f])=>{d+=`${h}${f}`,Array.isArray(f)?f.forEach(g=>d+=`${g}`):typeof f=="object"?Object.values(f).forEach(g=>{typeof g=="number"?d+=`${g.toFixed(4)}`:d+=`${g}`}):d+=`${f}`})}),d}e.getHash=r;function n(){return{layers:new sr}}e.defaultEmptyData=n;function i(u="layer1",d="layer2"){return a("phong",u,d)}e.defaultData=i;function o(u,d){return{...u,name:d}}e.withName=o;function a(u,d="layer1",c="layer2"){let h=new sr;return h.push({fi:0,data:ds.defaultData("light",u),id:d}),h.push({fi:1,data:ds.defaultData("color"),id:c}),{layers:h}}e.defaultTwoLayerData=a;function s(u,d="phong",c="layer1",h="layer2"){let f=ds.defaultData("texture");Object.assign(f.texture,{image:u});let g=new sr;return g.push({fi:0,data:f,id:c}),g.push({fi:1,data:ds.defaultData("light",d),id:h}),{layers:g}}e.defaultTwoLayerTextureData=s;function l(u,d="phong",c="layer1",h="layer2"){let f=ds.defaultData("video");Object.assign(f.texture,{video:u});let g=new sr;return g.push({fi:0,data:f,id:c}),g.push({fi:1,data:ds.defaultData("light",d),id:h}),{layers:g}}e.defaultTwoLayerVideoTextureData=l})(aa||(aa={}));var QD;(e=>{function t(){return{points:new sr,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(QD||(QD={}));var ZD;(e=>{function t(){return{points:new sr,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(ZD||(ZD={}));var yoe={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},W5;(e=>{function t(r,n){let i={...r};return xoe.forEach(o=>{Object.assign(i,{[o]:n[o]??r[o]})}),i}e.merge=t})(W5||(W5={}));var boe={shape:yoe,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},xoe=["depth","offset","angle","twist","startScale","endScale"],$D;(e=>{function t(n){return n==="PolygonGeometry"||n==="RectangleGeometry"||n==="StarGeometry"||n==="TriangleGeometry"||n==="EllipseGeometry"}e.is2DParametricMesh=t;function r(n){return n==="PolygonGeometry"||n==="PolygonGeometry"||n==="RectangleGeometry"||n==="StarGeometry"||n==="TriangleGeometry"||n==="EllipseGeometry"||n==="PathGeometry"||n==="VectorGeometry"||n==="ConeGeometry"||n==="CubeGeometry"||n==="CylinderGeometry"||n==="DodecahedronGeometry"||n==="HelixGeometry"||n==="IcosahedronGeometry"||n==="LatheGeometry"||n==="PyramidGeometry"||n==="SphereGeometry"||n==="PlaneGeometry"||n==="BackdropGeometry"||n==="TorusGeometry"||n==="TorusKnotGeometry"||n==="BooleanGeometry"||n==="TextGeometry"}e.isParametricMesh=r})($D||($D={}));var q5;(e=>{function t(r,n){let i={...r};return Object.assign(i,n),i.type==="PathGeometry"&&"extrusion"in n&&n.extrusion&&(i.extrusion={...r.extrusion},Object.assign(i.extrusion,W5.merge(i.extrusion,n.extrusion))),i}e.merge=t})(q5||(q5={}));var Xb;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:ZD.defaultData(),extrusion:boe};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:QD.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(Xb||(Xb={}));var qq=["width","height","depth"],X5;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Oa.white,near:.1,far:2e3})(X5||(X5={}));var eO;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(eO||(eO={}));var Y5;(e=>e.defaultData={softShadowQuality:"low"})(Y5||(Y5={}));var K5;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(K5||(K5={}));var J5;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(J5||(J5={}));var zx;(e=>e.defaultData={usePhysics:!1,gravity:-10})(zx||(zx={}));var Q5;(e=>e.defaultData={playCamera:M1,gameControlObject:null})(Q5||(Q5={}));var Z5;(e=>e.defaultData={backgroundColor:Ru.fromHexAndA(Uze,1),postprocessing:eO.defaultData,fog:X5.defaultData,globalPhysics:zx.defaultData,ambient:K5.defaultData,ao:J5.defaultData,shadow:Y5.defaultData,publish:Q5.defaultData})(Z5||(Z5={}));var Xq;(e=>{function t(n){return n==="Component"||n==="Instance"}e.isComponentRelated=t;function r(n){return n==="Empty"||n==="Instance"}e.isEmptyOrComponent=r})(Xq||(Xq={}));var Ux;(e=>{e.identity={...F5.identity,hiddenMatrix:Nx.identity};function t(i){return{position:i.position,rotation:i.rotation,scale:i.scale,hiddenMatrix:i.hiddenMatrix}}e.fromObject=t;function r(i,o){return{position:(o==null?void 0:o.position)||i.position,rotation:(o==null?void 0:o.rotation)||i.rotation,scale:(o==null?void 0:o.scale)||i.scale,hiddenMatrix:(o==null?void 0:o.hiddenMatrix)||i.hiddenMatrix}}e.merge=r;function n(i,o){return Q5e({position:e0.isEqual(i.position,o.position)?void 0:o.position,rotation:e0.isEqual(i.rotation,o.rotation)?void 0:o.rotation,scale:e0.isEqual(i.scale,o.scale)?null:o.scale,hiddenMatrix:Nx.isEqual(i.hiddenMatrix,o.hiddenMatrix)?void 0:o.hiddenMatrix})}e.diff=n})(Ux||(Ux={}));var Ha;(e=>e.defaultData={states:new sr,events:new sr,visible:!0,raycastLock:!1,physics:Fx.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Ux.identity,cloner:null})(Ha||(Ha={}));var $5;(e=>e.defaultData={type:"Empty",...Ha.defaultData})($5||($5={}));var Yq;(e=>e.defaultData={type:"Component",...Ha.defaultData})(Yq||(Yq={}));var Yb;(e=>e.defaultData={type:"Mesh",...Ha.defaultData,...G5.defaultData})(Yb||(Yb={}));var LA;(e=>e.defaultData={...Ha.defaultData,...Ux.identity,position:[0,0,kx.DefaultTargetOffset],...kx.defaultData})(LA||(LA={}));var ez;(e=>{function t(r){return{...Ha.defaultData,...V5.defaultData(r)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(ez||(ez={}));var tO;(e=>{function t(n,i,o=0){for(;o<i.length;){let a=n?n[i[o]]:void 0;if(i.length===o+1)return a;if(a)n=a.descendants,o+=1;else return}}e.resolveWithDes=t;function r(n,i,o=0){let a=t(n,i,o);if(a){let s=Object.keys(a);if(s.length===1&&s[0]==="descendants")return}return a}e.resolve=r})(tO||(tO={}));var cp;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(n,i){return{...Ha.defaultData,...i,component:n,overrides:new oo,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function r(n){let i=Ux.fromObject(n.data);return t(n.id,i)}e.fromComponentData=r})(cp||(cp={}));var Vx;(e=>e.defaultData={type:"Page",...Ha.defaultData,physics:{...Fx.defaultData,fusedBody:!1},...Z5.defaultData,camera:LA.defaultData})(Vx||(Vx={}));var tz;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Nx.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Fx.defaultData,states:new sr,events:new sr,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...kx.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Ha.defaultData,...Yb.defaultData,geometry:Xb.defaultData("RectangleGeometry"),material:aa.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Ha.defaultData,...Yb.defaultData,geometry:Xb.defaultData("BooleanGeometry"),material:aa.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Ha.defaultData,...Yb.defaultData,geometry:Xb.defaultData("TextGeometry"),material:aa.defaultTwoLayerData("phong","layer1","layer2")}))(tz||(tz={}));var Ng;(e=>{function t(o,a){let s={name:a};return o.type==="Mesh"?(s.geometry={},"material"in o&&(s.material={layers:new oo}),"materials"in o&&(s.materials=o.materials.map(l=>({layers:new oo})))):b0.is(o.type)&&(s.perspective={},s.orthographic={}),s}e.newEmpty=t;function r(o,a){if(a===void 0)return o;let s={...o};return"material"in s&&"material"in a&&a.material&&(s.material=IA(s.material,l=>{if(typeof l!="string")for(let[u,d]of Object.entries(a.material.layers)){let c=l.layers.data(u);c&&ds.patch(c,d)}}).data),s.materials&&a.materials&&(s.materials=IA(s.materials,l=>{var u,d;for(let c=0;c<s.materials.length;c++){let h=a.materials[c];if(typeof h!="string")for(let[f,g]of Object.entries(h.layers)){let y=(d=(u=l[c])==null?void 0:u.layers)==null?void 0:d.data(f);y&&ds.patch(y,g)}}}).data),s}function n(o,a){let s,l=[],u={orthographic:0,perspective:0,geometry:0};function d(c,h){for(let[f,g]of Object.entries(h.layers)){let{texture:y,...m}=g;if(y!==void 0&&Object.keys(y).length>0){let p={path:[...c,"layers",f,"texture"],props:y,type:0};l.push(p)}if(Object.keys(m).length>0){let p={path:[...c,"layers",f],props:m,type:0};l.push(p)}}}for(let[c,h]of Object.entries(a))if(c!=="name")if(c==="cloner")l.push(...z5.toOps(h,["cloner"]));else if(c==="pathSnapping")l.push({path:[c],props:{slide:h.slide,offset:h.offset},type:0});else if(c==="material")d(["material"],h);else if(c==="materials")for(let[f,g]of Object.entries(h))d(["materials",f],g);else if(u[c]===0){if(c==="geometry"&&h.extrusion!==void 0){let f={path:[c,"extrusion"],props:h.extrusion,type:0};l.push(f),h={...h},delete h.extrusion}if(Object.keys(h).length>0){let f={path:[c],props:h,type:0};l.push(f)}}else s===void 0&&(s={path:[],props:{},type:0},l.push(s)),s.props[c]=h;return l}e.toOps=n;function i(o,a){var l,u,d,c,h,f;if(a===void 0)return o;let s={...o};if(Object.assign(s,Ux.merge(s,a)),Object.assign(s,{pathSnapping:Object.assign({},s.pathSnapping,{slide:((l=a.pathSnapping)==null?void 0:l.slide)??((u=s.pathSnapping)==null?void 0:u.slide)??0,offset:((d=a.pathSnapping)==null?void 0:d.offset)??((c=s.pathSnapping)==null?void 0:c.offset)??0})}),b0.is(o.type)){s.orthographic={...s.orthographic},s.perspective={...s.perspective};let g=a;((h=g.orthographic)==null?void 0:h.zoom)!==void 0&&(s.orthographic.zoom=g.orthographic.zoom),((f=g.perspective)==null?void 0:f.zoom)!==void 0&&(s.perspective.zoom=g.perspective.zoom),g.isUpVectorFlipped!==void 0&&(s.isUpVectorFlipped=g.isUpVectorFlipped),g.targetOffset!==void 0&&(s.targetOffset=g.targetOffset)}else if(o.type==="Mesh")"geometry"in a&&Object.assign(s,{geometry:q5.merge(s.geometry,a.geometry)}),(a.material||a.materials)&&(s=r(s,a)),s.cloner&&"cloner"in a&&Object.assign(s,{cloner:up.merge(s.cloner,a.cloner)});else if(o.type==="Empty")s.cloner&&"cloner"in a&&Object.assign(s,{cloner:up.merge(s.cloner,a.cloner)});else if(U5.is(o.type)){let g=a;g.intensity!==void 0&&(s.intensity=g.intensity),g.color!==void 0&&(typeof g.color=="string"?s.color=g.color:s.color=Oa.clone(g.color))}return s}e.patch=i})(Ng||(Ng={}));var rO;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(rO||(rO={}));var t0;(e=>e.defaultData={orbitControls:rO.defaultData,playPage:ES,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let n=0,i=0;return r<5?i=-30:r<10&&(i=30),r===0||r===10||r===5?n=30:(r===4||r===11||r===9)&&(n=-30),[120,[n,i],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(t0||(t0={}));var rz;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(rz||(rz={}));var nz;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(nz||(nz={}));var Kb;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...rz.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:nz.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(Kb||(Kb={}));var BA;(e=>{function t(n){return n.find(i=>i.data.type==="Page"&&i.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function r(n,i,o){n.scene.objects.traverseFrom(i,(a,s)=>{var l;if(s.type==="Instance"){let u=(l=aO.getComponentData(n,s.component))==null?void 0:l.data;u&&o(a,s,u.events)}else o(a,s,s.events)})}e.traverseModuleInstances=r})(BA||(BA={}));var Jb;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function t(i={withLight:!0,withSquare:!0}){let o=[],a=tz.defaultMeshObject;i.withLight===!0&&o.push({fi:-1,data:ez.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),i.withSquare===!0&&o.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:a,children:[]});let s=new Ms;return s.push({fi:1,id:ES,data:{...Vx.defaultData,name:"Scene 1"},children:o}),s}e.defaultData={objects:t(),publish:t0.defaultData,styles:Kb.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Ms,publish:t0.defaultData,styles:Kb.defaultData()}},e.emptyDataWithPage=function(i){return{objects:t(i),publish:t0.defaultData,styles:Kb.defaultData()}};function r(i){return{...e.defaultData,objects:Ih(i,Ms.prototype)}}e.withObjs=r;function n(i,o){return r([{id:i,data:o,children:[],fi:0}])}e.withObj=n})(Jb||(Jb={}));var PS;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(PS||(PS={}));var nO;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(nO||(nO={}));var Zs;(e=>{function t(a){return a.textValue!==void 0}e.isTextValue=t;function r(a){return typeof a=="number"}e.isNumber=r;function n(a){return typeof a=="boolean"}e.isBoolean=n;function i(a){return t(a)?"string":n(a)?"boolean":"number"}e.typeOfVariable=i;function o(a){return e.isTextValue(a)?Array.isArray(a.textValue)?a.textValue.map(s=>s.toString().padStart(a.padding??2,"0")).join(a.deliminator??":")+(a.suffix!==void 0?" "+a.suffix:""):a.textValue.toString():e.isBoolean(a)?a?"True":"False":e.isNumber(a)?parseFloat(a.toFixed(3)).toString():a.toString()}e.getDisplayedValue=o})(Zs||(Zs={}));var iz;(e=>e.all=["images","videos","colors","audios","fonts","materials","variables"])(iz||(iz={}));var Kq;(e=>e.all=[...iz.all,"components"])(Kq||(Kq={}));var Jq;(e=>{function t(){return{images:new Dr,videos:new Dr,colors:new Dr,audios:new Dr,fonts:new Dr,materials:new Dr,components:new Dr,variables:new Dr}}e.defaultData=t})(Jq||(Jq={}));var jx;(e=>{function t(){return{images:new Dr,videos:new Dr,colors:new Dr,audios:new Dr,fonts:new Dr,materials:new Dr,components:new Dr,variables:new Dr}}e.defaultData=t})(jx||(jx={}));var Tu;(e=>{function t(){let a={};return a["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Ih(a,Dr.prototype)}e.defaultColors=t;function r(a){let s={};return a!=null&&a.withAITexture&&(s["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...nO.emptyImage,name:"AI generated image"}),Ih(s,Dr.prototype)}e.defaultImages=r;function n(){return{catelogs:new Dr,materials:new Dr,images:new Dr,videos:new Dr,colors:new Dr,audios:new Dr,fonts:new Dr,variables:new sr,lib:jx.defaultData()}}e.emptyData=n;function i(a){switch(a){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let s=[0,0,0];return{name:"Time",value:{textValue:s,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:s,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",a)}}e.defaultVariables=i;function o(a,s){if(s.format==="HH:mm:ss"){let l=Math.floor(a/3600),u=Math.floor((a-l*3600)/60),d=Math.round(a-l*3600-u*60);return{textValue:[l,u,d]}}else if(s.format==="mm:ss"){let l=Math.floor(a/60),u=Math.round(a-l*60);return{textValue:[l,u]}}else return s.format==="number"?a=Math.round(a):a=Math.round(a*1e3)/1e3,a}e.getFormattedTimerTime=o})(Tu||(Tu={}));var iO;(e=>e.list=["idle","move","jump","run"])(iO||(iO={}));var oO;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX",""],["rotPosY",""],["rotNegX",""],["rotNegY",""],["jump","Space"],["run",""],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new sr,move:new sr,jump:new sr,run:new sr},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Ru.fromHexAndA(3728051,1)}}))(oO||(oO={}));function Qq(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let r=t.colorA,n=t.colorB,i=[[r.r,r.g,r.b,r.a],[n.r,n.g,n.b,n.a]],o=[0,1];for(let s=2;s<10;s++)i.push(i[1]),o.push(1);let a={...yh(Wi(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:i,steps:o,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,a)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let r={...Wi(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,r)}})}function ep(e,t){Object.values(e.shared.materials).forEach(r=>t(r))}function tp(e,t){e.scene.objects.traverse((r,n)=>{"materials"in n?n.materials.forEach((i,o)=>{i===void 0&&(n.materials[o]=aa.defaultData(),i=n.materials[o]),typeof i!="string"&&t(i)}):"material"in n?typeof n.material!="string"&&(n.material===void 0&&(n.material=aa.defaultData()),t(n.material)):n.type==="Mesh"&&(n.material===void 0&&(n.material=aa.defaultData()),t(n.material)),"overrides"in n&&Object.values(n.overrides).forEach(i=>{i.material&&typeof i.material!="string"&&t(i.material)})})}function Gze(e){Object.assign(e.scene.publish,{orbitControls:{...rO.defaultData,...Wi(e.scene.publish.orbitControls)}})}function Wze(e){Object.assign(e.scene.publish.settings,{video:{...t0.defaultData.settings.video,...Wi(e.scene.publish.settings.video)}})}function qze(e){function t(r){if(r.layers){for(let n of Object.values(r.layers))if(n){for(let[i,o]of Object.entries(n))if((voe.includes(i)||typeof o=="boolean")&&delete n[i],i==="texture")for(let[a,s]of Object.entries(o))(Hze.includes(a)||typeof s=="boolean")&&delete o[a]}}}e.scene.objects.traverse((r,n)=>{n.states.forEach(i=>{let o=i;o.material?t(o.material):o.materials&&o.materials.forEach(a=>{t(a)})})})}function Xze(e){e.scene.publish.withBackground=!0}function Yze(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Kze(e){e.scene.objects.traverse((t,r)=>{let n=r.cloner;n&&(n.radial.scale=n.radial.scale.map(i=>i+1),n.linear.scale=n.linear.scale.map(i=>i+1))})}function Jze(e){e.scene.objects.traverse((t,r)=>{let n=r.geometry;n&&(n.type==="DodecahedronGeometry"||n.type==="IcosahedronGeometry")&&(n.detail=Math.round(n.detail))})}function Qze(e){e.scene.objects.traverse((t,r)=>{let n=e.scene.objects.unproxy().parent(t);if(n){let i=Wi(e.scene.objects.data(n));i&&i.type==="Mesh"&&i.geometry.type==="BooleanGeometry"&&r.type==="Mesh"&&(r.visible=Wi(r).booleanExclude!==!0)}})}function Zze(e){e.scene.objects.traverse((t,r)=>{if(r.type==="Mesh"){let n=r;r.geometry.type==="NonParametricGeometry"?n.material!==void 0&&delete n.material:n.materials!==void 0&&delete n.materials}})}function $ze(e){function t(n){Object.setPrototypeOf(n,oo.prototype),n.texture&&Object.setPrototypeOf(n.texture,oo.prototype)}function r(n){Object.setPrototypeOf(n,oo.prototype);for(let i in n)t(n[i])}e.scene.objects.traverse((n,i)=>{i.states.forEach(o=>{let a=o;if(a.material){let s=Wi(a.material).layers;r(s),a.material.layers=s}if(a.materials)for(let s=0;s<a.materials.length;s++){let l=a.materials[s],u=Wi(l).layers;r(u),l.layers=u}})})}function Zq(e){e.layers===void 0&&Object.assign(e,aa.defaultTwoLayerData("lambert"))}function OB(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let r=[...t.colors];r.push(t.colors[9]);let n=[...t.steps];n.push(t.steps[9]);let i={...Wi(t),colors:r,steps:n};Object.assign(t,i)}})}function eUe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function $q(e){e.scene.objects.traverse((t,r)=>{"materials"in r?r.materials.forEach(n=>{typeof n!="string"&&OB(n)}):"material"in r&&typeof r.material!="string"&&OB(r.material)}),Object.values(e.shared.materials).forEach(t=>OB(t))}function tUe(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function rUe(e){e.shared.audios=Ih({},Dr.prototype)}function nUe(e){e.shared.videos=Ih({},Dr.prototype)}function iUe(e){let t=e.shared.materials;Object.entries(t).forEach(([r,n])=>{if(!n.layers){let i={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[r]:i})}})}function oUe(e){Object.entries(Wi(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(Wi(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function aUe(e){e.scene.publish.settings.web.preload=!1}function eX(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function tX(e){e.layers&&e.layers.forEach(t=>{jze(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function sUe(e){e.shared.fonts=Ih({},Dr.prototype)}function lUe(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function uUe(e){let t=[];e.scene.objects.traverse((r,n)=>{let i=n;if(i.type==="TextFrame"){let o=aa.defaultTwoLayerData("phong"),a=typeof i.color=="string"?e.shared.colors[i.color]:i.color;o.layers[1].data.color={r:a.r,g:a.g,b:a.b},o.layers[1].data.alpha=i.alpha;let s=lUe(i.font);e.shared.fonts[s]===void 0&&(e.shared.fonts[s]={name:s});let l={name:i.name,...Ha.defaultData,...Yb.defaultData,flatShading:!1,wireframe:!1,geometry:{...Xb.defaultData("TextGeometry"),width:i.width,height:i.height,font:s,depth:0,horizontalAlign:i.horizontalAlign,verticalAlign:i.verticalAlign,fontSize:i.fontSize*1.40625,lineHeight:i.lineHeight/1.40625,letterSpacing:i.letterSpacing-1,text:i.text,textTransform:i.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:o,states:Wi(i.states),events:Wi(i.events),visible:i.visible,raycastLock:i.raycastLock,position:i.position,rotation:i.rotation,scale:i.scale,hiddenMatrix:i.hiddenMatrix},u=Wi(e.scene.objects).parent(r);e.scene.objects.insertAfter(u??null,r,[{id:r+"new",data:l,children:[]}]),t.push(r)}}),t.forEach(r=>{e.scene.objects.delete(r)})}function cUe(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((r,n)=>{n.events.forEach(i=>{if(t[Number(i.type)])if(Object.assign(i,{type:t[Number(i.type)]}),i.type==="Audio"&&"audioEvent"in i&&(Object.assign(i,{playAudio:i.audioEvent}),delete i.audioEvent),i.type==="GameControl")Object.assign(i,{gameActions:{idle:new sr,move:new sr,jump:new sr}});else{let o=new sr;Object.assign(i,{actions:o}),(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="KeyDown"||i.type==="KeyUp")&&"url"in i&&o.push({fi:0,id:Ht.generateUUID(),data:{type:"Link",url:i.url,delay:0}}),"targets"in i&&(i.targets.forEach((a,s,l)=>{let u={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},d={easing:a.easing,duration:a.duration};a.easing===6?Object.assign(d,yh(a,"mass","stiffness","damping","velocity")):a.easing===5&&Object.assign(d,{control1:{...a.control1},control2:{...a.control2}});let c={repeat:a.repeat?-1:0,delay:a.delay,delayDirection:a.delayDirection,direction:a.cycle&&a.rewind?"pingpong-rewind":a.cycle?"pingpong":"normal"},h={state:a.state,...c,...d},f={allowSlerp:!0,type:"Transition",object:a.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new sr({fi:0,id:Ht.generateUUID(),data:u},{fi:1,id:Ht.generateUUID(),data:h})};o.push({fi:l,id:s,data:f})}),delete i.targets)}})})}function dUe(e){e.scene.objects.traverse((t,r)=>{function n(i,o){var l;let a=new sr,s=[];if(r.events.forEach((u,d,c)=>{if(u.type==="Audio"&&u.trigger===o){let h;s.push(d),u.interaction==="play"?h={...yh(u,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in u?u.after:void 0,toggle:"after"in u?u.toggle:void 0,type:"Audio"}:(u.interaction==="pause"||u.interaction==="stop")&&(h={...yh(u,"interaction","delay","object","playAudio"),type:"Audio"}),h&&a.push({fi:c,id:d,data:h})}}),s.forEach(u=>r.events.delete(u)),a.length){let u=(l=r.events.find(d=>d.type===i))==null?void 0:l.data;u?"actions"in u&&u.actions.insertBefore(null,a):r.events.insertBefore(null,[{id:Ht.generateUUID(),data:{type:i,actions:a}}])}}n("Start","start"),n("MouseDown","mouseDown"),n("MouseUp","mouseUp"),n("KeyDown","keyDown"),n("KeyUp","keyUp")})}function rX(e){var r;let t=(r=e.layers.find(n=>n.type==="light"))==null?void 0:r.data;if((t==null?void 0:t.category)==="basic"){let n=ds.defaultData("light","phong"),i=t;Object.assign(i,n),i.visible=!1}}function nX(e){ep(e,rX),tp(e,rX)}function hUe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(r.geometry.scaleBaked||(r.geometry.scaleBaked=[1,1,1]))})}function fUe(e){e.scene.objects.traverse((t,r)=>{(r.type==="Empty"||r.type==="Mesh")&&r.cloner&&!r.cloner.randomnessObject&&!r.cloner.toObject&&!r.cloner.randomness&&(r.cloner={...r.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function pUe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&!("material"in r)&&!("materials"in r)&&(r.material=aa.defaultTwoLayerData("phong"))})}function mUe(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,r)=>{(r.type==="OrthographicCamera"||r.type==="PerspectiveCamera")&&(r.orthographic.autoZoom===void 0&&(r.orthographic.autoZoom=!1),r.orthographic.autoZoomFrustumSize===void 0&&(r.orthographic.autoZoomFrustumSize=790))})}function gUe(e){e.scene.objects.traverse((t,r)=>{r.pathSnapping===void 0&&(r.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),r.pathSnapping.offset===void 0&&(r.pathSnapping.offset=0)})}function vUe(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function yUe(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function bUe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(n=>{n.type==="GameControl"&&(n.resetYPosition=Math.abs(n.resetYPosition-r.position[1]))})})}function xUe(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((r,n)=>{t&&n.physics===null?n.collision=!1:n.collision="visibility"})}function wUe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(n=>{n.type==="GameControl"&&(n.navmesh=oO.defaultDataThirdPerson.navmesh)})})}function _Ue(e){e.scene.styles||(e.scene.styles=Kb.defaultData())}function iX(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function SUe(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),tp(e,iX),ep(e,iX)}function AUe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(n=>{n.type==="GameControl"&&Object.assign(n.gameActions,{run:new sr})})})}function MUe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(n=>{n.type==="GameControl"&&(n.keyAssignments=[...n.keyAssignments,["run",""],["none","Ctrl"]])})})}function oX(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function CUe(e,t){if(t<1&&(tp(e,Qq),ep(e,Qq),e.schema=1),t<2&&(Gze(e),e.schema=2),t<3&&(qze(e),e.schema=3),t<4&&(Xze(e),e.schema=4),t<5&&(Yze(e),e.schema=5),t<6&&(Kze(e),e.schema=6),t<7&&(Jze(e),e.schema=7),t<8&&(e.schema=8),t<9&&($q(e),e.schema=9),t<10&&(eUe(e),e.schema=10),t<11&&(tUe(e),e.schema=11),t<12&&($q(e),e.schema=12),t<13&&(rUe(e),e.schema=13),t<14&&(iUe(e),e.schema=14),t<15&&(oUe(e),e.schema=15),t<16&&(aUe(e),e.schema=16),t<17&&(tp(e,eX),ep(e,eX),e.schema=17),t<18&&(tp(e,Zq),ep(e,Zq),e.schema=18),t<19&&(Wze(e),e.schema=19),t<20&&(sUe(e),uUe(e),e.schema=20),t<21&&(cUe(e),dUe(e),e.schema=21),t<22&&(nX(e),e.schema=22),t<23&&(hUe(e),e.schema=23),t<24&&(fUe(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(nUe(e),t<25&&(e.schema=25)),t<26&&(Qze(e),e.schema=26),t<27&&(Zze(e),e.schema=27),t<28&&(nX(e),e.schema=28),t<29&&($ze(e),e.schema=29),t<30&&(pUe(e),e.schema=30),t<31&&(mUe(e),e.schema=31),t<33&&(gUe(e),e.schema=33),t<34&&(vUe(e),e.schema=34),t<35&&(yUe(e),e.schema=35),t<36&&(bUe(e),e.schema=36),t<37&&(xUe(e),e.schema=37),t<38&&(tp(e,tX),ep(e,tX),e.schema=38),t<39&&(wUe(e),e.schema=39),t<40&&(_Ue(e),e.schema=40),t<41&&(SUe(e),e.schema=41),t<42&&(AUe(e),e.schema=42),t<43&&(MUe(e),e.schema=43),t<99){tp(e,oX),ep(e,oX),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=M1);let r=Wi(e.scene.objects),n=e.scene.objects;e.scene.publish.playPage=ES,n.insertBefore(null,null,[{id:ES,data:{...Vx.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:yh(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:yh(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...zx.defaultData,...yh(e.scene.environment,"usePhysics","gravity")},camera:Wi(e.scene.ownerCamera)??Vx.defaultData.camera,name:"Scene"},children:[]}]);for(let a of r)a.id!==Jb.TRASH_CAN_ID&&n.move(ES,a.fi,a.id);let i=0,o=0;e.shared.penumbraSize&&e.scene.objects.traverse((a,s)=>{s.type==="DirectionalLight"?(s.penumbraSize=e.shared.penumbraSize[Math.min(i,2)],i+=1):s.type==="SpotLight"&&(s.penumbraSize=e.shared.penumbraSize[3+Math.min(o,1)],o+=1),(s.physics===void 0||s.physics===null)&&s.type!=="Instance"&&(s.physics={},Object.assign(s.physics,Fx.defaultData)),s.physics!==void 0&&s.physics!==null&&(s.physics.enabled=s.collision??"visibility",delete s.collision)}),e.schema=99}}function aX(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function TUe(e){e.scene.objects.traverse((t,r)=>{let n=r.geometry;n&&n.type==="PathGeometry"&&(n.extrusion.capType="flat",n.extrusion.bevel=50,n.extrusion.bevelSides=6,n.extrusion.shape.type==="Custom"&&(n.extrusion.shape.shapeQuality="low"))})}var Zy=180/Math.PI;function sX(e){e.rotation=e.rotation.slice(0,3).map(t=>t*Zy)}function woe(e){var r,n;sX(e),e.type==="Page"&&sX(e.camera),(r=e.states)==null||r.forEach(i=>{i.rotation===void 0||i.rotation===null||(i.rotation=i.rotation.slice(0,3).map(o=>o*Zy))});let t=e.geometry;t&&t.type==="SphereGeometry"&&(t.thetaLength=(t.thetaLength??180)*Zy),t&&t.type==="TorusGeometry"&&(t.arc=t.arc*Zy),t&&t.type==="PathGeometry"&&(t.extrusion.angle*=Zy,t.extrusion.twist*=Zy),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(Wi(e.events))&&((n=e.events)==null||n.forEach(i=>{(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"||i.type==="Collision"||i.type==="Trigger")&&(i.runMode=i.toggle?"Toggle":"Once")}))}function EUe(e){e.shared.variables=Ih({},Dr.prototype)}function PUe(e){let t=Wi(e.shared.variables);e.shared.variables=Ih(Object.entries(t??{}).map(([r,n],i)=>({fi:i,id:r,data:n})),sr.prototype)}var rp=107;function _oe(e,t){t(e.data);for(let r of e.children)_oe(r,t)}function DUe(e){let t=e.schema??104;t!==rp&&t<105&&(_oe(e.asset,woe),e.schema=105)}function Soe(e){let t=e.schema??0;if(t!==rp){console.warn("updating from ",t,"to ",rp),CUe(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=t0.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(tp(e,aX),ep(e,aX),e.schema=101),t<102&&(TUe(e),e.schema=102),t<104&&(e.shared.catelogs=new Dr,e.shared.lib=jx.defaultData(),e.schema=104),t<105&&(EUe(e),e.scene.objects.traverse((r,n)=>{woe(n)}),e.schema=105);for(let r of Object.values(e.shared.lib.components))DUe(r);t<106&&(PUe(e),e.schema=106),t<107&&(e.shared.lib.variables=jx.defaultData().variables,e.schema=107)}}var aO;(e=>{e.defaultData={schema:rp,scene:Jb.defaultData,frames:new Dr().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",PS.defaultData),shared:{...Tu.emptyData(),colors:Tu.defaultColors()}},e.emptyDataForImports=function(i){let o=Jb.emptyDataWithPage(i);return{schema:rp,scene:o,frames:new Dr().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",PS.defaultData),shared:{...Tu.emptyData(),colors:Tu.defaultColors(),images:Tu.defaultImages(i)}}},e.emptyData=function(){return{schema:rp,scene:Jb.emptyDataWithPage(),frames:new Dr().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",PS.defaultData),shared:Tu.emptyData()}},e.collabHelper={...T5,updateSchema(i){return(i.schema??0)<rp?IA(i,Soe):(i.schema??0)-rp}};function t(i){let o=e.collabHelper.updateSchema(i);return typeof o=="number"?o===0?i:null:o.data}e.updateSchemaDirectly=t;function r(i){return{...i,shared:{...i.shared,lib:jx.defaultData()}}}e.withoutLib=r;function n(i,o){let a=i.scene.objects.get(o);if(a&&a.data.type==="Component")return a;{let s=i.shared.lib.components[o];if(s)return s.asset}}e.getComponentData=n})(aO||(aO={}));function kg(e,t=!1){let r=e[0].index!==null,n=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=e[0].morphTargetsRelative,l=new Jt,u=0;for(let d=0;d<e.length;++d){let c=e[d],h=0;if(r!==(c.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in c.attributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;o[f]===void 0&&(o[f]=[]),o[f].push(c.attributes[f]),h++}if(h!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(s!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in c.morphAttributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;a[f]===void 0&&(a[f]=[]),a[f].push(c.morphAttributes[f])}if(t){let f;if(r)f=c.index.count;else if(c.attributes.position!==void 0)f=c.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,f,d),u+=f}}if(r){let d=0,c=[];for(let h=0;h<e.length;++h){let f=e[h].index;for(let g=0;g<f.count;++g)c.push(f.getX(g)+d);d+=e[h].attributes.position.count}l.setIndex(c)}for(let d in o){let c=lX(o[d]);if(!c)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,c)}for(let d in a){let c=a[d][0].length;if(c===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let h=0;h<c;++h){let f=[];for(let y=0;y<a[d].length;++y)f.push(a[d][y][h]);let g=lX(f);if(!g)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(g)}}return l}function lX(e){let t,r,n,i=0;for(let s=0;s<e.length;++s){let l=e[s];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=l.normalized),n!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=l.array.length}let o=new t(i),a=0;for(let s=0;s<e.length;++s)o.set(e[s].array,a),a+=e[s].array.length;return new fr(o,r,n)}var OUe=Math.pow(2,-24),iP=class{constructor(){}};function zc(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function uX(e){let t=-1,r=-1/0;for(let n=0;n<3;n++){let i=e[n+3]-e[n];i>r&&(r=i,t=n)}return t}function cX(e,t){t.set(e)}function dX(e,t,r){let n,i;for(let o=0;o<3;o++){let a=o+3;n=e[o],i=t[o],r[o]=n<i?n:i,n=e[a],i=t[a],r[a]=n>i?n:i}}function oP(e,t,r){for(let n=0;n<3;n++){let i=t[e+2*n],o=t[e+2*n+1],a=i-o,s=i+o;a<r[n]&&(r[n]=a),s>r[n+3]&&(r[n+3]=s)}}function x_(e){let t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return 2*(t*r+r*n+n*t)}function RUe(e,t){if(!e.index){let r=e.attributes.position.count,n=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i;r>65535?i=new Uint32Array(new n(4*r)):i=new Uint16Array(new n(2*r)),e.setIndex(new fr(i,1));for(let o=0;o<r;o++)i[o]=o}}function IUe(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let i of e.groups)r.add(i.start),r.add(i.start+i.count);let n=Array.from(r.values()).sort((i,o)=>i-o);for(let i=0;i<n.length-1;i++){let o=n[i],a=n[i+1];t.push({offset:o/3,count:(a-o)/3})}return t}function RB(e,t,r,n,i=null){let o=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,d=-1/0,c=1/0,h=1/0,f=1/0,g=-1/0,y=-1/0,m=-1/0,p=i!==null;for(let v=t*6,b=(t+r)*6;v<b;v+=6){let x=e[v+0],_=e[v+1],A=x-_,M=x+_;A<o&&(o=A),M>l&&(l=M),p&&x<c&&(c=x),p&&x>g&&(g=x);let T=e[v+2],C=e[v+3],E=T-C,D=T+C;E<a&&(a=E),D>u&&(u=D),p&&T<h&&(h=T),p&&T>y&&(y=T);let I=e[v+4],k=e[v+5],L=I-k,U=I+k;L<s&&(s=L),U>d&&(d=U),p&&I<f&&(f=I),p&&I>m&&(m=I)}n[0]=o,n[1]=a,n[2]=s,n[3]=l,n[4]=u,n[5]=d,p&&(i[0]=c,i[1]=h,i[2]=f,i[3]=g,i[4]=y,i[5]=m)}function LUe(e,t,r,n){let i=1/0,o=1/0,a=1/0,s=-1/0,l=-1/0,u=-1/0;for(let d=t*6,c=(t+r)*6;d<c;d+=6){let h=e[d+0];h<i&&(i=h),h>s&&(s=h);let f=e[d+2];f<o&&(o=f),f>l&&(l=f);let g=e[d+4];g<a&&(a=g),g>u&&(u=g)}n[0]=i,n[1]=o,n[2]=a,n[3]=s,n[4]=l,n[5]=u}function BUe(e,t,r,n,i){let o=r,a=r+n-1,s=i.pos,l=i.axis*2;for(;;){for(;o<=a&&t[o*6+l]<s;)o++;for(;o<=a&&t[a*6+l]>=s;)a--;if(o<a){for(let u=0;u<3;u++){let d=e[o*3+u];e[o*3+u]=e[a*3+u],e[a*3+u]=d;let c=t[o*6+u*2+0];t[o*6+u*2+0]=t[a*6+u*2+0],t[a*6+u*2+0]=c;let h=t[o*6+u*2+1];t[o*6+u*2+1]=t[a*6+u*2+1],t[a*6+u*2+1]=h}o++,a--}else return o}}var qd=32,NUe=(e,t)=>e.candidate-t.candidate,Df=new Array(qd).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),aP=new Float32Array(6);function kUe(e,t,r,n,i,o){let a=-1,s=0;if(o===0)a=uX(t),a!==-1&&(s=(t[a]+t[a+3])/2);else if(o===1)a=uX(e),a!==-1&&(s=FUe(r,n,i,a));else if(o===2){let l=x_(e),u=1.25*i,d=n*6,c=(n+i)*6;for(let h=0;h<3;h++){let f=t[h],g=(t[h+3]-f)/qd;if(i<qd/4){let y=[...Df];y.length=i;let m=0;for(let v=d;v<c;v+=6,m++){let b=y[m];b.candidate=r[v+2*h],b.count=0;let{bounds:x,leftCacheBounds:_,rightCacheBounds:A}=b;for(let M=0;M<3;M++)A[M]=1/0,A[M+3]=-1/0,_[M]=1/0,_[M+3]=-1/0,x[M]=1/0,x[M+3]=-1/0;oP(v,r,x)}y.sort(NUe);let p=i;for(let v=0;v<p;v++){let b=y[v];for(;v+1<p&&y[v+1].candidate===b.candidate;)y.splice(v+1,1),p--}for(let v=d;v<c;v+=6){let b=r[v+2*h];for(let x=0;x<p;x++){let _=y[x];b>=_.candidate?oP(v,r,_.rightCacheBounds):(oP(v,r,_.leftCacheBounds),_.count++)}}for(let v=0;v<p;v++){let b=y[v],x=b.count,_=i-b.count,A=b.leftCacheBounds,M=b.rightCacheBounds,T=0;x!==0&&(T=x_(A)/l);let C=0;_!==0&&(C=x_(M)/l);let E=1+1.25*(T*x+C*_);E<u&&(a=h,u=E,s=b.candidate)}}else{for(let p=0;p<qd;p++){let v=Df[p];v.count=0,v.candidate=f+g+p*g;let b=v.bounds;for(let x=0;x<3;x++)b[x]=1/0,b[x+3]=-1/0}for(let p=d;p<c;p+=6){let v=~~((r[p+2*h]-f)/g);v>=qd&&(v=qd-1);let b=Df[v];b.count++,oP(p,r,b.bounds)}let y=Df[qd-1];cX(y.bounds,y.rightCacheBounds);for(let p=qd-2;p>=0;p--){let v=Df[p],b=Df[p+1];dX(v.bounds,b.rightCacheBounds,v.rightCacheBounds)}let m=0;for(let p=0;p<qd-1;p++){let v=Df[p],b=v.count,x=v.bounds,_=Df[p+1].rightCacheBounds;b!==0&&(m===0?cX(x,aP):dX(x,aP,aP)),m+=b;let A=0,M=0;m!==0&&(A=x_(aP)/l);let T=i-m;T!==0&&(M=x_(_)/l);let C=1+1.25*(A*m+M*T);C<u&&(a=h,u=C,s=v.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:a,pos:s}}function FUe(e,t,r,n){let i=0;for(let o=t,a=t+r;o<a;o++)i+=e[o*6+n*2];return i/r}function zUe(e,t){let r=e.attributes.position,n=e.index.array,i=n.length/3,o=new Float32Array(i*6),a=r.normalized,s=r.array,l=r.offset||0,u=3;r.isInterleavedBufferAttribute&&(u=r.data.stride);let d=["getX","getY","getZ"];for(let c=0;c<i;c++){let h=c*3,f=c*6,g,y,m;a?(g=n[h+0],y=n[h+1],m=n[h+2]):(g=n[h+0]*u+l,y=n[h+1]*u+l,m=n[h+2]*u+l);for(let p=0;p<3;p++){let v,b,x;a?(v=r[d[p]](g),b=r[d[p]](y),x=r[d[p]](m)):(v=s[g+p],b=s[y+p],x=s[m+p]);let _=v;b<_&&(_=b),x<_&&(_=x);let A=v;b>A&&(A=b),x>A&&(A=x);let M=(A-_)/2,T=p*2;o[f+T+0]=_+M,o[f+T+1]=M+(Math.abs(_)+M)*OUe,_<t[p]&&(t[p]=_),A>t[p+3]&&(t[p+3]=A)}}return o}function UUe(e,t){function r(p){h&&h(p/f)}function n(p,v,b,x=null,_=0){if(!g&&_>=l&&(g=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),b<=d||_>=l)return r(v+b),p.offset=v,p.count=b,p;let A=kUe(p.boundingData,x,a,v,b,c);if(A.axis===-1)return r(v+b),p.offset=v,p.count=b,p;let M=BUe(s,a,v,b,A);if(M===v||M===v+b)r(v+b),p.offset=v,p.count=b;else{p.splitAxis=A.axis;let T=new iP,C=v,E=M-v;p.left=T,T.boundingData=new Float32Array(6),RB(a,C,E,T.boundingData,o),n(T,C,E,o,_+1);let D=new iP,I=M,k=b-E;p.right=D,D.boundingData=new Float32Array(6),RB(a,I,k,D.boundingData,o),n(D,I,k,o,_+1)}return p}RUe(e,t);let i=new Float32Array(6),o=new Float32Array(6),a=zUe(e,i),s=e.index.array,l=t.maxDepth,u=t.verbose,d=t.maxLeafTris,c=t.strategy,h=t.onProgress,f=e.index.count/3,g=!1,y=[],m=IUe(e);if(m.length===1){let p=m[0],v=new iP;v.boundingData=i,LUe(a,p.offset,p.count,o),n(v,p.offset,p.count,o),y.push(v)}else for(let p of m){let v=new iP;v.boundingData=new Float32Array(6),RB(a,p.offset,p.count,v.boundingData,o),n(v,p.offset,p.count,o),y.push(v)}return y}function VUe(e,t){let r=UUe(e,t),n,i,o,a=[],s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<r.length;d++){let c=r[d],h=l(c),f=new s(32*h);n=new Float32Array(f),i=new Uint32Array(f),o=new Uint16Array(f),u(0,c),a.push(f)}return a;function l(d){return d.count?1:1+l(d.left)+l(d.right)}function u(d,c){let h=d/4,f=d/2,g=!!c.count,y=c.boundingData;for(let m=0;m<6;m++)n[h+m]=y[m];if(g){let m=c.offset,p=c.count;return i[h+6]=m,o[f+14]=p,o[f+15]=65535,d+32}else{let m=c.left,p=c.right,v=c.splitAxis,b;if(b=u(d+32,m),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[h+6]=b/4,b=u(b,p),i[h+7]=v,b}}}var Lh=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,n=-1/0;for(let i=0,o=e.length;i<o;i++){let a=e[i][t];r=a<r?a:r,n=a>n?a:n}this.min=r,this.max=n}setFromPoints(e,t){let r=1/0,n=-1/0;for(let i=0,o=t.length;i<o;i++){let a=t[i],s=e.dot(a);r=s<r?s:r,n=s>n?s:n}this.min=r,this.max=n}isSeparated(e){return this.min>e.max||e.min>this.max}};Lh.prototype.setFromBox=function(){let e=new X;return function(t,r){let n=r.min,i=r.max,o=1/0,a=-1/0;for(let s=0;s<=1;s++)for(let l=0;l<=1;l++)for(let u=0;u<=1;u++){e.x=n.x*s+i.x*(1-s),e.y=n.y*l+i.y*(1-l),e.z=n.z*u+i.z*(1-u);let d=t.dot(e);o=Math.min(d,o),a=Math.max(d,a)}this.min=o,this.max=a}}();var jUe=function(){let e=new X,t=new X,r=new X;return function(n,i,o){let a=n.start,s=e,l=i.start,u=t;r.subVectors(a,l),e.subVectors(n.end,n.start),t.subVectors(i.end,i.start);let d=r.dot(u),c=u.dot(s),h=u.dot(u),f=r.dot(s),g=s.dot(s)*h-c*c,y,m;g!==0?y=(d*c-f*h)/g:y=0,m=(d+y*c)/h,o.x=y,o.y=m}}(),xj=function(){let e=new Ae,t=new X,r=new X;return function(n,i,o,a){jUe(n,i,e);let s=e.x,l=e.y;if(s>=0&&s<=1&&l>=0&&l<=1){n.at(s,o),i.at(l,a);return}else if(s>=0&&s<=1){l<0?i.at(0,a):i.at(1,a),n.closestPointToPoint(a,!0,o);return}else if(l>=0&&l<=1){s<0?n.at(0,o):n.at(1,o),i.closestPointToPoint(o,!0,a);return}else{let u;s<0?u=n.start:u=n.end;let d;l<0?d=i.start:d=i.end;let c=t,h=r;if(n.closestPointToPoint(d,!0,t),i.closestPointToPoint(u,!0,r),c.distanceToSquared(d)<=h.distanceToSquared(u)){o.copy(c),a.copy(d);return}else{o.copy(u),a.copy(h);return}}}}(),HUe=function(){let e=new X,t=new X,r=new qs,n=new Yl;return function(i,o){let{radius:a,center:s}=i,{a:l,b:u,c:d}=o;if(n.start=l,n.end=u,n.closestPointToPoint(s,!0,e).distanceTo(s)<=a||(n.start=l,n.end=d,n.closestPointToPoint(s,!0,e).distanceTo(s)<=a)||(n.start=u,n.end=d,n.closestPointToPoint(s,!0,e).distanceTo(s)<=a))return!0;let c=o.getPlane(r);if(Math.abs(c.distanceToPoint(s))<=a){let h=c.projectPoint(s,t);if(o.containsPoint(h))return!0}return!1}}(),GUe=1e-15;function Ey(e){return Math.abs(e)<GUe}var Bh=class extends ra{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new X),this.satBounds=new Array(4).fill().map(()=>new Lh),this.points=[this.a,this.b,this.c],this.sphere=new Ts,this.plane=new qs,this.needsUpdate=!0}intersectsSphere(e){return HUe(e,this)}update(){let e=this.a,t=this.b,r=this.c,n=this.points,i=this.satAxes,o=this.satBounds,a=i[0],s=o[0];this.getNormal(a),s.setFromPoints(a,n);let l=i[1],u=o[1];l.subVectors(e,t),u.setFromPoints(l,n);let d=i[2],c=o[2];d.subVectors(t,r),c.setFromPoints(d,n);let h=i[3],f=o[3];h.subVectors(r,e),f.setFromPoints(h,n),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};Bh.prototype.closestPointToSegment=function(){let e=new X,t=new X,r=new Yl;return function(n,i=null,o=null){let{start:a,end:s}=n,l=this.points,u,d=1/0;for(let c=0;c<3;c++){let h=(c+1)%3;r.start.copy(l[c]),r.end.copy(l[h]),xj(r,n,e,t),u=e.distanceToSquared(t),u<d&&(d=u,i&&i.copy(e),o&&o.copy(t))}return this.closestPointToPoint(a,e),u=a.distanceToSquared(e),u<d&&(d=u,i&&i.copy(e),o&&o.copy(a)),this.closestPointToPoint(s,e),u=s.distanceToSquared(e),u<d&&(d=u,i&&i.copy(e),o&&o.copy(s)),Math.sqrt(d)}}();Bh.prototype.intersectsTriangle=function(){let e=new Bh,t=new Array(3),r=new Array(3),n=new Lh,i=new Lh,o=new X,a=new X,s=new X,l=new X,u=new Yl,d=new Yl,c=new Yl;return function(h,f=null,g=!1){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let y=this.plane,m=h.plane;if(Math.abs(y.normal.dot(m.normal))>1-1e-10){let p=this.satBounds,v=this.satAxes;r[0]=h.a,r[1]=h.b,r[2]=h.c;for(let _=0;_<4;_++){let A=p[_],M=v[_];if(n.setFromPoints(M,r),A.isSeparated(n))return!1}let b=h.satBounds,x=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let _=0;_<4;_++){let A=b[_],M=x[_];if(n.setFromPoints(M,t),A.isSeparated(n))return!1}for(let _=0;_<4;_++){let A=v[_];for(let M=0;M<4;M++){let T=x[M];if(o.crossVectors(A,T),n.setFromPoints(o,t),i.setFromPoints(o,r),n.isSeparated(i))return!1}}return f&&(g||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let p=this.points,v=!1,b=0;for(let k=0;k<3;k++){let L=p[k],U=p[(k+1)%3];u.start.copy(L),u.end.copy(U),u.delta(a);let W=v?d.start:d.end,G=Ey(m.distanceToPoint(L));if(Ey(m.normal.dot(a))&&G){d.copy(u),b=2;break}if((m.intersectLine(u,W)||G)&&!Ey(W.distanceTo(U))){if(b++,v)break;v=!0}}if(b===1&&h.containsPoint(d.end))return f&&(f.start.copy(d.end),f.end.copy(d.end)),!0;if(b!==2)return!1;let x=h.points,_=!1,A=0;for(let k=0;k<3;k++){let L=x[k],U=x[(k+1)%3];u.start.copy(L),u.end.copy(U),u.delta(s);let W=_?c.start:c.end,G=Ey(y.distanceToPoint(L));if(Ey(y.normal.dot(s))&&G){c.copy(u),A=2;break}if((y.intersectLine(u,W)||G)&&!Ey(W.distanceTo(U))){if(A++,_)break;_=!0}}if(A===1&&this.containsPoint(c.end))return f&&(f.start.copy(c.end),f.end.copy(c.end)),!0;if(A!==2)return!1;if(d.delta(a),c.delta(s),a.dot(s)<0){let k=c.start;c.start=c.end,c.end=k}let M=d.start.dot(a),T=d.end.dot(a),C=c.start.dot(a),E=c.end.dot(a),D=T<C,I=M<E;return M!==E&&C!==T&&D===I?!1:(f&&(l.subVectors(d.start,c.start),l.dot(a)>0?f.start.copy(d.start):f.start.copy(c.start),l.subVectors(d.end,c.end),l.dot(a)<0?f.end.copy(d.end):f.end.copy(c.end)),!0)}}}();Bh.prototype.distanceToPoint=function(){let e=new X;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Bh.prototype.distanceToTriangle=function(){let e=new X,t=new X,r=["a","b","c"],n=new Yl,i=new Yl;return function(o,a=null,s=null){let l=a||s?n:null;if(this.intersectsTriangle(o,l))return(a||s)&&(a&&l.getCenter(a),s&&l.getCenter(s)),0;let u=1/0;for(let d=0;d<3;d++){let c,h=r[d],f=o[h];this.closestPointToPoint(f,e),c=f.distanceToSquared(e),c<u&&(u=c,a&&a.copy(e),s&&s.copy(f));let g=this[h];o.closestPointToPoint(g,e),c=g.distanceToSquared(e),c<u&&(u=c,a&&a.copy(g),s&&s.copy(e))}for(let d=0;d<3;d++){let c=r[d],h=r[(d+1)%3];n.set(this[c],this[h]);for(let f=0;f<3;f++){let g=r[f],y=r[(f+1)%3];i.set(o[g],o[y]),xj(n,i,e,t);let m=e.distanceToSquared(t);m<u&&(u=m,a&&a.copy(e),s&&s.copy(t))}}return Math.sqrt(u)}}();var od=class{constructor(e,t,r){this.isOrientedBox=!0,this.min=new X,this.max=new X,this.matrix=new ft,this.invMatrix=new ft,this.points=new Array(8).fill().map(()=>new X),this.satAxes=new Array(3).fill().map(()=>new X),this.satBounds=new Array(3).fill().map(()=>new Lh),this.alignedSatBounds=new Array(3).fill().map(()=>new Lh),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};od.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,n=this.points;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let d=0;d<=1;d++){let c=1*l|2*u|4*d,h=n[c];h.x=l?r.x:t.x,h.y=u?r.y:t.y,h.z=d?r.z:t.z,h.applyMatrix4(e)}let i=this.satBounds,o=this.satAxes,a=n[0];for(let l=0;l<3;l++){let u=o[l],d=i[l],c=1<<l,h=n[c];u.subVectors(a,h),d.setFromPoints(u,n)}let s=this.alignedSatBounds;s[0].setFromPointsField(n,"x"),s[1].setFromPointsField(n,"y"),s[2].setFromPointsField(n,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();od.prototype.intersectsBox=function(){let e=new Lh;return function(t){this.needsUpdate&&this.update();let r=t.min,n=t.max,i=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(e.min=r.x,e.max=n.x,a[0].isSeparated(e)||(e.min=r.y,e.max=n.y,a[1].isSeparated(e))||(e.min=r.z,e.max=n.z,a[2].isSeparated(e)))return!1;for(let s=0;s<3;s++){let l=o[s],u=i[s];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}();od.prototype.intersectsTriangle=function(){let e=new Bh,t=new Array(3),r=new Lh,n=new Lh,i=new X;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);let a=this.satBounds,s=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let c=0;c<3;c++){let h=a[c],f=s[c];if(r.setFromPoints(f,t),h.isSeparated(r))return!1}let l=o.satBounds,u=o.satAxes,d=this.points;for(let c=0;c<3;c++){let h=l[c],f=u[c];if(r.setFromPoints(f,d),h.isSeparated(r))return!1}for(let c=0;c<3;c++){let h=s[c];for(let f=0;f<4;f++){let g=u[f];if(i.crossVectors(h,g),r.setFromPoints(i,t),n.setFromPoints(i,d),r.isSeparated(n))return!1}}return!0}}();od.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();od.prototype.distanceToPoint=function(){let e=new X;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();od.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Yl),r=new Array(12).fill().map(()=>new Yl),n=new X,i=new X;return function(o,a=0,s=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(s||l)&&(o.getCenter(i),this.closestPointToPoint(i,n),o.closestPointToPoint(n,i),s&&s.copy(n),l&&l.copy(i)),0;let u=a*a,d=o.min,c=o.max,h=this.points,f=1/0;for(let y=0;y<8;y++){let m=h[y];i.copy(m).clamp(d,c);let p=m.distanceToSquared(i);if(p<f&&(f=p,s&&s.copy(m),l&&l.copy(i),p<u))return Math.sqrt(p)}let g=0;for(let y=0;y<3;y++)for(let m=0;m<=1;m++)for(let p=0;p<=1;p++){let v=(y+1)%3,b=(y+2)%3,x=m<<v|p<<b,_=1<<y|m<<v|p<<b,A=h[x],M=h[_];t[g].set(A,M);let T=e[y],C=e[v],E=e[b],D=r[g],I=D.start,k=D.end;I[T]=d[T],I[C]=m?d[C]:c[C],I[E]=p?d[E]:c[C],k[T]=c[T],k[C]=m?d[C]:c[C],k[E]=p?d[E]:c[C],g++}for(let y=0;y<=1;y++)for(let m=0;m<=1;m++)for(let p=0;p<=1;p++){i.x=y?c.x:d.x,i.y=m?c.y:d.y,i.z=p?c.z:d.z,this.closestPointToPoint(i,n);let v=i.distanceToSquared(n);if(v<f&&(f=v,s&&s.copy(n),l&&l.copy(i),v<u))return Math.sqrt(v)}for(let y=0;y<12;y++){let m=t[y];for(let p=0;p<12;p++){let v=r[p];xj(m,v,n,i);let b=n.distanceToSquared(i);if(b<f&&(f=b,s&&s.copy(n),l&&l.copy(i),b<u))return Math.sqrt(b)}}return Math.sqrt(f)}}();var Py=new X,Dy=new X,Oy=new X,sP=new Ae,lP=new Ae,uP=new Ae,hX=new X,fX=new X,pX=new X,cP=new X;function WUe(e,t,r,n,i,o){let a;return o===Ao?a=e.intersectTriangle(n,r,t,!0,i):a=e.intersectTriangle(t,r,n,o!==ys,i),a===null?null:{distance:e.origin.distanceTo(i),point:i.clone()}}function qUe(e,t,r,n,i,o,a,s,l){Py.fromBufferAttribute(t,o),Dy.fromBufferAttribute(t,a),Oy.fromBufferAttribute(t,s);let u=WUe(e,Py,Dy,Oy,cP,l);if(u){n&&(sP.fromBufferAttribute(n,o),lP.fromBufferAttribute(n,a),uP.fromBufferAttribute(n,s),u.uv=ra.getInterpolation(cP,Py,Dy,Oy,sP,lP,uP,new Ae)),i&&(sP.fromBufferAttribute(i,o),lP.fromBufferAttribute(i,a),uP.fromBufferAttribute(i,s),u.uv1=ra.getInterpolation(cP,Py,Dy,Oy,sP,lP,uP,new Ae)),r&&(hX.fromBufferAttribute(r,o),fX.fromBufferAttribute(r,a),pX.fromBufferAttribute(r,s),u.normal=ra.getInterpolation(cP,Py,Dy,Oy,hX,fX,pX,new X),u.normal.dot(e.direction)>0&&u.normal.multiplyScalar(-1));let d={a:o,b:a,c:s,normal:new X,materialIndex:0};ra.getNormal(Py,Dy,Oy,d.normal),u.face=d,u.faceIndex=o}return u}function Aoe(e,t,r,n,i){let o=n*3,a=e.index.getX(o),s=e.index.getX(o+1),l=e.index.getX(o+2),{position:u,normal:d,uv:c,uv1:h}=e.attributes,f=qUe(r,u,d,c,h,a,s,l,t);return f?(f.faceIndex=n,i&&i.push(f),f):null}function XUe(e,t,r,n,i,o){for(let a=n,s=n+i;a<s;a++)Aoe(e,t,r,a,o)}function YUe(e,t,r,n,i){let o=1/0,a=null;for(let s=n,l=n+i;s<l;s++){let u=Aoe(e,t,r,s);u&&u.distance<o&&(a=u,o=u.distance)}return a}function Lc(e,t,r,n){let i=e.a,o=e.b,a=e.c,s=t,l=t+1,u=t+2;r&&(s=r.getX(t),l=r.getX(t+1),u=r.getX(t+2)),i.x=n.getX(s),i.y=n.getY(s),i.z=n.getZ(s),o.x=n.getX(l),o.y=n.getY(l),o.z=n.getZ(l),a.x=n.getX(u),a.y=n.getY(u),a.z=n.getZ(u)}function mX(e,t,r,n,i,o,a){let s=r.index,l=r.attributes.position;for(let u=e,d=t+e;u<d;u++)if(Lc(a,u*3,s,l),a.needsUpdate=!0,n(a,u,i,o))return!0;return!1}var Moe=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function np(e,t){return t[e+15]===65535}function Qb(e,t){return t[e+6]}function NA(e,t){return t[e+14]}function kA(e){return e+8}function FA(e,t){return t[e+6]}function KUe(e,t){return t[e+7]}var Cb=new Oi,sO=new X,JUe=["x","y","z"];function oz(e,t,r,n,i){let o=e*2,a=C1,s=Pp,l=Dp;if(np(o,s)){let u=Qb(e,l),d=NA(o,s);XUe(t,r,n,u,d,i)}else{let u=kA(e);lO(u,a,n,sO)&&oz(u,t,r,n,i);let d=FA(e,l);lO(d,a,n,sO)&&oz(d,t,r,n,i)}}function az(e,t,r,n){let i=e*2,o=C1,a=Pp,s=Dp;if(np(i,a)){let l=Qb(e,s),u=NA(i,a);return YUe(t,r,n,l,u)}else{let l=KUe(e,s),u=JUe[l],d=n.direction[u]>=0,c,h;d?(c=kA(e),h=FA(e,s)):(c=FA(e,s),h=kA(e));let f=lO(c,o,n,sO)?az(c,t,r,n):null;if(f){let y=f.point[u];if(d?y<=o[h+l]:y>=o[h+l+3])return f}let g=lO(h,o,n,sO)?az(h,t,r,n):null;return f&&g?f.distance<=g.distance?f:g:f||g||null}}var QUe=function(){let e,t,r=[],n=new Moe(()=>new Oi);return function(...o){e=n.getPrimitive(),t=n.getPrimitive(),r.push(e,t);let a=i(...o);n.releasePrimitive(e),n.releasePrimitive(t),r.pop(),r.pop();let s=r.length;return s>0&&(t=r[s-1],e=r[s-2]),a};function i(o,a,s,l,u=null,d=0,c=0){function h(v){let b=v*2,x=Pp,_=Dp;for(;!np(b,x);)v=kA(v),b=v*2;return Qb(v,_)}function f(v){let b=v*2,x=Pp,_=Dp;for(;!np(b,x);)v=FA(v,_),b=v*2;return Qb(v,_)+NA(b,x)}let g=o*2,y=C1,m=Pp,p=Dp;if(np(g,m)){let v=Qb(o,p),b=NA(g,m);return zc(o,y,e),l(v,b,!1,c,d+o,e)}else{let v=kA(o),b=FA(o,p),x=v,_=b,A,M,T,C;if(u&&(T=e,C=t,zc(x,y,T),zc(_,y,C),A=u(T),M=u(C),M<A)){x=b,_=v;let W=A;A=M,M=W,T=C}T||(T=e,zc(x,y,T));let E=np(x*2,m),D=s(T,E,A,c+1,d+x),I;if(D===2){let W=h(x),G=f(x)-W;I=l(W,G,!0,c+1,d+x,T)}else I=D&&i(x,a,s,l,u,d,c+1);if(I)return!0;C=t,zc(_,y,C);let k=np(_*2,m),L=s(C,k,M,c+1,d+_),U;if(L===2){let W=h(_),G=f(_)-W;U=l(W,G,!0,c+1,d+_,C)}else U=L&&i(_,a,s,l,u,d,c+1);return!!U}}}(),ZUe=function(){let e=new Bh,t=new Bh,r=new ft,n=new od,i=new od;return function o(a,s,l,u,d=null){let c=a*2,h=C1,f=Pp,g=Dp;if(d===null&&(l.boundingBox||l.computeBoundingBox(),n.set(l.boundingBox.min,l.boundingBox.max,u),d=n),np(c,f)){let y=s,m=y.index,p=y.attributes.position,v=l.index,b=l.attributes.position,x=Qb(a,g),_=NA(c,f);if(r.copy(u).invert(),l.boundsTree)return zc(a,h,i),i.matrix.copy(r),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:A=>i.intersectsBox(A),intersectsTriangle:A=>{A.a.applyMatrix4(u),A.b.applyMatrix4(u),A.c.applyMatrix4(u),A.needsUpdate=!0;for(let M=x*3,T=(_+x)*3;M<T;M+=3)if(Lc(t,M,m,p),t.needsUpdate=!0,A.intersectsTriangle(t))return!0;return!1}});for(let A=x*3,M=_+x*3;A<M;A+=3){Lc(e,A,m,p),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let T=0,C=v.count;T<C;T+=3)if(Lc(t,T,v,b),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let y=a+8,m=g[a+6];return zc(y,h,Cb),!!(d.intersectsBox(Cb)&&o(y,s,l,u,d)||(zc(m,h,Cb),d.intersectsBox(Cb)&&o(m,s,l,u,d)))}}}();function lO(e,t,r,n){return zc(e,t,Cb),r.intersectBox(Cb,n)}var sz=[],C2,C1,Pp,Dp;function eS(e){C2&&sz.push(C2),C2=e,C1=new Float32Array(e),Pp=new Uint16Array(e),Dp=new Uint32Array(e)}function dP(){C2=null,C1=null,Pp=null,Dp=null,sz.length&&eS(sz.pop())}var IB=Symbol("skip tree generation"),LB=new Oi,BB=new Oi,Ry=new ft,rg=new od,w_=new od,__=new X,hP=new X,$Ue=new X,e4e=new X,t4e=new X,gX=new Oi,bc=new Moe(()=>new Bh),DS=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),DS.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,n=e._roots,i=r.getIndex(),o;return t.cloneBuffers?o={roots:n.map(a=>a.slice()),index:i.array.slice()}:o={roots:n,index:i.array},o}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),DS.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:n,roots:i}=e,o=new DS(t,{...r,[IB]:!0});if(o._roots=i,r.setIndex){let a=t.getIndex();if(a===null){let s=new fr(e.index,1,!1);t.setIndex(s)}else a.array!==n&&(a.array.set(n),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[IB]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[IB]||(this._roots=VUe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Oi))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,n=t.attributes.position,i,o,a,s,l=0,u=this._roots;for(let c=0,h=u.length;c<h;c++)i=u[c],o=new Uint32Array(i),a=new Uint16Array(i),s=new Float32Array(i),d(0,l),l+=i.byteLength;function d(c,h,f=!1){let g=c*2;if(a[g+15]===65535){let y=o[c+6],m=a[g+14],p=1/0,v=1/0,b=1/0,x=-1/0,_=-1/0,A=-1/0;for(let M=3*y,T=3*(y+m);M<T;M++){let C=r[M],E=n.getX(C),D=n.getY(C),I=n.getZ(C);E<p&&(p=E),E>x&&(x=E),D<v&&(v=D),D>_&&(_=D),I<b&&(b=I),I>A&&(A=I)}return s[c+0]!==p||s[c+1]!==v||s[c+2]!==b||s[c+3]!==x||s[c+4]!==_||s[c+5]!==A?(s[c+0]=p,s[c+1]=v,s[c+2]=b,s[c+3]=x,s[c+4]=_,s[c+5]=A,!0):!1}else{let y=c+8,m=o[c+6],p=y+h,v=m+h,b=f,x=!1,_=!1;e?b||(x=e.has(p),_=e.has(v),b=!x&&!_):(x=!0,_=!0);let A=b||x,M=b||_,T=!1;A&&(T=d(y,h,b));let C=!1;M&&(C=d(m,h,b));let E=T||C;if(E)for(let D=0;D<3;D++){let I=y+D,k=m+D,L=s[I],U=s[I+3],W=s[k],G=s[k+3];s[c+D]=L<W?L:W,s[c+D+3]=U>G?U:G}return E}}}traverse(e,t=0){let r=this._roots[t],n=new Uint32Array(r),i=new Uint16Array(r);o(0);function o(a,s=0){let l=a*2,u=i[l+15]===65535;if(u){let d=n[a+6],c=i[l+14];e(s,u,new Float32Array(r,a*4,6),d,c)}else{let d=a+8,c=n[a+6],h=n[a+7];e(s,u,new Float32Array(r,a*4,6),h)||(o(d,s+1),o(c,s+1))}}}raycast(e,t=Wu){let r=this._roots,n=this.geometry,i=[],o=t.isMaterial,a=Array.isArray(t),s=n.groups,l=o?t.side:t;for(let u=0,d=r.length;u<d;u++){let c=a?t[s[u].materialIndex].side:l,h=i.length;if(eS(r[u]),oz(0,n,c,e,i),dP(),a){let f=s[u].materialIndex;for(let g=h,y=i.length;g<y;g++)i[g].face.materialIndex=f}}return i}raycastFirst(e,t=Wu){let r=this._roots,n=this.geometry,i=t.isMaterial,o=Array.isArray(t),a=null,s=n.groups,l=i?t.side:t;for(let u=0,d=r.length;u<d;u++){let c=o?t[s[u].materialIndex].side:l;eS(r[u]);let h=az(0,n,c,e);dP(),h!=null&&(a==null||h.distance<a.distance)&&(a=h,o&&(h.face.materialIndex=s[u].materialIndex))}return a}intersectsGeometry(e,t){let r=this.geometry,n=!1;for(let i of this._roots)if(eS(i),n=ZUe(0,r,e,t),dP(),n)break;return n}shapecast(e,t,r){let n=this.geometry;if(e instanceof Function){if(t){let c=t;t=(h,f,g,y)=>{let m=f*3;return c(h,m,m+1,m+2,g,y)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let i=bc.getPrimitive(),{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:s,intersectsTriangle:l}=e;if(s&&l){let c=s;s=(h,f,g,y,m)=>c(h,f,g,y,m)?!0:mX(h,f,n,l,g,y,i)}else s||(l?s=(c,h,f,g)=>mX(c,h,n,l,f,g,i):s=(c,h,f)=>f);let u=!1,d=0;for(let c of this._roots){if(eS(c),u=QUe(0,n,a,s,o,d),dP(),u)break;d+=c.byteLength}return bc.releasePrimitive(i),u}bvhcast(e,t,r){let{intersectsRanges:n,intersectsTriangles:i}=r,o=this.geometry.index,a=this.geometry.attributes.position,s=e.geometry.index,l=e.geometry.attributes.position;Ry.copy(t).invert();let u=bc.getPrimitive(),d=bc.getPrimitive();if(i){let h=function(f,g,y,m,p,v,b,x){for(let _=y,A=y+m;_<A;_++){Lc(d,_*3,s,l),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let M=f,T=f+g;M<T;M++)if(Lc(u,M*3,o,a),u.needsUpdate=!0,i(u,d,M,_,p,v,b,x))return!0}return!1};if(n){let f=n;n=function(g,y,m,p,v,b,x,_){return f(g,y,m,p,v,b,x,_)?!0:h(g,y,m,p,v,b,x,_)}}else n=h}e.getBoundingBox(BB),BB.applyMatrix4(t);let c=this.shapecast({intersectsBounds:h=>BB.intersectsBox(h),intersectsRange:(h,f,g,y,m,p)=>(LB.copy(p),LB.applyMatrix4(Ry),e.shapecast({intersectsBounds:v=>LB.intersectsBox(v),intersectsRange:(v,b,x,_,A)=>n(h,f,v,b,y,m,_,A)}))});return bc.releasePrimitive(u),bc.releasePrimitive(d),c}intersectsBox(e,t){return rg.set(e.min,e.max,t),rg.needsUpdate=!0,this.shapecast({intersectsBounds:r=>rg.intersectsBox(r),intersectsTriangle:r=>rg.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},n={},i=0,o=1/0){e.boundingBox||e.computeBoundingBox(),rg.set(e.boundingBox.min,e.boundingBox.max,t),rg.needsUpdate=!0;let a=this.geometry,s=a.attributes.position,l=a.index,u=e.attributes.position,d=e.index,c=bc.getPrimitive(),h=bc.getPrimitive(),f=hP,g=$Ue,y=null,m=null;n&&(y=e4e,m=t4e);let p=1/0,v=null,b=null;return Ry.copy(t).invert(),w_.matrix.copy(Ry),this.shapecast({boundsTraverseOrder:x=>rg.distanceToBox(x),intersectsBounds:(x,_,A)=>A<p&&A<o?(_&&(w_.min.copy(x.min),w_.max.copy(x.max),w_.needsUpdate=!0),!0):!1,intersectsRange:(x,_)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:A=>w_.distanceToBox(A),intersectsBounds:(A,M,T)=>T<p&&T<o,intersectsRange:(A,M)=>{for(let T=A*3,C=(A+M)*3;T<C;T+=3){Lc(h,T,d,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let E=x*3,D=(x+_)*3;E<D;E+=3){Lc(c,E,l,s),c.needsUpdate=!0;let I=c.distanceToTriangle(h,f,y);if(I<p&&(g.copy(f),m&&m.copy(y),p=I,v=E/3,b=T/3),I<i)return!0}}}});{let A=d?d.count:u.count;for(let M=0,T=A;M<T;M+=3){Lc(h,M,d,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let C=x*3,E=(x+_)*3;C<E;C+=3){Lc(c,C,l,s),c.needsUpdate=!0;let D=c.distanceToTriangle(h,f,y);if(D<p&&(g.copy(f),m&&m.copy(y),p=D,v=C/3,b=M/3),D<i)return!0}}}}}),bc.releasePrimitive(c),bc.releasePrimitive(h),p===1/0?null:(r.point?r.point.copy(g):r.point=g.clone(),r.distance=p,r.faceIndex=v,n&&(n.point?n.point.copy(m):n.point=m.clone(),n.point.applyMatrix4(Ry),g.applyMatrix4(Ry),n.distance=g.sub(n.point).length(),n.faceIndex=b),r)}closestPointToPoint(e,t={},r=0,n=1/0){let i=r*r,o=n*n,a=1/0,s=null;if(this.shapecast({boundsTraverseOrder:u=>(__.copy(e).clamp(u.min,u.max),__.distanceToSquared(e)),intersectsBounds:(u,d,c)=>c<a&&c<o,intersectsTriangle:(u,d)=>{u.closestPointToPoint(e,__);let c=e.distanceToSquared(__);return c<a&&(hP.copy(__),a=c,s=d),c<i}}),a===1/0)return null;let l=Math.sqrt(a);return t.point?t.point.copy(hP):t.point=hP.clone(),t.distance=l,t.faceIndex=s,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{zc(0,new Float32Array(t),gX),e.union(gX)}),e}},S_=Po(aCe()),r4e=.5*(Math.sqrt(3)-1),A_=(3-Math.sqrt(3))/6,n4e=1/3,xc=1/6,OS=e=>Math.floor(e)|0,vX=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),NB=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function kB(e=Math.random){let t=Coe(e),r=new Float64Array(t).map(i=>vX[i%12*2]),n=new Float64Array(t).map(i=>vX[i%12*2+1]);return function(i,o){let a=0,s=0,l=0,u=(i+o)*r4e,d=OS(i+u),c=OS(o+u),h=(d+c)*A_,f=d-h,g=c-h,y=i-f,m=o-g,p,v;y>m?(p=1,v=0):(p=0,v=1);let b=y-p+A_,x=m-v+A_,_=y-1+2*A_,A=m-1+2*A_,M=d&255,T=c&255,C=.5-y*y-m*m;if(C>=0){let I=M+t[T],k=r[I],L=n[I];C*=C,a=C*C*(k*y+L*m)}let E=.5-b*b-x*x;if(E>=0){let I=M+p+t[T+v],k=r[I],L=n[I];E*=E,s=E*E*(k*b+L*x)}let D=.5-_*_-A*A;if(D>=0){let I=M+1+t[T+1],k=r[I],L=n[I];D*=D,l=D*D*(k*_+L*A)}return 70*(a+s+l)}}function i4e(e=Math.random){let t=Coe(e),r=new Float64Array(t).map(o=>NB[o%12*3]),n=new Float64Array(t).map(o=>NB[o%12*3+1]),i=new Float64Array(t).map(o=>NB[o%12*3+2]);return function(o,a,s){let l,u,d,c,h=(o+a+s)*n4e,f=OS(o+h),g=OS(a+h),y=OS(s+h),m=(f+g+y)*xc,p=f-m,v=g-m,b=y-m,x=o-p,_=a-v,A=s-b,M,T,C,E,D,I;x>=_?_>=A?(M=1,T=0,C=0,E=1,D=1,I=0):x>=A?(M=1,T=0,C=0,E=1,D=0,I=1):(M=0,T=0,C=1,E=1,D=0,I=1):_<A?(M=0,T=0,C=1,E=0,D=1,I=1):x<A?(M=0,T=1,C=0,E=0,D=1,I=1):(M=0,T=1,C=0,E=1,D=1,I=0);let k=x-M+xc,L=_-T+xc,U=A-C+xc,W=x-E+2*xc,G=_-D+2*xc,z=A-I+2*xc,V=x-1+3*xc,j=_-1+3*xc,H=A-1+3*xc,Y=f&255,Q=g&255,$=y&255,ne=.6-x*x-_*_-A*A;if(ne<0)l=0;else{let ie=Y+t[Q+t[$]];ne*=ne,l=ne*ne*(r[ie]*x+n[ie]*_+i[ie]*A)}let Z=.6-k*k-L*L-U*U;if(Z<0)u=0;else{let ie=Y+M+t[Q+T+t[$+C]];Z*=Z,u=Z*Z*(r[ie]*k+n[ie]*L+i[ie]*U)}let ce=.6-W*W-G*G-z*z;if(ce<0)d=0;else{let ie=Y+E+t[Q+D+t[$+I]];ce*=ce,d=ce*ce*(r[ie]*W+n[ie]*G+i[ie]*z)}let ae=.6-V*V-j*j-H*H;if(ae<0)c=0;else{let ie=Y+1+t[Q+1+t[$+1]];ae*=ae,c=ae*ae*(r[ie]*V+n[ie]*j+i[ie]*H)}return 32*(l+u+d+c)}}function Coe(e){let t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){let n=r+~~(e()*(256-r)),i=t[r];t[r]=t[n],t[n]=i}for(let r=256;r<512;r++)t[r]=t[r-256];return t}var pu=new ra,o4e=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let n=0;n<e.count;n+=3){let i=1;pu.a.fromBufferAttribute(e,n),pu.b.fromBufferAttribute(e,n+1),pu.c.fromBufferAttribute(e,n+2),i*=pu.getArea(),t[n/3]=i}this.distribution=new Float32Array(e.count/3);let r=0;for(let n=0;n<t.length;n++)r+=t[n],this.distribution[n]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let r=this.distribution[this.distribution.length-1],n=this.binarySearch(this.randomFunction()*r);return this.sampleFace(n,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,r=0,n=t.length-1,i=-1;for(;r<=n;){let o=Math.ceil((r+n)/2);if(o===0||t[o-1]<=e&&t[o]>e){i=o;break}else e<t[o]?n=o-1:r=o+1}return i}sampleFace(e,t,r){let n=this.randomFunction(),i=this.randomFunction();return n+i>1&&(n=1-n,i=1-i),pu.a.fromBufferAttribute(this.positionAttribute,e*3),pu.b.fromBufferAttribute(this.positionAttribute,e*3+1),pu.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(pu.a,n).addScaledVector(pu.b,i).addScaledVector(pu.c,1-(n+i)),pu.getNormal(r),this}},a4e=Po(une()),s4e=new ft,l4e=new ft,u4e=new ft,zA;(e=>{function t(r){return r&&r.__isSPEObject}e.is=t})(zA||(zA={}));var wj=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new ft,this.copyPreviousMatrix=!0,this.hiddenMatrix=new ft,this.matrixWorldRigid=new ft,this.shearScale=new ft,this.shearScaleInv=new ft}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof bn&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let n=this.parent;if(t&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let i of this.children)i.updateWorldMatrix(!1,!0)}traverseChildren(t,r=0){for(let n of this.children)zA.is(n)&&n.traverseObject(t,r+1)}traverseObject(t,r=0){if(t(this,r)!==!0)for(let n of this.children)zA.is(n)&&n.traverseObject(t,r+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,r=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:n,v:i,q:o}=(0,a4e.SVD)(r),a=s4e.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),s=l4e.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),l=u4e.copy(s).transpose();this.shearScale.makeScale(o[0],o[1],o[2]).multiply(l).premultiply(s),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(a,l).copyPosition(this.matrixWorld),o.every(u=>Math.abs(o[0]-u)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,r){this.updateWorldMatrix(!0,!1);let n=new ft().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),n.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof ft?t.hiddenMatrix.premultiply(n):t.applyMatrix4(n),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!1){return super.copy(t,r),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,r,n,i,o,a){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},c4e=class extends wj(bn){},d4e=e=>e.type==="Mesh",ia=class extends c4e{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let r=this.children[e];(r==null?void 0:r.object)!==t&&(r&&this.remove(r),r=new ia(t),this.add(r),this.children.splice(e,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=t.matrix,r.hiddenMatrix=t.hiddenMatrix),r.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return d4e(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},_g=new X,Sg=new X,Zb=new ft,Toe=[new X(-1,1,1),new X(-1,-1,1),new X(1,-1,1),new X(1,1,1),new X(-1,1,-1),new X(-1,-1,-1),new X(1,-1,-1),new X(1,1,-1)],h4e=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],f4e=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],yX=(e,t,r)=>{e.updateEntityBoxSize(_g,Sg),Zb.copy(t).multiply(e.matrixWorld),Sg.x===0&&Sg.y===0&&Sg.z===0?r.push(new X(_g.x,_g.y,_g.z).applyMatrix4(Zb)):Toe.forEach(n=>{r.push(n.clone().multiply(Sg).add(_g).applyMatrix4(Zb))})},bX=class extends Oi{constructor(){super(...arguments),this.matrix=new ft,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new ft().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let n=[];return r===!0?e.traverseEntity(i=>{if(i.visible||i.cloner&&i.data.visible){if(!("geometry"in i)){n.push(new X);return}yX(i,t,n)}}):yX(e,t,n),this.setFromPoints(n)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(Zb.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Sg).multiplyScalar(.5),this.getCenter(_g),Zb.copy(this.matrix).setPosition(_g),this.vertices=Toe.map(e=>e.clone().multiply(Sg).applyMatrix4(Zb))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=h4e.map(([e,t])=>new Yl(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new X))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=f4e.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},dp={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},p4e=class extends Fne{constructor(){super()}getPoints(e=12){let t=[],r,n=this.getCurveLengths(),i=n[n.length-1]/n.length;for(let o=0,a=this.curves;o<a.length;o++){let s=a[o],l=o===0?n[o]:n[o]-n[o-1],u=Math.ceil(e*l/i),d=s.getPoints(u);for(let c=0;c<d.length;c++){let h=d[c];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},lz=.001;function uz(e,t,r){return t.clone().sub(e).cross(t.clone().sub(r)).length()<=lz}function FB(e,t){let r=new X(...e.position),n=new X(...e.controlNext.position),i=new X(...t.controlPrevious.position),o=new X(...t.position);return uz(r,n,o)&&uz(r,i,o)}function Eoe(e){let t=e.points.map(d=>new X(...d.data.position)),r=[e.points[0]],n=new X(...r[0].data.position);for(let d=0;d<e.points.length-1;d++)uz(n,t[d],t[d+1])||(r.push(e.points[d]),n=t[d]);r.push(e.points[e.points.length-1]);let i=e.isClosed,o=r.length-(i?0:1),a=r.length,s=[];for(let d=0;d<a;d++){let c=r[d].data,h=new X(...c.position),f=new X(...c.controlPrevious.position),g=new X(...c.controlNext.position),y={position:h,baseRoundness:c.roundness,controlPrevious:f,controlNext:g};if(c.roundness===0||!e.isClosed&&(d===0||d===a-1)){s[d]={...y,removedLength:0};continue}let m=i&&d==0?a-1:d-1,p=i&&d==a-1?0:d+1,v=r[m].data,b=r[p].data,x=new X(...v.position),_=new X(...b.position),A=x.clone().sub(h).normalize(),M=_.clone().sub(h).normalize();Object.assign(y,{prevDir:A,nextDir:M});let T=FB(v,c),C=FB(c,b);if(!T||!C)s[d]={...y,removedLength:0};else{let E=A.clone().add(M).normalize(),D=E.clone().cross(A).length()/A.dot(E);s[d]={...y,tan:D,removedLength:c.roundness/D}}}for(let d=0;d<o;d++){let c=d,h=i&&d===a-1?0:d+1,f=s[c],g=s[h];if(f.removedLength!==0||g.removedLength!==0){let y=f.position.distanceTo(g.position);f.removedLength=Math.min(f.removedLength,y/2),g.removedLength=Math.min(g.removedLength,y/2)}}let l=[];for(let d=0;d<o;d++){let c=d,h=i&&d===a-1?0:d+1,f=s[c],g=s[h],y=null;if(!FB(r[c].data,r[h].data))f.position.distanceTo(g.position)>lz&&(y=new w2(f.position,f.controlNext,g.controlPrevious,g.position));else{let m=f.position.clone(),p=g.position.clone();(f.removedLength!==0||g.removedLength!==0)&&(f.nextDir&&m.add(f.nextDir.clone().setLength(f.removedLength)),g.prevDir&&p.add(g.prevDir.clone().setLength(g.removedLength))),m.distanceTo(p)>lz&&(y=new w2(m,m.clone().lerp(p,.3),p.clone().lerp(m,.3),p))}l[2*d+1]=y}for(let d=0;d<a;d++){let c=s[d];if(c.removedLength===0){l[2*d]=null;continue}let h=c.position,f=c.prevDir.clone().multiplyScalar(c.removedLength).add(h),g=c.nextDir.clone().multiplyScalar(c.removedLength).add(h),y=c.tan*c.removedLength,m=c.prevDir.clone().add(c.nextDir).normalize(),p=f.clone().lerp(g,.5),v=f.distanceTo(g)/2,b=m.clone().multiplyScalar(Math.sqrt(Math.pow(y,2)-Math.pow(v,2))).add(p),x=m.clone().multiplyScalar(-y).add(b),_=h.distanceTo(x)/h.distanceTo(p),A=c.prevDir.clone().multiplyScalar(_*h.distanceTo(f)).add(h),M=A.clone().lerp(x,2),T=f.clone().lerp(A,4/3),C=g.clone().lerp(M,4/3);l[2*d]=new w2(f,T,C,g)}let u=new p4e;return l.forEach(d=>{d&&u.add(d)}),u}var jr;(e=>{function t(r){return r&&r.__isEntity}e.is=t})(jr||(jr={}));var rh=e=>jr.is(e),m4e={type:"completeState",isfromEntity:!0},g4e=["x","y","z"],zB=new X,v4e=new X().set(0,1,0),_j=e=>class extends wj(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new bX,this._recursiveBBox=new bX,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let r=this.children[t];if(jr.is(r))return r}entityChildrenCount(){let t=this.children.length;for(;t--;)if(jr.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let r=t.parent;if(jr.is(r))t=r;else return}return t}forInstancesRec(t){this.instances.forEach(r=>{r.disposed||t(r),r.forInstancesRec(t)})}super_Entity(t,r){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,r,n=!1){if(!(this.data.states.length===0&&!n)){for(let i of this.data.states)Ng.toOps(this.data,i.data).forEach(o=>{let a=C5.replaceProps(o,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,r)});if(t!==null){let i=this.data.states.data(t);i&&(this.dataPatched=Ng.patch(this.data,i),Ng.toOps(this.data,i).forEach(o=>{this.updateByPatchedOp(o,this.dataPatched,r)}))}n&&this.updateTransformState(this.dataPatched,r),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,r){t.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{rh(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let r;return this.traverseEntity(n=>{n.uuid===t&&(r=n)}),r}traverseSortNextHelper(){let t=this.parent;if(t){let r=t.children,n=r.indexOf(this)+1;if(jr.is(r[n]))return r[n];if(jr.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&jr.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let r=this;for(;t>0&&r!==null;)r=r.parent,t-=1;return r}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let r=this.parent;for(;r;){if(t===r)return!0;r=r.parent}return!1}countToAccestor(t){let r=0,n=this;for(;n!==t;){if(n===null)return-1;n=n.parent,r+=1}return r}forEachEntity(t){for(let r of this.children)rh(r)&&t(r)}traverseEntityAncestors(t){this.traverseAncestors(r=>{jr.is(r)&&t(r)})}traverseConcreteEntity(t,r=0){if(t(this,r)!==!0)for(let n of this.children)rh(n)&&n.isConcreteEntity&&n.traverseEntity(t,r+1)}traverseEntity(t,r=0){if(t(this,r)!==!0)for(let n of this.children)rh(n)&&n.traverseEntity(t,r+1)}traverseVisibleEntity(t){t(this);for(let r of this.children)rh(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,r=!1){return super.copy(t,r),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>rh(t))}isAncestorOf(t){if(this.uuid===t)return!1;let r=!1;return this.traverseEntity(n=>{n.uuid===t&&(r=!0)}),r}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x*Ht.RAD2DEG,this.rotation.y*Ht.RAD2DEG,this.rotation.z*Ht.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return M5(r,t)}getTransformValues(t,r,n){return r[t].map((i,o)=>(n==null?void 0:n.shared.getVariable(i,[this.uuid,t,g4e[o]]))??i)}updateTransformState(t,r){let n=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,r)),n=!0),t.rotation&&(zB.fromArray(this.getTransformValues("rotation",t,r)).multiplyScalar(Ht.DEG2RAD),this.rotation.setFromVector3(zB),n=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,r)),n=!0),t.hiddenMatrix!==void 0&&(n=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Nx.identity)),n&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),n}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)jr.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{jr.is(t)&&t.disposeRecursively()})}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return M5(r,t)}updateByObjUpdateOp(t,r){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},r,!1)}updateByOp(t,r,n,i){let o=this.data;this.data=r;let a=t,s=Vl(t.path,["states","*"]);if(s!==null){if(t.type===0){let[l]=s;if((this==null?void 0:this.stateSelection)===l){let u={...t.props};if(delete u.name,Object.values(t.props).some(d=>d===void 0)){let d=this.data;if(d!==void 0){let c=La.zoom(d,t.path.slice(2));if(c)for(let h in t.props)t.props[h]===void 0&&h in c&&(u[h]=c[h])}}a={...t,props:u,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:d,...c}=l;l=c}if(t.props.material!==void 0&&"material"in l){let{material:d,...c}=l;l=c}let u=La.removeOverridden(t.path,t.props,l);a={...t,props:u}}}if(this.updateByPatchedOpBase(a,Ng.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),n),Vl(t.path,["overrides"])){let l=[],u=[...t.path];for(l.push(u[1]),u.splice(0,2);u.length>0&&u[0]==="descendants";)l.push(u[1]),u.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let d of Object.keys(t.props)){l[l.length-1]=d;let c=n.scene.findInstance([this.uuid,...l]);c&&(c.overrideData=t.props[d],c.updateState(Tp.apply(c.component.data,c.overrideData),n))}}else{let d=n.scene.findInstance([this.uuid,...l]);if(d){let c=La.zoom(d.component.data,u);if(t={...t,path:u},t.type===0){let h=t.props;if(c)for(let[f,g]of Object.entries(t.props))g===void 0&&(h===t.props&&(h={...t.props}),h[f]=c[f]);t={...t,props:h}}d.overrideData=tO.resolve(r.overrides,l),d.updateByOp(t,na.applySimple(d.data,t),n,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let u;for(let d of cp.rootOverrideProps)d in t.props&&(u===void 0&&(u={}),u[d]=t.props[d]);u&&(l={...t,props:u})}else for(let u of cp.rootOverrideProps)if(Vl(t.path,[u])){l=t;break}l!==void 0&&this.instances.forEach(u=>{if(u.isInstanceRoot){let d=Tp.filterOp(u.overrideData,l);d&&u.updateByOp(d,na.applySimple(u.data,d),n,!0)}}),this.instances.forEach(u=>{if(!u.isInstanceRoot){let d=Tp.filterOp(u.overrideData,t);if(d){let c;o===u.data&&t===d?c=r:c=na.applySimple(u.data,d),u.updateByOp(d,c,n,!0)}}})}}updateByPatchedOpBase(t,r,n){if(this.dataPatched=r,t.path.length===0&&t.type===0)t.props.type!==void 0&&!b0.is(t.props.type)&&dp.changeEntityProptotype(this,r,n);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){dp.changeEntityProptotype(this,r,n);for(let i of this.children)jr.is(i)&&i.updateVisible(n.scene)}this.updateByPatchedOp(t,r,n)}updateByPatchedOp(t,r,n){if(t.path.length===0&&t.type===0&&this.updateState(t.props,n),Vl(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),Vl(t.path,["cloner"])!==null){let i=na.drop(t,1);i.path.length===0&&i.type===0&&i.props.disabled===!0?this.setFromClonerState(null,n):this.cloner?this.cloner.updateState(r.cloner,n.scene):(this.setFromClonerState(r.cloner,n),this.expandCloner(n.scene)),this.updateVisible(n.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var g,y,m,p,v;let r=((g=this._updatedPathSnapping)==null?void 0:g.pathId)??this.dataPatched.pathSnapping.pathId,n=((y=this._updatedPathSnapping)==null?void 0:y.slide)??this.dataPatched.pathSnapping.slide??0,i=((m=this._updatedPathSnapping)==null?void 0:m.offset)??this.dataPatched.pathSnapping.offset??0,o=((p=this._updatedPathSnapping)==null?void 0:p.orientation)??this.dataPatched.pathSnapping.orientation;if(r===null)return;let a=t.find(r);if(!a||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let s=a.data;if(s.geometry.path.points.length<=1)return;let l=Eoe(s.geometry.path),u=(n+i)%1;n+i===1&&u===0&&(u=1);let d=l.getPointAt(u);if(d===null)return;let c=this.parent?(v=this.parent)==null?void 0:v.matrixWorld:new ft;a.updateMatrixWorld();let h=new ft().multiplyMatrices(c.clone().invert(),a.matrixWorld);d.applyMatrix4(h);let f={position:d.toArray(),rotation:s.rotation};if(o==="tangential"){let b=new ft().extractRotation(a.matrixWorld),x=l.getTangentAt(u).applyMatrix4(b).add(d),_=new ft().lookAt(d,x,v4e),A=zB.setFromEuler(new So().setFromRotationMatrix(_)).multiplyScalar(Ht.RAD2DEG);f={...f,rotation:A.toArray()}}this.updateTransformState(f),this.traverseEntity(b=>{b._cameraType&&b.dispatchEvent(m4e)})}updateVisible(t){var n;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((n=this.dataPatched.cloner)==null?void 0:n.hideBase)!==!0),!t)return;let r=!1;this.traverseEntity(i=>{if(i.data.type==="Splat")return r=!0,!0}),r&&t.reloadSplats()}updateState_Entity(t,r){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(r==null?void 0:r.scene),this.resetBBoxNeedsUpdate()),r&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,r),this.updateVisible(r.scene)),this.updateTransformState(t,r)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof dp.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,r){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new dp.Cloner(this,t),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,r.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}},Poe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);r.thetaLength=Ht.clamp(r.thetaLength,0,360);let n=r.width/2,i=r.radiusTop??n,o=r.radiusBottom??n;return i===o?(i=n,o=n):i>o?(i=n,o=o*n/i):(i=i*n/o,o=n),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),radiusTop:i,radiusBottom:o})}}static build(e){let{width:t,depth:r,height:n,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l,radiusTop:u,radiusBottom:d,cornerRadius:c,cornerSegments:h,hollow:f}=e.parameters,g;return l===0?(g=new Jt,g.setAttribute("position",new Rt([],3))):c||f?g=new Doe(u,d,n,i,o,a,s,l*Math.PI/180,c,c,h,f):g=new zV(u,d,n,i,o,a,s,l*Math.PI/180),g.scale(1,1,r/t),Object.assign(g,{userData:{...e,type:"CylinderGeometry"}})}};function Of(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function xX(e){return new Ae(e.y,-e.x)}var Doe=class extends Jt{constructor(e,t,r,n,i,o,a,s,l,u,d,c,h=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,o=o!==void 0?o:!1,a=a!==void 0?a:0,s=s!==void 0?s:Math.PI*2,o&&(l=0,u=0);let f=[],g=[],y=[],m=[],p=0,v=r/2,b=new X,x=new X;h&&e==0&&(e=l),h&&t==0&&(t=u);let _=new Ae(e,v),A=new Ae(t,-v),M=null,T=null,C=null,E=null,D=_.clone().sub(A),I=0,k=0,L=0;c>0&&(I=Math.min(e,t)*(1-c),k=e-I,L=t-I);let U=_.clone();U.x-=I;let W=Math.PI-D.angle(),G=D.angle(),z=Math.tan(G/2),V=Math.tan(W/2),j=z+V,H=c?j:V,Y=c?j:z;if(l=Math.min(l,(e-k)/H,D.length()/j),u=Math.min(u,(t-L)/Y,D.length()/j),l>0){let ae=l/z;M=_.clone().sub(new Ae(ae,l)),c&&(C=M.clone(),C.x-=I-j*l),_.sub(D.clone().setLength(ae))}if(u>0){let ae=u/V;T=A.clone().sub(new Ae(ae,-u)),A.add(D.clone().setLength(ae)),c&&(E=T.clone(),E.x-=I-j*u,U.sub(D.clone().setLength(ae)))}D=_.clone().sub(A);let Q=D.length()<.5,$=[];for(let ae=0;ae<=n;ae++){let ie=[],le=ae/n,se=le*s+a,re=new Ae(Math.sin(se),Math.cos(se));E&&T?(ne(ie,le,re,W,u,E,-1,!0),ne(ie,le,re,G,u,T,-1,!1)):T?(Z(ie,re,T.x,0,-1),ne(ie,le,re,G,u,T,-1,!1)):o||Z(ie,re,t,L,-1);let ye=xX(D).normalize();if(Of(ye,re,b),!Q)for(let be=0;be<=i;be++){let _e=be/i,Se=D.clone().multiplyScalar(_e).add(A);Of(Se,re,x),g.push(x.x,x.y,x.z),y.push(b.x,b.y,b.z),m.push(le,.5+x.y/r),ie.push(p++)}if(C&&M?(ne(ie,le,re,W,l,M,1,!1),ne(ie,le,re,G,l,C,1,!0)):M?(ne(ie,le,re,W,l,M,1,!1),Z(ie,re,M.x,0,1)):o||Z(ie,re,e,k,1),c&&!Q){let be=xX(D).multiplyScalar(-1).normalize();Of(be,re,b);for(let _e=0;_e<=i;_e++){let Se=_e/i,Fe=D.clone().multiplyScalar(-Se).add(U);Of(Fe,re,x),g.push(x.x,x.y,x.z),y.push(b.x,b.y,b.z),m.push(le,.5+x.y/r),ie.push(p++)}}c&&!o&&ie.push(ie[0]),$.push(ie)}for(let ae=0;ae<$.length-1;ae++)for(let ie=0;ie<$[0].length-1;ie++){if(o&&c&&ie==i)continue;let le=$[ae][ie],se=$[ae+1][ie],re=$[ae+1][ie+1],ye=$[ae][ie+1],be=g[re*3+0],_e=g[re*3+2];f.push(le,se,ye),(be!=0||_e!=0)&&f.push(se,re,ye)}s<Math.PI*2&&(ce(-1,$[0],a),ce(1,$[$.length-1],a+s)),this.setIndex(f),this.setAttribute("position",new Rt(g,3)),this.setAttribute("normal",new Rt(y,3)),this.setAttribute("uv",new Rt(m,2));function ne(ae,ie,le,se,re,ye,be,_e){for(let Se=0;Se<d+1;Se++){let Fe=Se/d,Re=be<0?Fe:1-Fe;_e&&(Re-=1),Re*=se;let Le=new Ae(Math.sin(Re),Math.cos(Re)*be),rt=Le.clone().multiplyScalar(re).add(ye);Of(rt,le,x),g.push(x.x,x.y,x.z),Of(Le,le,b),y.push(b.x,b.y,b.z),m.push(ie,.5+x.y/r),ae.push(p++)}}function Z(ae,ie,le,se,re){let ye=new X,be=new Ae,_e=[le,se];re<0&&_e.reverse();for(let Se of _e)be.set(Se,v*re),Of(be,ie,ye),g.push(ye.x,ye.y,ye.z),y.push(0,re,0),m.push(.5,.5),ae.push(p++)}function ce(ae,ie,le){let se=new Ae(Math.sin(le),Math.cos(le)),re=new Ae(-Math.cos(le),Math.sin(le)),ye=new X,be=ae<0?(Fe,Re,Le)=>f.push(Fe,Re,Le):(Fe,Re,Le)=>f.push(Fe,Le,Re),_e=new Ae((e+t+k+L)/4,0);Of(_e,se,ye),g.push(ye.x,ye.y,ye.z),y.push(re.x,0,re.y),m.push(.5,.5);let Se=p++;for(let Fe of ie){let Re=g.slice(Fe*3,Fe*3+3);g.push(...Re),y.push(re.x,0,re.y);let Le=m.slice(Fe*2,Fe*2+2);m.push(...Le),p++}for(let Fe=Se+1;Fe<p-1;Fe++)be(Se,Fe,Fe+1);be(Se,p-1,Se+1)}}},y4e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return r.thetaLength=Ht.clamp(r.thetaLength,0,360),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,depth:r,height:n,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l,cornerRadiusTop:u,cornerRadiusBottom:d,cornerSegments:c}=e.parameters,h;return l===0?(h=new Jt,h.setAttribute("position",new Rt([],3))):u>0||d>0||l<360?h=new Doe(0,t/2,n,i,o,a,s,l*Math.PI/180,u,d,c,0,!0):h=new Une(t/2,n,i,o,a),h.scale(1,1,r/t),Object.assign(h,{userData:{...e,type:"ConeGeometry"}})}},b4e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,widthSegments:i,heightSegments:o,depthSegments:a,cornerRadius:s,cornerSegments:l}=e.parameters,u;return s==0?u=new nd(t,r,n,i,o,a):u=new x4e(t,r,n,i,o,a,s,l),Object.assign(u,{userData:{...e,type:"CubeGeometry"}})}},UB=Math.PI/2,x4e=class extends Jt{constructor(e=1,t=1,r=1,n=1,i=1,o=1,a=0,s=4){super(),this.type="BoxGeometry";let l=this;n=Math.floor(n),i=Math.floor(i),o=Math.floor(o),s=Math.floor(s),a=Math.min(a,e/2,t/2,r/2);let u=[],d=[],c=[],h=[],f=0,g=0;y("z","y","x",-1,-1,r,t,e,o,i,0),y("z","y","x",1,-1,r,t,-e,o,i,1),y("x","z","y",1,1,e,r,t,n,o,2),y("x","z","y",1,-1,e,r,-t,n,o,3),y("x","y","z",1,-1,e,t,r,n,i,4),y("x","y","z",-1,-1,e,t,-r,n,i,5),a>0&&(m("z","y","x",-1,-1,1,r,t,e,o,0),m("z","y","x",1,-1,-1,r,t,e,o,1),m("z","y","x",-1,1,-1,r,t,e,o,1),m("z","y","x",1,1,1,r,t,e,o,0),m("x","y","z",-1,-1,-1,e,t,r,n,0),m("x","y","z",1,-1,1,e,t,r,n,1),m("x","y","z",-1,1,1,e,t,r,n,0),m("x","y","z",1,1,-1,e,t,r,n,1),m("y","x","z",-1,-1,1,t,e,r,i,0),m("y","x","z",1,-1,-1,t,e,r,i,1),m("y","x","z",1,1,1,t,e,r,i,1),m("y","x","z",-1,1,-1,t,e,r,i,0),p(1,1,1),p(-1,1,1),p(1,-1,1),p(-1,-1,1),p(1,1,-1),p(-1,1,-1),p(1,-1,-1),p(-1,-1,-1)),this.setIndex(u),this.setAttribute("position",new Rt(d,3)),this.setAttribute("normal",new Rt(c,3)),this.setAttribute("uv",new Rt(h,2));function y(v,b,x,_,A,M,T,C,E,D,I){let k=(M-2*a)/E,L=(T-2*a)/D,U=M/2-a,W=T/2-a,G=C/2,z=E+1,V=D+1,j=0,H=0,Y=new X;for(let Q=0;Q<V;Q++){let $=Q*L-W;for(let ne=0;ne<z;ne++){let Z=ne*k-U;Y[v]=Z*_,Y[b]=$*A,Y[x]=G,d.push(Y.x,Y.y,Y.z),Y[v]=0,Y[b]=0,Y[x]=C>0?1:-1,c.push(Y.x,Y.y,Y.z),h.push(ne/E),h.push(1-Q/D),j+=1}}for(let Q=0;Q<D;Q++)for(let $=0;$<E;$++){let ne=f+$+z*Q,Z=f+$+z*(Q+1),ce=f+($+1)+z*(Q+1),ae=f+($+1)+z*Q;u.push(ne,Z,ae),u.push(Z,ce,ae),H+=6}l.addGroup(g,H,I),g+=H,f+=j}function m(v,b,x,_,A,M,T,C,E,D,I){let k=(T-2*a)/D,L=T/2-a,U=C/2-a,W=E/2,G=D+1,z=0,V=0,j=new X,H=new X;for(let Y=0;Y<s+1;Y++){let Q=Y/s*UB,$=Math.sin(Q)*a,ne=(1-Math.cos(Q))*a,Z=Math.sin(Q),ce=Math.cos(Q);j[b]=(U+$)*A,j[x]=(W-ne)*M,H[v]=0,H[b]=Z*Math.sign(j[b]),H[x]=ce*Math.sign(j[x]);for(let ae=0;ae<G;ae++){let ie=ae*k-L;j[v]=ie*_,d.push(j.x,j.y,j.z),c.push(H.x,H.y,H.z),h.push(ae/D),h.push(0),z+=1}}for(let Y=0;Y<s;Y++)for(let Q=0;Q<D;Q++){let $=f+Q+G*Y,ne=f+Q+G*(Y+1),Z=f+(Q+1)+G*(Y+1),ce=f+(Q+1)+G*Y;u.push($,ne,ce),u.push(ne,Z,ce),V+=6}l.addGroup(g,V,I),g+=V,f+=z}function p(v,b,x){let _=new X,A=new X(e/2,t/2,r/2);A.subScalar(a);let M=[],T=v*b*x>0?(E,D,I)=>u.push(E,D,I):(E,D,I)=>u.push(E,I,D);for(let E=0;E<=s;E++){let D=[],I=UB*(1-E/s),k=Math.cos(I),L=Math.sin(I),U=0;for(let W=0;W<=E;W++){let G=Math.cos(U),z=Math.sin(U);_.x=k*G,_.y=L,_.z=k*z;let V=A.clone().addScaledVector(_,a);d.push(v*V.x,b*V.y,x*V.z),c.push(v*_.x,b*_.y,x*_.z),h.push(0,0),D.push(f++),U+=UB/E}M.push(D)}let C=M.length-1;for(let E=0;E<C;E++){let D=M[E],I=M[E+1],k=D.length-1;T(D[0],I[1],I[0]);for(let L=1;L<=k;L++)T(D[L-1],D[L],I[L]),T(D[L],I[L+1],I[L])}}}},Sj=class extends Jt{constructor(e=[],t=[],r="",n=1,i=.2,o=4){super(),this.type="PolyhedronGeometryRound";let a=[],s=[],l=[];u(),d(),this.setAttribute("position",new Rt(a,3)),this.setAttribute("normal",new Rt(l,3)),this.setAttribute("uv",new Rt(s,2));return;function u(){var G;i=Math.min(1-1e-5,i),i==0&&(o=0);let c={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],h=new X,f=h.clone(),g=new ra,y=i*n,m=n-y,p=o+1,v=new X,b=(z,V)=>v.subVectors(z,V).normalize(),x=(z,V)=>Array(z).fill(void 0).map(V),_=x(e.length/3,(z,V)=>new X().fromArray(e,V*3).setLength(n)),A=[],M=1e6;for(let z=0;z<_.length;z++){let V=_[z],j=[],H,Y,Q,$=1e10,ne=-1;for(;(ne=t.indexOf(z,ne+1))!=-1;){let ie=ne-ne%3;H=t[ie+(ne+1)%3],Y=t[ie+(ne+2)%3],Q=V.distanceToSquared(_[H]),$=Math.min($,Q),j.push([H,Y,Q])}$+=1e-6;let Z=[],ce=0,ae=j.length;for(let ie=0;ie<ae;ie++){[H,Y,Q]=j[ce];let le=((G=A[H])==null?void 0:G.includes(z))==!0;Q<=$&&Z.push(H+ +le*M),ce=j.findIndex(se=>se[0]==Y)}A.push(Z)}let T=[];{let z=0,V=0,j,H,Y=c==3;for(let Q=0;Q<=o;Q++){j=Q*(Q+1)/2,H=(Q+1)*(Q+2)/2;for(let $=0;$<o-Q;$++)[z,V]=[j+$+Q+2,H+$+Q+3],T.push(j,H,...Y?[V,j]:[z,H],V,z),[j,H]=[z,V];T.push(j,H,j+o+2)}}let C=h.clone(),E=h.clone(),D=h.clone(),I=h.clone(),k=h.clone(),L=[],U=x(_.length,()=>x(c,()=>h.clone()));for(let z=0;z<_.length;z++){h.copy(_[z]).normalize(),C.copy(h).multiplyScalar(m);let V=A[z];for(let Z=0;Z<V.length;Z++){let ce=V[Z],ae=V[(Z+1)%c];g.setFromPointsAndIndices(_,z,ce%M,ae%M),g.b.sub(g.a).setLength(1e10).add(g.a),g.c.sub(g.a).setLength(1e10).add(g.a),g.closestPointToPoint(C,U[z][Z])}let j=[],H=[],Y=[],Q=new X;o==0&&[...U[z]].reduce((Z,ce)=>Z.add(ce),Q).multiplyScalar(1/c);for(let Z=0;Z<c;Z++){let ce=[],ae=(Z-1+c)%c,ie=U[z][ae],le=U[z][Z];h.copy(ie).sub(C),f.copy(le).sub(C);let se=C.angleTo(h),re=h.angleTo(f),ye=Math.cos(se)*y;o==0?E.copy(Q):E.copy(C).setLength(m+ye),H.push(ye);let be=[E,ie,le];for(let _e=0;_e<2;_e++){let Se=be[_e],Fe=be[_e+1];I.subVectors(Se,C),k.subVectors(Fe,C),D.crossVectors(I,k).normalize();for(let Re=0;Re<p;Re++){let Le=[se,re][_e]*Re/p;h.copy(I).applyAxisAngle(D,Le).add(C),j.push(h.clone()),_e&&(b(h,C),ce.push([Re==0?Se:h.clone(),v.clone()]))}_e&&(b(Fe,C),ce.push([Fe,v.clone()]))}Y.push(ce)}L.push(Y);let $=2*p,ne=2;for(let Z=0;Z<c;Z++){let ce=$*Z,ae=$*((Z+1)%c),ie=[j[ce]];for(let se=1;se<p;se++){I=j[ce+se],k=j[ae+se],ie.push(I);for(let re=1,ye=se-ne+1;re<=ye;re++)h.lerpVectors(I,k,re/(ye+1)),h.sub(C).setLength(H[Z]).add(C),ie.push(h.clone());ie.push(k)}for(let se=0;se<p;se++)ie.push(j[se+p+ce]);ie.push(j[ae+p]);let le=T.map(se=>ie[se]);a.push(...le.map(se=>[se.x,se.y,se.z]).flat()),l.push(...le.map(se=>(b(se,C),[v.x,v.y,v.z])).flat())}}let W=[];for(let z=0;z<A.length;z++)for(let V=0;V<c;V++){let j=A[z][V];if(j<M){let H=A[j].findIndex($=>$%M==z),Y=L[z][V],Q=L[j][H];for(let $=0;$<p;$++){let ne=Y[$],Z=Q[p-$],ce=Y[$+1],ae=Q[p-($+1)];[ne,Z,ce,ce,Z,ae].forEach(ie=>{a.push(ie[0].x,ie[0].y,ie[0].z),l.push(ie[1].x,ie[1].y,ie[1].z)})}W.push(Y[0][0],Q[p][0],Y[p][0],Q[0][0])}}for(;W.length;){let z,V,j,H;[z,V]=W.splice(0,2);let Y=[z];for(;z!=V;)Y.push(V),j=W.indexOf(V),H=j%2,V=W.splice(j-H,2)[1-H];v.subVectors(Y[0],Y[1]).cross(h.subVectors(Y[0],Y[2])).normalize();let Q=v.dot(Y[0])<0;Q&&v.negate();for(let $=1;$<=Y.length-2;$++)[Y[$+ +Q],Y[$+1-+Q],Y[0]].forEach(ne=>{a.push(ne.x,ne.y,ne.z),l.push(v.x,v.y,v.z)})}}function d(){let c=new X;for(let A=0;A<a.length;A+=3){c.x=a[A+0],c.y=a[A+1],c.z=a[A+2];let M=x(c)/2/Math.PI+.5,T=_(c)/Math.PI+.5;s.push(M,1-T)}let h=new X,f=new X,g=new X,y=new X,m=new Ae,p=new Ae,v=new Ae,b=(A,M,T,C)=>{C<0&&A.x===1&&(s[M]=A.x-1),T.x===0&&T.z===0&&(s[M]=C/2/Math.PI+.5)};for(let A=0,M=0;A<a.length;A+=9,M+=6){h.set(a[A+0],a[A+1],a[A+2]),f.set(a[A+3],a[A+4],a[A+5]),g.set(a[A+6],a[A+7],a[A+8]),m.set(s[M+0],s[M+1]),p.set(s[M+2],s[M+3]),v.set(s[M+4],s[M+5]),y.copy(h).add(f).add(g).divideScalar(3);let T=x(y);b(m,M+0,h,T),b(p,M+2,f,T),b(v,M+4,g,T)}for(let A=0;A<s.length;A+=6){let M=s[A+0],T=s[A+2],C=s[A+4],E=Math.max(M,T,C),D=Math.min(M,T,C);E>.9&&D<.1&&(M<.2&&(s[A+0]+=1),T<.2&&(s[A+2]+=1),C<.2&&(s[A+4]+=1))}function x(A){return Math.atan2(A.z,-A.x)}function _(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}}static fromJSON(e){return new Sj(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},w4e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,detail:i,corner:o,cornerSides:a}=e.parameters,s=i===0&&o!==0?new Ooe(t*.5,o,a):new Vne(t*.5,i);return s.scale(1,r/t,n/t),Object.assign(s,{userData:{...e,type:"DodecahedronGeometry"}})}},Ooe=class extends Sj{constructor(e=1,t=.2,r=4){let n=(1+Math.sqrt(5))/2,i=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],s="DodecahedronGeometry";super(o,a,s,e,t,r),this.type=s}static fromJSON(e){return new Ooe(e.radius,e.corner,e.cornerSides)}},M_=1e-12,Aj=class{constructor(e){this.position=new Ae,this.startPosition=new Ae,this.uuid=Ht.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Aj(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},cz=class extends Aj{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new cz(this.parent).copy(this)}},$b=class extends Aj{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new cz(this),new cz(this))}static create(e,t){let r=new $b(e,new Ae(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,n=this.controls.length;r<n;r++){let i=this.controls[r];this.position.distanceTo(i.position)<=t?i.position.copy(this.position):i.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new $b(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,n;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(n=this.curveAfter)==null?void 0:n.getTangentAt(0);return[e,t]}computeNormals(e=new Ae,t=new Ae){let[r,n]=this.computeTangents();return r&&n&&(wX(r,e),wX(n,t)),[e,t]}computeTangent(e=new Ae){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new Ae){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function wX(e,t=new Ae){let r=e.length();return t.set(-e.y/r,e.x/r)}var Mj=e=>e,T1=new Ae,aI=new Ae,_4e=new Ae,S4e=new Ae,A4e=new Ae,M4e=new Ae,Roe=new X,Ioe=new X;function C4e(e){let t=new Ae;t.addVectors(e.v0,T1.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new Ae;return r.addVectors(e.v2,aI.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Ou(e.v0,t,r,e.v2)}function tS(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function T4e(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function E4e(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function Loe(e,t,r){let n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),i=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),o=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((i*i+n*n-o*o)/(2*i*n))}function P4e(e,t,r){return SX(e,t)&&SX(t,r)&&dz(e.position,t.position,r.position)}function dz(e,t,r){return T1.copy(t).sub(e).cross(aI.copy(r).sub(e))===0}function D4e(e,t,r,n,i){let o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(o/2,2))*(e.y-t.y)/o,u=Math.sqrt(Math.pow(r,2)-Math.pow(o/2,2))*(t.x-e.x)/o;return n.set(s+l,a+u),i.set(s-l,a-u),[n,i]}function O4e(e,t,r){let n=e.distanceTo(r),i=t.distanceTo(r);return n<i?t:e}function R4e(e,t,r,n,i,o){let a=t.x-e.x,s=t.y-e.y,l=r.x-e.x,u=r.y-e.y,d=Math.sqrt((a+l)*(a+l)+(s+u)*(s+u)),c;return Loe(t,e,r)>Math.PI&&(d*=-1),tS(u,s)?c=(s+u)*(n/d-.5)*8/3/(a-l):c=(a+l)*(n/d-.5)*8/3/(u-s),i.set(t.x-c*s,t.y+c*a),o.set(r.x+c*u,r.y-c*l),[i,o]}function _X(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function SX(e,t){return dz(e.position,e.controls[1].position,t.position)&&dz(e.position,t.controls[0].position,t.position)}function I4e(e,t,r,n,i=.5){let o=T1.subVectors(t,e).multiplyScalar(i).add(e),a=aI.subVectors(r,t).multiplyScalar(i).add(t),s=_4e.subVectors(n,r).multiplyScalar(i).add(r),l=o,u=S4e.subVectors(a,o).multiplyScalar(i).add(o),d=A4e.subVectors(s,a).multiplyScalar(i).add(a),c=s,h=M4e.subVectors(d,u).multiplyScalar(i).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,h.x,h.y,d.x,d.y,c.x,c.y,n.x,n.y]}function L4e(e,t,r=12,n=!0){let i=Ioe.set(0,0,0),o,a=0;for(let s=0;s<t.length;s++){let l=Mj(t[s]),u=T1,d=r0(l,r);for(let c=0;c<=d;c++)if(l instanceof Ou||l instanceof Vp||l instanceof Uu){if(l.getPoint(c/d,u),i.set(u.x,u.y,0),o!==void 0&&E4e(o,i))continue;o===void 0&&(o=Roe),o.copy(i),e.setXYZ(a,i.x,i.y,i.z),a++}}return n&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function B4e(e,t,r,n=12,i=!0){let o=Ioe.set(0,0,0),a=0,s=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let u,d=Mj(t[l]),c=T1,h=r0(d,n);s.push(h);for(let f=0;f<=h;f++)if(d instanceof Ou||d instanceof Vp||d instanceof Uu){if(d.getPoint(f/h,c),o.set(c.x,c.y,0),u==null?void 0:u.equals(o))continue;u===void 0?u=Roe:(e.setXYZ(a,u.x,u.y,u.z),a++,e.setXYZ(a,o.x,o.y,o.z),a++),u.copy(o)}}return i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),s}function AX(e,t=12,r=!1){let n=[];for(let i=0,o=e.length;i<o;i++){let a=e[i],s=0;if(r&&a.roundedCurveCorner!==void 0){let l=r0(a.roundedCurveCorner,t)*.5;i>0&&(n[i-1]+=l),s+=l}a.curveAfter!==void 0&&(s+=r0(a.curveAfter,t)),n.push(s)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(n[e.length-1]+=r0(e[0].roundedCurveCorner,t)*.5),n}function r0(e,t=12){return e&&e instanceof GR?t*2:e&&(e instanceof Uu||e instanceof kne)?1:e&&e instanceof FV?t*e.points.length:t}function N4e(e,t,r=12,n=!0){let i,o=0;for(let a=0;a<t.length;a++){let s=Mj(t[a]),l=r0(s,r),u=T1;for(let d=0;d<=l;d++)if(s instanceof Ou||s instanceof Vp||s instanceof Uu){if(s.getPoint(d/l,u),i!==void 0&&T4e(i,u,M_))continue;i===void 0&&(i=aI),i.copy(u),e.push(u.x,u.y),o++}}return tS(e[0],e[e.length-2],M_)&&tS(e[1],e[e.length-1],M_)&&(e.pop(),e.pop()),n&&o>1&&!(tS(e[o-1],e[1],M_)&&tS(e[o-2],e[0],M_))&&(e.push(e[0],e[1]),o++),e}var VB=new Ae,k4e=new Ae,F4e=new Ae,z4e=new Ae,U4e=new Ae,V4e=new Ae,gi=class extends RD{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new qs(new X(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Ht.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let n=new gi;return n.isClosed=e.isClosed,n.points=e.points.map(i=>$b.create(i.id,i.data)),typeof e.roundness=="number"&&(n.roundness=e.roundness),n.shapeHoles=e.shapeHoles.map(i=>gi.createFromState(i)),t!==void 0&&r!==void 0&&n.applySize(t,r),n.update(),n}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(n=>n.uuid===e);if(r<0){let n=t;for(let i=0,o=this.shapeHoles.length;i<o;i++){let a=this.shapeHoles[i],s=a.points.length,l=a.getPointIndexById(e);if(l<0)n+=s;else return l+n}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,n=this.shapeHoles.length;r<n;r++){let i=this.shapeHoles[r],o=e-t;if(o<=i.points.length-1)return i.points[o];t+=i.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,n=this.shapeHoles.length;r<n;r++){let i=this.shapeHoles[r],o=i.points.indexOf(e);if(o>=0)return t+o;t+=i.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=VB.set(e,t);for(let n=0,i=this.points.length;n<i;n++){let o=this.points[n];o.position.multiply(r),o.controls[0].position.multiply(r),o.controls[1].position.multiply(r)}for(let n=0,i=this.shapeHoles.length;n<i;n++)this.shapeHoles[n].applyScale(e,t);this._update()}createPoint(e,t=0,r=Ht.generateUUID()){let n;e instanceof Ae?n=e:n=new Ae(e,t);let i=new $b(r,n);return i.roundness=this.roundness,i}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let n=this.points[t];if(n.uuid===e)return n}for(let t=0,r=this.shapeHoles.length;t<r;t++){let n=this.shapeHoles[t].getPointByUuid(e);if(n)return n}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let n=r?this.roundedCurveDivisions:this.curveDivisions;return L4e(e,r?this.roundedCurves:this.curves,t,this.autoClose),n.reduce((i,o)=>i+o,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=AX(this.points,e,!1),this.roundedCurveDivisions=AX(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return B4e(e,this.curves,t,r,this.autoClose).reduce((n,i)=>n+i,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),N4e(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let n=t?this.roundedCurveDivisions:this.curveDivisions,i=0;t&&this.points[0].roundedCurveCorner!==void 0&&(i=r0(this.points[0].roundedCurveCorner,this.subdivision)*.5);let o=e-i;o<0&&(o+=n.reduce((a,s)=>a+s,0));for(let a=0,s=n.length;a<s;a++){let l=n[a];if(o<r+l)return[a,(o-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let n=this.points[e],i=this.points[e>=this.points.length-1?0:e+1],o=this.curveDivisions,a=o[e];if(_X(n,i)){let l=n.position.distanceTo(i.position);return n.position.distanceTo(VB.set(r.x,r.y))/l}let s=0;for(let l=0;l<e;l++)s+=o[l];return(t-s)/a}dispose(){}_applyCurveForPoint(e,t){_X(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let n=r.clone();e.roundedCurveBefore=n,t.roundedCurveAfter=n,e.roundedCurveCorner=void 0,this.roundedCurves.push(n)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,r=this.points.length;t<r;t++){let n=this.points[t];if(t===0)this.moveTo(n.position.x,n.position.y);else{let i=this.points[t-1];this._applyCurveForPoint(n,i)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],r=this.points[this.points.length-1];this._applyCurveForPoint(t,r)}if(this.points.length>2){let t=0;for(let r=0,n=this.points.length;r<n;r++){let i=this.points[r],o=this.points[r-1]??this.points[this.points.length-1],a=this.points[r+1]??this.points[0],s=i.roundness,l=o&&a&&P4e(o,i,a);if(!i.controlsMoved()&&s>0&&!l){let u=i.curveBefore,d=i.curveAfter;if(u===void 0||d===void 0)continue;let c=i.roundedCurveBefore,h=i.roundedCurveAfter,f=u.getLength(),g=d.getLength(),y=Math.min(s,f*.499),m=Math.min(s,g*.499),p=Math.min(y,m),v=1-p/f,b=p/g,x=u.getPointAt(v,VB),_=d.getPointAt(b,k4e);this._subSplitCurve(u,c,v,x,void 0),this._subSplitCurve(d,h,b,void 0,_);let A;if(this.useCubicForRoundedCorners){let M=Loe(x,i.position,_)/2,T=Math.tan(M)*x.distanceTo(i.position),[C,E]=D4e(x,_,T,F4e,z4e),D=O4e(C,E,i.position),[I,k]=R4e(D,x,_,T,U4e,V4e);A=new Ou(x.clone(),I.clone(),k.clone(),_.clone())}else A=new Vp(x.clone(),i.position.clone(),_.clone());i.roundedCurveCorner=A,this.roundedCurves.splice(r+t,0,A),t++}}}}_subSplitCurve(e,t,r,n,i){if(e instanceof Uu)n!==void 0&&t.v2.copy(n),i!==void 0&&t.v1.copy(i);else{let o=e,a=t,s=o.getUtoTmapping(r,0),l=I4e(o.v0,o.v1,o.v2,o.v3,s);return n!==void 0&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),i!==void 0&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return t}clone(){let e=new gi(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let n=0;n<t;n++){let i=n*7,o=e.points[i+0],a=e.points[i+1],s=e.points[i+2],l=e.points[i+3],u=e.points[i+4],d=e.points[i+5],c=e.points[i+6],h=new $b(Ht.generateUUID(),new Ae(o,a));h.controls[0].position.set(s,l),h.controls[1].position.set(u,d),h.roundness=c,this.points.push(h)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(n=>{let i=new gi;return i.fromJSON(n),i}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let r=(i,o)=>{o instanceof Ou&&o.v3.equals(i.position)&&i.controls[0].position.copy(o.v2)},n=i=>{let o=[],a,s;for(a=0,s=i.length;a<s;a++)i[a]instanceof Vp&&(i[a]=C4e(i[a]));for(a=0,s=i.length;a<s;a++){let d=i[a],c=a>0?i[a-1]:null,h;d instanceof Ou?(h=this.createPoint(d.v0),h.controls[1].position.copy(d.v1)):d instanceof Uu&&(h=this.createPoint(d.v1)),h!==void 0&&(c!==null&&r(h,c),o.push(h))}let l=i[i.length-1],u=!1;return l instanceof Ou?l.v3.equals(o[0].position)&&(o[0].controls[0].position.copy(l.v2),u=!0):l instanceof Uu&&l.v2.equals(o[0].position)&&(u=!0),this.isClosed=u,o};return this.points=n(e.curves),e instanceof RD&&(this.shapeHoles=e.holes.map(i=>{let o=new gi;return o.fromShape(i),o})),this.update(),this}updatePoint(e,t){let r=this.getPointByUuid(e);r&&(t.position!==void 0&&r.position.fromArray(t.position),t.roundness!==void 0&&(r.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var n;let r=(n=this.getPointByUuid(e))==null?void 0:n.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var n;let r=(n=this.getPointByUuid(e))==null?void 0:n.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},hz=Math.PI*2;function jB({x:e,y:t},r,n,i,o){return{x:e*r+i,y:t*n+o}}function j4e(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),n=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[{x:n-i*r,y:i+n*r},{x:o+a*r,y:a-o*r},{x:o,y:a}]}function MX(e,t,r,n){let i=e*n-t*r<0?-1:1,o=Math.min(1,Math.max(-1,e*r+t*n));return i*Math.acos(o)}function H4e(e,t,r,n,i,o,a,s,l,u){let d=Math.pow(i,2),c=Math.pow(o,2),h=Math.pow(a,2),f=Math.pow(s,2),g=d*c-d*f-c*h;g<0&&(g=0),g/=d*f+c*h,g=Math.sqrt(g)*(l===u?-1:1);let y=g*i/o*s,m=g*-o/i*a,p=y+(e+r)/2,v=m+(t+n)/2,b=(a-y)/i,x=(s-m)/o,_=(-a-y)/i,A=(-s-m)/o,M=MX(1,0,b,x),T=MX(b,x,_,A);return!u&&T>0&&(T-=hz),u&&T<0&&(T+=hz),{centerx:p,centery:v,ang1:M,ang2:T}}function G4e({px:e,py:t,cx:r,cy:n,rx:i,ry:o,largeArcFlag:a,sweepFlag:s}){let l=[];if(i===0||o===0)return[];let u=(e-r)/2,d=(t-n)/2;if(u===0&&d===0)return[];i=Math.abs(i),o=Math.abs(o);let c=Math.pow(u,2)/Math.pow(i,2)+Math.pow(d,2)/Math.pow(o,2);c>1&&(i*=Math.sqrt(c),o*=Math.sqrt(c));let h=H4e(e,t,r,n,i,o,u,d,a,s),{ang1:f,ang2:g}=h,{centerx:y,centery:m}=h,p=Math.abs(g)/(hz/4);Math.abs(1-p)<1e-7&&(p=1);let v=Math.max(Math.ceil(p),1);g/=v;for(let b=0;b<v;b++)l.push(j4e(f,g)),f+=g;return l.map(b=>{let{x,y:_}=jB(b[0],i,o,y,m),{x:A,y:M}=jB(b[1],i,o,y,m),{x:T,y:C}=jB(b[2],i,o,y,m);return{x1:x,y1:_,x2:A,y2:M,x:T,y:C}})}var gn;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(gn||(gn={}));var Vi;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Vi||(Vi={}));function dr(e,t){if(!e)throw t||"Assertion Failed!"}var $t=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,n){dr(e.vertLeq(t,r)&&e.vertLeq(r,n));var i=r.s-t.s,o=n.s-r.s;return i+o>0?i<o?r.t-t.t+(t.t-n.t)*(i/(i+o)):r.t-n.t+(n.t-t.t)*(o/(i+o)):0},e.edgeSign=function(t,r,n){dr(e.vertLeq(t,r)&&e.vertLeq(r,n));var i=r.s-t.s,o=n.s-r.s;return i+o>0?(r.t-n.t)*i+(r.t-t.t)*o:0},e.transEval=function(t,r,n){dr(e.transLeq(t,r)&&e.transLeq(r,n));var i=r.t-t.t,o=n.t-r.t;return i+o>0?i<o?r.s-t.s+(t.s-n.s)*(i/(i+o)):r.s-n.s+(n.s-t.s)*(o/(i+o)):0},e.transSign=function(t,r,n){dr(e.transLeq(t,r)&&e.transLeq(r,n));var i=r.t-t.t,o=n.t-r.t;return i+o>0?(r.s-n.s)*i+(r.s-t.s)*o:0},e.vertCCW=function(t,r,n){return t.s*(r.t-n.t)+r.s*(n.t-t.t)+n.s*(t.t-r.t)>=0},e.interpolate=function(t,r,n,i){return t=t<0?0:t,n=n<0?0:n,t<=n?n===0?(r+i)/2:r+(i-r)*(t/(t+n)):i+(r-i)*(n/(t+n))},e.intersect=function(t,r,n,i,o){var a,s,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(n,i)||(l=n,n=i,i=l),e.vertLeq(t,n)||(l=t,t=n,n=l,l=r,r=i,i=l),e.vertLeq(n,r)?e.vertLeq(r,i)?(a=e.edgeEval(t,n,r),s=e.edgeEval(n,r,i),a+s<0&&(a=-a,s=-s),o.s=e.interpolate(a,n.s,s,r.s)):(a=e.edgeSign(t,n,r),s=-e.edgeSign(t,i,r),a+s<0&&(a=-a,s=-s),o.s=e.interpolate(a,n.s,s,i.s)):o.s=(n.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(n,i)||(l=n,n=i,i=l),e.transLeq(t,n)||(l=t,t=n,n=l,l=r,r=i,i=l),e.transLeq(n,r)?e.transLeq(r,i)?(a=e.transEval(t,n,r),s=e.transEval(n,r,i),a+s<0&&(a=-a,s=-s),o.t=e.interpolate(a,n.t,s,r.t)):(a=e.transSign(t,n,r),s=-e.transSign(t,i,r),a+s<0&&(a=-a,s=-s),o.t=e.interpolate(a,n.t,s,i.t)):o.t=(n.t+r.t)/2},e}(),C_=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),fP=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),$y=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),CX=function(){function e(){var t=new $y,r=new C_,n=new fP(0),i=new fP(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,n.next=n,n.Sym=i,i.next=i,i.Sym=n,this.vHead=t,this.fHead=r,this.eHead=n,this.eHeadSym=i}return e.prototype.makeEdge_=function(t){var r=new fP(0),n=new fP(1);t.Sym.side<t.side&&(t=t.Sym);var i=t.Sym.next;return n.next=i,i.Sym.next=r,r.next=t,t.Sym.next=n,r.Sym=n,r.Onext=r,r.Lnext=n,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,n.Sym=r,n.Onext=n,n.Lnext=r,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,r},e.prototype.splice_=function(t,r){var n=t.Onext,i=r.Onext;n.Sym.Lnext=r,i.Sym.Lnext=t,t.Onext=i,r.Onext=n},e.prototype.makeVertex_=function(t,r,n){var i=t;dr(i,"Vertex can't be null!");var o=n.prev;i.prev=o,o.next=i,i.next=n,n.prev=i,i.anEdge=r;var a=r;do a.Org=i,a=a.Onext;while(a!==r)},e.prototype.makeFace_=function(t,r,n){var i=t;dr(i,"Face can't be null");var o=n.prev;i.prev=o,o.next=i,i.next=n,n.prev=i,i.anEdge=r,i.trail=null,i.marked=!1,i.inside=n.inside;var a=r;do a.Lface=i,a=a.Lnext;while(a!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,n=t.Sym.next;r.Sym.next=n,n.Sym.next=r},e.prototype.killVertex_=function(t,r){var n=t.anEdge,i=n;do i.Org=r,i=i.Onext;while(i!==n);var o=t.prev,a=t.next;a.prev=o,o.next=a},e.prototype.killFace_=function(t,r){var n=t.anEdge,i=n;do i.Lface=r,i=i.Lnext;while(i!==n);var o=t.prev,a=t.next;a.prev=o,o.next=a},e.prototype.makeEdge=function(){var t=new $y,r=new $y,n=new C_,i=this.makeEdge_(this.eHead);return this.makeVertex_(t,i,this.vHead),this.makeVertex_(r,i.Sym,this.vHead),this.makeFace_(n,i,this.fHead),i},e.prototype.splice=function(t,r){var n=!1,i=!1;if(t!==r){if(r.Org!==t.Org&&(i=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(n=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!i){var o=new $y;this.makeVertex_(o,r,t.Org),t.Org.anEdge=t}if(!n){var a=new C_;this.makeFace_(a,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,n=!1;if(t.Lface!==t.Rface&&(n=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!n){var i=new C_;this.makeFace_(i,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),n=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var i=new $y;return this.makeVertex_(i,n,r.Org),r.Lface=n.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),n=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,n),t.Dst=n.Org,n.Dst.anEdge=n.Sym,n.Rface=t.Rface,n.winding=t.winding,n.Sym.winding=t.Sym.winding,n.idx=t.idx,n.Sym.idx=t.Sym.idx,n},e.prototype.connect=function(t,r){var n=!1,i=this.makeEdge_(t),o=i.Sym;if(r.Lface!==t.Lface&&(n=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(i,t.Lnext),this.splice_(o,r),i.Org=t.Dst,o.Org=r.Org,i.Lface=o.Lface=t.Lface,t.Lface.anEdge=o,!n){var a=new C_;this.makeFace_(a,i,t.Lface)}return i},e.prototype.zapFace=function(t){var r=t.anEdge,n,i,o,a,s;i=r.Lnext;do n=i,i=n.Lnext,n.Lface=null,n.Rface===null&&(n.Onext===n?this.killVertex_(n.Org,null):(n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),o=n.Sym,o.Onext===o?this.killVertex_(o.Org,null):(o.Org.anEdge=o.Onext,this.splice_(o,o.Oprev)),this.killEdge_(n));while(n!=r);a=t.prev,s=t.next,s.prev=a,a.next=s},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,n=0;do n++,r=r.Lnext;while(r!==t.anEdge);return n},e.prototype.mergeConvexFaces=function(t){var r,n,i,o,a,s,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(n=r.anEdge,a=n.Org;i=n.Lnext,o=n.Sym,o&&o.Lface&&o.Lface.inside&&(s=this.countFaceVerts_(r),l=this.countFaceVerts_(o.Lface),s+l-2<=t&&$t.vertCCW(n.Lprev.Org,n.Org,o.Lnext.Lnext.Org)&&$t.vertCCW(o.Lprev.Org,o.Org,n.Lnext.Lnext.Org)&&(i=o.Lnext,this.delete(o),n=null,o=null)),!(n&&n.Lnext.Org===a);)n=i;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,n=this.eHead,i,o,a,s,l,u;for(o=t,o=t;(i=o.next)!==t;o=i){dr(i.prev===o),l=i.anEdge;do dr(l.Sym!==l),dr(l.Sym.Sym===l),dr(l.Lnext.Onext.Sym===l),dr(l.Onext.Sym.Lnext===l),dr(l.Lface===i),l=l.Lnext;while(l!==i.anEdge)}for(dr(i.prev===o&&i.anEdge===null),s=r,s=r;(a=s.next)!==r;s=a){dr(a.prev===s),l=a.anEdge;do dr(l.Sym!==l),dr(l.Sym.Sym===l),dr(l.Lnext.Onext.Sym===l),dr(l.Onext.Sym.Lnext===l),dr(l.Org===a),l=l.Onext;while(l!==a.anEdge)}for(dr(a.prev===s&&a.anEdge===null),u=n,u=n;(l=u.next)!==n;u=l)dr(l.Sym.next===u.Sym),dr(l.Sym!==l),dr(l.Sym.Sym===l),dr(l.Org!==null),dr(l.Dst!==null),dr(l.Lnext.Onext.Sym===l),dr(l.Onext.Sym.Lnext===l);dr(l.Sym.next===u.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),TX=function(){function e(){this.handle=null}return e}(),EX=function(){function e(){this.key=null,this.node=0}return e}(),W4e=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var n=0;n<t+1;n++)this.nodes[n]=new TX,this.handles[n]=new EX;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,n=this.handles,i,o,a;for(i=r[t].handle;;){if(a=t<<1,a<this.size&&this.leq(n[r[a+1].handle].key,n[r[a].handle].key)&&++a,dr(a<=this.max),o=r[a].handle,a>this.size||this.leq(n[i].key,n[o].key)){r[t].handle=i,n[i].node=t;break}r[t].handle=o,n[o].node=t,t=a}},e.prototype.floatUp_=function(t){var r=this.nodes,n=this.handles,i,o,a;for(i=r[t].handle;;){if(a=t>>1,o=r[a].handle,a===0||this.leq(n[o].key,n[i].key)){r[t].handle=i,n[i].node=t;break}r[t].handle=o,n[o].node=t,t=a}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,n;if(r=++this.size,r*2>this.max){this.max*=2;var i,o;for(o=this.nodes.length,this.nodes.length=this.max+1,i=o;i<this.nodes.length;i++)this.nodes[i]=new TX;for(o=this.handles.length,this.handles.length=this.max+1,i=o;i<this.handles.length;i++)this.handles[i]=new EX}return this.freeList===0?n=r:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[r].handle=n,this.handles[n].node=r,this.handles[n].key=t,this.initialized&&this.floatUp_(r),n},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,n=t[1].handle,i=r[n].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[n].key=null,r[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),i},e.prototype.delete=function(t){var r=this.nodes,n=this.handles,i;dr(t>=1&&t<=this.max&&n[t].key!==null),i=n[t].node,r[i].handle=r[this.size].handle,n[r[i].handle].node=i,--this.size,i<=this.size&&(i<=1||this.leq(n[r[i>>1].handle].key,n[r[i].handle].key)?this.floatDown_(i):this.floatUp_(i)),n[t].key=null,n[t].node=this.freeList,this.freeList=t},e}(),HB=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),PX=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),q4e=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new PX,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var n=new PX;return n.key=r,n.next=t.next,t.next.prev=n,n.prev=t,t.next=n,n},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),X4e=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,n){var i=t.event,o=r.eUp,a=n.eUp;if(o.Dst===i)return a.Dst===i?$t.vertLeq(o.Org,a.Org)?$t.edgeSign(a.Dst,o.Org,a.Org)<=0:$t.edgeSign(o.Dst,a.Org,o.Org)>=0:$t.edgeSign(a.Dst,i,a.Org)<=0;if(a.Dst===i)return $t.edgeSign(o.Dst,i,o.Org)>=0;var s=$t.edgeEval(o.Dst,i,o.Org),l=$t.edgeEval(a.Dst,i,a.Org);return s>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&dr(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,n){dr(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=n,n.activeRegion=r},e.topLeftRegion=function(t,r){var n=r.eUp.Org,i;do r=e.regionAbove(r);while(r.eUp.Org===n);if(r.fixUpperEdge){if(i=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),i===null)return null;e.fixUpperEdge(t,r,i),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,n){var i=new HB;return i.eUp=n,i.nodeUp=t.dict.insertBefore(r.nodeUp,i),i.fixUpperEdge=!1,i.sentinel=!1,i.dirty=!1,n.activeRegion=i,i},e.isWindingInside=function(t,r){switch(t.windingRule){case gn.ODD:return(r&1)!==0;case gn.NONZERO:return r!==0;case gn.POSITIVE:return r>0;case gn.NEGATIVE:return r<0;case gn.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var n=r.eUp,i=n.Lface;i.inside=r.inside,i.anEdge=n,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,n){for(var i,o=null,a=r,s=r.eUp;a!==n;){if(a.fixUpperEdge=!1,o=e.regionBelow(a),i=o.eUp,i.Org!=s.Org){if(!o.fixUpperEdge){e.finishRegion(t,a);break}i=t.mesh.connect(s.Lprev,i.Sym),e.fixUpperEdge(t,o,i)}s.Onext!==i&&(t.mesh.splice(i.Oprev,i),t.mesh.splice(s,i)),e.finishRegion(t,a),s=o.eUp,a=o}return s},e.addRightEdges=function(t,r,n,i,o,a){var s,l,u,d,c=!0;u=n;do dr($t.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,r,u.Sym),u=u.Onext;while(u!==i);for(o===null&&(o=e.regionBelow(r).eUp.Rprev),l=r,d=o;s=e.regionBelow(l),u=s.eUp.Sym,u.Org===d.Org;)u.Onext!==d&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(d.Oprev,u)),s.windingNumber=l.windingNumber-u.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!c&&e.checkForRightSplice(t,l)&&(e.addWinding(u,d),e.deleteRegion(t,l),t.mesh.delete(d)),c=!1,l=s,d=u;l.dirty=!0,dr(l.windingNumber-u.winding===s.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,n){t.mesh.splice(r,n)},e.vertexWeights=function(t,r,n){var i=$t.vertL1dist(r,t),o=$t.vertL1dist(n,t),a=.5*o/(i+o),s=.5*i/(i+o);t.coords[0]+=a*r.coords[0]+s*n.coords[0],t.coords[1]+=a*r.coords[1]+s*n.coords[1],t.coords[2]+=a*r.coords[2]+s*n.coords[2]},e.getIntersectData=function(t,r,n,i,o,a){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,n,i),e.vertexWeights(r,o,a)},e.checkForRightSplice=function(t,r){var n=e.regionBelow(r),i=r.eUp,o=n.eUp;if($t.vertLeq(i.Org,o.Org)){if($t.edgeSign(o.Dst,i.Org,o.Org)>0)return!1;$t.vertEq(i.Org,o.Org)?i.Org!==o.Org&&(t.pq.delete(i.Org.pqHandle),e.spliceMergeVertices(t,o.Oprev,i)):(t.mesh.splitEdge(o.Sym),t.mesh.splice(i,o.Oprev),r.dirty=n.dirty=!0)}else{if($t.edgeSign(i.Dst,o.Org,i.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(i.Sym),t.mesh.splice(o.Oprev,i)}return!0},e.checkForLeftSplice=function(t,r){var n=e.regionBelow(r),i=r.eUp,o=n.eUp,a;if(dr(!$t.vertEq(i.Dst,o.Dst)),$t.vertLeq(i.Dst,o.Dst)){if($t.edgeSign(i.Dst,o.Dst,i.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,a=t.mesh.splitEdge(i),t.mesh.splice(o.Sym,a),a.Lface.inside=r.inside}else{if($t.edgeSign(o.Dst,i.Dst,o.Org)>0)return!1;r.dirty=n.dirty=!0,a=t.mesh.splitEdge(o),t.mesh.splice(i.Lnext,o.Sym),a.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var n=e.regionBelow(r),i=r.eUp,o=n.eUp,a=i.Org,s=o.Org,l=i.Dst,u=o.Dst,d,c,h=new $y,f,g;if(dr(!$t.vertEq(u,l)),dr($t.edgeSign(l,t.event,a)<=0),dr($t.edgeSign(u,t.event,s)>=0),dr(a!==t.event&&s!==t.event),dr(!r.fixUpperEdge&&!n.fixUpperEdge),a===s||(d=Math.min(a.t,l.t),c=Math.max(s.t,u.t),d>c))return!1;if($t.vertLeq(a,s)){if($t.edgeSign(u,a,s)>0)return!1}else if($t.edgeSign(l,s,a)<0)return!1;return e.debugEvent(t),$t.intersect(l,a,u,s,h),dr(Math.min(a.t,l.t)<=h.t),dr(h.t<=Math.max(s.t,u.t)),dr(Math.min(u.s,l.s)<=h.s),dr(h.s<=Math.max(s.s,a.s)),$t.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),f=$t.vertLeq(a,s)?a:s,$t.vertLeq(f,h)&&(h.s=f.s,h.t=f.t),$t.vertEq(h,a)||$t.vertEq(h,s)?(e.checkForRightSplice(t,r),!1):!$t.vertEq(l,t.event)&&$t.edgeSign(l,t.event,h)>=0||!$t.vertEq(u,t.event)&&$t.edgeSign(u,t.event,h)<=0?u===t.event?(t.mesh.splitEdge(i.Sym),t.mesh.splice(o.Sym,i),r=e.topLeftRegion(t,r),i=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),n),e.addRightEdges(t,r,i.Oprev,i,i,!0),!0):l===t.event?(t.mesh.splitEdge(o.Sym),t.mesh.splice(i.Lnext,o.Oprev),n=r,r=e.topRightRegion(r),g=e.regionBelow(r).eUp.Rprev,n.eUp=o.Oprev,o=e.finishLeftRegions(t,n,null),e.addRightEdges(t,r,o.Onext,i.Rprev,g,!0),!0):($t.edgeSign(l,t.event,h)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(i.Sym),i.Org.s=t.event.s,i.Org.t=t.event.t),$t.edgeSign(u,t.event,h)<=0&&(r.dirty=n.dirty=!0,t.mesh.splitEdge(o.Sym),o.Org.s=t.event.s,o.Org.t=t.event.t),!1):(t.mesh.splitEdge(i.Sym),t.mesh.splitEdge(o.Sym),t.mesh.splice(o.Oprev,i),i.Org.s=h.s,i.Org.t=h.t,i.Org.pqHandle=t.pq.insert(i.Org),e.getIntersectData(t,i.Org,a,l,s,u),e.regionAbove(r).dirty=r.dirty=n.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var n=e.regionBelow(r),i,o;;){for(;n.dirty;)r=n,n=e.regionBelow(n);if(!r.dirty&&(n=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,i=r.eUp,o=n.eUp,i.Dst!==o.Dst&&e.checkForLeftSplice(t,r)&&(n.fixUpperEdge?(e.deleteRegion(t,n),t.mesh.delete(o),n=e.regionBelow(r),o=n.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(i),r=e.regionAbove(n),i=r.eUp)),i.Org!==o.Org)if(i.Dst!==o.Dst&&!r.fixUpperEdge&&!n.fixUpperEdge&&(i.Dst===t.event||o.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);i.Org===o.Org&&i.Dst===o.Dst&&(e.addWinding(o,i),e.deleteRegion(t,r),t.mesh.delete(i),r=e.regionAbove(n))}},e.connectRightVertex=function(t,r,n){var i,o=n.Onext,a=e.regionBelow(r),s=r.eUp,l=a.eUp,u=!1;if(s.Dst!==l.Dst&&e.checkForIntersect(t,r),$t.vertEq(s.Org,t.event)&&(t.mesh.splice(o.Oprev,s),r=e.topLeftRegion(t,r),o=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),a),u=!0),$t.vertEq(l.Org,t.event)&&(t.mesh.splice(n,l.Oprev),n=e.finishLeftRegions(t,a,null),u=!0),u){e.addRightEdges(t,r,n.Onext,o,o,!0);return}$t.vertLeq(l.Org,s.Org)?i=l.Oprev:i=s,i=t.mesh.connect(n.Lprev,i),e.addRightEdges(t,r,i,i.Onext,i.Onext,!1),i.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,n){var i,o,a,s,l;if(i=r.eUp,$t.vertEq(i.Org,n)){dr(!1),e.spliceMergeVertices(t,i,n.anEdge);return}if(!$t.vertEq(i.Dst,n)){t.mesh.splitEdge(i.Sym),r.fixUpperEdge&&(t.mesh.delete(i.Onext),r.fixUpperEdge=!1),t.mesh.splice(n.anEdge,i),e.sweepEvent(t,n);return}dr(!1),r=e.topRightRegion(r),l=e.regionBelow(r),a=l.eUp.Sym,o=s=a.Onext,l.fixUpperEdge&&(dr(o!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=o.Oprev),t.mesh.splice(n.anEdge,a),$t.edgeGoesLeft(o)||(o=null),e.addRightEdges(t,r,a.Onext,s,o,!0)},e.connectLeftVertex=function(t,r){var n,i,o,a,s,l,u=new HB;if(u.eUp=r.anEdge.Sym,n=t.dict.search(u).key,i=e.regionBelow(n),!!i){if(a=n.eUp,s=i.eUp,$t.edgeSign(a.Dst,r,a.Org)===0){e.connectLeftDegenerate(t,n,r);return}if(o=$t.vertLeq(s.Dst,a.Dst)?n:i,n.inside||o.fixUpperEdge){if(o===n)l=t.mesh.connect(r.anEdge.Sym,a.Lnext);else{var d=t.mesh.connect(s.Dnext,r.anEdge);l=d.Sym}o.fixUpperEdge?e.fixUpperEdge(t,o,l):e.computeWinding(t,e.addRegionBelow(t,n,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,n,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var n=r.anEdge;n.activeRegion===null;)if(n=n.Onext,n===r.anEdge){e.connectLeftVertex(t,r);return}var i=e.topLeftRegion(t,n.activeRegion);dr(i!==null);var o=e.regionBelow(i),a=o.eUp,s=e.finishLeftRegions(t,o,null);s.Onext===a?e.connectRightVertex(t,i,s):e.addRightEdges(t,i,s.Onext,a,a,!0)},e.addSentinel=function(t,r,n,i){var o=new HB,a=t.mesh.makeEdge();a.Org.s=n,a.Org.t=i,a.Dst.s=r,a.Dst.t=i,t.event=a.Dst,o.eUp=a,o.windingNumber=0,o.inside=!1,o.fixUpperEdge=!1,o.sentinel=!0,o.dirty=!1,o.nodeUp=t.dict.insert(o)},e.initEdgeDict=function(t){t.dict=new q4e(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],n=t.bmax[1]-t.bmin[1],i=t.bmin[0]-r,o=t.bmax[0]+r,a=t.bmin[1]-n,s=t.bmax[1]+n;e.addSentinel(t,i,o,a),e.addSentinel(t,i,o,s)},e.doneEdgeDict=function(t){for(var r,n=0;(r=t.dict.min().key)!==null;)r.sentinel||(dr(r.fixUpperEdge),dr(++n===1)),dr(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,n,i,o=t.mesh.eHead;for(r=o.next;r!==o;r=n)n=r.next,i=r.Lnext,$t.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,i,r),t.mesh.delete(r),r=i,i=r.Lnext),i.Lnext===r&&(i!==r&&((i===n||i===n.Sym)&&(n=n.next),t.mesh.delete(i)),(r===n||r===n.Sym)&&(n=n.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,n,i,o=0;for(i=t.mesh.vHead,n=i.next;n!==i;n=n.next)o++;for(o+=8,r=t.pq=new W4e(o,$t.vertLeq),i=t.mesh.vHead,n=i.next;n!==i;n=n.next)n.pqHandle=r.insert(n);return n!==i?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var n,i,o;for(n=r.fHead.next;n!==r.fHead;n=i)i=n.next,o=n.anEdge,dr(o.Lnext!==o),o.Lnext.Lnext===o&&(e.addWinding(o.Onext,o),t.mesh.delete(o));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var n,i;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(n=t.pq.extractMin())!==null;){for(;i=t.pq.min(),!(i===null||!$t.vertEq(i,n));)i=t.pq.extractMin(),e.spliceMergeVertices(t,n.anEdge,i.anEdge);e.sweepEvent(t,n)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),Y4e=function(){function e(){this.mesh=new CX,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=gn.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,n,i,o,a,s,l=[0,0,0],u=[0,0,0],d=[0,0,0],c=[0,0,0],h=[0,0,0],f=[null,null,null],g=[null,null,null],y=this.mesh.vHead;r=y.next;for(var m=0;m<3;++m)o=r.coords[m],u[m]=o,g[m]=r,l[m]=o,f[m]=r;for(r=y.next;r!==y;r=r.next)for(var p=0;p<3;++p)o=r.coords[p],o<u[p]&&(u[p]=o,g[p]=r),o>l[p]&&(l[p]=o,f[p]=r);var v=0;if(l[1]-u[1]>l[0]-u[0]&&(v=1),l[2]-u[2]>l[v]-u[v]&&(v=2),u[v]>=l[v]){t[0]=0,t[1]=0,t[2]=1;return}for(s=0,n=g[v],i=f[v],d[0]=n.coords[0]-i.coords[0],d[1]=n.coords[1]-i.coords[1],d[2]=n.coords[2]-i.coords[2],r=y.next;r!==y;r=r.next)c[0]=r.coords[0]-i.coords[0],c[1]=r.coords[1]-i.coords[1],c[2]=r.coords[2]-i.coords[2],h[0]=d[1]*c[2]-d[2]*c[1],h[1]=d[2]*c[0]-d[0]*c[2],h[2]=d[0]*c[1]-d[1]*c[0],a=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],a>s&&(s=a,t[0]=h[0],t[1]=h[1],t[2]=h[2]);s<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(d)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,n=this.mesh.vHead,i,o=0,a=t.next;a!==t;a=a.next)if(i=a.anEdge,!(i.winding<=0))do o+=(i.Org.s-i.Dst.s)*(i.Org.t+i.Dst.t),i=i.Lnext;while(i!==a.anEdge);if(o<0){for(r=n.next;r!==n;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],n,i,o=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),o=!0),n=this.sUnit,i=this.tUnit;var a=this.longAxis_(r);n[a]=0,n[(a+1)%3]=1,n[(a+2)%3]=0,i[a]=0,i[(a+1)%3]=0,i[(a+2)%3]=r[a]>0?1:-1;for(var s=t.next;s!==t;s=s.next)s.s=this.dot_(s.coords,n),s.t=this.dot_(s.coords,i);o&&this.checkOrientation_();for(var l=!0,u=t.next;u!==t;u=u.next)l?(this.bmin[0]=this.bmax[0]=u.s,this.bmin[1]=this.bmax[1]=u.t,l=!1):(u.s<this.bmin[0]&&(this.bmin[0]=u.s),u.s>this.bmax[0]&&(this.bmax[0]=u.s),u.t<this.bmin[1]&&(this.bmin[1]=u.t),u.t>this.bmax[1]&&(this.bmax[1]=u.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var n,i;if(n=r.anEdge,!(n.Lnext!==n&&n.Lnext.Lnext!==n))throw"Mono region invalid";for(;$t.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;$t.vertLeq(n.Org,n.Dst);n=n.Lnext);i=n.Lprev;for(var o=void 0;n.Lnext!==i;)if($t.vertLeq(n.Dst,i.Org)){for(;i.Lnext!==n&&($t.edgeGoesLeft(i.Lnext)||$t.edgeSign(i.Org,i.Dst,i.Lnext.Dst)<=0);)o=t.connect(i.Lnext,i),i=o.Sym;i=i.Lprev}else{for(;i.Lnext!==n&&($t.edgeGoesRight(n.Lprev)||$t.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)o=t.connect(n,n.Lprev),n=o.Sym;n=n.Lnext}if(i.Lnext===n)throw"Mono region invalid";for(;i.Lnext.Lnext!==n;)o=t.connect(i.Lnext,i),i=o.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,n=t.fHead.next;n!==t.fHead;n=r)if(r=n.next,n.inside&&!this.tessellateMonoRegion_(t,n))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,n=t.fHead.next;n!==t.fHead;n=r)r=n.next,n.inside||t.zapFace(n)},e.prototype.setWindingNumber_=function(t,r,n){for(var i,o=t.eHead.next;o!==t.eHead;o=i)i=o.next,o.Rface.inside!==o.Lface.inside?o.winding=o.Lface.inside?r:-r:n?t.delete(o):o.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,n,i){var o,a=0,s=0,l;n>3&&t.mergeConvexFaces(n);for(var u=t.vHead.next;u!==t.vHead;u=u.next)u.n=-1;for(var d=t.fHead.next;d!==t.fHead;d=d.next)if(d.n=-1,!!d.inside){o=d.anEdge,l=0;do{var u=o.Org;u.n===-1&&(u.n=s,s++),l++,o=o.Lnext}while(o!==d.anEdge);if(l>n)throw"Face vertex greater that support polygon";d.n=a,++a}this.elementCount=a,r===Vi.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*n,this.vertexCount=s,this.vertices=[],this.vertices.length=s*i,this.vertexIndices=[],this.vertexIndices.length=s;for(var u=t.vHead.next;u!==t.vHead;u=u.next)if(u.n!==-1){var c=u.n*i;this.vertices[c+0]=u.coords[0],this.vertices[c+1]=u.coords[1],i>2&&(this.vertices[c+2]=u.coords[2]),this.vertexIndices[u.n]=u.idx}for(var h=0,d=t.fHead.next;d!==t.fHead;d=d.next)if(d.inside){o=d.anEdge,l=0;do{var u=o.Org;this.elements[h++]=u.n,l++,o=o.Lnext}while(o!==d.anEdge);for(var f=l;f<n;++f)this.elements[h++]=-1;if(r===Vi.CONNECTED_POLYGONS){o=d.anEdge;do this.elements[h++]=this.getNeighbourFace_(o),o=o.Lnext;while(o!==d.anEdge);for(var g=l;g<n;++g)this.elements[h++]=-1}}},e.prototype.outputContours_=function(t,r){var n,i,o=0,a=0;this.vertexCount=0,this.elementCount=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){i=n=s.anEdge;do this.vertexCount++,n=n.Lnext;while(n!==i);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,u=0,d=0;o=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){a=0,i=n=s.anEdge;do this.vertices[l++]=n.Org.coords[0],this.vertices[l++]=n.Org.coords[1],r>2&&(this.vertices[l++]=n.Org.coords[2]),this.vertexIndices[u++]=this.vertexIdCallback?this.vertexIdCallback(n):n.Org.idx,a++,n=n.Lnext;while(n!==i);this.elements[d++]=o,this.elements[d++]=a,o+=a}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new CX),t<2&&(t=2),t>3&&(t=3);for(var n=null,i=0;i<r.length;i+=t)n===null?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=r[i+0],n.Org.coords[1]=r[i+1],t>2?n.Org.coords[2]=r[i+2]:n.Org.coords[2]=0,n.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(n),n.winding=1,n.Sym.winding=-1},e.prototype.tesselate=function(t,r,n,i,o,a){if(t===void 0&&(t=gn.ODD),r===void 0&&(r=Vi.POLYGONS),a===void 0&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,o&&(this.normal[0]=o[0],this.normal[1]=o[1],this.normal[2]=o[2]),this.windingRule=t,i<2&&(i=2),i>3&&(i=3),!this.mesh)return!1;this.projectPolygon_(),X4e.computeInterior(this,a);var s=this.mesh;return r===Vi.BOUNDARY_CONTOURS?this.setWindingNumber_(s,1,!0):this.tessellateInterior_(s),a&&s.check(),r===Vi.BOUNDARY_CONTOURS?this.outputContours_(s,i):this.outputPolymesh_(s,r,n,i),!0},e}();function hp(e){var t=e.windingRule,r=t===void 0?gn.ODD:t,n=e.elementType,i=n===void 0?Vi.POLYGONS:n,o=e.polySize,a=o===void 0?3:o,s=e.vertexSize,l=s===void 0?2:s,u=e.normal,d=u===void 0?[0,0,1]:u,c=e.contours,h=c===void 0?[]:c,f=e.strict,g=f===void 0?!0:f,y=e.debug,m=y===void 0?!1:y;if(!h&&g)throw new Error("Contours can't be empty");if(h){var p=new Y4e;e.edgeCreateCallback&&(p.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(p.vertexIdCallback=e.vertexIdCallback);for(var v=0;v<h.length;v++)p.addContour(l||2,h[v]);return p.tesselate(r,i,a,l,d,g),{vertices:p.vertices,vertexIndices:p.vertexIndices,vertexCount:p.vertexCount,elements:p.elements,elementCount:p.elementCount,mesh:m?p.mesh:void 0}}}gn.ODD;gn.NONZERO;gn.POSITIVE;gn.NEGATIVE;gn.ABS_GEQ_TWO;Vi.POLYGONS;Vi.CONNECTED_POLYGONS;Vi.BOUNDARY_CONTOURS;var fz=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*fz.eSize;this.buffer=new ArrayBuffer(r);let n=Float32Array.BYTES_PER_ELEMENT,i=0;this.positions=new Float32Array(this.buffer,i*n,3*e),i+=3*e,this.normals=new Float32Array(this.buffer,i*n,3*e),i+=3*e,this.uvs=new Float32Array(this.buffer,i*n,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity}  ${e}`);let r=e*fz.eSize,n=new ArrayBuffer(r),i=Float32Array.BYTES_PER_ELEMENT,o=0,a=new Float32Array(n,o*i,3*e);o+=3*e;let s=new Float32Array(n,o*i,3*e);o+=3*e;let l=new Float32Array(n,o*i,2*e);t?(a.set(this.positions.subarray(0,this.size*3)),s.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(a.set(this.positions),s.set(this.normals),l.set(this.uvs)),this.buffer=n,this.positions=a,this.normals=s,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let n=this.capacity;for(;t>n;)n*=2;this.realloc(n)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity}  ${this.size}`),this.realloc(this.size,!0)}},Boe=fz;Boe.eSize=8*Float32Array.BYTES_PER_ELEMENT;var K4e=Po(lCe()),Cj={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},Noe={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},koe={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},GB=(e,t)=>([r,n])=>(n<r&&(n+=t),(e>=r?e:e+t)<=n),Tj=class extends Jt{constructor(e,t,r=0,n=12,i=3,o=gn.ODD,a=!1){super(),this.forPathBevel=a,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=n,this._bevelSegmentsInput=i;let s=this._shape.extractShapePointsToFlatArray([],n),l=this._shape.shapeHoles.map(C=>{let E=C.extractShapePointsToFlatArray([],n),D=[];for(let I=E.length-1;I>=1;I-=2){let k=E[I-1],L=E[I-0];D.push(k,L)}return D}),u=[],d=[];for(let C=0;C<s.length;C+=2)d.push([s[C],s[C+1]]);u.push(d);for(let C=0;C<l.length;C++){let E=l[C],D=[];for(let I=0;I<E.length;I+=2)D.push([E[I],E[I+1]]);u.push(D)}let c;e.isText?c=new rie().setFromPoints(e.points.map(C=>C.position)).getSize(new Ae).length()*.1:u[0].length===0?c=r:c=(0,K4e.default)(u).distance,r<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(r,c,t/2),this._bevelSegments=Math.floor(i));let h;try{h=hp({windingRule:o,elementType:Vi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]})}catch{h=Cj}let f;try{f=hp({windingRule:gn.ODD,elementType:Vi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{f=Noe}if(!h)throw new Error("error generating geometry");let g=h.elementCount;if(f){h.elementCount+=f.elementCount;for(let C=0;C<f.elements.length;C++){let E=f.elements[C],D=C%2===0?h.vertexCount:0;h.elements.push(E+D)}for(let C=0;C<f.vertexIndices.length;C++){let E=f.vertexIndices[C],D=h.vertexCount;h.vertexIndices.push(E+D)}for(let C=0;C<f.vertices.length;C++){let E=f.vertices[C];h.vertices.push(E)}}let y=1/0,m=-1/0,p=1/0,v=-1/0;for(let C=0,E=h.vertexCount;C<E;C++){let D=C*2,I=h.vertices[D+0],k=h.vertices[D+1];I<y&&(y=I),I>m&&(m=I),k<p&&(p=k),k>v&&(v=k)}this._minX=y,this._minY=p,this._width=m-y,this._height=v-p,this._buffer=new Boe(this._computeBufferEstimatedSize(h));let b=[],x=[];for(let C=h.elementCount-1;C>=0;C--){let E=C>=g,D=C*2,I=h.elements[D+0],k=h.elements[D+1],L=I+k,U={start:I,count:k,normals:[],continuous:[],concave:[]},W=I,G=L-1,z=I+1,V=this._shape.roundedCurves.length;do{let $=W-I,ne=h.vertices[G*2+0],Z=h.vertices[G*2+1],ce=h.vertices[W*2+0],ae=h.vertices[W*2+1],ie=h.vertices[z*2+0],le=h.vertices[z*2+1],se=ce-ne,re=ae-Z,ye=Math.sqrt(se*se+re*re);se/=ye,re/=ye;let be=ce-ie,_e=ae-le,Se=Math.sqrt(be*be+_e*_e);be/=Se,_e/=Se,U.normals[$*2+0]=-_e,U.normals[$*2+1]=be,U.concave[$]=se*_e-re*be>0;let Fe=h.vertexIndices[W];if(Array.isArray(Fe))U.continuous[$]=!1;else{let[Re,Le]=this._shape.getCurveIndexFromVertexId(Fe-1,!0);if(Le>0&&Le<1)U.continuous[$]=!0;else{let rt=Le===1?Re+1:Re-1;rt=(rt+V)%V;let st=Le===1?0:1,he=this._shape.roundedCurves[Re].getTangent(Le),q=this._shape.roundedCurves[rt].getTangent(st);U.continuous[$]=he.dot(q)>.95}}E&&(U.normals[$*2+0]*=-1,U.normals[$*2+1]*=-1),[G,W,z]=[W,z,z+1],z>=L&&(z-=k)}while(z!==I+1);let j=[];j.push({bevelI:0,angle:0,size:0,boundary:{vertices:h.vertices.slice(I*2,L*2),vertexCount:k,vertexIndices:new Array(k).fill(!0).map(($,ne)=>[ne,ne]),elements:[0,k],elementCount:1,mesh:null},reverseMap:[],insetPoints:h.vertices.slice(I*2,L*2)});let H=0;for(let $=1;$<=this._bevelSegments;$++){let ne=$/this._bevelSegments*Math.PI/2,Z=(1-Math.cos(ne))*this._bevel,ce=[],ae=[],ie=0;for(let se=0;se<k;se++){let re=se*2,ye=(se-1+k)%k*2,be=h.vertices[U.start*2+re+0],_e=h.vertices[U.start*2+re+1],Se=-U.normals[ye+0]*Z,Fe=-U.normals[ye+1]*Z,Re=-U.normals[re+0]*Z,Le=-U.normals[re+1]*Z;if(U.concave[se]||!U.concave[se]&&E){let rt=Math.atan2(Fe,Se),st=Math.atan2(Le,Re);st>rt&&(st-=Math.PI*2);let he=st-rt;if(U.continuous[se]||E){let q=rt+he/2,J=Math.cos(q)*Z,ge=Math.sin(q)*Z;ce[2*ie+0]=be+J*(E?-1:1),ce[2*ie+1]=_e+ge*(E?-1:1),ae[ie]=se,ie++}else{let q=Math.max(1,Math.floor(n/4*Math.abs(he)/Math.PI));for(let J=0;J<=q;J++){let ge=rt+he*(J/q),Pe=Math.cos(ge)*Z,De=Math.sin(ge)*Z;ce[2*ie+0]=be+Pe,ce[2*ie+1]=_e+De,ae[ie]=se,ie++}}}else ce[2*ie+0]=be+Se,ce[2*ie+1]=_e+Fe,ae[ie]=se,ie++,ce[2*ie+0]=be,ce[2*ie+1]=_e,ae[ie]=se,ie++,ce[2*ie+0]=be+Re,ce[2*ie+1]=_e+Le,ae[ie]=se,ie++}let le=hp({windingRule:gn.POSITIVE,elementType:Vi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[ce],edgeCreateCallback:se=>{let re=se.Org.idx,ye=ae[re],be=ae[(re+1)%ae.length];se.idx=[ye,be],se.Sym.idx=[be,ye]},vertexIdCallback:se=>{let re=se.Lprev.idx;return[re?re[1]:0,se.idx?se.idx[0]:0]}});if(!le)throw console.log("Error"),new Error(`error generating bevel geometry for ${$}'th loop`);if(!le.vertexCount){let se=($-1)/this._bevelSegments*Math.PI/2;H=(1-Math.sin(se))*this._bevel;break}for(let se=0;se<le.vertexIndices.length;se++){let[re,ye]=le.vertexIndices[se];if(re===ye)continue;let be=ye;ye<re&&(be+=k);for(let _e=re;_e<be;_e++){let Se=_e%k,Fe=(_e+1)%k;if(!U.continuous[Se]||!U.continuous[Fe]){le.vertexIndices[se]=[re,Se],le.vertexIndices.splice(se+1,0,[Fe,ye]),le.vertices.splice((se+1)*2,0,le.vertices[se*2],le.vertices[se*2+1]);break}}}j.push({bevelI:$,angle:ne,size:Z,boundary:le,reverseMap:ae,insetPoints:ce})}let Y=($,ne,Z)=>{let ce=0,ae=$.boundary.vertexIndices.length;for(;ce<ae&&Z($.boundary.vertexIndices[ne]);)ne=(ne+1)%ae,ce++;return ce},Q=b.length;for(let $=1;$<j.length;$++){let ne=j[$-1],Z=j[$],ce=ne.boundary.vertexIndices.length,ae=Z.boundary.vertexIndices.length;if(!ce||!ae)break;let ie=U.concave.length,le=0,se=GB(le,k);for(;!ne.boundary.vertexIndices.filter(se).length||!Z.boundary.vertexIndices.filter(se).length;)le++,se=GB(le,k);let re=ne.boundary.vertexIndices.findIndex(se),ye=Z.boundary.vertexIndices.findIndex(se);do re=(re+1)%ce;while(se(ne.boundary.vertexIndices[re]));do ye=(ye+1)%ae;while(se(Z.boundary.vertexIndices[ye]));le=(le+1)%k;let be=le,_e=0,Se=this._buildBevelVert(U,ne,(re-1+ce)%ce,void 0,_e),Fe=this._buildBevelVert(U,Z,(ye-1+ae)%ae,void 0,_e),Re=Se,Le=Fe,rt,st,he=!1;do{_e=(le||ie)/ie,se=GB(le,k);let q=Y(ne,re,se),J=Y(Z,ye,se),ge=he;if(he=!1,q&&!J){for(let Pe=0;Pe<q;Pe++)rt=this._buildBevelVert(U,ne,(re+Pe)%ce,Pe/(q-1),_e),b.push(Re.topN,rt.topP,Le.topN),a===!1&&b.push(rt.bottomP,Re.bottomN,Le.bottomN),Re=rt;he=!0}else if(!q&&J)for(let Pe=0;Pe<J;Pe++)st=this._buildBevelVert(U,Z,(ye+Pe)%ae,Pe/(J-1),_e),b.push(Le.topN,Re.topP,st.topP),a===!1&&b.push(Re.bottomP,Le.bottomN,st.bottomP),Le=st;else if(q&&J)if(rt=this._buildBevelVert(U,ne,re,0,_e),st=this._buildBevelVert(U,Z,ye,0,_e),ge?(b.push(Re.topN,st.topP,Le.topN),b.push(Re.topN,rt.topP,st.topP),a===!1&&(b.push(st.bottomP,Re.bottomN,Le.bottomN),b.push(st.bottomP,rt.bottomP,Re.bottomN))):(b.push(Le.topN,Re.topN,rt.topP),b.push(Le.topN,rt.topP,st.topP),a===!1&&(b.push(rt.bottomP,Re.bottomN,Le.bottomN),b.push(rt.bottomP,Le.bottomN,st.bottomP))),Re=rt,Le=st,q===J)for(let Pe=1;Pe<q;Pe++)rt=this._buildBevelVert(U,ne,(re+Pe)%ce,Pe/(q-1),_e),st=this._buildBevelVert(U,Z,(ye+Pe)%ae,Pe/(J-1),_e),b.push(Re.topN,rt.topP,Le.topN),b.push(Le.topN,rt.topP,st.topP),a===!1&&(b.push(rt.bottomP,Re.bottomN,Le.bottomN),b.push(rt.bottomP,Le.bottomN,st.bottomP)),Re=rt,Le=st;else if(q>J){let Pe=q/J,De=0;for(let Ve=1;Ve<q;Ve++)rt=this._buildBevelVert(U,ne,(re+Ve)%ce,Ve/(q-1),_e),b.push(Re.topN,rt.topP,Le.topN),a===!1&&b.push(rt.bottomP,Re.bottomN,Le.bottomN),Re=rt,Ve>(De+1)*Pe&&(De++,st=this._buildBevelVert(U,Z,(ye+De)%ae,De/(J-1),_e),b.push(Le.topN,rt.topP,st.topP),a===!1&&b.push(rt.bottomP,Le.bottomN,st.bottomP),Le=st)}else{let Pe=J/q,De=0;for(let Ve=1;Ve<J;Ve++)st=this._buildBevelVert(U,Z,(ye+Ve)%ae,Ve/(J-1),_e),b.push(Le.topN,rt.topP,st.topP),a===!1&&b.push(rt.bottomP,Le.bottomN,st.bottomP),Le=st,Ve>(De+1)*Pe&&(De++,rt=this._buildBevelVert(U,ne,(re+De)%ce,De/(q-1),_e),b.push(Re.topN,rt.topP,Le.topN),a===!1&&b.push(rt.bottomP,Re.bottomN,Le.bottomN),Re=rt)}re=(re+q)%ce,ye=(ye+J)%ae,le=(le+1)%ie}while(le!==be)}if(a===!1&&this._depth>this._bevel*2&&this._buildWall(j,U,b),E){let $=[];for(let ne=b.length-1;ne>=Q+2;ne-=3){let Z=b[ne-2],ce=b[ne-1],ae=b[ne-0];$.push(ae,ce,Z)}b.splice(Q,b.length-Q,...$)}if(E){let $=[];for(let ne=j[j.length-1].boundary.vertices.length-1;ne>=1;ne-=2){let Z=j[j.length-1].boundary.vertices[ne-1],ce=j[j.length-1].boundary.vertices[ne-0];$.push(Z,ce)}x.push($)}if(!E){let $=j[j.length-1],ne;try{ne=hp({windingRule:j.length>1?gn.POSITIVE:gn.ODD,elementType:Vi.POLYGONS,vertexSize:2,strict:!0,contours:[$.insetPoints,...x]})}catch{ne=koe}if(!ne)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<c&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let Z=0;Z<ne.elementCount*3;Z+=3){let ce=this._buildSurfaceVert(ne,ne.elements[Z+0],H),ae=this._buildSurfaceVert(ne,ne.elements[Z+1],H),ie=this._buildSurfaceVert(ne,ne.elements[Z+2],H);b.push(ce.top,ae.top,ie.top),a===!1&&b.push(ie.bottom,ae.bottom,ce.bottom)}}this.vertexCache={}}this._buffer.shrink();let _=new fr(Uint32Array.from(b),1),A=new fr(this._buffer.positions,3),M=new fr(this._buffer.normals,3),T=new fr(this._buffer.uvs,2);A.needsUpdate=!0,M.needsUpdate=!0,T.needsUpdate=!0,_.needsUpdate=!0,this.setAttribute("position",A),this.setAttribute("normal",M),this.setAttribute("uv",T),this.setIndex(_)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let n=e[0];for(let i=0,o=n.boundary.vertexCount;i<o;i++){let a=this._buildBevelVert(t,n,i),s=this._buildBevelVert(t,n,(i+1)%o);r.push(s.topP,a.topN,a.bottomN),r.push(s.topP,a.bottomN,s.bottomP)}}_buildSurfaceVert(e,t,r){let n=t.toString();if(n in this.vertexCache)return this.vertexCache[n];let i=e.vertices[t*2+0],o=e.vertices[t*2+1],a=(i-this._minX)/this._width,s=(o-this._minY)/this._height;this.forPathBevel&&(s=1);let l=this._buffer.get(this.forPathBevel?1:2),u=l*3,d=l*2,c={top:l+0,bottom:l+1};return this._buffer.positions[u+0]=i,this._buffer.positions[u+1]=o,this._buffer.positions[u+2]=this.forPathBevel?this._bevel:this._depth-r,this._buffer.normals[u+0]=0,this._buffer.normals[u+1]=0,this._buffer.normals[u+2]=1,this._buffer.uvs[d+0]=a,this._buffer.uvs[d+1]=s,this.forPathBevel===!1&&(this._buffer.positions[u+3]=i,this._buffer.positions[u+4]=o,this._buffer.positions[u+5]=r,this._buffer.normals[u+3]=0,this._buffer.normals[u+4]=0,this._buffer.normals[u+5]=-1,this._buffer.uvs[d+2]=a,this._buffer.uvs[d+3]=s),this.vertexCache[n]=c,c}_buildBevelVert(e,t,r,n=1,i){let o=`${t.bevelI}:${r}`;if(o in this.vertexCache&&i!==0&&i!==1&&(!i||i===this.vertexCache[o].pathBevelUCoord))return this.vertexCache[o];let[a,s]=t.boundary.vertexIndices[r],l,u,d,c;a!==s?(u=a,l=s,c=!1,d=e.continuous[u]&&e.continuous[l]):(l=a,u=(l-1+e.count)%e.count,c=e.concave[l]&&t.bevelI>0,d=e.continuous[l]||c);let h=Math.cos(t.angle),f=Math.sin(t.angle),g=r*2,y=l*2,m=u*2,p=t.boundary.vertices[g+0],v=t.boundary.vertices[g+1],b=(1-f)*this._bevel,x=(p-this._minX)/this._width,_=(v-this._minY)/this._height;this.forPathBevel&&(i!==void 0&&(x=i),_=1);let A=e.normals[y+0],M=e.normals[y+1],T=e.normals[m+0],C=e.normals[m+1];if(c){let L=T-A,U=C-M;A=A+L*(1-n),M=M+U*(1-n);let W=Math.sqrt(A*A+M*M);A/=W,M/=W}let E=this.forPathBevel?this._buffer.get(d?1:2):this._buffer.get(d?2:4),D=E*3,I=E*2,k={i:r,fi:l,topP:E+0,topN:E+0,bottomP:E+1,bottomN:E+1,pathBevelUCoord:i};return this._buffer.positions[D+0]=p,this._buffer.positions[D+1]=v,this._buffer.positions[D+2]=(this.forPathBevel?this._bevel:this._depth)-b,this._buffer.normals[D+0]=A*h,this._buffer.normals[D+1]=M*h,this._buffer.normals[D+2]=f,this._buffer.uvs[I+0]=x,this._buffer.uvs[I+1]=_,this.forPathBevel===!1&&(this._buffer.positions[D+3]=p,this._buffer.positions[D+4]=v,this._buffer.positions[D+5]=b,this._buffer.normals[D+3]=A*h,this._buffer.normals[D+4]=M*h,this._buffer.normals[D+5]=-f,this._buffer.uvs[I+2]=_,this._buffer.uvs[I+3]=x),d||(this.forPathBevel?(E+=1,D+=3,I+=2):(E+=2,D+=6,I+=4),k.topP=E+0,k.bottomP=E+1,this._buffer.positions[D+0]=p,this._buffer.positions[D+1]=v,this._buffer.positions[D+2]=(this.forPathBevel?this._bevel:this._depth)-b,this._buffer.normals[D+0]=T*h,this._buffer.normals[D+1]=C*h,this._buffer.normals[D+2]=f,this._buffer.uvs[I+0]=x,this._buffer.uvs[I+1]=_,this.forPathBevel===!1&&(this._buffer.positions[D+3]=p,this._buffer.positions[D+4]=v,this._buffer.positions[D+5]=b,this._buffer.normals[D+3]=T*h,this._buffer.normals[D+4]=C*h,this._buffer.normals[D+5]=-f,this._buffer.uvs[I+2]=_,this._buffer.uvs[I+3]=x)),this.vertexCache[o]=k,k}clone(){let e=new Tj(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=$R(this.userData),e}},Foe=class extends Jt{constructor(e,t=12,r={}){super(),this.type="ShapeGeometry",this.windingRule=gn.ODD,this.elementType=Vi.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:gn.ODD,elementType:Vi.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let n=this._shape.extractShapePointsToFlatArray([],this._curveSegments),i=this._shape.shapeHoles.map(h=>h.extractShapePointsToFlatArray([],this._curveSegments)),o,a=!0,s=!0,l,u;for(let h=0,f=n.length/2;h<f;h++){let g=h*2,y=n[g+0],m=n[g+1];if(l!==void 0&&y!==l&&(a=!1),u!==void 0&&m!==u&&(s=!1),l=y,u=m,!a&&!s)break}if(!a&&!s)try{o=hp({contours:[n,...i],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{o=Cj}let d=(o==null?void 0:o.vertexCount)??1,c=(o==null?void 0:o.elementCount)??1;if(this._positionAttribute=new fr(new Float32Array(d*3),3),this._normalAttribute=new fr(new Float32Array(d*3),3),this._uvAttribute=new fr(new Float32Array(d*2),2),this._indexAttribute=new fr(new Uint32Array(c*3),1),o){let h=1/0,f=-1/0,g=1/0,y=-1/0;for(let v=0,b=d;v<b;v++){let x=v*2,_=o.vertices[x+0],A=o.vertices[x+1];_<h&&(h=_),_>f&&(f=_),A<g&&(g=A),A>y&&(y=A)}let m=f-h,p=y-g;for(let v=0,b=d;v<b;v++){let x=v*2,_=o.vertices[x+0],A=o.vertices[x+1],M=(_-h)/m,T=(A-g)/p;this._positionAttribute.setXYZ(v,_,A,0),this._normalAttribute.setXYZ(v,0,0,1),this._uvAttribute.setXY(v,M,T)}for(let v=0,b=c;v<b;v++){let x=v*3,_=o.elements[x+0],A=o.elements[x+1],M=o.elements[x+2];this._indexAttribute.setX(x+0,_),this._indexAttribute.setX(x+1,A),this._indexAttribute.setX(x+2,M)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((o==null?void 0:o.elementCount)??1)*3)}clone(){let e=new Foe(this._shape,this._curveSegments);return e.userData=$R(this.userData),e}},zoe=class extends Tj{constructor(e,t,r=0,n=12,i=3,o=gn.ODD){super(e,t,r,n,i,o),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let n=e[0];for(let i=0,o=n.boundary.vertexCount;i<o;i++){let a=this._buildBevelVert(t,n,i),s=this._buildBevelVert(t,n,(i+1)%o);r.push(s.topP,a.topN,a.bottomN),r.push(s.topP,a.bottomN,s.bottomP)}}clone(){let e=new zoe(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=$R(this.userData),e}},B0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var u,d;let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:gn.ODD},e.parameters),n=Math.abs(r.width),i=Math.abs(r.height??r.width),o=Math.abs(r.depth??0),a=e.shape??(t==null?void 0:t.shape),s=(a==null?void 0:a.roundness)??r.roundness;a!==void 0&&(a instanceof gi?(a.width!==n||a.height!==i)&&a.applySize(n,i):a=new gi(n,i).fromJSON(a),((u=e.parameters)==null?void 0:u.roundness)!==void 0&&((d=e.parameters)==null?void 0:d.roundness)>0&&a.update());let l=a??new gi(n,i);return{parameters:Object.assign(r,{width:n,height:i,depth:o,roundness:s}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:n,subdivisions:i,roundness:o,windingRule:a}=e.parameters;e.shape.roundness=o;let s;return t<=0?s=new Foe(e.shape,i,{windingRule:a}):s=new zoe(e.shape,t,r,i,n,a),Object.assign(s,{userData:{...e,type:"VectorGeometry"}})}},Uoe=Math.PI*2,Ej=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return r.angle=Ht.clamp(r.angle,0,360),{shape:e.shape&&e.shape instanceof gi?e.shape:new gi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:n,angle:i,innerRadius:o,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u=e.shape,d=t*.5,c=r*.5,h=J4e(u,d,c,i*Math.PI/180,n,o);u.isClosed=!0,u.update();let f;return i===0?(f=new Jt,f.setAttribute("position",new Rt([],3))):f=B0.create({shape:u,parameters:{subdivisions:h,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}}),Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function J4e(e,t,r,n,i,o){if(n>=Uoe)return i>30||i%4===0?(Z4e(e,t,r,o),Math.round(i/4)):DX(e,n,i,t,r,o);n=Math.max(n,.001);let a={x:0,y:r},s=n+Math.PI*.5,l={x:Math.cos(s)*t,y:Math.sin(s)*r},u=G4e({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:n>Math.PI,sweepFlag:!0});return i>30||i%u.length===0?Q4e(e,a.x,a.y,u,i,t,r,o):DX(e,n,i,t,r,o)}function Q4e(e,t,r,n,i,o,a,s){let l=Math.round(i/n.length);e.addPoint(ex(t,r));for(let u=0,d=n.length;u<d;u++){let c=n[u],h=e.points[u],f=ex(c.x,c.y);h.controls[1].position.set(c.x1,c.y1),f.controls[0].position.set(c.x2,c.y2),e.addPoint(f)}return s>0?Voe(e,o,a,s):e.addPoint(ex(0,0)),l}function DX(e,t,r,n,i,o){let a=-t/r;for(let s=0;s<=r;s++){let l=a*s,u=Math.sin(l)*n,d=Math.cos(l)*i;e.addPoint(ex(u,d))}return t<Uoe?o>0?Voe(e,n,i,o):e.addPoint(ex(0,0)):(e.removePoint(e.points[e.points.length-1]),o>0&&joe(e,n,i,o)),1}function Z4e(e,t,r,n=0,i=0,o=0){let a=.5522847498,s=t*a,l=r*a;e.addPoint(pP(i-t,o,i-t,o-l,i-t,o+l)),e.addPoint(pP(i,o+r,i-s,o+r,i+s,o+r)),e.addPoint(pP(i+t,o,i+t,o+l,i+t,o-l)),e.addPoint(pP(i,o-r,i+s,o-r,i-s,o-r)),n>0&&joe(e,t,r,n)}function ex(e,t){return new $b(Ht.generateUUID(),new Ae(e,t))}function pP(e,t,r,n,i,o){let a=ex(e,t);return a.controls[0].position.set(r,n),a.controls[1].position.set(i,o),a}function Voe(e,t,r,n){Hoe(e,t,r,n).forEach(i=>e.addPoint(i))}function joe(e,t,r,n){let i=Hoe(e,t,r,n),o=new gi;i.forEach(a=>o.addPoint(a)),o.isClosed=!0,e.shapeHoles.push(o)}function Hoe(e,t,r,n){let i=n*t/100,o=i*(Math.abs(r)/Math.abs(t)),a=new Ae(i/t,o/r),s=e.points.map(l=>{let u=l.clone();return u.uuid=Ht.generateUUID(),u}).reverse();return s.forEach(l=>{l.position.multiply(a);let u=l.controls[0].position.clone().multiply(a),d=l.controls[1].position.clone().multiply(a);l.controls[0].position.copy(d),l.controls[1].position.copy(u)}),s}var $4e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),n=Math.abs(r.width),i=Math.abs(r.height??n),o=Math.abs(r.depth??n),a=Math.abs(Math.min(n,o))/2;return{parameters:Object.assign(r,{width:n,height:i,depth:o,radius:a,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:n,radius:i,revolutions:o,segments:a,pathRadius:s,pathType:l,pathSegments:u,cornerRadius:d,cornerSegments:c}=e.parameters,h=new Goe(!1,t,r,n,i,o,a,s,l,u,d,c);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},WB=new Wb([0,0,0],1),Goe=class extends Jt{constructor(e=!0,t=1,r=1,n=1,i=1,o=1,a=1,s=1,l=1,u=1,d=1,c=1){if(super(),o===0)return;let h=e&&o===1;h&&(c=0),d>100&&(d=100),d===0&&(c=0);let f=()=>new X,g=new X,y=f(),m=f(),p=f(),v,b,x,_,A,M,T,C,E=f(),D=f(),I=f(),k=f(),L=f(),U=f(),W=f(),G=f(),z=r-2*s+.001,V=z/o,j=Math.ceil(a*o),H=j+1,Y=z/j,Q=-z/2,$=u+1,ne=2*Math.PI/u,Z=Math.PI/2/c,ce=.01,ae=Math.min((1-d/100)*s,s-ce),ie=s-ae,le=0,se=2,re=c*se+se,ye=$*re/se,be=ye+$*H,_e=Math.max(0,$*(H+re)),[Se,Fe,Re]=[3,3,2].map(Ce=>Array(_e*Ce).fill(0)),Le=[],rt=i-s;function st(Ce,Je){let ut=Math.PI/2;M=Je*Y,C=2*Math.PI*(M%V)/V+ut,M+=Q,T=Math.sin(C)*rt,A=Math.cos(C)*rt,e?Ce.set(A,T,M):Ce.set(A,M,T)}st(g,-1e-10),st(y,0),E.copy(g),st(g,1);let he=g.distanceTo(y),q=h?0:ie+ae,J=he*j+2*q,ge=ae,Pe=J-q;for(let Ce=0;Ce<=j;Ce++){st(m,Ce),G.subVectors(m,E).normalize(),E.copy(m),U.copy(m).setComponent(+e+1,0).normalize(),W.crossVectors(G,U).normalize();let Je=Ce===0,ut=Ce===j,pt=Je?3*Math.PI/2:Z,Ke=Je?ge:Pe,gt=Je?$:be,we=Je?0:_e-$,Xe=G.clone().multiplyScalar(Je?-ie:ie).add(m),nt=G.clone().multiplyScalar(Je?-1:1).normalize();for(let fe=0;fe<$;fe++){let Be=fe*ne;if(D.addVectors(g.copy(U).multiplyScalar(s*Math.cos(Be)),y.copy(W).multiplyScalar(s*Math.sin(Be))),I.copy(D).normalize(),Je||ut){h||(le=we+fe,[0,1,2].forEach(de=>{Se[le*3+de]=Xe.getComponent(de),Fe[le*3+de]=nt.getComponent(de)}),Re[le*2]=+ut,Re[le*2+1]=fe/u),y.copy(I).multiplyScalar(ae),p.addVectors(m,y);for(let de=0;de<c;de++){let Ye=de*Z+pt;k.addVectors(g.copy(G).multiplyScalar(ie*Math.sin(Ye)),y.copy(I).multiplyScalar(ie*Math.cos(Ye))),L.copy(k).normalize(),y.addVectors(p,k),k.normalize(),le=gt+de*$+fe,[0,1,2].forEach(ze=>{Se[le*3+ze]=y.getComponent(ze),Fe[le*3+ze]=L.getComponent(ze)});let $e=+Je+Math.sin(Ye);Re[le*2]=(Ke+ie*$e)/J,Re[le*2+1]=fe/u}}y.addVectors(m,D),le=ye+Ce*$+fe,[0,1,2].forEach(de=>{Se[le*3+de]=y.getComponent(de),Fe[le*3+de]=I.getComponent(de)}),Re[le*2]=(q+Ce*he)/J,Re[le*2+1]=fe/u}}let De=H+2*c+se,[Ve,et]=[+h,De-1];for(let Ce=Ve;Ce<=et-1;Ce++){let Je=h&&Ce===et-1;for(let ut=0;ut<$-1;ut++)v=Ce*$+ut,b=v+1,x=(Je?ut:v)+$,_=(Je?ut+1:b)+$,Ce===0?Le.push(b,_,x):Ce===De-2?Le.push(v,b,x):Le.push(v,b,x,b,_,x)}this.setIndex(Le),this.setAttribute("position",new Rt(Se,3)),this.setAttribute("normal",new Rt(Fe,3)),this.setAttribute("uv",new Rt(Re,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),r=e.radialSegments+1,n=Array.from(this.getIndex().array),i,o,a,s,l=6*(t-1)*e.radialSegments,u=t,d=u===t;for(let c=0;c<e.radialSegments;c++)i=u*r+c,o=i+1,a=(d?c:i)+r,s=(d?c+1:o)+r,n[l++]=i,n[l++]=o,n[l++]=a,n[l++]=o,n[l++]=s,n[l++]=a;return n.length=l,WB.array=n,WB.count=n.length,WB}},eVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,detail:i,corner:o,cornerSides:a}=e.parameters,s=i===0&&o!==0?new Woe(t*.5,o,a):new qne(t*.5,i);return s.scale(1,r/t,n/t),Object.assign(s,{userData:{...e,type:"IcosahedronGeometry"}})}},Woe=class extends Sj{constructor(e=1,t=.2,r=4){let n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(i,o,a,e,t,r),this.type=a}static fromJSON(e){return new Woe(e.radius,e.corner,e.cornerSides)}},tVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n;(((n=e.parameters)==null?void 0:n.points)??[]).forEach(i=>{Array.isArray(i)&&(i.x=i[0],i.y=i[1])});let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:n}=e.parameters,i=new RD;i.moveTo(t[0].x,t[0].y),i.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let o=new zne(i.extractPoints(n).shape,r);return o.rotateZ(Math.PI),Object.assign(o,{userData:{...e,type:"LatheGeometry"}})}},wc=new ft,qB=new bn,mP=new X,uO=class extends Vo{constructor(){super(),this.uuid=Ht.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Pi().getNormalMatrix(e);for(let r=0,n=this.vertices.length;r<n;r++)this.vertices[r].applyMatrix4(e);for(let r=0,n=this.faces.length;r<n;r++){let i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(let o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return wc.makeRotationX(e),this.applyMatrix4(wc),this}rotateY(e){return wc.makeRotationY(e),this.applyMatrix4(wc),this}rotateZ(e){return wc.makeRotationZ(e),this.applyMatrix4(wc),this}translate(e,t,r){return wc.makeTranslation(e,t,r),this.applyMatrix4(wc),this}scale(e,t,r){return wc.makeScale(e,t,r),this.applyMatrix4(wc),this}lookAt(e){return qB.lookAt(e),qB.updateMatrix(),this.applyMatrix4(qB.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,n=e.attributes;if(n.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let i=n.position,o=n.normal,a=n.color,s=n.uv,l=n.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let c=0;c<i.count;c++)t.vertices.push(new X().fromBufferAttribute(i,c)),a!==void 0&&t.colors.push(new tr().fromBufferAttribute(a,c));function u(c,h,f,g){let y=a===void 0?[]:[t.colors[c].clone(),t.colors[h].clone(),t.colors[f].clone()],m=o===void 0?[]:[new X().fromBufferAttribute(o,c),new X().fromBufferAttribute(o,h),new X().fromBufferAttribute(o,f)],p=new pz(c,h,f,m,y,g);t.faces.push(p),s!==void 0&&t.faceVertexUvs[0].push([new Ae().fromBufferAttribute(s,c),new Ae().fromBufferAttribute(s,h),new Ae().fromBufferAttribute(s,f)]),l!==void 0&&t.faceVertexUvs[1].push([new Ae().fromBufferAttribute(l,c),new Ae().fromBufferAttribute(l,h),new Ae().fromBufferAttribute(l,f)])}let d=e.groups;if(d.length>0)for(let c=0;c<d.length;c++){let h=d[c],f=h.start,g=h.count;for(let y=f,m=f+g;y<m;y+=3)r!==void 0?u(r.getX(y),r.getX(y+1),r.getX(y+2),h.materialIndex):u(y,y+1,y+2,h.materialIndex)}else if(r!==void 0)for(let c=0;c<r.count;c+=3)u(r.getX(c),r.getX(c+1),r.getX(c+2));else for(let c=0;c<i.count;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mP).negate(),this.translate(mP.x,mP.y,mP.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,n=new ft;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(n),this}computeFaceNormals(){let e=new X,t=new X;for(let r=0,n=this.faces.length;r<n;r++){let i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,n=this.vertices.length;r<n;r++)t[r]=new X;if(e){let r=new X,n=new X;for(let i=0,o=this.faces.length;i<o;i++){let a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c];r.subVectors(u,l),n.subVectors(s,l),r.cross(n),t[a.a].add(r),t[a.b].add(r),t[a.c].add(r)}}else{this.computeFaceNormals();for(let r=0,n=this.faces.length;r<n;r++){let i=this.faces[r];t[i.a].add(i.normal),t[i.b].add(i.normal),t[i.c].add(i.normal)}}for(let r=0,n=this.vertices.length;r<n;r++)t[r].normalize();for(let r=0,n=this.faces.length;r<n;r++){let i=this.faces[r],o=i.vertexNormals;o.length===3?(o[0].copy(t[i.a]),o[1].copy(t[i.b]),o[2].copy(t[i.c])):(o[0]=t[i.a].clone(),o[1]=t[i.b].clone(),o[2]=t[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],n=r.vertexNormals;n.length===3?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(let i=0,o=n.vertexNormals.length;i<o;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}let e=new uO;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let i=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(let a=0,s=this.faces.length;a<s;a++){let l=new X,u={a:new X,b:new X,c:new X};i.push(l),o.push(u)}}let n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let i=0,o=this.faces.length;i<o;i++){let a=this.faces[i],s=n.faceNormals[i],l=n.vertexNormals[i];s.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let n=this.faces[t];n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Oi),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ts),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let n,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,u=this.colors,d=e.colors;t!==void 0&&(n=new Pi().getNormalMatrix(t));for(let c=0,h=a.length;c<h;c++){let f=a[c].clone();t!==void 0&&f.applyMatrix4(t),o.push(f)}for(let c=0,h=d.length;c<h;c++)u.push(d[c].clone());for(let c=0,h=l.length;c<h;c++){let f=l[c],g,y,m=f.vertexNormals,p=f.vertexColors,v=new pz(f.a+i,f.b+i,f.c+i);v.normal.copy(f.normal),n!==void 0&&v.normal.applyMatrix3(n).normalize();for(let b=0,x=m.length;b<x;b++)g=m[b].clone(),n!==void 0&&g.applyMatrix3(n).normalize(),v.vertexNormals.push(g);v.color.copy(f.color);for(let b=0,x=p.length;b<x;b++)y=p[b],v.vertexColors.push(y.clone());v.materialIndex=f.materialIndex+r,s.push(v)}for(let c=0,h=e.faceVertexUvs.length;c<h;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let g=0,y=f.length;g<y;g++){let m=f[g],p=[];for(let v=0,b=m.length;v<b;v++)p.push(m[v].clone());this.faceVertexUvs[c].push(p)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],n=[],i=Math.pow(10,e);for(let s=0,l=this.vertices.length;s<l;s++){let u=this.vertices[s],d=Math.round(u.x*i)+"_"+Math.round(u.y*i)+"_"+Math.round(u.z*i);t[d]===void 0?(t[d]=s,r.push(this.vertices[s]),n[s]=r.length-1):n[s]=n[t[d]]}let o=[];for(let s=0,l=this.faces.length;s<l;s++){let u=this.faces[s];u.a=n[u.a],u.b=n[u.b],u.c=n[u.c];let d=[u.a,u.b,u.c];for(let c=0;c<3;c++)if(d[c]===d[(c+1)%3]){o.push(s);break}}for(let s=o.length-1;s>=0;s--){let l=o[s];this.faces.splice(l,1);for(let u=0,d=this.faceVertexUvs.length;u<d;u++)this.faceVertexUvs[u].splice(l,1)}let a=this.vertices.length-r.length;return this.vertices=r,a}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let n=e[t];this.vertices.push(new X(n.x,n.y,n.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;function r(s,l){return s.materialIndex-l.materialIndex}e.sort(r);let n=this.faceVertexUvs[0],i=this.faceVertexUvs[1],o,a;n&&n.length===t&&(o=[]),i&&i.length===t&&(a=[]);for(let s=0;s<t;s++){let l=e[s]._id;o&&o.push(n[l]),a&&a.push(i[l])}o&&(this.faceVertexUvs[0]=o),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let g in f)f[g]!==void 0&&(e[g]=f[g]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let g=this.vertices[f];t.push(g.x,g.y,g.z)}let r=[],n=[],i={},o=[],a={},s=[],l={};for(let f=0;f<this.faces.length;f++){let g=this.faces[f],y=!0,m=!1,p=this.faceVertexUvs[0][f]!==void 0,v=g.normal.length()>0,b=g.vertexNormals.length>0,x=g.color.r!==1||g.color.g!==1||g.color.b!==1,_=g.vertexColors.length>0,A=0;if(A=u(A,0,0),A=u(A,1,y),A=u(A,2,m),A=u(A,3,p),A=u(A,4,v),A=u(A,5,b),A=u(A,6,x),A=u(A,7,_),r.push(A),r.push(g.a,g.b,g.c),r.push(g.materialIndex),p){let M=this.faceVertexUvs[0][f];r.push(h(M[0]),h(M[1]),h(M[2]))}if(v&&r.push(d(g.normal)),b){let M=g.vertexNormals;r.push(d(M[0]),d(M[1]),d(M[2]))}if(x&&r.push(c(g.color)),_){let M=g.vertexColors;r.push(c(M[0]),c(M[1]),c(M[2]))}}function u(f,g,y){return y?f|1<<g:f&~(1<<g)}function d(f){let g=f.x.toString()+f.y.toString()+f.z.toString();return i[g]!==void 0||(i[g]=n.length/3,n.push(f.x,f.y,f.z)),i[g]}function c(f){let g=f.r.toString()+f.g.toString()+f.b.toString();return a[g]!==void 0||(a[g]=o.length,o.push(f.getHex())),a[g]}function h(f){let g=f.x.toString()+f.y.toString();return l[g]!==void 0||(l[g]=s.length/2,s.push(f.x,f.y)),l[g]}return e.data={},e.data.vertices=t,e.data.normals=n,o.length>0&&(e.data.colors=o),s.length>0&&(e.data.uvs=[s]),e.data.faces=r,e}clone(){return new uO().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let c=0,h=t.length;c<h;c++)this.vertices.push(t[c].clone());let r=e.colors;for(let c=0,h=r.length;c<h;c++)this.colors.push(r[c].clone());let n=e.faces;for(let c=0,h=n.length;c<h;c++)this.faces.push(n[c].clone());for(let c=0,h=e.faceVertexUvs.length;c<h;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let g=0,y=f.length;g<y;g++){let m=f[g],p=[];for(let v=0,b=m.length;v<b;v++){let x=m[v];p.push(x.clone())}this.faceVertexUvs[c].push(p)}}let i=e.morphTargets;for(let c=0,h=i.length;c<h;c++){let f={};if(f.name=i[c].name,i[c].vertices!==void 0){f.vertices=[];for(let g=0,y=i[c].vertices.length;g<y;g++)f.vertices.push(i[c].vertices[g].clone())}if(i[c].normals!==void 0){f.normals=[];for(let g=0,y=i[c].normals.length;g<y;g++)f.normals.push(i[c].normals[g].clone())}this.morphTargets.push(f)}let o=e.morphNormals;for(let c=0,h=o.length;c<h;c++){let f={};if(o[c].vertexNormals!==void 0){f.vertexNormals=[];for(let g=0,y=o[c].vertexNormals.length;g<y;g++){let m=o[c].vertexNormals[g],p={};p.a=m.a.clone(),p.b=m.b.clone(),p.c=m.c.clone(),f.vertexNormals.push(p)}}if(o[c].faceNormals!==void 0){f.faceNormals=[];for(let g=0,y=o[c].faceNormals.length;g<y;g++)f.faceNormals.push(o[c].faceNormals[g].clone())}this.morphNormals.push(f)}let a=e.skinWeights;for(let c=0,h=a.length;c<h;c++)this.skinWeights.push(a[c].clone());let s=e.skinIndices;for(let c=0,h=s.length;c<h;c++)this.skinIndices.push(s[c].clone());let l=e.lineDistances;for(let c=0,h=l.length;c<h;c++)this.lineDistances.push(l[c]);let u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());let d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new rVe().fromGeometry(this),t=new Jt,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",gP.call(new fr(r,3),e.vertices)),e.normals.length>0){let n=new Float32Array(e.normals.length*3);t.setAttribute("normal",gP.call(new fr(n,3),e.normals))}if(e.colors.length>0){let n=new Float32Array(e.colors.length*3);t.setAttribute("color",OX.call(new fr(n,3),e.colors))}if(e.uvs.length>0){let n=new Float32Array(e.uvs.length*2);t.setAttribute("uv",RX.call(new fr(n,2),e.uvs))}if(e.uvs2.length>0){let n=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",RX.call(new fr(n,2),e.uvs2))}t.groups=e.groups;for(let n in e.morphTargets){let i=[],o=e.morphTargets[n];for(let a=0,s=o.length;a<s;a++){let l=o[a],u=new Rt(l.data.length*3,3);u.name=l.name,i.push(gP.call(u,l.data))}t.morphAttributes[n]=i}if(e.skinIndices.length>0){let n=new Rt(e.skinIndices.length*4,4);t.setAttribute("skinIndex",IX.call(n,e.skinIndices))}if(e.skinWeights.length>0){let n=new Rt(e.skinWeights.length*4,4);t.setAttribute("skinWeight",IX.call(n,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Jt,r=e.geometry;if(e.isPoints||e.isLine){let n=new Rt(r.vertices.length*3,3),i=new Rt(r.colors.length*3,3);if(t.setAttribute("position",gP.call(n,r.vertices)),t.setAttribute("color",OX.call(i,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let o=new Rt(r.lineDistances.length,1);t.setAttribute("lineDistance",nVe.call(o,r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};uO.prototype.isGeometry=!0;var rVe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,n,i,o=e.faces;for(n=0;n<o.length;n++){let a=o[n];a.materialIndex!==i&&(i=a.materialIndex,r!==void 0&&(r.count=n*3-r.start,t.push(r)),r={start:n*3,materialIndex:i})}r!==void 0&&(r.count=n*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,n=e.faceVertexUvs,i=n[0]&&n[0].length>0,o=n[1]&&n[1].length>0,a=e.morphTargets,s=a.length,l;if(s>0){l=[];for(let m=0;m<s;m++)l[m]={name:a[m].name,data:[]};this.morphTargets.position=l}let u=e.morphNormals,d=u.length,c;if(d>0){c=[];for(let m=0;m<d;m++)c[m]={name:u[m].name,data:[]};this.morphTargets.normal=c}let h=e.skinIndices,f=e.skinWeights,g=h.length===r.length,y=f.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let m=0;m<t.length;m++){let p=t[m];this.vertices.push(r[p.a],r[p.b],r[p.c]);let v=p.vertexNormals;if(v.length===3)this.normals.push(v[0],v[1],v[2]);else{let x=p.normal;this.normals.push(x,x,x)}let b=p.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{let x=p.color;this.colors.push(x,x,x)}if(i===!0){let x=n[0][m];x!==void 0?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new Ae,new Ae,new Ae))}if(o===!0){let x=n[1][m];x!==void 0?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new Ae,new Ae,new Ae))}for(let x=0;x<s;x++){let _=a[x].vertices;l[x].data.push(_[p.a],_[p.b],_[p.c])}for(let x=0;x<d;x++){let _=u[x].vertexNormals[m];c[x].data.push(_.a,_.b,_.c)}g&&this.skinIndices.push(h[p.a],h[p.b],h[p.c]),y&&this.skinWeights.push(f[p.a],f[p.b],f[p.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},pz=class{constructor(e,t,r,n,i,o=0){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new X,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new tr,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function nVe(e){return this.array.set(e),this}function OX(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new tr),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this}function RX(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new Ae),t[r++]=o.x,t[r++]=o.y}return this}function gP(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new X),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this}function IX(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new Mr),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this}var iVe=["a","b","c"];function oVe(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function XB(e,t,r){let n=Math.min(e,t),i=Math.max(e,t),o=n+"_"+i;return r.get(o)}function YB(e,t,r,n,i,o){let a=Math.min(e,t),s=Math.max(e,t),l=a+"_"+s,u;if(n.has(l))u=n.get(l);else{let d=r[a],c=r[s];u={a:d,b:c,newEdge:null,faces:[]},n.set(l,u)}u.faces.push(i),o[e].edges.push(u),o[t].edges.push(u)}function aVe(e,t,r,n){let i,o,a;for(i=0,o=e.length;i<o;i++)r[i]={edges:[]};for(i=0,o=t.length;i<o;i++)a=t[i],YB(a.a,a.b,e,n,a,r),YB(a.b,a.c,e,n,a,r),YB(a.c,a.a,e,n,a,r)}function vP(e,t,r,n,i){e.push(new pz(t,r,n,void 0,void 0,i))}function Iy(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function yP(e,t,r,n){e.push([t.clone(),r.clone(),n.clone()])}var sVe=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Jt?e=new uO().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new X,r,n,i,o,a,s=e.vertices,l=e.faces,u=e.faceVertexUvs[0],d=u!==void 0&&u.length>0,c=[],h=new Map;aVe(s,l,c,h);let f=[],g,y,m,p,v,b,x;for(let ce of Array.from(h.keys())){for(y=h.get(ce),m=new X,v=3/8,b=1/8,x=y.faces.length,x!=2&&(v=.5,b=0,x!=1),m.addVectors(y.a,y.b).multiplyScalar(v),t.set(0,0,0),o=0;o<x;o++){for(p=y.faces[o],a=0;a<3&&(g=s[oVe(p,iVe[a])],!(g!==y.a&&g!==y.b));a++);g&&t.add(g)}t.multiplyScalar(b),m.add(t),y.newEdge=f.length,f.push(m)}let _,A,M,T,C,E,D,I=[];for(n=0,i=s.length;n<i;n++){for(E=s[n],C=c[n].edges,r=C.length,r==3?_=3/16:r>3&&(_=3/(8*r)),A=1-r*Number(_),M=_,r<=2&&(r==2?(A=3/4,M=1/8):r==1||r==0),D=E.clone().multiplyScalar(A),t.set(0,0,0),o=0;o<r;o++)T=C[o],g=T.a!==E?T.a:T.b,t.add(g);t.multiplyScalar(Number(M)),D.add(t),I.push(D)}let k=I.concat(f),L=I.length,U,W,G,z=[],V=[],j,H,Y,Q,$=new Ae,ne=new Ae,Z=new Ae;for(n=0,i=l.length;n<i;n++)p=l[n],U=Number(XB(p.a,p.b,h).newEdge)+L,W=Number(XB(p.b,p.c,h).newEdge)+L,G=Number(XB(p.c,p.a,h).newEdge)+L,vP(z,U,W,G,p.materialIndex),vP(z,p.a,U,G,p.materialIndex),vP(z,p.b,W,U,p.materialIndex),vP(z,p.c,G,W,p.materialIndex),d&&(j=u[n],H=j[0],Y=j[1],Q=j[2],$.set(Iy(H.x,Y.x),Iy(H.y,Y.y)),ne.set(Iy(Y.x,Q.x),Iy(Y.y,Q.y)),Z.set(Iy(H.x,Q.x),Iy(H.y,Q.y)),yP(V,$,ne,Z),yP(V,H,$,Z),yP(V,Y,ne,$),yP(V,Q,Z,ne));e.vertices=k,e.faces=z,d&&(e.faceVertexUvs[0]=V)}},Zi=new X,lVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=e.geometry??(t==null?void 0:t.geometry)??new Jt().copy(new nd(100,100,100)),n;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(Zi),n={width:Zi.x,height:Zi.y,depth:Zi.z,subdivisions:0}):n=t.parameters;let i={...n,...e.parameters};return{parameters:{width:Math.abs(i.width),height:Math.abs(i.height),depth:Math.abs(i.depth),subdivisions:Math.abs(i.subdivisions)},geometry:r}}static build(e){let{width:t,height:r,depth:n,subdivisions:i}=e.parameters,o=e.geometry??new Jt().copy(new nd(100,100,100)),a=o.userData.parameters;a===void 0?(o.computeBoundingBox(),o.boundingBox.getSize(Zi)):Zi.set(a.width,a.height,a.depth),(t!==Zi.x||r!==Zi.y||n!==Zi.z)&&o.scale(Zi.x===0?1:t/Zi.x,Zi.y===0?1:r/Zi.y,Zi.z===0?1:n/Zi.z);let s=o.originalGeometry;try{i>0?(s===void 0||(a==null?void 0:a.subdivisions)!==i)&&(s===void 0&&(s=o),o=new sVe(i).modify(s).toBufferGeometry()):(s!==void 0&&(o=s),s=void 0,o.getAttribute("normal")===void 0&&o.computeVertexNormals())}catch{s!==void 0&&(o=s),s=void 0,o.getAttribute("normal")===void 0&&o.computeVertexNormals()}return s!==void 0&&Object.assign(o,{originalGeometry:s}),delete e.geometry,Object.assign(o,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new eie(r).load(e,n=>{let i=this.normalizeInputs({geometry:n});n.boundingBox.getSize(Zi);let o=100/Zi.x;Object.assign(i.parameters,{width:100,height:Zi.y*o,depth:Zi.z*o}),t(this.build(i))})}},qoe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof gi?e.shape:new gi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:n,cornerRadius:i,depth:o,extrudeBevelSize:a,extrudeBevelSegments:s}=e.parameters,l=e.shape,u=t*.5,d=r*.5,c=0,h=0,f=2*Math.PI/n;for(let y=0;y<n;y++){let m=f*y,p=c+Math.sin(m)*u,v=h+Math.cos(m)*d;l.addPoint(l.createPoint(p,v))}l.isClosed=!0;for(let y=0,m=l.points.length;y<m;y++)l.points[y].roundness=i;l.roundness=i,l.update();let g=B0.create({shape:l,parameters:{roundness:i,depth:o,extrudeBevelSize:a,extrudeBevelSegments:s}});return Object.assign(g,{userData:{...e,type:"PolygonGeometry"}})}},uVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,radialSegments:i,heightSegments:o,openEnded:a,cornerRadius:s,cornerSegments:l}=e.parameters,u=new dVe(t*.5,r,i,o,a,s,l);return u.scale(1,1,n/t),Object.assign(u,{userData:{...e,type:"PyramidGeometry"}})}};function T_(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function KB(e,t,r,n,i,o){let a=t.clone().sub(e),s=r.clone().sub(e),l=a.angleTo(s);if(a.normalize(),s.normalize(),n===i){let u=a.add(s).normalize();o.copy(e).addScaledVector(u,n/Math.sin(l/2))}else{let u=a.angleTo(s);o.copy(e),o.addScaledVector(a,i/Math.sin(u)),o.addScaledVector(s,n/Math.sin(u))}}function cVe(e,t,r){let n=e.clone().sub(t),i=r.clone().sub(t);return n.projectOnVector(i),n.add(t)}var dVe=class extends Jt{constructor(e=.5,t=1,r=4,n=1,i=!1,o=0,a=4){super(),r=Math.floor(Math.max(3,r)),n=Math.floor(n),a=Math.floor(a);let s=[],l=[],u=[],d=[],c=0,h=t/2,f=Math.PI/r,g=e*Math.cos(Math.PI/r),y=2*Math.PI/r,m=(r-2)*Math.PI/r,p=Math.PI-m,v=new X(0,-h,0),b=new X(0,h,0),x=new Ae(e,-h),_=new Ae(g,-h),A=new Ae(0,b.y).sub(_),M=new Ae(0,b.y).sub(x),T=new Ae(A.y,-A.x).normalize(),C=new Ae(M.y,-M.x).normalize(),E=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-A.angle())/2)-1e-8;o=Math.min(o,E);let D;{let G=new X(T.x,T.y,0),z=new X(Math.cos(y)*G.x,G.y,Math.sin(y)*G.x);D=G.angleTo(z)}let I=o/Math.tan((Math.PI-A.angle())/2),k=o/Math.tan((Math.PI-D)/2),L=new X;if(!i){l.push(v.x,v.y,v.z),u.push(0,-1,0),d.push(0,0);let G=c++,z=[],V=x.clone(),j=I/Math.cos(Math.PI/r);V.x-=j;for(let H=0;H<r;H++){let Y=H/r*Math.PI*2+f,Q=new Ae(Math.sin(Y),Math.cos(Y));T_(V,Q,L),l.push(L.x,L.y,L.z),u.push(0,-1,0),d.push(0,0),z.push(c++)}for(let H=0;H<z.length;H++)s.push(z[H],G,z[(H+1)%z.length])}{let G=new X,z=new X,V=new X,j=new X,H=new X,Y=new X;for(let Q=0;Q<r;Q++){let $=Q/r*Math.PI*2+f,ne=(Q+.5)/r*Math.PI*2+f,Z=(Q+1)/r*Math.PI*2+f,ce=new Ae(Math.sin($),Math.cos($)),ae=new Ae(Math.sin(ne),Math.cos(ne)),ie=new Ae(Math.sin(Z),Math.cos(Z));T_(x,ce,z),T_(x,ie,V),T_(T,ae,G),KB(b,z,V,k,k,j),l.push(j.x,j.y,j.z),KB(z,b,V,k,I,H),l.push(H.x,H.y,H.z),KB(V,z,b,I,k,Y),l.push(Y.x,Y.y,Y.z),u.push(G.x,G.y,G.z),u.push(G.x,G.y,G.z),u.push(G.x,G.y,G.z),d.push(0,0),d.push(0,0),d.push(0,0);let le=c++,se=c++,re=c++;if(s.push(le,se,re),o>0){{let _e=z.clone().add(V).multiplyScalar(.5),Se=b.clone().sub(_e).normalize(),Fe=v.clone().sub(_e).normalize().add(Se).normalize().multiplyScalar(-1),Re=Y.clone().sub(H);U(_e,Re,Fe,A.angle())}let ye,be;{let _e=new X;T_(C,ie,_e);let Se=Y.clone().add(j).multiplyScalar(.5);Se=cVe(Se,V,b);let Fe=Y.clone().sub(j);[ye,be]=U(Se,Fe,_e,D,j.y)}{let _e=ye,Se=_e.clone().setY(0).normalize(),Fe=new X(0,-1,0),Re=Se.clone().cross(Fe);W(_e,Se,Fe,Re)}{let _e=A.angle(),Se=Math.PI-_e,Fe=b.clone();Fe.y-=o/Math.sin(_e-Math.PI/2);let Re=new X,Le=[];for(let st=0;st<a;st++){let he=[],q=Math.PI/2-Se*st/a,J=Math.cos(q),ge=Math.sin(q),Pe=ne;for(let De=0;De<=st;De++){let Ve=Math.cos(Pe),et=Math.sin(Pe);G.x=J*et,G.y=ge,G.z=J*Ve,Re.copy(Fe).addScaledVector(G,o),l.push(Re.x,Re.y,Re.z),u.push(G.x,G.y,G.z),d.push(0,0),he.push(c++),Pe+=Math.PI*2/st/r}Le.push(he)}be.reverse(),Le.push(be);let rt=Le.length-1;for(let st=0;st<rt;st++){let he=Le[st],q=Le[st+1],J=he.length-1;s.push(q[1],he[0],q[0]);for(let ge=1;ge<=J;ge++)s.push(he[ge],he[ge-1],q[ge]),s.push(q[ge+1],he[ge],q[ge])}}}}}this.setIndex(s),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(u,3)),this.setAttribute("uv",new Rt(d,2));function U(G,z,V,j,H){let Y=-j/2,Q=(Math.PI-j)/2,$=z.clone().normalize().cross(V);G.addScaledVector(V,-o/Math.sin(Q));let ne=new X,Z=new X,ce=1,ae=c,ie=[];for(let le=0;le<=a;le++){let se=Y+le/a*j;Z.set(0,0,0),Z.addScaledVector($,Math.sin(se)),Z.addScaledVector(V,Math.cos(se));for(let re=0;re<=ce;re++){let ye=re/ce-.5;if(ne.copy(G),ne.addScaledVector(z,ye),ne.addScaledVector(Z,o),H!=null){let be=Math.max(0,ne.y-H);ne.addScaledVector(z,-be/z.y)}l.push(ne.x,ne.y,ne.z),u.push(Z.x,Z.y,Z.z),d.push(0,0),re===0&&ie.push(c),c++}}for(let le=0;le<a;le++)for(let se=0;se<ce;se++){let re=ae+se+(ce+1)*le,ye=re+(ce+1),be=ye+1,_e=re+1;s.push(re,ye,_e),s.push(ye,be,_e)}return[G.clone().addScaledVector(z,.5),ie]}function W(G,z,V,j){let H=Math.PI/2,Y=M.angle()-H,Q=[],$=new X,ne=new X;for(let ce=0;ce<=a;ce++){let ae=[],ie=ce/a;for(let le=0;le<=ce;le++){let se=((ce?le/ce:0)-.5)*p,re=Math.cos(se),ye=Math.sin(se),be=Math.atan(Math.tan(Y)*re),_e=(H+be)*ie,Se=Math.cos(_e),Fe=Math.sin(_e);$.set(0,0,0),$.addScaledVector(z,Fe*re),$.addScaledVector(V,Se),$.addScaledVector(j,Fe*ye),ne.copy(G).addScaledVector($,o),l.push(ne.x,ne.y,ne.z),u.push($.x,$.y,$.z),d.push(0,0),ae.push(c++)}Q.push(ae)}let Z=Q.length-1;for(let ce=0;ce<Z;ce++){let ae=Q[ce],ie=Q[ce+1],le=ae.length-1;s.push(ae[0],ie[1],ie[0]);for(let se=1;se<=le;se++)s.push(ae[se-1],ae[se],ie[se]),s.push(ae[se],ie[se+1],ie[se])}}}},Xoe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),n=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof gi?e.shape:new gi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)}),ui:n}}static build(e){let t=e.shape,{width:r,height:n,cornerRadius:i,cornerType:o,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u={x:r*.5,y:n*.5},d={x:-u.x,y:-u.y},c={x:u.x,y:u.y};function h(x,_,A){return _>r&&A>n?Math.min(x*r/_,x*n/A):_>r?x*r/_:A>n?x*n/A:x}let f=[];f[0]=i[0]===0?0:h(i[0],i[0]+i[3],i[0]+i[1]),f[1]=i[1]===0?0:h(i[1],i[1]+i[2],i[1]+i[0]),f[2]=i[2]===0?0:h(i[2],i[2]+i[1],i[2]+i[3]),f[3]=i[3]===0?0:h(i[3],i[3]+i[0],i[3]+i[2]);let g=d.x,y=c.x,m=c.y,p=d.y;t.addPoint(t.createPoint(g,m)),t.addPoint(t.createPoint(y,m)),t.addPoint(t.createPoint(y,p)),t.addPoint(t.createPoint(g,p)),t.isClosed=!0;let v=!0;for(let x=0,_=t.points.length;x<_;x++)t.points[x].roundness=f[x],x>0&&f[x]!==f[x-1]&&(v=!1);v&&(t.roundness=f[0]),t.useCubicForRoundedCorners=o!==1,t.update();let b=B0.create({shape:t,parameters:{depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(b,{userData:{...e,type:"RectangleGeometry"}})}},hVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return r.thetaLength=Ht.clamp(r.thetaLength,0,180),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t=100,height:r=t,depth:n=t,widthSegments:i=64,heightSegments:o=64,phiStart:a,phiLength:s,thetaStart:l,thetaLength:u}=e.parameters,d;return u===0?(d=new Jt,d.setAttribute("position",new Rt([],3))):d=new VV(.5*t,i,o,a,s,l,u*Ht.DEG2RAD),d.scale(1,r/t,n/t),Object.assign(d,{userData:{...e,type:"SphereGeometry"}})}},fVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:n=8,heightSegments:i=8}=e.parameters,o=new jR(t,r,n,i);return o.scale(1,1,1),Object.assign(o,{userData:{...e,type:"PlaneGeometry"}})}},pVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:n,angle:i,cornerRadius:o,cornerSegments:a}=e.parameters,s=new mVe(t,r,n,i,o,a);return Object.assign(s,{userData:{...e,type:"BackdropGeometry"}})}},mVe=class extends Jt{constructor(e=1,t=1,r=1,n=90,i=10,o=24){super(),this.type="BackdropGeometry";let a=[],s=[],l=[],u=.001;i==0&&(o=1),o=Math.max(1,Math.floor(o)),i=Math.min(i,100),n=Math.min(180-u,n),n*=Math.PI/180;let d=[],c=Math.PI/2,h=(ce=0,ae=0,ie=0)=>new X(ce,ae,ie),f=h(),g=h(),[y,m,p]=[t/2,e/2,r/2],v=-m,b=+m,[x,_,A]=[h(v,-y,+p),h(v,-y,-p),h(v,+y,-p)],M=(ce,ae=!1)=>Math.sin(ce-Math.PI/(1+ +ae)),T=(ce,ae=!1)=>Math.cos(ce-Math.PI/(1+ +ae));A.y=Math.sin(n)*t-y;let C=Math.cos(n)*t-p,E=x.z-u;n<=c?(A.z=Math.min(C,E),A.z==E&&(A.y-=(C-E)/Math.tan(c-n))):_.z=Math.min(_.z-C-p,x.z-u),f.subVectors(x,_),g.subVectors(A,_);let D=Math.min(f.length(),g.length())*i/100,I=D*Math.tan(n/2),k=D/Math.cos(n/2),L=f.clone().normalize().add(g.normalize()).setLength(k).add(_);f.set(0,M(n,!0),T(n,!0)),d.push([A,f.clone()]);let U=(Math.PI-n)/o;for(let ce=0;ce<=o;ce++){let ae=c+n+ce*U;f.set(0,Math.sin(ae)*I,Math.cos(ae)*I),f.add(L),g.set(0,M(ae),T(ae)),d.push([f.clone(),g.clone()])}d.push([x,h(0,1,0)]);let W=Math.sin(U/2)*I*2,G=d.length-1,z=d[0][0].distanceTo(d[1][0]),V=d[G-1][0].distanceTo(d[G][0]),j=z+W*o+V;d[0].push(1);for(let ce=0;ce<=o;ce++)d[ce+1].push(1-(z+ce*W)/j);d[G].push(0);let[H,Y,Q]=d[0],$,ne,Z;for(let ce=1;ce<d.length;ce++)[$,ne,Z]=d[ce],a.push(v,H.y,H.z,v,$.y,$.z,b,H.y,H.z,b,H.y,H.z,v,$.y,$.z,b,$.y,$.z),s.push(0,Y.y,Y.z,0,ne.y,ne.z,0,Y.y,Y.z,0,Y.y,Y.z,0,ne.y,ne.z,0,ne.y,ne.z),l.push(0,Q,0,Z,1,Q,1,Q,0,Z,1,Z),[H,Y,Q]=[$,ne,Z];this.setAttribute("position",new Rt(a,3)),this.setAttribute("normal",new Rt(s,3)),this.setAttribute("uv",new Rt(l,2))}},Yoe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof gi?e.shape:new gi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:n,spikes:i,cornerRadius:o,angle:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}=e.parameters,d=e.shape,c=t*.5,h=r*.5,f=0,g=0,y=a*Math.PI/360/i,m=Math.PI/2*3*-1,p=c*n/100,v=h*n/100;if(i===3&&n===50){y=2*Math.PI/i;for(let x=0;x<i;x++){let _=y*x,A=f+Math.sin(_)*c,M=g+Math.cos(_)*h;d.addPoint(d.createPoint(A,M))}}else for(let x=0;x<i;x++){let _=f+Math.cos(m)*c,A=g+Math.sin(m)*h;d.addPoint(d.createPoint(_,A)),m+=y,_=f+Math.cos(m)*p,A=g+Math.sin(m)*v,d.addPoint(d.createPoint(_,A)),m+=y}d.isClosed=!0;for(let x=0,_=d.points.length;x<_;x++)d.points[x].roundness=o;d.roundness=o,d.update();let b=B0.create({shape:d,parameters:{roundness:o,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(b,{userData:{...e,type:"StarGeometry"}})}},gVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r}=e.parameters,n=new jR(t,r);return Object.assign(n,{userData:{...e,type:"TextFrameGeometry"}})}},vVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),n=Math.abs(r.width),i=Math.abs(r.height??r.width),o=Math.round(Math.abs(r.depth??r.width*.25));return{parameters:Object.assign(r,{width:n,height:i,depth:o})}}static build(e){let{width:t,height:r,depth:n,radialSegments:i,tubularSegments:o,arc:a,cornerRadius:s,cornerSegments:l}=e.parameters,u=yVe(t,r,n,t*.5,a,o,0,0,i,s,l);return u.scale(1,r/t,1),Object.assign(u,{userData:{...e,type:"TorusGeometry"}})}};function yVe(e,t,r,n,i,o,a,s,l,u,d){[t,r]=[r,t],a=t/2;let c=Ht.clamp(i/360,0,1);if(c===0){let h=new Jt;return h.setAttribute("position",new Rt([],3)),h}return c===1&&(u=0),new Goe(!0,e,t,r,n,c,o,a,s,l,u,d)}var bVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),tube:r.tube??r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:n,radialSegments:i,p:o,q:a}=e.parameters,s=t*.5;s!==r&&(s-=r);let l=new Xne(s,r,n,i,o,a);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},xVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof gi?e.shape:new gi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t=100,height:r,cornerRadius:n,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a,isRect:s}=e.parameters,l=e.shape,u=t*.5,d=r*.5;s?(l.addPoint(l.createPoint(-u,d)),l.addPoint(l.createPoint(u,-d)),l.addPoint(l.createPoint(-u,-d))):(l.addPoint(l.createPoint(0,d)),l.addPoint(l.createPoint(u,-d)),l.addPoint(l.createPoint(-u,-d))),l.isClosed=!0;for(let h=0,f=l.points.length;h<f;h++)l.points[h].roundness=n;l.roundness=n,l.update();let c=B0.create({shape:l,parameters:{roundness:n,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(c,{userData:{...e,type:"TriangleGeometry"}})}};function wVe(e,t){let r=2*Math.PI;return(e%r+r)%r===(t%r+r)%r}var _Ve=class{add(e,t,r){if(typeof arguments[0]!="string")for(let n in arguments[0])this.add(n,arguments[0][n],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(n){this[n]=this[n]||[],t&&this[n][r?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(r){r.call(t&&t.context?t.context:t,t)})}},SVe=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},ot=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+ot.version}static addUnaryOp(e){return ot.max_unop_len=Math.max(e.length,ot.max_unop_len),ot.unary_ops[e]=1,ot}static addBinaryOp(e,t,r){return ot.max_binop_len=Math.max(e.length,ot.max_binop_len),ot.binary_ops[e]=t,r?ot.right_associative.add(e):ot.right_associative.delete(e),ot}static addIdentifierChar(e){return ot.additional_identifier_chars.add(e),ot}static addLiteral(e,t){return ot.literals[e]=t,ot}static removeUnaryOp(e){return delete ot.unary_ops[e],e.length===ot.max_unop_len&&(ot.max_unop_len=ot.getMaxKeyLen(ot.unary_ops)),ot}static removeAllUnaryOps(){return ot.unary_ops={},ot.max_unop_len=0,ot}static removeIdentifierChar(e){return ot.additional_identifier_chars.delete(e),ot}static removeBinaryOp(e){return delete ot.binary_ops[e],e.length===ot.max_binop_len&&(ot.max_binop_len=ot.getMaxKeyLen(ot.binary_ops)),ot.right_associative.delete(e),ot}static removeAllBinaryOps(){return ot.binary_ops={},ot.max_binop_len=0,ot}static removeLiteral(e){return delete ot.literals[e],ot}static removeAllLiterals(){return ot.literals={},ot}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new ot(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return ot.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!ot.binary_ops[String.fromCharCode(e)]||ot.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return ot.isIdentifierStart(e)||ot.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(ot.hooks[e]){let r={context:this,node:t};return ot.hooks.run(e,r),r.node}return t}searchHook(e){if(ot.hooks[e]){let t={context:this};return ot.hooks[e].find(function(r){return r.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===ot.SPACE_CODE||e===ot.TAB_CODE||e===ot.LF_CODE||e===ot.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=e.length===1?e[0]:{type:ot.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t=[],r,n;for(;this.index<this.expr.length;)if(r=this.code,r===ot.SEMCOL_CODE||r===ot.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())t.push(n);else if(this.index<this.expr.length){if(r===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,ot.max_binop_len),t=e.length;for(;t>0;){if(ot.binary_ops.hasOwnProperty(e)&&(!ot.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!ot.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,r,n,i,o,a,s,l;if(o=this.gobbleToken(),!o||(t=this.gobbleBinaryOp(),!t))return o;for(i={value:t,prec:ot.binaryPrecedence(t),right_a:ot.right_associative.has(t)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+t),n=[o,i,a];t=this.gobbleBinaryOp();){if(r=ot.binaryPrecedence(t),r===0){this.index-=t.length;break}i={value:t,prec:r,right_a:ot.right_associative.has(t)},l=t;let u=d=>i.right_a&&d.right_a?r>d.prec:r<=d.prec;for(;n.length>2&&u(n[n.length-2]);)a=n.pop(),t=n.pop().value,o=n.pop(),e={type:ot.BINARY_EXP,operator:t,left:o,right:a},n.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),n.push(i,e)}for(s=n.length-1,e=n[s];s>1;)e={type:ot.BINARY_EXP,operator:n[s-1].value,left:n[s-2],right:e},s-=2;return e}gobbleToken(){let e,t,r,n;if(this.gobbleSpaces(),n=this.searchHook("gobble-token"),n)return this.runHook("after-token",n);if(e=this.code,ot.isDecimalDigit(e)||e===ot.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===ot.SQUOTE_CODE||e===ot.DQUOTE_CODE)n=this.gobbleStringLiteral();else if(e===ot.OBRACK_CODE)n=this.gobbleArray();else{for(t=this.expr.substr(this.index,ot.max_unop_len),r=t.length;r>0;){if(ot.unary_ops.hasOwnProperty(t)&&(!ot.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!ot.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=r;let i=this.gobbleToken();return i||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:ot.UNARY_EXP,operator:t,argument:i,prefix:!0})}t=t.substr(0,--r)}ot.isIdentifierStart(e)?(n=this.gobbleIdentifier(),ot.literals.hasOwnProperty(n.name)?n={type:ot.LITERAL,value:ot.literals[n.name],raw:n.name}:n.name===ot.this_str&&(n={type:ot.THIS_EXP})):e===ot.OPAREN_CODE&&(n=this.gobbleGroup())}return n?(n=this.gobbleTokenProperty(n),this.runHook("after-token",n)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===ot.PERIOD_CODE||t===ot.OBRACK_CODE||t===ot.OPAREN_CODE||t===ot.QUMARK_CODE;){let r;if(t===ot.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==ot.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===ot.OBRACK_CODE?(e={type:ot.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==ot.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===ot.OPAREN_CODE?e={type:ot.CALL_EXP,arguments:this.gobbleArguments(ot.CPAREN_CODE),callee:e}:(t===ot.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),e={type:ot.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),r&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e="",t,r;for(;ot.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===ot.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);ot.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,t==="e"||t==="E"){for(e+=this.expr.charAt(this.index++),t=this.char,(t==="+"||t==="-")&&(e+=this.expr.charAt(this.index++));ot.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);ot.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return r=this.code,ot.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(r===ot.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===ot.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:ot.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,r=this.expr.charAt(this.index++),n=!1;for(;this.index<this.expr.length;){let i=this.expr.charAt(this.index++);if(i===r){n=!0;break}else if(i==="\\")switch(i=this.expr.charAt(this.index++),i){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=i}else e+=i}return n||this.throwError('Unclosed quote after "'+e+'"'),{type:ot.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(ot.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,ot.isIdentifierPart(e));)this.index++;return{type:ot.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],r=!1,n=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let i=this.code;if(i===e){r=!0,this.index++,e===ot.CPAREN_CODE&&n&&n>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(i===ot.COMMA_CODE){if(this.index++,n++,n!==t.length){if(e===ot.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===ot.CBRACK_CODE)for(let o=t.length;o<n;o++)t.push(null)}}else if(t.length!==n&&n!==0)this.throwError("Expected comma");else{let o=this.gobbleExpression();(!o||o.type===ot.COMPOUND)&&this.throwError("Expected comma"),t.push(o)}}return r||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(ot.CPAREN_CODE);if(this.code===ot.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:ot.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:ot.ARRAY_EXP,elements:this.gobbleArguments(ot.CBRACK_CODE)}}},AVe=new _Ve;Object.assign(ot,{hooks:AVe,plugins:new SVe(ot),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});ot.max_unop_len=ot.getMaxKeyLen(ot.unary_ops);ot.max_binop_len=ot.getMaxKeyLen(ot.binary_ops);var Hx=e=>new ot(e).parse(),MVe=Object.getOwnPropertyNames(ot);MVe.forEach(e=>{Hx[e]===void 0&&e!=="prototype"&&(Hx[e]=ot[e])});Hx.Jsep=ot;var CVe="ConditionalExpression",TVe={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let r=t.node,n=this.gobbleExpression();if(n||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let i=this.gobbleExpression();if(i||this.throwError("Expected expression"),t.node={type:CVe,test:r,consequent:n,alternate:i},r.operator&&e.binary_ops[r.operator]<=.9){let o=r;for(;o.right.operator&&e.binary_ops[o.right.operator]<=.9;)o=o.right;t.node.test=o.right,o.right=t.node,t.node=r}}else this.throwError("Expected :")}})}};Hx.plugins.register(TVe);var EVe=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],PVe=["0","1","2","3","4","5","6","7","8","9","."],DVe=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function OVe(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}Hx.addBinaryOp("^",11,!0);function Koe(e,t,r="number"){let n="";for(let a=0;a<e.length;a++){let s=e[a];if("id"in s){let l=e[a-1];if(a>0&&"id"in l){console.error("Two variables in a row",e);return}let u=t.getVariable(s.id),d=Zs.getDisplayedValue(u);r==="number"&&Zs.isTextValue(u)&&Array.isArray(u.textValue)&&u.textValue.length===1?d=parseFloat(d).toString():r==="boolean"&&Zs.isBoolean(u)?d=u?"true":"false":r==="boolean"&&Zs.isTextValue(u)&&!Array.isArray(u.textValue)&&(d='"'+d+'"'),n+=d;continue}else if(r==="string"){s.name!=='"'&&s.name!=="+"&&(n+=s.name),s.name==="+"&&n[n.length-1]==="\\"&&(n=n.slice(0,-1)+s.name);continue}if(s.name==="and"){n+="&&";continue}if(s.name==="or"){n+="||";continue}if(s.name==="True"){n+="true";continue}if(s.name==="False"){n+="false";continue}if(r==="boolean"&&!OVe(s.name)&&!PVe.includes(s.name)&&!EVe.includes(s.name)&&!DVe.includes(s.name.replace(/\($/g,""))){n+='"'+s.name+'"';continue}n+=s.name}if(r==="string")return n;if(e.length===0){if(r==="number")return 0;if(r==="boolean")return!1}let i;try{i=Hx(n)}catch(a){console.error(n,a);return}let o;try{o=Kr(i)}catch(a){console.error(n,i,a)}return o}function Kr(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(Kr(e.left)===Kr(e.right));case"!=":return+(Kr(e.left)!==Kr(e.right));case">":return+(Kr(e.left)>Kr(e.right));case">=":return+(Kr(e.left)>=Kr(e.right));case"<":return+(Kr(e.left)<Kr(e.right));case"<=":return+(Kr(e.left)<=Kr(e.right));case"+":return Kr(e.left)+Kr(e.right);case"-":return Kr(e.left)-Kr(e.right);case"*":return Kr(e.left)*Kr(e.right);case"/":return Kr(e.left)/Kr(e.right);case"%":return Kr(e.left)%Kr(e.right);case"&&":return Kr(e.left)&&Kr(e.right);case"||":return Kr(e.left)||Kr(e.right);case"^":return Math.pow(Kr(e.left),Kr(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-Kr(e.argument);case"!":return+!Kr(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,r=1;if(e.arguments.length>=1)try{t=Kr(e.arguments[0])}catch(n){console.warn(n)}if(e.arguments.length>=2)try{r=Kr(e.arguments[1])}catch(n){console.warn(n)}return t=Math.min(r,t),r=Math.max(r,t),t+Math.random()*(r-t)}return Math[e.callee.name].apply(null,e.arguments.map(Kr))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var RVe=new ft,IVe=new ft;function LVe(e,t,r){let n=[new X,new X,new X],i=[new X,new X,new X];return e.extractBasis(n[0],n[1],n[2]),t.extractBasis(i[0],i[1],i[2]),n.forEach((o,a)=>{let s=i[a],l=Ht.lerp(o.length(),s.length(),r);o.lerp(s,r).setLength(l)}),new ft().makeBasis(n[0],n[1],n[2])}var BVe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),n=Math.abs(r.width),i=Math.abs(r.height??r.width),o=Math.abs(r.depth??0),a=(t==null?void 0:t.shapeData)??Ej.create({parameters:yoe}).userData.shape;return{path:e.path??ZD.defaultData(),parameters:Object.assign(r,{width:n,height:i,depth:o,extrusion:{...boe,...r.extrusion}}),shapeData:a}}static build(e){if(e.path.points.length>=2){let t=new NVe(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Jt,{userData:{...e,type:"PathGeometry"}})}},NVe=class extends Jt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!wVe(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:r,offset:n}=this.inputs.parameters.extrusion;r=Math.max(0,Math.min(r,1)),n=Math.max(0,Math.min(n,1));let i=this.inputs.path.isClosed?e.length:e.length-1,o=Math.floor(n*i),a=this.inputs.path.isClosed?Math.ceil((r+n)*i):Math.ceil(Math.min(1,r+n)*i),s=Math.min(Math.max(2,a-o+1),i+2),l=[],u=[];for(let G=0;G<s;G++){let z=this.inputs.path.isClosed?(G+o)%e.length:Math.min(G+o,e.length-1);l.push(e[z].clone()),u.push(t[z].clone())}let d=(G,z,V)=>{l[G]=l[G].clone().lerp(l[z],V),u[G]=LVe(u[G],u[z],V)},c=0,h=n*i%1;(!this.inputs.path.isClosed||r<=1)&&(h||n===0)&&(c=h,d(0,1,c));let f=0,g=(n+r)*i%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&n+r<1)&&g&&(f=g,d(l.length-1,l.length-2,1-f)),r===0){let G=l.length-1;l[G].copy(l[0]),u[G].copy(u[0])}this._applyPathModifiers(u,c,f);let{bevel:y,bevelSides:m}=this.inputs.parameters.extrusion,p=y>0?this.inputs.parameters.extrusion.capType:"flat",v=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(v=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:b,infos:x,vertices:_}=this._computeShapePoints(v),A=0,M;p==="round"&&(M=new Tj(this.inputs.shapeData,2*y,y,v,m,void 0,!0),A=M.getAttribute("position").count);let T=0,C=0;x.sort((G,z)=>G.start-z.start),x.forEach(G=>{G.verticesStart=T,G.verticesCount=G.continuous.reduce((z,V,j)=>z+(j===0||!V?2:1),0),C+=G.verticesCount,T=C});let E=C*s,D,I=0;if(this._isOpenEnded()&&p==="flat"){try{D=hp({windingRule:gn.ODD,elementType:Vi.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:b})}catch{D=koe}I=D.vertexCount}let k=E+2*I+A*2,L=E+2*I,U={positions:new Float32Array(k*3),normals:new Float32Array(k*3),uvs:new Float32Array(k*2)},W=[];if(x.forEach(G=>{this._extrudeRegion(G,_,u,l,U,W,this._isGeometryClosed()&&!this._isOpenEnded())}),D&&(this._closeEnd(D,E,W,U,u[0],l[0],!1),this._closeEnd(D,E+I,W,U,u[u.length-1],l[l.length-1],!0)),M){U.positions.set(M.getAttribute("position").array,L*3),U.normals.set(M.getAttribute("normal").array,L*3),U.uvs.set(M.getAttribute("uv").array,L*2);let G=W.length;W.push(...M.getIndex().array.map(j=>j+L)),L+=A,U.positions.set(M.getAttribute("position").array,L*3),U.normals.set(M.getAttribute("normal").array,L*3),U.uvs.set(M.getAttribute("uv").array,L*2);let z=W.length;W.push(...M.getIndex().array.map(j=>j+L)),this.setAttribute("position",new fr(U.positions,3)),this.setAttribute("normal",new fr(U.normals,3)),this.setAttribute("uv",new fr(U.uvs,2)),this.setIndex(W);let V=RVe;V.copy(u[u.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(V,L,k),V.copy(u[0]).setPosition(l[0]).multiply(IVe.makeScale(1,1,-1)),this.applyMatrix4OnRange(V,L-A,L),this.reverseIndicesOnRange(G,z)}else this.setAttribute("position",new fr(U.positions,3)),this.setAttribute("normal",new fr(U.normals,3)),this.setAttribute("uv",new fr(U.uvs,2)),this.setIndex(W)}_extractPathPoints(){let e=Eoe(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(r=>{t[t.length-1].distanceToSquared(r)>.001&&t.push(r)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],r=e.length,n=this.inputs.path.isClosed,i=new X,o=new X,a=new X,s=new X,l=new X(0,1,0);for(let g=0;g<r;g++){let y=e[g],m;g===0?m=n?e[e.length-2]:y.clone().multiplyScalar(2).sub(e[1]):m=e[g-1];let p;g===r-1?p=n?e[1]:y.clone().multiplyScalar(2).sub(e[g-1]):p=e[g+1];let v=y.clone().sub(m).normalize(),b=p.clone().sub(y).normalize(),x=v.clone().add(b).normalize();a.copy(x),g===0&&(x.equals(l)||x.clone().negate().equals(l))&&l.set(0,0,1);let _=l.clone().cross(x).normalize(),A=x.clone().cross(_).normalize();l.copy(A),s.copy(_),g===0&&(i.copy(A),o.copy(x));let M=new ft().makeBasis(_,A,x);t.push(M)}let u=n?o:a,d=n?i:new X(0,1,0),c=u.clone().cross(s).normalize(),h=Math.acos(d.dot(c));if(isNaN(h))return t;let f=d.clone().cross(c);u.dot(f)>0&&(h*=-1);for(let g=1;g<t.length;g++){let y=new ft().makeRotationZ(h*g/t.length);t[g].multiply(y)}return t}_applyPathModifiers(e,t,r){let n=e.length,{angle:i,twist:o,startScale:a,endScale:s}=this.inputs.parameters.extrusion,l=new ft,u=new ft;return e.forEach((d,c)=>{let h=c===0?0:c===n-1?1:(c-t)/(n-(r===0?0:1)-(t+(1-r)));l.makeRotationZ(Ht.lerp(i,i+o,h)*Ht.DEG2RAD);let f=Ht.lerp(a,s,h);u.makeScale(f,f,f),d.multiply(l).multiply(u)}),e}_computeShapePoints(e=12,t=gn.ODD){let r=this.inputs.shapeData,n=r.extractShapePointsToFlatArray([],e),i=r.shapeHoles.map(u=>{let d=u.extractShapePointsToFlatArray([],e),c=[];for(let h=d.length-1;h>=1;h-=2){let f=d[h-1],g=d[h-0];c.push(f,g)}return c}),o;try{o=hp({windingRule:t,elementType:Vi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[n]})}catch{o=Cj}let a;try{a=hp({windingRule:gn.ODD,elementType:Vi.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...i]})}catch{a=Noe}if(!o)throw new Error("error generating geometry");let s=o.elementCount;if(a){o.elementCount+=a.elementCount;for(let u=0;u<a.elements.length;u++){let d=a.elements[u],c=u%2===0?o.vertexCount:0;o.elements.push(d+c)}for(let u=0;u<a.vertexIndices.length;u++){let d=a.vertexIndices[u],c=o.vertexCount;o.vertexIndices.push(d+c)}for(let u=0;u<a.vertices.length;u++){let d=a.vertices[u];o.vertices.push(d)}}for(let u=0,d=o.vertexCount;u<d;u++){let c=u*2;o.vertices[c+0],o.vertices[c+1]}let l=[];for(let u=o.elementCount-1;u>=0;u--){let d=u>=s,c=u*2,h=o.elements[c+0],f=o.elements[c+1],g=h+f,y={start:h,count:f,normals:[],isHole:d,continuous:[],verticesStart:0,verticesCount:0};l.push(y);let m=h,p=g-1,v=h+1,b=r.roundedCurves.length;do{let x=m-h;o.vertices[p*2+0],o.vertices[p*2+1];let _=o.vertices[m*2+0],A=o.vertices[m*2+1],M=o.vertices[v*2+0],T=o.vertices[v*2+1],C=_-M,E=A-T,D=Math.sqrt(C*C+E*E);C/=D,E/=D,y.normals[x*2+0]=-E,y.normals[x*2+1]=C;let I=o.vertexIndices[m];if(Array.isArray(I))y.continuous[x]=!1;else{let[k,L]=r.getCurveIndexFromVertexId(I-1,!0);if(L>0&&L<1)y.continuous[x]=!0;else{let U=L===1?k+1:k-1;U=(U+b)%b;let W=L===1?0:1,G=r.roundedCurves[k].getTangent(L),z=r.roundedCurves[U].getTangent(W);y.continuous[x]=G.dot(z)>.95}}d&&(y.normals[x*2+0]*=-1,y.normals[x*2+1]*=-1),[p,m,v]=[m,v,v+1],v>=g&&(v-=f)}while(v!==h+1)}return{regions:[n,...i],infos:l,vertices:o.vertices}}_insertVertex(e,t,r,n,i){let o=t*2,a=t*3;e.positions[a+0]=r.x,e.positions[a+1]=r.y,e.positions[a+2]=r.z,e.normals[a+0]=n.x,e.normals[a+1]=n.y,e.normals[a+2]=n.z,e.uvs[o+0]=i.x,e.uvs[o+1]=i.y}_extrudeRegion(e,t,r,n,i,o,a){let s=new X,l=new X,u=new X,d=new X,c=new Ae;r.forEach((f,g)=>{let y=n[g],m=e.verticesStart*r.length+e.verticesCount*g;for(let p=0;p<e.count;p++){let v=(e.start+p)*2;if(s.set(t[v+0],t[v+1],0),u.copy(s).applyMatrix4(f).add(y),e.continuous[p])d.set(e.normals[p*2+0],e.normals[p*2+1],0);else{let b=p===0?(e.start+e.count-1)*2:v-2;l.set(t[b+0],t[b+1],0),d.copy(s).sub(l),d.set(-d.y,d.x,0),e.isHole||d.negate()}if(d.applyMatrix4(f).normalize(),c.set(p===0?1:p/e.count,g/(r.length-1)),this._insertVertex(i,m,u,d,c),m++,!e.continuous[p]||p===0){if(p===0)d.set(e.normals[p*2+0],e.normals[p*2+1],0),c.set(0,g/(r.length-1));else{let b=p===e.count-1?e.start*2:v+2;l.set(t[b+0],t[b+1],0),d.copy(l).sub(s),d.set(-d.y,d.x,0),e.isHole||d.negate()}d.applyMatrix4(f).normalize(),this._insertVertex(i,m,u,d,c),m++}}});let h=r.length-1;for(let f=0;f<h;f++){let g=e.verticesStart*r.length+e.verticesCount*f,y=e.verticesStart*r.length+e.verticesCount*(f+1),m=0;for(let p=0;p<e.count;p++){(!e.continuous[p]||p===0)&&m++;let v=p===e.count-1?0:m+1,b=g+m,x=g+v,_=y+v,A=y+m;e.isHole?o.push(b,_,x,b,A,_):o.push(b,x,_,b,_,A),m++}}}_closeEnd(e,t,r,n,i,o,a){let s=e.vertexCount,l=new X(0,0,a?-1:1).applyMatrix4(i),u=new X,d=new Ae;for(let h=0;h<s;h++){let f=2*h;u.set(e.vertices[f+0],e.vertices[f+1],0).applyMatrix4(i).add(o),this._insertVertex(n,t+h,u,l,d)}let c=e.elements;for(let h=0;h<e.elementCount;h++){let f=3*h,g=c[f+0]+t,y=c[f+(a?1:2)]+t,m=c[f+(a?2:1)]+t;r.push(g,y,m)}}applyMatrix4OnRange(e,t,r){let n=e.elements,i=new Pi().getNormalMatrix(e).elements,o,a,s,l,u=this.attributes.position,d=this.attributes.normal;if(!u||!d)return;let c=u.array,h=d.array,f=u.itemSize;for(let g=t*f,y=r*f;g<y;g+=f){if(g===t)debugger;o=c[g+0],a=c[g+1],s=c[g+2],l=1/(n[3]*o+n[7]*a+n[11]*s+n[15]),c[g+0]=(n[0]*o+n[4]*a+n[8]*s+n[12])*l,c[g+1]=(n[1]*o+n[5]*a+n[9]*s+n[13])*l,c[g+2]=(n[2]*o+n[6]*a+n[10]*s+n[14])*l,o=h[g+0],a=h[g+1],s=h[g+2],h[g+0]=i[0]*o+i[3]*a+i[6]*s,h[g+1]=i[1]*o+i[4]*a+i[7]*s,h[g+2]=i[2]*o+i[5]*a+i[8]*s}u.needsUpdate=!0,d.needsUpdate=!0}reverseIndicesOnRange(e,t){let r=this.index;if(r){for(let n=e;n<t;n+=3){let i=r.getX(n),o=r.getX(n+1),a=r.getX(n+2);r.setXYZ(n,a,o,i)}r.needsUpdate=!0}}};function Joe(){let e=new Jt;return e.setAttribute("position",new fr(new Float32Array([]),3)),e.setIndex(new fr(new Uint16Array([]),1)),e}var kVe=Joe().attributes,FVe=12,zVe=1,Qoe=class extends Jt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,kVe),this.userData={parameters:e,type:"TextGeometry"};let r=t.getFont(e.font);r!=null&&r.isLoaded?(this.font=r,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let r=t.getFont(e);r&&(this.font=r,await r.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:n,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a,text:s,textTransform:l}=e,u=Zs.getDisplayedValue(s),d=l===2?u.toUpperCase():l===3?u.toLowerCase():u,c=UVe(e,t,d),{shapes:h,charWidths:f,charCoords:g}=t.generateShapes(c,e),y=(typeof r=="number"?r:1)*.5,m=(typeof n=="number"?n:1)*.5,p=h.map(x=>new gi().fromShape(x,!0));this.vectorShapes=p;let v=p.map(x=>B0.create({shape:x,parameters:{depth:i,extrudeBevelSegments:a,extrudeBevelSize:o,windingRule:i<=0?gn.NONZERO:gn.ODD,subdivisions:this.isLowResolution&&i>0?zVe:FVe}})),b=v.length?kg(v):Joe();b.translate(-y,m,0),this.dispose(),this.wrappedText=c,this.charCoords=g,this.charWidths=f,this.deleteAttribute("extrudeNormal"),Object.entries(b.attributes).forEach(([x,_])=>{this.setAttribute(x,_)}),this.setIndex(b.index),this.computeBoundingSphere()}clone(){let e=Ih(new Jt,Qoe.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,r])=>{this.setAttribute(t,r)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function UVe(e,t,r){let n=[""],i="";for(let o of r)i+=o,o===" "||o===`
`?(n[n.length-1]+=i,i="",o===`
`&&n.push("")):t.getTextWidth(n[n.length-1]+i,e)>e.width&&(n[n.length-1].length&&n.push(""),t.getTextWidth(n[n.length-1]+i,e)>e.width&&(i.length===1?(n[n.length-1]+=i,i=""):(n[n.length-1]+=i.slice(0,-1),i=i[i.length-1],n.push(""))));return n[n.length-1]+=i,n}var Zoe,Pj=new Promise(e=>{Zoe=e}),LX=!1,bP;function VVe(){if(LX)return;if(bP)return bP;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.520/build",r=AM(()=>import("./process-BcW0pGnR.js"),__vite__mapDeps([])),[n,i]=await Promise.all([r,fetch(`${t}/process.wasm`).then(s=>s.arrayBuffer())]),o=n.default,a=await o({wasmBinary:i});Zoe(a),LX=!0}return bP=e(),bP}function cO(e,t,r,n){var u;let i,o,a;e.type==="PathGeometry"?(o=JSON.parse(JSON.stringify(e)),a=[[],["extrusion"]]):(o={...e},a=[[]]);for(let d of a){let c=o;for(let h of d)c=c[h];for(i in c){let h=c[i];Vze(h)&&(c[i]=t.getVariable(h,[n.uuid,"geometry",...d,i]))}}let s={parameters:o,type:o.type};if(o.type==="PathGeometry")s.path=o.path;else if(o.type==="VectorGeometry"){let d=gi.createFromState(o.shape,o.width,o.height);s.shape=d}else if(o.type==="NonParametricGeometry")o.data.groups&&((u=o.data.groups)==null||u.forEach(d=>d.materialIndex=Math.max(d.materialIndex??0,0))),s.geometry=new eie().parse(o);else if(o.type==="SubdivGeometry"){let d=new Ra(o,r);return d.data=e,d}else if(o.type==="TextGeometry")return new Qoe(o,t);let l;try{l=zX(s)}catch(d){console.error(d)}if(!l){let d=gi.createFromState(QD.defaultData(),100,100);s.shape=d,l=zX(s)}return l}var jVe=new ft;function mz(e,t,r,n){let i=e.position.array,o=e.normal.array,a=jVe.makeScale(t,r,n).invert().elements,s,l,u;for(var d=0,c=i.length;d<c;d+=3)i[d]*=t,i[d+1]*=r,i[d+2]*=n,s=o[d],l=o[d+1],u=o[d+2],o[d]=a[0]*s+a[4]*l+a[8]*u,o[d+1]=a[1]*s+a[5]*l+a[9]*u,o[d+2]=a[2]*s+a[6]*l+a[10]*u;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var xP=new Oi,Ly=new X,ir;Pj.then(e=>{ir=e});var BX=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),NX=new Uint32Array([0,1,2,3]),kX=new Uint8Array([4]),Ra=class extends Jt{constructor(t,r){super(),this.data=t,this.flatShading=r,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(t,r){this.freeSubdivPointer();let n=this.data.scaleBaked,i=e0.div(r,n);this.subdividedGeometry&&mz(this.subdividedGeometry.attributes,...i),this.originalGeometry&&mz(this.originalGeometry.attributes,...i),this.data=t;let o=this.userData.parameters;this.userData.parameters={width:o.width*i[0],height:o.height*i[1],depth:o.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(Ly.fromArray(i));let a=Ly.set(o.width,o.height,o.depth).length();this.originalGeometry.boundingSphere.radius=a/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let t,r,n;try{({originalGeometry:t,subdividedGeometry:r,subdivPointer:n}=Ra.build(this.data,void 0,!this.flatShading,void 0))}catch{t=new nd(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=t,this.subdividedGeometry=r??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Ra.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new Ts,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let r=t.attributes.position,n=t.boundingSphere.center;xP.setFromBufferAttribute(r),xP.getCenter(n),t.boundingSphere.radius=n.distanceTo(xP.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),xP.getSize(Ly);let i={width:Ly.x,height:Ly.y,depth:Ly.z};return this.userData.parameters=i,i}static build(t,r,n,i){let o,a,s,l=(t==null?void 0:t.phongAngle)??35;n===!1&&(l=-1),r&&(ir.free_bvh(r),ir.free_subdivision_surface(r));try{o=Ra.allocate(t,i)}catch(u){console.error(u,t),o=Ra.allocate({positionWASM:BX,indexWASM:NX,verticesPerFaceWASM:kX},i)}if(ir.set_destination_refinement_level(o,0),a=Ra.buildLevel(o,!0,l),t.subdivisions>0)try{ir.set_destination_refinement_level(o,t.subdivisions),s=Ra.buildLevel(o,!1,l)}catch{try{ir.set_destination_refinement_level(o,t.subdivisions-1),s=Ra.buildLevel(o,!1,l)}catch{s=null}}else s=null;return{subdivPointer:o,originalGeometry:a,subdividedGeometry:s}}static primitiveToQuads(t,r,n){t.widthSegments>16&&(t.widthSegments=16),t.heightSegments>16&&(t.heightSegments=16),t.depthSegments>16&&(t.depthSegments=16),t.radialSegments>16&&(t.radialSegments=16),t.type==="DodecahedronGeometry"&&(t.detail=0);let i=t.shape!==void 0||t.path!==void 0?r.geometry:cO(t,n,!1),o;t.type==="TorusGeometry"&&t.arc===Math.PI*2?o=i.getClosedTorusIndicesForBooleanOrSubdiv():o=i.getIndex();let a,s,l,u;({positions:a,triIndices:u}=sI(i.getAttribute("position"),o));let d;if(t.type==="CylinderGeometry"&&t.cornerRadius===0&&t.hollow===0&&t.openEnded===!1){let c=t.radialSegments*t.heightSegments*3*2,h=c+t.radialSegments*3;d=[c,h]}return{indices:s,verticesPerFace:l}=$oe(a,u,i,d),{positions:a,indices:s,verticesPerFace:l}}static allocate(t,r){var x;let n,i,o,a=[],s=[];t.positionWASM&&t.positionWASM.length>0?(n=t.positionWASM,i=t.indexWASM,o=t.verticesPerFaceWASM):(n=BX,i=NX,o=kX);let l=n.length,u=i.length,d=o.length,c=n.length+a.length+s.length,h=i.length+o.length,f=c*Float32Array.BYTES_PER_ELEMENT+h*Uint32Array.BYTES_PER_ELEMENT,g=c*Float32Array.BYTES_PER_ELEMENT,y=ir._malloc(f),m=new Float32Array(ir.HEAPF32.buffer,y,c),p=new Uint32Array(ir.HEAPU32.buffer,y+g,h);m.set(n,0),m.set(a,n.length),m.set(s,n.length+a.length),p.set(i,0),p.set(o,i.length);let v;(x=t==null?void 0:t.scaleBaked)!=null&&x.some(_=>_!==1)&&(v=new ft().makeScale(...t.scaleBaked)),r&&(v?v.premultiply(r):v=r);let b=v?ir.alloc_subdivision_surface2(y,l,y+g,u,y+g+i.length*Uint32Array.BYTES_PER_ELEMENT,d,v.elements):ir.alloc_subdivision_surface(y,l,y+g,u,y+g+i.length*Uint32Array.BYTES_PER_ELEMENT,d);return ir._free(y),b}static buildLevel(t,r,n,i,o){let a=o?ir.get_mesh_data2(t,r?ir.Level.CONTROL:ir.Level.REFINED,n,o.elements):ir.get_mesh_data(t,r?ir.Level.CONTROL:ir.Level.REFINED,n),s=8,l=ir.HEAPU32.subarray(a>>2,(a>>2)+s),u=l.subarray(4,8),d=0,c=ir.HEAPU32[l[d]>>2],h=ir.HEAPF32.subarray(c>>2,(c>>2)+u[d]);d++;let f=ir.HEAPU32[l[d]>>2],g=ir.HEAPF32.subarray(f>>2,(f>>2)+u[d]);d++;let y=ir.HEAPU32[l[d]>>2],m=ir.HEAPU32.subarray(y>>2,(y>>2)+u[d]);d++;let p=ir.HEAPU32[l[d]>>2],v=ir.HEAPU32.subarray(p>>2,(p>>2)+u[d]);if(d++,i===void 0){let b=new Jt;if(b.setIndex(new Wb(v,1)),b.setAttribute("position",new Rt(h,3)),b.setAttribute("normal",new Rt(g,3)),r){b.setAttribute("faceMap",new Wb(m,1));let x=new Float32Array(g.length/3*4).fill(0);b.setAttribute("color",new fr(x,4))}return ir.free_mesh_data(a),b.userData.type="SubdivGeometry",b}i.getAttribute("position").copyArray(h),i.getAttribute("normal").copyArray(g),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,ir.free_mesh_data(a)}static freeSubdivPointer(t){ir.free_bvh(t),ir.free_subdivision_surface(t)}static buildControlCageWireframe(t,r,n){let i=ir.get_wireframe_data_for_base_level(t),o=4,a=ir.HEAPU32.subarray(i>>2,(i>>2)+o),s=a.subarray(2,4),l=0,u=ir.HEAPU32[a[l]>>2],d=ir.HEAPF32.subarray(u>>2,(u>>2)+s[l]);l++;let c=ir.HEAPU32[a[l]>>2],h=ir.HEAPU32.subarray(c>>2,(c>>2)+s[l]);if(r===void 0){let f=new Jt;f.setAttribute("position",new Rt(d,3));let g=new Float32Array(d.length);for(let y=0,m=d.length;y<m;)g[y++]=n.r,g[y++]=n.g,g[y++]=n.b;return f.setAttribute("color",new fr(g,3)),f.setIndex(new Wb(h,1)),ir.free_wireframe_data_for_base_level(i),f}r.getAttribute("position").copyArray(d),r.attributes.position.needsUpdate=!0,ir.free_wireframe_data_for_base_level(i)}static updateCollabMesh(t,r,n){let i=r===0;i||ir.set_destination_refinement_level(t,r);let o=n?ir.get_topological_data2(t,i?ir.Level.CONTROL:ir.Level.REFINED,n.elements):ir.get_topological_data(t,i?ir.Level.CONTROL:ir.Level.REFINED),a=6,s=ir.HEAPU32.subarray(o>>2,(o>>2)+a),l=s.subarray(3,6),u=0,d=ir.HEAPU32[s[u]>>2],c=new Float32Array(ir.HEAPF32.subarray(d>>2,(d>>2)+l[u]));u++;let h=ir.HEAPU32[s[u]>>2],f=new Uint32Array(ir.HEAPU32.subarray(h>>2,(h>>2)+l[u]));u++;let g=ir.HEAPU32[s[u]>>2],y=new Uint8Array(ir.HEAPU32.subarray(g>>2,(g>>2)+l[u]));return ir.free_topological_data(o),{positions:c,indices:f,verticesPerFace:y}}},FX=["getX","getY","getZ"];function sI(e,t){let r={},n=t?t.count:e.count,i=0,o=[],a=[],s=1e4;for(let u=0;u<n;u++){let d=t?t.getX(u):u,c="";for(let h=0;h<3;h++)c+=`${~~(e[FX[h]](d)*s)},`;if(c in r)o.push(r[c]);else{for(let h=0;h<3;h++)a.push(e[FX[h]](d));r[c]=i,o.push(i),i++}}let l=[];for(let u=0;u<o.length;u+=3)o[u]===o[u+1]||o[u]===o[u+2]||o[u+1]===o[u+2]||l.push(o[u],o[u+1],o[u+2]);return{positions:a,triIndices:l}}var wP=new X,JB=new X,QB=new X,ZB=new X;function $oe(e,t,r,n){let i=[],o=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let l=r.userData.shape.extractShapePointsToFlatArray([]),u=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&u<=24&&u%4===0&&r.userData.parameters.angle>=360){let h=l.length/2/u;l=l.filter((f,g)=>Math.floor(g/2)%h===0)}let d=0;for(let h=0;h<l.length;h+=2)d+=(l[h]-l[(h===0?l.length:h)-2])*(l[h+1]+l[(h===0?l.length:h)-1]);e.length=0;let c=0;if(d<0)for(let h=0;h<l.length;h+=2)e.push(l[h],l[h+1],0),i.push(c++);else for(let h=l.length-2;h>=0;h-=2)e.push(l[h],l[h+1],0),i.push(c++);return o.push(c),{indices:i,verticesPerFace:o}}let a=new Float32Array([r.userData.parameters.depth])[0],s=0;for(;s<t.length;){if(r.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[s]*3+2]===a||e[t[s]*3+2]===0)&&l++,(e[t[s+1]*3+2]===a||e[t[s+1]*3+2]===0)&&l++,(e[t[s+2]*3+2]===a||e[t[s+2]*3+2]===0)&&l++,l===3)break}if(t[s+1]===t[s+3]&&t[s+2]===t[s+5]||t[s+0]===t[s+3]&&t[s+2]===t[s+4]){wP.set(e[t[s]*3],e[t[s]*3+1],e[t[s]*3+2]),JB.set(e[t[s+1]*3],e[t[s+1]*3+1],e[t[s+1]*3+2]),QB.set(e[t[s+4]*3],e[t[s+4]*3+1],e[t[s+4]*3+2]),ZB.set(e[t[s+5]*3],e[t[s+5]*3+1],e[t[s+5]*3+2]),JB.sub(wP).normalize(),QB.sub(wP).normalize(),ZB.sub(wP).normalize();let l=JB.cross(QB).dot(ZB);Math.abs(l)>.005||n&&n.some((u,d)=>d%2===1?!1:s>=n[d]&&s<n[d+1])?(i.push(t[s],t[s+1],t[s+2]),o.push(3),s+=3):(i.push(t[s],t[s+1],t[s+4],t[s+5]),o.push(4),s+=6)}else i.push(t[s],t[s+1],t[s+2]),o.push(3),s+=3}if(r.useNgonForTopBottomFaceDuringBake){let l=[],u=[],d=0;for(let c=0,h=0;c<e.length;c+=3,h++)e[c+2]===0&&(l.push(h),d++),e[c+2]===a&&u.push(h);if(r.userData.parameters.extrudeBevelSize===0){let c=u[0];u[0]=u[1],u[1]=c}l.reverse(),i.push(...l,...u),o.push(d,d)}return{indices:i,verticesPerFace:o}}var Qd={};iCe(Qd,{calcBoolean:()=>XVe,calcBooleanTopological:()=>qVe,freeMeshSet:()=>QVe,getMeshSet:()=>YVe,hasOpenEdges:()=>KVe,transformMeshSet:()=>JVe});var eae,HVe=new Promise(e=>{eae=e}),_P;function GVe(){if(_P)return _P;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@0.9.520/build",r=AM(()=>import("./boolean-w3KXAzn1.js"),__vite__mapDeps([])),[n,i]=await Promise.all([r,fetch(`${t}/boolean.wasm`).then(s=>s.arrayBuffer())]),o=n.default,a=await o({wasmBinary:i});eae(a)}return _P=e(),_P}var Nr,tx;HVe.then(e=>Nr=e);function WVe(e,t,r){let n,i;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?i=e.getClosedTorusIndicesForBooleanOrSubdiv():i=e.getIndex();let{positions:o,triIndices:a}=sI(e.getAttribute("position"),i),s;if(t&&r){let{indices:l,verticesPerFace:u}=$oe(o,a,e);s=u.length,n=[];for(let d=0,c=0;d<s;d++){n.push(u[d]);for(let h=0;h<u[d];h++)n.push(l[c++])}}else{let l=a.length;n=Array(l+l/3),s=0;for(let u=0,d=0;d<n.length;)n[d++]=3,s++,n[d++]=a[u++],n[d++]=a[u++],n[d++]=a[u++]}return{positions:o,faceIndices:n,nFaces:s}}function tae(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,n=t*Float32Array.BYTES_PER_ELEMENT,i=Number.isInteger(e[0])?r:n,o=Nr._malloc(i);return(Number.isInteger(e[0])?new Uint32Array(Nr.HEAPU32.buffer,o,t):new Float32Array(Nr.HEAPF32.buffer,o,t)).set(e,0),o}function rae(e){switch(e){case 0:return Nr.OP.UNION;case 1:return Nr.OP.INTERSECTION;case 2:return Nr.OP.A_MINUS_B;case 3:return Nr.OP.B_MINUS_A;case 4:return Nr.OP.SYMMETRIC_DIFFERENCE;case 5:return Nr.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function qVe(e,t){tx===void 0&&(tx=Nr.init_csg());let r=tae(e),n=Nr.csg_calc_topological(tx,r,e.length,rae(t));Nr._free(r);let i=6,o=Nr.HEAPU32.subarray(n>>2,(n>>2)+i),a=o.subarray(3,6),s=0,l=Nr.HEAPU32[o[s]>>2],u=new Float32Array(Nr.HEAPF32.subarray(l>>2,(l>>2)+a[s]));s++;let d=Nr.HEAPU32[o[s]>>2],c=new Uint32Array(Nr.HEAPU32.subarray(d>>2,(d>>2)+a[s]));s++;let h=Nr.HEAPU32[o[s]>>2],f=new Uint8Array(Nr.HEAPU32.subarray(h>>2,(h>>2)+a[s]));return Nr.free_mesh_data(n),{positions:u,indices:c,verticesPerFace:f}}function XVe(e,t,r,n){tx===void 0&&(tx=Nr.init_csg());let i=tae(e),o=Nr.csg_calc(tx,i,e.length,n,rae(t));Nr._free(i);let a=5,s=Nr.HEAPU32.subarray(o>>2,(o>>2)+a),l=s.subarray(2,5),u=0,d=Nr.HEAPU32[s[u]>>2],c=Nr.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let h=Nr.HEAPU32[s[u]>>2],f=Nr.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let g=l[u];r.setAttribute("position",new Rt(c,3)),r.setAttribute("normal",new Rt(f,3));let y=Nr.HEAPF32.subarray((o>>2)+5,(o>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new Ts),r.boundingSphere.radius=-1,r.userData.parameters={width:y[3]*2,height:y[4]*2,depth:y[5]*2},Nr.free_mesh_data(o),g}function YVe(e,t,r){if(Nr===void 0)return-1;let n,i,o;if(t&&e.userData.positions!==void 0){let m=e.userData;o=m.verticesPerFace.length,n=m.positions,i=Array(m.verticesPerFace.reduce((p,v)=>p+v,0)+o);for(let p=0,v=0,b=0;p<m.verticesPerFace.length;p++){i[b++]=m.verticesPerFace[p];for(let x=0;x<m.verticesPerFace[p];x++)i[b++]=m.indices[v++]}}else({positions:n,faceIndices:i,nFaces:o}=WVe(e,t,r));let a=n.length,s=i.length,l=n.length,u=i.length,d=l*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,c=l*Float32Array.BYTES_PER_ELEMENT,h=Nr._malloc(d),f=new Float32Array(Nr.HEAPF32.buffer,h,l),g=new Uint32Array(Nr.HEAPU32.buffer,h+c,u);f.set(n,0),g.set(i,0);let y=Nr.get_csg_mesh(h,a,h+c,s,o);return Nr._free(h),y}function KVe(e){return Nr.has_open_edges(e)}function JVe(e,t){Nr.transform_csg_mesh(e,t.elements)}function QVe(e){Nr.free_csg_mesh(e)}var ZVe={ConeGeometry:y4e,CubeGeometry:b4e,CylinderGeometry:Poe,DodecahedronGeometry:w4e,EllipseGeometry:Ej,HelixGeometry:$4e,IcosahedronGeometry:eVe,LatheGeometry:tVe,NonParametricGeometry:lVe,PolygonGeometry:qoe,PyramidGeometry:uVe,RectangleGeometry:Xoe,SphereGeometry:hVe,PlaneGeometry:fVe,BackdropGeometry:pVe,StarGeometry:Yoe,TextFrameGeometry:gVe,TorusGeometry:vVe,TorusKnotGeometry:bVe,TriangleGeometry:xVe,PathGeometry:BVe,VectorGeometry:B0},zX=e=>ZVe[e.type].create(e);function By(e){return e!==null&&"booleanOp"in e}var nae=class extends _j(Fa){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new ft}updateVisible(e){super.updateVisible(e),this.visible=!By(this.parent)&&this.visible,By(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Qd.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),By(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof nae&&(e.freeBooleanPointer(),By(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let r=super.updateTransformState(e,t);return r&&By(this.parent)&&this.invalidateDownstreamBooleanData(!0),r}onVariableUpdate(e=!1){super.onVariableUpdate(e),By(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},SP=new Oi;function Dj(e,t=0,r=e.count,n,i){let o=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,d=-1/0;for(let c=t;c<r;c++){let h=e.getX(c),f=e.getY(c),g=e.getZ(c);h<o&&(o=h),f<a&&(a=f),g<s&&(s=g),h>l&&(l=h),f>u&&(u=f),g>d&&(d=g)}SP.min.set(o,a,s),SP.max.set(l,u,d),SP.getCenter(n),SP.getSize(i).multiplyScalar(.5)}var $Ve=new Jt,eje=new PM,Es=class extends nae{constructor(e,t){super($Ve,eje),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Dj(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},UX=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},tm=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Ht.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r??{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r??{},e.addFlow(r.slot,r.cache,r.context);let n={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),n}build(e,t,r){t=t??this.getType(e,t);let n=e.getNodeData(r??this);return e.analyzing&&this.appendDepsNode(e,n,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,n,i,o){return""}generate(e,t,r,n,i){return""}parse(e,t,r,n){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let n=e.getTypeLength(r);(n>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=n,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof tm&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let n=0;n<this.hashProperties.length;n++)t=this.hashProperties[n],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}},tje=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},ms=new tje,xn=class extends tm{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,n){if(t=t??this.getType(e),this.getShared(e,t)){let i=this.getUnique(e,t);i&&this.uuid===void 0&&(this.uuid=Ht.generateUUID()),r=e.getUUID(r??this.getUUID(),!i);let o=e.getNodeData(r),a=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,t),this.generate(e,t,r)):super.build(e,t,r);if(i)return o.name=o.name||super.build(e,t,r),o.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||o.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let s=this.getTemp(e,r);if(s)return e.format(s,a,t);{s=super.generate(e,t,r,o.output,n);let l=this.generate(e,a,r);return e.addNodeCode(s+" = "+l+";"),e.format(s,a,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,n,i){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r??this.uuid,e.getTempVar(r,n??this.getType(e),i,this.getLabel()).name}},Ds=class extends xn{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,n,i,o){r=e.getUUID(r??this.getUUID()),n=n??this.getType(e);let a=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,n,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(n,this,i,o,this.getLabel())),e.format(a.vertex.name,n,t)):(a.fragment||(a.fragment=e.createFragmentUniform(n,this,i,o,this.getLabel())),e.format(a.fragment.name,n,t))}},No=class extends Ds{constructor(t=0,r){super("v2"),this.nodeType="Vector2",this.value=t instanceof Ae?t:new Ae(t,r)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}generateReadonly(t,r,n,i,o,a){return t.format("vec2("+this.value.x+", "+this.value.y+")",i,r)}},Rl=class extends Ds{constructor(e=0,t,r){super("v3"),this.nodeType="Vector3",this.value=e instanceof X?e:new X(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,n,i,o){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",n,t)}},Cs=class extends tr{constructor(e,t,r,n){super(e,t,r),this.isColorA=!0,this.a=n}setRGBA(e,t,r,n){super.setRGB(e,t,r),this.a=n}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(e,t="srgb"){let r;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let n,i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a=i==="rgba"?parseFloat(n[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a=i==="hsla"?parseFloat(n[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Zd=class extends Ds{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof Cs?e:new Cs(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,n,i,o){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",n,t)}},rje=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,VX=/[a-z_0-9]+/gi,St=class extends xn{constructor(e,t,r,n,i){super(i),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=i===void 0,this.isInterface=!1,this.parse(e,t,r,n)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,n,i){let o,a=0,s=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)e.include(this.includes[u],this);for(let u in this.extensions)e.extensions[u]=!0;let l=[];for(;o=VX.exec(this.src);)l.push(o);for(let u=0;u<l.length;u++){let d=l[u],c=d[0],h=this.isMethod?!this.getInputByName(c):!0,f=c;if(this.keywords[c]||this.useKeywords&&h&&ms.containsKeyword(c)){let g=this.keywords[c];if(!g){let y=ms.getKeywordData(c);y.cache&&(g=e.keywords[c]),g=g||ms.getKeyword(c,e),y.cache&&(e.keywords[c]=g)}f=g.build(e)}c!==f&&s[d.index+a-1]!=="."&&(s=s.substring(0,d.index+a)+f+s.substring(d.index+c.length+a),a+=f.length-c.length),this.getIncludeByName(f)===void 0&&ms.contains(f)&&e.include(ms.get(f))}return t==="source"?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}parse(e,t,r,n){if(this.src=e||"",this.includes=t??[],this.extensions=r??{},this.keywords=n??{},this.isMethod){let i=rje.exec(this.src);if(this.inputs=[],i&&i.length==4){this.type=i[1],this.name=i[2];let o=i[3].match(VX);if(o){let a=0;for(;a<o.length;){let s=o[a++],l;s==="in"||s==="out"||s==="inout"?l=o[a++]:(l=s,s="");let u=o[a++];this.inputs.push({name:u,type:l,qualifier:s})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},nje=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,iae=class extends xn{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||iae.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,n,i){this.src=e||"";let o,a,s="",l=nje.exec(e);this.useDefine=i??this.src.charAt(0)==="#",l&&l.length>1?(a=l[1],o=l[2],s=l[3]):(o=this.src,a="f"),this.name=o,this.type=a,this.value=s}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,n,i){return e.format(this.name,this.getType(e),t)}},fn=iae;fn.PI="PI",fn.PI2="PI2",fn.RECIPROCAL_PI="RECIPROCAL_PI",fn.RECIPROCAL_PI2="RECIPROCAL_PI2",fn.LOG2="LOG2",fn.EPSILON="EPSILON";var ije=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),oje=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),oae=class extends xn{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,n,i){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=ije.exec(e);if(t){let r=t[2],n;for(;n=oje.exec(r);)this.inputs.push({type:n[1],name:n[2]});this.name=t[1]}else this.name="";this.type=this.name}},Oj=class extends xn{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",n=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(n,this.getType(e),t)}};ms.addKeyword("uv",function(){return new Oj});ms.addKeyword("uv2",function(){return new Oj(1)});var eb=class extends xn{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??eb.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case rd:return["Linear"];case Ar:return["sRGB"];default:return[]}}generate(e,t){var a;let r=this.input.build(e,"v4"),n=this.getType(e),i=eb.Nodes[this.method],o=e.include(i);if(o===eb.LINEAR_TO_LINEAR)return e.format(r,n,t);if(((a=i.inputs)==null?void 0:a.length)===2){let s=this.factor.build(e,"f");return e.format(o+"( "+r+", "+s+" )",n,t)}else return e.format(o+"( "+r+" )",n,t)}fromEncoding(e){let t=eb.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=eb.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Vc=eb;Vc.Nodes={LinearToLinear:new St(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new St(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new St(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Vc.LINEAR_TO_LINEAR="LinearToLinear",Vc.SRGB_TO_LINEAR="sRGBToLinear",Vc.LINEAR_TO_SRGB="LinearTosRGB";var Pn=class extends St{constructor(e="",t,r,n,i){super(e,i,n,r,t),this.nodeType="Expression"}},ah=class extends Ds{constructor(e=new io,t,r,n){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new Oj,this.bias=r,this.project=n!==void 0?n:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let r=this.getTexture(e,t),n=this.uv.build(e,this.project?"v4":"v2"),i=this.bias?this.bias.build(e,"f"):void 0;i===void 0&&e.context.bias&&(i=e.context.bias.setTexture(this).build(e,"f"));let o,a;this.project?o="texture2DProj":o=i?"tex2DBias":"tex2D",i?a=o+"( "+r+", "+n+", "+i+" )":a=o+"( "+r+", "+n+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new Vc(new Pn("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,l),e.removeContext(),e.format(a,l,t)}},Lt=class extends Ds{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,r,n,i,o){return e.format(this.value+(this.value%1?"":".0"),n,t)}},jX=class extends xn{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,n,i){n=this.getType(e);let o=this.value,a=o.build(e,t)+"( ",s=[];if(o.inputs){for(let l=0;l<o.inputs.length;l++){let u=o.inputs[l],d=this.inputs[l]||this.inputs[u.name];s.push(d.build(e,e.getTypeByFormat(u.type)))}a+=s.join(", ")+" )"}return e.format(a,n,t)}},aae=class extends xn{constructor(e,t,r=aae.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let n=this.a.build(e,r),i=this.b.build(e,r);return e.format("( "+n+" "+this.op+" "+i+" )",r,t)}},ss=aae;ss.ADD="+",ss.SUB="-",ss.MUL="*",ss.DIV="/";var hn=class extends xn{constructor(e,t=hn.ABS,r,n){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:n=t,typeof r!="string"?this.c=r:n=r,this.method=n,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case hn.MIX:case hn.CLAMP:case hn.REFRACT:case hn.SMOOTHSTEP:case hn.FACEFORWARD:return 3;case hn.MIN:case hn.MAX:case hn.MOD:case hn.STEP:case hn.REFLECT:case hn.DISTANCE:case hn.DOT:case hn.CROSS:case hn.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,n=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>n?this.a.getType(e):r>n?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case hn.LENGTH:case hn.DISTANCE:case hn.DOT:return"f";case hn.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,n,i,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case hn.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case hn.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case hn.CROSS:r=this.a.build(e,"v3"),n=this.b.build(e,"v3");break;case hn.STEP:r=this.a.build(e,o===1?"f":l),n=this.b.build(e,l);break;case hn.MIN:case hn.MAX:case hn.MOD:r=this.a.build(e,l),n=this.b.build(e,a===1?"f":l);break;case hn.REFRACT:r=this.a.build(e,l),n=this.b.build(e,l),i=this.c.build(e,"f");break;case hn.MIX:r=this.a.build(e,l),n=this.b.build(e,l),i=this.c.build(e,s===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(n=this.b.build(e,l)),this.c&&(i=this.c.build(e,l));break}let d=[];d.push(r),n&&d.push(n),i&&d.push(i);let c=this.getNumInputs(e);if(d.length!==c)throw Error(`Arguments not match used in "${this.method}". Require ${c}, currently ${d.length}.`);return e.format(this.method+"( "+d.join(", ")+" )",u,t)}},_r=hn;_r.RAD="radians",_r.DEG="degrees",_r.EXP="exp",_r.EXP2="exp2",_r.LOG="log",_r.LOG2="log2",_r.SQRT="sqrt",_r.INV_SQRT="inversesqrt",_r.FLOOR="floor",_r.CEIL="ceil",_r.NORMALIZE="normalize",_r.FRACT="fract",_r.SATURATE="saturate",_r.SIN="sin",_r.COS="cos",_r.TAN="tan",_r.ASIN="asin",_r.ACOS="acos",_r.ARCTAN="atan",_r.ABS="abs",_r.SIGN="sign",_r.LENGTH="length",_r.NEGATE="negate",_r.INVERT="invert",_r.MIN="min",_r.MAX="max",_r.MOD="mod",_r.STEP="step",_r.REFLECT="reflect",_r.DISTANCE="distance",_r.DOT="dot",_r.CROSS="cross",_r.POW="pow",_r.MIX="mix",_r.CLAMP="clamp",_r.REFRACT="refract",_r.SMOOTHSTEP="smoothstep",_r.FACEFORWARD="faceforward";var rS=class extends xn{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,n){let i=new jX(rS.Nodes.bilinearCubeUV,[t,r,n]);this.colorSpaceTL=this.colorSpaceTL??new Vc(new Pn("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(i.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Vc(new Pn("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(i.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Vc(new Pn("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(i.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Vc(new Pn("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(i.build(e)+".br");let o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new Pn(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Pn(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Pn(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Pn(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new Pn("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=i,a}generate(e,t){if(e.isShader("fragment")){let r=this.uv,n=this.bias||e.context.roughness,i=new jX(rS.Nodes.roughnessToMip,[n]),o=new _r(i,rS.Nodes.m0,rS.Nodes.cubeUV_maxMipLevel,_r.CLAMP),a=new _r(o,_r.FLOOR),s=new _r(o,_r.FRACT),l=this.bilinearCubeUV(e,this.value,r,a),u=this.bilinearCubeUV(e,this.value,r,new ss(a,new Lt(1).setReadonly(!0),ss.ADD)),d=new _r(l,u,s,_r.MIX);return e.format(d.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},gz=rS;gz.Nodes=function(){let e=new oae(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new fn("float cubeUV_maxMipLevel 8.0",!0),r=new fn("float cubeUV_minMipLevel 4.0",!0),n=new fn("float cubeUV_maxTileSize 256.0",!0),i=new fn("float cubeUV_minTileSize 16.0",!0),o=new St(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);o.useKeywords=!1;let a=new St(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);a.useKeywords=!1;let s=new St(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,o,a,t,r,n,i]);s.useKeywords=!1;let l=new fn("float r0 1.0",!0),u=new fn("float v0 0.339",!0),d=new fn("float m0 -2.0",!0),c=new fn("float r1 0.8",!0),h=new fn("float v1 0.276",!0),f=new fn("float m1 -1.0",!0),g=new fn("float r4 0.4",!0),y=new fn("float v4 0.046",!0),m=new fn("float m4 2.0",!0),p=new fn("float r5 0.305",!0),v=new fn("float v5 0.016",!0),b=new fn("float m5 3.0",!0),x=new fn("float r6 0.21",!0),_=new fn("float v6 0.0038",!0),A=new fn("float m6 4.0",!0),M=[l,u,d,c,h,f,g,y,m,p,v,b,x,_,A],T=new St(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,M);return{bilinearCubeUV:s,roughnessToMip:T,m0:d,cubeUV_maxMipLevel:t}}();var tb=class extends xn{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??tb.VIEW}getShared(){return this.scope===tb.WORLD}build(e,t,r,n){let i=e.context[this.scope+"Normal"];return i?i.build(e,t,r,n):super.build(e,t,r)}generate(e,t,r,n,i){let o;switch(this.scope){case tb.VIEW:e.isShader("vertex")?o="transformedNormal":o="geometryNormal";break;case tb.LOCAL:e.isShader("vertex")?o="objectNormal":(e.requires.normal=!0,o="vObjectNormal");break;case tb.WORLD:e.isShader("vertex")?o="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,o="vWNormal");break}return e.format(o,this.getType(e),t)}},bs=tb;bs.LOCAL="local",bs.WORLD="world",bs.VIEW="view",bs.NORMAL="normal";ms.addKeyword("viewNormal",function(){return new bs(bs.VIEW)});ms.addKeyword("localNormal",function(){return new bs(bs.NORMAL)});ms.addKeyword("worldNormal",function(){return new bs(bs.WORLD)});var Xd=class extends xn{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??Xd.LOCAL}getType(){switch(this.scope){case Xd.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Xd.LOCAL:case Xd.WORLD:return!1}return!0}generate(e,t,r,n,i){let o;switch(this.scope){case Xd.LOCAL:e.isShader("vertex")?o="transformed":(e.requires.position=!0,o="vPosition");break;case Xd.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,o="vWPosition";break;case Xd.VIEW:o=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Xd.PROJECTION:o=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(o,this.getType(),t)}},Iu=Xd;Iu.LOCAL="local",Iu.WORLD="world",Iu.VIEW="view",Iu.PROJECTION="projection";ms.addKeyword("position",function(){return new Iu});ms.addKeyword("worldPosition",function(){return new Iu(Iu.WORLD)});ms.addKeyword("viewPosition",function(){return new Iu(Iu.VIEW)});var Pc=class extends xn{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??Pc.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case Pc.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let n;switch(this.scope){case Pc.VECTOR:{let i=new bs(bs.VIEW),o=e.context.roughness,a=i.build(e,"v3"),s=new Iu(Iu.VIEW).build(e,"v3"),l=o?o.build(e,"f"):void 0,u=`reflect( -normalize( ${s} ), ${a} )`;l&&(u=`normalize( mix( ${u}, ${a}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${u}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${d};`),n="reflectVec"):n=d;break}case Pc.CUBE:{let i=new Pc(Pc.VECTOR).build(e,"v3"),o="vec3( -"+i+".x, "+i+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${o};`),n="reflectCubeVec"):n=o;break}case Pc.SPHERE:{let i="normalize( ( viewMatrix * vec4( "+new Pc(Pc.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${i};`),n="reflectSphereVec"):n=i;break}}return e.format(n,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},rx=Pc;rx.CUBE="cube",rx.SPHERE="sphere",rx.VECTOR="vector";var aje=class extends xn{constructor(e=new ah,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new gz(this.value,t??new rx(rx.VECTOR),r),this.irradianceNode=new gz(this.value,new bs(bs.WORLD),new Lt(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},sje=class extends Ds{constructor(e=new RV,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new rx,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),n=(l=this.uv)==null?void 0:l.build(e,"v3"),i=this.bias?this.bias.build(e,"f"):void 0;i===void 0&&e.context.bias&&(i=e.context.bias.setTexture(this).build(e,"f"));let o;i?o="texCubeBias( "+r+", "+n+", "+i+" )":o="texCube( "+r+", "+n+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},s=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace??new Vc(new Pn("",s)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,s),e.removeContext(),e.format(o,s,t)}},lje=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,uje=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,cje=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,dje=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,HX=["x","y","z","w"],hje=["float","vec2","vec3","vec4"],fje={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},pje={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},mje=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let n=this.getIncludes(t,r);if(!n)return"";let i="";n=n.sort(e);for(let o=0;o<n.length;o++)n[o].src&&(i+=n[o].src+`
`);return i}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(lje),this.addFragmentParsCode(uje),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let n=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+n+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+n+";"),this.addVertexFinalCode("vUv"+n+" = uv"+n+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(cje),this.addFragmentFinalCode(dje)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,n="varying",i="V",o=""){let a=this.getVars(n),s=a[e];if(!s){let l=a.length;s={name:r||"node"+i+l+(o?"_"+o:""),type:t},a.push(s),a[e]=s}return s}getTempVar(e,t,r,n){return this.getVar(e,t,r,this.shader,"T",n)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let r="";for(let n=0,i=e.length;n<i;++n){let o=e[n],a=o.type,s=o.name,l=o.size,u=this.getFormatByType(a);if(u===void 0)throw new Error("Node pars "+u+" not found.");u.includes("[]")?r+=t+" "+u.substring(0,u.length-2)+" "+s+`[${l}];
`:r+=t+" "+u+" "+s+`;
`}return r}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof tm?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,n,i,o){if(t.includes("[]")){let a=this.inputs.arrayUniforms,s=a.list.length,l=new UX({type:t,size:r.size,name:n||"nodeUA"+s+(o?"_"+o:""),node:r,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}else{let a=this.inputs.uniforms,s=a.list.length,l=new UX({type:t,name:n||"nodeU"+s+(o?"_"+o:""),node:r,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,n,i){return this.createUniform("vertex",e,t,r,n,i)}createFragmentUniform(e,t,r,n,i){return this.createUniform("fragment",e,t,r,n,i)}include(e,t,r){var o;let n;if(e=typeof e=="string"?ms.get(e):e,this.context.include===!1)return e.name;e instanceof St?n=this.includes.functions:e instanceof fn?n=this.includes.consts:e instanceof oae&&(n=this.includes.structs);let i=n[this.shader]=n[this.shader]||[];if(e){let a=i[e.name];if(a||(a=i[e.name]={node:e,deps:[]},i.push(a),a.src=e.build(this,"source")),e instanceof St&&t&&i[t.name]&&i[t.name].deps.indexOf(e)===-1&&(i[t.name].deps.push(e),(o=e.includes)==null?void 0:o.length)){let s=0;do this.include(e.includes[s++],t);while(s<e.includes.length)}return r&&(a.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return hje[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case p0:case m0:return new sje(r);case TM:return new aje(new ah(r));default:return new ah(r)}else{if(r.isVector2)return new No(r);if(r.isVector3)return new Rl(r);if(r.isVector4)return new Zd(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return fje[e]||e}getFormatByType(e){return pje[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return HX[e]}getIndexByElement(e){return HX.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=rd,t===rd&&this.context.gamma&&(t=Ar),t}},vi=class extends Ds{constructor(e=0,t,r,n){super("c"),this.nodeType="Color",this.value=e instanceof Cs?e:new Cs(e||0,t,r,n)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,n,i,o){r=e.getUUID(r??this.getUUID()),n=n??this.getType(e);let a=e.getNodeData(r),s=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return s?this.generateReadonly(e,t,r,n,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(n,this,i,o,this.getLabel())),e.format(a.vertex.name,n,t)):(a.fragment||(a.fragment=e.createFragmentUniform(n,this,i,o,this.getLabel())),e.format(a.fragment.name,n,t))}generateReadonly(e,t,r,n,i,o){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",n,t)}},Sn=class extends Ds{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,r,n,i,o){return e.format(this.value.toString(),n,t)}},Ba=class extends Ds{constructor(t){super("b"),this.nodeType="Bool",this.value=t??!1}generateReadonly(t,r,n,i){return t.format(this.value?"true":"false",i,r)}},mg=class extends Ds{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},Rj=class extends Ds{},gje=class extends Rj{constructor(e){super("v3"),this.image=e,this._value=new X}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},vz=class extends Rj{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},sae=class extends Ds{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Pi}generateReadonly(e,t,r,n,i,o){return e.format("mat3("+this.value.elements.join(", ")+")",n,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},ad=class extends Ds{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new ft}generateReadonly(e,t,r,n,i,o){return e.format("mat4("+this.value.elements.join(", ")+")",n,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function GX(e,t,r){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0)}var vje=class extends sae{constructor(e,t){super(new Pi),this.repeat=e,this.offset=t,GX(this.value,e,t)}updateMatrix(){GX(this.value,this.repeat,this.offset)}},gg=class extends Ds{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Mr?new Array(e).fill(t):new Array(e).fill(new Mr(0))}},WX=class extends xn{constructor(e,t,r,n){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=n}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},lae=class extends xn{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(lae.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.color.build(e,"v3")),n.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},yz=lae;yz.Nodes=function(){return{customColor:new St(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var uae=class extends xn{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(uae.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.cnormal.build(e,"v3")),n.push("normal"),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},cae=uae;cae.Nodes=function(){return{customNormal:new St(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var nS=class extends xn{constructor(e,t,r,n,i,o,a,s,l,u,d,c){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=r,this.projection=n,this.axis=i,this.side=o,this.size=a,this.blending=s,this.mat=l,this.isMask=c,this.alpha=u,this.mode=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,n;switch(this.projection.value){case 3:n=e.include(nS.Nodes.cylindrical);break;case 2:n=e.include(nS.Nodes.spherical);break;case 1:let o=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=["zy","xz","xy"][this.axis.value],s=new St(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${a})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${o}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);n=e.include(s);break;case 4:n=e.include(nS.Nodes.triplanar);break;default:n=e.include(nS.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let i=[];if(i.push("normal"),i.push(this.texture.generate(e,"t")),i.push(this.textureSize.build(e,"v2")),i.push(this.crop.build(e,"f")),i.push(this.mat.build(e,"mat3")),i.push(this.size.build(e,"v2")),i.push(this.blending.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),this.projection.value===4){let o=`${r}_writeUvs`,a=o+"0",s=o+"1",l=o+"2",u=`${r}_triplanarWeights`;e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(u,"vec3"),i.push(a),i.push(s),i.push(l),i.push(u)}else{let o=`${r}_writeUvs`;e.addFragmentVariable(o,"vec2"),i.push(o)}return e.format(n+"("+i.join(",")+")",this.getType(e),t)}},Ij=nS;Ij.Nodes=function(){let e=new St(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new St(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new St(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),n=new St(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:r,triplanar:n}}();var iS=class extends xn{constructor(e,t,r,n,i,o,a,s,l,u,d,c){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=n,this.isVector=i,this.isWorldSpace=o,this.origin=a,this.direction=s,this.colors=l,this.steps=u,this.isMask=c,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,n=new St(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[iS.Nodes.vectorLinearWorldSpaceDepth,iS.Nodes.vectorLinearObjectSpaceDepth,iS.Nodes.vectorSphericalObjectSpaceDepth,iS.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let i=e.include(n),o=[];return o.push(this.near.build(e,"f")),o.push(this.far.build(e,"f")),o.push(this.origin.build(e,"v3")),o.push(this.direction.build(e,"v3")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},dae=iS;dae.Nodes=function(){let e=new St(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new St(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new St(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),n=new St(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:n}}();var yje=class extends xn{constructor(e,t,r,n,i,o,a,s){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=n,this.factor=i,this.isMask=s,this.alpha=o,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=new St(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),n=e.include(r),i=[];return i.push(this.color.build(e,"c")),i.push(this.bias.build(e,"f")),i.push(this.scale.build(e,"f")),i.push(this.intensity.build(e,"f")),i.push(this.factor.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},hae=class extends xn{constructor(e,t,r,n,i,o,a,s,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=n,this.offset=i,this.morph=o,this.angle=a,this.isMask=l,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(hae.Nodes.gradient),n=[];return n.push(this.gradientType.build(e,"i")),n.push(this.smooth.build(e,"b")),n.push(this.colors.build(e,"v4[]")),n.push(this.steps.build(e,"f[]")),n.push(this.offset.build(e,"v2")),n.push(this.morph.build(e,"v2")),n.push(this.angle.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},fae=hae;fae.Nodes=function(){return{gradient:new St(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var pae=class extends xn{constructor(e,t,r,n){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=n,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(pae.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let n=[];return n.push(this.texture.generate(e,"t")),n.push("normal"),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},mae=pae;mae.Nodes=function(){return{matcap:new St(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var Lj=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(Lj||{}),hs=function(){let e=new St(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new St(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new fn("float F3 0.3333333"),t.keywords.G3=new fn("float G3 0.1666667");let r=new St(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),n=new St("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),i=new St("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),o=new St(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,i]),a=new St("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),s=new St("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[a]),l=new St(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[s]),u=new St(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);u.keywords.NUM_OCTAVES=new fn("int NUM_OCTAVES 5");let d=new St("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),c=new St(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,i,d]),h=new St(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),f=new St(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),g=new St(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),y=new St(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),m=new St(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),p=new St(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),v=new St(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[h,f,g,y,m,p]);return{simplex:t,simplexFractal:r,simplexAshima:o,fbm:u,perlin:c,voronoi:v}}(),gae=class extends xn{constructor(e,t,r,n,i,o,a,s,l,u,d,c,h,f,g,y,m,p,v){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=n,this.fB=i,this.distortion=o,this.colorA=a,this.colorB=s,this.colorC=l,this.colorD=u,this.noiseType=c,this.voronoiStyle=f,this.highCut=g,this.lowCut=y,this.smoothness=m,this.seed=p,this.quality=v,this.isMask=h,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,n,i){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let o=Object.values(Lj)[this.noiseType.value],a=o=="voronoi"?`
		float v = ${o}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${o}(st),
					   ${o}(st + vec3(1.0)),
					   ${o}(st + vec3(1.0)));
		vec3 r = vec3(${o}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${o}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${o}(st * q));
		float f = ${o}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,s=new St(`vec3 ${o}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${a}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[hs.simplex,hs.simplexFractal,hs.simplexAshima,hs.fbm,hs.perlin,hs.voronoi]),l=e.include(s),u=[];return u.push(this.scale.build(e,"f")),u.push(this.size.build(e,"v3")),u.push(this.move.build(e,"f")),u.push(this.fA.build(e,"v2")),u.push(this.fB.build(e,"v2")),u.push(this.distortion.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.colorC.build(e,"v4")),u.push(this.colorD.build(e,"v4")),u.push(this.voronoiStyle.build(e,"i")),u.push(this.highCut.build(e,"f")),u.push(this.lowCut.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.seed.build(e,"f")),u.push(this.quality.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}};gae.numOctaves=5;var vae=class extends xn{constructor(e,t,r,n,i,o,a,s,l,u,d,c,h,f,g,y){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=n,this.contourThreshold=i,this.outlineThreshold=o,this.contourFrequency=a,this.outlineSmoothing=s,this.contourDirection=l,this.positionalLines=u,this.compensation=d,this.resolution=c,this.normalMap=h,this.depthMap=f,this.pixelRatio=g,this.alpha=y,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let n=this.outlineWidth.build(e,"f"),i=this.resolution.build(e,"v2"),o=this.compensation.build(e,"b"),a=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(n,"uniform float"),e.addVertexParsVariable(i,"uniform vec2"),e.addVertexParsVariable(o,"uniform bool"),e.addVertexParsVariable(a,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${o}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${i} * (${n} / 2.0) * ${r}_clipPosition.w * 2.0 * ${a};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(vae.Nodes.outline),i=[];return i.push(this.outlineColor.build(e,"c")),i.push(this.contourColor.build(e,"c")),i.push(this.outlineWidth.build(e,"f")),i.push(this.contourWidth.build(e,"f")),i.push(this.contourThreshold.build(e,"f")),i.push(this.outlineThreshold.build(e,"f")),i.push(this.contourFrequency.build(e,"f")),i.push(this.outlineSmoothing.build(e,"f")),i.push(this.contourDirection.build(e,"v3")),i.push(this.positionalLines.build(e,"b")),i.push(this.resolution.build(e,"v2")),i.push(this.normalMap.getTexture(e,"t")),i.push(this.depthMap.getTexture(e,"t")),i.push(this.pixelRatio.build(e,"f")),i.push(this.compensation.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),this.firstTime=!this.firstTime,e.format(n+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},yae=vae;yae.Nodes=function(){let e=new St(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new St(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Yd=class extends xn{constructor(e,t,r,n,i,o,a,s,l,u,d,c,h,f,g,y,m,p){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=r,this.blending=n,this.offset=i,this.colorA=o,this.colorB=a,this.frequency=s,this.size=l,this.variation=u,this.smoothness=d,this.zigzag=c,this.rotation=h,this.vertical=f,this.horizontal=g,this.sides=y,this.isMask=p,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let n=`g${this.uuid.toString().replace(/-/g,"")}`,i=new St(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),o=new St(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),a="";if(this.projection.value===4){let d=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,c=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;a=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${d};
				float d1 = ${c};
				float d2 = ${h};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let d=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,c="";this.axis.value===0?c=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?c=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,c=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let h="";switch(this.projection.value){case 0:h="custom_uv = vUv.st;";break;case 1:break;case 2:h=`
							vec3 p = position;
							${c}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}a=`
				vec2 custom_uv;
				${h}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${d};
				`}let s=new St(`vec3 ${n}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${a}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[o,i,Yd.DrawFunctions.circle,Yd.DrawFunctions.ring,Yd.DrawFunctions.polygon,Yd.DrawFunctions.cross,Yd.DrawFunctions.diamond,Yd.DrawFunctions.checkerboard,Yd.DrawFunctions.line,Yd.DrawFunctions.wave]),l=e.include(s),u=[];return u.push("normal"),u.push(this.blending.build(e,"f")),u.push(this.style.build(e,"i")),u.push(this.offset.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.frequency.build(e,"v2")),u.push(this.size.build(e,"f")),u.push(this.variation.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.zigzag.build(e,"f")),u.push(this.rotation.build(e,"f")),u.push(this.vertical.build(e,"v2")),u.push(this.horizontal.build(e,"v2")),u.push(this.sides.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},bae=Yd;bae.DrawFunctions=function(){let e=new St(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new St(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),r=new St(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),n=new St(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),i=new St(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),o=new St(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),a=new St(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),s=new St(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new St(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),u=new St(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:r,ring:n,polygon:i,cross:o,diamond:a,checkerboard:s,line:l,wave:u}}();var xae=class extends xn{constructor(e,t,r,n,i,o,a,s){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=n,this.noiseScale=i,this.offset=o,this.isMask=s,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(xae.Nodes.rainbow),n=[];return n.push(this.filmThickness.build(e,"f")),n.push(this.movement.build(e,"f")),n.push(this.wavelengths.build(e,"v3")),n.push(this.noiseStrength.build(e,"f")),n.push(this.noiseScale.build(e,"f")),n.push(this.offset.build(e,"v3")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},wae=xae;wae.Nodes=function(){let e=new St(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[hs.simplex]);return{rainbow:new St(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var _ae=class extends xn{constructor(e,t,r,n,i,o,a,s,l,u){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=n,this.isWorldSpace=i,this.noiseStrength=o,this.noiseScale=a,this.shadowColor=s,this.offset=l,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(_ae.Nodes.toon),n=[];return n.push(this.positioning.build(e,"i")),n.push(this.colors.build(e,"v4[]")),n.push(this.steps.build(e,"f[]")),n.push(this.source.build(e,"v3")),n.push(this.isWorldSpace.build(e,"b")),n.push(this.noiseStrength.build(e,"f")),n.push(this.noiseScale.build(e,"f")),n.push(this.shadowColor.build(e,"v4")),n.push(this.offset.build(e,"v3")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Sae=_ae;Sae.Nodes=function(){let e=new St(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new St(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new St(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),n=new St(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),i=new St(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[n]);return{toon:new St(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[hs.simplex,e,r,i])}}();var bje=function(){return{textureBicubic:new St(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function xje(e,t){return e>=t?new Ae(t/e,1):new Ae(1,e/t)}var Aae=class extends xn{constructor(e,t,r,n,i,o,a,s){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=n,this.transmissionSamplerMap=i,this.transmissionDepthMap=o,this.aspectRatio=a,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,or.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(Aae.Nodes.transmission),n=[];return n.push(this.thickness.build(e,"f")),n.push(this.ior.build(e,"f")),n.push(this.roughness.build(e,"f")),n.push(this.transmissionSamplerSize.build(e,"v2")),n.push(this.transmissionSamplerMap.getTexture(e,"t")),n.push(this.transmissionDepthMap.getTexture(e,"t")),n.push(this.aspectRatio.build(e,"v2")),n.push("normal"),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Mae=Aae;Mae.Nodes=function(){let e=new St(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new St(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new St(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),n=new St(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[bje.textureBicubic,r,e]),i=new St(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[n,t]);return{transmission:new St(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[i])}}();var bz=(e=>(e.NOISE="noise",e.MAP="map",e))(bz||{}),Cae=class extends xn{constructor(e,t,r,n,i,o,a,s,l,u,d){super("v3"),this.displacementTypeIndex=new Sn(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(bz)[this.displacementTypeIndex.value]==="map"&&(this.mat=new sae(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=u,this.noiseFunctionIndex=d,this.voronoiStyle=n,this.smoothness=i,this.seed=o,this.highCut=a,this.lowCut=s,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,n=[];switch(n.push("displaced_position"),n.push("displaced_normal"),Object.values(bz)[this.displacementTypeIndex.value]){case"map":{r=e.include(Cae.Nodes.map),n.push(this.movementOrTexture.getTexture(e,"t")),n.push("uv"),n.push(this.cropOrOffset.build(e,"f")),this.mat&&n.push(this.mat.build(e,"mat3"));break}case"noise":{let i=Object.values(Lj)[this.noiseFunctionIndex.value],o=new St(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=i=="voronoi"?`
					float v = ${i}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${i}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,s=new St(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${a}
						}`,[hs.simplex,hs.simplexFractal,hs.simplexAshima,hs.fbm,hs.perlin,hs.voronoi]),l=new St(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[s,o]);r=e.include(l),n.push(this.scale.build(e,"f")),n.push(this.cropOrOffset.build(e,"v3")),n.push(this.movementOrTexture.build(e,"f")),n.push(this.voronoiStyle.build(e,"i")),n.push(this.smoothness.build(e,"f")),n.push(this.seed.build(e,"f")),n.push(this.highCut.build(e,"f")),n.push(this.lowCut.build(e,"f")),n.push(this.quality.build(e,"i"));break}}return n.push(this.intensity.build(e,"f")),n.push("displaced_normal"),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Tae=Cae;Tae.Nodes=function(){let e=new St(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new St(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new St(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var or={normalRenderTarget:new ah,normalRenderTargetDepth:new ah,transmissionRenderTarget:new ah,aspectRatio:new No,transmissionSize:new No(2048,2048),transmissionRenderTargetDepth:new ah,aoRenderTarget:new ah,aoEnabled:new Ba,pixelRatioNode:new Lt(1),resolution:new No,penumbraSize:new mg(5,.5),frameIndex:new Sn(0),transmissionLod:new Sn(2)};for(let e of Object.values(or))e.isRenderGlobal=!0;var Eae=class extends tm{constructor(){super("basic"),this.nodeType="Basic",this.color=new vi($l),this.shadingAlpha=new Lt(1),this.shadingBlend=new Sn(0),this.previousModelViewMatrix=new ad,this.previouseProjectionMatrix=new ad}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({resolution:or.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(p1.merge([_t.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{this.color===void 0&&(this.color=new vi($l)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),n=this.alpha?this.alpha.flow(e,"f"):void 0,i=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=n!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let a=["#include <normal_fragment_begin>",r.code];n&&a.push(n.code,"#ifdef ALPHATEST"," if ( "+n.result+" <= ALPHATEST ) discard;","#endif"),o?a.push(o.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`):a.push(`vec3 finalColor = ${r.result};`);let s="1.0";this.mask&&(this.mask.analyze(e),s=`luminance(${this.mask.flow(e,"v3").result})`),n?a.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${n.result} * ${s} );`):a.push("gl_FragColor = vec4("+r.result+", 1.0 );"),i&&a.push(`gl_FragColor.a *= ${i.result};`),a.push("#include <fog_fragment>","#include <dithering_fragment>"),t=a.join(`
`)}return t}},wje=class extends tm{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new vi($l),this.emissive=new vi(0),this.emissiveIntensity=new Lt(1),this.previousModelViewMatrix=new ad,this.previouseProjectionMatrix=new ad,this.shadingAlpha=new Lt(1),this.shadingBlend=new Sn(0),this.occlusion=new Ba(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({resolution:or.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(p1.merge([_t.fog,_t.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),n.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{e.mergeUniform({penumbraSize:or.penumbraSize}),e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({aoMap:or.aoRenderTarget}),e.mergeUniform({aoEnabled:or.aoEnabled}),this.color===void 0&&(this.color=new vi($l)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.emissive.flow(e,"c",{slot:"emissive"}),i=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),o=this.occlusion.flow(e,"b",{slot:"occlusion"}),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),u&&c.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),n&&c.push(n.code,"reflectedLight.directDiffuse += "+n.result+" * "+i.result+";"),c.push("vec3 ao = aoEnabled && "+o.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${h}, ${s.result} );

					outgoingLight *= ao;
				}
				`),l&&c.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&c.push(`gl_FragColor.a *= ${d.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Gx=function(){let e=new St(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new St(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),_je=class extends tm{constructor(){super("phong"),this.nodeType="Phong",this.color=new vi($l),this.specular=new vi(1118481),this.shininess=new Lt(30),this.previousModelViewMatrix=new ad,this.previouseProjectionMatrix=new ad,this.shadingAlpha=new Lt(1),this.shadingBlend=new Sn(0),this.occlusion=new Ba(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({resolution:or.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(p1.merge([_t.fog,_t.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{e.mergeUniform({penumbraSize:or.penumbraSize}),e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({aoMap:or.aoRenderTarget}),e.mergeUniform({aoEnabled:or.aoEnabled}),this.color===void 0&&(this.color=new vi($l)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),o=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(Gx.dHdxy),e.include(Gx.perturbNormalArb);let f=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),y=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";this.bumpMap.projection.value===4?m=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${f.result}, uv0, ${y});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${f.result}, uv1, ${y});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${f.result}, uv2, ${y});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:m=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${f.result}, bumpMapCachedUv, ${y});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,c.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};
					${m}
					`)}c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",i.code,"	vec3 specular = "+i.result+";",o.code,"	float shininess = max( 0.0001, "+o.result+" );","	float specularStrength = 1.0;"),u&&c.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${h}, ${s.result} );
					
					outgoingLight *= ao;
				}
				`),l&&c.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result});`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&c.push(`gl_FragColor.a *= ${d.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Sje=class extends tm{constructor(){super("standard"),this.nodeType="Standard",this.color=new vi($l),this.roughness=new Lt(.3),this.metalness=new Lt(0),this.reflectivity=new Lt(.5),this.previousModelViewMatrix=new ad,this.previouseProjectionMatrix=new ad,this.shadingAlpha=new Lt(1),this.shadingBlend=new Sn(0),this.occlusion=new Ba(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({resolution:or.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(p1.merge([_t.fog,_t.lights])),_t.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{e.mergeUniform({penumbraSize:or.penumbraSize}),e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({aoMap:or.aoRenderTarget}),e.mergeUniform({aoEnabled:or.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new vi($l)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);let n=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let i=this.color.flow(e,"c",{slot:"color",context:r}),o=this.roughness.flow(e,"f"),a=this.metalness.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),u=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,d=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=d!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let f=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Gx.dHdxy),e.include(Gx.perturbNormalArb);let y=this.bumpMap.texture.flow(e,"t"),m=this.bumpMap.flow(e,"v3"),p=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",v="";this.bumpMap.projection.value===4?v=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${y.result}, uv0, ${p});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${y.result}, uv1, ${p});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${y.result}, uv2, ${p});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:v=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${y.result}, bumpMapCachedUv, ${p});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};
					${v}
					`)}if(f.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"	float metalnessFactor = "+a.result+";"),this.roughnessMap){let y=this.roughnessMap.texture.flow(e,"t"),m=this.roughnessMap.flow(e,"v3"),p="";this.roughnessMap.projection.value===4?p=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${y.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${y.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${y.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${o.result};
					`:p=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${y.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${o.result};
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};

					const float roughnessScale = 1.0;

					${p}
				`)}else f.push(o.code,"	float roughnessFactor = "+o.result+";");d&&f.push(d.code,"#ifdef ALPHATEST","	if ( "+d.result+" <= ALPHATEST ) discard;","#endif"),f.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),f.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?f.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):f.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),f.push("#include <lights_fragment_begin>"),f.push("#include <lights_fragment_end>"),f.push("vec3 ao = aoEnabled && "+n.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let g="1.0";this.mask&&(this.mask.analyze(e),g=`luminance(${this.mask.flow(e,"v3").result})`),f.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${g} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${g}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),u&&f.push(u.code,`outgoingLight = spe_blend(outgoingLight, ${u.result}, 1.0, SPE_BLENDING_NORMAL);`),d?f.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${d.result} );`):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&f.push(`gl_FragColor.a *= ${c.result};`),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join(`
`)}return t}},Aje=class extends tm{constructor(){super("toon"),this.nodeType="Toon",this.color=new vi($l),this.specular=new vi(1118481),this.shininess=new Lt(30),this.previousModelViewMatrix=new ad,this.previouseProjectionMatrix=new ad,this.shadingAlpha=new Lt(1),this.shadingBlend=new Sn(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({resolution:or.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(p1.merge([_t.fog,_t.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join(`
`)}else{e.mergeUniform({penumbraSize:or.penumbraSize}),e.mergeUniform({frameIndex:or.frameIndex}),e.mergeUniform({aoMap:or.aoRenderTarget}),e.mergeUniform({aoEnabled:or.aoEnabled}),this.color===void 0&&(this.color=new vi($l)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),i=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(Gx.dHdxy),e.include(Gx.perturbNormalArb);let h=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),g=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";this.bumpMap.projection.value===4?y=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${h.result}, uv0, ${g});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${h.result}, uv1, ${g});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${h.result}, uv2, ${g});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:y=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${h.result}, bumpMapCachedUv, ${g});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,d.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${y}
					`)}d.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	vec3 specular = "+n.result+";",i.code,"	float shininess = max( 0.0001, "+i.result+" );","	float specularStrength = 1.0;"),l&&d.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let c="1.0";this.mask&&(this.mask.analyze(e),c=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${c} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${c}, ${a.result} );
				}
				`),s&&d.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&d.push(`gl_FragColor.a *= ${u.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},Mje=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),r=this.cache.get(e);return r===void 0?(r={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},Cje=class extends Mje{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},$B;function Tje(e){return typeof e=="string"?e:($B||($B=new Cje),$B.load(e))}var Eje=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},Pje=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},Pae=class extends Eje{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type==="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;let n=[1e3,1001,1002];for(let i of n){let o=this[i];o&&(o.image=this.img,o.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var r=new FileReader;r.readAsDataURL(new Blob([e],{type:"video/mp4"}));let n;await new Promise(i=>{r.onloadend=o=>{var a;n=(a=o.target)==null?void 0:a.result,i(null)}}),this.img.src=n}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=Tje(e),this.img.onload=t}getTexture(e){let t=this[e];if(t)return t;{let r;return this.isVideo?r=new COe(this.img,void 0,e,e):r=new io(this.img,void 0,e,e),this.loaded&&(r.needsUpdate=!0),this[e]=r,r}}disposeTextures(){var e,t,r;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(r=this[1002])==null||r.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},Fg=class extends Pae{};function Dje(e,t){var r=Lje(t);return r.formatToParts?Rje(r,e):Ije(r,e)}var Oje={year:0,month:1,day:2,hour:3,minute:4,second:5};function Rje(e,t){try{for(var r=e.formatToParts(t),n=[],i=0;i<r.length;i++){var o=Oje[r[i].type];o>=0&&(n[o]=parseInt(r[i].value,10))}return n}catch(a){if(a instanceof RangeError)return[NaN];throw a}}function Ije(e,t){var r=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var eN={};function Lje(e){if(!eN[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";eN[e]=r?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return eN[e]}function Dae(e,t,r,n,i,o,a){var s=new Date(0);return s.setUTCFullYear(e,t,r),s.setUTCHours(n,i,o,a),s}var qX=36e5,Bje=6e4,tN={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Oae(e,t,r){var n,i;if(!e||(n=tN.timezoneZ.exec(e),n))return 0;var o;if(n=tN.timezoneHH.exec(e),n)return o=parseInt(n[1],10),XX(o)?-(o*qX):NaN;if(n=tN.timezoneHHMM.exec(e),n){o=parseInt(n[1],10);var a=parseInt(n[2],10);return XX(o,a)?(i=Math.abs(o)*qX+a*Bje,o>0?-i:i):NaN}if(Fje(e)){t=new Date(t||Date.now());var s=r?t:Nje(t),l=xz(s,e),u=r?l:kje(t,l,e);return-u}return NaN}function Nje(e){return Dae(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function xz(e,t){var r=Dje(e,t),n=Dae(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),i=e.getTime(),o=i%1e3;return i-=o>=0?o:1e3+o,n-i}function kje(e,t,r){var n=e.getTime(),i=n-t,o=xz(new Date(i),r);if(t===o)return t;i-=o-t;var a=xz(new Date(i),r);return o===a?o:Math.max(o,a)}function XX(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var YX={};function Fje(e){if(YX[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),YX[e]=!0,!0}catch{return!1}}var zje=Po(uCe(),1),KX=Po(cCe(),1),Uje=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Vje=Uje,rN=36e5,JX=6e4,jje=2,Na={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Vje};function Hje(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var r=t||{},n=r.additionalDigits==null?jje:(0,zje.default)(r.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var i=Gje(e),o=Wje(i.date,n),a=o.year,s=o.restDateString,l=qje(s,a);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),d=0,c;if(i.time&&(d=Xje(i.time),isNaN(d)))return new Date(NaN);if(i.timeZone||r.timeZone){if(c=Oae(i.timeZone||r.timeZone,new Date(u+d)),isNaN(c))return new Date(NaN)}else c=(0,KX.default)(new Date(u+d)),c=(0,KX.default)(new Date(u+d+c));return new Date(u+d+c)}else return new Date(NaN)}function Gje(e){var t={},r=Na.dateTimePattern.exec(e),n;if(r?(t.date=r[1],n=r[3]):(r=Na.datePattern.exec(e),r?(t.date=r[1],n=r[2]):(t.date=null,n=e)),n){var i=Na.timeZone.exec(n);i?(t.time=n.replace(i[1],""),t.timeZone=i[1].trim()):t.time=n}return t}function Wje(e,t){var r=Na.YYY[t],n=Na.YYYYY[t],i;if(i=Na.YYYY.exec(e)||n.exec(e),i){var o=i[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(i=Na.YY.exec(e)||r.exec(e),i){var a=i[1];return{year:parseInt(a,10)*100,restDateString:e.slice(a.length)}}return{year:null}}function qje(e,t){if(t===null)return null;var r,n,i,o;if(e.length===0)return n=new Date(0),n.setUTCFullYear(t),n;if(r=Na.MM.exec(e),r)return n=new Date(0),i=parseInt(r[1],10)-1,ZX(t,i)?(n.setUTCFullYear(t,i),n):new Date(NaN);if(r=Na.DDD.exec(e),r){n=new Date(0);var a=parseInt(r[1],10);return Jje(t,a)?(n.setUTCFullYear(t,0,a),n):new Date(NaN)}if(r=Na.MMDD.exec(e),r){n=new Date(0),i=parseInt(r[1],10)-1;var s=parseInt(r[2],10);return ZX(t,i,s)?(n.setUTCFullYear(t,i,s),n):new Date(NaN)}if(r=Na.Www.exec(e),r)return o=parseInt(r[1],10)-1,$X(t,o)?QX(t,o):new Date(NaN);if(r=Na.WwwD.exec(e),r){o=parseInt(r[1],10)-1;var l=parseInt(r[2],10)-1;return $X(t,o,l)?QX(t,o,l):new Date(NaN)}return null}function Xje(e){var t,r,n;if(t=Na.HH.exec(e),t)return r=parseFloat(t[1].replace(",",".")),nN(r)?r%24*rN:NaN;if(t=Na.HHMM.exec(e),t)return r=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),nN(r,n)?r%24*rN+n*JX:NaN;if(t=Na.HHMMSS.exec(e),t){r=parseInt(t[1],10),n=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return nN(r,n,i)?r%24*rN+n*JX+i*1e3:NaN}return null}function QX(e,t,r){t=t||0,r=r||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var i=n.getUTCDay()||7,o=t*7+r+1-i;return n.setUTCDate(n.getUTCDate()+o),n}var Yje=[31,28,31,30,31,30,31,31,30,31,30,31],Kje=[31,29,31,30,31,30,31,31,30,31,30,31];function Rae(e){return e%400===0||e%4===0&&e%100!==0}function ZX(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;var n=Rae(e);if(n&&r>Kje[t]||!n&&r>Yje[t])return!1}return!0}function Jje(e,t){if(t<1)return!1;var r=Rae(e);return!(r&&t>366||!r&&t>365)}function $X(e,t,r){return!(t<0||t>52||r!=null&&(r<0||r>6))}function nN(e,t,r){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function Qje(e,t,r){var n=Hje(e,r),i=Oae(t,n,!0),o=new Date(n.getTime()-i),a=new Date(0);return a.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),a.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),a}function za(e,t){return t.color(e)}function eY(e=new Date,t){let r=t.format,n=e.getSeconds(),i=e;t&&t.timeZone!==null&&(i=Qje(new Date,t.timeZone));let o=i.getHours(),a=i.getMinutes(),s;t.format12h24h==="12ampm"&&(s=o>=12?"PM":"AM");let l=o;t.format12h24h!=="24"&&(l=o%12,l===0&&(l=12));let u,d;switch(r){case"HH:mm:ss":u=[l,a,n];break;case"HH:mm":u=[l,a];break;case"HH":u=[l],s=void 0;break;case"mm":u=[a],s=void 0;break;case"ss":u=[n],s=void 0;break;case"year":d=i.getFullYear();break;case"month":d=i.getMonth()+1;break;case"dayOfYear":d=Math.floor((i.getTime()-new Date(i.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":d=i.getDate();break;case"secondOfDay":d=o*60*60+a*60+n;break;default:console.error("Unknown time format",r),d=0;break}return u!==void 0?{textValue:u,suffix:s}:d}function Zje(e,t){switch(e.type){case"fresnel":return tHe(e,t);case"gradient":return rHe(e,t);case"depth":return nHe(e,t);case"normal":return iHe(e,t);case"noise":return oHe(e,t);case"rainbow":return aHe(e,t);case"toon":return sHe(e,t);case"outline":return lHe(e,t);case"transmission":return uHe(e,t);case"color":return eHe(e,t);case"pattern":return cHe(e,t)}}function $je(e){return{type:e.type}}function $u(e,t){let{alpha:r,mode:n,isMask:i}=e,o=typeof r=="string"?(Number(t.getVariable(r))??100)/100:r;return{...$je(e),alpha:o,mode:n,isMask:i}}function eHe(e,t){return{...$u(e,t),color:za(e.color,t)}}function tHe(e,t){let{bias:r,scale:n,intensity:i,factor:o,color:a}=e;return{...$u(e,t),color:za(a,t),bias:r,scale:n,intensity:i,factor:o}}function rHe(e,t){let{gradientType:r,smooth:n,colors:i,steps:o,angle:a,offset:s,morph:l}=e;return{...$u(e,t),gradientType:r,smooth:n,colors:i.map(u=>new Mr(u[0],u[1],u[2],u[3])),num:i.length,steps:o,offset:new Ae(...s),morph:new Ae(...l),angle:a}}function nHe(e,t){let{gradientType:r,near:n,far:i,isVector:o,isWorldSpace:a,origin:s,direction:l,colors:u,steps:d,smooth:c}=e;return{...$u(e,t),gradientType:r,near:n,far:i,isVector:o,isWorldSpace:a,origin:new X(...s),direction:l?new X(...l):new X(1,0,0),colors:u.map(h=>h!==void 0?new Mr(h[0],h[1],h[2],h[3]):new Mr(0,0,0,0)),steps:d.slice(0,u.length),smooth:c}}function iHe(e,t){let{cnormal:r}=e;return{...$u(e,t),cnormal:new X(r[0],r[1],r[2])}}function oHe(e,t){return{...$u(e,t),scale:e.scale,move:e.move,fA:new Ae(...e.fA),fB:new Ae(...e.fB),size:new X(...e.size),distortion:new Ae(...e.distortion),colorA:za(e.colorA,t),colorB:za(e.colorB,t),colorC:za(e.colorC,t),colorD:za(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function aHe(e,t){return{...$u(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new X(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new X(...e.offset)}}function sHe(e,t){return{...$u(e,t),positioning:e.positioning,colors:e.colors.map(r=>new Mr(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new X(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:za(e.shadowColor,t),offset:new X(...e.offset)}}function lHe(e,t){return{...$u(e,t),outlineColor:za(e.outlineColor,t),contourColor:za(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new X(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function uHe(e,t){return{...$u(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function cHe(e,t){return{...$u(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new Ae(...e.offset),colorA:za(e.colorA,t),colorB:za(e.colorB,t),frequency:new Ae(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new Ae(...e.vertical),horizontal:new Ae(...e.horizontal),sides:e.sides}}var dO=class extends Cs{},Iae={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},Lae={depth:["colors"]};function dHe(e,t,r){var o,a;if(t==="isMask")return!0;let n=Iae[e.type],i=Lae[e.type];if(i!==void 0){let s=e.color;if(i.includes(t)){let l=(a=(o=s[t])==null?void 0:o.value)==null?void 0:a.length;if(l!==void 0&&l!==r.length)return!0}}return n!==void 0?n.includes(t):!1}function Bae(e,t,r){let n=r.uniforms[`f${r.id}_texture`];if(!n)return!1;let i=!1,o=e;if("image"in o){let a=o.image,s=t.image(a),l=n;l.image instanceof Fg||l.image.deref(),l.image=s}if("video"in o){let a=o.video,s=t.video(a),l=n;l.image instanceof Fg||l.image.deref(),l.image=s}if("wrapping"in o){let a=n;a.wrap=o.wrapping}if("repeat"in o||"offset"in o){let a="mat",s=r.uniforms[`f${r.id}_${a}`];"repeat"in o&&(s.repeat=o.repeat),"offset"in o&&(s.offset=o.offset),s.updateMatrix()}return i}function hHe(e,t,r,n){let i=!1;for(let[o,a]of Object.entries(e)){if(o==="bumpMap"||o==="roughnessMap"){i=!0;continue}if(!o||a===void 0)continue;if(kae(o,r,n,t)){o==="visible"&&r.type==="light"&&(i=!0);continue}r.visible=n.visible;let s=r.uniforms[`f${r.id}_${o}`];if(s&&!(s instanceof Rj))switch(i=i||dHe(r,o,a),s.constructor){case vi:if(typeof a=="string"){let l=t.getColor(a);l&&(s.value=l);break}else{let l=a;s.value instanceof dO?s.value=new Cs(l.r,l.g,l.b,l.a):s.setRGBA(l);break}case Zd:if(typeof a=="string"){let l=t.getColor(a);l&&(s.value=l);break}else{let l=a;s.value instanceof dO?s.value=new Cs(l.r,l.g,l.b,l.a):s.value.setRGBA(l.r,l.g,l.b,l.a);break}case No:{let l=a;s.value.setX(l[0]),s.value.setY(l[1]);break}case Rl:{let l=a;s.value.setX(l[0]),s.value.setY(l[1]),s.value.setZ(l[2]);break}case ah:{Bae(a,t,r);break}case gg:{s.value=a.map(l=>new Mr(...l));break}default:{s.value=a;break}}}return i}var x0=(e,t,r)=>Math.max(0,Math.min(1,Number(t.getVariable(typeof e=="number"?e*100:e,r)??100)/100))??1,n0=class{constructor(e,t,r,n,i){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let o in n)this.uniforms[`f${this.id}_${o}`]=n[o];for(let o in r)kae(o,this,r,i)}get type(){return this.data.type}static create(e,t,r,n){if(r.type==="light")return $d.createLigherLayer(e,t,r,n);if(r.type==="texture"||r.type==="video"){let i=r.type==="texture"?n.image(r.texture.image):n.video(r.texture.video),o=new vz(i,r.texture.wrapping),a=new gje(i),s=new vje(r.texture.repeat,r.texture.offset),l=new Lt(r.crop?1:0),u=new Sn(r.projection??0),d=new Sn(["x","y","z"].indexOf(r.axis)??0),c=new Sn(r.side??0),h=new No(r.size?new Ae(r.size[0],r.size[1]):new Ae(100,100)),f=new Lt(r.blending??0),g=new Lt(x0(r.alpha,n)),y=new Sn(r.mode??0),m=new Ba(r.isMask??!1),p=new Ij(o,a,l,u,d,c,h,f,s,g,y,m),v=new Pn(p.calpha,"f");return new di(e,t,r,{texture:o,textureSize:a,crop:l,projection:u,axis:d,side:c,size:h,blending:f,mat:s,alpha:g,mode:y,isMask:m},p,y,v,m,n)}else if(r.type==="matcap"){let i=n.image(r.texture.image),o=new vz(i,r.texture.wrapping),a=new Lt(x0(r.alpha,n)),s=new Sn(r.mode??0),l=new Ba(r.isMask??!1),u=new mae(o,a,s,l),d=new Pn(u.calpha,"f");return new di(e,t,r,{texture:o,alpha:a,mode:s,isMask:l},u,s,d,l,n)}else if(r.type==="displace")if(r.displacementType==="noise"){let i=new Rl(new X(...r.offset)),o=new Lt(r.scale??10),a=new Lt(r.intensity??8),s=new Lt(r.movement??1),l=new Sn(r.noiseType??0),u=new Sn(r.voronoiStyle??0),d=new Lt(r.smoothness??.5),c=new Lt(r.seed??0),h=new Lt(r.highCut??1),f=new Lt(r.lowCut??0),g=new Sn(r.quality??1),y=new Tae(a,s,i,u,d,c,h,f,g,o,l);return new Nae(e,t,r,{offset:i,scale:o,intensity:a,movement:s,noiseType:l,voronoiStyle:u,smoothness:d,seed:c,highCut:h,lowCut:f,quality:g},y,n)}else throw new Error;else return mHe(e,t,r,n)}updateByOp(e,t,r){let n=e;if(n.path[0]===void 0){if(n.type===0)return"type"in n.props||"category"in n.props||"visible"in n.props?(r.scene.markNeedsUpdateRendererDirty(),!0):hHe(n.props,r.shared,this,t)}else if(n.path[0]==="texture")return"texture"in t||"video"in t?Bae(n.props,r.shared,this):!0;return!1}dispose(){if(fHe(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Fg||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},di=class extends n0{constructor(e,t,r,n,i,o,a,s,l){super(e,t,r,n,l),this.params=n,this.color=i,this.mode=o,this.alpha=a,this.isMask=s}},Nae=class extends n0{constructor(e,t,r,n,i,o){super(e,t,r,n,o),this.position=i}},$d=class extends n0{constructor(e,t,r,n,i,o){super(e,t,r,i,o),this.node=n}static createLigherLayer(e,t,r,n){let i,o=new Lt(x0(r.alpha,n)),a=new Sn(r.mode),s=new Lt(r.bumpMapIntensity),l=new Lt(x0(r.alphaOverride,n)),u;if(!r.visible)i=new Eae,u={};else if(r.category==="lambert"){i=new wje;let d=new vi(n.color(r.emissive)??0),c=new Ba(r.occlusion??!0);u={emissive:d,occlusion:c},i.emissive=d,i.occlusion=c}else if(r.category==="toon"){i=new Aje;let d=new Lt(r.shininess??30),c=new vi(n.color(r.specular)??1118481);u={shininess:d,specular:c},i.shininess=d,i.specular=c}else if(r.category==="physical"){i=new Sje;let d=new Lt(r.roughness??.3),c=new Lt(r.metalness??0),h=new Lt(r.reflectivity??.5),f=new Ba(r.occlusion??!0);u={roughness:d,metalness:c,reflectivity:h,occlusion:f},i.roughness=d,i.metalness=c,i.reflectivity=h,i.occlusion=f}else{i=new _je;let d=new Lt(r.shininess??30),c=new vi(r.specular!==void 0?n.color(r.specular)??1118481:1118481),h=new Ba(r.occlusion??!0);u={shininess:d,specular:c,occlusion:h},i.shininess=d,i.specular=c,i.occlusion=h}return i.alpha=new Lt(1),i.shadingAlpha=o,i.shadingBlend=a,i.bumpMapIntensity=s,i.alphaOverride=l,u.alpha=i.shadingAlpha,u.mode=i.shadingBlend,u.bumpMapIntensity=i.bumpMapIntensity,u.alphaOverride=i.alphaOverride,new $d(e,t,r,i,u,n)}get category(){return this.node.category}};function fHe(e){let t=e instanceof n0?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function Al(e){return{alpha:new Lt(e.alpha??1),mode:new Sn(e.mode??0),isMask:new Ba(e.isMask??!1)}}function pHe(e,t,r,n,i){switch(e.type){case"color":{let o=new vi(n.color??$l),a=Al(n),s=new yz(o,a.alpha),l=new Pn(s.calpha,"f");return new di(t,r,e,{color:o,...a},s,a.mode,l,a.isMask,i)}case"fresnel":{let o=new vi(n.color??16777215),a=new Lt(n.bias??.1),s=new Lt(n.scale??1),l=new Lt(n.intensity??2),u=new Lt(n.factor??1),d=Al(n),c=new yje(o,a,s,l,u,d.alpha,d.mode,d.isMask),h=new Pn(c.calpha,"f");return new di(t,r,e,{color:o,bias:a,scale:s,intensity:l,factor:u,...d},c,d.mode,h,d.isMask,i)}case"rainbow":{let o=new Lt(n.filmThickness??30),a=new Lt(n.movement??0),s=new Rl(n.wavelengths??new X(0,0,0)),l=new Lt(n.noiseStrength??0),u=new Lt(n.noiseScale??1),d=new Rl(n.offset??new X(0,0,0)),c=Al(n),h=new wae(o,a,s,l,u,d,c.alpha,c.isMask),f=new Pn(h.calpha,"f");return new di(t,r,e,{filmThickness:o,movement:a,wavelengths:s,noiseStrength:l,noiseScale:u,offset:d,...c},h,c.mode,f,c.isMask,i)}case"transmission":{let o=new Lt(n.thickness??10),a=new Lt(n.ior??1.5),s=new Lt(n.roughness??.5),l=or.transmissionSize,u=or.transmissionRenderTarget,d=or.transmissionRenderTargetDepth,c=window.innerWidth,h=window.innerHeight,f=c>=h?new No(h/c,1):new No(1,c/h),g=Al(n),y=new Mae(o,a,s,l,u,d,f,g.alpha),m=new Pn(y.calpha,"f");return new di(t,r,e,{thickness:o,ior:a,roughness:s,aspectRatio:f,...g},y,g.mode,m,g.isMask,i)}case"toon":{let o=new Sn(n.positioning??0),a;n.colors?a=new gg(n.colors.length,n.colors):(a=new gg(10,new Mr(0,0,0,1)),a.value[1]=new Mr(1,1,1,1));let s;n.steps?s=new mg(n.steps.length,n.steps):(s=new mg(10,1),s.value[0]=0);let l=new Rl(n.source??new X(0,0,0)),u=new Ba(n.isWorldSpace??!0),d=new Lt(n.noiseStrength??0),c=new Lt(n.noiseScale??1),h=new Zd(n.shadowColor),f=new Rl(n.offset??new X(0,0,0)),g=Al(n),y=new Sae(o,a,s,l,u,d,c,h,f,g.alpha),m=new Pn(y.calpha,"f");return new di(t,r,e,{positioning:o,colors:a,steps:s,source:l,isWorldSpace:u,noiseStrength:d,noiseScale:c,shadowColor:h,offset:f,...g},y,g.mode,m,g.isMask,i)}case"outline":{let o=new vi(n.outlineColor??16777215),a=new vi(n.contourColor??16777215),s=new Lt(n.outlineWidth??.1),l=new Lt(n.contourWidth??.1),u=new Lt(n.outlineThreshold??.1),d=new Lt(n.contourThreshold??.1),c=new Lt(n.outlineSmoothing??.1),h=new Lt(n.contourFrequency??.1),f=new Rl(n.contourDirection??new X(0,1,0)),g=new Ba(n.positionalLines??!1),y=new Ba(n.compensation??!0),m=or.normalRenderTarget,p=or.normalRenderTargetDepth,v=or.pixelRatioNode,b=or.resolution,x=Al(n),_=new yae(o,a,s,l,u,d,c,h,f,g,y,b,m,p,v,x.alpha),A=new Pn(_.calpha,"f");return new di(t,r,e,{outlineColor:o,contourColor:a,outlineWidth:s,contourWidth:l,outlineThreshold:u,contourThreshold:d,outlineSmoothing:c,contourFrequency:h,contourDirection:f,positionalLines:g,compensation:y,...x},_,x.mode,A,x.isMask,i)}case"depth":{let o=new Sn(n.gradientType??0),a=new Ba(n.smooth??!1),s=new Lt(n.near??50),l=new Lt(n.far??200),u=new Lt(n.isVector??1),d=new Lt(n.isWorldSpace??0),c=new Rl(n.origin??new X),h=new Rl(n.direction??new X),f;n.colors?f=new gg(n.colors.length,n.colors):(f=new gg(2,new Mr(0,0,0,1)),f.value[1]=new Mr(1,1,1,1));let g;n.steps?g=new mg(n.steps.length,n.steps):(g=new mg(2,1),g.value[0]=0);let y=Al(n),m=new dae(o,a,s,l,u,d,c,h,f,g,y.alpha,y.isMask),p=new Pn(m.calpha,"f");return new di(t,r,e,{gradientType:o,smooth:a,near:s,far:l,isVector:u,isWorldSpace:d,origin:c,direction:h,colors:f,steps:g,...y},m,y.mode,p,y.isMask,i)}case"noise":{let o=new Lt(n.scale??1),a=new Rl(n.size??new X(100,100,100)),s=new Lt(n.move??1),l=new No(n.fA??new Ae(1.7,9.2)),u=new No(n.fB??new Ae(8.3,2.8)),d=new No(n.distortion??new Ae(1,1)),c=new Zd(n.colorA),h=new Zd(n.colorB),f=new Zd(n.colorC),g=new Zd(n.colorD),y=new Sn(n.noiseType??0),m=new Sn(n.voronoiStyle??0),p=new Lt(n.highCut??1),v=new Lt(n.lowCut??0),b=new Lt(n.smoothness??.5),x=new Lt(n.seed??.5),_=new Sn(n.quality??1),A=Al(n),M=new gae(o,a,s,l,u,d,c,h,f,g,A.alpha,y,A.isMask,m,p,v,b,x,_),T=new Pn(M.calpha,"f");return new di(t,r,e,{scale:o,size:a,move:s,fA:l,fB:u,distortion:d,colorA:c,colorB:h,colorC:f,colorD:g,noiseType:y,...A,voronoiStyle:m,highCut:p,lowCut:v,smoothness:b,seed:x,quality:_},M,A.mode,T,A.isMask,i)}case"normal":{let o=new Rl(n.cnormal??new X(1,1,1)),a=Al(n),s=new cae(o,a.alpha),l=new Pn(s.calpha,"f");return new di(t,r,e,{cnormal:o,...a},s,a.mode,l,a.isMask,i)}case"gradient":{let o=new Sn(n.gradientType??0),a=new Ba(n.smooth??!1),s;n.colors?s=new gg(n.colors.length,n.colors):(s=new gg(10,new Mr(0,0,0,1)),s.value[1]=new Mr(1,1,1,1));let l;n.steps?l=new mg(n.steps.length,n.steps):(l=new mg(10,1),l.value[0]=0);let u=new No(n.offset??new Ae(0,0)),d=new No(n.morph??new Ae(0,0)),c=new Lt(n.angle??0),h=Al(n),f=new fae(o,a,s,l,u,d,c,h.alpha,h.isMask),g=new Pn(f.calpha,"f");return new di(t,r,e,{gradientType:o,smooth:a,colors:s,steps:l,offset:u,morph:d,angle:c,...h},f,h.mode,g,h.isMask,i)}case"pattern":{let o=new Sn(n.style??0),a=new Sn(n.projection??0),s=new Sn(["x","y","z"].indexOf(n.axis)??0),l=new Lt(n.blending??0),u=new No(n.offset??new Ae(0,0)),d=new Zd(n.colorA),c=new Zd(n.colorB),h=new No(n.frequency??new Ae(10,10)),f=new Lt(n.size??.5),g=new Lt(n.variation??0),y=new Lt(n.smoothness??.5),m=new Lt(n.zigzag??0),p=new Lt(n.rotation??0),v=new No(n.vertical??new Ae(0,1)),b=new No(n.horizontal??new Ae(0,1)),x=new Sn(n.sides??6),_=Al(n),A=new bae(o,a,s,l,u,d,c,h,f,g,y,m,p,v,b,x,_.alpha,_.isMask),M=new Pn(A.calpha,"f");return new di(t,r,e,{style:o,projection:a,axis:s,blending:l,offset:u,colorA:d,colorB:c,frequency:h,size:f,variation:g,smoothness:y,zigzag:m,rotation:p,vertical:v,horizontal:b,sides:x,..._},A,_.mode,M,_.isMask,i)}default:{let o=new vi(1,0,0,1),a=Al(n),s=new yz(o,a.alpha),l=new Pn(s.calpha,"f");return new di(t,r,e,{color:o,...a},s,a.mode,l,a.isMask,i)}}}function mHe(e,t,r,n){let i=Zje(r,n);return pHe(r,e,t,i,n)}function kae(e,t,r,n){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let i=t.uniforms[`f${t.id}_intensity`];return i?(i.value=r.intensity*(r.visible?1:0),i):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let i=t.uniforms[`f${t.id}_alpha`];if(!i)return;if(i.value=x0(r.alpha,n)*(r.visible?1:0),r.type==="outline"&&e==="visible"){let o=t.uniforms[`f${t.id}_compensation`];o&&(o.value=r.compensation&&r.visible)}return i}}function Tb(e,t){let r=0,n=e.layers.find(i=>i.data.type==="light");if(n){let i=n.data,o=Number(t.getVariable(i.alphaOverride));if((typeof i.alphaOverride=="string"?o/100:i.alphaOverride)<1)return!0}for(let i of e.layers){if(i.data.type!=="displace"&&i.data.isMask)return!0;if(i.data.type!=="displace"&&"alpha"in i.data&&i.data.type!=="light"&&i.data.type!=="fresnel"&&i.data.type!=="texture"&&i.data.type!=="matcap"&&i.data.type!=="rainbow"&&i.data.type!=="outline"&&i.data.type!=="pattern"){let o=i.data.visible?i.data.alpha:0;if(typeof o=="string"&&(o=Math.max(0,Math.min(1,Number(t.getVariable(o)??100)/100))),o===1&&i.data.type==="depth"||i.data.type==="gradient"){for(let a of i.data.colors)if(a[3]<1){o=a[3];break}}else if(o===1&&i.data.type==="noise"){let a=t.color(i.data.colorA).a,s=t.color(i.data.colorB).a,l=t.color(i.data.colorC).a,u=t.color(i.data.colorD).a,d=Math.min(a,Math.min(s,Math.min(l,u)));d<1&&(o=d)}r+=(1-r)*o}}return r<1}var Hp=class extends An{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},gHe=class extends Hp{constructor(e,t,r,n){super(),this.flatShading=e,this.side=t,this.wireframe=r,this.root=n}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,r){return this.root.getFlavor(e,t,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,r){this.root.updateByOp(e,t,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Bj=class extends Hp{constructor(e,t,r=!0){super(),this.data=e,this.allowVariableSaves=r,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,r){let n=r?6:(e?3:0)+t;if(n===0)return this;this.flavors===void 0&&(this.flavors=[]),n-=1;let i=this.flavors[n];return i===void 0&&(i=new gHe(e,t,r,this),this.flavors[n]=i,i.flatShading=e,i.side=t,i.updateAfterBuild()),i}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){this.data=e;let r=e.layers??aa.defaultTwoLayerData("phong").layers;try{this.layers=r.map(n=>n0.create(this.layerIdGen++,n.id,n.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=Tb(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,r){if(e[0]==="alphaOverride")this.transparent=Tb(this.data,r.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if(e[0]==="layer"){let n=e[1],i=e[2];if(n&&i){let o=this.layers.find(a=>a.uuid===n);o!=null&&o.hasValue(i)&&(i==="alpha"?(this.transparent=Tb(this.data,r.shared),o.setValue(i,Math.max(0,Math.min(Number(t)/100,1)))):o.setValue(i,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(r=>r.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(r=>{"alpha"in r.data&&typeof r.data.alpha=="string"&&e.shared.getVariable(r.data.alpha,["material",this.uuid,"layer",r.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(t=>t instanceof $d),this.lightLayer===void 0&&(this.lightLayer=new $d(0,"",{...ds.defaultData("light","phong"),visible:!1},new Eae,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(i=>i instanceof $d);if(!e)return;let t=e.data,r=t.bumpMap,n=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let i=0;i<this.layers.length;++i){let o=this.layers[i];o instanceof di&&o.color instanceof Ij&&(o.uuid===r&&(e.node.bumpMap=o.color),o.uuid===n&&(e.node.roughnessMap=o.color))}}updateByOp(e,t,r){if(t!==void 0?this.data=t:t=this.data,this.transparent=Tb(t,r.shared),e.path[0]==="layers"){this.data=t;let n=r.shared,i=e.path[1];if(i===void 0){if(this.layers.reverse(),e.type===4){let o=n0.create(this.layerIdGen++,e.id,e.data,r.shared);this.layers.splice(e.localIndex,0,o),r.scene.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),r.scene.markNeedsUpdateRendererDirty();else if(e.type===6){let o=this.layers.findIndex(s=>s.uuid===e.id),a=this.layers[o];this.layers.splice(o,1),this.layers.splice(e.localIndex,0,a),r.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate(r.shared)}else{e.type===0&&e.props.occlusion!==void 0&&r.scene.markNeedsUpdateRendererDirty();let o=this.layers.find(a=>a.uuid===i);if(o){let a=t.layers.data(i),s;if(e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?s={...e.props,alpha:x0(e.props.alpha,n,["material",this.uuid,"layer",i,"alpha"])}:s={...e.props,alphaOverride:x0(e.props.alphaOverride,n,["material",this.uuid,"alphaOverride"])}),o.updateByOp({...e,...s?{props:s}:{},path:e.path.slice(2)},a,r)){let l=n0.create(this.layerIdGen++,i,a,n);this.layers.splice(this.layers.findIndex(u=>u.uuid===i),1,l),this.onUpdate(r.shared)}}}}else this.reset(t,r)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof di?t.color.mask=void 0:t instanceof $d&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof di&&t.isMask.value&&t.data.visible&&e>0){let r=e-1,n=this.layers[r];n instanceof $d?n.node.mask=new ss(t.color,t.alpha,ss.MUL):n instanceof di&&(n.isMask.value||(n.color.mask=new ss(t.color,t.alpha,ss.MUL)))}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof di),t=this.layers.findIndex(r=>r instanceof $d);if(e!==-1&&e<t){let r=this.layers[e].color;for(let n=e+1;n<t;++n){let i=this.layers[n];if(i instanceof di){if(i.isMask.value)continue;r=new WX(r,i.color,i.alpha,i.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new Pn("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof $d);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let n=this.layers[r];if(n instanceof di){if(n.isMask.value)continue;e=new WX(e,n.color,n.alpha,n.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof Nae);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new ss(t,e[r].position,ss.ADD),t=new ss(t,new Lt(.5).setReadonly(!0),ss.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(n,i,o)=>Math.min(Math.max(n,i),o);for(let n of this.layers)if(n.type==="displace"){let i=r(n.uniforms[`f${n.id}_intensity`].value,e,t);n.uniforms[`f${n.id}_intensity`].value=i}}computeCacheKey(){let e="[";for(let{data:t}of this.data.layers)if(t.type==="light")e+=`"${t.visible?t.category.toUpperCase():"Basic"}"`;else{let r=(Iae[t.type]??[]).map(s=>t[s]),n=(Lae[t.type]??[]).map(s=>{var l;return((l=t[s])==null?void 0:l.length)??0}),i=[...r,...n],o="isMask"in t&&t.isMask,a=`"${t.type}-${t.visible}-${o}"`;i.length?e+=`[${a}, "${i.join('","')}"],`:e+=a}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new mje;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof di){let t=e.params.texture;if(t instanceof vz&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Hp.prototype,{properties:{get:function(){return this.fragment.properties}}});var wz=class extends Bj{constructor(e,t,r){super(e,t,!1),this.uuid=r,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},vHe=Po(dCe()),tY=new Map;function yHe(e){if(typeof e=="string")return e;let t=tY.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},tY.set(e,t)),t.url}var oS=class{constructor({src:t,volume:r,delay:n,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let o;typeof t=="string"?o={src:t}:o={src:yHe(t),format:"wav"},this.sound=new vHe.Howl(o),this.sound.on("end",this.onEnd),this.src=t,r!==void 0&&(this.volume=r),n!==void 0&&(this.delay=n),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(t){this._volume=t,this.sound.volume(t)}get loop(){return this._loop}set loop(t){this._loop=t,this.loopsRemaining=t}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(t,r=1e3){t?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,r),this.clearFade()},t)):this.sound.fade(this._volume,0,r)}on(t,r,n){this.sound.on(t,r,n)}off(t,r,n){this.sound.off(t,r,n)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(t=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},bHe=class{constructor(){this.type="ShapePath",this.color=new tr,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new OD,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var r;return(r=this.currentPath)==null||r.lineTo(e,t),this}quadraticCurveTo(e,t,r,n){var i;return(i=this.currentPath)==null||i.quadraticCurveTo(e,t,r,n),this}bezierCurveTo(e,t,r,n,i,o){var a;return(a=this.currentPath)==null||a.bezierCurveTo(e,t,r,n,i,o),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function r(f,g,y,m){let p=f.x,v=g.x,b=y.x,x=m.x,_=f.y,A=g.y,M=y.y,T=m.y,C=(x-b)*(_-M)-(T-M)*(p-b),E=(v-p)*(_-M)-(A-_)*(p-b),D=(T-M)*(v-p)-(x-b)*(A-_),I=C/D,k=E/D;if(D===0&&C!==0||I<=0||I>=1||k<0||k>1)return null;if(C===0&&D===0){for(let L=0;L<2;L++)if(n(L===0?y:m,f,g),t.loc===e.ORIGIN){let U=L===0?y:m;return{x:U.x,y:U.y,t:t.t}}else if(t.loc===e.BETWEEN){let U=+(p+t.t*(v-p)).toPrecision(10),W=+(_+t.t*(A-_)).toPrecision(10);return{x:U,y:W,t:t.t}}return null}else{for(let W=0;W<2;W++)if(n(W===0?y:m,f,g),t.loc===e.ORIGIN){let G=W===0?y:m;return{x:G.x,y:G.y,t:t.t}}let L=+(p+I*(v-p)).toPrecision(10),U=+(_+I*(A-_)).toPrecision(10);return{x:L,y:U,t:I}}}function n(f,g,y){let m=y.x-g.x,p=y.y-g.y,v=f.x-g.x,b=f.y-g.y,x=m*b-v*p;if(f.x===g.x&&f.y===g.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===y.x&&f.y===y.y){t.loc=e.DESTINATION,t.t=1;return}if(x<-Number.EPSILON){t.loc=e.LEFT;return}if(x>Number.EPSILON){t.loc=e.RIGHT;return}if(m*v<0||p*b<0){t.loc=e.BEHIND;return}if(Math.sqrt(m*m+p*p)<Math.sqrt(v*v+b*b)){t.loc=e.BEYOND;return}let _;m!==0?_=v/m:_=b/p,t.loc=e.BETWEEN,t.t=_}function i(f,g){let y=[],m=[];for(let p=1;p<f.length;p++){let v=f[p-1],b=f[p];for(let x=1;x<g.length;x++){let _=g[x-1],A=g[x],M=r(v,b,_,A);M!==null&&y.find(T=>T.t<=M.t+Number.EPSILON&&T.t>=M.t-Number.EPSILON)===void 0&&(y.push(M),m.push(new Ae(M.x,M.y)))}}return m}function o(f,g,y){let m=new Ae;g.getCenter(m);let p=[];return y.forEach(v=>{v.boundingBox.containsPoint(m)&&i(f,v.points).forEach(b=>{p.push({identifier:v.identifier,isCW:v.isCW,point:b})})}),p.sort((v,b)=>v.point.x-b.point.x),p}function a(f,g,y,m,p){(p==null||p==="")&&(p="nonzero");let v=new Ae;f.boundingBox.getCenter(v);let b=[new Ae(y,v.y),new Ae(m,v.y)],x=o(b,f.boundingBox,g);x.sort((E,D)=>E.point.x-D.point.x);let _=[],A=[];x.forEach(E=>{E.identifier===f.identifier?_.push(E):A.push(E)});let M=_[0].point.x,T=[],C=0;for(;C<A.length&&A[C].point.x<M;)T.length>0&&T[T.length-1]===A[C].identifier?T.pop():T.push(A[C].identifier),C++;if(T.push(f.identifier),p==="evenodd"){let E=T.length%2===0,D=T[T.length-2];return{identifier:f.identifier,isHole:E,for:D}}else if(p==="nonzero"){let E=!0,D=null,I=null;for(let k=0;k<T.length;k++){let L=T[k];g[L]&&(E?(I=g[L].isCW,E=!1,D=L):I!==g[L].isCW&&(I=g[L].isCW,E=!0))}return{identifier:f.identifier,isHole:E,for:D}}else console.warn('fill-rule: "'+p+'" is currently not implemented.')}let s=0,l=999999999,u=-999999999,d=[];this.subPaths.forEach(f=>{let g=f.getPoints(),y=-999999999,m=999999999,p=-999999999,v=999999999;for(let b=0;b<g.length;b++){let x=g[b];x.y>y&&(y=x.y),x.y<m&&(m=x.y),x.x>p&&(p=x.x),x.x<v&&(v=x.x)}u<=p&&(u=p+1),l>=v&&(l=v-1),g.length&&d.push({curves:f.curves,points:g,isCW:Wne.isClockWise(g),identifier:s++,boundingBox:new rie(new Ae(v,m),new Ae(p,y))})});let c=d.map(f=>{var g;return a(f,d,l,u,(g=this.userData)==null?void 0:g.style.fillRule)}),h=[];return d.forEach(f=>{let g=c[f.identifier];if(g&&!g.isHole){let y=new RD;y.curves=f.curves,c.filter(m=>(m==null?void 0:m.isHole)&&m.for===f.identifier).forEach(m=>{if(m){let p=d[m.identifier],v=new OD;v.curves=p.curves,y.holes.push(v)}}),h.push(y)}}),h}},Fae,rY=new Promise(e=>{Fae=e}),nY=!1,AP;function xHe(){if(nY)return;if(AP)return AP;async function e(){let t=await AM(()=>import("./opentype-BktxL4Qf.js"),__vite__mapDeps([]));Fae(t),nY=!0}return AP=e(),AP}var wHe=class{async load(e,t,r=()=>{}){let{load:n}=await rY;n(e,(i,o)=>{i||!o?r(i??"Something went wrong"):t(o)})}async parse(e){let{parse:t,Bidi:r}=await rY;try{let n=t(e),i=new r,o=a=>n.charToGlyphIndex(a.char);return i.registerModifier("glyphIndex",null,o),i.applyFeatures(n,n.defaultRenderOptions.features),{font:n,bidi:i}}catch(n){console.error(n)}}};async function _He(e){return await(await fetch(e)).arrayBuffer()}var SHe=new wHe;async function iY(e){let t,r,n=!1;if(e.url?(t=await _He(e.url),r=e.url,n=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){let i=await SHe.parse(t);if(i)return{font:i.font,url:r,intercepted:n,arr:t,bidi:i.bidi}}}function AHe(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var MHe=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=iY(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=iY(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,r){if(!this._bidi)return[];let n=this._bidi;n.getTextGlyphs(t);let i=n.tokenizer.tokens,o=[],a=0,s=r.length===i.length;for(let l=0;l<r.length;l++){let u=r[l].index,d=String.fromCharCode(r[l].unicode),c=i[a];if(AHe(u,c)||s)o.push({char:d,index:u,replacements:[c.state.glyphIndex],replacementChars:[c.char]}),a++;else{let h=c.char,f="",g=[c.state.glyphIndex],y=[],m=!1;for(;!m;)a++,f=t.charAt(a),h+=f,g.push(e.charToGlyphIndex(f)),y=e.stringToGlyphs(h),y.length===1&&y[0].index===u&&(m=!0),a>t.length&&(m=!0);o.push({char:d,index:u,replacements:g,replacementChars:Array.from(h)}),a++}}return o}generateShapes(e,t){if(!this._isLoaded)return;let r=this.font,n=t.fontSize/this.unitsPerEm,i=t.fontSize*t.lineHeight,o=e.map(p=>this.getTextWidth(p,t)),a=t.width,s=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?s:0,u=this.computeSpaceWidthForLine(e,0,t),d=this.getLineInitialOffsetX(o[0],a,t.horizontalAlign,e[0],s),c=this.getLineInitialOffsetY(i,e.length,t.height,n,t.verticalAlign),h=[],f=e.map(p=>[]),g=e.map(p=>[]),y;for(let p=0;p<e.length;p++){let v=e[p],b={features:{liga:!0}},x=[];try{x=r.stringToGlyphs(v,b)}catch(A){console.warn(A)}d=this.getLineInitialOffsetX(o[p],a,t.horizontalAlign,v,s);let _=[];try{_=this.reverseLigaturesTable(r,v,x)}catch(A){console.warn(A)}u=this.computeSpaceWidthForLine(e,p,t);for(let A=0;A<x.length;A++){let M=x[A],T=M.index===0?`
`:M.unicode?String.fromCharCode(M.unicode):void 0,C=_[A],E=0,D=0;A===0&&t.horizontalAlign===2&&M.leftSideBearing!==void 0&&(D=-M.leftSideBearing*n),y&&(E=r.getKerningValue(M,y)*n),d+=D+E;let I=0;if(T===`
`)I=l;else if(T===" ")I=u;else{let k=this.createPath(M,n,d,c,t);k&&(I=k.offsetX-(E+D),h.push(k.path))}if(C.replacements.length===1)g[p].push([d,c]),f[p].push(I);else{let k=C.replacements.map(G=>(r.glyphs.get(G).advanceWidth??0)*n),L=k.reduce((G,z)=>G+=z,0),U=k.map(G=>G/L),W=d;for(let G=0;G<U.length;G++){let z=I*U[G];g[p].push([W,c]),f[p].push(z),W+=z}}d+=I,y=M}c-=i}let m=[];for(let p=0,v=h.length;p<v;p++)m.push(...h[p].toShapes());return{shapes:m,charWidths:f,lineWidths:o,charCoords:g}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,r,n,i){return(r===3||r===2)&&n.indexOf(`
`)>=0&&(e-=i),r===3?t*.5-e*.5:r===2?t-e:0}getLineInitialOffsetY(e,t,r,n,i){let o=t*e,a=Math.abs(this.ascender-this.descender)*n,s=e-a,l=-this.ascender*n-s/2;return i===3?-(r-o-l):i===2?-(r*.5-o*.5-l):l}createPath(e,t,r,n,i){var l;let o=e.getPath(r,-n,i.fontSize,{kerning:!1,letterSpacing:i.letterSpacing});if(!o){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let a=new bHe,s=(e.advanceWidth??1)*t;if(e)for(let u of o.commands){let d=(l=a.currentPath)==null?void 0:l.currentPoint;if(!(d&&u.type!=="Z"&&d.x===u.x&&-d.y===u.y))switch(u.type){case"M":a.moveTo(u.x,-u.y);break;case"L":a.lineTo(u.x,-u.y);break;case"Q":a.quadraticCurveTo(u.x1,-u.y1,u.x,-u.y);break;case"C":a.bezierCurveTo(u.x1,-u.y1,u.x2,-u.y2,u.x,-u.y);break}}return a.subPaths.forEach(u=>{let d=CHe(u.curves);d!==void 0&&u.currentPoint.distanceTo(d)>0&&u.lineTo(d.x,d.y)}),{offsetX:s+i.fontSize*i.letterSpacing,path:a}}getCharWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,r){let n=this.getCharWidth(" ",r),i=e[t];if(i){let o=this.countSpaces(i.trimEnd());if(r.horizontalAlign===4&&t<e.length-1&&o){let a=r.width,s=this.getTextWidth(i,r);return(a-(s-o*n))/o}}return n}countSpaces(e){return(e.match(/ /g)||[]).length}};function CHe(e){if(e.length){let t=e[0];if(t instanceof Uu)return t.v1;if(t instanceof Ou||t instanceof Vp)return t.v0}}var THe=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,r){let n=this.objects.get(e);return n===void 0?(n=this.createObject(e,t,r),this.objects.set(e,n)):n.isShared=!0,n}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let r=this.objects.get(e);if(r&&r.isShared!==!0)return this.objects.delete(e),this.objects.set(t,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let r=this.objects.get(e);t===r&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},oY=class extends THe{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,r){let n=cO(e,t,this.flatShading,r);return n.computeBoundingSphere(),n}},EHe={markNeedsUpdateRendererDirty:()=>{}},PHe=class extends Pje{constructor(e){super(),this.shared=e}create(e){return new Pae(e,this.shared)}},Nj=class{constructor(e,t={}){if(this.data=e,this.geometryCache=new oY(!0),this.geometryCache2=new oY(!1),this.imageHolderCache=new PHe(this),this.thisContext={scene:EHe,shared:this},this.deletedMaterial=new wz(aa.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Fg(nO.emptyImage,this),this.deletedVideo=new Fg(JD.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.variables={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[r,n]of Object.entries(t.images))this.addImage(r,n);if(t.videos)for(let[r,n]of Object.entries(t.videos))this.addVideo(r,n);if(t.audios)for(let[r,n]of Object.entries(t.audios))this.addAudio(r,n);this.reset(e)}setRequestRender(e){this._requestRender=e}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.resetLib(e.lib);for(let{id:r,data:n}of e.variables)this.addVariableHolder(r,n),t&&this.updateVariableHolder(r,n);for(let[r,n]of Object.entries(e.images))this.addImage(r,n);for(let[r,n]of Object.entries(e.videos))this.addVideo(r,n);for(let[r,n]of Object.entries(e.colors))this.addColor(r,n);for(let[r,n]of Object.entries(e.materials))this.addMaterial(r,n);for(let[r,n]of Object.entries(e.audios))this.addAudio(r,n);for(let[r,n]of Object.entries(e.fonts))this.addFont(r,n)}addMaterial(e,t){if(this.materials[e]){let r=this.materials[e];r.reset(t,this.thisContext),r.dispose()}else{let r=new wz(t,this.thisContext,e);this.materials[e]=r}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new Bj(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Fg(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Fg(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new dO(t.r,t.g,t.b,t.a):this.colors[e]=new dO(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let r=this.colors[e];return this.colors[e].r=t.r??r.r,this.colors[e].g=t.g??r.g,this.colors[e].b=t.b??r.b,this.colors[e].a=t.a??r.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new Cs(0,0,0,0))}else return"a"in e?new Cs(e.r,e.g,e.b,e.a):new Cs(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof oS)return t;{let r=new oS({src:t.data});return this.audios[e]=r,r}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof oS&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new MHe(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof oS&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){return this.variables[e]===void 0?(this.variables[e]={value:t.value,locations:[]},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0):(this.variables[e].value=t.value,!1)}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t;let r=t;for(;typeof r=="string";)r=this.variables[r].value;let n=this.entityOpContext.scene;for(let i=this.variables[e].locations.length-1;i>=0;i--){let o=this.variables[e].locations[i];if(o[0]==="material"){let a=o[1],s=r,l={scene:n,shared:this},u=o.slice(2);n.traverseMaterial(c=>{let h=c.root??c;h.uuid===a&&h.onVariableUpdate(u,s,l)});let d=this.materials[a];d&&d.onVariableUpdate(u,s,l)}else{let a=n.find(o[0]);if(a===void 0){this.variables[e].locations.splice(i,1);continue}if(o[1]!=="geometry"){for(let s=1;s<o.length-1;s++)a=a[o[s]];o[1]==="rotation"?a[o[o.length-1]]=r*Ht.DEG2RAD:a[o[o.length-1]]=r}if(a=n.find(o[0]),jr.is(a)){if(o[1]==="position"||o[1]==="rotation"||o[1]==="scale")a.onVariableUpdate();else if(o[1]==="geometry"){let s=a;a.component&&(s=a.component);let l=s.dataPatched;s.chooseGeoemtryCache(this).forceDelete(l.geometry),s.createGeometryDelayed(this.entityOpContext),s.onVariableUpdate(!0),s.instances.forEach(u=>{let d=u.dataPatched;u.chooseGeoemtryCache(this).forceDelete(d.geometry),u.createGeometryDelayed(this.entityOpContext),u.onVariableUpdate(!0)})}}}}return!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var r,n,i;if(Array.isArray(e)){if(e[0]==="mouse")return((r=this.mouseProperty)==null?void 0:r[e[1]])??0;if(e[0]==="raycast")return((n=this.raycastProperty)==null?void 0:n[e[1]])??0;let o=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return o.geometry.userData.parameters[e[1]];for(let a=1;a<e.length;a++)o=o[e[a]];return e[1]==="rotation"&&(o*=Ht.RAD2DEG),o}for(let o in this.variables){if(t===void 0)break;let a=this.variables[o],s=(i=a.locations)==null?void 0:i.findIndex(l=>La.equal(l,t));s!==void 0&&s!==-1&&a.locations.splice(s,1)}if(typeof e=="string"){let o=e,a=e;do{if(a=o,this.variables[o]===void 0)break;o=this.variables[o].value}while(typeof o=="string");return t&&this.variables[a]!==void 0&&this.variables[a].locations.push(t),o}else return e}getVariables(){return this.variables}getDynamicVariablePlayState(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.asset);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.asset);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r.asset);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r.asset);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r.asset);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r.asset);for(let[t,r]of Object.entries(e.variables))this.addVariableHolder(t,r.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,r){this.data=t,e.path[0]==="images"?e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(na.drop(e,2),t.materials[e.path[1]],{shared:this,scene:r}):e.path[0]==="fonts"?e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,r):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===2&&e.type===0&&"value"in e.props?this.updateVariable(e.path[1],e.props.value):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id):e.path[0]==="lib"&&this.updateLibByOp(na.drop(e,1),r)}updateFont(e,t,r){if(t.props.url){let n=this.getFont(e),i={...this.data.fonts[e],url:t.props.url};n.update(i),n.loadingPromise.then(()=>this.requestRender()),r.updateFont(e,this)}}};new Nj(Tu.emptyData());var E1=class extends Es{updateByPatchedOp(e,t,r){if(super.updateByPatchedOp(e,t,r),Tze(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[n,i]of Object.entries(e.props)){let o=r.shared.material(i);this.material[Number(n)]=o}else if(Vl(e.path,["material"])&&this.material instanceof Hp)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(na.drop(e,1),t.material,r);else if(Vl(e.path,["materials","*"])&&Array.isArray(this.material)){let n=e.path[1];if("materials"in t&&n<this.material.length){let i=t.materials[n];typeof i!="string"&&this.material[n].updateByOp(na.drop(e,2),i,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var n,i;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let r=this.dataPatched;if(((n=e.geometry)==null?void 0:n.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe),t.scene.markNeedsUpdateRendererDirty()),((i=e.geometry)==null?void 0:i.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(o=>t.shared.material(o).getFlavor(r.flatShading,r.side,r.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let o=0;o<this.material.length;o++)this.material[o]=this.material[o].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe)}disposeMaterial(){this.material&&zie(this.material).forEach(e=>{e instanceof Hp&&(e instanceof wz||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},aY=new X,sY=new Mr,lY=new Mr,DHe=new X,uY=new ft,Ua=class extends E1{constructor(e,t,r){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=new ft().fromArray(t.bindMatrix),this.bindMatrixInverse=new ft)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Jt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof Nj){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return $D.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return $D.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),Vl(e.path,["geometry"])&&this.updateByPatchedOpGeometry(na.drop(e,1),t.geometry,r)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var n;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let i=e;if(this.localGeometry===void 0){let u={...this.data.geometry,...i};this.localGeometry=cO(u,t,this.data.flatShading,this)}let o,a,s;i.scaleBaked?[o,a,s]=i.scaleBaked:{width:o,height:a,depth:s}=i;let l=this.localGeometry.userData;l.sxPrev!==void 0&&mz(this.localGeometry.attributes,o/l.sxPrev,a/l.syPrev,s/l.szPrev),l.sxPrev=o,l.syPrev=a,l.szPrev=s}else{let i={...this.data.geometry,...e};(n=this.localGeometry)==null||n.dispose(),this.localGeometry=cO(i,t,this.data.flatShading,this)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,r){var i;let n=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof Ra&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(n=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),n||((i=r.scene)==null||i.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,r.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new Mr,r=this.geometry.attributes.skinWeight;for(let n=0,i=r.count;n<i;n++){t.fromBufferAttribute(r,n);let o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),r.setXYZW(n,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let r=this.skeleton;if(r===void 0)return;let n=this.geometry;sY.fromBufferAttribute(n.attributes.skinIndex,e),lY.fromBufferAttribute(n.attributes.skinWeight,e),aY.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){let o=lY.getComponent(i);if(o!==0){let a=sY.getComponent(i);uY.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(DHe.copy(aY).applyMatrix4(uY),o)}}return t.applyMatrix4(this.bindMatrixInverse)}};function OHe(e){var a,s;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,r=e.geometry.attributes,n=r.position.array,i=r.normal.array,o=new Float32Array(n.length);for(let l=0;l<n.length;l+=3){let u=`${n[l]}_${n[l+1]}_${n[l+2]}`,d=new X(i[l],i[l+1],i[l+2]);t.has(u)?(a=t.get(u))==null||a.normals.push(d):t.set(u,{normals:[d],result:new X})}t.forEach((l,u)=>{for(let d of l.normals)l.result.add(d);l.result.divideScalar(l.normals.length)});for(let l=0;l<n.length;l+=3){let u=`${n[l]}_${n[l+1]}_${n[l+2]}`,d=(s=t.get(u))==null?void 0:s.result;d&&(o[l]=d.x,o[l+1]=d.y,o[l+2]=d.z)}e.geometry.setAttribute("extrudeNormal",new Rt(o,3))}function RHe(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),n=new X;for(let i=0;i<t.length;i+=3)n.set(t[i],t[i+1],t[i+2]).normalize(),r[i]=n.x,r[i+1]=n.y,r[i+2]=n.z;e.geometry.setAttribute("extrudeNormal",new Rt(r,3))}function kj(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof Hp)||e.material.getLayersOfType("outline").length===0)return;e instanceof Ua&&e.is2DAndNoDepth?RHe(e):OHe(e)}function Fj(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),n=parseInt(e.uuid.replace(/\D/g,"")),i=[Ht.seededRandom(n),Ht.seededRandom(n+1e4),Ht.seededRandom(n+2e4)];for(let o=0;o<t.length;o++)r[o]=i[o%3];e.geometry.setAttribute("randomColor",new fr(r,3))}Pj.then(e=>{});var _c=new Oi,E_=new X;function IHe(e){let t=!1;return e.scene.objects.traverse((r,n)=>{n.type==="Mesh"&&n.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var UA=class extends Ua{constructor(e,t,r){super(e,t,r),this.data=t,this.hiddenMatrixOld=new ft,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var o,a,s;if(this.skipReactionUpdate===!0)return;let t=(o=this.localGeometry)==null?void 0:o.uuid,{originalGeometry:r,subdividedGeometry:n,subdivPointer:i}=Ra.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=i,r!==void 0&&((a=this.originalGeometry)==null||a.dispose(),this.originalGeometry=r),n!==void 0&&((s=this.subdividedGeometry)==null||s.dispose(),this.subdividedGeometry=n??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,kj(this),Fj(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let r=this.material;this.material=r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){Ra.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Ra.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Ra.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Ra.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,Es.prototype.raycast.call(this,e,t),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Ts,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;_c.setFromBufferAttribute(t),_c.getCenter(r),e.boundingSphere.radius=r.distanceTo(_c.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),_c.getSize(E_),this.hasNonUniformScale&&E_.divide(this.scale);let n={width:E_.x,height:E_.y,depth:E_.z};return this.geometry.userData.parameters=n,n}updateBoundingSphere(e){let t=this.originalGeometry;_c.min.set(e[0],e[2],e[4]),_c.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(_c.min.applyMatrix4(this.shearScaleInv),_c.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Ts);let r=t.boundingSphere.center;_c.getCenter(r),t.boundingSphere.radius=r.distanceTo(_c.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(Ra.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),this.localGeometry&&this.createGeometryByControls(t)}},cY=-1,LHe=1,BHe={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},NHe={polygon_center:0,edge:1,vertex:2},MP=(e,t)=>(r,n)=>!t||r===0||e===0?0:e*n/100,Sr=(e,t)=>{let r=Math.abs(t),n=r*-1;return(e-cY)*(r-n)/(LHe-cY)+n};function kHe(e){let t=[],r={};for(var n=0,i=e.length;n<i;n++){var o=JSON.stringify(e[n].pos.map(a=>Math.round(a*1e4)/1e4));r[o]||(t.push(e[n]),r[o]=!0)}return t}var FHe=new X,CP=new X,zHe=new X,UHe=new X;function nx(e,t){let r=zHe.fromArray(e),n=UHe.fromArray(t);CP.copy(n).sub(r);let i=CP.length();return CP.normalize().multiplyScalar(i*.5),FHe.copy(r).add(CP).toArray()}var zl=new ra,TP=new X,hO=new X,Ag=new X;function VHe(e){let t=[];for(let r=0;r<=e.index.count;r++)if(TP.fromArray(e.index.array,r*3),zl.setFromAttributeAndIndices(e.attributes.position,TP.x,TP.y,TP.z),zl.getNormal(hO),zl.getMidpoint(Ag),!(isNaN(Ag.x)||isNaN(Ag.y)||isNaN(Ag.z))){let{a:n,b:i,c:o}=zl,a=n.toArray(),s=i.toArray(),l=o.toArray(),u=n.distanceTo(i),d=i.distanceTo(o),c=o.distanceTo(n),h=nx(a,s),f=nx(s,l),g=nx(l,a),y=[u,d,c],m=Math.max(...y),p=y.filter(x=>Math.round(x)===Math.round(m)).length>1,v=[],b=zl.getMidpoint(Ag).toArray();m===u&&!p&&(v=[f,g,g],b=h),m===d&&!p&&(v=[h,g,g],b=f),m===c&&!p&&(v=[h,f,f],b=g),p&&(v=[h,f,g]),t.push({vertices:[a,s,l],faceCenters:v,midpoint:b,norm:zl.getNormal(hO).toArray()})}return t}function jHe(e){let t=[],{position:r}=e.attributes;for(let n=0;n<r.count;n++){zl.setFromAttributeAndIndices(r,n*3,n*3+1,n*3+2),zl.getNormal(hO),zl.getMidpoint(Ag);let i=zl.a.toArray(),o=zl.b.toArray(),a=zl.c.toArray();t.push({vertices:[i,o,a],faceCenters:[nx(i,o),nx(o,a),nx(a,i)],midpoint:Ag.toArray(),norm:hO.toArray()})}return t}var HHe=4,GHe=.5,iN=e=>.5*(1-Math.cos(e*Math.PI)),WHe=class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,r=0){if(this.perlin==null){this.perlin=new Array(4096);for(let m=0;m<4096;m++)this.perlin[m]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);let n=Math.floor(e),i=Math.floor(t),o=Math.floor(r),a=e-n,s=t-i,l=r-o,u,d,c=0,h=.5,f,g,y;for(let m=0;m<HHe;m++){let p=n+(i<<4)+(o<<8);u=iN(a),d=iN(s),f=this.perlin[p&4095],f+=u*(this.perlin[p+1&4095]-f),g=this.perlin[p+16&4095],g+=u*(this.perlin[p+16+1&4095]-g),f+=d*(g-f),p+=256,g=this.perlin[p&4095],g+=u*(this.perlin[p+1&4095]-g),y=this.perlin[p+16&4095],y+=u*(this.perlin[p+16+1&4095]-y),g+=d*(y-g),f+=iN(l)*(g-f),c+=f*h,h*=GHe,n<<=1,a*=2,i<<=1,s*=2,o<<=1,l*=2,a>=1&&(n++,a--),s>=1&&(i++,s--),l>=1&&(o++,l--)}return c}noiseSeed(e){let t=(()=>{let r,n;return{setSeed(i){n=r=(i??Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return n=(1664525*n+1013904223)%4294967296,n/4294967296}}})();t.setSeed(e),this.perlin=new Array(4096);for(let r=0;r<4096;r++)this.perlin[r]=t.rand()}},qHe=WHe,dY=new X,hY=new ft,fY=new f1;function pY(e){let t=!1;return e.scene.objects.traverse((r,n)=>{n.type==="Mesh"&&n.geometry.type==="TextGeometry"&&(t=!0)}),t}var zae=class extends Ua{constructor(e,t,r){super(e,t,r),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:r}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(hY.copy(r).invert(),fY.copy(e.ray).applyMatrix4(hY),fY.intersectBox(this.singleBBox,dY))){let n=dY.applyMatrix4(r),i=e.ray.origin.distanceTo(n);t.push({distance:i,point:n.clone(),object:this})}}},Aa=1e-4,Sc,Uae,Vae,jae,mY=new X,gY=new X;Pj.then(e=>{Sc=e,Uae=[Sc.get_face_center,Sc.get_edge_midpoint,Sc.get_vertex_position],Vae=[Sc.get_face_normal,Sc.get_edge_normal,Sc.get_vertex_normal],jae=[Sc.face_count,Sc.edge_count,Sc.vertex_count]});var XHe=new ft,YHe=new ft,Rf=new X,ng=new X,P_=new X,oN=new X,KHe=new X,JHe=new X,Ud=new qHe,Lu=class extends wj(bn){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof ia&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof ia&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){for(let n=0,i=this.children.length;n<i;++n)this.remove(this.children[0]);let r=this.children;if(r.length===t)return;if(r.length<t)for(let n=0,i=t-r.length;n<i;++n){let o=new ia(this.object);o.expand(),this.add(o)}else for(let n=0,i=r.length-t;n<i;++n)this.remove(r[n])}else{if(this.children.length===t)return;if(this.children.length<t)for(let r=0,n=t-this.children.length;r<n;++r){let i=new ia(this.object);i.expand(),this.add(i)}else for(let r=0,n=this.children.length-t;r<n;++r)this.remove(this.children[0])}}_updateRadial(e){let t=e.radial,r=t.start*Ht.DEG2RAD,n=t.end*Ht.DEG2RAD,i=r-n,o=new So(t.rotation[0],t.rotation[1],t.rotation[2]),a;switch(t.axis){case"z":a=new X(0,0,1);break;case"y":a=new X(0,1,0);break;default:case"x":a=new X(1,0,0);break}let s=e.randomnessObject??up.defaultData([1,1,1]).randomnessObject,l=s.noiseType==="perlin";Ud.noiseSeed(s.seed);let u=kB((0,S_.default)(s.seed)),d=MP(s.strength,this.parameters.randomness);for(let[c,h]of this.children.entries()){let f=c*(s.freqScale/10)+s.movement,g=l?Ud.noise(f):u(f,f),y=c+1;h.scale.x=t.scale[0]+d(y,Sr(g,s.scale[0]))||Aa,h.scale.y=t.scale[1]+d(y,Sr(g,s.scale[1]))||Aa,h.scale.z=t.scale[2]+d(y,Sr(g,s.scale[2]))||Aa,h.position.setScalar(0);let m=i/e.count*c-r;switch(t.axis){case"x":h.rotation.set(0,m,0);break;case"y":h.rotation.set(0,0,m);break;case"z":h.rotation.set(m,0,0);break}h.translateOnAxis(a,t.radius),h.position.x+=t.position[0]+d(y,Sr(g,s.position[0])),h.position.y+=t.position[1]+d(y,Sr(g,s.position[1])),h.position.z+=t.position[2]+d(y,Sr(g,s.position[2]));let p=d(y,Sr(g,s.rotation[0])),v=d(y,Sr(g,s.rotation[1])),b=d(y,Sr(g,s.rotation[2]));t.alignment===!0?(h.rotation.x+=o.x+p,h.rotation.y+=o.y+v,h.rotation.z+=o.z+b):h.rotation.set(o.x+p,o.y+v,o.z+b)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new So(t.rotation[0],t.rotation[1],t.rotation[2]),n=e.randomnessObject??up.defaultData([1,1,1]).randomnessObject,i=n.noiseType==="perlin";Ud.noiseSeed(n.seed);let o=kB((0,S_.default)(n.seed)),a=MP(n.strength,this.parameters.randomness);for(let[s,l]of this.children.entries()){let u=s*(n.freqScale/10)+n.movement,d=i?Ud.noise(u):o(u,u),c=s+1,h=a(c,Sr(d,n.rotation[0])),f=a(c,Sr(d,n.rotation[1])),g=a(c,Sr(d,n.rotation[2]));l.scale.x=1+(t.scale[0]-1)*s+a(c,Sr(d,n.scale[0]))||Aa,l.scale.y=1+(t.scale[1]-1)*s+a(c,Sr(d,n.scale[1]))||Aa,l.scale.z=1+(t.scale[2]-1)*s+a(c,Sr(d,n.scale[2]))||Aa,l.rotation.x=r.x*s+h,l.rotation.y=r.y*s+f,l.rotation.z=r.z*s+g,l.position.x=t.position[0]*s+a(c,Sr(d,n.position[0])),l.position.y=t.position[1]*s+a(c,Sr(d,n.position[1])),l.position.z=t.position[2]*s+a(c,Sr(d,n.position[2]))}}_updateGrid(e){let t=0,r=e.grid,n=e.randomnessObject??up.defaultData([1,1,1]).randomnessObject,i=MP(n.strength,this.parameters.randomness),o=n.noiseType==="perlin";Ud.noiseSeed(n.seed);let a=i4e((0,S_.default)(n.seed));if(r.useCenter===!0){let s={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},l=new X(r.size[0]*(r.count[0]-s.x)*.5,r.size[1]*(r.count[1]-s.y)*.5,r.size[2]*(r.count[2]-s.z)*.5);for(let u=0;u<r.count[0];u++)for(let d=0;d<r.count[1];d++)for(let c=0;c<r.count[2];c++){let h=[(u+1)*(n.freqScale/10)+n.movement,(d+1)*(n.freqScale/10)+n.movement,(c+1)*(n.freqScale/10)+n.movement],f=o?Ud.noise(...h):a(...h),g=this.children[t++];g.scale.x=1+i(t,Sr(f,n.scale[0]))||Aa,g.scale.y=1+i(t,Sr(f,n.scale[1]))||Aa,g.scale.z=1+i(t,Sr(f,n.scale[2]))||Aa;let y=i(t,Sr(f,n.rotation[0])),m=i(t,Sr(f,n.rotation[1])),p=i(t,Sr(f,n.rotation[2]));g.rotation.set(y,m,p),g.position.x=r.size[0]*u-l.x+i(t,Sr(f,n.position[0])),g.position.y=r.size[1]*d-l.y+i(t,Sr(f,n.position[1])),g.position.z=r.size[2]*c-l.z+i(t,Sr(f,n.position[2]))}}else for(let s=0;s<r.count[0];s++)for(let l=0;l<r.count[1];l++)for(let u=0;u<r.count[2];u++){let d=[(s+1)*(n.freqScale/10)+n.movement,(l+1)*(n.freqScale/10)+n.movement,(u+1)*(n.freqScale/10)+n.movement],c=o?Ud.noise(...d):a(...d),h=this.children[t++];h.scale.x=1+i(t,Sr(c,n.scale[0]))||Aa,h.scale.y=1+i(t,Sr(c,n.scale[1]))||Aa,h.scale.z=1+i(t,Sr(c,n.scale[2]))||Aa;let f=i(t,Sr(c,n.rotation[0])),g=i(t,Sr(c,n.rotation[1])),y=i(t,Sr(c,n.rotation[2]));h.rotation.set(f,g,y),h.position.x=r.size[0]*s+i(t,Sr(c,n.position[0])),h.position.y=-r.size[1]*l+i(t,Sr(c,n.position[1])),h.position.z=-r.size[2]*u+i(t,Sr(c,n.position[2]))}}_updateToObject(e){var y;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,r=new So(t.rotation[0],t.rotation[1],t.rotation[2]),n=e.randomnessObject??up.defaultData([1,1,1]).randomnessObject,i=n.noiseType==="perlin";Ud.noiseSeed(n.seed);let o=kB((0,S_.default)(n.seed)),a=MP(n.strength,this.parameters.randomness);if(!t.object){for(let[,m]of this.children.entries())m.position.set(0,0,0),m.scale.setScalar(1),m.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof zae)if(!((y=this.objectForSample.font)!=null&&y.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let s=this.getSubdivData(),l=[],u=m=>{let p=m.length,v=m.map(_=>_[0]).reduce((_,A)=>_+A,0),b=m.map(_=>_[1]).reduce((_,A)=>_+A,0),x=m.map(_=>_[2]).reduce((_,A)=>_+A,0);return[v/p,b/p,x/p]},d=m=>Math.round(m*1e6)/1e6;s.forEach(m=>{let p=s.filter(v=>d(m.pos[0])===d(v.pos[0])&&d(m.pos[1])===d(v.pos[1])&&d(m.pos[2])===d(v.pos[2]));p.length>1?l.push({pos:m.pos,norm:u(p.map(v=>v.norm))}):l.push(m)});let c=kHe(l);if(c.length>0){let m=Math.round(c.length*t.count/100);this._updateCount(m)}else{let m=this.objectForSample.geometry.getAttribute("position");if(!m||isNaN(m.count)||m.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let h=new o4e(this.objectForSample).build(),f=BHe[t.axis],g=this.children;h.setRandomGenerator((0,S_.default)(this.object.uuid+t.seed));for(let[m,p]of g.entries()){let v=m*(n.freqScale/10)+n.movement,b=i?Ud.noise(v):o(v,v),x=m+1,_=a(x,Sr(b,n.rotation[0])),A=a(x,Sr(b,n.rotation[1])),M=a(x,Sr(b,n.rotation[2]));t.spreadType==="random"?h.sample(P_,oN):(c.length&&(P_.fromArray(c[m].pos),oN.fromArray(c[m].norm)),this.objectForSample instanceof UA&&P_.applyMatrix4(XHe.copy(this.objectForSample.matrixWorld).invert())),P_.applyMatrix4(this.object.hiddenMatrix.clone().invert()),p.position.copy(P_),Rf.fromArray(f);let T=t.align==="normal"?oN:this.object.getWorldDirection(JHe),C=ng.fromArray(t.position);ng.x+=ng.x+a(x,Sr(b,n.position[0])),ng.y+=ng.y+a(x,Sr(b,n.position[1])),ng.z+=ng.z+a(x,Sr(b,n.position[2]));let E=Math.acos(T.dot(Rf)),D=KHe.crossVectors(Rf,T).normalize(),I=YHe.makeRotationAxis(D,E),k=T.clone().cross(this.object.up).normalize(),L=k.clone().cross(T).normalize(),U=new ft().makeBasis(k,T,L),W=new X(Rf.y,Rf.z,Rf.x).normalize(),G=W.clone().cross(Rf).normalize(),z=new ft().makeBasis(W,Rf,G).invert(),V=new ft().multiplyMatrices(U,z);p.rotation.setFromRotationMatrix(V),C.applyMatrix4(I),p.position.add(C),p.rotation.x=p.rotation.x+r.x+_,p.rotation.y=p.rotation.y+r.y+A,p.rotation.z=p.rotation.z+r.z+M,p.scale.setScalar(1),p.scale.x=p.scale.x+t.scale[0]+a(x,Sr(b,n.scale[0]))||Aa,p.scale.y=p.scale.y+t.scale[1]+a(x,Sr(b,n.scale[1]))||Aa,p.scale.z=p.scale.z+t.scale[2]+a(x,Sr(b,n.scale[2]))||Aa,p.scale.multiply(this.object.scale),p.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof UA){let t=this.objectForSample,r=NHe[e],n=jae[r],i=Uae[r],o=Vae[r],a=[],s=n(t.subdivPointerNew);for(let l=0;l<=s-1;l++){let u=i(t.subdivPointerNew,l),d=o(t.subdivPointerNew,l);mY.fromArray(u).applyMatrix4(t.matrixWorld),gY.fromArray(d),a.push({pos:mY.toArray(),norm:gY.toArray()})}return a}else return(this.objectForSample.geometry.index?VHe(this.objectForSample.geometry):jHe(this.objectForSample.geometry)).map((t,r)=>e==="polygon_center"?{pos:t.midpoint,norm:t.norm}:e==="vertex"?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:e==="edge"?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){var r;if(this.parameters=$R(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(r=this.object.parent)==null||r.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let n=t.find(this.parameters.toObject.object);n instanceof Es?this.objectForSample=n:this.objectForSample=void 0,this.matrix=new ft,this.hiddenMatrix=new ft,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,n&&n.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},BM=e=>{var t;return t=class extends e{},t.geometryHelper=new nd(30,30,30),t},EP=new f1,aN=new Ts,vY=new ft,NM=(e,t,r,n,i=!1)=>{let o=t,a=e.matrixWorld;if(o.boundingSphere===null&&o.computeBoundingSphere(),aN.copy(o.boundingSphere),aN.applyMatrix4(a),r.ray.intersectsSphere(aN)===!1||(vY.copy(a).invert(),EP.copy(r.ray).applyMatrix4(vY),o.boundingBox!==null&&EP.intersectsBox(o.boundingBox)===!1))return;let s,l,u,d,c=o.index,h=o.attributes.position,f=o.drawRange,g,y;if(i===!1){let p=Math.max(0,f.start),v=Math.min(c.count,f.start+f.count);for(g=p,y=v;g<y;g+=3)if(l=c.getX(g),u=c.getX(g+1),d=c.getX(g+2),s=m(e,r,EP,h,l,u,d),s){s.faceIndex=Math.floor(g/3),n.push(s);return}}else{let p=o.attributes.position,v=new X,b=new X,x=new X,_=new X,A=2,M=1/((e.scale.x+e.scale.y+e.scale.z)/3),T=M*M,C=Math.max(0,f.start),E=Math.min(p.count,f.start+f.count);for(let D=C,I=E-1;D<I;D+=A){if(v.fromBufferAttribute(p,D),b.fromBufferAttribute(p,D+1),EP.distanceSqToSegment(v,b,_,x)>T)continue;_.applyMatrix4(e.matrixWorld);let k=r.ray.origin.distanceTo(_);k<r.near||k>r.far||n.push({distance:k,point:x.clone().applyMatrix4(e.matrixWorld),object:e})}}function m(p,v,b,x,_,A,M){let T=new X,C=new X,E=new X,D=new X,I=new X;if(T.fromBufferAttribute(x,_),C.fromBufferAttribute(x,A),E.fromBufferAttribute(x,M),b.intersectTriangle(T,C,E,!1,D)===null)return null;I.copy(D),I.applyMatrix4(p.matrixWorld);let k=v.ray.origin.distanceTo(I);return k<v.near||k>v.far?null:{faceIndex:1,distance:k,point:I.clone(),object:p}}},PP=new X,Ml=new m1,QHe=class extends DM{constructor(e){let t=new Jt,r=new em({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],i=[],o={},a=new tr(15711266),s=new tr(15711266),l=new tr(2857471);u("n1","n2",a),u("n2","n4",a),u("n4","n3",a),u("n3","n1",a),u("f1","f2",a),u("f2","f4",a),u("f4","f3",a),u("f3","f1",a),u("n1","f1",a),u("n2","f2",a),u("n3","f3",a),u("n4","f4",a),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l);function u(c,h,f){d(c,f),d(h,f)}function d(c,h){n.push(0,0,0),i.push(h.r,h.g,h.b),o[c]===void 0&&(o[c]=[]),o[c].push(n.length/3-1)}t.setAttribute("position",new Rt(n,3)),t.setAttribute("color",new Rt(i,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){let e=this.geometry,t=this.pointMap;Ml.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,n=1,i=.8;mu("n1",t,e,Ml,-r,-n,i),mu("n2",t,e,Ml,r,-n,i),mu("n3",t,e,Ml,-r,n,i),mu("n4",t,e,Ml,r,n,i);let o=i;mu("f1",t,e,Ml,-r,-n,o),mu("f2",t,e,Ml,r,-n,o),mu("f3",t,e,Ml,-r,n,o),mu("f4",t,e,Ml,r,n,o);let a=o,s=.5;mu("u1",t,e,Ml,r*.7*s,n*1.1,a),mu("u2",t,e,Ml,-r*.7*s,n*1.1,a),mu("u3",t,e,Ml,0,n*(1.1+.9*s),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function mu(e,t,r,n,i,o,a){PP.set(i,o,a).unproject(n);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,d=s.length;u<d;u++)l.setXYZ(s[u],PP.x,PP.y,PP.z)}}var ZHe=class extends BM(QHe){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){NM(this.object,this.geometry,e,t,!0)}},_z;(e=>e.is=t=>"objectHelper"in t)(_z||(_z={}));var kM=(e,t)=>class extends _j(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(r,n){this.objectHelper.raycast(r,n)}showGizmos(){for(let r in this.gizmos){let n=this.gizmos[r];n instanceof ND&&(n.visible=!0)}}updateEntityBoxSize(r,n){this.objectHelper.visible&&this.geometryHelper instanceof nd?(r.setScalar(0),n.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,n)}hideGizmos(){for(let r in this.gizmos){let n=this.gizmos[r];n instanceof ND&&(n.visible=!1)}}},DP=790,Ny=new X,sN=new X,lN=new xr,uN=new X,D_=new X,cN=new X,sa=class extends kM(m1,ZHe){constructor(e="",t={...LA.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=kx.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new ft,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,n=this.height;this.orthoCamera=new LV(r*-.5,r*.5,n*.5,n*-.5,-5e4,1e4),this.perspCamera=new ea(45,r/n,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,r){typeof e=="number"&&(e=new X(e,t,r)),super.lookAt(e),this.getWorldPosition(Ny),this.targetOffset=Ny.distanceTo(e)}getTarget(e=new X){return this.getWorldDirection(sN),this.getWorldPosition(Ny),sN.multiplyScalar(this.targetOffset),e.copy(Ny).add(sN),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(Ny),Ny.distanceTo(e)}updateUp(){this.getWorldQuaternion(lN),uN.set(0,0,1).applyQuaternion(lN),D_.copy(bn.DEFAULT_UP),this.isUpVectorFlipped&&D_.negate(),D_.applyQuaternion(lN),cN.copy(bn.DEFAULT_UP).projectOnPlane(uN),this.angleOffsetFromUp=cN.angleTo(D_),this.angleOffsetFromUp*=cN.cross(D_).dot(uN)>=0?1:-1}updateTransformState(e,t){let r=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),r}getViewFrontToObject(e){let t=e.getWorldPosition(new X),r=e.getWorldDirection(new X).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new X).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new X;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,r=!1){if(this.aspect=e/t,r){let n=e>t?this.aspect:1,i=e>t?1:this.aspect;this.left=-DP*.5*n,this.right=DP*.5*n,this.top=DP*.5*(1/i),this.bottom=-DP*.5*(1/i)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,n,i,o){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,n,i,o):this.orthoCamera.setViewOffset(e,t,r,n,i,o)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return M5(t,e)}updateCameraSubtype(e,t){let r=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(r,t.zoom),t.near!==void 0&&this.setNear(r,t.near),t.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},ky=new ft,$He=new ft,OP=new ft,yY=new X,bY=new X;function xY(e){let t=!1;return e.scene.objects.traverse((r,n)=>{var i;((i=n.geometry)==null?void 0:i.type)==="BooleanGeometry"&&(t=!0)}),t}var Wx=class extends E1{constructor(e,t,r){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Jt,this.onAfterRender=(n,i,o,a,s,l)=>{super.onAfterRender(n,i,o,a,s,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var n;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let i=0;i<this.children.length;i++){let o=this.children[i];o instanceof Wx&&o.dataPatched.visible===!0&&o.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let i=0;i<this.children.length;i++){let o=this.children[i];if(o instanceof Es&&o.dataPatched.visible===!0&&((n=o.geometry.attributes.position)==null?void 0:n.count)>0&&o.geometry.drawRange.count>0&&o.booleanMeshSetAddress!==0){ky.multiplyMatrices(o.hiddenMatrix,o.matrix);try{if(o.booleanMeshSetAddress===-1){if((o.geometry.index??o.geometry.getAttribute("position")).count/3<15e5&&(o.booleanMeshSetAddress=Qd.getMeshSet(o.geometry,e===!0,t)),o.booleanMeshSetAddress===-1)return;Qd.transformMeshSet(o.booleanMeshSetAddress,ky),o.booleanMatrixInvOld.copy(ky).invert(),o.booleanWasTransformed=!1}else o instanceof Wx&&o.needsTransformForDownstream===!0?(Qd.transformMeshSet(o.booleanMeshSetAddress,ky),o.needsTransformForDownstream=!1):o.booleanWasTransformed===!0&&(Qd.transformMeshSet(o.booleanMeshSetAddress,$He.multiplyMatrices(ky,o.booleanMatrixInvOld)),o.booleanMatrixInvOld.copy(ky).invert(),o.booleanWasTransformed=!1)}catch(a){console.error(a),o.booleanMeshSetAddress=0,o.geometry.userData.booleanOperationDidFail=!0;continue}Qd.hasOpenEdges(o.booleanMeshSetAddress)===!1||i===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(o.booleanMeshSetAddress),o.geometry.userData.booleanOperationDidFail=!1):o.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Rt([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Qd.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new Jt,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=Qd.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(i){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(i)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,kj(this),Fj(this)}dispose(){super.dispose(),this.geometry.dispose()}get recursiveBBox(){var t;let e=super.recursiveBBox;return((t=this.geometry.boundingSphere)==null?void 0:t.radius)===-1&&(e.getCenter(this.geometry.boundingSphere.center),OP.copy(this.matrixWorld).invert(),this.geometry.boundingSphere.center.applyMatrix4(OP),yY.copy(e.max).applyMatrix4(OP),bY.copy(e.min).applyMatrix4(OP),this.geometry.boundingSphere.radius=yY.distanceTo(bY)/2),e}},Sz;(e=>{function t(r){return jr.is(r)&&r instanceof RM}e.is=t})(Sz||(Sz={}));var zj=(e,t)=>class extends kM(e,t){updateState_Light(r,n){this.updateState_Entity(r,n),r.color!==void 0&&(this.color=n.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},Eu=e=>e instanceof Es,Uc=e=>e!==null&&e instanceof Wx,eGe=e=>e instanceof sa,tGe=e=>Sz.is(e),Az=e=>_z.is(e),lI=class extends BM(IRe){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){NM(this.object,lI.geometryHelper,e,t)}update(){}},ix=class extends kM(Sb,lI){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&Object.keys(e).length===1&&t.scene.reloadSplats()}},Hae={RED:0,GREEN:1,BLUE:2,ALPHA:3},FM="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",rGe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,RP=class extends An{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new ht(null),kernel16:new ht(null),inputBuffer:new ht(null),cocBuffer:new ht(null),texelSize:new ht(new Ae),scale:new ht(1)},blending:Gi,depthWrite:!1,depthTest:!1,fragmentShader:rGe,vertexShader:FM}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),n=0,i=0;for(let s=0;s<80;++s){let l=s*e,u=Math.sqrt(s)/Math.sqrt(80),d=u*Math.cos(l),c=u*Math.sin(l);s%5===0?(r[i++]=d,r[i++]=c):(t[n++]=d,t[n++]=c)}let o=[],a=[];for(let s=0;s<128;)o.push(new Mr(t[s++],t[s++],t[s++],t[s++]));for(let s=0;s<32;)a.push(new Mr(r[s++],r[s++],r[s++],r[s++]));this.uniforms.kernel64.value=o,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function wY(e,t,r){return e*(t-r)-t}function Mz(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var nGe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,iGe=class extends An{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ht(null),focusDistance:new ht(0),focusRange:new ht(0),cameraNear:new ht(.3),cameraFar:new ht(1e3)},blending:Gi,depthWrite:!1,depthTest:!1,fragmentShader:nGe,vertexShader:FM}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Uh){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-wY(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=Mz(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-wY(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=Mz(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ea?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},oGe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,aGe="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",_Y=class extends An{constructor(e=new Ae){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ht(null),texelSize:new ht(new Ae),halfTexelSize:new ht(new Ae),kernel:new ht(0),scale:new ht(1)},blending:Gi,depthWrite:!1,depthTest:!1,fragmentShader:oGe,vertexShader:aGe}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},sGe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,lGe=class extends An{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ht(null),opacity:new ht(1)},blending:Gi,depthWrite:!1,depthTest:!1,fragmentShader:sGe,vertexShader:FM}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},uGe=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,cGe=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,uI={DEPTH:0,LUMA:1,COLOR:2},dGe={DISABLED:0,DEPTH:1,CUSTOM:2},hGe=class extends An{constructor(e=new Ae,t=uI.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:h1.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new ht(null),depthBuffer:new ht(null),predicationBuffer:new ht(null),texelSize:new ht(e)},blending:Gi,depthWrite:!1,depthTest:!1,fragmentShader:uGe,vertexShader:cGe}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Uh){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},fGe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,pGe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",gu={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Cz=class extends An{constructor(e,t,r,n,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:h1.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ht(null),depthBuffer:new ht(null),resolution:new ht(new Ae),texelSize:new ht(new Ae),cameraNear:new ht(.3),cameraFar:new ht(1e3),aspect:new ht(1),time:new ht(0)},blending:Gi,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(n)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Uh){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=fGe.replace(gu.FRAGMENT_HEAD,e.get(gu.FRAGMENT_HEAD)).replace(gu.FRAGMENT_MAIN_UV,e.get(gu.FRAGMENT_MAIN_UV)).replace(gu.FRAGMENT_MAIN_IMAGE,e.get(gu.FRAGMENT_MAIN_IMAGE)),this.vertexShader=pGe.replace(gu.VERTEX_HEAD,e.get(gu.VERTEX_HEAD)).replace(gu.VERTEX_MAIN_SUPPORT,e.get(gu.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ea?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return gu}},mGe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,gGe=class extends An{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:h1.replace(/\D+/g,"")},uniforms:{inputBuffer:new ht(null),threshold:new ht(0),smoothing:new ht(1),range:new ht(null)},blending:Gi,depthWrite:!1,depthTest:!1,fragmentShader:mGe,vertexShader:FM}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},vGe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,Gae={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},yGe=class extends An{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new ht(e),inputBuffer:new ht(null),strength:new ht(1)},blending:Gi,depthWrite:!1,depthTest:!1,fragmentShader:vGe,vertexShader:FM}),this.toneMapped=!1,this.setColorChannel(Hae.RED),this.setMaskFunction(Gae.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==ua&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},bGe=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,xGe="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",wGe=class extends An{constructor(e=new Ae,t=new Ae){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new ht(null),searchTexture:new ht(null),areaTexture:new ht(null),resolution:new ht(t),texelSize:new ht(e)},blending:Gi,depthWrite:!1,depthTest:!1,fragmentShader:bGe,vertexShader:xGe}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},_Ge=new m1,If=null;function SGe(){if(If===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);If=new Jt,If.setAttribute!==void 0?(If.setAttribute("position",new fr(e,3)),If.setAttribute("uv",new fr(t,2))):(If.addAttribute("position",new fr(e,3)),If.addAttribute("uv",new fr(t,2)))}return If}var Ya=class{constructor(e="Pass",t=new Cp,r=_Ge){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Fa(SGe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Cp),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Uh){}render(e,t,r,n,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Cp||t===this.renderer)continue;this[e].dispose()}}}},Tz=class extends Ya{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new lGe,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new vn(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,n,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==ua?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Ar&&(this.renderTarget.texture.encoding=Ar))}},AGe=class extends Ya{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,n,i){let o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},dN=new tr,Uj=class extends Ya{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,n,i){let o=this.overrideClearColor,a=this.overrideClearAlpha,s=e.getClearAlpha(),l=o!==null,u=a>=0;l?(dN.copy(e.getClearColor(dN)),e.setClearColor(o,u?a:s)):u&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(dN,s):u&&e.setClearAlpha(s)}},Lf=-1,xs=class extends Vo{constructor(e,t=Lf,r=Lf,n=1){super(),this.resizable=e,this.base=new Ae(1,1),this.preferred=new Ae(t,r),this.target=this.preferred,this.s=n}get width(){let{base:e,preferred:t,scale:r}=this,n;return t.width!==Lf?n=t.width:t.height!==Lf?n=Math.round(t.height*(e.width/Math.max(e.height,1))):n=Math.round(e.width*r),n}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:r}=this,n;return t.height!==Lf?n=t.height:t.width!==Lf?n=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n=Math.round(e.height*r),n}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Lf),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Lf}},hN=!1,SY=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case ys:r=this.materialsFlatShadedDoubleSide;break;case Ao:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case ys:r=this.materialsDoubleSide;break;case Ao:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Wu;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=Ao,n}),this.materialsDoubleSide=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=ys,n}),this.materialsFlatShaded=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=Ao,n}),this.materialsFlatShadedDoubleSide=t.map(r=>{let n=r.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=ys,n})}}render(e,t,r){let n=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,hN){let i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let o of i)o[0].material=o[1];this.meshCount!==i.size&&i.clear()}else{let i=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=i}e.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return hN}static set workaroundEnabled(e){hN=e}},MGe=class extends Ya{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new Uj,this.overrideMaterialManager=r===null?null:new SY(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new SY(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,n,i){let o=this.scene,a=this.camera,s=this.selection,l=a.layers.mask,u=o.background,d=e.shadowMap.autoUpdate,c=this.renderToScreen?null:t;s!==null&&a.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(c),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,o,a):e.render(o,a),a.layers.mask=l,o.background=u,e.shadowMap.autoUpdate=d}},AY=class extends Ya{constructor(e,t,{resolutionScale:r=1,width:n=xs.AUTO_SIZE,height:i=xs.AUTO_SIZE,renderTarget:o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new MGe(e,t,new Rne({depthPacking:yne}));let a=this.renderPass;a.skipShadowMapUpdate=!0,a.ignoreBackground=!0;let s=a.getClearPass();s.overrideClearColor=new tr(16777215),s.overrideClearAlpha=1,this.renderTarget=o,this.renderTarget===void 0&&(this.renderTarget=new vn(1,1,{minFilter:Cn,magFilter:Cn,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new xs(this,n,i,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,i){let o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,o)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}},Xr={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},CGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",TGe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",EGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",PGe="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",DGe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",OGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",RGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",IGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",LGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",BGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",NGe="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",kGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",FGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",zGe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",UGe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",VGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",jGe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",HGe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",GGe=new Map([[Xr.SKIP,null],[Xr.ADD,CGe],[Xr.ALPHA,TGe],[Xr.AVERAGE,EGe],[Xr.COLOR_BURN,PGe],[Xr.COLOR_DODGE,DGe],[Xr.DARKEN,OGe],[Xr.DIFFERENCE,RGe],[Xr.EXCLUSION,IGe],[Xr.LIGHTEN,LGe],[Xr.MULTIPLY,BGe],[Xr.DIVIDE,NGe],[Xr.NEGATION,kGe],[Xr.NORMAL,FGe],[Xr.OVERLAY,zGe],[Xr.REFLECT,UGe],[Xr.SCREEN,VGe],[Xr.SOFT_LIGHT,jGe],[Xr.SUBTRACT,HGe]]),WGe=class extends Vo{constructor(e,t=1){super(),this.f=e,this.opacity=new ht(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return GGe.get(this.blendFunction)}},Kc={NONE:0,DEPTH:1,CONVOLUTION:2},fd=class extends Vo{constructor(e,t,{attributes:r=Kc.NONE,blendFunction:n=Xr.SCREEN,defines:i=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:s=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=s,this.defines=i,this.uniforms=o,this.extensions=a,this.blendMode=new WGe(n),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Uh){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Cp||t===this.renderer)continue;this[e].dispose()}}}};function MY(e,t,r){for(let n of t){let i="$1"+e+n.charAt(0).toUpperCase()+n.slice(1),o=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(let a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(o,i))}}function qGe(e,t,r,n,i,o,a){let s=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=s.get("fragment")!==void 0&&/mainImage/.test(s.get("fragment")),u=s.get("fragment")!==void 0&&/mainUv/.test(s.get("fragment")),d=[],c=[],h=!1,f=!1;if(s.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(u&&a&Kc.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!u)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let g=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,y=Cz.Section;if(u){let p=`	${e}MainUv(UV);
`;r.set(y.FRAGMENT_MAIN_UV,r.get(y.FRAGMENT_MAIN_UV)+p),h=!0}if(s.get("vertex")!==null&&/mainSupport/.test(s.get("vertex"))){let p=`	${e}MainSupport(`;p+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s.get("vertex"))?`vUv);
`:`);
`,r.set(y.VERTEX_MAIN_SUPPORT,r.get(y.VERTEX_MAIN_SUPPORT)+p),d=d.concat([...s.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(v=>v[1])),c=c.concat(d).concat([...s.get("vertex").matchAll(g)].map(v=>v[1]))}c=c.concat([...s.get("fragment").matchAll(g)].map(p=>p[1])),c=c.concat([...t.defines.keys()].map(p=>p.replace(/\([\w\s,]*\)/g,""))),c=c.concat([...t.uniforms.keys()]),t.uniforms.forEach((p,v)=>o.set(e+v.charAt(0).toUpperCase()+v.slice(1),p)),t.defines.forEach((p,v)=>i.set(e+v.charAt(0).toUpperCase()+v.slice(1),p)),MY(e,c,i),MY(e,c,s);let m=t.blendMode;if(n.set(m.blendFunction,m),l){let p=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,v=`${e}MainImage(color0, UV, `;a&Kc.DEPTH&&p.test(s.get("fragment"))&&(v+="depth, ",f=!0),v+=`color1);
	`;let b=e+"BlendOpacity";o.set(b,m.opacity),v+=`color0 = blend${m.blendFunction}(color0, color1, ${b});

	`,r.set(y.FRAGMENT_MAIN_IMAGE,r.get(y.FRAGMENT_MAIN_IMAGE)+v),v=`uniform float ${b};

`,r.set(y.FRAGMENT_HEAD,r.get(y.FRAGMENT_HEAD)+v)}r.set(y.FRAGMENT_HEAD,r.get(y.FRAGMENT_HEAD)+s.get("fragment")+`
`),s.get("vertex")!==null&&r.set(y.VERTEX_HEAD,r.get(y.VERTEX_HEAD)+s.get("vertex")+`
`)}return{varyings:d,transformedUv:h,readDepth:f}}var fO=class extends Ya{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Cz(null,null,null,e),this.effects=t.sort((r,n)=>n.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=Cz.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,n=new Map,i=new Map,o=new Set,a=0,s=0,l=0,u=!1,d=!1;for(let h of this.effects)if(h.blendMode.blendFunction===Xr.SKIP)l|=h.getAttributes()&Kc.DEPTH;else if(l&h.getAttributes()&Kc.CONVOLUTION)console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let f="e"+a++,g=qGe(f,h,t,r,n,i,l);if(s+=g.varyings.length,u=u||g.transformedUv,d=d||g.readDepth,h.extensions!==null)for(let y of h.extensions)o.add(y)}let c=/\bblend\b/g;for(let h of r.values()){let f=h.getShaderCode().replace(c,`blend${h.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}if(l&Kc.DEPTH){if(d){let h=`float depth = readDepth(UV);

	`;t.set(e.FRAGMENT_MAIN_IMAGE,h+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(u){let h=`vec2 transformedUv = vUv;
`;t.set(e.FRAGMENT_MAIN_UV,h+t.get(e.FRAGMENT_MAIN_UV)),n.set("UV","transformedUv")}else n.set("UV","vUv");t.forEach((h,f,g)=>g.set(f,h.trim().replace(/^#/,`
#`))),this.uniformCount=i.size,this.varyingCount=s,this.skipRendering=a===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(o).setUniforms(i).setDefines(n)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Uh){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,n,i){for(let o of this.effects)o.update(e,t,n);if(!this.skipRendering||this.renderToScreen){let o=this.fullscreenMaterial;o.inputBuffer=t.texture,o.time+=n,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let n of this.effects)n.initialize(e,t,r),n.addEventListener("change",i=>this.handleEvent(i));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==ua&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},XGe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Wae=class extends Ya{constructor({resolutionScale:e=.5,width:t=xs.AUTO_SIZE,height:r=xs.AUTO_SIZE,kernelSize:n=Vj.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new vn(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let i=this.resolution=new xs(this,t,r,e);i.addEventListener("change",o=>this.setSize(i.baseWidth,i.baseHeight)),this.blurMaterial=new _Y,this.ditheredBlurMaterial=new _Y,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=n}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,i){let o=this.scene,a=this.camera,s=this.renderTargetA,l=this.renderTargetB,u=XGe[this.kernelSize],d=this.blurMaterial,c=t,h,f;for(this.fullscreenMaterial=d,h=0,f=u.length-1;h<f;++h){let g=h&1?l:s;d.kernel=u[h],d.inputBuffer=c.texture,e.setRenderTarget(g),e.render(o,a),c=g}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=u[h],d.inputBuffer=c.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(o,a)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let n=r.width,i=r.height;this.renderTargetA.setSize(n,i),this.renderTargetB.setSize(n,i),this.blurMaterial.setSize(n,i),this.ditheredBlurMaterial.setSize(n,i)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==ua?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Ar&&(this.renderTargetA.texture.encoding=Ar,this.renderTargetB.texture.encoding=Ar))}static get AUTO_SIZE(){return xs.AUTO_SIZE}},YGe=class extends Ya{constructor({width:e=xs.AUTO_SIZE,height:t=xs.AUTO_SIZE,renderTarget:r,luminanceRange:n,colorOutput:i}={}){super("LuminancePass"),this.fullscreenMaterial=new gGe(i,n),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new vn(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let o=this.resolution=new xs(this,e,t);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,n,i){let o=this.fullscreenMaterial;o.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==ua&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},KGe=class extends Ya{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new Uj(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,n,i){let o=e.getContext(),a=e.state.buffers,s=this.scene,l=this.camera,u=this.clearPass,d=this.inverted?0:1,c=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,d,4294967295),a.stencil.setClear(c),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(r),e.render(s,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},Bc=class extends Ya{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,r,n,i){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==ua&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},fN=1/1e3,JGe=1e3,QGe=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*fN}getFixedDelta(){return this.fixedDelta*fN}setFixedDelta(e){return this.fixedDelta=e*JGe,this}getElapsed(){return this.elapsed*fN}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Vj={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},ZGe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,$Ge=class extends fd{constructor({blendFunction:e=Xr.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:n=.5,intensity:i=1,width:o=xs.AUTO_SIZE,height:a=xs.AUTO_SIZE,kernelSize:s=Vj.LARGE}={}){super("BloomEffect",ZGe,{blendFunction:e,uniforms:new Map([["map",new ht(null)],["intensity",new ht(i)]])}),this.renderTarget=new vn(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new YGe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new Wae({resolutionScale:n,width:o,height:a,kernelSize:s});let l=this.blurPass.getResolution();l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let n=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,n),this.blurPass.render(e,n,n)):this.blurPass.render(e,t,n)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e.outputEncoding===Ar&&(this.renderTarget.texture.encoding=Ar))}},e6e="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",t6e=class extends fd{constructor({blendFunction:e=Xr.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",e6e,{blendFunction:e,uniforms:new Map([["brightness",new ht(t)],["contrast",new ht(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},r6e="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",n6e=class extends fd{constructor(e=Xr.NORMAL){super("ColorAverageEffect",r6e,{blendFunction:e})}},i6e="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",o6e="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",a6e=class extends fd{constructor({blendFunction:e=Xr.NORMAL,offset:t=new Ae(.001,5e-4)}={}){super("ChromaticAberrationEffect",i6e,{vertexShader:o6e,blendFunction:e,attributes:Kc.CONVOLUTION,uniforms:new Map([["offset",new ht(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},s6e=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,l6e=class extends fd{constructor(e,{blendFunction:t=Xr.NORMAL,worldFocusDistance:r,worldFocusRange:n,focusDistance:i=0,focalLength:o=.1,focusRange:a=o,bokehScale:s=1,width:l=xs.AUTO_SIZE,height:u=xs.AUTO_SIZE}={}){super("DepthOfFieldEffect",s6e,{blendFunction:t,attributes:Kc.DEPTH,uniforms:new Map([["nearColorBuffer",new ht(null)],["farColorBuffer",new ht(null)],["nearCoCBuffer",new ht(null)],["scale",new ht(1)]])}),this.camera=e,this.renderTarget=new vn(1,1,{minFilter:Or,magFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Bc(new iGe(e));let d=this.cocMaterial;d.focusDistance=i,d.focusRange=a,r!==void 0&&(d.worldFocusDistance=r),n!==void 0&&(d.worldFocusRange=n),this.blurPass=new Wae({kernelSize:Vj.MEDIUM,width:l,height:u});let c=this.blurPass.getResolution();c.addEventListener("change",f=>this.setSize(c.getBaseWidth(),c.getBaseHeight())),this.maskPass=new Bc(new yGe(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=Gae.MULTIPLY,h.colorChannel=Hae.GREEN,this.bokehNearBasePass=new Bc(new RP(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Bc(new RP(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Bc(new RP(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Bc(new RP(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=s}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,r=t.position.distanceTo(e);return Mz(-r,t.near,t.far)}setDepthTexture(e,t=Uh){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let n=this.renderTarget,i=this.renderTargetCoC,o=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){let s=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=s}this.cocPass.render(e,null,i),this.blurPass.render(e,i,o),this.maskPass.render(e,t,a),this.bokehFarBasePass.render(e,a,n),this.bokehFarFillPass.render(e,n,this.renderTargetFar),this.bokehNearBasePass.render(e,t,n),this.bokehNearFillPass.render(e,n,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let n=r.width,i=r.height,o=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];o.push(this.renderTargetCoC,this.renderTargetMasked),o.forEach(a=>a.setSize(e,t)),o=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],o.forEach(a=>a.setSize(n,i)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.fullscreenMaterial.setSize(n,i))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(n=>n.initialize(e,t,r)),this.blurPass.initialize(e,t,ua),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===Ar&&(this.renderTarget.texture.encoding=Ar,this.renderTargetNear.texture.encoding=Ar,this.renderTargetFar.texture.encoding=Ar,this.renderTargetMasked.texture.encoding=Ar))}};new X;new ft;var u6e="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",c6e=class extends fd{constructor({blendFunction:e=Xr.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",u6e,{blendFunction:e,uniforms:new Map([["hue",new ht(new X)],["saturation",new ht(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new tr;var d6e=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,h6e=class extends fd{constructor({blendFunction:e=Xr.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",d6e,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},f6e="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",p6e=class extends fd{constructor(e=30){super("PixelationEffect",f6e,{uniforms:new Map([["active",new ht(!1)],["d",new ht(new Ae)]])}),this.resolution=new Ae,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new X;new X;var CY="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",TY="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",m6e="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",g6e="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Mg={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},qae=class extends fd{constructor({preset:e=Mg.MEDIUM,edgeDetectionMode:t=uI.COLOR,predicationMode:r=dGe.DISABLED}={}){super("SMAAEffect",m6e,{vertexShader:g6e,blendFunction:Xr.NORMAL,attributes:Kc.CONVOLUTION|Kc.DEPTH,uniforms:new Map([["weightMap",new ht(null)]])});let n,i;arguments.length>1&&(n=arguments[0],i=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new vn(1,1,{minFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new Uj(!0,!1,!1),this.clearPass.overrideClearColor=new tr(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Bc(new hGe),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new Bc(new wGe);let o=new Zne;o.onLoad=()=>{let a=new io(n);a.name="SMAA.Search",a.magFilter=Cn,a.minFilter=Cn,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!0,this.weightsMaterial.searchTexture=a;let s=new io(i);s.name="SMAA.Area",s.magFilter=Or,s.minFilter=Or,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!1,this.weightsMaterial.areaTexture=s,this.dispatchEvent({type:"load"})},o.itemStart("search"),o.itemStart("area"),n!==void 0&&i!==void 0?(o.itemEnd("search"),o.itemEnd("area")):typeof Image<"u"&&(n=new Image,i=new Image,n.addEventListener("load",()=>o.itemEnd("search")),i.addEventListener("load",()=>o.itemEnd("area")),n.src=CY,i.src=TY),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case Mg.LOW:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Mg.MEDIUM:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Mg.HIGH:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case Mg.ULTRA:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(e,t=Uh){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return CY}static get areaImageDataURL(){return TY}},v6e=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,IP={DEFAULT:0,ESKIL:1},y6e=class extends fd{constructor({blendFunction:e=Xr.NORMAL,technique:t=IP.DEFAULT,eskil:r=!1,offset:n=.5,darkness:i=.5}={}){super("VignetteEffect",v6e,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new ht(n)],["darkness",new ht(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===IP.ESKIL}set eskil(e){this.technique=e?IP.ESKIL:IP.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},Vh=class{constructor(t,r){this.enabled=!1,this.effect=new t(r),Object.defineProperty(this,"opacity",{enumerable:!0,set(n){this.effect.blendMode.opacity.value=n},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(n){this.effect.blendMode.setBlendFunction(Number(n))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Xr.NORMAL}},b6e=class extends Vh{constructor(){super($Ge),this.blendFunction=Xr.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},x6e=class extends Vh{constructor(){super(t6e)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},w6e=class extends Vh{constructor(){super(a6e),this.effect.offset=new Ae(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},_6e=class extends Vh{constructor(){super(n6e)}},S6e=class extends Vh{constructor(){super(c6e),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},A6e=class extends Vh{constructor(){super(h6e),this.blendFunction=Xr.OVERLAY}},M6e=class extends Vh{constructor(){super(y6e)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},C6e=class extends Vh{constructor(e){super(l6e,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},T6e=class extends Vh{constructor(){super(p6e)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},E6e=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,P6e=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,D6e=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,O6e=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,Ez=class extends An{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new ht(null)},blending:Gi,depthWrite:!1,depthTest:!1,vertexShader:D6e,fragmentShader:O6e})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},R6e=class extends Ya{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new Ez,this.resolutionVector=new Ae,this.resolveMaterial=new An({name:"TAAResolveMaterial",uniforms:{inputBuffer:new ht(null),historyBuffer:new ht(null),velocityBuffer:new ht(null),depthBuffer:new ht(null),resolution:new ht(new Ae)},blending:Gi,depthWrite:!1,depthTest:!1,vertexShader:E6e,fragmentShader:P6e}),this.historyRenderTarget=new vn(1024,1024,{minFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new vn(1024,1024,{minFilter:Or,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let r=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(r),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},I6e=class extends Ya{constructor(e,t,r){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new AY(e,t,{renderTarget:r.transmissionDepthTarget}),this.passThroughMaterial=new Ez,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new Ez,this.depthPass=new AY(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,r){let n=this.camera.layers.mask,i=e;i.setRenderTarget(i.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],i.clear(),i.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,r),i.shadowMap.needsUpdate=!1,i.shadowMap.autoUpdate=!1;let o=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(o),e.render(this.splineScene,this.camera),this.camera.layers.mask=n}},EY=new Cp,L6e=new An({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),Pz=class extends Ya{constructor(e,t,r){super("OpaquePass",t??EY,r),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}set splatViewer(e){this._splatViewer=e}get splatViewer(){return this._splatViewer}setCamera(e){this.camera=e}setScene(e){this.scene=e??EY}getScene(){return this.scene}render(e,t){var n;this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Es&&(this.originalMaterials.set(i.id,i.material),i.material=L6e)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let r=this.renderToScreen?null:t;if(e.setRenderTarget(r),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),((n=this._splatViewer)==null?void 0:n.splatRenderingInitialized)===!0){let i=e.autoClear;e.autoClear=!1,e.render(this.scene,this.camera),this._splatViewer.update(),e.render(this._splatViewer.splatMesh,this.camera),e.autoClear=i}else e.render(this.scene,this.camera);this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((i,o)=>{let a=this.scene.getObjectById(o);a&&(a.material=i)})}},B6e=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:n=0,frameBufferType:i=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new Tz,this.depthTexture=null,this.timer=new QGe,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,r,i,n,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,r,i,n,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,r,i,n,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let r=e.getSize(new Ae),n=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,i=this.inputBuffer.texture[0].type;i===ua&&e.outputEncoding===Ar&&(this.inputBuffer.texture[0].encoding=Ar,this.outputBuffer.texture[0].encoding=Ar,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(r.width,r.height,!1);for(let o of this.passes)o.initialize(e,n,i)}}replaceRenderer(e,t=!0){let r=this.renderer,n=r.domElement.parentNode;return this.setRenderer(e),t&&n!==null&&(n.removeChild(r.domElement),n.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new Rx(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=v0,e.type=Qg):e.type=hh,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,n,i,o){let a=this.renderer,s=a===null?new Ae:a.getDrawingBufferSize(new Ae),l={minFilter:Or,magFilter:Or,wrapS:Ei,wrapT:Ei,stencilBuffer:t,depthBuffer:e},u;return n>0?(u=new vn(s.width,s.height,l),u.samples=n):(i?(u=new PTe(s.width,s.height,2,l),u.texture[1].type=g0):u=new vn(s.width,s.height,l),u.depthTexture=new Rx(2048,2048),u.depthTexture.type=ka),r===ua&&a!==null&&a.outputEncoding===Ar&&(Array.isArray(u.texture)?u.texture.forEach(d=>d.encoding=Ar):u.texture.encoding=Ar),Array.isArray(u.texture)?u.texture.forEach((d,c)=>{d.name=`EffectComposer.Buffer ${i} ${c}`,d.generateMipmaps=!1}):(u.texture.name=`EffectComposer.Buffer ${i}`,u.texture.generateMipmaps=!1),u.name=o,u}addPass(e,t){var s;let r=this.passes,n=this.renderer,i=n.getDrawingBufferSize(new Ae),o=((s=n.getContext().getContextAttributes())==null?void 0:s.alpha)??!1,a;if(e.MRTCompatible&&(a=this.inputBuffer.texture[0].type),e.MRTCompatible||(a=this.inputBuffer.texture.type),e.setRenderer(n),e.setSize(i.width,i.height),e.initialize(n,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let n=(i,o)=>i||o.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,n=this.inputBuffer,i=this.outputBuffer,o=this.inputBufferSingle,a=this.outputBufferSingle,s=!1,l,u,d,c;e===void 0&&(e=this.timer.update().getDelta());for(let h of this.passes)h.enabled&&(h.MRTCompatible?h.render(t,n,i,e,s):h.render(t,o,a,e,s),h.needsSwap&&(s&&(r.renderToScreen=h.renderToScreen,l=t.getContext(),u=t.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),r.render(t,n,i,e,s),u.setFunc(l.EQUAL,1,4294967295)),d=n,c=o,n=i,o=a,i=d,a=c),h instanceof KGe?s=!0:h instanceof AGe&&(s=!1))}setSize(e,t,r){let n=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let o=n.getSize(new Ae);e=o.width,t=o.height}n.setSize(e,t,r);let i=n.getDrawingBufferSize(new Ae);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height),this.inputBufferSingle.setSize(i.width,i.height),this.outputBufferSingle.setSize(i.width,i.height);for(let o of this.passes)o.setSize(i.width,i.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},N6e=new An({name:"CombineMaterial",uniforms:{inputBufferA:new ht(null),inputBufferB:new ht(null)},blending:Gi,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),k6e=class extends Ya{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=N6e,this.helperPass=new Pz(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new Pz(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new qae({preset:Mg.LOW,edgeDetectionMode:uI.COLOR});this.effectPass=new fO(this.camera,t),this.rt=new vn(10,10,{minFilter:Or,magFilter:Or,wrapS:Ei,wrapT:Ei,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,r){this.rt.depthTexture=t.depthTexture;let n=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,r),this.fullscreenMaterial.uniforms.inputBufferA.value=r.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(n),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},F6e=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,z6e=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,U6e=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,V6e=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,j6e=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,H6e=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,O_=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],G6e=new An({vertexShader:F6e,fragmentShader:z6e}),LP=new An({vertexShader:j6e,fragmentShader:H6e,uniforms:{texture_ao_lrez:new ht(null),texture_depth_lrez:new ht(null),texture_depth_hrez:new ht(null),near:new ht(null),far:new ht(null)}}),W6e=class extends Ya{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let r=1024,n=1024;this.gBuffer=new vn(r,n,{type:ka,depthTexture:new Rx(r,n),minFilter:Or,magFilter:Or}),this.depthBufferHighRes=new vn(r,n,{depthTexture:new Rx(r,n)}),this.aoBuffer=new vn(r,n,{minFilter:Or,magFilter:Or}),this.splineScene=e,this.splineCamera=t;let i=new Float32Array(O_.length*2);for(let a=0;a<O_.length;a++){let s=a*2;i[s+0]=O_[a][0],i[s+1]=O_[a][1]}this.blueNoiseInDiskTexture=new ap(i,O_.length,1,SD,ka),this.blueNoiseInDiskTexture.wrapS=dh,this.blueNoiseInDiskTexture.wrapT=dh,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new An({vertexShader:U6e,fragmentShader:V6e,uniforms:{near:new ht(null),far:new ht(null),fov:new ht(null),proj_info:new ht(new Mr),is_ortho:new ht(!1),resolution:new ht(new Ae),radius_of_influence:new ht(8),radius_in_screen_space:new ht(1),exponent:new ht(1),ao_color:new ht(new X),bias:new ht(.5),texture_depth:new ht(null),texture_normals:new ht(null),texture_blue_noise:new ht(null),texture_blue_noise_in_disk:new ht(this.blueNoiseInDiskTexture),frame_index:new ht(0),fog_enabled:new ht(!1),fog_near:new ht(1),fog_far:new ht(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new vn(r,n,{minFilter:Or,magFilter:Or,wrapS:Ei,wrapT:Ei,depthBuffer:!1,type:ka});let o=new qae({preset:Mg.ULTRA,edgeDetectionMode:uI.COLOR});this.effectPass=new fO(this.camera,o)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let r=this._runHalfRes?.5:1,n=e*r,i=t*r;this.gBuffer.setSize(n,i),this.aoBuffer.setSize(n,i),this.hbaoMaterial.uniforms.resolution.value.set(n,i),this.aaBuffer.setSize(n,i),this.effectPass.setSize(n,i)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,t,r){this.splineScene.overrideMaterial=G6e;let n=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=n,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let i=this.splineCamera.perspCamera.projectionMatrix.elements,o=2/i[0],a=2/i[5],s=-(1-i[8])/i[0],l=-(1+i[9])/i[5];this.hbaoMaterial.uniforms.proj_info.value.set(o,a,s,l);let u=this.splineCamera.perspCamera.fov*(Math.PI/180),d=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(u*.5)*2),c=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*d;this.hbaoMaterial.uniforms.radius_in_screen_space.value=c,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let i=this.splineCamera.orthoCamera.projectionMatrix.elements,o=2/i[0],a=2/i[5],s=-(1+i[12])/i[0],l=-(1-i[13])/i[5];this.hbaoMaterial.uniforms.proj_info.value.set(o,a,s,l);let u=.5*(this.hbaoMaterial.uniforms.resolution.value.y/a),d=this.hbaoMaterial.uniforms.radius_of_influence.value*u;this.hbaoMaterial.uniforms.radius_in_screen_space.value=d,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=LP,LP.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,LP.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,LP.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},q6e=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,X6e=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,Y6e=class extends Bc{constructor(){super(new An({vertexShader:q6e,fragmentShader:X6e,uniforms:{tInput:new ht(null),tMap:new ht(null),uResolution:new ht(new Ae),uSize:new ht(new Ae),uCoords:new ht(new Ae),uScale:new ht(1),uSceneColor:new ht(new tr(16711680)),uDPR:new ht(1),uCurrent:new ht(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},K6e=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,J6e=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,Q6e=[],Z6e=class extends Bc{constructor(){super(new An({vertexShader:K6e,fragmentShader:J6e,uniforms:{toScene:new ht(null),fromScene:new ht(null),uResolution:new ht(new Ae),uDPR:new ht(1),mixRatio:new ht(0),threshold:new ht(.1),useTexture:new ht(0),tMixTexture:{value:Q6e[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}};function PY(e,t){return t&&t.enabled&&e.push(t.effect),e}var $6e=e=>Object.values(Xr).includes(e)?e:Xr.NORMAL,eWe=class extends Vo{constructor(e){super(),this.postprocessingState=eO.defaultData,this._scene=new Cp,this._camera=new sa,this.effects=new Map,this.blueNoiseTexture=new ap,this._renderToScreen=!0,this.clock=new gRe,this.renderer=e,this.debug=!1,this.effects.set("bloom",new b6e),this.effects.set("chromaticAberration",new w6e),this.effects.set("vignette",new M6e),this.effects.set("noise",new A6e),this.effects.set("colorAverage",new _6e),this.effects.set("hueSaturation",new S6e),this.effects.set("brightnessContrast",new x6e),this.effects.set("depthOfField",new C6e),this.effects.set("pixelation",new T6e),this.effectComposer=new B6e(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new Pz(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new I6e(this.scene,this.camera,this.renderer),this.aoPass=new W6e(this.scene,this.camera),this.taaPass=new R6e,this.taaPass.renderToScreen=!1,this.helperPass=new k6e(this.camera),this.helperPass.renderToScreen=!1,this.overlayPass=new Y6e,this.overlayPass.enabled=!1,this.sceneTransitionPass=new Z6e,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.overlayPass.texture=e,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}get overlayTexture(){return this.overlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let r=this.effectComposer.passes[t];if(r.enabled===!0&&!e&&this._renderToScreen){r.renderToScreen=!0,e=!0;continue}r.renderToScreen=!1}}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new ap(e,128,128),this.blueNoiseTexture.wrapS=dh,this.blueNoiseTexture.wrapT=dh,this.blueNoiseTexture.minFilter=Cn,this.blueNoiseTexture.magFilter=Cn,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,r,n,i,o,a,s){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=r,this.aoPass.aoColor=n,this.aoPass.fogEnabled=i,this.aoPass.fogNear=o,this.aoPass.fogFar=a,this.aoPass.runHalfRes!==!s&&(this.aoPass.runHalfRes=!s)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(PY,[]);r.length>0&&(this.uvEffectPass=new fO(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let n=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(PY,[]);n.length>0&&(this.effectPass=new fO(this.camera,...n),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new Ae;this.renderer.getDrawingBufferSize(e),this._rt=new vn(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:dh,wrapT:dh}),this._rt.samples=0,this._savePass=new Tz(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new Tz(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...r}=e,n=!1;t!==this.postprocessingState.enabled&&(n=!0);for(let i of Object.entries(r)){let o=i[1],a=this.effects.get(i[0]);if(a){a.enabled!==o.enabled&&(n=!0),a.enabled=o.enabled;for(let[s,l]of Object.entries(o))s==="blendFunction"?a.blendFunction=$6e(l):a[s]=l}}this.postprocessingState=e,n&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,r,n){e instanceof Mr?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,n),this.effectComposer.outputBuffer.scissor.set(e,t,r,n));let i=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(i),this.effectComposer.outputBuffer.scissor.multiplyScalar(i),this.renderer.setScissor(e,t,r,n)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,r,n){e instanceof Mr?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,n),this.effectComposer.outputBuffer.viewport.set(e,t,r,n))}resize(e,t,r){if(this.effectComposer.setSize(e,t,r),this._rt){let n=this.renderer.getPixelRatio();this._rt.setSize(e*n,t*n)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},tWe=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,rWe=Cr.lights_fragment_begin,nWe=Cr.shadowmask_pars_fragment,DY=null,iWe=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},oWe=(e="medium")=>{if(DY===e)return!1;DY=e;let t=iWe(e);Cr.shadowmap_pars_fragment=tWe(t);let r=rWe.slice();r=r.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),Cr.lights_fragment_begin=r;let n=nWe.slice();return n=n.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),Cr.shadowmask_pars_fragment=n,!0},aWe=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,sWe=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,pN=new An({vertexShader:aWe,fragmentShader:sWe,uniforms:{depthContrast:{value:1}}}),OY=new io,lWe=class extends Ine{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new Ae,this.pipeline=new eWe(this),this.dummyCamera=new sa,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(i=!0,o=!0,a=!0)=>{let s=this.getContext(),l=0;i&&(l|=s.COLOR_BUFFER_BIT),o&&(l|=s.DEPTH_BUFFER_BIT),a&&(l|=s.STENCIL_BUFFER_BIT),s.clear(l),s.clearBufferfv(s.COLOR,1,[0,0,0,1])},this.autoClear=!1;let t=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=TV,this.dummyCamera.matrixAutoUpdate=!1;let n=this.getContext();if(n&&"drawingBufferColorSpace"in n)try{n.drawingBufferColorSpace="display-p3"}catch(i){console.warn(i)}this.setPixelRatio=i=>{this._pixelRatio!==i&&(this._pixelRatio=i,t(i))},this.setSize=(i,o,a=!0)=>{var s,l;(this.viewportWidth!==i||this.viewportHeight!==o)&&(this.viewportWidth=i,this.viewportHeight=o,r(i,o,a),(s=this.normalRenderTarget)==null||s.setSize(i*this._pixelRatio,o*this._pixelRatio),this._resizeTransmission(i,o),(l=this.transmissionDepthTarget)==null||l.setSize(i*this._pixelRatio/2,o*this._pixelRatio/2),this.pipeline.resize(i,o,a))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new vn(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Or,magFilter:Or,wrapS:Ei,wrapT:Ei,depthBuffer:!1}))}_resizeTransmission(e,t){var r,n;(r=this.transmissionRenderTarget)==null||r.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(n=this.aoRenderTarget)==null||n.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return or.transmissionLod.value===1}set hdTransmission(e){or.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new vn(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:Dx,magFilter:Or,wrapS:Ei,wrapT:Ei,depthBuffer:!1}),this.transmissionDepthTarget=new vn(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Cn,magFilter:Cn,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new vn(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Cn,magFilter:Cn,type:ka,depthTexture:new Rx(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,r){this.normalRenderTarget&&(this.setClearColor(0),r.layers.enable(8),r.layers.disable(0),r.layers.disable(3),t.traverseEntity(n=>{n.layers.isEnabled(8)&&(n.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),r instanceof sa?pN.uniforms.depthContrast.value=(r.far-r.near)/1e4:pN.uniforms.depthContrast.value=1,t.overrideMaterial=pN,this.render(t,r),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?Lz:null,r.layers.enable(0),r.layers.enable(3),t.traverseEntity(n=>{n.layers.isEnabled(8)&&(n.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,r=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let n=t.height,i=t.width,o=this.viewportWidth/this.viewportHeight;i<n?i=n*o:n=i/o,this.dummyCamera.setViewplaneSize(i,n);for(let a=0;a<r;a++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:r=void 0,sceneHelpersOnTop:n=void 0,overrideTransmission:i=void 0,overrideNormal:o=void 0}={}){let a=e instanceof Wj?e.activePage:e,s=a.visible;a.visible=!0;let l=a.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(a.bgColor,a.bgColor.a),a.penumbraSizeArray.forEach((h,f)=>{or.penumbraSize.value[f]=h}),or.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?or.resolution.value.set(this.resolution.x,this.resolution.y):or.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),o!==void 0?(or.normalRenderTarget.value=o,or.normalRenderTargetDepth.value=OY):l.needsNormal()&&(this.createNormalRenderTarget(),or.normalRenderTarget.value=this.normalRenderTarget.texture,or.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,a,t));let u=a.data.ao,d=u.occlusion;d&&(this.createAORenderTarget(),or.aoRenderTarget.value=this.aoRenderTarget.texture),or.aoEnabled.value=d,this.pipeline.setAmbientOcclusionParams(u.occlusion,u.radius,u.bias,a.aoColor,a.fog!==null,a.backupFog.near,a.backupFog.far,u.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);let c=!1;if(i!==void 0)or.transmissionRenderTarget.value=i,or.transmissionRenderTargetDepth.value=OY,this.pipeline.setTransmissionPassEnabled(!1);else{let h=l.needsTransmission();h&&(this.transmissionRenderTarget===void 0&&(c=!0),this.createTransmissionRenderTarget(),or.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,or.aspectRatio.value=xje(this.viewportWidth,this.viewportHeight),or.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(h)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=n,this.pipeline.scene=a,this.pipeline.camera=t,c&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==a.postprocessing&&(this.pipeline.updatePostprocessing(a.postprocessing),!r&&!n&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),a.overrideMaterial=l.wireframeState?Lz:null,this.pipeline.render(),or.frameIndex.value=(or.frameIndex.value+1)%16,t instanceof sa&&t.copyHistory(),a.visible=s}renderFromSceneForSceneTransitionPass(e,t,r){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=r,this.sceneTransitionTimeRemaining=r,this.pipeline.renderToScreen=!0;let n=this.pipeline.sceneTransitionPass.uniforms;n.uDPR.value=window.devicePixelRatio,n.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,r,n,i,o;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(r=this.transmissionDepthTarget)==null||r.dispose(),(n=this.normalRenderTarget)==null||n.dispose(),(o=(i=this.normalRenderTarget)==null?void 0:i.depthTexture)==null||o.dispose()}},Xae=class extends BM(RRe){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){NM(this.object,Xae.geometryHelper,e,t)}},Yae=class extends BM(ORe){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){NM(this.object,Yae.geometryHelper,e,t)}},Dz=class extends BM(DRe){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){NM(this.object,Dz.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=Dz._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let n=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let i=0,o=this.cone.material.length;i<o;i++)this.cone.material[i].color.set(n);else this.cone.material.color.set(n)}}},Kae=Dz;Kae._vector=new X;function uWe(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var Jae=class extends zj(mRe,Xae){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.top=1250,n.bottom=-1250,n.right=1250,n.left=-1250,n.near=-1e4,n.far=2500;let i=new BD(this.shadow.camera);i.visible=!1,this.gizmos.shadowmap=i}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof BD&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&uWe(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),r&&this.update()}},RY=new X,IY=new X,LY=new xr,Qae=class extends zj(dRe,Kae){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.fov=Ht.RAD2DEG*2*this.angle,n.aspect=1,n.near=100,n.far=2500;let i=new BD(this.shadow.camera);i.visible=!1,this.gizmos.shadowmap=i,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof BD&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),IY.setFromMatrixPosition(this.matrixWorld),LY.setFromRotationMatrix(this.matrixWorld),RY.copy(this.up).applyQuaternion(LY).negate().multiplyScalar(this.distance),this.target.position.copy(IY).add(RY),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Op=class extends _j(Cp){constructor(e,t){super(),this.data=t,this.bgColor=new Cs(1,1,1,1),this.fog=null,this.backupFog=new Lne(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new tr,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new sa(M1,{...LA.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new uRe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=za(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof E1)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&oWe(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let r=this.scene;r.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=za(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=za(e.aoColor,t))}updateByOp(e,t,r,n){super.updateByOp(e,t,r,n);let i=t;Vl(e.path,["fog"])?this.updateFog(i.fog,r.shared):Vl(e.path,["ao"])?this.updateAo(i.ao,r.shared):Vl(e.path,["ambient"])?this.updateAmbientLight(i.ambient,r.shared):Vl(e.path,["shadow"])&&this.updateShadow(i.shadow)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(za(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(r=>{if(!r.visible)return!0;r instanceof Jae&&r.visible&&e<3&&(this.penumbraSizeArrayCache[e]=r.data.penumbraSize,e+=1),r instanceof Qae&&r.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=r.data.penumbraSize,t+=1)})}raycastWithClones(e){let t=[],r=n=>{for(let i of n.children){let o=i.cloner;jr.is(i)&&(i.visible||o!=null&&o.object.data.visible)&&((Eu(i)||Az(i)&&this.scene.enableHelpers&&i.objectHelper.visible)&&(e.intersectObject(i,!1,t),Oz(i,e,t,!0)),r(i))}};return r(this),t}},cWe=class extends zj(fRe,Yae){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.fov=90,n.aspect=1,n.near=100,n.far=2500;let i=new X(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),o=new X(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z),a=new Oi(i,o),s=new ND(a,new tr(16755200));s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof ND){let r=this.shadow.camera,n=new X(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),i=new X(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(n,i),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},dWe=class extends Ua{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Dj(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},jj=class extends Ua{constructor(e,t,r){super(e,t,r),this._shapeId=null,this._context=r}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){var n;let e={...this.data.geometry.extrusion.shape};for(let i in e)typeof e[i]=="string"&&(e[i]=this._context.shared.getVariable(e[i],[this.uuid,"geometry","extrusion","shape",i]));let t;if(e.type==="Custom"){let i=e.shapeId;if(i!==this._shapeId&&this.detachShape(),i){this._shapeId=i;let o=this._context.scene.find(i);o!=null&&o.data&&(o.attachedPaths.add(this),t=(n=o.geometry.userData)==null?void 0:n.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let i;switch(e.type){case"Rectangle":i=Xoe;break;case"Ellipse":i=Ej;break;case"Polygon":i=qoe;break;case"Star":i=Yoe;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=i.create({parameters:e}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build(),this.attachedSurfaceCloners.forEach(i=>i.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Dj(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},ox=class extends kM(Sb,lI){constructor(e,t,r){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,r)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let r=aO.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(r){let n,i;for(let o of cp.rootOverrideProps)e[o]===void 0?(n===void 0&&(n={...e}),n[o]=r.data[o]):(i===void 0&&(i={}),i[o]=e[o],n===void 0&&(n={...e}),n[o]=Tp.apply(r.data[o],e[o]));return this.overrideData=i,n}else return{...Ha.defaultData,...e,...yh(Ha.defaultData,cp.rootOverrideProps)}}updateByOp(e,t,r,n){let i;if(this.isInstanceRoot&&!n){if(t=this.transformAssignData(t,r),e.type===0&&e.path.length===0&&this.component)for(let o of cp.rootOverrideProps)o in e.props&&e.props[o]===void 0&&(i===void 0&&(i={...e,props:{...e.props}}),i.props[o]=this.component.data[o]);else if(e.type===0&&e.path.length>0&&cp.rootOverrideProps.includes(e.path[0])){let o=e.path[0];i===void 0&&(i={...e,path:[],props:{[o]:t[o]}})}}super.updateByOp(i??e,t,r,n)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let r=e.scene.find(t.component)??null,n=!1;if(r!==this.oldComponent){if(this.oldComponent){let i=0;for(let o of this.children)if(jr.is(o))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(o),Hj(o),i+=1;else break;this.children.splice(0,i)}n=!0}if(r){let i={};Zae(e,[this.uuid],t.overrides,this,r,r,0,n,i);for(let o of this.children)if(jr.is(o)){let a=o.data;a.type==="Empty"&&a.animations&&o.traverseEntity(s=>{if(s instanceof Ua&&s.isSkinnedMesh){let l=s.dataPatched;if(l.bones&&l.boneInverses){let u=l.bones.map(h=>e.scene.find(i[h])),d=l.boneInverses.map(h=>new ft().fromArray(h)),c=new NV(u,d);s.bind(c,s.bindMatrix)}}else s.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function Hj(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let r of e.children)jr.is(r)&&Hj(r)}}function BY(e,t,r,n){return e.component===t&&Fie(e.identity,n)?e.overrideData===r?2:1:0}function Zae(e,t,r,n,i,o,a,s,l){if(a>50)return!1;if(n.component!==i){if(n.component){let d=n.component.instances.indexOf(n);d>=0&&n.component.instances.splice(d,1)}i.instances.push(n),n.component=i}i instanceof ox&&i.isInstanceRoot&&i.expandInstanceChildren(e);let u=0;for(let d of i.children)if(jr.is(d)){let c=[...t,...typeof d.identity=="string"?[d.identity]:d.identity],h=tO.resolve(r,c,1);h!=null&&!(h instanceof oo)&&(Object.setPrototypeOf(h,oo.prototype),console.error("wrong prototype"));let f=null,g;if(!s){let y=n.children[u];if(f=jr.is(y)?y:null,f!==null){let m=BY(f,d,h,c);g=m>=1?f.stateSelection:void 0,m!==2&&(f=null)}if(f===null&&(f=e.scene.findInstance(c)??null,f!==null)){let m=BY(f,d,h,c);if(g=m>=1?f.stateSelection:void 0,m!==2)f=null;else{let p=f.parent.children.indexOf(f);f.parent.children.splice(p,1),n.children.splice(u,0,f),f.parent===n?p<=u&&console.error("not possible"):(f.parent=n,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(f===null){let y=h?Tp.apply(d.data,h):d.data;b0.is(y.type)&&(y={...y,type:"Empty"}),f=dp.createEntity(c,y,e),f.overrideData=h,n.add(f),n.children.splice(n.children.length-1,1),n.children.splice(u,0,f),f.updateState(f.data,e),g&&f.changeSelectedState(g,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){let y=f.identity[f.identity.length-1];l[y]=f.uuid}u+=1,Zae(e,t,r,f,d,o,a+1,s,l)}if(!s){let d=u;for(;;){let c=n.children[u];if(jr.is(c))e.pendingDeletes.add(c);else break;u+=1}n.children.splice(d,u-d)}return!0}var hWe=class extends kM(Bne,lI){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}};function fWe(e,t,r){let n;return t.geometry.type==="TextGeometry"?new zae(e,t,r):(t.geometry.type==="SubdivGeometry"?n=new UA(e,t,r):t.geometry.type==="PathGeometry"?n=new jj(e,t,r):t.geometry.type==="VectorGeometry"?n=new dWe(e,t,r):t.geometry.type==="BooleanGeometry"?n=new Wx(e,t,r):n=new Ua(e,t,r),n)}function Gj(e,t,r){return t.type==="Mesh"?fWe(e,t,r):t.type==="Empty"?new ix(e,t):t.type==="Splat"?new ix(e,t):t.type==="Bone"?new hWe(e,t):t.type==="Page"?new Op(e,t):t.type==="PointLight"?new cWe(e,t,r):t.type==="SpotLight"?new Qae(e,t,r):t.type==="DirectionalLight"?new Jae(e,t,r):t.type==="Component"||t.type==="Instance"?new ox(e,t,r):b0.is(t.type)?new sa(e,t):(console.error(t),new ix(e,t))}dp.createEntity=Gj;function pWe(e,t,r){let n=Gj(e.identity,t,r),i=e.children,o=e.attachedPaths,a=e.parent,s=e.component,l=e.instances,u=e.overrideData,d=e.uuid,c=e.stateSelection;e.dispose();for(let h of Object.keys(e))delete e[h];Object.setPrototypeOf(e,Object.getPrototypeOf(n));for(let h of Object.keys(n))e[h]=n[h];e.children=[...e.children,...i],e.attachedPaths=o,e.parent=a,e.component=s,e.instances=l,e.uuid=d,e.overrideData=u,e.updateState(e.data,r),c&&e.changeSelectedState(c,r),e.resetBBoxNeedsUpdate()}dp.changeEntityProptotype=pWe;dp.Cloner=Lu;function mWe(e,t,r,n){e.updateByOp(t,r,n,!1)}function NY(e,t){let r=!1,n=t.getLayersOfType("transmission"),i=t.getLayersOfType("outline");return i.length>0&&(e.layers.set(8),n.length>0&&e.layers.enable(3),r=!0,Fj(e),kj(e)),n.length===0&&i.length===0&&e.layers.set(0),e instanceof E1&&e.needsAO&&e.layers.enable(5),r}function kY(e,t){if(!t.layers)return!1;let r=!1,n=t.getLayersOfType("transmission").filter(o=>o.data.visible),i=t.getLayersOfType("outline").filter(o=>o.data.visible);return n.length>0&&(e.layers.set(3),i.length>0&&e.layers.enable(8),r=!0),n.length===0&&i.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),r}function gWe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof E1)if(Array.isArray(r.material))for(let n=0;n<r.material.length;n++)NY(r,r.material[n])&&(t=!0);else NY(r,r.material)&&(t=!0)}),t}function vWe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof E1)if(Array.isArray(r.material))for(let n=0;n<r.material.length;n++)kY(r,r.material[n])&&(t=!0);else kY(r,r.material)&&(t=!0)}),t}var yWe=new tie,bWe=new ft,xWe=new f1;function Oz(e,t,r,n=!1){let i=e.cloner;if(i)for(let o of i.children){let a=bWe.copy(o.matrixWorld).invert(),s=xWe.copy(t.ray).applyMatrix4(a),l=e.matrixWorld;s.applyMatrix4(l);let u=yWe;u.set(s.origin,s.direction),u.near=t.near,u.far=t.far;let d=u.intersectObject(e,!1);d.length>0&&r.push({...d[0],object:n?o:e})}}var wWe=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((r,n)=>{let i=[n,r],o=r;for(;this._constraints.has(o);)o=this._constraints.get(o),t.has(o)||i.push(o);for(let a=i.length-2;a>=0;a--)if(!t.has(i[a])){let s=e.find(i[a]);s?s.applyPathSnapping(e):console.warn(`missing entity ${i[a]}`),t.add(i[a])}})}findDependency(e,t){let r=e;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===t)return!0;return!1}},Ac=Po(MM()),Vd=Po(CM()),Ci=Po(MM()),Pr=Po(CM()),pO=class{constructor(e,t,r){this._dataNormalized=e,this._minD=t,this._maxD=r}static createFromUnnormalized(e){let t=Pr.sup(e),r=Pr.inf(e),n=(0,Ci.default)(new Float32Array(e.size),e.shape),i=t-r;return i<1e-4?Pr.assigns(n,0):(Pr.subs(n,e,r),Pr.divs(n,n,i)),new pO(n,r,t)}get data(){return this._dataNormalized}get minD(){return this._minD}get maxD(){return this._maxD}denormalize(){let e=(0,Ci.default)(new Float32Array(this._dataNormalized.size),this._dataNormalized.shape);return Pr.muls(e,this._dataNormalized,this._maxD-this._minD),Pr.adds(e,e,this._minD),e}},Kn=class{constructor(e,t){this._quantized=e,this._method=t}get quantized(){return this._quantized}static maxIntBits(e){return 2**e-1}static fromNormalized(e,t){let r=e.data,n;if(t==="norm8x"){let i=Kn.maxIntBits(8),o=(0,Ci.default)(new Float32Array(r.size),r.shape);Pr.muls(o,r,i),Pr.roundeq(o),n=(0,Ci.default)(new Uint8Array(o.data),r.shape)}else if(t==="norm565"){let i=(0,Ci.default)(new Float32Array(r.size),r.shape);Pr.assign(i,r),Pr.mulseq(i.pick(null,0),Kn.maxIntBits(5)),Pr.mulseq(i.pick(null,1),Kn.maxIntBits(6)),Pr.mulseq(i.pick(null,2),Kn.maxIntBits(5)),Pr.roundeq(i);let o=(0,Ci.default)(new Uint16Array(i.data),r.shape),a=(0,Ci.default)(new Uint16Array(r.shape[0]),[r.shape[0]]),s=(0,Ci.default)(new Uint16Array(r.shape[0]),[r.shape[0]]);Pr.lshifts(a,o.pick(null,0),11),Pr.lshifts(s,o.pick(null,1),5),Pr.boreq(a,s),Pr.boreq(a,o.pick(null,2)),n=a}else{let i=(0,Ci.default)(new Float32Array(r.size),r.shape);Pr.assign(i,r),Pr.mulseq(i.pick(null,0),Kn.maxIntBits(11)),Pr.mulseq(i.pick(null,1),Kn.maxIntBits(10)),Pr.mulseq(i.pick(null,2),Kn.maxIntBits(11)),Pr.roundeq(i);let o=(0,Ci.default)(new Uint32Array(i.data),r.shape),a=(0,Ci.default)(new Uint32Array(r.shape[0]),[r.shape[0]]),s=(0,Ci.default)(new Uint32Array(r.shape[0]),[r.shape[0]]);Pr.lshifts(a,o.pick(null,0),21),Pr.lshifts(s,o.pick(null,1),11),Pr.boreq(a,s),Pr.boreq(a,o.pick(null,2)),n=a}return new Kn(n,t)}dequantize(e,t){let r=this._method,n,i=this._quantized;if(r==="norm8x"){let o=Kn.maxIntBits(8);n=(0,Ci.default)(new Float32Array(i.size),i.shape),Pr.muls(n,i,1/o)}else if(r==="norm565"){let o=(0,Ci.default)(new Uint8Array(i.shape[0]),[i.shape[0]]),a=(0,Ci.default)(new Uint8Array(i.shape[0]),[i.shape[0]]),s=(0,Ci.default)(new Uint8Array(i.shape[0]),[i.shape[0]]);Pr.rrshifts(o,i,11),Pr.rrshifts(a,i,5),Pr.bandseq(a,Kn.maxIntBits(6)),Pr.bands(s,i,Kn.maxIntBits(5)),n=(0,Ci.default)(new Float32Array(i.shape[0]*3),[i.shape[0],3]),Pr.muls(n.pick(null,0),o,1/Kn.maxIntBits(5)),Pr.muls(n.pick(null,1),a,1/Kn.maxIntBits(6)),Pr.muls(n.pick(null,2),s,1/Kn.maxIntBits(5))}else{let o=(0,Ci.default)(new Uint16Array(i.shape[0]),[i.shape[0]]),a=(0,Ci.default)(new Uint16Array(i.shape[0]),[i.shape[0]]),s=(0,Ci.default)(new Uint16Array(i.shape[0]),[i.shape[0]]);Pr.rrshifts(o,i,21),Pr.rrshifts(a,i,11),Pr.bandseq(a,Kn.maxIntBits(10)),Pr.bands(s,i,Kn.maxIntBits(11)),n=(0,Ci.default)(new Float32Array(i.shape[0]*3),[i.shape[0],3]),Pr.muls(n.pick(null,0),o,1/Kn.maxIntBits(11)),Pr.muls(n.pick(null,1),a,1/Kn.maxIntBits(10)),Pr.muls(n.pick(null,2),s,1/Kn.maxIntBits(11))}return new pO(n,e,t)}},ci=class{constructor(e,t,r,n,i,o=!1){this._quantized=e,this._minMaxMatrix=t,this._chunkSize=r,this._quantizationMethod=n,this._variableChunkSize=i,this._isDynamicChunks=o}get length(){return this._quantized.shape[0]}get nchunks(){return this._minMaxMatrix.shape[0]}get quantized(){return this._quantized}get method(){return this._quantizationMethod}get minmaxMatrix(){return this._minMaxMatrix}_createPrunedMinMax(e){let t=e.length,r=this.minmaxMatrix.shape[0]-t,n=(0,Ac.default)(new Float32Array(r*2),[r,2]),i=0,o=r,a=0,s=this.minmaxMatrix.shape[0];for(let l=0;l<e.length;l++)s=e[l],o=s-a+i,o>i&&Vd.assign(n.hi(o,2).lo(i,0),this.minmaxMatrix.hi(s,2).lo(a,0)),i=o,a=s+1;return i<r&&Vd.assign(n.lo(i,0),this.minmaxMatrix.lo(a,0)),n}_createPrunedQuantized(e){let t=e.length,r=this.quantized.shape[0]-t,n=this._quantizationMethod,i,o;if(n==="norm8x"){o=this._quantized.shape[1];let d=o?r*o:r;i=(0,Ac.default)(new Uint8Array(d),o?[r,o]:[r,1])}else n==="norm565"?i=(0,Ac.default)(new Uint16Array(r),[r]):i=(0,Ac.default)(new Uint32Array(r),[r]);let a=0,s=r,l=0,u=i.shape[0];for(let d=0;d<e.length;d++)u=e[d],s=u-l+a,s>a&&(o?Vd.assign(i.hi(s,o).lo(a,0),this._quantized.hi(u,o).lo(l,0)):Vd.assign(i.hi(s).lo(a),this._quantized.hi(u).lo(l))),a=s,l=u+1;return a<r&&(o?Vd.assign(i.lo(a,0),this._quantized.lo(l,0)):Vd.assign(i.lo(a),this._quantized.lo(l))),i}pruneFeature(e,t,r){let n=this._createPrunedQuantized(e),i=this._createPrunedMinMax(t);return new ci(n,i,this._chunkSize,this._quantizationMethod,r,!0)}static getRequiredNChunks(e,t){return Math.floor(e/t)}static fromArray(e,t,r){let n=e.shape[0],i=Math.floor(n/r),o=(0,Ac.default)(new Float32Array(i*2),[i,2],[2,1]),a;t==="norm8x"?a=(0,Ac.default)(new Uint8Array(e.size),e.shape):t==="norm565"?a=(0,Ac.default)(new Uint16Array(e.shape[0]),[e.shape[0]]):a=(0,Ac.default)(new Uint32Array(e.shape[0]),[e.shape[0]]);for(let s=0;s<i;s++){let l=s*r,u=s+1<i?(s+1)*r:n,d;e.shape.length>1?d=pO.createFromUnnormalized(e.hi(u,e.shape[1]).lo(l,0)):d=pO.createFromUnnormalized(e.hi(u).lo(l)),o.set(s,0,d.minD),o.set(s,1,d.maxD),a.shape.length>1?Vd.assign(a.hi(u,a.shape[1]).lo(l,0),Kn.fromNormalized(d,t).quantized):Vd.assign(a.hi(u).lo(l),Kn.fromNormalized(d,t).quantized)}return new ci(a,o,r,t)}denormDequant(){let e=this._minMaxMatrix.shape[0],t=this._quantized,r=t.shape[0],n=this._quantizationMethod,i=this._chunkSize,o;if(this._isDynamicChunks){if(!this._variableChunkSize)throw new Error("variable chunk must exists if chunkSize isDynamic");o=this._variableChunkSize}let a;n==="norm8x"?a=(0,Ac.default)(new Float32Array(t.size),t.shape):a=(0,Ac.default)(new Float32Array(r*3),[r,3]);let s=0,l=i;for(let u=0;u<e;u++){let[d,c]=[this._minMaxMatrix.get(u,0),this._minMaxMatrix.get(u,1)];this._isDynamicChunks&&(l=o[u]);let h=u+1<e?s+l:r,f;t.shape.length>1?f=new Kn(t.hi(h,t.shape[1]).lo(s,0),n):f=new Kn(t.hi(h).lo(s),n),Vd.assign(a.hi(h,a.shape[1]).lo(s,0),f.dequantize(d,c).denormalize()),s=h}return a}static async fetchArrayBuffer(e){return await(await fetch(e,{mode:"cors"})).arrayBuffer()}},Bf=Po(MM()),Wr=Po(CM()),_We="http://127.0.0.1:8000",ax=Po(MM()),Fi=Po(CM()),FY=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function zY(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function UY(e,t){if(e===t)return 0;if(~~e===e&&~~t===t){if(e===0||t===0)return e<t?-1:1;if(e<0||t<0){if(t>=0)return-1;if(e>=0)return 1;e=-e,t=-t}let i=zY(e),o=zY(t),a=0;return i<o?(e*=FY[o-i-1],t/=10,a=-1):i>o&&(t*=FY[i-o-1],e/=10,a=1),e===t?a:e<t?-1:1}let r=String(e),n=String(t);return r===n?0:r<n?-1:1}function SWe(e){let t=0;for(;e>=32;)t|=e&1,e>>=1;return e+t}function VY(e,t,r,n){let i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;AWe(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function AWe(e,t,r){for(r--;t<r;){let n=e[t];e[t++]=e[r],e[r--]=n}}function jY(e,t,r,n,i){for(n===t&&n++;n<r;n++){let o=e[n],a=t,s=n;for(;a<s;){let u=a+s>>>1;i(o,e[u])<0?s=u:a=u+1}let l=n-a;switch(l){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;l>0;)e[a+l]=e[a+l-1],l--}e[a]=o}}function mN(e,t,r,n,i,o){let a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);let u=a;a=i-l,l=i-u}for(a++;a<l;){let u=a+(l-a>>>1);o(e,t[r+u])>0?a=u+1:l=u}return l}function gN(e,t,r,n,i,o){let a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);let u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){let u=a+(l-a>>>1);o(e,t[r+u])<0?l=u:a=u+1}return l}var MWe=class{constructor(e,t){Da(this,"array",null),Da(this,"compare",null),Da(this,"minGallop",7),Da(this,"length",0),Da(this,"tmpStorageLength",256),Da(this,"stackLength",0),Da(this,"runStart",null),Da(this,"runLength",null),Da(this,"stackSize",0),this.array=e,this.compare=t,this.length=e.length,this.length<2*256&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}pushRun(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1}mergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}}forceMergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}}mergeAt(e){let t=this.compare,r=this.array,n=this.runStart[e],i=this.runLength[e],o=this.runStart[e+1],a=this.runLength[e+1];this.runLength[e]=i+a,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;let s=gN(r[o],r,n,i,0,t);n+=s,i-=s,i!==0&&(a=mN(r[n+i-1],r,o,a,a-1,t),a!==0&&(i<=a?this.mergeLow(n,i,o,a):this.mergeHigh(n,i,o,a)))}mergeLow(e,t,r,n){let i=this.compare,o=this.array,a=this.tmp,s=0;for(s=0;s<t;s++)a[s]=o[e+s];let l=0,u=r,d=e;if(o[d++]=o[u++],--n===0){for(s=0;s<t;s++)o[d+s]=a[l+s];return}if(t===1){for(s=0;s<n;s++)o[d+s]=o[u+s];o[d+n]=a[l];return}let c=this.minGallop;for(;;){let h=0,f=0,g=!1;do if(i(o[u],a[l])<0){if(o[d++]=o[u++],f++,h=0,--n===0){g=!0;break}}else if(o[d++]=a[l++],h++,f=0,--t===1){g=!0;break}while((h|f)<c);if(g)break;do{if(h=gN(o[u],a,l,t,0,i),h!==0){for(s=0;s<h;s++)o[d+s]=a[l+s];if(d+=h,l+=h,t-=h,t<=1){g=!0;break}}if(o[d++]=o[u++],--n===0){g=!0;break}if(f=mN(a[l],o,u,n,0,i),f!==0){for(s=0;s<f;s++)o[d+s]=o[u+s];if(d+=f,u+=f,n-=f,n===0){g=!0;break}}if(o[d++]=a[l++],--t===1){g=!0;break}c--}while(h>=7||f>=7);if(g)break;c<0&&(c=0),c+=2}if(this.minGallop=c,c<1&&(this.minGallop=1),t===1){for(s=0;s<n;s++)o[d+s]=o[u+s];o[d+n]=a[l]}else{if(t===0)throw new Error("mergeLow preconditions were not respected");for(s=0;s<t;s++)o[d+s]=a[l+s]}}mergeHigh(e,t,r,n){let i=this.compare,o=this.array,a=this.tmp,s=0;for(s=0;s<n;s++)a[s]=o[r+s];let l=e+t-1,u=n-1,d=r+n-1,c=0,h=0;if(o[d--]=o[l--],--t===0){for(c=d-(n-1),s=0;s<n;s++)o[c+s]=a[s];return}if(n===1){for(d-=t,l-=t,h=d+1,c=l+1,s=t-1;s>=0;s--)o[h+s]=o[c+s];o[d]=a[u];return}let f=this.minGallop;for(;;){let g=0,y=0,m=!1;do if(i(a[u],o[l])<0){if(o[d--]=o[l--],g++,y=0,--t===0){m=!0;break}}else if(o[d--]=a[u--],y++,g=0,--n===1){m=!0;break}while((g|y)<f);if(m)break;do{if(g=t-gN(a[u],o,e,t,t-1,i),g!==0){for(d-=g,l-=g,t-=g,h=d+1,c=l+1,s=g-1;s>=0;s--)o[h+s]=o[c+s];if(t===0){m=!0;break}}if(o[d--]=a[u--],--n===1){m=!0;break}if(y=n-mN(o[l],a,0,n,n-1,i),y!==0){for(d-=y,u-=y,n-=y,h=d+1,c=u+1,s=0;s<y;s++)o[h+s]=a[c+s];if(n<=1){m=!0;break}}if(o[d--]=o[l--],--t===0){m=!0;break}f--}while(g>=7||y>=7);if(m)break;f<0&&(f=0),f+=2}if(this.minGallop=f,f<1&&(this.minGallop=1),n===1){for(d-=t,l-=t,h=d+1,c=l+1,s=t-1;s>=0;s--)o[h+s]=o[c+s];o[d]=a[u]}else{if(n===0)throw new Error("mergeHigh preconditions were not respected");for(c=d-(n-1),s=0;s<n;s++)o[c+s]=a[s]}}};function CWe(e,t,r,n){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");t?typeof t!="function"&&(n=r,r=t,t=UY):t=UY,r||(r=0),n||(n=e.length);let i=n-r;if(i<2)return;let o=0;if(i<32){o=VY(e,r,n,t),jY(e,r,n,r+o,t);return}let a=new MWe(e,t),s=SWe(i);do{if(o=VY(e,r,n,t),o<s){let l=i;l>s&&(l=s),jY(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}function vN(e){let t=(0,ax.default)(new Int32Array(e.shape[0]),[e.shape[0]]),r=(0,ax.default)(new Int32Array(e.shape[0]),[e.shape[0]]);return Fi.bands(t,e,1023),Fi.lshifts(r,t,16),Fi.bxoreq(t,r),Fi.bandseq(t,4278190335),Fi.lshifts(r,t,8),Fi.bxoreq(t,r),Fi.bandseq(t,50393103),Fi.lshifts(r,t,4),Fi.bxoreq(t,r),Fi.bandseq(t,51130563),Fi.lshifts(r,t,2),Fi.bxoreq(t,r),Fi.bandseq(t,153391689),t}function TWe(e){let t=vN(e.pick(null,0)),r=vN(e.pick(null,1));Fi.lshiftseq(r,1);let n=vN(e.pick(null,2));return Fi.lshiftseq(n,2),Fi.boreq(t,r),Fi.boreq(t,n),t}function Fy(e,t){if(e.shape[0]!==t.shape[0])throw new Error("wrong length");let r=(0,ax.default)(new Float32Array(e.size),e.shape,e.stride,e.offset);for(let n=0;n<t.shape[0];n++){let i=t.get(n);if(e.shape.length>1)for(let o=0;o<e.shape[1];o++)r.set(n,o,e.get(i,o));else r.set(n,e.get(i))}return r}function EWe(e){let t=Fi.sup(e),r=Fi.inf(e),n=1e3/Math.min(1e3,t-r),i=(0,ax.default)(new Float32Array(e.data),e.shape);Fi.mulseq(i,n);let o=(0,ax.default)(new Int32Array(i.data),e.shape),a=TWe(o),s=Array.from(a.data).map((u,d)=>[u,d]);CWe(s,(u,d)=>u[0]-d[0]);let l=s.map(([u,d])=>d);return(0,ax.default)(Uint32Array.from(l))}var vg=class{constructor(e,t,r,n,i,o,a,s,l,u){this.propertyDescs=e,this.format=t,this.nsplats=r,this.xyz=n,this.colors=i,this.harmonics=o,this.opacity=a,this.scaling=s,this.rotation=l,this.maxSHDegree=u}getPlyBinary(){let e=vg._generateHeaderString(this.propertyDescs,this.format,this.nsplats),t=new TextEncoder().encode(e),r=Object.keys(this.propertyDescs).length,n=(0,Bf.default)(new Float32Array(this.nsplats*r),[this.nsplats,r]);if(Wr.assign(n.pick(null,this.propertyDescs.x.index),this.xyz.pick(null,0)),Wr.assign(n.pick(null,this.propertyDescs.y.index),this.xyz.pick(null,1)),Wr.assign(n.pick(null,this.propertyDescs.z.index),this.xyz.pick(null,2)),Wr.assign(n.pick(null,this.propertyDescs.f_dc_0.index),this.colors.pick(null,0)),Wr.assign(n.pick(null,this.propertyDescs.f_dc_1.index),this.colors.pick(null,1)),Wr.assign(n.pick(null,this.propertyDescs.f_dc_2.index),this.colors.pick(null,2)),Wr.assign(n.pick(null,this.propertyDescs.opacity.index),this.opacity.pick(null,0)),Wr.assign(n.pick(null,this.propertyDescs.scale_0.index),this.scaling.pick(null,0)),Wr.assign(n.pick(null,this.propertyDescs.scale_1.index),this.scaling.pick(null,1)),Wr.assign(n.pick(null,this.propertyDescs.scale_2.index),this.scaling.pick(null,2)),Wr.assign(n.pick(null,this.propertyDescs.rot_0.index),this.rotation.pick(null,0)),Wr.assign(n.pick(null,this.propertyDescs.rot_1.index),this.rotation.pick(null,1)),Wr.assign(n.pick(null,this.propertyDescs.rot_2.index),this.rotation.pick(null,2)),Wr.assign(n.pick(null,this.propertyDescs.rot_3.index),this.rotation.pick(null,3)),this.harmonics&&this.harmonics.length>0)for(let a=0;a<this.harmonics.length;a++){let s=a*3;Wr.assign(n.pick(null,this.propertyDescs[`f_rest_${s}`].index),this.harmonics[a].pick(null,0)),Wr.assign(n.pick(null,this.propertyDescs[`f_rest_${s+1}`].index),this.harmonics[a].pick(null,1)),Wr.assign(n.pick(null,this.propertyDescs[`f_rest_${s+2}`].index),this.harmonics[a].pick(null,2))}let i=new Uint8Array(n.data.buffer),o=new Uint8Array(i.length+t.length);return o.set(t),o.set(i,t.length),o.buffer}save(e,t){let r=this.getPlyBinary(),n=new Blob([r],{type:"application/octet-stream"}),i=new File([n],e),o=new FormData;o.append("file",i),o.append("filename",e),o.append("basedir",t),fetch(`${_We}/push_file`,{method:"POST",body:o})}static async loadFile(e){return await(await fetch(e)).arrayBuffer()}mortonPositionSplatsSort(){let e=EWe(this.xyz),t=Fy(this.xyz,e),r=Fy(this.colors,e),n=Fy(this.opacity,e),i=Fy(this.scaling,e),o=Fy(this.rotation,e),a=[];for(let s=0;s<this.harmonics.length;s++)a.push(Fy(this.harmonics[s],e));return new vg(this.propertyDescs,this.format,this.nsplats,t,r,a,n,i,o,this.maxSHDegree)}static _generateHeaderString(e,t,r){let n=`ply
format ${t.format} ${t.version}
element vertex ${r}`,i=Object.keys(e).length,o=Array(i);for(let a in e){let s=e[a];o[s.index]={name:a,dtype:s.dtype}}for(let a=0;a<o.length;a++)n=`${n}
property ${o[a].dtype} ${o[a].name}`;return`${n}
end_header
`}static fromArrayBuffer(e,t=3){let{splatCount:r,vertexData:n,propertiesDesc:i,format:o}=vg.decodeHeader(e),a=n.buffer.slice(n.byteOffset),s=Object.keys(i).length,l=(0,Bf.default)(new Float32Array(a),[r,s]),u=0,d={},c={double:8,int:4,uint:4,float:4,short:2,ushort:2,uchar:1};for(let b in i)if(i.hasOwnProperty(b)){let x=i[b].dtype;d[b]=u,u+=c[x]}let h=(0,Bf.default)(new Float32Array(r*3),[r,3]);Wr.assign(h.pick(null,0),l.pick(null,d.x/4)),Wr.assign(h.pick(null,1),l.pick(null,d.y/4)),Wr.assign(h.pick(null,2),l.pick(null,d.z/4));let f=(0,Bf.default)(new Float32Array(r*3),[r,3]);Wr.assign(f.pick(null,0),l.pick(null,d.scale_0/4)),Wr.assign(f.pick(null,1),l.pick(null,d.scale_1/4)),Wr.assign(f.pick(null,2),l.pick(null,d.scale_2/4));let g=(0,Bf.default)(new Float32Array(r*3),[r,3]);Wr.assign(g.pick(null,0),l.pick(null,d.f_dc_0/4)),Wr.assign(g.pick(null,1),l.pick(null,d.f_dc_1/4)),Wr.assign(g.pick(null,2),l.pick(null,d.f_dc_2/4));let y=(0,Bf.default)(new Float32Array(r*4),[r,4]);Wr.assign(y.pick(null,0),l.pick(null,d.rot_1/4)),Wr.assign(y.pick(null,1),l.pick(null,d.rot_2/4)),Wr.assign(y.pick(null,2),l.pick(null,d.rot_3/4)),Wr.assign(y.pick(null,3),l.pick(null,d.rot_0/4));for(let b=0;b<r;b++){let x=y.pick(b,null),_=Math.sqrt(x.get(0)**2+x.get(1)**2+x.get(2)**2+x.get(3)**2);Wr.divseq(x,_)}let m=(0,Bf.default)(new Float32Array(r*1),[r,1]);Wr.assign(m.pick(null,0),l.pick(null,d.opacity/4));let p=(Math.min(Math.max(t,0),3)+1)**2-1,v=[];for(let b=0;b<p;b++){let x=(0,Bf.default)(new Float32Array(r*3),[r,3]),_=b*3;Wr.assign(x.pick(null,0),l.pick(null,d[`f_rest_${_}`]/4)),Wr.assign(x.pick(null,1),l.pick(null,d[`f_rest_${_+1}`]/4)),Wr.assign(x.pick(null,2),l.pick(null,d[`f_rest_${_+2}`]/4)),v.push(x)}return new vg(i,o,r,h,g,v,m,f,y,t)}static async fromPLYFile(e,t=3){let r=await vg.loadFile(e);return vg.fromArrayBuffer(r,t)}static decodeHeader(e){let t=new TextDecoder,r=0,n="",i=100;for(;;){if(r+i>=e.byteLength)throw new Error("End of file reached while searching for end of header");let h=new Uint8Array(e,r,i);n+=t.decode(h),r+=i;let f=r-i*2,g=new Uint8Array(e,Math.max(0,f),f>0?i*2:i);if(t.decode(g).includes("end_header"))break}let o=n.split(`
`),a=0,s={},l=0,u;for(let h=0;h<o.length;h++){let f=o[h].trim();if(f.startsWith("element vertex")){let g=f.match(/\d+/);g&&(a=parseInt(g[0]))}else if(f.startsWith("property")){let g=f.match(/(\w+)\s+(\w+)\s+(\w+)/);if(g){let y=g[2],m=g[3];s[m]={dtype:y,index:l},l++}}else if(f.startsWith("format")){let g=f.match(/(\w+)\s+(\w+)\s+(\d+\.?\d*)/);g&&(u={format:g[2],version:g[3]})}else if(f==="end_header")break}let d=n.indexOf("end_header")+10+1,c=new DataView(e,d);return{splatCount:a,vertexData:c,headerOffset:r,propertiesDesc:s,format:u}}},Rz=class{constructor(e,t,r,n,i,o,a,s){this.config=e,this.xyz=t,this.scaling=r,this.color=n,this.opacity=i,this.harmonics=a,this.quaternion=o,this.variableChunkSize=s}get isDynamicChunks(){return this.variableChunkSize&&this.variableChunkSize.length>0}get nchunks(){return this.xyz.nchunks}get nsplats(){return this.xyz.length}get chunkSize(){return this.config.chunkSize}static compressFromGaussianData(e,t){let r=ci.fromArray(e.xyz,t.xyz,t.chunkSize),n=ci.fromArray(e.scaling,t.scaling,t.chunkSize),i=ci.fromArray(e.colors,t.color,t.chunkSize),o=ci.fromArray(e.opacity,t.opacity,t.chunkSize),a=ci.fromArray(e.rotation,t.quaternion,t.chunkSize),s=e.harmonics,l=[];if(t.harmonics)for(let u=0;u<s.length;u++){let d=ci.fromArray(s[u],t.harmonics,t.chunkSize);l.push(d)}return new Rz(t,r,n,i,o,a,l)}_countIndexesInChunks(e){let t=[],r=this.nchunks,n=this.chunkSize,i=this.nsplats,o=ci.getRequiredNChunks(i,n);if(r===o)for(let a=0;a<e.length;a++){let s=e[a],l=Math.floor(s/this.chunkSize);l in t?t[l].push(s):t[l]=[s]}else{let a=this.variableChunkSize,s={},l=0;for(let u=0;u<r;u++)s[u]=l,l+=a[u];for(let u=0;u<e.length;u++){let d=e[u],c=Math.min(Math.floor(d/n),r-1);for(;d>=s[c]+a[c];)c++;c in t?t[c].push(d):t[c]=[d]}}return t}pruneSplats(e){let t=this._countIndexesInChunks(e),r,n=[];return t.length>0&&(r=this.variableChunkSize?[...this.variableChunkSize]:Array(this.nchunks).fill(this.chunkSize),t.forEach((i,o)=>{r[o]-=i.length,r[o]<=0&&n.push(o)}),r=r.filter(i=>i>0)),new Rz(this.config,this.xyz.pruneFeature(e,n,r),this.scaling.pruneFeature(e,n,r),this.color.pruneFeature(e,n,r),this.opacity.pruneFeature(e,n,r),this.quaternion.pruneFeature(e,n,r),this.harmonics?this.harmonics.map(i=>i.pruneFeature(e,n,this.variableChunkSize)):void 0,r)}static async loadConfig(e){return await(await fetch(e,{method:"GET",mode:"cors",headers:{Accept:"application/json"}})).json()}toGaussians(){var i;let e={format:"binary_little_endian",version:"1.0"},t={},r=0;if(t.x={dtype:"float",index:r},r++,t.y={dtype:"float",index:r},r++,t.z={dtype:"float",index:r},r++,t.f_dc_0={dtype:"float",index:r},r++,t.f_dc_1={dtype:"float",index:r},r++,t.f_dc_2={dtype:"float",index:r},r++,this.harmonics&&this.harmonics.length>0)for(let o=0;o<this.harmonics.length;o++)t[`f_rest_${o}`]={dtype:"float",index:r},r++,t[`f_rest_${o+1}`]={dtype:"float",index:r},r++,t[`f_rest_${o+2}`]={dtype:"float",index:r},r++;t.opacity={dtype:"float",index:r},r++,t.scale_0={dtype:"float",index:r},r++,t.scale_1={dtype:"float",index:r},r++,t.scale_2={dtype:"float",index:r},r++,t.rot_0={dtype:"float",index:r},r++,t.rot_1={dtype:"float",index:r},r++,t.rot_2={dtype:"float",index:r},r++,t.rot_3={dtype:"float",index:r},r++;let n=(i=this.harmonics)==null?void 0:i.map(o=>o.denormDequant());return new vg(t,e,this.xyz.length,this.xyz.denormDequant(),this.color.denormDequant(),n||[],this.opacity.denormDequant(),this.scaling.denormDequant(),this.quaternion.denormDequant(),3)}},zy=Po(MM()),Cl=Po(CM()),HY={xyz:3,color:3,opacity:1,scaling:3,quaternion:4,harmonics:3},Iz=class{constructor(e){this._buffer=e}get buffer(){return this._buffer}get decoded(){return this._decoded||(this._decoded=this.decodeBuffer()),this._decoded}get colorsA(){let e=.28209479177387814,t=this.decoded.color.denormDequant(),r=this.decoded.opacity.denormDequant(),n=(0,zy.default)(new Float32Array(t.shape[0]*4),[t.shape[0],4]);return Cl.mulseq(t,e),Cl.addseq(t,.5),Cl.mulseq(t,255),Cl.maxseq(t,0),Cl.minseq(t,255),Cl.negeq(r),Cl.expeq(r),Cl.addseq(r,1),Cl.recipeq(r),Cl.mulseq(r,255),Cl.assign(n.hi(t.shape[0],3).lo(0,0),t),Cl.assign(n.hi(t.shape[0],4).lo(0,3),r),(0,zy.default)(new Uint8Array(n.data),[t.shape[0],4]).data}get nsplats(){return this.decoded.nsplats}getSplatCount(){return this.decoded.nsplats}get precomputedCovarianceBufferData(){return this._precomputedCovarianceBufferData}decodeBuffer(){let{splatCount:e,chunkCount:t,chunkSize:r,typeChunks:n,vertexData:i,propertiesDesc:o}=this.decodeHeader(),a={xyz:o.xyz.compressionMethod,color:o.color.compressionMethod,opacity:o.opacity.compressionMethod,scaling:o.scaling.compressionMethod,quaternion:o.quaternion.compressionMethod,chunkSize:r};o.harmonics_0&&(a.harmonics=o.harmonics_0.compressionMethod);let s=i.byteOffset,l=Array(Object.keys(o).length);for(let m in o)l[o[m].index]={name:m,method:o[m].compressionMethod};let u=t*2*4,d=s,c=n==="dynamic"?t*2:0,h,f=!1;if(c>0){let m=new Uint16Array(i.buffer.slice(d,d+c));d+=c,h=Array.from(m),f=!0}let g={};for(let m of l){let p=0,v=!0;if(m.method==="norm8x")p=e*1*HY[m.name];else if(m.method==="norm11")p=e*4;else if(m.method==="norm565")p=e*2;else throw v=!1,new Error(`Not Implemented format: ${m.method}`);let b;if(v){let A=i.buffer.slice(d,d+u);b=(0,zy.default)(new Float32Array(A),[t,2]),d+=u}else throw new Error("loading chunk byt hasnot minmax!");let x=i.buffer.slice(d,d+p);d+=p;let _;if(m.method==="norm8x")_=(0,zy.default)(new Uint8Array(x),[e,HY[m.name]]);else if(m.method==="norm11")_=(0,zy.default)(new Uint32Array(x));else if(m.method==="norm565")_=(0,zy.default)(new Uint16Array(x));else throw new Error(`Not Implemented format: ${m.method}`);g[m.name]=new ci(_,b,r,m.method,h,f)}let y=[];for(let m=0;m<15;m++){let p=g[`harmonics_${m}`];p&&(y.push(p),delete g[`harmonics_${m}`])}return y.length>0&&(g.harmonics=y),new Rz(a,g.xyz,g.scaling,g.color,g.opacity,g.quaternion,g.harmonics,h)}buildPreComputedBuffers(){let e=this.decoded,t=e.nsplats,r=new ArrayBuffer(24*t),n=new Float32Array(r),i=e.scaling.denormDequant(),o=e.quaternion.denormDequant(),a=new xr,s=new Pi,l=new Pi,u=new Pi,d=new ft;for(let c=0;c<t;c++){d.makeScale(Math.exp(i.get(c,0)),Math.exp(i.get(c,1)),Math.exp(i.get(c,2))),l.setFromMatrix4(d),a.set(o.get(c,0),o.get(c,1),o.get(c,2),o.get(c,3)),d.makeRotationFromQuaternion(a),s.setFromMatrix4(d),u.copy(s).multiply(l);let h=u.elements;n[6*c]=h[0]*h[0]+h[3]*h[3]+h[6]*h[6],n[6*c+1]=h[0]*h[1]+h[3]*h[4]+h[6]*h[7],n[6*c+2]=h[0]*h[2]+h[3]*h[5]+h[6]*h[8],n[6*c+3]=h[1]*h[1]+h[4]*h[4]+h[7]*h[7],n[6*c+4]=h[1]*h[2]+h[4]*h[5]+h[7]*h[8],n[6*c+5]=h[2]*h[2]+h[5]*h[5]+h[8]*h[8]}this._precomputedCovarianceBufferData=r}decodeHeader(){let e=this._buffer,t=new TextDecoder,r=0,n="",i=100;for(;;){if(r+i>=e.byteLength)throw new Error("End of file reached while searching for end of header");let g=new Uint8Array(e,r,i);n+=t.decode(g),r+=i;let y=r-i*2,m=new Uint8Array(e,Math.max(0,y),y>=0?i*2:i);if(t.decode(m).includes("end_header"))break}let o=n.split(`
`),a=0,s=0,l=0,u=0,d="",c={};for(let g=0;g<o.length;g++){let y=o[g].trim();if(y.startsWith("element vertex")){let m=y.match(/\d+/);m&&(a=parseInt(m[0]))}else if(y.startsWith("property")){let m=y.match(/(\w+)\s+(\w+)\s+(\w+)/);if(m){let p=m[2],v=m[3];c[p]={compressionMethod:v,index:u},u++}}else if(y.startsWith("element chunks")){let m=y.match(/\d+/);m&&(s=parseInt(m[0]))}else if(y.startsWith("element chunkSize")){let m=y.match(/\d+/);m&&(l=parseInt(m[0]))}else if(y.startsWith("element typeChunks")){let m=y.match(/(\w+)\s+(\w+)\s+(\w+)/);m&&(d=m[3])}else if(y==="end_header")break}let h=n.indexOf("end_header")+10+1,f=new DataView(e,h);return{splatCount:a,chunkCount:s,chunkSize:l,typeChunks:d,vertexData:f,propertiesDesc:c}}pruneSplats(e){let t=this.decodeBuffer().pruneSplats(e);return Iz.fromCompressedGaussianSplats(t)}static fromCompressedGaussianSplats(e){let t=e.xyz.length,r=e.xyz.nchunks,n=`gspline
element vertex ${t}
element chunks ${r}
element chunkSize ${e.chunkSize}
element typeChunks ${e.isDynamicChunks?"dynamic":"static"}
property xyz ${e.xyz.method}
property color ${e.color.method}
property opacity ${e.opacity.method}
property scaling ${e.scaling.method}
property quaternion ${e.quaternion.method}`;if(e.harmonics&&e.harmonics.length>0)for(let M=0;M<e.harmonics.length;M++)n=`${n}
property harmonics_${M} ${e.harmonics[M].method}`;n=`${n}
end_header
`;let i=new TextEncoder().encode(n),o=r*2*4,a=e.xyz.quantized.data.buffer.byteLength,s=e.xyz instanceof ci?o:0,l=e.color.quantized.data.buffer.byteLength,u=e.color instanceof ci?o:0,d=e.opacity.quantized.data.buffer.byteLength,c=e.opacity instanceof ci?o:0,h=e.scaling.quantized.data.buffer.byteLength,f=e.scaling instanceof ci?o:0,g=e.quaternion.quantized.data.buffer.byteLength,y=e.quaternion instanceof ci?o:0,m=e.variableChunkSize?Uint16Array.from(e.variableChunkSize):void 0,p=m?m.byteLength:0,v=i.byteLength+p+a+s+l+u+d+c+h+f+g+y,b=0,x=0;if(e.harmonics&&e.harmonics.length>0)for(let M=0;M<e.harmonics.length;M++)b+=e.harmonics[M].quantized.data.buffer.byteLength,x+=e.harmonics[M]instanceof ci?o:0;b=0,x=0,v+=b+x;let _=new Uint8Array(v),A=0;if(_.set(i,A),A+=i.byteLength,p>0&&(_.set(new Uint8Array(m.buffer),A),A+=p),e.xyz instanceof ci&&(_.set(new Uint8Array(e.xyz.minmaxMatrix.data.buffer),A),A+=o),_.set(new Uint8Array(e.xyz.quantized.data.buffer),A),A+=a,e.color instanceof ci&&(_.set(new Uint8Array(e.color.minmaxMatrix.data.buffer),A),A+=o),_.set(new Uint8Array(e.color.quantized.data.buffer),A),A+=l,e.opacity instanceof ci&&(_.set(new Uint8Array(e.opacity.minmaxMatrix.data.buffer),A),A+=o),_.set(new Uint8Array(e.opacity.quantized.data.buffer),A),A+=d,e.scaling instanceof ci&&(_.set(new Uint8Array(e.scaling.minmaxMatrix.data.buffer),A),A+=o),_.set(new Uint8Array(e.scaling.quantized.data.buffer),A),A+=h,e.quaternion instanceof ci&&(_.set(new Uint8Array(e.quaternion.minmaxMatrix.data.buffer),A),A+=o),_.set(new Uint8Array(e.quaternion.quantized.data.buffer),A),A+=g,b>0&&e.harmonics&&e.harmonics.length>0)for(let M=0;M<e.harmonics.length;M++){let T=e.harmonics[M];T instanceof ci&&(_.set(new Uint8Array(T.minmaxMatrix.data.buffer),A),A+=o),_.set(new Uint8Array(T.quantized.data.buffer),A),A+=T.quantized.data.byteLength}return new Iz(_.buffer)}},PWe="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",fp=class{};Da(fp,"DepthMapRange",65536),Da(fp,"MemoryPageSize",65536),Da(fp,"BytesPerFloat",4),Da(fp,"BytesPerInt",4);function DWe(e){let t,r,n,i,o,a,s,l,u,d,c,h,f,g,y,m;function p(D){let I=new Float64Array(d,a,16);for(let L=0;L<16;L++)I[L]=D[L];let k;if(n>1){t.exports.sortIndexes(i,o,u,a,s,l,h.DepthMapRange,n);let L=new Uint32Array(n);k=L.buffer,L.set(new Uint32Array(d,l,n))}else if(n===1){let L=new Uint32Array(n);L[0]=new Uint32Array(d,i,r)[0],k=L.buffer}else k=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:k},[k])}function v(D,I,k){let L=new Float32Array(d,o,r*3);n=0;let U=new Uint32Array(d,i,r);for(let W=0;W<k.length-1;W++){let G=I[W],z=D[W].elements,V=G.filter(H=>H.enabled&&H.mode==="Include").map(H=>H.type==="Box"?A(H):C(H)),j=G.filter(H=>H.enabled&&H.mode==="Exclude").map(H=>H.type==="Box"?A(H):C(H));for(let H=k[W];H<k[W+1];H++){let Y=f[H*3],Q=f[H*3+1],$=f[H*3+2];if((V.length===0||x(Y,Q,$,V))&&(j.length===0||!x(Y,Q,$,j))){let ne=1/(z[3]*Y+z[7]*Q+z[11]*$+z[15]);L[n*3]=(z[0]*Y+z[4]*Q+z[8]*$+z[12])*ne,L[n*3+1]=(z[1]*Y+z[5]*Q+z[9]*$+z[13])*ne,L[n*3+2]=(z[2]*Y+z[6]*Q+z[10]*$+z[14])*ne,U[n]=H,n++}}}}function b(D,I){let k=[],L=I.filter(G=>G.enabled&&G.mode==="Include").map(G=>G.type==="Box"?A(G):C(G)),U=I.filter(G=>G.enabled&&G.mode==="Exclude").map(G=>G.type==="Box"?A(G):C(G)),W=D.length;for(let G=0;G<W;G+=3){let z=D[G],V=D[G+1],j=D[G+2];(L.length===0||x(z,V,j,L))&&(U.length===0||!x(z,V,j,U))||k.push(G/3)}return console.log(k),k}function x(D,I,k,L,U){return L[U==="Intersect"?"every":"some"](W=>{let G=_(D,I,k,W.invRotationMatrix,W.cropCenter);return Array.isArray(W)?T(G.x,G.y,G.z,W):E(G.x,G.y,G.z,W)})}function _(D,I,k,L,U){let W=D-U[0],G=I-U[1],z=k-U[2],V=1/(L[3]*W+L[7]*G+L[11]*z+L[15]);return{x:(L[0]*W+L[4]*G+L[8]*z+L[12])*V+U[0],y:(L[1]*W+L[5]*G+L[9]*z+L[13])*V+U[1],z:(L[2]*W+L[6]*G+L[10]*z+L[14])*V+U[2]}}function A(D){let I=D.cropSize[0]/2,k=D.cropSize[1]/2,L=D.cropSize[2]/2,U=[D.cropCenter[0]-I,D.cropCenter[1]-k,D.cropCenter[2]-L,D.cropCenter[0]+I,D.cropCenter[1]+k,D.cropCenter[2]+L],W=M(D.cropRotation);return Object.assign(U,{invRotationMatrix:W,cropCenter:D.cropCenter})}function M(D){let I=[],k=D[0]*Math.PI/180,L=D[1]*Math.PI/180,U=D[2]*Math.PI/180,W=Math.cos(k),G=Math.sin(k),z=Math.cos(L),V=Math.sin(L),j=Math.cos(U),H=Math.sin(U),Y=W*j,Q=W*H,$=G*j,ne=G*H;return I[0]=z*j,I[1]=-z*H,I[2]=V,I[4]=Q+$*V,I[5]=Y-ne*V,I[6]=-G*z,I[8]=ne-Y*V,I[9]=$+Q*V,I[10]=W*z,I[12]=0,I[13]=0,I[14]=0,I[3]=0,I[7]=0,I[11]=0,I[15]=1,I}function T(D,I,k,L){return D>=L[0]&&D<=L[3]&&I>=L[1]&&I<=L[4]&&k>=L[2]&&k<=L[5]}function C(D){let I=2/D.cropSize[0],k=2/D.cropSize[1],L=2/D.cropSize[2],U=M(D.cropRotation);return{invRadiusX:I,invRadiusY:k,invRadiusZ:L,cropCenter:D.cropCenter,invRotationMatrix:U}}function E(D,I,k,L){let U=(D-L.cropCenter[0])*L.invRadiusX,W=(I-L.cropCenter[1])*L.invRadiusY,G=(k-L.cropCenter[2])*L.invRadiusZ;return U*U+W*W+G*G<=1}e.onmessage=D=>{if(D.data.getCroppedIndexes){let I=new Uint32Array(b(new Float32Array(D.data.positions),D.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:I},[I])}else if(D.data.positions)c=D.data.positions,f=new Float32Array(c),y=D.data.meshMatrixWorlds,m=D.data.cropsArray,g=D.data.meshIndexIntervals,v(y,m,g),e.postMessage({sortSetupComplete:!0});else if(D.data.sort||D.data.newMatrixWorlds||D.data.newCropsArray)(D.data.newMatrixWorlds||D.data.newCropsArray)&&(m=D.data.newCropsArray||m,y=D.data.newMatrixWorlds||y,v(y,m,g)),p(D.data.sort.view,D.data.sort.cameraPosition);else if(D.data.init){h=D.data.init.Constants,r=D.data.init.splatCount;let I=h.BytesPerInt,k=h.BytesPerFloat*3,L=new Uint8Array(D.data.init.sorterWasmBytes),U=I+k,W=r*U,G=r*h.BytesPerInt*2+h.DepthMapRange*h.BytesPerInt*2,z=h.MemoryPageSize*32,V=W+G+z,j=Math.floor(V/h.MemoryPageSize)+1,H={module:{},env:{memory:new WebAssembly.Memory({initial:j*2,maximum:j*3,shared:!0})}};WebAssembly.compile(L).then(Y=>WebAssembly.instantiate(Y,H)).then(Y=>{t=Y,i=0,o=r*I,a=o+r*k,u=a+16*h.BytesPerFloat*2,s=u+r*h.BytesPerInt,l=s+h.DepthMapRange*h.BytesPerInt,d=H.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function OWe(e){let t=new Worker(URL.createObjectURL(new Blob(["(",DWe.toString(),")(self)"],{type:"application/javascript"}))),r=atob(PWe),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return t.postMessage({init:{sorterWasmBytes:n.buffer,splatCount:e,Constants:{BytesPerFloat:fp.BytesPerFloat,BytesPerInt:fp.BytesPerInt,DepthMapRange:fp.DepthMapRange,MemoryPageSize:fp.MemoryPageSize}}}),t}var yN=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(r){return e[0]=r,t[0]}}(),RWe=function(e,t,r,n){return e+(t<<8)+(r<<16)+(n<<24)},BP=new Ae,T2=class extends Fa{constructor(e,t,r,n,i=!1,o=1,a,s){super(r,n),this.splatCount=t,this.meshIndexIntervals=a,this.meshMatrixWorlds=s,this.splatBuffers=e,this.geometry=r,this.material=n,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=i,this.devicePixelRatio=o,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,r=!1,n=1,i,o){let a=T2.buildGeomtery(t),s=T2.buildMaterial(i);return new T2(e,t,a,s,r,n,i,o)}static buildMaterial(e){let t=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,r=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,n={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new Ae},viewport:{type:"v2",value:new Ae},basisViewport:{type:"v2",value:new Ae},debugColor:{type:"v3",value:new tr},covariancesTextureSize:{type:"v2",value:new Ae(1024,1024)},centersColorsTextureSize:{type:"v2",value:new Ae(1024,1024)},orthoZoom:{type:"f",value:-1}};return new An({uniforms:n,vertexShader:t,fragmentShader:r,transparent:!0,alphaTest:1,blending:Jg,depthTest:!0,depthWrite:!1,side:ys})}static buildGeomtery(e){let t=new Jt;t.setIndex([0,1,2,0,2,3]);let r=new Float32Array(4*3),n=new fr(r,3);t.setAttribute("position",n),n.setXYZ(0,-1,-1,0),n.setXYZ(1,-1,1,0),n.setXYZ(2,1,1,0),n.setXYZ(3,1,-1,0),n.needsUpdate=!0;let i=new $ne().copy(t),o=new Uint32Array(e),a=new Nne(o,1,!1);return a.setUsage(hTe),i.setAttribute("splatIndex",a),i.instanceCount=e,i}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(n=>n.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,t=0,r=0;for(let n of this.splatBuffers){let i=n.nsplats;this.colors.subarray(e,e+i*4).set(n.colorsA),e+=i*4,this.centers.subarray(t,t+i*3).set(n.decoded.xyz.denormDequant().data),t+=i*3,this.covariances.subarray(r,r+i*6).set(new Float32Array(n.precomputedCovarianceBufferData)),r+=i*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new Ae(4096,1024);for(;t.x*t.y*2<e*6;)t.y*=2;let r=new Ae(4096,1024);for(;r.x*r.y*4<e*4;)r.y*=2;let n,i;if(this.halfPrecisionCovariancesOnGPU){i=new Uint16Array(t.x*t.y*2);for(let d=0;d<this.covariances.length;d++)i[d]=kRe.toHalfFloat(this.covariances[d]);n=new ap(i,t.x,t.y,SD,g0)}else i=new Float32Array(t.x*t.y*2),i.set(this.covariances),n=new ap(i,t.x,t.y,SD,ka);n.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=n,this.material.uniforms.covariancesTextureSize.value.copy(t);let o=new Uint32Array(r.x*r.y*4);for(let d=0;d<e;d++){let c=d*4,h=d*3,f=d*4;o[f]=RWe(this.colors[c],this.colors[c+1],this.colors[c+2],this.colors[c+3]),o[f+1]=yN(this.centers[h]),o[f+2]=yN(this.centers[h+1]),o[f+3]=yN(this.centers[h+2])}let a=new ap(o,r.x,r.y,mne,hh);a.internalFormat="RGBA32UI",a.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=a,this.material.uniforms.centersColorsTextureSize.value.copy(r);let s=256*4,l=new Float32Array(256*16);for(let d=0;d<this.meshMatrixWorlds.length;d++)l.set(this.meshMatrixWorlds[d].elements,d*16);let u=new ap(l,s,1,Ys,ka);u.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=u,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:i,texture:n,size:t},centerColors:{data:o,texture:a,size:r},meshMatrixWorlds:{data:l,texture:u}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,r,n){this.splatCount>0&&(BP.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(BP),this.material.uniforms.basisViewport.value.set(2/BP.x,2/BP.y),this.material.uniforms.focal.value.set(t,r),this.material.uniforms.orthoZoom.value=n,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose())}},IWe=class{constructor(e={}){Da(this,"updateSplatMeshUniforms",function(){let t=new Ae;return function(){this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(this.renderer.getSize(t),this.cameraFocalLengthX=this.camera.projectionMatrix.elements[0]*this.devicePixelRatio*t.x*.45,this.cameraFocalLengthY=this.camera.projectionMatrix.elements[5]*this.devicePixelRatio*t.y*.45,this.splatMesh.updateUniforms(t,this.cameraFocalLengthX,this.cameraFocalLengthY,this.camera.isPerspectiveCamera?-1:this.camera.zoom*this.devicePixelRatio))}}()),Da(this,"updateView",function(){let t=new ft,r=[],n=new X(0,0,-1),i=new X(0,0,-1),o=new X,a=new X;return function(s=!1){let l=this.updateMatrixWorldsInWorkerIfNeeded(),u=this.cropsChanged();if(!s){i.set(0,0,-1).applyQuaternion(this.camera.quaternion);let c=!1,h=!1;if(i.dot(n)<=.95&&(c=!0),a.copy(this.camera.position).sub(o).length()>=1&&(h=!0),!c&&!h&&!l&&!u)return}o.copy(this.camera.position),n.copy(i),t.copy(this.camera.matrixWorld).invert(),t.premultiply(this.camera.perspCamera.projectionMatrix),r[0]=this.camera.position.x,r[1]=this.camera.position.y,r[2]=this.camera.position.z;let d={sort:{view:t.elements,cameraPosition:r,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...l?{newMatrixWorlds:this.meshMatrixWorlds}:{},...u?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=d:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(d))}}()),this.scene=e.scene,this.currentPage=null,this.renderer=e.renderer,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.splatRenderingInitialized=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null}get camera(){return this.scene.activeCamera}reloadSplats(){this.splatRenderingInitialized=!1;let e=this.loadSplat();this.renderer.pipeline.opaquePass.splatViewer=e?this:null}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new X().fromArray(e.position)),e.orientation&&(e.orientation=new xr().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseEntity(o=>{if(o.data.type==="Splat"){let a=o.visible;o.traverseAncestors(s=>{a&&(a=s.visible)}),a&&t.push(o)}}),this.splatMesh&&this.splatMesh.dispose(),t.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(o=>o.matrixWorld),this.meshMatrixWorldsOld=t.map(o=>o.matrixWorld.clone()),this.cropsArray=t.map(o=>o.data.crops.map(a=>a.data));let r=t.map(o=>new Iz(new Uint8Array(o.data.buffer).buffer)),n=0,i=[0];for(let o of r)n+=o.getSplatCount(),i.push(n);return this.setupSplatMesh(r,n,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,i,this.meshMatrixWorlds),this.setupSortWorker(n),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,t*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((t,r)=>t.equals(this.meshMatrixWorldsOld[r]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,r)=>{var n;t.data.crops.forEach((i,o)=>{this.cropsArray[r][o]===void 0?(e=!0,this.cropsArray[r][o]=i.data):Object.entries(i.data).forEach(([a,s])=>{var l;Array.isArray(s)&&s.some((u,d)=>u!==this.cropsArray[r][o][a][d])?(e=!0,this.cropsArray[r][o][a]=s):s!==((l=this.cropsArray[r][o])==null?void 0:l[a])&&(e=!0,this.cropsArray[r][o][a]=s)})}),t.data.crops.length!==((n=this.cropsArray[r])==null?void 0:n.length)&&(this.cropsArray[r].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,r=new X,n=new xr,i=!1,o=1,a,s){this.splatMesh=T2.buildMesh(e,t,i,o,a,s),this.splatMesh.position.copy(r),this.splatMesh.quaternion.copy(n),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=10,this.updateSplatMeshUniforms(),this.splatRenderCount=t}setupSortWorker(e){this.sortWorker=OWe(e),this.sortWorker.onmessage=t=>{var r;t.data.sortDone?(this.sortRunning=!1,(r=this.splatMesh)==null||r.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.updateView(!0,!0),this.splatRenderingInitialized=!0)}}update(){this.splatRenderingInitialized!==!1&&(this.updateSplatMeshUniforms(),this.updateView())}getSplatMesh(){return this.splatMesh}},Lz=new PM;Lz.wireframe=!0;var GY=new X,Wj=class extends Cp{constructor(e,t){super(),this.data=e,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new wWe,this.errorPage=new Op("fdasfa",{...Vx.defaultData,name:""}),this.invisibleObjects=new ix("jflkdsafjasdifjaslk",{...$5.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=vWe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=gWe(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),r=this.entityIdentityToEntity[t];r&&(e.uuid=r.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof Op&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],n=t;for(;n!==this;){let i=n;n=n.parent;let o=n.children.indexOf(i);r.splice(0,0,o)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let n=this.getWithSortKey(r.id);n!==void 0&&t.push(n)}return t.sort((r,n)=>lze(r.sortKey,n.sortKey)),t.map(r=>r.entity)}nonExistOrDescendantOf(e,t){let r=this.find(e);if(r===void 0)return!0;for(;r;){if(r.uuid===t)return!0;r=r.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===M1)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var r;if(e.path.length===0&&e.type===7){let n=e.parent===null?this:this.find(e.parent);if(n===void 0)throw new Error("unexpected");let i=this.createObject(e.id,e.data,e.children,n,e.localIndex,t);i.updateVisible(),i.resetBBoxNeedsUpdate(),Eu(i)&&Uc(i.parent)&&(i.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markToExpandCloner(i),this.markPenumbraSizeDirty(),i.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let n=this.find(e.id);if(n===void 0)throw new Error("unexpected");this.markToExpandCloner(n),n.resetBBoxNeedsUpdate(),this.unregisterObject(n);let i=n.parent;this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markPenumbraSizeDirty(),n.parent.remove(n),Uc(n.parent)&&(n.parent.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Eu(n)&&(n.freeBooleanPointer(),i instanceof Wx&&i.invalidateDownstreamBooleanData().recomputeBoolean()),n instanceof jj&&n.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),this.pathConstraints.removeDependencies(n.uuid),n.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let n=this.find(e.id);if(n===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(n);let i=n.parent;this.markNeedsRecomputeInstancesForAncessors(i),(r=n.cloner)==null||r.resetOnMove(),this.markToExpandCloner(n);let o=e.parent===null?this:this.find(e.parent);if(o===void 0)throw new Error("unexpected");o.add(n),this.markNeedsRecomputeInstancesForAncessors(o),this.markToExpandCloner(n),n.invalidateClonerTransform(n),n.updateVisible(),n.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let a=e.localIndex;o.children.splice(a,0,o.children.pop()),Eu(n)&&(n.invalidateUpstreamBooleanData(),Uc(n.parent)?n.parent.invalidateDownstreamBooleanData().recomputeBoolean():i instanceof Wx&&i.invalidateDownstreamBooleanData().recomputeBoolean()),n.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let r of this.children)r instanceof Op&&(r.visible=r.uuid===e,r.visible&&(this.activePage=r,this.activePage.onActive(this)));this.activePage!==((t=this.splatViewer)==null?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,r,n){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:o}=t.props;t={...t,props:o},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let i=this.find(e);if(i)try{mWe(i,t,r,{scene:this,shared:n}),i instanceof Ua&&i.updateGeometryGroupsIfNeeded()}catch(o){console.error(o)}}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let r=Object.entries(t.data.lib.components).map((n,i)=>({data:n[1].asset.data,children:n[1].asset.children,id:n[0],fi:i}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(r,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(n=>{Uc(n)&&n.recomputeBoolean(),n instanceof sa&&n.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){jr.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{jr.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,r,n,i,o,a){if(e){let s=n.find(e);s&&s!==n&&i.forInstancesRec(l=>{l.data=IA(l.data,u=>{let d=u.events.data(a.id),c=l.goUp(o);if(c){let h=[...zie(c.identity),e].join("-"),f=this.entityIdentityToEntity[h];if(f){let g=f.uuid,y=La.zoom(d,t);y[r]=g}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,r,n,i,o){e.forEach(a=>{a.data.type==="Transition"?this.relativeizeInner(a.data.object,[...t,a.id],"object",r,n,i,o):a.data.type==="Animation"&&this.relativeizeInner(a.data.object,[...t,a.id],"object",r,n,i,o)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof ox&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,r)=>{t.data.events.forEach(n=>{if(n.data.type==="GameControl"){let i=!1;if(t.forInstancesRec(o=>{o.data=IA(o.data,a=>{o.isInstanceRoot||(a.events.delete(n.id),i=!0)}).data}),i===!1)for(let o of iO.list)this.rewriteActions(n.data.gameActions[o],["gameActions",o],e,t,r,n)}else n.data.type==="Conditional"?(n.data.condition.type==="Distance"?(this.relativeizeInner(n.data.condition.fromObject,["condition"],"fromObject",e,t,r,n),this.relativeizeInner(n.data.condition.toObject,["condition"],"toObject",e,t,r,n)):n.data.condition.type==="State"?this.relativeizeInner(n.data.condition.object,["condition"],"object",e,t,r,n):n.data.condition.type==="Comparison"&&(n.data.condition.lOperand.type==="Property"&&this.relativeizeInner(n.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,r,n),n.data.condition.rOperand.type==="Property"&&this.relativeizeInner(n.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,r,n)),this.rewriteActions(n.data.inActions,["inActions"],e,t,r,n),this.rewriteActions(n.data.outActions,["outActions"],e,t,r,n)):"actions"in n.data&&this.rewriteActions(n.data.actions,["actions"],e,t,r,n)})}),!0})}expandInstances(e,t,r){let n=new Set;this.traverseEntity(i=>{if(i instanceof ox&&i.isInstanceRoot)return i.expandInstanceChildren({scene:this,shared:e,pendingDeletes:n}),t||i.resetBBoxNeedsUpdate(),r&&i.traverseEntity(o=>{r.addClip(o)}),!0});for(let i of n)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),Hj(i)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(r=>{r instanceof ox&&r.isInstanceRoot&&(r.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let r=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[r]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[r]),t.dispose()})}clearScene(){for(let e of this.children)jr.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let r=[],n=i=>{for(let o of i.children){let a=o.cloner;if(jr.is(o)&&!o.raycastLock&&(o.visible||a!=null&&a.object.data.visible))if(t===!0&&o.isInstanceRoot){let s=[];if(e.intersectObject(o,!0,s),s.length){let l=s[0];l.object=o,l.point.applyMatrix4(l.object.matrixWorld);let u=o.matrixWorld.clone().invert();l.point.applyMatrix4(u),r.push(l)}}else(Eu(o)||Az(o)&&this.enableHelpers&&o.objectHelper.visible)&&(e.intersectObject(o,!1,r),Oz(o,e,r)),n(o)}};return n(this),r}raycastWithClones(e){let t=[],r=n=>{for(let i of n.children){let o=i.cloner;jr.is(i)&&(i.visible||o!=null&&o.object.data.visible)&&((Eu(i)||Az(i)&&this.enableHelpers&&i.objectHelper.visible)&&(e.intersectObject(i,!1,t),Oz(i,e,t,!0)),r(i))}};return r(this),t}forEachEntity(e){for(let t of this.children)jr.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)jr.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)jr.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(r=>{if(r instanceof Ua&&r.data.type==="Mesh"&&r.data.geometry.type==="TextGeometry"&&r.data.geometry.font===e){let n=r.geometry,i=r.data.geometry;n.updateFont(e,t).then(()=>{n.update(i);let o=r.invalidateDownstreamBooleanData();Uc(o)&&o.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)zA.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)jr.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,r){let n=0;for(let i of e)this.createObject(i.id,i.data,i.children,t,n,r),n+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,r,n,i,o){var l;let a={scene:this,shared:o},s=Gj(e,t,a);return s&&(this.entityByUuid[e]=s,n.add(s),n.children.splice(i,0,n.children.pop()),r.length>0&&(s.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,s,o)),s.updateState(t,a),s instanceof Ua&&s.updateGeometryGroupsIfNeeded(),s.updateVisible(),s.cloner&&this.toExpandCloner.add(s),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&s.traverseEntity(u=>{let d=u.dataPatched;if(u instanceof Ua&&d.bones&&d.boneInverses){let c=d.bones.map(g=>this.find(g)),h=d.boneInverses.map(g=>new ft().fromArray(g)),f=new NV(c,h);u.bind(f,u.bindMatrix)}else u.matrixAutoUpdate=!0}),s}getCenter(e){let t=[];for(let n=0,i=e.length;n<i;++n){let{id:o,recursive:a}=e[n],s=this.find(o),l=a?s.recursiveBBox:s.singleBBox;t.push(...l.vertices)}let r=new Oi;return r.setFromPoints(t),r.getCenter(GY),GY}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var n;if(e===null){t.identity();return}let r=(n=this.find(e))==null?void 0:n.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Es)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof Hp&&e(t.material[r]);else t.material instanceof Hp&&e(t.material)})}updateViewPlaneSize(e,t,r=!1){this.traverseConcreteEntity(n=>{n instanceof sa&&n.setViewplaneSize(e,t,r)})}initializeSplatViewer(e){this.splatViewer=new IWe({scene:this,renderer:e}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.reloadSplats()}},E2=(e,t)=>{let r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},LWe=(e,t)=>{let r=t.x-e.x,n=t.y-e.y;return NWe(Math.atan2(n,r))},BWe=(e,t,r)=>{let n={x:0,y:0};return r=Bz(r),n.x=e.x-t*Math.cos(r),n.y=e.y-t*Math.sin(r),n},Bz=e=>e*(Math.PI/180),NWe=e=>e*(180/Math.PI),kWe=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,bN=new Map,WY=e=>{bN.has(e)&&clearTimeout(bN.get(e)),bN.set(e,setTimeout(e,100))},mO=(e,t,r)=>{let n=t.split(/[ ,]+/g),i;for(let o=0;o<n.length;o+=1)i=n[o],e.addEventListener?e.addEventListener(i,r,!1):e.attachEvent&&e.attachEvent(i,r)},qY=(e,t,r)=>{let n=t.split(/[ ,]+/g),i;for(let o=0;o<n.length;o+=1)i=n[o],e.removeEventListener?e.removeEventListener(i,r):e.detachEvent&&e.detachEvent(i,r)},$ae=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),XY=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},Nz=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},qj=(e,t,r)=>{let n=ese(e);for(let i in n)if(n.hasOwnProperty(i))if(typeof t=="string")n[i]=t+" "+r;else{let o="";for(let a=0,s=t.length;a<s;a+=1)o+=t[a]+" "+r+", ";n[i]=o.slice(0,-2)}return n},FWe=(e,t)=>{let r=ese(e);for(let n in r)r.hasOwnProperty(n)&&(r[n]=t);return r},ese=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},xN=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},zWe=(e,t)=>{let r={};for(let n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)?r[n]=t[n]:e.hasOwnProperty(n)&&(r[n]=e[n]);return r},kz=(e,t)=>{if(e.length)for(let r=0,n=e.length;r<n;r+=1)t(e[r]);else t(e)},UWe=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&(tse="ontouchstart"in window,rse=!!window.PointerEvent,nse=!!window.MSPointerEvent);var tse,rse,nse,R_={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Eb,VA={};rse?Eb=R_.pointer:nse?Eb=R_.MSPointer:tse?(Eb=R_.touch,VA=R_.mouse):Eb=R_.mouse;function N0(){}N0.prototype.on=function(e,t){var r=this,n=e.split(/[ ,]+/g),i;r._handlers_=r._handlers_||{};for(var o=0;o<n.length;o+=1)i=n[o],r._handlers_[i]=r._handlers_[i]||[],r._handlers_[i].push(t);return r};N0.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};N0.prototype.trigger=function(e,t){var r=this,n=e.split(/[ ,]+/g),i;r._handlers_=r._handlers_||{};for(var o=0;o<n.length;o+=1)i=n[o],r._handlers_[i]&&r._handlers_[i].length&&r._handlers_[i].forEach(function(a){a.call(r,{type:i,target:r},t)})};N0.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=zWe(t.options,e))};N0.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},mO(e,Eb[t],r._domHandlers_[t]),VA[t]&&mO(e,VA[t],r._domHandlers_[t]),r};N0.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},qY(e,Eb[t],r._domHandlers_[t]),VA[t]&&qY(e,VA[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var Xj=N0;function co(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=co.id,co.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}co.prototype=new Xj;co.constructor=co;co.id=0;co.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};co.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=FWe("borderRadius","50%"),r=qj("transition","opacity",e),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},xN(n.el,r),this.options.shape==="circle"&&xN(n.back,t),xN(n.front,t),this.applyStyles(n),this};co.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};co.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};co.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};co.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};co.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};co.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,n={};n.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,n.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,n)}return t};co.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var n=r.options.fadeTime+"ms",i={};i.front=qj("transition",["top","left"],n);var o={front:{}};o.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(i),r.applyStyles(o),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};co.prototype.restCallback=function(){var e=this,t={};t.front=qj("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};co.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};co.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,n=Math.PI/2,i,o,a;if(t>r&&t<r*3&&!e.lockX?i="up":t>-r&&t<=r&&!e.lockY?i="left":t>-r*3&&t<=-r&&!e.lockX?i="down":e.lockY||(i="right"),e.lockY||(t>-n&&t<n?o="left":o="right"),e.lockX||(t>0?a="up":a="down"),e.force>this.options.threshold){var s={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(s[l]=this.direction[l]);var u={};this.direction={x:o,y:a,angle:i},e.direction=this.direction;for(l in s)s[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+o,e),u.y||this.trigger("plain:"+a,e),u.angle||this.trigger("dir dir:"+i,e)}else this.resetDirection();return e};var VWe=co;function Ri(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=Ri.id,Ri.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let n=getComputedStyle(r.options.zone.parentElement);return n&&n.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}Ri.prototype=new Xj;Ri.constructor=Ri;Ri.id=0;Ri.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var n=0,i=t.length;n<i;n+=1)if(t[n].identifier===r)return t[n];return!1}};Ri.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};Ri.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};Ri.prototype.createNipple=function(e,t){var r=this,n=r.manager.scroll,i={},o=r.options,a={x:r.parentIsFlex?n.x:n.x+r.box.left,y:r.parentIsFlex?n.y:n.y+r.box.top};if(e.x&&e.y)i={x:e.x-a.x,y:e.y-a.y};else if(e.top||e.right||e.bottom||e.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=e.top,s.style.right=e.right,s.style.bottom=e.bottom,s.style.left=e.left,s.style.position="absolute",o.zone.appendChild(s);var l=s.getBoundingClientRect();o.zone.removeChild(s),i=e,e={x:l.left+n.x,y:l.top+n.y}}var u=new VWe(r,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:t,position:e,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(Nz(u.ui.el,i),Nz(u.ui.front,u.frontPosition)),r.nipples.push(u),r.trigger("added "+u.identifier+":added",u),r.manager.trigger("added "+u.identifier+":added",u),r.bindNipple(u),u};Ri.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};Ri.prototype.bindNipple=function(e){var t=this,r,n=function(i,o){r=i.type+" "+o.id+":"+i.type,t.trigger(r,o)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",n),e.on("dir:up dir:right dir:down dir:left",n),e.on("plain:up plain:right plain:down plain:left",n)};Ri.prototype.pressureFn=function(e,t,r){var n=this,i=0;clearInterval(n.pressureIntervals[r]),n.pressureIntervals[r]=setInterval((function(){var o=e.force||e.pressure||e.webkitForce||0;o!==i&&(t.trigger("pressure",o),n.trigger("pressure "+t.identifier+":pressure",o),i=o)}).bind(n),100)};Ri.prototype.onstart=function(e){var t=this,r=t.options,n=e;e=$ae(e),t.updateBox();var i=function(o){t.actives.length<r.maxNumberOfNipples?t.processOnStart(o):n.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(a){if(Object.values(n.touches).findIndex(function(l){return l.identifier===a})<0){var s=[e[0]];s.identifier=a,t.processOnEnd(s)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(o))};return kz(e,i),t.manager.bindDocument(),!1};Ri.prototype.processOnStart=function(e){var t=this,r=t.options,n,i=t.manager.getIdentifier(e),o=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},s=t.getOrCreate(i,a);s.identifier!==i&&t.manager.removeIdentifier(s.identifier),s.identifier=i;var l=function(d){d.trigger("start",d),t.trigger("start "+d.id+":start",d),d.show(),o>0&&t.pressureFn(e,d,d.identifier),t.processOnMove(e)};if((n=t.idles.indexOf(s))>=0&&t.idles.splice(n,1),t.actives.push(s),t.ids.push(s.identifier),r.mode!=="semi")l(s);else{var u=E2(a,s.position);if(u<=r.catchDistance)l(s);else{s.destroy(),t.processOnStart(e);return}}return s};Ri.prototype.getOrCreate=function(e,t){var r=this,n=r.options,i;return/(semi|static)/.test(n.mode)?(i=r.idles[0],i?(r.idles.splice(0,1),i):n.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(i=r.createNipple(t,e),i)};Ri.prototype.processOnMove=function(e){var t=this,r=t.options,n=t.manager.getIdentifier(e),i=t.nipples.get(n),o=t.manager.scroll;if(!kWe(e)){this.processOnEnd(e);return}if(!i){console.error("Found zombie joystick with ID "+n),t.manager.removeIdentifier(n);return}if(r.dynamicPage){var a=i.el.getBoundingClientRect();i.position={x:o.x+a.left,y:o.y+a.top}}i.identifier=n;var s=i.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=i.position.y),r.lockY&&(l.x=i.position.x);var u=E2(l,i.position),d=LWe(l,i.position),c=Bz(d),h=u/s,f={distance:u,position:l},g,y;if(i.options.shape==="circle"?(g=Math.min(u,s),y=BWe(i.position,g,d)):(y=UWe(l,i.position,s),g=E2(y,i.position)),r.follow){if(u>s){let b=l.x-y.x,x=l.y-y.y;i.position.x+=b,i.position.y+=x,i.el.style.top=i.position.y-(t.box.top+o.y)+"px",i.el.style.left=i.position.x-(t.box.left+o.x)+"px",u=E2(l,i.position)}}else l=y,u=g;var m=l.x-i.position.x,p=l.y-i.position.y;i.frontPosition={x:m,y:p},r.dataOnly||Nz(i.ui.front,i.frontPosition);var v={identifier:i.identifier,position:l,force:h,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:c,degree:d},vector:{x:m/s,y:-p/s},raw:f,instance:i,lockX:r.lockX,lockY:r.lockY};v=i.computeDirection(v),v.angle={radian:Bz(180-d),degree:180-d},i.trigger("move",v),t.trigger("move "+i.id+":move",v)};Ri.prototype.processOnEnd=function(e){var t=this,r=t.options,n=t.manager.getIdentifier(e),i=t.nipples.get(n),o=t.manager.removeIdentifier(i.identifier);!i||(r.dataOnly||i.hide(function(){r.mode==="dynamic"&&(i.trigger("removed",i),t.trigger("removed "+i.id+":removed",i),t.manager.trigger("removed "+i.id+":removed",i),i.destroy())}),clearInterval(t.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),t.trigger("end "+i.id+":end",i),t.ids.indexOf(i.identifier)>=0&&t.ids.splice(t.ids.indexOf(i.identifier),1),t.actives.indexOf(i)>=0&&t.actives.splice(t.actives.indexOf(i),1),/(semi|static)/.test(r.mode)?t.idles.push(i):t.nipples.indexOf(i)>=0&&t.nipples.splice(t.nipples.indexOf(i),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[o.id]=o.identifier))};Ri.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};Ri.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var jWe=Ri;function Eo(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=XY(),t.config(e),t.prepareCollections();var r=function(){var i;t.collections.forEach(function(o){o.forEach(function(a){i=a.el.getBoundingClientRect(),a.position={x:t.scroll.x+i.left,y:t.scroll.y+i.top}})})};if(typeof window>"u")return t.collections;mO(window,"resize",function(){WY(r)});var n=function(){t.scroll=XY()};return mO(window,"scroll",function(){WY(n)}),t.collections}Eo.prototype=new Xj;Eo.constructor=Eo;Eo.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(n){return r=n.get(t),!r}),r}};Eo.prototype.create=function(e){return this.createCollection(e)};Eo.prototype.createCollection=function(e){var t=this,r=new jWe(t,e);return t.bindCollection(r),t.collections.push(r),r};Eo.prototype.bindCollection=function(e){var t=this,r,n=function(i,o){r=i.type+" "+o.id+":"+i.type,t.trigger(r,o)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",n),e.on("dir:up dir:right dir:down dir:left",n),e.on("plain:up plain:right plain:down plain:left",n)};Eo.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};Eo.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Eo.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Eo.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};Eo.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};Eo.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};Eo.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};Eo.prototype.onAny=function(e,t){var r=this,n,i="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=$ae(t);var o=function(s,l,u){u.ids.indexOf(l)>=0&&(u[i](s),s._found_=!0)},a=function(s){n=r.getIdentifier(s),kz(r.collections,o.bind(null,s,n)),s._found_||r.removeIdentifier(n)};return kz(t,a),!1};Eo.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};Eo.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var HWe=Eo,YY=new HWe,GWe={create:function(e){return YY.create(e)},factory:YY},ise=new Map,RS=new Map,zg=class{constructor(e,t,r,n){this.data=t;let{audio:i,volume:o,delay:a,loop:s}=t;if(!i)throw new Error("Missing property");let l=typeof i=="string"?n.getAudio(i).src:i.data;this.audioPlayer=new oS({src:l,volume:o,delay:a,loop:s}),RS.has(r.uuid)?RS.get(r.uuid).push(this):RS.set(r.uuid,[this]),ise.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},Fz=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=ise.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=RS.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...RS.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},ose=class{constructor(e,t,r,n,i){if(this.data=t,this.shared=n,this.condition=i,t.interaction==="play")this.interaction=new zg(e,t,r,n);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new Fz(t);else throw new Error("Missing property")}dispatchBasic(){if(qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof zg?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof zg?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof zg&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},WWe="text/plain",qWe="us-ascii",KY=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),XWe=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=t?"":o;let s=!1;a[a.length-1]==="base64"&&(a.pop(),s=!0);let l=(a.shift()||"").toLowerCase(),u=[...a.map(d=>{let[c,h=""]=d.split("=").map(f=>f.trim());return c==="charset"&&(h=h.toLowerCase(),h===qWe)?"":`${c}${h?`=${h}`:""}`}).filter(Boolean)];return s&&u.push("base64"),(u.length>0||l&&l!==WWe)&&u.unshift(l),`data:${u.join(";")},${s?i.trim():i}${o?`#${o}`:""}`};function YWe(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return XWe(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),t.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){let o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,s="";for(;;){let u=o.exec(n.pathname);if(!u)break;let d=u[0],c=u.index,h=n.pathname.slice(a,c);s+=h.replace(/\/{2,}/g,"/"),s+=d,a=c+d.length}let l=n.pathname.slice(a,n.pathname.length);s+=l.replace(/\/{2,}/g,"/"),n.pathname=s}if(n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let o=n.pathname.split("/"),a=o[o.length-1];KY(a,t.removeDirectoryIndex)&&(o=o.slice(0,-1),n.pathname=o.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let o of[...n.searchParams.keys()])KY(o,t.removeQueryParameters)&&n.searchParams.delete(o);if(t.removeQueryParameters===!0&&(n.search=""),t.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let i=e;return e=n.toString(),!t.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var KWe=class{constructor({url:e,context:t},r,n,i){if(this.controlsManager=r,this.shared=n,this.condition=i,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:YWe(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=t??"tab"}dispatch(){var e;if(qi(this.shared,this.condition)===!1)return!1;uj?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp(cr[0]),uze())}},ase=class{constructor(e,t,r,n,i){this.data=e,this.page=t,this.controlsManager=r,this.shared=n,this.condition=i,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=o=>{var u,d;this.timeoutIdQueue.shift();let a=this.page.scene.find(o);if(a===void 0)return;let s=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=s?(u=a.dataPatched.physics)==null?void 0:u.fusedBody:!0;if(a.cloner){for(let c of a.cloner.children)l?(c.playModeVisible=!1,c.rigidBody&&((d=a.dataPatched.physics)==null?void 0:d.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),s.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.bvhGeometry&&(c.bvhGeometry=void 0)):this.clone===void 0||this.clone===c?(c.playModeVisible=!1,c.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),s.removeRigidBody(c.rigidBody),c.rigidBody=void 0)):c.playModeVisible===void 0&&(c.playModeVisible=!0);(l||this.clone===void 0||this.clone===!1)&&(a.visible=!1,a.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(a.rigidBody.collider(0).handle),s.removeRigidBody(a.rigidBody),a.rigidBody=void 0),a.bvhGeometry&&(a.bvhGeometry=void 0))}else a.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(a.rigidBody.collider(0).handle),s.removeRigidBody(a.rigidBody),a.rigidBody=void 0),a.bvhGeometry&&(a.bvhGeometry=void 0),a.visible=!1;s===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.rigidBody!==void 0),a.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(qi(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(qi(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},sse=class{constructor(e,t,r,n,i){this.data=e,this.page=t,this.shared=r,this.eventManager=n,this.condition=i,this.shared=r}dispatch(){if(qi(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),nH(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},lse={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},Yj={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},JWe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],gO={CSS:{},springs:{}};function Bu(e,t,r){return Math.min(Math.max(e,t),r)}function IS(e,t){return e.indexOf(t)>-1}function wN(e,t){return e.apply(null,t)}var hr={arr:function(e){return Array.isArray(e)},obj:function(e){return IS(Object.prototype.toString.call(e),"Object")},pth:function(e){return hr.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||hr.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return hr.hex(e)||hr.rgb(e)||hr.hsl(e)},key:function(e){return!lse.hasOwnProperty(e)&&!Yj.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function use(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function cse(e,t){var r=use(e),n=Bu(hr.und(r[0])?1:r[0],.1,100),i=Bu(hr.und(r[1])?100:r[1],.1,100),o=Bu(hr.und(r[2])?10:r[2],.1,100),a=Bu(hr.und(r[3])?0:r[3],.1,100),s=Math.sqrt(i/n),l=o/(2*Math.sqrt(i*n)),u=l<1?s*Math.sqrt(1-l*l):0,d=1,c=l<1?(l*s+-a)/u:-a+s;function h(g){var y=t?t*g/1e3:g;return l<1?y=Math.exp(-y*l*s)*(d*Math.cos(u*y)+c*Math.sin(u*y)):y=(d+c*y)*Math.exp(-y*s),g===0||g===1?g:1-y}function f(){var g=gO.springs[e];if(g)return g;for(var y=1/6,m=0,p=0;;)if(m+=y,h(m)===1){if(p++,p>=16)break}else p=0;var v=m*y*1e3;return gO.springs[e]=v,v}return t?h:f}function QWe(e){return e===void 0&&(e=10),function(t){return Math.ceil(Bu(t,1e-6,1)*e)*(1/e)}}var ZWe=function(){var e=11,t=1/(e-1);function r(d,c){return 1-3*c+3*d}function n(d,c){return 3*c-6*d}function i(d){return 3*d}function o(d,c,h){return((r(c,h)*d+n(c,h))*d+i(c))*d}function a(d,c,h){return 3*r(c,h)*d*d+2*n(c,h)*d+i(c)}function s(d,c,h,f,g){var y,m,p=0;do m=c+(h-c)/2,y=o(m,f,g)-d,y>0?h=m:c=m;while(Math.abs(y)>1e-7&&++p<10);return m}function l(d,c,h,f){for(var g=0;g<4;++g){var y=a(c,h,f);if(y===0)return c;var m=o(c,h,f)-d;c-=m/y}return c}function u(d,c,h,f){if(!(0<=d&&d<=1&&0<=h&&h<=1))return;var g=new Float32Array(e);if(d!==c||h!==f)for(var y=0;y<e;++y)g[y]=o(y*t,d,h);function m(p){for(var v=0,b=1,x=e-1;b!==x&&g[b]<=p;++b)v+=t;--b;var _=(p-g[b])/(g[b+1]-g[b]),A=v+_*t,M=a(A,d,h);return M>=.001?l(p,A,d,h):M===0?A:s(p,v,v+t,d,h)}return function(p){return d===c&&h===f||p===0||p===1?p:o(m(p),c,f)}}return u}(),dse=function(){var e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var i,o=4;n<((i=Math.pow(2,--o))-1)/11;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((i*3-2)/22-n,2)}},Elastic:function(n,i){n===void 0&&(n=1),i===void 0&&(i=.5);var o=Bu(n,1,10),a=Bu(i,.1,2);return function(s){return s===0||s===1?s:-o*Math.pow(2,10*(s-1))*Math.sin((s-1-a/(Math.PI*2)*Math.asin(1/o))*(Math.PI*2)/a)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(n,i){t[n]=function(){return function(o){return Math.pow(o,i+2)}}}),Object.keys(t).forEach(function(n){var i=t[n];e["easeIn"+n]=i,e["easeOut"+n]=function(o,a){return function(s){return 1-i(o,a)(1-s)}},e["easeInOut"+n]=function(o,a){return function(s){return s<.5?i(o,a)(s*2)/2:1-i(o,a)(s*-2+2)/2}}}),e}();function Kj(e,t){if(hr.fnc(e))return e;var r=e.split("(")[0],n=dse[r],i=use(e);switch(r){case"spring":return cse(e,t);case"cubicBezier":return wN(ZWe,i);case"steps":return wN(QWe,i);default:return wN(n,i)}}function hse(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function cI(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<r;o++)if(o in e){var a=e[o];t.call(n,a,o,e)&&i.push(a)}return i}function dI(e){return e.reduce(function(t,r){return t.concat(hr.arr(r)?dI(r):r)},[])}function JY(e){return hr.arr(e)?e:(hr.str(e)&&(e=hse(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Jj(e,t){return e.some(function(r){return r===t})}function Qj(e){var t={};for(var r in e)t[r]=e[r];return t}function zz(e,t){var r=Qj(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function hI(e,t){var r=Qj(e);for(var n in t)r[n]=hr.und(e[n])?t[n]:e[n];return r}function $We(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function e8e(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(s,l,u,d){return l+l+u+u+d+d}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),i=parseInt(n[1],16),o=parseInt(n[2],16),a=parseInt(n[3],16);return"rgba("+i+","+o+","+a+",1)"}function t8e(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,n=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100,o=t[4]||1;function a(h,f,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?h+(f-h)*6*g:g<1/2?f:g<2/3?h+(f-h)*(2/3-g)*6:h}var s,l,u;if(n==0)s=l=u=i;else{var d=i<.5?i*(1+n):i+n-i*n,c=2*i-d;s=a(c,d,r+1/3),l=a(c,d,r),u=a(c,d,r-1/3)}return"rgba("+s*255+","+l*255+","+u*255+","+o+")"}function r8e(e){if(hr.rgb(e))return $We(e);if(hr.hex(e))return e8e(e);if(hr.hsl(e))return t8e(e)}function xh(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function n8e(e){if(IS(e,"translate")||e==="perspective")return"px";if(IS(e,"rotate")||IS(e,"skew"))return"deg"}function Uz(e,t){return hr.fnc(e)?e(t.target,t.id,t.total):e}function jc(e,t){return e.getAttribute(t)}function Zj(e,t,r){var n=xh(t);if(Jj([r,"deg","rad","turn"],n))return t;var i=gO.CSS[t+r];if(!hr.und(i))return i;var o=100,a=document.createElement(e.tagName),s=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;s.appendChild(a),a.style.position="absolute",a.style.width=o+r;var l=o/a.offsetWidth;s.removeChild(a);var u=l*parseFloat(t);return gO.CSS[t+r]=u,u}function fse(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return r?Zj(e,i,r):i}}function $j(e,t){if(hr.dom(e)&&!hr.inp(e)&&(jc(e,t)||hr.svg(e)&&e[t]))return"attribute";if(hr.dom(e)&&Jj(JWe,t))return"transform";if(hr.dom(e)&&t!=="transform"&&fse(e,t))return"css";if(e[t]!=null)return"object"}function pse(e){if(hr.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,n=new Map,i;i=r.exec(t);)n.set(i[1],i[2]);return n}}function i8e(e,t,r,n){var i=IS(t,"scale")?1:0+n8e(t),o=pse(e).get(t)||i;return r&&(r.transforms.list.set(t,o),r.transforms.last=t),n?Zj(e,o,n):o}function eH(e,t,r,n){switch($j(e,t)){case"transform":return i8e(e,t,n,r);case"css":return fse(e,t,r);case"attribute":return jc(e,t);default:return e[t]||0}}function tH(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=xh(e)||0,i=parseFloat(t),o=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return i+o+n;case"-":return i-o+n;case"*":return i*o+n}}function mse(e,t){if(hr.col(e))return r8e(e);if(/\s/g.test(e))return e;var r=xh(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function rH(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function o8e(e){return Math.PI*2*jc(e,"r")}function a8e(e){return jc(e,"width")*2+jc(e,"height")*2}function s8e(e){return rH({x:jc(e,"x1"),y:jc(e,"y1")},{x:jc(e,"x2"),y:jc(e,"y2")})}function gse(e){for(var t=e.points,r=0,n,i=0;i<t.numberOfItems;i++){var o=t.getItem(i);i>0&&(r+=rH(n,o)),n=o}return r}function l8e(e){var t=e.points;return gse(e)+rH(t.getItem(t.numberOfItems-1),t.getItem(0))}function vse(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return o8e(e);case"rect":return a8e(e);case"line":return s8e(e);case"polyline":return gse(e);case"polygon":return l8e(e)}}function u8e(e){var t=vse(e);return e.setAttribute("stroke-dasharray",t),t}function c8e(e){for(var t=e.parentNode;hr.svg(t)&&hr.svg(t.parentNode);)t=t.parentNode;return t}function yse(e,t){var r=t||{},n=r.el||c8e(e),i=n.getBoundingClientRect(),o=jc(n,"viewBox"),a=i.width,s=i.height,l=r.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:s/l[3]}}function d8e(e,t){var r=hr.str(e)?hse(e)[0]:e,n=t||100;return function(i){return{property:i,el:r,svg:yse(r),totalLength:vse(r)*(n/100)}}}function h8e(e,t){function r(s){s===void 0&&(s=0);var l=t+s>=1?t+s:0;return e.el.getPointAtLength(l)}var n=yse(e.el,e.svg),i=r(),o=r(-1),a=r(1);switch(e.property){case"x":return(i.x-n.x)*n.w;case"y":return(i.y-n.y)*n.h;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function QY(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=mse(hr.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:hr.str(e)||t?n.split(r):[]}}function bse(e){var t=e?dI(hr.arr(e)?e.map(JY):JY(e)):[];return cI(t,function(r,n,i){return i.indexOf(r)===n})}function xse(e){var t=bse(e);return t.map(function(r,n){return{target:r,id:n,total:t.length,transforms:{list:pse(r)}}})}function f8e(e,t){var r=Qj(t);if(/^spring/.test(r.easing)&&(r.duration=cse(r.easing)),hr.arr(e)){var n=e.length,i=n===2&&!hr.obj(e[0]);i?e={value:e}:hr.fnc(t.duration)||(r.duration=t.duration/n)}var o=hr.arr(e)?e:[e];return o.map(function(a,s){var l=hr.obj(a)&&!hr.pth(a)?a:{value:a};return hr.und(l.delay)&&(l.delay=s?0:t.delay),hr.und(l.endDelay)&&(l.endDelay=s===o.length-1?t.endDelay:0),l}).map(function(a){return hI(a,r)})}function p8e(e){for(var t=cI(dI(e.map(function(o){return Object.keys(o)})),function(o){return hr.key(o)}).reduce(function(o,a){return o.indexOf(a)<0&&o.push(a),o},[]),r={},n=function(o){var a=t[o];r[a]=e.map(function(s){var l={};for(var u in s)hr.key(u)?u==a&&(l.value=s[u]):l[u]=s[u];return l})},i=0;i<t.length;i++)n(i);return r}function m8e(e,t){var r=[],n=t.keyframes;n&&(t=hI(p8e(n),t));for(var i in t)hr.key(i)&&r.push({name:i,tweens:f8e(t[i],e)});return r}function g8e(e,t){var r={};for(var n in e){var i=Uz(e[n],t);hr.arr(i)&&(i=i.map(function(o){return Uz(o,t)}),i.length===1&&(i=i[0])),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function v8e(e,t){var r;return e.tweens.map(function(n){var i=g8e(n,t),o=i.value,a=hr.arr(o)?o[1]:o,s=xh(a),l=eH(t.target,e.name,s,t),u=r?r.to.original:l,d=hr.arr(o)?o[0]:u,c=xh(d)||xh(l),h=s||c;return hr.und(a)&&(a=u),i.from=QY(d,h),i.to=QY(tH(a,d),h),i.start=r?r.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=Kj(i.easing,i.duration),i.isPath=hr.pth(o),i.isColor=hr.col(i.from.original),i.isColor&&(i.round=1),r=i,i})}var wse={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,i){if(n.list.set(t,r),t===n.last||i){var o="";n.list.forEach(function(a,s){o+=s+"("+a+") "}),e.style.transform=o}}};function _se(e,t){var r=xse(e);r.forEach(function(n){for(var i in t){var o=Uz(t[i],n),a=n.target,s=xh(o),l=eH(a,i,s,n),u=s||xh(l),d=tH(mse(o,u),l),c=$j(a,i);wse[c](a,i,d,n.transforms,!0)}})}function y8e(e,t){var r=$j(e.target,t.name);if(r){var n=v8e(t,e),i=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:i.end,delay:n[0].delay,endDelay:i.endDelay}}}function b8e(e,t){return cI(dI(e.map(function(r){return t.map(function(n){return y8e(r,n)})})),function(r){return!hr.und(r)})}function Sse(e,t){var r=e.length,n=function(o){return o.timelineOffset?o.timelineOffset:0},i={};return i.duration=r?Math.max.apply(Math,e.map(function(o){let a=o.startOnceDelay??0,s=o.pingPongDelayCorrection??0,l=o.pingPongEndDelayCorrection??0;return n(o)+a+s+l+o.duration*(o.loop??1)})):t.duration,i.delay=r?Math.min.apply(Math,e.map(function(o){let a=o.startOnceDelay??0,s=o.pingPongDelayCorrection??0;return n(o)+a+s+o.delay})):t.delay,i.endDelay=r?i.duration-Math.max.apply(Math,e.map(function(o){let a=o.startOnceDelay??0,s=o.pingPongDelayCorrection??0,l=o.pingPongEndDelayCorrection??0;return n(o)+a+s+o.duration*(o.loop??1)-o.endDelay-l})):t.endDelay,i}var ZY=0;function x8e(e){var t=zz(lse,e),r=zz(Yj,e),n=m8e(r,e),i=xse(e.targets),o=b8e(i,n),a=Sse(o,r),s=ZY;return ZY++,hI(t,{id:s,children:[],animatables:i,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var Kl=[],$Y=[],P2,w8e=function(){function e(){P2=requestAnimationFrame(t)}function t(r){var n=Kl.length;if(n){for(var i=0;i<n;){var o=Kl[i];o.paused?(Kl.splice(i,1),n-=1):(o.tick(r),i++)}e()}else P2=cancelAnimationFrame(P2)}return e}();function _8e(e){document.hidden?(Kl.forEach(function(t){return t.pause(e.timeStamp)}),$Y=Kl.slice(0),Di.running=Kl=[]):$Y.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",_8e);function Di(e){e===void 0&&(e={});var t=0,r=0,n=0,i,o,a=0,s=null;function l(A){var M=window.Promise&&new Promise(function(T){return s=T});return A.finished=M,M}var u=x8e(e);l(u);function d(){var A=u.direction;A!=="alternate"&&(u.direction=A!=="normal"?"normal":"reverse"),u.reversed=!u.reversed,o.forEach(function(M){(M.loop===1||M.loop%2===0)&&(M.reversed=u.reversed)})}function c(){u.direction="normal",u.reversed=!1,o.forEach(function(A){return A.reversed=!1})}function h(A){return u.reversed?u.duration-A:A}function f(){t=0,r=h(u.currentTime)*(1/Di.speed)}function g(A,M,T=!1){M&&(u.reversed?M.seek(M.duration*M.loop-(A-M.timelineOffset-M.pingPongDelayCorrection),T):M.seek(A-M.timelineOffset-M.startOnceDelay-M.pingPongDelayCorrection,T))}function y(A,M=!1){if(u.reversed)for(var T=a;T--;)g(A,o[T],M);else for(var C=0;C<a;C++)g(A,o[C],M)}function m(A){var ce,ae,ie,le,se,re,ye,be,_e,Se;var M=0,T=u.animations,C=T.length;for(u.direction!=="alternate"&&((ce=u.parent)==null?void 0:ce.direction)==="alternate"?((ae=u.parent)==null?void 0:ae.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1&&((ie=u.parent)!=null&&ie.reversed&&u.direction==="alternate"?A=u.duration-u.delay+u.endDelay-A:A=u.duration+u.delay-u.endDelay-A):x(!1,(le=u.parent)==null?void 0:le.rewind,u.rewind,(se=u.parent)==null?void 0:se.reversePlayback,u.reversePlayback)&&((re=u.parent)!=null&&re.reversed&&u.direction==="alternate"?A=u.duration-u.delay+u.endDelay-A:A=u.duration+u.delay-u.endDelay-A);M<C;){var E=T[M],D=E.animatable,I=E.tweens,k=I.length-1,L=I[k];k&&(L=cI(I,function(Re){return A<Re.end})[0]||L);let Fe;(ye=u.parent)!=null&&ye.reversed&&u.direction==="alternate"?Fe=Bu(A-L.start-L.endDelay,0,L.duration)/L.duration:Fe=Bu(A-L.start-L.delay,0,L.duration)/L.duration;for(var U=isNaN(Fe)?1:L.easing(Fe),W=L.to.strings,G=L.round,z=[],V=L.to.numbers.length,j=void 0,H=0;H<V;H++){var Y=void 0;let Re,Le;u.direction!=="alternate"?((be=u.parent)==null?void 0:be.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1?(Re=L.to.numbers[H],Le=L.from.numbers[H]||0):(Le=L.to.numbers[H],Re=L.from.numbers[H]||0):x(!0,(_e=u.parent)==null?void 0:_e.rewind,u.rewind,(Se=u.parent)==null?void 0:Se.reversePlayback,u.reversePlayback)?(Re=L.to.numbers[H],Le=L.from.numbers[H]||0):(Le=L.to.numbers[H],Re=L.from.numbers[H]||0),L.isPath?Y=h8e(L.value,U*Le):Y=Re+U*(Le-Re),G&&(L.isColor&&H>2||(Y=Math.round(Y*G)/G)),z.push(Y)}var Q=W.length;if(!Q)j=z[0];else{j=W[0];for(var $=0;$<Q;$++){W[$];var ne=W[$+1],Z=z[$];isNaN(Z)||(ne?j+=Z+ne:j+=Z+" ")}}wse[E.type](D.target,E.property,j,D.transforms),E.currentValue=j,M++}}function p(A){u[A]&&!u.passThrough&&u[A](u)}function v(){u.remaining&&u.remaining!==!0&&u.remaining--}let b={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function x(A,M,T,C,E){return b[A<<4|M<<3|T<<2|C<<1|E]}function _(A,M=!1){var I;var T=u.duration;let C=u.delay,E=T-u.endDelay;(I=u.parent)!=null&&I.reversed&&u.direction==="alternate"&&(C=u.endDelay,E=T-u.delay);var D=h(A);if(u.progress=Bu(D/T*100,0,100),M||(u.reversePlayback=D<u.currentTime),a&&y(D,M),!u.began&&u.currentTime>=0&&(u.began=!0,p("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,p("loopBegin")),(u.reversed||D>=0)&&D<=C&&u.currentTime!==0&&(m(0),p("change")),(D>=E&&u.currentTime!==T+u.pingPongDelayCorrection||!T)&&(m(T),p("change")),D>C&&D<E?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,p("changeBegin")),m(D),p("change")):u.changeBegan?(u.changeCompleted=!0,u.changeBegan=!1,p("change"),a&&p("timelineChangeComplete")):u.began&&D>E&&p("changeComplete"),u.currentTime=Bu(D,0,T+u.pingPongDelayCorrection),u.began&&p("update"),A>=T)if(v(),!u.remaining)u.paused=!0,u.completed||(u.completed=!0,p("loopComplete"),p("complete"),!u.passThrough&&"Promise"in window&&(s(),l(u)));else{a?t+=u.duration/Di.speed:t+=u.duration;for(let k of o)k.setStartTime(0),k.remaining=k.loop;p("loopComplete"),u.loopBegan=!1,u.direction==="alternate"?d():a&&c()}}return u.reset=function(){var A=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed=A==="reverse",u.remaining=u.loop,o=u.children,a=o.length;for(var M=a;M--;)u.children[M].reset();m(u.reversed?u.duration:0)},u.setStartTime=function(A){t=A},u.set=function(A,M){return _se(A,M),u},u.tick=function(A){n=A,t||(t=n),_((n+(r-t))*Di.speed)},u.seek=function(A,M=!1){_(A-t,M)},u.pause=function(A){u.paused=!0,a&&(i=A??performance.now())},u.play=function(A){!u.paused||(u.completed&&u.reset(),u.paused=!1,Kl.push(u),a&&i!==void 0&&(t+=(A??performance.now())-i),P2||w8e())},u.reverse=function(){d(),u.completed=!u.reversed,f()},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function eK(e,t){for(var r=t.length;r--;)Jj(e,t[r].animatable.target)&&t.splice(r,1)}function S8e(e){for(var t=bse(e),r=Kl.length;r--;){var n=Kl[r],i=n.animations,o=n.children;eK(t,i);for(var a=o.length;a--;){var s=o[a],l=s.animations;eK(t,l),!l.length&&!s.children.length&&o.splice(a,1)}!i.length&&!o.length&&n.pause()}}function A8e(e,t){t===void 0&&(t={});var r=t.direction||"normal",n=t.easing?Kj(t.easing):null,i=t.grid,o=t.axis,a=t.from||0,s=a==="first",l=a==="center",u=a==="last",d=hr.arr(e),c=parseFloat(d?e[0]:e),h=d?parseFloat(e[1]):0,f=xh(d?e[1]:e)||0,g=t.start||0+(d?c:0),y=[],m=0;return function(p,v,b){if(s&&(a=0),l&&(a=(b-1)/2),u&&(a=b-1),!y.length){for(var x=0;x<b;x++){if(!i)y.push(Math.abs(a-x));else{var _=l?(i[0]-1)/2:a%i[0],A=l?(i[1]-1)/2:Math.floor(a/i[0]),M=x%i[0],T=Math.floor(x/i[0]),C=_-M,E=A-T,D=Math.sqrt(C*C+E*E);o==="x"&&(D=-C),o==="y"&&(D=-E),y.push(D)}m=Math.max.apply(Math,y)}n&&(y=y.map(function(k){return n(k/m)*m})),r==="reverse"&&(y=y.map(function(k){return o?k<0?k*-1:-k:Math.abs(m-k)}))}var I=d?(h-c)/m:c;return g+I*(Math.round(y[v]*100)/100)+f}}function M8e(e){e===void 0&&(e={});var t=Di(e);return t.duration=0,t.add=function(r,n){var i=Kl.indexOf(t),o=t.children;i>-1&&Kl.splice(i,1);function a(h){h.passThrough=!0}for(var s=0;s<o.length;s++)a(o[s]);var l=hI(r,zz(Yj,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.timelineOffset=hr.und(n)?u:tH(n,u),a(t);var d=Di(l);a(d),o.push(d),d.parent=t;var c=Sse(o,e);return t.delay=c.delay,t.endDelay=c.endDelay,t.duration=c.duration,d.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Di.version="3.2.0";Di.speed=1;Di.running=Kl;Di.remove=S8e;Di.get=eH;Di.set=_se;Di.convertPx=Zj;Di.path=d8e;Di.setDashoffset=u8e;Di.stagger=A8e;Di.timeline=M8e;Di.easing=Kj;Di.penner=dse;Di.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var Ase=Di,tK=new X,rK=new X,nK=new xr;function C8e(e,t,r,n){if(n===0)return r.copy(e);if(n===1)return r.copy(t);let i=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(i>=1)return r.copy(e);let o=1-i*i;if(o<=Number.EPSILON){let d=1-n;return r.w=d*e.w+n*t.w,r.x=d*e.x+n*t.x,r.y=d*e.y+n*t.y,r.z=d*e.z+n*t.z,r.normalize(),r}let a=Math.sqrt(o),s=Math.atan2(a,i),l=Math.sin((1-n)*s)/a,u=Math.sin(n*s)/a;return r.w=e.w*l+t.w*u,r.x=e.x*l+t.x*u,r.y=e.y*l+t.y*u,r.z=e.z*l+t.z*u,r}function w0(e,t,r,n,i,o){let a=r[e]?r[e]:void 0,s=n[e];if(s==null)return;let l=a!=null?typeof a=="string"?Number(i.getVariable(a)??0):a:t[e],u=typeof s=="string"?Number(i.getVariable(s)??0):s;if(l!==u)return{update:d=>{let c=Ht.lerp(l,u,d);o?t[e]=Math.trunc(c):t[e]=c},start:()=>{t[e]=l},end:()=>{t[e]=u}}}function Mse(e,t,r,n,i,o){let a=r[e]?r[e]:void 0,s=n[e];if(!s)return;let l=t[e],u=[...a??l].map(c=>typeof c=="string"?Number(i.getVariable(c)??0):c),d=[...s].map(c=>typeof c=="string"?Number(i.getVariable(c)??0):c);if(!(u.length!==d.length||Fie(u,d)))return{update:c=>{u.forEach((h,f)=>{let g=Ht.lerp(h,d[f],c);t[e][f]=o?Math.trunc(g):g})},start:()=>{Object.assign(t[e],u)},end:()=>{Object.assign(t[e],d)}}}function vO(e,t,r){return t.forEach((n,i)=>{e.setComponent(i,typeof n=="string"?Number(r.getVariable(n)??0):n)}),e}function iK(e,t,r,n,i){let o=r[e]?r[e]:void 0,a=n[e];if(!a)return;let s=t[e],l=o?vO(new X,o,i):s.clone(),u=vO(new X,a,i);if(!l.equals(u))return{update:d=>{s.lerpVectors(l,u,d)},start:()=>{s.copy(l)},end:()=>{s.copy(u)}}}function T8e(e,t,r,n){let i=r[e]?r[e]:void 0,o=n[e];if(!o)return;let a=t[e],s=i?new ft().fromArray(i):a.clone(),l=new X,u=new xr,d=new X;s.decompose(l,u,d);let c=new ft().fromArray(o),h=new X,f=new xr,g=new X;if(c.decompose(h,f,g),!s.equals(c))return{update:y=>{nK.slerpQuaternions(u,f,y),tK.lerpVectors(l,h,y),rK.lerpVectors(d,g,y),a.compose(tK,nK,rK)},start:()=>{a.compose(l,u,d)},end:()=>{a.compose(h,f,g)}}}function E8e(e,t,r,n,i){let o=r[e]?r[e]:void 0,a=n[e];if(!a)return;let s=t[e],l=o?typeof o=="string"?i.getColor(o).clone():new tr().setRGB(o.r,o.g,o.b):s.clone(),u=typeof a=="string"?i.getColor(a).clone():new tr().setRGB(a.r,a.g,a.b);if(l.equals(u))return;let d=s.clone();return t[e]=d,{update:c=>{d.lerpColors(l,u,c)},start:()=>{d.copy(l)},end:()=>{d.copy(u)}}}function rm(e,t,r,n,i){if(typeof t[e]=="number")return w0(e,t,r??{},n,i);if(Array.isArray(t[e]))return Mse(e,t,r??{},n,i)}function P8e(e,t,r,n){var s,l,u,d;let i=[],o=e.cameraType==="OrthographicCamera"?(s=t.orthographic)==null?void 0:s.zoom:(l=t.perspective)==null?void 0:l.zoom,a=e.cameraType==="OrthographicCamera"?(u=r.orthographic)==null?void 0:u.zoom:(d=r.perspective)==null?void 0:d.zoom;if(a!==void 0){let c=o??e.zoom,h=a;c!==h&&i.push({update:f=>{e.zoom=Ht.lerp(c,h,f),e.updateProjectionMatrix()},start:()=>{e.zoom=c,e.updateProjectionMatrix()},end:()=>{e.zoom=h,e.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let c=w0("targetOffset",e,t,r,n);c&&i.push(c)}return i}function D8e(e,t,r,n){if(r.scaleBaked===void 0)return;let i=(t.scaleBaked??e.data.geometry.scaleBaked).map(s=>typeof s=="string"?Number(n.getVariable(s)??0):s),o=r.scaleBaked.map(s=>typeof s=="string"?Number(n.getVariable(s)??0):s);if(e0.isEqual(i,o))return;let a=[];return a.push({update:s=>{e.updateGeometryInteractions({scaleBaked:[Ht.lerp(i[0],o[0],s),Ht.lerp(i[1],o[1],s),Ht.lerp(i[2],o[2],s)]},n),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:i},n),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:o},n),e.invalidateDownstreamBooleanData()}}),a}function O8e(e,t,r,n){if(!r.extrusion)return;let i=e.extrusion,o=t.extrusion??{},a=r.extrusion,s=[];return xoe.forEach(l=>{let u=rm(l,i,o,a,n);u&&s.push(u)}),s}function R8e(e,t,r,n){let i=[];if(!("geometry"in r))return i;let o=e.geometry.userData.parameters,a="geometry"in t?t.geometry:{},s=r.geometry;if(e instanceof UA){let l=D8e(e,a,s,n);l&&i.push(...l)}else{let l={};if(Object.assign(l,yh(o,qq)),qq.forEach(u=>{let d=rm(u,l,a,s,n);d&&i.push(d)}),e instanceof jj){Object.assign(l,{extrusion:{...o.extrusion}});let u=O8e(l,a,s,n);u&&i.push(...u)}i.length&&i.push({update:u=>{e.updateGeometryInteractions(l,n),e.updateGeometryGroupsIfNeeded()},start:u=>{e.updateGeometryInteractions(l,n),e.updateGeometryGroupsIfNeeded()},end:u=>{e.updateGeometryInteractions(l,n),e.updateGeometryGroupsIfNeeded()}})}return i}function I8e(e,t,r,n){let i=[];if(r.intensity!==void 0){let o=w0("intensity",e,t,r,n);o&&i.push(o)}if(r.color!==void 0){let o=E8e("color",e,t,r,n);o&&i.push(o)}return i}function L8e(e,t,r,n){let i=[];if(Array.isArray(e.material)){if(!("materials"in r&&r.materials))return i;let o="materials"in t&&t.materials?t.materials:[],a=r.materials;e.material.forEach((s,l)=>{if(!a[l])return;let u=o[l]??{},d=a[l];typeof u=="string"||typeof d=="string"||i.push(...oK(s,u,d,n))})}else{if(!("material"in r&&r.material))return i;let o="material"in t&&t.material?t.material:{},a=r.material;if(typeof o=="string"||typeof a=="string")return i;i.push(...oK(e.material,o,a,n))}return i}function oK(e,t,r,n){var a;let i=[],o=Tb(r,n)||!!t.layers&&Tb(t,n);i.push(H8e(e,o));for(let s of e.layers){let l=(a=t.layers)==null?void 0:a.data(s.uuid),u=r.layers.data(s.uuid);if(!u||s.type!=="light"&&(!(s.visible??!0)||!(u.visible??!0)))continue;let d=s.getNames().filter(c=>!voe.some(h=>c.includes(h)));for(let c of d)try{let h=s.getValue(c),f;if(c==="colors")f=V8e(s,l,u,c);else if(Array.isArray(h))c==="steps"&&(f=U8e(s,l,u,c));else if(typeof h=="number")f=B8e(s,l,u,c,n);else{if(typeof h=="boolean")continue;h instanceof Ae?f=N8e(s,l,u,c):h instanceof X?f=k8e(s,l,u,c,n):h instanceof Cs?f=z8e(s,l,u,c,n):h instanceof tr?f=F8e(s,l,u,c,n):"isTexture"in h&&(f=j8e(s,l,u,c))}f&&(Array.isArray(f)?i.push(...f):i.push(f))}catch(h){console.error(`lerpMaterial: unexpected material layer for ${c}`,h)}}return i}function B8e(e,t,r,n,i){if(!e.hasValue(n)||!(n in r))return;let o=t?t[n]:e.getValue(n),a=r[n],s=typeof o=="string"?Number(i.getVariable(o)??0):o,l=typeof a=="string"?Number(i.getVariable(a)??0):a;if(s!==l)return{update:u=>{e.setValue(n,Ht.lerp(s,l,u))},start:()=>{e.setValue(n,s)},end:()=>{e.setValue(n,l)}}}function N8e(e,t,r,n){if(!e.hasValue(n)||!(n in r))return;let i=e.getValue(n),o=t?new Ae().fromArray(t[n]):i.clone(),a=new Ae().fromArray(r[n]);if(!o.equals(a))return{update:s=>{i.lerpVectors(o,a,s)},start:()=>{i.copy(o)},end:()=>{i.copy(a)}}}function k8e(e,t,r,n,i){if(!e.hasValue(n)||!(n in r))return;let o=e.getValue(n),a=t?t[n]:void 0,s=r[n],l=a?vO(new X,a,i):o.clone(),u=vO(new X,s,i);if(!l.equals(u))return{update:d=>{o.lerpVectors(l,u,d)},start:()=>{o.copy(l)},end:()=>{o.copy(u)}}}function F8e(e,t,r,n,i){if(!e.hasValue(n)||!(n in r))return;let o=t?t[n]:void 0,a=r[n],s=e.getValue(n),l=o?typeof o=="string"?i.getColor(o).clone():new tr().setRGB(o.r,o.g,o.b):s.clone(),u=typeof a=="string"?i.getColor(a).clone():new tr().setRGB(a.r,a.g,a.b);if(l.equals(u))return;let d=s.clone();return{update:c=>{e.getValue(n)!==d&&e.setValue(n,d),d.lerpColors(l,u,c)},start:()=>{d.copy(l)},end:()=>{d.copy(u)}}}function z8e(e,t,r,n,i){if(!e.hasValue(n)||!(n in r))return;let o=t?t[n]:void 0,a=r[n],s=e.getValue(n),l=o?typeof o=="string"?i.getColor(o).clone():new tr().setRGB(o.r,o.g,o.b):s.clone(),u=typeof a=="string"?i.getColor(a).clone():new Cs(a.r,a.g,a.b,a.a);if(l.equals(u))return;let d=s.clone();return{update:c=>{e.getValue(n)!==d&&e.setValue(n,d),d.lerpColors(l,u,c)},start:()=>{d.copy(l)},end:()=>{d.copy(u)}}}function U8e(e,t,r,n="steps"){if(!e.hasValue(n)||!(n in r))return;let i=[],o=e.getValue(n),a=t?t[n]:o,s=r[n];for(let l=0;l<o.length;++l){let u=a[l],d=s[l];u!==d&&i.push({update:c=>{o[l]=Ht.lerp(u,d,c)},start:()=>{o[l]=u},end:()=>{o[l]=d}})}return i.length?i:void 0}function V8e(e,t,r,n="colors"){if(!e.hasValue(n)||!(n in r))return;let i=[],o=e.getValue(n),a=t?t[n]:o.map(l=>l.toArray()),s=r[n];for(let l=0;l<o.length;++l){let u=[...a[l]],d=[...s[l]];KD.isEqual(u,d)||i.push({update:c=>{o[l].fromArray(KD.lerp(u,d,c))},start:()=>{o[l].fromArray(u)},end:()=>{o[l].fromArray(d)}})}return i.length?i:void 0}function j8e(e,t,r,n="texture"){if(!e.hasValue(n)||!(n in r))return;let i=e.getNode("mat");if(!i)return;let o=t?t[n]:i,a=r[n],s=[...o.repeat],l=[...o.offset],u=[...a.repeat],d=[...a.offset];if(!Mb.isEqual(s,u)||!Mb.isEqual(l,d))return{update:c=>{i.repeat=Mb.lerp(s,u,c),i.offset=Mb.lerp(l,d,c),i.updateMatrix()},start:()=>{i.repeat=[...s],i.offset=[...l],i.updateMatrix()},end:()=>{i.repeat=[...u],i.offset=[...d],i.updateMatrix()}}}function H8e(e,t){return{update:()=>{e.transparent=t}}}var _N=new X,aK=new So;function G8e(e,t,r,n,i){var f,g,y,m,p,v;let o=[],a,s,l,u,d,c,h={slide:((f=t.pathSnapping)==null?void 0:f.slide)??((g=e.updatedPathSnapping)==null?void 0:g.slide)??((y=e.dataPatched.pathSnapping)==null?void 0:y.slide)??0,offset:((m=t.pathSnapping)==null?void 0:m.offset)??((p=e.updatedPathSnapping)==null?void 0:p.offset)??((v=e.dataPatched.pathSnapping)==null?void 0:v.offset)??0};if(d=w0("slide",h,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping,i),d&&o.push(d),c=w0("offset",h,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping,i),c&&o.push(c),!d&&!c&&(a=iK("position",e,t,r,i),a&&o.push(a),s=iK("scale",e,t,r,i),s&&o.push(s),l=W8e(e,t,r,n,i),l&&o.push(l),u=T8e("hiddenMatrix",e,t,r),u&&o.push(u)),a||s||l||u||d||c){let b=()=>{var x;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(x=e.parent)!=null&&x.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),Eu(e)&&Uc(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,h))};o.push({update:b,start:b,end:b})}return o}function W8e(e,t,r,n,i){var d;let o=t!=null&&t.rotation?t.rotation.map(c=>(typeof c=="string"?Number(i.getVariable(c)??0):c)*Ht.DEG2RAD):void 0,a=(d=r.rotation)==null?void 0:d.map(c=>(typeof c=="string"?Number(i.getVariable(c)??0):c)*Ht.DEG2RAD);if(!a)return;let s=o?new X().fromArray(o):new X().setFromEuler(e.rotation),l=new X().fromArray(a);if(s.equals(l))return;let u=_N.subVectors(l,s);if(n&&u.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new xr().setFromEuler(aK.setFromVector3(s)),h=new xr().setFromEuler(aK.setFromVector3(l));return{update:f=>{C8e(c,h,e.quaternion,f)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(l)}}}else return{update:c=>{_N.lerpVectors(s,l,c),e.rotation.setFromVector3(_N)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(l)}}}function q8e(e,t,r,n){let i=[];if(!("cloner"in r)||!e.cloner)return i;let o=e.cloner,a="cloner"in t?t.cloner:{},s=r.cloner;doe.forEach(f=>{let g;f==="count"?g=w0("count",o.parameters,a,s,n,!0):g=rm(f,o.parameters,a??{},s,n),g&&i.push(g)});let l=X8e(o,a,s,n);l!=null&&l.length&&i.push(...l);let u=Y8e(o,a,s,n);u!=null&&u.length&&i.push(...u);let d=K8e(o,a,s,n);d!=null&&d.length&&i.push(...d);let c=J8e(o,a,s,n);c!=null&&c.length&&i.push(...c);let h=Q8e(o,a,s,n);return h!=null&&h.length&&i.push(...h),i.length&&i.push({update:()=>{o.update()}}),i}function X8e(e,t,r,n){if(e.parameters.type!=="radial")return;let i=t.radial,o=r.radial;if(!o)return;let a=e.parameters.radial,s=[];return hoe.forEach(l=>{let u=rm(l,a,i??{},o,n);u&&s.push(u)}),s}function Y8e(e,t,r,n){if(e.parameters.type!=="linear")return;let i=t.linear,o=r.linear;if(!o)return;let a=[],s=e.parameters.linear;return foe.forEach(l=>{let u=rm(l,s,i??{},o,n);u&&a.push(u)}),a}function K8e(e,t,r,n){if(e.parameters.type!=="grid")return;let i=t.grid,o=r.grid;if(!o)return;let a=[],s=e.parameters.grid;return poe.forEach(l=>{let u;l==="count"?u=Mse(l,s,i??{},o,n,!0):u=rm(l,s,i??{},o,n),u&&a.push(u)}),a}function J8e(e,t,r,n){if(e.parameters.type!=="toObject")return;let i=t.toObject,o=r.toObject;if(!o)return;let a=[],s=e.parameters.toObject;return moe.forEach(l=>{let u;l==="count"?u=w0(l,s,i??{},o,n,!0):u=rm(l,s,i??{},o,n),u&&a.push(u)}),a}function Q8e(e,t,r,n){if(!e.parameters.randomness)return;let i=t.randomnessObject,o=r.randomnessObject;if(!o)return;let a=[],s=e.parameters.randomnessObject;return goe.forEach(l=>{let u=rm(l,s,i??{},o,n);u&&a.push(u)}),a}function sK(e,t,r,n,i){let o=[];return e.data.visible&&o.push(...G8e(e,t,r,i,n)),e.data.visible&&o.push(...q8e(e,t,r,n)),Eu(e)?(e instanceof Ua&&e.data.visible&&o.push(...R8e(e,t,r,n)),e.data.visible&&o.push(...L8e(e,t,r,n))):tGe(e)?e.data.visible&&o.push(...I8e(e,t,r,n)):eGe(e)&&o.push(...P8e(e,t,r,n)),o.length?{update:a=>{o.forEach(s=>s.update(a))},start:a=>{o.forEach(s=>{var l;return(l=s.start)==null?void 0:l.call(s,a)})},end:a=>{o.forEach(s=>{var l;return(l=s.end)==null?void 0:l.call(s,a)})}}:void 0}var lK=new X;function nH(e,t,r=!1){let n=[];e.traverseChildren(i=>{var l,u,d,c,h;if(r&&((l=i.rigidBody)==null||l.setTranslation(i.position0,!0),(u=i.rigidBody)==null||u.setRotation(i.rotation0,!0),(d=i.rigidBody)==null||d.setLinvel(lK,!0),(c=i.rigidBody)==null||c.setAngvel(lK,!0)),!jr.is(i))return;let o=i.uuid,a=i.data;if(delete i.states,i.uuid===M1)return;let s=!1;n.some(f=>{var g;return(g=e.scene.find(o))==null?void 0:g.isDescendantOf(f)})?s=!0:((h=a.physics)==null?void 0:h.fusedBody)===!0&&a.physics.rigidBody==="dynamic"&&n.push(o),i.data=a,i.currentState=null,i.reversibleToState=null,i.currentTransitionEvent=null;for(let f of a.states){let g={...f.data};e.data.globalPhysics.usePhysics===!0&&a.physics&&(a.physics.rigidBody==="dynamic"||s)&&(f.data.position!==void 0&&delete g.position,f.data.rotation!==void 0&&delete g.rotation,f.data.hiddenMatrix!==void 0&&delete g.hiddenMatrix),i.states||(i.states={}),i.states[f.id]=Ng.patch(a,g)}$8e(e.scene,i,null,t,a.events.find(f=>f.data.type==="Follow"||f.data.type==="LookAt")!==void 0),Z8e(e)})}function Z8e(e){e.traverseEntity(t=>{for(let r of t.data.events){let n=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":n.push(...r.data.actions);break;case"GameControl":for(let i of Object.values(r.data.gameActions))n.push(...i);break;case"DragDrop":n.push(...r.data.dragDropActions.drag,...r.data.dragDropActions.drop);break;case"Conditional":n.push(...r.data.inActions,...r.data.outActions);break}for(let i of n)if(i.data.type==="Create"&&i.data.hideBase==="Yes"){let o=e.scene.find(i.data.object);o&&(o.visible=!1)}}})}function $8e(e,t,r,n,i=!1){if(t instanceof Ua&&t.removeInteractionGeometry(),t.changeSelectedState(r,{scene:e,shared:n},i),t instanceof Ua&&t.updateGeometryGroupsIfNeeded(),t instanceof sa&&t.updateCameraState(t.dataPatched,{scene:e,shared:n}),t.cloner)for(let o of t.cloner.children)o.playModeVisible=void 0;t.updateVisible()}function Cse(e){let t;if(e.easing===5){let{control1:r,control2:n}=e;t=`cubicBezier(
			${r[0]}, ${r[1]}, ${n[0]}, ${n[1]}
		)`}else if(e.easing===6){let{mass:r,stiffness:n,damping:i,velocity:o}=e;t=`spring( ${r}, ${n}, ${i}, ${o} )`}else{let r;switch(e.easing){case 0:r=Yf.linear;break;case 1:r=Yf.ease;break;case 2:r=Yf.easeIn;break;case 3:r=Yf.easeOut;break;case 4:r=Yf.easeInOut;break;default:r=Yf.linear}let[n,i,o,a]=r;t=`cubicBezier( ${n}, ${i}, ${o}, ${a} )`}return{duration:e.duration,easing:t}}function Vz(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var e9e={type:"beginState"},t9e={type:"completeState",isfromEntity:!1},uK=class{constructor(e,t,r,n,i,o){if(this.object=e,this.data=n,this.sharedAssets=i,this.allowSlerp=o,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let a=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"beginState",state:a}),this.object.traverseEntity(s=>{s!==this.object&&s instanceof sa&&s.dispatchEvent(e9e)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let a=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"completeState",state:a}),this.object.traverseEntity(s=>{s!==this.object&&s instanceof sa&&s.dispatchEvent(t9e)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=sK(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let a=D2(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!a)throw new Error("Missing property");this.from=a}else{let a=D2(this.object,t);if(!a)throw new Error("Missing property");this.from=a}if(r===void 0)throw new Error("Missing property");{let a=D2(this.object,r);if(!a)throw new Error("Missing property");this.to=a}this.useCurrentState=t===void 0||r===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...Vz(n),...Cse(n),change:this.onChange},this.callback=sK(this.object,t===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},Tse=class extends Vo{constructor(e,t,r,n){if(super(),this.data=e,this.page=t,this.shared=r,this.condition=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var o;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((o=this.timeline)==null||o.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let i=this.page.scene.find(e.object);if(!i)throw new Error("Missing property");if(!i.states)throw new Error("Missing property");if(this.object=i,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.timeline&&this.timeline.paused===!1}init(){this.initialCurrentState=D2(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:r=!1}={}){var n,i,o,a;try{let s=Vz(this.data.tweens[0].data);r&&typeof s.loop=="number"&&s.loop--,(n=this.timeline)==null||n.pause(),this.timeline=Ase.timeline({autoplay:!1,...s,...s.loop===!0||s.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(u=>u==null?void 0:u.changeBegan);if(t===!0&&(this.timelineNeedsRebuild=!0),e){let u=l===-1?0:l;for(let d=u;d<this.data.tweens.length-1;d++){let c=this.data.tweens[d],h=this.data.tweens[d+1],f;d===u&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(f=void 0,this.object instanceof sa&&(this.object.wasMovedByUser=!1)):f=c.data.state===void 0?this.currentState:c.data.state;let g=new uK(this.object,f,h.data.state===void 0?this.currentState:h.data.state,h.data,this.shared,this.data.allowSlerp??!1);l!==-1&&d===u&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[d]=g,this.timeline.add(g.params,this.timeline.duration+(d===u?s.delay:0))}this.timeline.duration+=s.endDelay}else{let u=l===-1?this.data.tweens.length-1:l+1;for(let d=u;d>0;d--){let c=this.data.tweens[d],h=this.data.tweens[d-1],f;d===u&&(this.object.wasMovedByUser===!0||((o=this.object.previousAction)==null?void 0:o.playing)===!0)?(f=void 0,this.object instanceof sa&&(this.object.wasMovedByUser=!1)):f=c.data.state===void 0?this.currentState:c.data.state;let g=new uK(this.object,f,h.data.state===void 0?this.currentState:h.data.state,c.data,this.shared,this.data.allowSlerp??!1);l!==-1&&d===u&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[d-1]=g,this.timeline.add(g.params,this.timeline.duration+(d===u?s.endDelay:0))}this.timeline.duration+=s.delay}}catch(s){s instanceof Error&&console.error(s.message)}((a=this.object.previousAction)==null?void 0:a.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(qi(this.shared,this.condition)===!1||this.playing)return!1;clearTimeout(this.timeoutId);let e=Vz(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(qi(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function D2(e,t){var i;let r,n;if(typeof t=="string"?(r=t,n=(i=e.states)==null?void 0:i[r]):t===null&&(r=null,n=e.data),!(r===void 0||n===void 0))return{id:r,data:n}}var r9e={type:"beginState"},cK={type:"completeState",isfromEntity:!1},dK={type:"requestRender"},Ese=class extends Vo{constructor(e,t,r,n){super(),this.data=e,this.page=t,this.shared=r,this.condition=n,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new X,this.posEnd=new X,this.qStart=new xr,this.qEnd=new xr,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let r={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=Ase({targets:r,t:1,...Cse(this.data),update:()=>{r.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(r9e));let n=this.page.activeCamera;n.position.lerpVectors(this.posStart,this.posEnd,r.t),n.quaternion.slerpQuaternions(this.qStart,this.qEnd,r.t),n.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*r.t,n.wasMovedBySwitchCameraAction=!0,n.updateMatrix(),n.updateMatrixWorld(),n.updateProjectionMatrix(),n.dispatchEvent(dK),r.t===1&&n.dispatchEvent(cK)}})}switchCamera(e){let t=this.page.scene.find(e);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(t),this.page.activeCamera.dispatchEvent({type:"cameraChange",camera:t})}play(){if(qi(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,r;if(qi(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward;try{this.playing?((t=this.animation)==null||t.pause(),this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var n,i;delete this.timeoutId,this.data.animate?((n=this.animation)==null||n.pause(),this.buildAnimation(),(i=this.animation)==null||i.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(cK),this.page.activeCamera.dispatchEvent(dK))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},Pse=class extends Vo{constructor(e,t,r,n,i){var u,d,c;super(),this.page=t,this.animationControls=r,this.shared=n,this.condition=i,this.startOnceDelay=0,this.toggleIsForward=!1;let o=e.object,a=t.scene.find(e.object);a&&Array.isArray(a.identity)&&(o=a.identity[0]),this.data={...e,object:o};let s=this.animationControls.clipIdToAction[e.clipId+"/"+o];this.duration=((u=s==null?void 0:s.getClip())==null?void 0:u.duration)??1;let l=((c=(d=s==null?void 0:s.getClip())==null?void 0:d.tracks[0])==null?void 0:c.times.length)??1/0;this.leftFrameTime=this.data.crop[0]/l*this.duration,this.rightFrameTime=this.data.crop[1]/l*this.duration,this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(qi(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([n,i])=>{let o=n.split("/")[1];this.threeAnimAction!==i&&o===t&&i.isRunning()&&(e?i.fadeOut(.2):i.stop())}),e&&((r=this.threeAnimAction)==null||r.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=Ht.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(qi(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let n=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([i,o])=>{let a=i.split("/")[1];this.threeAnimAction!==o&&a===n&&o.isRunning()&&(t?o.fadeOut(.2):o.stop())}),t&&((r=this.threeAnimAction)==null||r.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},Dse=class{constructor(e,t,r,n,i){this.data=e,this.page=t,this.eventManager=r,this.shared=n,this.condition=i,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(qi(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),nH(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},Ose=class{constructor(e,t,r,n){this.data=e,this.page=t,this.shared=r,this.condition=n,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=qi(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=Koe(this.data.expression,this.shared,Zs.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}},Rse=class{constructor(e,t,r,n){this.data=e,this.page=t,this.shared=r,this.condition=n,this.timeoutId=null}dispatchInner(){if(qi(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,t===void 0?!1:!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&t==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function qi(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let r=Koe(t.expression,e,"boolean");return t.negate?!r:!!r}function Wa(e,t,r,n,i,o){let a={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[]},s=l=>({id:u,data:d})=>{try{d.type==="Audio"?Hs[e.type].includes("Audio")&&a.Audio.push(new ose(u,d,o,n,l)):d.type==="Video"?Hs[e.type].includes("Video")&&a.Video.push(new Lse(u,d,o,n,l)):d.type==="Link"?Hs[e.type].includes("Link")&&a.Link.push(new KWe(d,i.controlsManager,n,l)):d.type==="Create"?Hs[e.type].includes("Create")&&a.Create.push(new Bse(d,r,i.controlsManager,n,l)):d.type==="Destroy"?Hs[e.type].includes("Destroy")&&a.Destroy.push(new ase(d,r,i.controlsManager,n,l)):d.type==="Reset"?Hs[e.type].includes("Reset")&&a.Reset.push(new sse(d,r,n,i,l)):d.type==="Transition"?Hs[e.type].includes("Transition")&&a.Transition.push(new Tse(d,r,n,l)):d.type==="SwitchCamera"?Hs[e.type].includes("SwitchCamera")&&a.SwitchCamera.push(new Ese(d,r,n,l)):d.type==="SceneTransition"?Hs[e.type].includes("SceneTransition")&&a.SceneTransition.push(new Dse(d,r,i,n,l)):d.type==="Animation"?Hs[e.type].includes("Animation")&&a.Animation.push(new Pse(d,r,i.animationControls,n,l)):d.type==="SetVariable"?Hs[e.type].includes("SetVariable")&&a.SetVariable.push(new Ose(d,r,n,l)):d.type==="DynamicVariablePlay"?Hs[e.type].includes("DynamicVariablePlay")&&a.DynamicVariablePlay.push(new Rse(d,r,n,l)):d.type==="Conditional"&&Hs[e.type].includes("Conditional")&&(d.ifActions.forEach(s({expression:d.condition,negate:!1})),d.elseActions.forEach(s({expression:d.condition,negate:!0})))}catch{}};return t.forEach(s()),a}function Mo(e){Object.values(e).forEach(t=>{t.forEach(r=>{(r instanceof ose||r instanceof Lse||r instanceof Pse||r instanceof Tse||r instanceof Bse||r instanceof ase||r instanceof Ese||r instanceof Dse||r instanceof sse||r instanceof Ose||r instanceof Rse)&&r.dispose()})})}function n9e(e,t){let r;if("material"in e){let n=e.material;Array.isArray(n)?r=e.material[0].layers.find(i=>i.uuid===t):r=e.material.layers.find(i=>i.uuid===t)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var Ise=new Map,LS=new Map,sx=class{constructor(e,t,r){this.data=t,this.delay=0,this.status="stopped";let{layerId:n,loop:i,volume:o,delay:a}=t;if(this.object=r,n===void 0)throw new Error("Missing property");let s=n9e(r,n);s&&(this.videoElement=s,this.videoElement.loop=i===1/0,uj&&(this.videoElement.autoplay=!0),o!==void 0&&(this.videoElement.volume=o)),a!==void 0&&(this.delay=a),LS.has(r.uuid)?LS.get(r.uuid).push(this):LS.set(r.uuid,[this]),Ise.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(n=>{}).catch(n=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},jz=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=Ise.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=LS.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let e=[...LS.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Lse=class{constructor(e,t,r,n,i){if(this.data=t,this.shared=n,this.condition=i,t.interaction==="play")this.interaction=new sx(e,t,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new jz(t);else throw new Error("Missing property")}dispatchBasic(){if(qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof sx?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(qi(this.shared,this.condition)===!1)return!1;this.interaction instanceof sx?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},hK=(()=>{let e,t,r,n;function i(s){!e&&!fK()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(o)),s&&(t=s,n=s.requestRender)}function o(s){let l=r?s-r:0,u=t.sharedGameControlGlobals.createdObjects,d=t.sharedGameControlGlobals.nCreatedPerAction,c=u.length,h=0;for(;h<c;){let f=u[h];f.userData.createdTime===void 0&&(f.userData.createdTime=s),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&s-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&d[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),n()),h++):(d[f.userData.actionId]>f.userData.quantity&&d[f.userData.actionId]--,u.splice(h,1),f.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&f.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(f.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody)):(f.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(g=>g.bvhGeometry!==void 0)),c--,n())}e=h>0?requestAnimationFrame(o):void 0,r=h>0?s:void 0}function a(){fK()?e&&(cancelAnimationFrame(e),e=void 0,r=void 0):i()}return typeof document<"u"&&document.addEventListener("visibilitychange",a),i})();function fK(){return!!document&&document.hidden}var pK=new xr,i9e=new X,o9e=new X,Bse=class{constructor(e,t,r,n,i){this.data=e,this.page=t,this.controlsManager=r,this.shared=n,this.condition=i,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=Ht.generateUUID(),this.dispatch=()=>{if(qi(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(qi(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=J5e(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let a=new ia(this.object);if(a.playModeVisible=!0,a.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,u=this.page.scene.find(l);u&&(u.updateMatrixWorldSVD(),a.hiddenMatrix.copy(u.matrixWorldRigid))}a.position.fromArray(this.data.position),a.rotation.fromArray(this.data.rotation),a.updateMatrix(),this.page.add(a);let s=this.controlsManager.sharedGameControlGlobals;s.createdObjects.push(a),s.nCreatedPerAction[this.uniqueId]===void 0?s.nCreatedPerAction[this.uniqueId]=1:s.nCreatedPerAction[this.uniqueId]++,a.updateWorldMatrix(!0,!0),a.traverseObject(this.traverseObjectCB),hK(),this.controlsManager.requestRender()},this.traverseObjectCB=a=>{var d,c,h,f;a.hasNonUniformScale&&a.updateMatrixWorldSVD();let s;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(a instanceof Lu)if(a.objectForSample){if(a.objectForSample.dataPatched.physics.fusedBody)return;s=a.object}else return a.object.dataPatched.physics.fusedBody===!0&&a.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(a instanceof ia)s=a.object;else if(s=a,(d=s.dataPatched.cloner)==null?void 0:d.hideBase)return!0}else{if(a instanceof Lu)return;a instanceof ia?s=a.object:s=a}this.data.destroy==="Time"?a.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(a.userData.quantity=this.data.destroyAfterQuantity,a.userData.actionId=this.uniqueId);let l=new X().fromArray(this.data.velocity),u=s.dataPatched;if(!(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(a,s,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((c=a.rigidBody)==null||c.collider(0).setActiveEvents(1),a.userData.hasCollisionDestroy=!0),a.matrixWorld.decompose(i9e,pK,o9e),l.applyQuaternion(pK),this.data.velocity.some(g=>g!==0)&&this.data.dynamic&&((h=a.rigidBody)==null||h.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in a.object&&this.controlsManager.addBoundsTree(a),this.data.velocity.some(g=>g!==0)&&this.data.dynamic&&(a.userData.velocity=l)),((f=s.dataPatched.physics)==null?void 0:f.fusedBody)===!0))return!0};let o=this.page.scene.find(this.data.object);if(!o)throw new Error("Missing Property");if(this.object=o,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");hK(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},Nse=200,SN=.02,AN=.3,a9e=65;new X;var mK=new X,gK=new X,s9e=new X,Ma=new X,os=new X,Nf=new X,MN=new ft,vK=new ft,l9e=new ft;new ft;var vu=new xr,jd=new xr,Mc=new So(0,0,0,"YXZ"),u9e=new X(1,0,0),yu=new X(0,1,0),c9e=new X(0,0,1),yK=new X(1,1,1);new Ts;var d9e=1,h9e=.025,f9e=16e-6,bK=12,p9e=20,yo=new Yl,Tl=new Oi,m9e={type:"requestRender"},g9e={type:"updateMatrix"},xK=Math.PI/6,Hz=class extends Vo{constructor(e,t,r,n,i,o,a,s,l){var g;super(),this.object=e,this.domElement=t,this.data=r,this.gloabalPhysics=n,this.controlsManager=i,this.cameraFollow=o,this.camera=a,this.page=s,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new ft,this.target0=new X,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=Nse,this.euler0=new So(0,0,0,"YXZ"),this.position0Cam=new X,this.quat0Cam=new xr,this.scale0Cam=new X,this.hiddenMatrix0Cam=new ft,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Yl(new X(0,-40,0),new X(0,40,0)),matrix:new ft,position:new X,rotation:new xr},this.euler=new So(0,0,0,"YXZ"),this.eulerDelta=new X,this.lastPosition=new X,this.lastCameraQuaternion=new xr,this.lastCameraPosition=new X,this.PI_2=Math.PI/2,this.prevMouse=new Ae,this.velocityTarget=new X,this.velocity=new X,this.directionXZ=new X,this.rotVelocityStick=new X,this.rotVelocityTarget=new X,this.rotVelocity=new X,this.rotDirection=new X,this.nonColliderRotOffset=new ft,this.nonColliderPosOffset=new ft,this.firstPointerId=-1,this.rot=new X,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new ft,this.objectToTarget=new X,this.objectToTarget0=new X,this.objectToCamXZ=new X,this.objectToCamXZ0=new X,this.targetToCamera=new X,this.targetToCamera0=new X,this.cameraPolarAxis0=new X,this.targetPos=new X,this.targetQuat=new xr,this.lerpFactorPos=new X().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new xr,this.objXZQuatInv=new xr,this.objXZRotMat=new ft,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new X,this.pushedVelocity=new X,this.groundYRotation=0,this.objectRealQuat=new xr,this.colliderWorldQuat=new xr,this.groundNormal=new X,this.groundTilt=new xr,this.groundTiltInv=new xr,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new X,this.quaternion=new xr,this.scale=new X,this.initialAction=!0,this.onPointerDown=y=>{y.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=y.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Qs&&(!vq||yq>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(y.clientX,y.clientY))},this.onPointerUp=y=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),y.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=y=>{if(y.pointerId!==this.firstPointerId)return;let m=y.clientX-this.prevMouse.x,p=y.clientY-this.prevMouse.y;this.prevMouse.set(y.clientX,y.clientY),y.pointerType==="mouse"&&this.rotBy!=="keys"&&(vq&&yq<15.5&&!Qs?(this.eulerDelta.y=-m*this.mouseOrbitSensitivity,this.eulerDelta.x=-p*this.mouseOrbitSensitivity):(this.eulerDelta.y=-y.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-y.movementY*this.mouseOrbitSensitivity)),y.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-m*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-p*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=y=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?Hz.isLocked=!0:Hz.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let y in this.movementState)this.movementState[y]=0},this.onKeyDown=y=>{!(y.target instanceof HTMLInputElement)&&(y.code==="ArrowLeft"||y.code==="ArrowUp"||y.code==="ArrowRight"||y.code==="ArrowDown"||y.code==="Space")&&y.preventDefault();for(let m of this.keyAssignments)if(y.key.toUpperCase()===m[1]||y.key===m[1]){this.movementState[m[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=y=>{for(let m of this.keyAssignments)if(y.key.toUpperCase()===m[1]||y.key===m[1]||y.code.slice(3,y.code.length).toUpperCase()===m[1]){this.movementState[m[0]]=0;break}},this.copyVRGamePadValues=(y,m)=>{for(let p=2;p<4;p++){let v=y.axes[p];m===0?p===2?this.movementState.movePosX=v:this.movementState.movePosZ=v:(y.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,p===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(v)>=.3&&(this.vrEulerYOffset+=v<0?1:-1),this.movementState.rotPosY=v):this.moveMode==="fly"&&(this.movementState.moveNegY=v))}},this.sharedGameControlGlobals=i.sharedGameControlGlobals,e===a&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let u=this.euler0.clone(),d=u.y;if(this.objectRealQuat.copy(this.quaternion),u.y=0,this.quaternion.setFromEuler(u),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),u.set(0,d,0),this.quaternion.setFromEuler(u),this.rot.setFromEuler(u),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((g=this.camera)==null?void 0:g.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let y=new X(0,0,-1).applyQuaternion(this.camera.quaternion),m=new X().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(m),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let p,v;Math.abs(y.y)<1e-6?(m.y=0,y.y=0,v=m.projectOnVector(y)):m.y/y.y>0?v=y.multiplyScalar(m.y/y.y):v=y.multiplyScalar(m.length()),this.targetToCamera0.copy(v).negate(),p=this.camera.position.clone().add(v),this.objectToTarget0.subVectors(p,this.position);let b=new So().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-b.x,b.x=0,b.z=0,b.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(b)}if(this.object instanceof sa&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=r.rotByTouch??"joystick",this.rotBy=r.rotBy??"keys",this.rotationMode=r.rotationMode??"normal",this.moveMode=r.moveMode??"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=(r.speedTranslate??250)*d9e,this.speedOrbit=(r.speedRotate??100)*h9e,this.mouseOrbitSensitivity=(r.speedRotate??100)*f9e,this.keyAssignments=r.keyAssignments.map(y=>{let m=[y[0],y[1]];return m[1]===""?m[1]="ArrowUp":m[1]===""?m[1]="ArrowLeft":m[1]===""?m[1]="ArrowDown":m[1]===""?m[1]="ArrowRight":m[1]===""?m[1]="Shift":m[1]===""?m[1]="Enter":m[1]==="Space"?m[1]=" ":m[1]===""?m[1]="Meta":m[1]==="Ctrl"?m[1]="Control":m[1]==="Esc"&&(m[1]="Escape"),m}),r.rotBy==="mouse"){let y;y=this.keyAssignments.findIndex(m=>m[0]==="rotNegX"),y!==-1&&(this.keyAssignments[y][1]=""),y=this.keyAssignments.findIndex(m=>m[0]==="rotPosX"),y!==-1&&(this.keyAssignments[y][1]=""),y=this.keyAssignments.findIndex(m=>m[0]==="rotPosY"),y!==-1&&(this.keyAssignments[y][1]=""),y=this.keyAssignments.findIndex(m=>m[0]==="rotNegY"),y!==-1&&(this.keyAssignments[y][1]="")}this.lerpFactorPosStart=1-.02**(1/((r.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((r.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((r.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((r.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((r.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((r.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??zx.defaultData.gravity)*bK,this.usePhysics=this.gloabalPhysics.usePhysics??zx.defaultData.usePhysics,this.jumpPower=r.jumpPower*p9e,this.resetYPosition=this.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=r.alignToGround??!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=r.orientWith??oO.defaultDataThirdPerson.orientWith,this.slopeThresh=a9e*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*SN/this.pixelsPerMeter,this.stepThresh=r.collider.height*AN/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*SN/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*AN/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*SN/this.pixelsPerMeter,this.stepThresh=r.collider.height*AN/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let c=new X().fromArray(r.collider.position),h=new xr().setFromEuler(new So().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(c).multiply(this.scale),this.collider.rotation.copy(h),this.collider.matrix.compose(c,h,yK),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),this.forwardDir=r.forwardDirection??"-z",this.runMultiplier=r.runMultiplier??2;let f=r.navmesh.destinationHelperRadius*2;if(f>0){let y=new sr;y.push({fi:0,data:{...ds.defaultData("light","phong"),alpha:0},id:"layer1"}),y.push({fi:0,data:{...ds.defaultData("color"),color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a},id:"layer2"});let m=new Bj({layers:y},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new Fa(Poe.create({parameters:{width:f,height:f/10,hollow:.7}}),m),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new So().setFromQuaternion(this.quaternion,"YXZ"),r=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,r,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof sa?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},iO.list.forEach(r=>{this.actions[r]=Wa({...e,disabled:!1,type:"GameControl"},e.gameActions[r],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),Mo(this.actions.idle),Mo(this.actions.move),Mo(this.actions.run),Mo(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Ma.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,r){var s,l,u,d,c,h,f,g,y;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let n=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let i=n*60,o=!1;if(this.usePhysics&&this.collisionEnabled){let m=os.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*bK),1)*(this.gravity>0?1:-1):this.velocity.y)*n,0).divideScalar(this.pixelsPerMeter),p=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,m,(s=this.object.rigidBody)==null?void 0:s.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(p){this.onObject=!0,this.groundNormal.set(p.normal2.x,p.normal2.y,p.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(o=!0),((l=p.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let v=p.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let b of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(b.rigidBody===v&&b.userData.isFollowingObj!==this.object.uuid){(b.hasNonUniformScale?b.matrixWorldRigid:b.matrixWorld).decompose(Ma,jd,os),this.groundVelocity.subVectors(Ma,b.prevT),this.object.getWorldPosition(os).add(this.collider.position).sub(Ma),this.groundYRotation=Mc.setFromQuaternion(jd).y-b.prevR.y,Nf.copy(os).applyAxisAngle(yu,this.groundYRotation),this.groundVelocity.add(Nf.sub(os)).divideScalar(n);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*i),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let m=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let p=Ma.subVectors(this.path[1],this.position),v=os.subVectors(this.path[1],this.path[0]);p.dot(v)<0?this.path.shift():(this.directionXZ.x=v.x,this.directionXZ.z=v.z),m.opacity=m.userData.opacity0}else m.opacity-=.05*m.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**i),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**i),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**i)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let a=s9e.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let m=os.copy(a);m.y=0,a.set(0,a.y,m.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let m=Ma;this.camera.getWorldDirection(m);let p=Nf.copy(yu).multiplyScalar(m.dot(yu));m.sub(p);let v=os.copy(this.directionXZ);v.x*=-1,this.rot.y=m.angleTo(v)*(m.cross(v).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(Mc.setFromVector3(this.rot),this.moveMode==="walk"&&(Mc.x=0),a.applyEuler(Mc),o&&(jd.setFromUnitVectors(yu,this.groundNormal),a.applyQuaternion(jd)),r){let m=Mc.set(0,this.vrEulerYOffset*xK,0);r.applyEuler(m),a.x+=r.x,a.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*n}if(this.usePhysics===!0){let m=os;this.pushedVelocity.set(0,0,0);for(let p of this.sharedGameControlGlobals.entitiesWithTransformAnim){let v=Nf.setFromMatrixPosition(p.matrixWorld).sub(p.prevT).divideScalar(n).divideScalar(this.pixelsPerMeter),b=p.rigidBody.collider(0).castCollider(v,this.object.rigidBody.collider(0),Ma.copy(a).divideScalar(this.pixelsPerMeter),n,!1);v.multiplyScalar(this.pixelsPerMeter);let x=jr.is(p)?p:p.object;if(b!==null&&this.lastHitObj!==x){let _;p instanceof ia&&(_=p);let A=this.sharedGameControlGlobals.entityToCollisionEvents[x.uuid];if(A)for(let M of A)M.data.target==="character"&&(M.dispatch(_),x.dispatchEvent(Wz));this.lastHitObj=x}if(b!==null){this.pushedVelocity.copy(v),m.copy(b.normal1).applyQuaternion(p.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let p=m.dot(a);p<0&&a.addScaledVector(m,-p),a.add(this.pushedVelocity)}else a.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(n),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**i):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**i),this.euler.x+=this.rotVelocity.x*n,this.euler.y+=this.rotVelocity.y*n+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*n),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(yu,this.euler.y-this.euler0.y);let m=os.copy(this.objectToCamXZ).normalize(),p=Nf.copy(a).multiplyScalar(n);p.y=0;let v=p.sub(Ma.copy(m).multiplyScalar(p.dot(m))).cross(m).y;this.euler.y-=Math.atan2(v,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*n+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Ht.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Ht.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Ht.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Mc.copy(t),Mc.y=0):(Mc.copy(this.euler),Mc.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Mc)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*xK),vu.setFromAxisAngle(u9e,this.rot.x),jd.setFromAxisAngle(yu,this.rot.y),jd.multiply(vu),vu.setFromAxisAngle(c9e,this.rot.z),jd.multiply(vu),this.quaternion.copy(jd),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let m=os.copy(a).multiplyScalar(n/this.pixelsPerMeter),p=null;this.didHit=!1;let v=new X;for(let b=0;b<5;b++){let x=m.length(),_=Nf.copy(m).normalize();if(p=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(v),this.colliderWorldQuat,_,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,x,!1,24,void 0,void 0,this.object.rigidBody),p!==null){this.didHit=!0;let A=this.sharedGameControlGlobals.colliderToEntity.get(p.collider.handle);if(A!==this.lastHitObj&&b===0){this.lastHitObj=A;let E=this.sharedGameControlGlobals.entityToCollisionEvents[A==null?void 0:A.uuid];if(E){for(let D of E)if(D.data.target==="character"){let I=((d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.getCollider(p.collider.handle))._parent,k;if(A.cloner){for(let L of A.cloner.children)if(L.rigidBody===I){k=L;break}}D.dispatch(k),A.dispatchEvent(Wz)}}}let M=mK.set(p.normal2.x,p.normal2.y,p.normal2.z).applyQuaternion(this.colliderWorldQuat),T=gK.copy(_).multiplyScalar(p.toi).dot(M),C=p.toi;if(C===0&&(this.position.y+=this.offset*this.pixelsPerMeter),T>this.offset&&(C=p.toi*(T-this.offset)/T,v.addScaledVector(_,C)),m.copy(_).multiplyScalar(x-C),Math.acos(-M.y)>this.slopeThresh){let E=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(v),D=Nf.copy(p.witness2).applyQuaternion(this.colliderWorldQuat);D.y=0;let I=E.add(D);I.y+=this.stepThresh;let k=this.sharedGameControlGlobals.rapierWorld.castShape(I,this.colliderWorldQuat,m,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);k!==null&&k.toi===0&&(M.y=0,M.normalize())}m.addScaledVector(M,-m.dot(M))}else{b===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),v.add(m);break}}this.position.addScaledVector(v,this.pixelsPerMeter),(h=this.object.rigidBody)==null||h.setTranslation(Ma.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(vu.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let m=this.onObject?1:5,p=a.multiplyScalar(n/m);for(let v=0;v<m;v++)this.position.add(p),this.collisionAdjustment(n/m)}else this.position.addScaledVector(a,n);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let m=this.objectToTarget.add(this.position),p=this.targetToCamera.add(m);MN.lookAt(p,m,yu).setPosition(p),MN.decompose(this.targetPos,this.targetQuat,Ma),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**i),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**i),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Ht.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Ht.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(g9e),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((y=(g=this.navMeshPathDest)==null?void 0:g.material)==null?void 0:y.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(m9e),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=vu.setFromAxisAngle(yu,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Ht.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=Ht.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=Ht.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Ma.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let n=jd.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(n)}groundTiltAdjustment(e){yu.angleTo(e)*180/Math.PI<15||yu.angleTo(e)*180/Math.PI>85?vu.identity():vu.setFromUnitVectors(yu,e),this.groundTilt.slerp(vu,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var i;let t=gK.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=MN.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Ma,vu,os).compose(Ma,vu,yK);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(o=>{if(o===this.object||o.isDescendantOf(this.object))return;Tl.makeEmpty(),o.updateMatrixWorldSVD();let a=o.matrixWorldRigid,s=vK.copy(a).invert(),l=l9e.copy(vK).multiply(r);yo.copy(this.collider.segment),yo.start.applyMatrix4(l),yo.end.applyMatrix4(l);let u=mK.copy(this.position).applyMatrix4(s);Tl.expandByPoint(yo.start),Tl.expandByPoint(yo.end),Tl.min.addScalar(-this.collider.radius),Tl.max.addScalar(this.collider.radius),o.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(d){return d.distanceToPoint(yo.end)},intersectsBounds:d=>d.intersectsBox(Tl),intersectsTriangle:d=>{let c=Ma,h=os,f=d.closestPointToSegment(yo,c,h);if(f<this.collider.radius){let g=this.collider.radius-f,y=h.sub(c).normalize(),m=Nf.copy(u);m.addScaledVector(y,g);let p=m.applyMatrix4(a).sub(this.position);t.add(p),yo.start.addScaledVector(y,g),yo.end.addScaledVector(y,g)}}})}),Tl.makeEmpty(),yo.copy(this.collider.segment),yo.start.applyMatrix4(r),yo.end.applyMatrix4(r),Tl.expandByPoint(yo.start),Tl.expandByPoint(yo.end),Tl.min.addScalar(-this.collider.radius),Tl.max.addScalar(this.collider.radius),(i=this.sharedGameControlGlobals.staticMeshBVH)==null||i.shapecast({traverseBoundsOrder(o){return o.distanceToPoint(yo.end)},intersectsBounds:o=>o.intersectsBox(Tl),intersectsTriangle:o=>{let a=Ma,s=os,l=o.closestPointToSegment(yo,a,s);if(l<this.collider.radius){let u=this.collider.radius-l,d=s.sub(a).normalize();this.alignToGround&&this.groundTiltAdjustment(d),t.addScaledVector(d,u),yo.start.addScaledVector(d,u),yo.end.addScaledVector(d,u)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let n=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(n),this.position.add(t)}},kse=Hz;kse.isLocked=!1;var v9e=Po(une());function nh(e,t){let r=new Jt;if(!e.getAttribute("position"))return r.setAttribute("position",new Rt([],3)),r.setIndex([]),r;let{positions:n,triIndices:i}=sI(e.getAttribute("position"),e.getIndex());return r.setAttribute("position",new Rt(n,3)),r.setIndex(i),t&&r.applyMatrix4(t),r}var y9e=new ft,b9e=new ft,Cc=[[0,0,0],[0,0,0],[0,0,0]];function Fse(e){let t=e.elements;Cc[0][0]=t[0],Cc[0][1]=t[4],Cc[0][2]=t[8],Cc[1][0]=t[1],Cc[1][1]=t[5],Cc[1][2]=t[9],Cc[2][0]=t[2],Cc[2][1]=t[6],Cc[2][2]=t[10];let{u:r,v:n}=(0,v9e.SVD)(Cc),i=y9e.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=b9e.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1);return i.multiply(o.transpose())}var x9e=class extends tie{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(n=>{n.visible&&this.intersectObject(n,t,r)}),r}createRaycastLineHelper(){let e=new em({color:65280,linewidth:10}),t=new X(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new X(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),n=this.camera.far-this.camera.near,i=new X().addVectors(t,r.multiplyScalar(n)),o=new Jt;return o.setFromPoints([t,i]),new DD(o,e)}},zse=e=>e instanceof ix||e instanceof ox;function w9e(e,t){return e.distance-t.distance}function Use(e,t,r){if(!(!rh(t)||!t.visible)){Eu(t)&&t.raycast(e,r);for(let n of t.children)Use(e,n,r)}}function O2(e,t,r,n=!1){if(!n&&!r.some(o=>yO(e,o)!==void 0))return[];let i=[];return t.children.forEach(o=>Use(e,o,i)),i.sort(w9e),i}function Gz(e){let t=[];if(e.length){let r=e[0].object;rh(r)&&t.push(r);let n=r.parent;for(;n;)zse(n)&&t.push(n),n=n.parent}return t}function yO(e,t){if(Eu(t)){if(t.visible){let r=[];return t.raycast(e,r),r.length?r[0]:void 0}}else if(zse(t))return Vse(e,t)}function Vse(e,t){if(!(!rh(t)||!t.visible)){if(Eu(t)){let r=[];if(t.raycast(e,r),r.length)return r[0]}for(let r of t.children){let n=Vse(e,r);if(n)return n}}}function _9e(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width*2-1,y:-((t-(r.top+window.scrollY))/r.height)*2+1}}var S9e=class{constructor(e,t,r,n,i,o,a,s){this.renderer=e,this.publish=t,this.scene=r,this.getCamera=n,this.sharedAssets=i,this.requestRender=o,this.isExport=a,this.frame=s,this.raycaster=new x9e,this._useWindowEvents=!1,this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}updateRaycaster(e){var n;let{pageX:t,pageY:r}=((n=e.touches)==null?void 0:n.length)>0?e.touches[0]:e;this.raycaster.setFromCamera(_9e(t,r,this._domRect),this.getCamera())}},ec=class{constructor(t){this.eventContext=t,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},iH=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],jse=e=>{var t;return(t=iH.find(([r,n])=>n===e))==null?void 0:t[0]},zM=e=>{var t;return(t=iH.find(([r])=>r===e))==null?void 0:t[1]},A9e=(e,t)=>{let r=jse(e);if(r){let n=new CustomEvent(r,{bubbles:!0});return Object.defineProperty(n,"target",{writable:!1,value:t}),n}},M9e=class extends ec{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=r=>{var o;if(!r.eventName||!r.target||r.eventName==="Scroll")return;let n=(o=this.splineEvents[jse(r.eventName)])==null?void 0:o[r.target.uuid];if(!n)return;r.eventName==="Scroll"&&r.deltaY!==void 0&&Object.assign(n,{deltaY:r.deltaY});let{domElement:i}=this.eventContext;i.dispatchEvent(n)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var n,i;if((n=r.data)!=null&&n.events.length){for(let[o,a]of iH)if(r.data.events.some(s=>s.data.type===a&&!s.data.disabled)){this.objectsPerEvents.has(o)?(i=this.objectsPerEvents.get(o))==null||i.push(r):this.objectsPerEvents.set(o,[r]);let s={id:r.uuid,name:r.name},l=A9e(a,s),u=this.splineEvents[o];u?u[r.uuid]=l:this.splineEvents[o]={[r.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},C9e=class{constructor(e,t,r,n,i,o){if(this.id=e,this.data=t,this.object=r,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=t.runMode==="Toggle",(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Wa(t,t.actions,n,i,o,r)}disconnect(){Mo(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(t)}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()}),this.actions.SwitchCamera.forEach(t=>{t.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing)||this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.SwitchCamera.some(t=>t.playing)||this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},T9e=class extends ec{constructor(e,t,r){super(e),this.useForRaycastProperty=r,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=o=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(o);let{raycaster:a,page:s}=this.eventContext,l=O2(a,s,[],!0);this.sceneInterects=l,l.length&&(this.eventContext.sharedAssets.raycastProperty={x:l[0].point.x,y:l[0].point.y,z:l[0].point.z,objX:l[0].object.matrixWorld.elements[12],objY:l[0].object.matrixWorld.elements[13],objZ:l[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=o=>{(o.target===this.eventContext.domElement||o.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(a=>{(a.data.type==="MouseDown"||a.data.type==="MousePress")&&(this.onCanvasRaycast(o),a.dispatch())})},this.onCanvasMouseUp=o=>{(o.target===this.eventContext.domElement||o.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(a=>{a.data.type==="MouseUp"?(this.onCanvasRaycast(o),a.dispatch()):a.data.type==="MousePress"&&a.dispatchRelease()})},this.onMouseDown=o=>{cr.length>1||(this.eventContext.updateRaycaster(o),this.handleMouseEvent("MouseDown"))},this.onMouseUp=o=>{cr.length>1||(this.eventContext.updateRaycaster(o),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=o=>{cr.length>1||(this.eventContext.updateRaycaster(o),this.handleMousePressEvent())},this.onMousePressRelease=o=>{cr.length>1||(this.eventContext.updateRaycaster(o),this.handleMousePressEvent(!0))},this.onKeyDown=o=>{this.heldKeys[o.key]||(this.handleKeyEvent(o,"KeyDown"),this.handleKeyEventHeld(o,"KeyDown",!0)),this.heldKeys[o.key]=!0},this.onKeyUp=o=>{this.handleKeyEvent(o,"KeyUp"),this.handleKeyEventHeld(o,"KeyUp",!0)},this.onKeyPressDown=o=>{this.heldKeysPress[o.key]?this.handleKeyEventHeld(o,"KeyPress"):(this.handleKeyEvent(o,"KeyPress"),this.handleKeyEventHeld(o,"KeyPress",!0)),this.heldKeysPress[o.key]=!0},this.onKeyPressUp=o=>{this.handleKeyEvent(o,"KeyPress",!0)},this.releaseHeldKey=o=>{delete this.heldKeys[o.key]},this.releaseHeldKeyPress=o=>{delete this.heldKeysPress[o.key]},this._onUserEvent=({eventName:o,target:a,reverse:s})=>{var u,d,c,h;if(!o||!a)return;let l=zM(o);l&&(l==="MouseDown"||l==="MouseUp"||l==="MousePress"?(a.dispatchEvent({type:"beginEvent",eventName:l}),(d=(u=this.eventsPerObjects[l])==null?void 0:u[a.uuid])==null||d.forEach(f=>{f.dispatchUserEvent(s)})):(l==="KeyDown"||l==="KeyUp"||l==="KeyPress")&&(a.dispatchEvent({type:"beginEvent",eventName:l}),(h=(c=this.eventsPerObjects[l])==null?void 0:c[a.uuid])==null||h.forEach(f=>{f.dispatchUserEvent()})))};let{page:n,sharedAssets:i}=this.eventContext;n.traverseEntity(o=>{var s,l;if(!((s=o.data)!=null&&s.events.length))return;let a=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let u of a){let d=this.eventsPerObjects[u];o.data.events.filter(({data:c})=>c.type===u&&c.disabled!==!0).forEach(({id:c,data:h})=>{try{let f=new C9e(c,h,o,n,i,t);f.actions.Video.length&&(this.hasVideoAction=!0),(h.type==="MouseDown"||h.type==="MouseUp"||h.type==="MousePress")&&(h.mode==="Canvas"||h.mode==="Window")?this.canvasMouseEvents.push(f):d[o.uuid]?d[o.uuid].push(f):d[o.uuid]=[f]}catch{}}),(l=d[o.uuid])!=null&&l.length&&this.objectsPerTypes[u].push(o)}})}connect(){var t,r,n,i,o,a;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),e.addEventListener("pointerdown",this.onCanvasMouseDown),e.addEventListener("pointerup",this.onCanvasMouseUp),((t=this.objectsPerTypes.MouseDown)!=null&&t.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(r=this.objectsPerTypes.MouseUp)!=null&&r.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(n=this.objectsPerTypes.MousePress)!=null&&n.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(i=this.objectsPerTypes.KeyDown)!=null&&i.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(o=this.objectsPerTypes.KeyUp)!=null&&o.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(a=this.objectsPerTypes.KeyPress)!=null&&a.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([s,l])=>{l.forEach(u=>{u.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(r=>{r.forEach(n=>{n.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,r])=>{r.forEach(n=>{n.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:r,page:n}=this.eventContext,i=this.objectsPerTypes[e];if(!(!i.length&&!this.useForRaycastProperty)){if(t||this.useForRaycastProperty){let o;this.sceneInterects===null?o=O2(r,n,i,this.useForRaycastProperty):(o=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&o.length&&(this.eventContext.sharedAssets.raycastProperty={x:o[0].point.x,y:o[0].point.y,z:o[0].point.z,objX:o[0].object.matrixWorld.elements[12],objY:o[0].object.matrixWorld.elements[13],objZ:o[0].object.matrixWorld.elements[14]}),t&&Gz(o).forEach(a=>{this.eventsPerObjects[e][a.uuid]&&this.handleObjectMouseEventDispatch(a,e)})}t||i.forEach(o=>{yO(r,o)&&this.handleObjectMouseEventDispatch(o,e)})}}handleMousePressEvent(e=!1){let t="MousePress",r=this.objectsPerTypes[t],n=[];if(r.length){if(!e){let{stopRaycast:i,raycaster:o,page:a}=this.eventContext;if(i){let s=O2(o,a,r);n=Gz(s)}else r.forEach(s=>{yO(o,s)&&n.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(i=>{n.includes(i)||this.handleObjectMouseEventDispatchRelease(i,t)}),n.length&&n.forEach(i=>{this.handleObjectMouseEventDispatch(i,t)}),this._prevObjects=n}}handleObjectMouseEventDispatch(e,t){var r,n;e.dispatchEvent({type:"beginEvent",eventName:t}),(n=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||n.forEach(i=>{i.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var r,n;e.dispatchEvent({type:"beginEvent",eventName:t}),(n=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||n.forEach(i=>{i.dispatchRelease()})}handleKeyEvent(e,t,r=!1){this.objectsPerTypes[t].forEach(n=>{let i=this.eventsPerObjects[t][n.uuid];i.some(({data:o})=>"key"in o&&o.key===e.key)&&n.dispatchEvent({type:"beginEvent",eventName:t}),i.forEach(o=>{"key"in o.data&&o.data.key===e.key&&(r?o.dispatchRelease():o.dispatch(!0))})})}handleKeyEventHeld(e,t,r=!1){this.objectsPerTypes[t].forEach(n=>{this.eventsPerObjects[t][n.uuid].forEach(i=>{"key"in i.data&&i.data.key===e.key&&i.dispatchHeld(r)})})}},E9e=new X,P9e=new X,Hse=class{constructor(e,t,r,n,i){this.actionsIn=Wa(e,e.inActions,r,n,i,t),this.actionsOut=Wa(e,e.outActions,r,n,i,t)}disconnect(){Mo(this.actionsIn),Mo(this.actionsOut)}},D9e=class extends Hse{constructor(e,t,r,n,i,o){super(t,r,n,i,o),this.id=e,this.data=t,this.object=r,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let h of this.objects)if(!h.visible)return;let u=E9e.setFromMatrixPosition(this.objects[0].matrixWorld),d=P9e.setFromMatrixPosition(this.objects[1].matrixWorld),c=u.distanceTo(d)<=this.distance?"in":"out";if(this.stage!==c){this.stage=c;let h=c==="in"?this.actionsIn:this.actionsOut;h.Audio.forEach(f=>f.dispatchConditional()),h.Video.forEach(f=>f.dispatchConditional()),h.Link.forEach(f=>f.dispatch()),h.Create.forEach(f=>f.dispatch()),h.Destroy.forEach(f=>f.dispatch()),h.Reset.forEach(f=>f.dispatch()),h.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),h.Transition.forEach(f=>f.play()),h.Animation.forEach(f=>f.play()),h.SwitchCamera.forEach(f=>f.play()),h.SceneTransition.forEach(f=>f.dispatch()),h.SetVariable.forEach(f=>f.checkConditions()),h.SetVariable.forEach(f=>f.dispatch()),h.DynamicVariablePlay.forEach(f=>f.dispatch())}};let{distance:a,fromObject:s,toObject:l}=t.condition;this.distance=a;for(let u of[s,l]){if(!u)throw new Error("Missing property");let d=n.find(u);if(!d)throw new Error("Missing property");this.objects.push(d)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},O9e=class extends Hse{constructor(e,t,r,n,i,o){var l;super(t,r,n,i,o),this.id=e,this.data=t,this.object=r,this.onBegin=({target:u,state:d})=>{this.toState!==d&&(this.actionsOut.Audio.forEach(c=>c.dispatchConditional()),this.actionsOut.Video.forEach(c=>c.dispatchConditional()),this.actionsOut.Link.forEach(c=>c.dispatch()),this.actionsOut.Create.forEach(c=>c.dispatch()),this.actionsOut.Destroy.forEach(c=>c.dispatch()),this.actionsOut.Reset.forEach(c=>c.dispatch()),this.actionsIn.Transition.forEach(c=>c.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(c=>c.play()),this.actionsOut.Animation.forEach(c=>c.play()),this.actionsIn.SwitchCamera.forEach(c=>c.pause()),this.actionsOut.SwitchCamera.forEach(c=>c.play()),this.actionsOut.SceneTransition.forEach(c=>c.dispatch()),this.actionsOut.SetVariable.forEach(c=>c.checkConditions()),this.actionsOut.SetVariable.forEach(c=>c.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(c=>c.dispatch()))},this.onComplete=({target:u,state:d})=>{this.toState===d&&(this.actionsIn.Audio.forEach(c=>c.dispatchConditional()),this.actionsIn.Video.forEach(c=>c.dispatchConditional()),this.actionsIn.Link.forEach(c=>c.dispatch()),this.actionsIn.Create.forEach(c=>c.dispatch()),this.actionsIn.Destroy.forEach(c=>c.dispatch()),this.actionsIn.Reset.forEach(c=>c.dispatch()),this.actionsOut.Transition.forEach(c=>c.pause()),this.actionsOut.Transition.forEach(c=>c.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(c=>c.play()),this.actionsIn.Animation.forEach(c=>c.play()),this.actionsOut.SwitchCamera.forEach(c=>c.pause()),this.actionsIn.SwitchCamera.forEach(c=>c.play()),this.actionsIn.SceneTransition.forEach(c=>c.dispatch()),this.actionsIn.SetVariable.forEach(c=>c.checkConditions()),this.actionsIn.SetVariable.forEach(c=>c.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(c=>c.dispatch()))};let{condition:a}=t;if(!a.object)throw new Error("Missing property");let s=n.find(a.object);if(!s)throw new Error("Missing property");if(this.toObject=s,a.state&&!((l=this.toObject.states)!=null&&l[a.state]))throw new Error("Missing property");this.toState=a.state}connect(){Bg(this.actionsOut).forEach(e=>{var t;(t=this.actionsOut[e])!=null&&t.length&&this.toObject.addEventListener("beginState",this.onBegin)}),Bg(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),Bg(this.actionsOut).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),Bg(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},R9e=class extends ec{constructor(e,t){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:r,sharedAssets:n}=this.eventContext;r.traverseEntity(i=>{var o;if((o=i.data)!=null&&o.events.length){for(let{id:a,data:s}of i.data.events)if(!s.disabled&&s.type==="Conditional")try{let l;s.condition.type==="Comparison"||(s.condition.type==="Distance"?l=new D9e(a,s,i,r,n,t):s.condition.type==="State"&&(l=new O9e(a,s,i,r,n,t))),l&&(this.eventsPerConditions[s.condition.type].push(l),(l.actionsIn.Video.length||l.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},I_=new X,kf=new X,ig=new X,wK=new qs,I9e=.01,nn=new X,eo=new X,_K=new X,Ug=new xr,CN=new So,L9e=new ft,TN=new Pi,Uy=new X,Tc=new X,Vy=.2;function EN(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var B9e=function(){let e=new ft;return(t,r,n)=>{let i=t.obj;e.copy(i.hiddenMatrix),i.parent!==null&&e.premultiply(i.parent.matrixWorld),e.invert(),i.position.copy(r),t.reference==="global"&&EN(i.position,t.limits),i.position.applyMatrix4(e),t.reference==="parent"?EN(i.position,t.limits):t.reference==="local"&&(Ug.copy(t.quat0).invert(),i.position.sub(t.position0),i.position.applyQuaternion(Ug),EN(i.position,t.limits),Ug.invert(),i.position.applyQuaternion(Ug),i.position.add(t.position0)),e.multiply(n??i.matrixWorld).decompose(nn,i.quaternion,eo),i.updateMatrix(),i.hasNonUniformScale&&(i.updateMatrixWorld(),i.updateMatrixWorldSVD()),i instanceof Es&&Uc(i.parent)&&i.invalidateDownstreamBooleanData(!0)}}(),N9e=class{constructor(e,t,r,n,i,o){this.object=e,this.data=t,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Wa(t,t.dragDropActions.drag,r,n,i,this.object),this.actionsDrop=Wa(t,t.dragDropActions.drop,r,n,i,this.object);let a=[];this.data.objects.forEach(s=>{let l=r.find(s);!l||l.data.visible!==!1&&(a.push(l),o[l.uuid]&&o[l.uuid].forEach(u=>{let d=r.find(u);!d||d.data.visible!==!1&&a.push(d)}))}),this.data.dropDestinations.forEach(s=>{let l=r.find(s);!l||l.data.visible!==!1&&(this.dropDestIds.push(l.uuid),o[l.uuid]&&o[l.uuid].forEach(u=>{let d=r.find(u);!d||d.data.visible!==!1&&this.dropDestIds.push(d.uuid)}))}),this.dragItems=a.map(s=>(this.data.planeMode==="locked"&&(s.userData.lockedPlane=!0),s.userData.worldPosition0=new X().setFromMatrixPosition(s.matrixWorld),{obj:s,fromPosition:new X().setFromMatrixPosition(s.matrixWorld),pointStart:new X,pointEnd:new X,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new X().copy(s.position),quat0:new xr().copy(s.quaternion),snapped:!1,orientationMatrix:new ft,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){Mo(this.actionsDrag),Mo(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},k9e=class extends ec{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=n=>{var s;if(cr.length>1)return;this.eventContext.updateRaycaster(n);let{raycaster:i,page:o}=this.eventContext,a=o.raycastWithClones(i);if(this.lastDropDestination=null,a.length===0){this.activeEvent=null;return}for(let l of this.events){let u=0;for(let{obj:d,pointEnd:c,pointStart:h}of l.dragItems){if(d===a[0].object||d===a[0].object.object||jr.is(d)&&d.isAncestorOf(a[0].object.uuid)){if(l.activeIdx=u,l.activeDragItem.reset=!1,l.activeDragItem.currentDampingFactor=l.data.dampingFactor,l.activeDragItem.snapped=!1,l.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){l.activeDragItem.obj.rigidBody&&l.activeDragItem.obj.rigidBody.setBodyType(2,!0);let f=l.activeDragItem.obj;d.hasNonUniformScale&&d.updateMatrixWorldSVD(),(f.hasNonUniformScale?f.matrixWorldRigid:f.matrixWorld).decompose(nn,Ug,eo),CN.setFromQuaternion(Ug),f.prevR===void 0?(f.prevR=CN.clone(),f.prevT=nn.clone()):(f.prevR.copy(CN),f.prevT.copy(nn)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(l.activeDragItem.obj)}this.calcPlaneIntersectPos(d,h,l.data.plane,l.data.referenceFrame),c.copy(h),(this.eventManager.controlsManager.usePhysics&&((s=d.data.physics)==null?void 0:s.rigidBody)==="dynamic"||l.data.drop===!1||l.data.resetOnSnapFail===!1)&&l.activeDragItem.fromPosition.setFromMatrixPosition(l.activeDragItem.obj.matrixWorld),this.activeEvent=l,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}u++}}this.activeEvent=null},this.onPointerMove=n=>{var s,l,u,d;if(cr.length>1)return;this.eventContext.updateRaycaster(n);let{raycaster:i,page:o}=this.eventContext,a=o.raycastWithClones(i);if(cr.length===0){let c=!1;for(let h of this.events){for(let{obj:f}of h.dragItems)if(f===((s=a[0])==null?void 0:s.object)||f===((u=(l=a[0])==null?void 0:l.object)==null?void 0:u.object)||jr.is(f)&&f.isAncestorOf((d=a[0])==null?void 0:d.object.uuid)){switch(c=!0,h.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(c)break}c||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let c=this.activeEvent.activeDragItem;c.snapped=!1;let h;if(this.activeEvent.data.drop&&(h=a.filter(f=>c.obj!==f.object&&!c.obj.isAncestorOf(f.object.uuid)&&!(f.object instanceof ix)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(g=>g===f.object.uuid||o.scene.find(g).isAncestorOf(f.object.uuid))))[0]),h){let f=_K.copy(h.face.normal).applyMatrix3(TN.getNormalMatrix(h.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")c.fromPosition.setFromMatrixPosition(h.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(c.fromPosition.copy(h.point),this.activeEvent.data.snapSurfaceMode==="bbox"){nn.copy(f).applyMatrix3(TN.setFromMatrix4(c.obj.matrixWorld).transpose());let g=c.obj;nn.x>Vy?eo.x=-g.recursiveBBox.min.x:nn.x<-Vy&&(eo.x=-g.recursiveBBox.max.x),nn.y>Vy?eo.y=-g.recursiveBBox.min.y:nn.y<-Vy&&(eo.y=-g.recursiveBBox.max.y),nn.z>Vy?eo.z=-g.recursiveBBox.min.z:nn.z<-Vy&&(eo.z=-g.recursiveBBox.max.z),eo.applyMatrix3(TN.invert())}else eo.copy(f).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);c.fromPosition.add(eo)}this.activeEvent.data.autoOrient&&(nn.set(0,1,0).cross(f),nn.length()<1e-4&&nn.set(-1,0,0).cross(f),eo.crossVectors(_K,nn),c.orientationMatrix.makeBasis(nn,eo,f)),c.pointStart.copy(c.fromPosition),c.pointEnd.copy(c.pointStart),c.currentDampingFactor=this.activeEvent.snapDampingFactor,c.snapped=!0,this.lastDropDestination!==h.object&&(this.lastDropDestination=h.object,this.activeEvent.actionsDrop.Transition.forEach(g=>{g.play()}),this.activeEvent.actionsDrop.Animation.forEach(g=>{g.play()}),this.activeEvent.actionsDrop.Audio.forEach(g=>{g.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(g=>{g.dispatchThrottled()}))}else c.orientationMatrix.makeRotationFromQuaternion(c.quat0),this.lastDropDestination=null,c.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(c.obj,c.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.stop()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(f=>{f.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(f=>f.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(f=>f.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(f=>f.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(f=>{f.stop()}))},500),this.updateDragItem(c),c.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=n=>{var i;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let o=((i=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:i.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!o)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&o&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(a=>{a.stop(),a.object.currentState!==null&&a.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(a=>{a.stop()}),this.activeEvent.actionsDrag.Audio.forEach(a=>{a.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(a=>a.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let r={};e.page.traverseEntity(n=>{n.component&&(r[n.component.uuid]?r[n.component.uuid].push(n.uuid):r[n.component.uuid]=[n.uuid])}),e.page.traverseEntity(n=>{var i;(i=n.data)==null||i.events.filter(o=>o.data.type==="DragDrop"&&!o.data.disabled).forEach(o=>{this.events.push(new N9e(n,o.data,e.page,e.sharedAssets,t,r))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,r,n){let{getCamera:i,raycaster:o}=this.eventContext;i().getWorldDirection(kf),kf.negate();let a=Ug.identity();switch(n==="parent"?L9e.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(nn,a,eo):n==="local"&&e.matrixWorld.decompose(nn,a,eo),r){case"x":nn.set(1,0,0).applyQuaternion(a),Uy.copy(kf).cross(nn),Tc.copy(nn).cross(Uy);break;case"y":nn.set(0,1,0).applyQuaternion(a),Uy.copy(kf).cross(nn),Tc.copy(nn).cross(Uy);break;case"z":nn.set(0,0,1).applyQuaternion(a),Uy.copy(kf).cross(nn),Tc.copy(nn).cross(Uy);break;case"xy":Tc.set(0,0,1).applyQuaternion(a);break;case"yz":Tc.set(1,0,0).applyQuaternion(a);break;case"xz":Tc.set(0,1,0).applyQuaternion(a);break;case"adaptive":kf.angleTo(eo.set(0,1,0))>Math.PI/6?(nn.crossVectors(eo.set(0,1,0),kf),Tc.crossVectors(nn,eo)):Tc.set(0,1,0);break;default:Tc.copy(kf);break}ig.setFromMatrixPosition(e.matrixWorld);let s=e.userData.lockedPlane?e.userData.worldPosition0:ig;if(wK.setFromNormalAndCoplanarPoint(Tc,s),!!o.ray.intersectPlane(wK,t)&&(r==="x"||r==="y"||r==="z")){let l=eo.subVectors(t,s).dot(nn);t.copy(s).addScaledVector(nn,l)}}updateDragItem(e,t=!1){var r,n;ig.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?I_.subVectors(e.fromPosition,ig).divideScalar(e.currentDampingFactor):e.reset==="original"?(I_.subVectors(e.obj.userData.worldPosition0,ig).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):I_.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(ig).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?I_.length()<I9e:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&B9e(e,I_.add(ig),(r=this.activeEvent)!=null&&r.data.drop&&((n=this.activeEvent)!=null&&n.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},jy=new X,PN=new X,Hd=new X,Gd=new X,SK=new qs,F9e=.01,z9e={type:"requestRender"},U9e=function(){let e=new X,t=new X;return(r,n,i)=>i>0?(e.subVectors(r,n),e.length()<=i?r:t.copy(n).add(e.normalize().multiplyScalar(i))):n}(),AK=function(){let e=new ft;return(t,r)=>{t.position.copy(r),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Es&&Uc(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),V9e=class{constructor(e,t,r,n,i){this.data=e,this.object=t,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new X,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...L5.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Wa(e,e.actions,r,n,i,t)}},j9e=class extends ec{constructor(e,t){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=n=>{if(!(cr.length>1)){this.eventContext.updateRaycaster(n);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=n=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=n=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onTargetChange=n=>()=>{this.updateSingleEvent(n)};let{page:r}=this.eventContext;r.traverseEntity(n=>{var o,a;let i=(o=n.data)==null?void 0:o.events.find(s=>s.data.type==="Follow"&&!s.data.disabled);i&&(!r.data.globalPhysics.usePhysics||((a=n.dataPatched.physics)==null?void 0:a.rigidBody)!=="dynamic")&&this.events.push(new V9e(i.data,n,r,e.sharedAssets,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Qs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let n=r.target,i=this.onTargetChange(r);this.pairOfEventListeners.push([n,i]),n.addEventListener("requestRender",i)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Qs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[r,n]of this.pairOfEventListeners)r.removeEventListener("requestRender",n);for(let r of this.events)r.paused=!0,r.isReset=!1,Mo(r.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var a;this.events.forEach(s=>{s.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:r,limitDistance:n,limitDistanceEnabled:i}=e.data;if(e.object.getWorldPosition(Hd),e.isReset)Gd.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Gd);else{let{getCamera:s,raycaster:l}=this.eventContext;if(r==="custom"?(s().getWorldDirection(PN),PN.negate(),jy.copy(PN)):r==="xy"?jy.set(0,0,1):r==="xz"?jy.set(0,1,0):r==="yz"&&jy.set(1,0,0),SK.setFromNormalAndCoplanarPoint(jy,Hd),!l.ray.intersectPlane(SK,Gd))return}if(!e.isReset){if(Gd.distanceTo(e.worldPosition0)>n&&i&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Gd.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Gd.x=Hd.x),e.data.enabledTranslation[1]===!1&&(Gd.y=Hd.y),e.data.enabledTranslation[2]===!1&&(Gd.z=Hd.z);let o=U9e(Hd,Gd,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let s=jy.subVectors(o,Hd).divideScalar(e.currentDampingFactor);Hd.add(s),t&&AK(e.object,Hd),e.paused=s.length()<F9e}else AK(e.object,o),e.paused=!0;(a=e.object)==null||a.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(z9e)}},L_=new X,NP=new X,B_=new ft,Hy=new xr,Ff=new xr,N_=new X,k_=new X,og=new X,Wd=new X,DN=new qs,H9e=1e-6,G9e={type:"requestRender"},W9e={type:"changeRotation"},MK=function(){let e=new ft;return function(t,r){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),r.premultiply(Fse(e).invert()),t.rotation.setFromRotationMatrix(r),t.updateMatrix(),t instanceof Es&&Uc(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),q9e=class{constructor(e,t,r){this.object=t,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new xr,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...B5.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},X9e=class extends ec{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=r=>{if(!(cr.length>1)){this._lastMouseEvent=r,this.eventContext.updateRaycaster(r);for(let n of this.events)n.target===void 0&&this.updateSingleEvent(n)}},this.onMouseEnter=r=>{for(let n of this.events)n.target===void 0&&(n.isReset=!1,n.currentDampingFactor=n.data.dampingFactor)},this.onMouseLeave=r=>{for(let n of this.events)n.target===void 0&&(n.data.resetOnPointerLeave&&(n.isReset=!0,n.currentDampingFactor=n.resetDampingFactor),this.updateSingleEvent(n))},this.onScroll=r=>{if(this._lastMouseEvent){let n=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(n)}},this.onTargetChange=r=>()=>{this.updateSingleEvent(r)},this.createUserEventListener=r=>({eventName:n,target:i})=>{if(!n||!i)return;let o=zM(n);o&&o==="LookAt"&&this.updateSingleEvent(r)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var i,o;let n=(i=r.data)==null?void 0:i.events.find(a=>a.data.type==="LookAt"&&!a.data.disabled);n&&(!t.data.globalPhysics.usePhysics||((o=r.dataPatched.physics)==null?void 0:o.rigidBody)!=="dynamic")&&this.events.push(new q9e(n.data,r,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Qs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?t.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let o=this.onTargetChange(r),a=r.target;this.pairOfEventListeners.push([a,o]),a.addEventListener("requestRender",o)}let n=this.createUserEventListener(r),i=r.object;this.pairOfUserEventListeners.push([i,n]),i.addEventListener("userEvent",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Qs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[r,n]of this.pairOfEventListeners)r.removeEventListener("requestRender",n);for(let[r,n]of this.pairOfUserEventListeners)r.removeEventListener("userEvent",n);for(let r of this.events)r.paused=!0,r.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var h;let{tilt:t,axis:r,distance:n,plane:i,limitDistance:o,enabledRotation:a,limitDistanceEnabled:s}=e.data,{getCamera:l,raycaster:u}=this.eventContext,{object:d,target:c}=e;if(d.getWorldPosition(N_),!e.isReset)if(e.target)e.target.getWorldPosition(k_);else{if(i==="custom"?(l().getWorldDirection(NP),NP.negate(),DN.setFromNormalAndCoplanarPoint(NP,N_)):(i==="xy"?L_.set(0,0,1):i==="xz"?L_.set(0,1,0):i==="yz"&&L_.set(1,0,0),DN.setFromNormalAndCoplanarPoint(L_,N_)),!u.ray.intersectPlane(DN,k_))return;n>0&&(i==="custom"||i===void 0)&&k_.addScaledVector(NP,n)}if(e.isReset||(c?t==="target"?og.copy(c.up).applyMatrix4(B_.extractRotation(c.matrixWorld)).normalize():a.some(f=>f===!1)?(r==="x"?(Wd.set(0,0,1),a[2]===!1&&Wd.set(0,1,0)):r==="y"?(Wd.set(1,0,0),a[0]===!1&&Wd.set(0,0,1)):(Wd.set(0,1,0),a[1]===!1&&Wd.set(1,0,0)),og.copy(Wd).applyQuaternion(e.worldQuaternion0).normalize()):og.set(0,1,0):i==="custom"?og.set(0,1,0):og.copy(L_)),e.isReset)Ff.copy(e.worldQuaternion0);else if(N_.distanceTo(k_)>o&&s&&c)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Ff.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;Y9e(B_,k_,N_,og,r,Wd),Ff.setFromRotationMatrix(B_),Hy.setFromUnitVectors(Wd.applyQuaternion(Ff),og),a.some(f=>f===!1)&&t!=="target"&&Ff.premultiply(Hy).normalize()}e.currentDampingFactor>1?(d.updateWorldMatrix(!0,!1),Hy.setFromRotationMatrix(Fse(d.matrixWorld)),Hy.slerp(Ff,1/e.currentDampingFactor),MK(d,B_.makeRotationFromQuaternion(Hy)),e.paused=8*(1-Hy.dot(Ff))<H9e):(MK(d,B_.makeRotationFromQuaternion(Ff)),e.paused=!0),(h=e.object)==null||h.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),d.dispatchEvent(G9e),d.dispatchEvent(W9e)}},El=new X,$i=new X,Mi=new X;function Y9e(e,t,r,n,i,o){let a=e.elements;Mi.subVectors(t,r),Mi.lengthSq()===0&&(Mi.z=1),Mi.normalize(),$i.crossVectors(n,Mi),$i.lengthSq()===0&&(Math.abs(n.z)===1?Mi.x+=1e-4:Mi.z+=1e-4,Mi.normalize(),$i.crossVectors(n,Mi)),$i.normalize(),El.crossVectors(Mi,$i),i==="x"?o.z===1?[$i,El,Mi]=[Mi,$i,El]:($i.negate(),[$i,Mi]=[Mi,$i]):i==="y"?o.x===1?[$i,El,Mi]=[El,Mi,$i]:($i.negate(),[El,Mi]=[Mi,El]):o.x===1&&($i.negate(),[$i,El]=[El,$i]),a[0]=$i.x,a[4]=El.x,a[8]=Mi.x,a[1]=$i.y,a[5]=El.y,a[9]=Mi.y,a[2]=$i.z,a[6]=El.z,a[10]=Mi.z}var K9e=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.entered=!1,this.actions=Wa(t,t.actions,n,i,o,r)}disconnect(){Mo(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},J9e=class extends ec{constructor(e,t){super(e),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=i=>{cr.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onMouseUp=i=>{cr.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=i=>{cr.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:i,target:o,reverse:a})=>{var l;if(!i||!o)return;let s=zM(i);s&&s==="MouseHover"&&(o.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(l=this.eventsPerObjects[o.uuid])==null||l.forEach(u=>u.dispatchUserEvent(a)))};let{page:r,sharedAssets:n}=this.eventContext;r.traverseEntity(i=>{var o,a;if(!(!i.visible||!((o=i.data)!=null&&o.events.length))){for(let{id:s,data:l}of i.data.events)if(!l.disabled&&l.type==="MouseHover")try{let u=new K9e(s,l,i,r,n,t);this.eventsPerObjects[i.uuid]?this.eventsPerObjects[i.uuid].push(u):this.eventsPerObjects[i.uuid]=[u]}catch{}(a=this.eventsPerObjects[i.uuid])!=null&&a.length&&this.objects.push(i)}})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Qs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(t=>{t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Qs&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(r=>{r.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:r,raycaster:n,page:i}=this.eventContext;if(r){let o=O2(n,i,this.objects);t=Gz(o)}else this.objects.forEach(o=>{yO(n,o)&&t.push(o)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{var n;t.includes(r)||(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(n=this.eventsPerObjects[r.uuid])==null||n.forEach(i=>i.dispatchLeave()))}),t.length&&t.forEach(r=>{var n;r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(n=this.eventsPerObjects[r.uuid])==null||n.forEach(i=>i.dispatchEnter())}),this._prevObjects=t}},Q9e=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.scrollCounter=0,this.actions=Wa(t,t.actions,n,i,o,r)}connect(){this.scrollCounter=0}disconnect(){Mo(this.actions)}dispatch(e){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let r=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(n=>n.seek(r)),this.actions.Animation.forEach(n=>n.seek(t)),this.actions.Create.forEach(n=>n.dispatchThrottled()),this.actions.SetVariable.forEach(n=>n.checkConditions()),this.actions.SetVariable.forEach(n=>n.dispatch()),this.actions.DynamicVariablePlay.forEach(n=>n.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},Z9e=class{constructor(e,t,r,n,i,o,a){this.id=e,this.data=t,this.object=r,this.domElement=o,this.eventManager=a,this.scrollStart=0,this.scrollEnd=0,this.actions=Wa(t,t.actions,n,i,a,r)}computeScrollBounds(){let e=this.domElement.getBoundingClientRect(),t=document.body,r=document.documentElement,n=window.pageYOffset||r.scrollTop||t.scrollTop,i=r.clientTop||t.clientTop||0,o=Math.round(e.top+n-i);if(this.data.startFrom==="enter"){let a=window.innerHeight,s=e.height,l=this.data.enterAnchor,u=l==="top"?a:l==="bottom"?a-s:a-s*.5;this.scrollStart=o-u}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){Mo(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let r=this.scrollEnd-this.scrollStart,n=Math.min(1,Math.max(0,(t-this.scrollStart)/r));this.actions.Transition.forEach(i=>i.seek(n)),this.actions.Animation.forEach(i=>i.seek(n)),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}},$9e=class extends ec{constructor(e,t){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([a,s])=>{s.forEach(l=>l.handleResize())})},this.onScroll=a=>{if(!this.isInview)return;let s={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([l,u])=>{l.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:s}),u.forEach(d=>d.dispatch(s))})},this.onWheel=a=>{!this.isInview||a.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([s,l])=>{s.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:a.deltaY}),l.forEach(u=>u.dispatch(a.deltaY))})},this.onUserEvent=({eventName:a,target:s,reverse:l})=>{var d;if(!a||!s)return;let u=zM(a);u&&u==="Scroll"&&(s.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(d=this.wheelEventsPerObject.get(s))==null||d.forEach(c=>{c.dispatchUserEvent(l)}))};let{page:r,sharedAssets:n,domElement:i,isExport:o}=this.eventContext;r.traverseEntity(a=>{var s,l,u;if((s=a.data)!=null&&s.events.length){for(let{id:d,data:c}of a.data.events)if(!c.disabled&&c.type==="Scroll")if(c.trigger==="load"||!o){let h=new Q9e(d,c,a,r,n,t);this.wheelEventsPerObject.has(a)?(l=this.wheelEventsPerObject.get(a))==null||l.push(h):this.wheelEventsPerObject.set(a,[h])}else{let h=new Z9e(d,c,a,r,n,i,t);this.scrollEventsPerObject.has(a)?(u=this.scrollEventsPerObject.get(a))==null||u.push(h):this.scrollEventsPerObject.set(a,[h])}}}),this.intersectionObserver=new IntersectionObserver(a=>{let s=a[0];s&&(this.isInview=s.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},e7e=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.actions=Wa(t,t.actions,n,i,o,r)}disconnect(){Mo(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof zg?t.interaction.audioPlayer.play():t.interaction instanceof Fz&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let r=t.interaction.data.triggerAfter??"autoplay";r===e&&(t.interaction instanceof sx?t.interaction.play(r==="autoplay"):t.interaction instanceof jz&&t.interaction.dispatch())})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof zg?t.interaction.audioPlayer.play():t.interaction instanceof Fz&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof sx?t.interaction.play():t.interaction instanceof jz&&t.interaction.dispatch()})}},t7e=class extends ec{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>{i.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>{i.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:n}=this.eventContext;(n?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,o])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(a=>{a.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>{i.actions.Audio.forEach(o=>{o.interaction instanceof zg&&o.interaction.audioPlayer.play()}),i.actions.Video.forEach(o=>{let a=o.interaction.data.triggerAfter??"autoplay";o.interaction instanceof sx&&o.interaction.play(a==="autoplay")})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>{i.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:n,reverse:i})=>{var a,s;if(!r||!n)return;let o=zM(r);o&&o==="Start"&&(n.dispatchEvent({type:"beginEvent",eventName:"Start"}),(a=this.eventsPerObject.get(n))==null||a.forEach(l=>{l.dispatchUserEvent(i)}),(s=this.eventsAfterPerObject.get(n))==null||s.forEach(l=>{l.dispatchUserEvent(i)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext;if(t.traverseEntity(r=>{var n,i,o,a;if((n=r.data)!=null&&n.events.length)for(let{id:s,data:l}of r.data.events){if(l.disabled||l.type!=="Start")continue;let u=new e7e(s,l,r,t,e,this.eventManager);(u.actions.Transition.length||u.actions.Animation.length||u.actions.SwitchCamera.length||u.actions.Create.length||u.actions.Destroy.length||u.actions.SceneTransition.length||u.actions.Reset.length||u.actions.SetVariable.length||u.actions.DynamicVariablePlay.length)&&(this.eventsPerObject.has(r)?(i=this.eventsPerObject.get(r))==null||i.push(u):this.eventsPerObject.set(r,[u])),u.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(o=this.eventsAfterPerObject.get(r))==null||o.push(u):this.eventsAfterPerObject.set(r,[u])),u.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(u):this.eventsAfterPerObject.set(r,[u]))}}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:n}=this.eventContext,i=n?document:r;i.addEventListener("pointerdown",this.onMouseDown,{once:!0}),i.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),i.addEventListener("pointerdown",this.onAny),i.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,a])=>{o.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(i=>i.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,r=t?document:e;r.removeEventListener("pointerdown",this.onMouseDown),r.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.removeEventListener("userEvent",this.onUserEvent),i.forEach(o=>o.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(r=>r.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},r7e=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Wa(t,t.actions,n,i,o,r),this.target=t.target,this.useToggle=t.runMode==="Toggle"}disconnect(){Mo(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(t)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()})):(this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}))}},n7e=class extends ec{constructor(e,t,r,n,i){super(e),this.sharedVariables=t,this.eventManager=r,this.needsMouse=n,this.needsRaycast=i,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.events=[],this.onFrame=o=>{this.rafId=window.requestAnimationFrame(this.onFrame);let a=new Date,s=[],l=[];for(let c=0;c<this.propertiesToWatch.length;c++){let{objectId:h,property:f,prevValue:g}=this.propertiesToWatch[c],y=this.eventContext.scene.find(h),m=k5.propertyPaths[f];if(m[0]==="width"||m[0]==="height"||m[0]==="depth")y=y.geometry.userData.parameters[m[0]];else for(let p=0;p<m.length;p++)y=y[m[p]];g===null?this.propertiesToWatch[c].prevValue=y instanceof X?y.clone():y:(y instanceof X?!y.equals(g):g!==y)&&(l.push({objId:h,property:f}),y instanceof X?this.propertiesToWatch[c].prevValue.copy(y):this.propertiesToWatch[c].prevValue=y)}for(let c=0;c<this.variablesToWatch.length;c++){let{id:h,prevValue:f}=this.variablesToWatch[c],g=this.shared.getVariable(h);g!==f&&(s.push(h),this.variablesToWatch[c].prevValue=g)}for(let c=0;c<this.dynamicVars.length;c++){let{id:h,expectedTime:f,last:g,data:y,timerSeconds:m,startValue:p}=this.dynamicVars[c],v=1e3;if((y.dynamicVariableType==="timer"||y.dynamicVariableType==="stopwatch")&&y.format==="number3decimal"?v=1:y.dynamicVariableType==="counter"?v=y.updateInterval:y.dynamicVariableType==="random"&&(v=y.isStatic?1/0:y.updateInterval),f===-1){this.dynamicVars[c].last=o,this.dynamicVars[c].expectedTime=o+v;continue}if(!((this.shared.getDynamicVariablePlayState(h)==="Stopped"||this.shared.getDynamicVariablePlayState(h)==="Restarted")&&(this.dynamicVars[c].last=o,this.dynamicVars[c].expectedTime=o+v,y.dynamicVariableType==="counter"&&this.shared.getVariable(h)!==p&&(this.shared.updateVariable(h,p),this.eventManager.requestRender()),(y.dynamicVariableType==="timer"||y.dynamicVariableType==="stopwatch")&&this.dynamicVars[c].timerSeconds!==p&&(this.dynamicVars[c].timerSeconds=p,this.shared.updateVariable(h,Tu.getFormattedTimerTime(p,y)),this.eventManager.requestRender()),this.shared.getDynamicVariablePlayState(h)==="Restarted"&&this.shared.setDynamicVariablePlayState(h,"Playing"),this.shared.getDynamicVariablePlayState(h)==="Stopped"))){if(this.shared.getDynamicVariablePlayState(h)==="Paused"){this.dynamicVars[c].deltaToExpectedTime===void 0&&(this.dynamicVars[c].deltaToExpectedTime=Math.max(this.dynamicVars[c].expectedTime-o,0)),this.dynamicVars[c].last=o-(v-this.dynamicVars[c].deltaToExpectedTime),this.dynamicVars[c].expectedTime=o+this.dynamicVars[c].deltaToExpectedTime;continue}else this.dynamicVars[c].deltaToExpectedTime=void 0;if(o>=f)if(this.dynamicVars[c].last=o,this.dynamicVars[c].expectedTime+=v,y.dynamicVariableType==="random"){let b=y.min+Math.random()*(y.max-y.min),x=y.decimals;b=Math.round(b*Math.pow(10,x))/Math.pow(10,x),this.shared.updateVariable(h,b),s.push(h),this.eventManager.requestRender()}else if(y.dynamicVariableType==="counter"){if(y.increment===0)continue;let b=this.shared.getVariable(h),x=this.shared.getDynamicVariableToggleIsForward(h)??!0,_=this.shared.getVariable(h)+y.increment*(x?1:-1);y.hasEnd&&(_=y.increment>0?Ht.clamp(_,p,y.endValue):Ht.clamp(_,y.endValue,p),_===p&&this.shared.setDynamicVariableToggleIsForward(h,void 0),y.repeat?_===y.endValue&&(_=p):(_===p||_===y.endValue)&&this.shared.setDynamicVariablePlayState(h,"Paused")),_!==b&&(s.push(h),this.shared.updateVariable(h,_),this.eventManager.requestRender())}else if(y.dynamicVariableType==="time")this.shared.updateVariable(h,eY(a,y)),s.push(h),this.eventManager.requestRender();else{let b=Zs.isTextValue(y.endValue)?CK(y.endValue.textValue):y.endValue,x=this.shared.getDynamicVariableToggleIsForward(h)??!0,_=m+(o-g)/1e3*(y.dynamicVariableType==="timer"?-1:1)*(x?1:-1);_=Math.max(_,0),y.hasEnd&&(_=y.dynamicVariableType==="stopwatch"?Ht.clamp(_,p,b):Ht.clamp(_,b,p),_===p&&this.shared.setDynamicVariableToggleIsForward(h,void 0),y.repeat?Math.abs(_-b)<(y.format==="number3decimal"?1e-4:.1)&&(_=p):(Math.abs(_-p)<(y.format==="number3decimal"?1e-4:.1)||Math.abs(_-b)<(y.format==="number3decimal"?1e-4:.1))&&this.shared.setDynamicVariablePlayState(h,"Paused")),_!==m&&(s.push(h),this.dynamicVars[c].timerSeconds=_,this.shared.updateVariable(h,Tu.getFormattedTimerTime(_,y)),this.eventManager.requestRender())}}}this.needsMouse&&this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,this.events.forEach(c=>{c.data.variableId==="mouseProperty"&&(c.dispatch(),this.eventManager.requestRender())}));let u=!1;this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,u=!0);let d=!1;this.shared.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=this.shared.raycastProperty,d=!0),this.events.forEach(c=>{(s.includes(c.data.variableId)||l.find(h=>h.objId===c.data.objectId&&h.property===c.data.property)||c.data.variableId==="mouseProperty"&&u||c.data.variableId==="raycastProperty"&&d)&&(c.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()},e.page.traverseEntity(o=>{var a;(a=o.data)==null||a.events.filter(s=>s.data.type==="VariableChange"&&!s.data.disabled).forEach(s=>{this.events.push(new i7e(o.uuid,s.data,o,e.page,e.sharedAssets,r))})}),this.propertiesToWatch=this.events.filter(o=>o.data.variableId==="objectProperty"&&o.data.objectId!==null).map(o=>({objectId:o.data.objectId,property:o.data.property,prevValue:null})),this.shared=e.sharedAssets,this.sharedVariables.forEach(({id:o,data:a})=>{if(!("dynamicVariableType"in a)){this.events.find(l=>l.data.variableId===o)&&this.variablesToWatch.push({id:o,prevValue:this.shared.getVariable(o)});return}let s;if(a.dynamicVariableType==="timer"||a.dynamicVariableType==="stopwatch"){let l;if(Zs.isTextValue(a.value)&&Array.isArray(a.value.textValue)){let u=a.value.textValue;u.length===3?l=u[2]+u[1]*60+u[0]*3600:l=u[1]+u[0]*60}else l=a.value;s=l,this.dynamicVars.push({id:o,last:-1,expectedTime:-1,data:a,timerSeconds:l,startValue:s})}else a.dynamicVariableType==="time"&&this.shared.updateVariable(o,eY(new Date,a)),a.dynamicVariableType==="counter"&&(s=Zs.isTextValue(a.value)?CK(a.value.textValue):a.value),this.dynamicVars.push({id:o,last:-1,expectedTime:-1,data:a,startValue:s})})}pause(){this.pauseTime=Date.now()}resume(){let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},i7e=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.actions=Wa(t,t.actions,n,i,o,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch())}dispose(){Mo(this.actions)}};function CK(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var o7e="https://unpkg.com/@splinetool/runtime@0.9.520/build/",a7e="https://unpkg.com/@splinetool/navmesh-wasm@0.9.520/build/",s7e=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${o7e}' + 'navmesh.js'),
		fetch('${a7e}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,l7e=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,u7e=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,c7e=.001,d7e={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},Gse,Fr,Lo;hze.then(e=>{Gse=e,Fr=new e.Vec3,Lo=new e.Vec3});var h7e=new X,f7e=class{constructor(t=!1,r=!1){this.usePhysics=t,this.isExport=r,this.onPointerDown=n=>{if(cr.length!==1)return;let{raycaster:i,page:o}=this.eventContext;this.eventContext.updateRaycaster(n);let a=o.raycastWithClones(i);if(a.length!==0){if(this.gameControl){let s=h7e.copy(this.gameControl.colliderWorldPosition);s.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(s,a[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(n,i)=>o=>{var f,g,y,m,p,v,b;let a;if(o instanceof Lu)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;a=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof ia)a=o.object;else if(a=o,((f=a.dataPatched.cloner)==null?void 0:f.disabled)===!1&&((g=a.dataPatched.cloner)==null?void 0:g.hideBase)&&((y=a.dataPatched.physics)==null?void 0:y.fusedBody)!==!0)return!0;if(i&&!a.userData.navmesh)return;let s=a.dataPatched;if(!s.visible&&((m=s.physics)==null?void 0:m.enabled)!==!0)return!0;o.updateMatrixWorldSVD();let l=bO(s),u=a.userData.hasDestroy,d=a.userData.hasDrag,c=!1,h=!1;for(let x of s.events)x.data.disabled!==!0&&(x.data.type==="GameControl"?c=!0:x.data.type==="Follow"&&(h=!0));if(c||l||h||u||d)return!0;if(this.usePhysics&&((p=s.physics)==null?void 0:p.rigidBody)==="dynamic"){if(this.usePhysics&&((v=s.physics)!=null&&v.fusedBody))return!0}else if("geometry"in o&&o.geometry&&n.push(nh(o.geometry,o.matrixWorld)),this.usePhysics&&((b=s.physics)==null?void 0:b.fusedBody))return o.traverseObject((x,_)=>{var T,C;if(_===0)return;let A;if(x instanceof Lu)if(x.objectForSample){if(x.objectForSample.dataPatched.physics.fusedBody)return;A=x.object}else return x.object.dataPatched.physics.fusedBody===!0&&x.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(x instanceof ia)A=x.object;else if(A=x,(T=x.dataPatched.cloner)==null?void 0:T.hideBase)return!0;let M=A.dataPatched;if(!M.visible&&((C=M.physics)==null?void 0:C.enabled)!==!0)return!0;"geometry"in x&&x.geometry&&n.push(nh(x.geometry,x.matrixWorld))}),!0},this.traverseNoPhysics=(n,i)=>o=>{let a;if(o instanceof Lu)return;o instanceof ia?a=o.object:a=o;let s=a.dataPatched;if(s.physics.enabled==="visibility"?!s.visible:!s.physics.enabled)return!0;if(i&&!a.userData.navmesh)return;let l=o.geometry,u=a.userData.hasDestroy===!0,d=a.userData.hasDrag===!0;if(bO(s)||u||d||a.dataPatched.events.some(c=>c.data.disabled!==!0&&c.data.type==="GameControl"))return!0;l&&n.push(nh(l,o.matrixWorld))},this.navmeshWasm=Gse,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(r?s7e:l7e)+u7e])),this._worker=new Worker(this._workerURL)}init(t,r,n){this.gameControl=r,this.eventContext=n,this.resolution=t.ch,this.setDefaultQueryExtent(new X().setScalar(t.ch*t.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(n.page,t,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(t,r,n){r.objects.forEach(u=>{var c;let d=t.scene.find(u);d.traverseEntity(h=>{h.userData.navmesh=!0}),(c=d.cloner)==null||c.traverseObject(h=>{h.userData.navmesh=!0})});let i=[],o=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,r.zones==="custom");if(t.traverseChildren(o),r.objects.forEach(u=>{var c;let d=t.scene.find(u);d.traverseEntity(h=>{h.userData.navmesh=void 0}),(c=d.cloner)==null||c.traverseObject(h=>{h.userData.navmesh=void 0})}),i.length===0)return!1;let a=kg(i),{positions:s,triIndices:l}=sI(a.getAttribute("position"),a.getIndex());return this._worker.postMessage([s,s.length/3,l,l.length,{...d7e,...r}]),this._worker.onmessage=n,!0}createDebugNavGeometry(){let t,r,n=this.navMesh.getDebugNavMesh(),i=n.getTriangleCount(),o=new Uint32Array(i*3),a=new Float32Array(i*3*3);for(t=0;t<i*3;t++)o[t]=t;for(t=0;t<i;t++)for(r=0;r<3;r++){let l=n.getTriangle(t).getPoint(r);a[t*9+r*3+0]=l.x,a[t*9+r*3+1]=l.y,a[t*9+r*3+2]=l.z}let s=new Jt;return s.setIndex(new fr(o,1)),s.setAttribute("position",new fr(a,3)),s}getClosestPoint(t){return Fr.x=t.x,Fr.y=t.y,Fr.z=t.z,this.navMesh.getClosestPoint(Fr)}getClosestPointToRef(t,r){Fr.x=t.x,Fr.y=t.y,Fr.z=t.z;let n=this.navMesh.getClosestPoint(Fr);r.set(n.x,n.y,n.z)}getRandomPointAround(t,r){return Fr.x=t.x,Fr.y=t.y,Fr.z=t.z,this.navMesh.getRandomPointAround(Fr,r)}getRandomPointAroundToRef(t,r,n){Fr.x=t.x,Fr.y=t.y,Fr.z=t.z;let i=this.navMesh.getRandomPointAround(Fr,r);n.set(i.x,i.y,i.z)}moveAlong(t,r){return Fr.x=t.x,Fr.y=t.y,Fr.z=t.z,Lo.x=r.x,Lo.y=r.y,Lo.z=r.z,this.navMesh.moveAlong(Fr,Lo)}moveAlongToRef(t,r,n){return Fr.x=t.x,Fr.y=t.y,Fr.z=t.z,Lo.x=r.x,Lo.y=r.y,Lo.z=r.z,this.navMesh.moveAlong(Fr,Lo)}computePath(t,r){let n=this.getClosestPoint(r);Lo.x=n.x,Lo.y=n.y,Lo.z=n.z,this.getClosestPoint(t);let i=this.navMesh.computePath(Fr,Lo),o=i.getPointCount(),a=[];for(let s=0;s<o;s++){let l=i.getPoint(s);a.push(new X(l.x,l.y,l.z))}return a}createCrowd(t,r){return new p7e(this,t,r)}setDefaultQueryExtent(t){Fr.x=t.x,Fr.y=t.y,Fr.z=t.z,this.navMesh.setDefaultQueryExtent(Fr)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(t){let r=t.length*t.BYTES_PER_ELEMENT,n=this.navmeshWasm._malloc(r),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,n,r);i.set(t);let o=new this.navmeshWasm.NavmeshData;o.dataPointer=i.byteOffset,o.size=t.length,this.navMesh.buildFromNavmeshData(o),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let t=this.navMesh.getNavmeshData(),r=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,t.dataPointer,t.size),n=new Uint8Array(t.size);return n.set(r),this.navMesh.freeNavmeshData(t),n}getDefaultQueryExtentToRef(t){let r=this.navMesh.getDefaultQueryExtent();t.set(r.x,r.y,r.z)}dispose(){var t;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(t=this.eventContext)==null||t.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(t,r,n){return Fr.x=t.x,Fr.y=t.y,Fr.z=t.z,this.navMesh.addCylinderObstacle(Fr,r,n)}addBoxObstacle(t,r,n){return Fr.x=t.x,Fr.y=t.y,Fr.z=t.z,Lo.x=r.x,Lo.y=r.y,Lo.z=r.z,this.navMesh.addBoxObstacle(Fr,Lo,n)}removeObstacle(t){this.navMesh.removeObstacle(t)}isSupported(){return this.navmeshWasm!==void 0}},p7e=class{constructor(e,t,r){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,r,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,r){let n=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;n.radius=t.radius,n.height=t.height,n.maxAcceleration=t.maxAcceleration,n.maxSpeed=t.maxSpeed,n.collisionQueryRange=t.collisionQueryRange,n.pathOptimizationRange=t.pathOptimizationRange,n.separationWeight=t.separationWeight,n.updateFlags=7,n.obstacleAvoidanceType=0,n.queryFilterType=0,n.userData=0;let i=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),n);return this.transforms.push(r),this.agents.push(i),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new X(0,0,0)),i}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let r=this.crowd.getAgentPosition(e);t.set(r.x,r.y,r.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let r=this.crowd.getAgentVelocity(e);t.set(r.x,r.y,r.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let r=this.crowd.getAgentNextTargetPath(e);t.set(r.x,r.y,r.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let r=this.agents.indexOf(e);r>-1&&(this._agentDestinationArmed[r]=!0,this._agentDestination[r].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let r=this.crowd.getAgentParameters(e);t.radius!==void 0&&(r.radius=t.radius),t.height!==void 0&&(r.height=t.height),t.maxAcceleration!==void 0&&(r.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(r.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(r.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(r.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(r.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,r)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=c7e)return;let t=1/60,r=10;{let n=Math.floor(e/t);n>r&&(n=r),n<1&&(n=1);let i=e/n;for(let o=0;o<n;o++)this.crowd.update(i)}for(let n=0;n<this.agents.length;n++){let i=this.agents[n],o=this.getAgentPosition(i);if(this.transforms[n].copy(o),this._agentDestinationArmed[n]){let a=o.x-this._agentDestination[n].x,s=o.z-this._agentDestination[n].z,l=this.reachRadii[n],u=this._agentDestination[n].y-this.reachRadii[n],d=this._agentDestination[n].y+this.reachRadii[n],c=a*a+s*s;o.y>u&&o.y<d&&c<l*l&&(this.onReachTarget(i,this._agentDestination[n]),this._agentDestinationArmed[n]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,r=this.crowd.getCorners(e),n=r.getPointCount(),i=[];for(t=0;t<n;t++){let o=r.getPoint(t);i.push(new X(o.x,o.y,o.z))}return i}dispose(){this.crowd.destroy()}};function m7e(e){let t=!1;return e.scene.objects.forEach(r=>{r.data.type==="Page"&&!t&&r.data.publish.gameControlObject&&BA.traverseModuleInstances(e,r.id,(n,i,o)=>{for(let a of o)a.data.type==="GameControl"&&a.data.navmesh.enabled&&(t=!0)})}),t}var g7e={type:"change"},TK={type:"changeZoom"},v7e={type:"changePan"},Gy={type:"start"},Wy={type:"end",changed:!0},y7e={type:"end",changed:!1},ON=new xr,EK=new Ae,b7e=2*Math.PI,x7e=1e-8,w7e=.01,RN=new X,kP=new Ae,IN=new X,FP=new xr,PK=new ft,_7e={type:"requestRender"},Wse=class extends Vo{constructor(e,t,r={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,_l.DOLLY_ROTATE,_l.PAN],this.offset=new X,this.eye=new X,this.lastPosition=new X,this.lastQuaternion=new xr,this.current=new Ae,this.overShoot=new Ae,this.overRatio=new Ae,this.spherical=new P7,this.sphericalDelta=new P7,this.panOffset=new X,this.panLeftV=new X,this.panUpV=new X,this.panV=new X,this.rotateStart=new Ae,this.rotateEnd=new Ae,this.rotateDelta=new Ae,this.panStart=new Ae,this.panEnd=new Ae,this.panDelta=new Ae,this.dollyStart=new Ae,this.dollyEnd=new Ae,this.dollyDelta=new Ae,this.rotationRangeFactor=new Ae,this.panRangeFactor=new Ae,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=n=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=n.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(IN,FP,RN),this.offset.copy(IN).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(ON.copy(FP).invert()),this.panOffset.applyQuaternion(ON),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(FP),this.panOffset.applyQuaternion(FP)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),IN.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(PK.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(PK));let n=this.spherical.phi%b7e;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(bn.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),n>0&&n>Math.PI||n<0&&n>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let i=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-i,this.sphericalDelta.phi*=1-i}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>w7e||8*(1-this.lastQuaternion.dot(this.object.quaternion))>x7e?(this.dispatchEvent(g7e),this.object.dispatchEvent(_7e),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=n=>{this.enabled!==!1&&(n.pointerType==="touch"||n.pointerType==="pen"&&Qs?this.onPointerDownTouch(n):this.onPointerDownMouse(n),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(Gy),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),n.stopPropagation(),n.pointerType==="touch"||n.pointerType==="pen"&&Qs||this.domElement.setPointerCapture(n.pointerId)))},this.onPointerLeave=n=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,RN.subVectors(this.position0,this.target0),this.spherical.setFromVector3(RN),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=n},this.onPointerEnter=n=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?kP.set(n.clientX-this.domElement.clientWidth/2,n.clientY-this.domElement.clientHeight/2):kP.set(n.clientX-this.pointerLeaveEvent.clientX,n.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(kP).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(EK,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(n.clientX,n.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(kP).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(n.clientX,n.clientY)),this.update()},this.onPointerMove=n=>{this.enabled!==!1&&(this.checkRaycastLock()||(n.pointerType==="touch"||n.pointerType==="pen"&&Qs?this.onPointerMoveTouch(n):this.onPointerMoveMouse(n),n.stopPropagation()))},this.onPointerUp=n=>{this.isPointerDown=!1,cr.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),cr.length>1&&n.preventDefault(),this.hasChange?this.dispatchEvent(Wy):this.dispatchEvent(y7e),this.state=-1,n&&(n.stopPropagation(),n.pointerType==="touch"||n.pointerType==="pen"&&Qs||this.domElement.releasePointerCapture(n.pointerId))},this.onPointerDownMouse=n=>{let i;switch(this.useKeyEvents?i=this.mouseButtons[n.button]:i=this.mouseButtonsPlay[n.button],i){case 0:if(n.altKey===!0&&!n.shiftKey&&!eP(n)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(n),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(n),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(n),this.state=2;break;case 3:if(eP(n)||n.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(n),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(n),this.state=0}break;case 5:if(eP(n)||n.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(n),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(n),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=n=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(n);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(n);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(n);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=n=>{switch(cr.length>1&&n.preventDefault(),this.touches[cr.length-1]){case _l.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case _l.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case _l.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case _l.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=n=>{switch(cr.length>1&&n.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(n),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(n),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(n),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(n),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=lj(()=>this.dispatchEvent(Wy),33),this.onMouseWheel=n=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&n.preventDefault(),this.dispatchEvent(Gy),this.handleMouseWheel(n),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=n=>{if(n.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!uj)if(n.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(Gy),n.scale>this.prevScale?this.dollyIn(this.getZoomScale()):n.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=n.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Wy)},this.onContextMenu=n=>{n.preventDefault()},this.onTouchEnd=n=>{n.preventDefault()},this.onKeyDown=n=>{this.enabled!==!1&&(this.key=n.key,n.key===" "&&this.dispatchEvent(Gy))},this.onKeyUp=n=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&n.key==="Alt"&&this.onPointerUp(cr[0]),n.key===" "&&this.dispatchEvent(Wy))},this.onPointerHover=n=>{n.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(n,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(n,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=n=>{n.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=r**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let n=this.object.getTarget().applyQuaternion(ON.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+n.y,this.maxV=e.panVerticalOffset.max+n.y,this.minH=-e.panHorizontalOffset.min+n.x,this.maxH=e.panHorizontalOffset.max+n.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Ec(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Ec(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Ec(Ec(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=Ec(Ec(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=_l.ROTATE),e.panTouches===1&&(this.touches[0]=_l.PAN),e.orbitTouches===2&&(this.touches[1]=_l.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=_l.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=_l.ROTATE),e.panTouches===3&&(this.touches[2]=_l.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,n,i,o,a,s){this.overShoot.set(0,0);let l,u,d;e instanceof X?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),d=!0):(l=e.theta,u=e.phi,this.current.set(Ec(this.spherical.theta),Ec(this.spherical.phi)),d=!1),r===0&&(this.current.x+=l,this.current.y+=u),(t===3||t===2)&&(!d&&this.isThetaFlipped?this.current.x>n&&this.current.x<0?this.overShoot.x=n-this.current.x:this.current.x<i&&this.current.x>0&&(this.overShoot.x=i-this.current.x):this.current.x>n?this.overShoot.x=n-this.current.x:this.current.x<i&&(this.overShoot.x=i-this.current.x)),(t===3||t===1)&&(this.current.y>o?this.overShoot.y=o-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y)),d||(this.overShoot.x=Ec(this.overShoot.x),this.overShoot.y=Ec(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(s),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=DK(Math.abs(this.overRatio.x)),this.overRatio.y=DK(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&!this.phiIsFree&&(u*=1-this.overRatio.y)):r===2&&(!d&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(u=this.overShoot.y*.05),d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof X?(e.x=l,e.y=u):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=u))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let n=this.object.position;this.panV.copy(n).sub(this.target);let i=this.panV.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*i/r.clientHeight,this.object.matrixWorld),this.panUp(2*t*i/r.clientHeight,this.object.matrixWorld)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrixWorld));this.dispatchEvent(v7e)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(TK)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(TK)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Gy),this.dollyOut(e),this.dispatchEvent(Wy)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Gy),this.dollyIn(e),this.dispatchEvent(Wy)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(EK,-this.object.angleOffsetFromUp);let r=this.domElement,n=this.useWindowEvents?window.innerHeight:r.clientHeight,i=2*Math.PI*this.rotateDelta.x/n,o=2*Math.PI*this.rotateDelta.y/n;this.rotateLeft(i),this.rotateUp(o),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(sze===!1&&eP(e)===!1&&S7e(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(cr.length===2){let e=.5*(cr[0].pageX+cr[1].pageX),t=.5*(cr[0].pageY+cr[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(cr[0].pageX,cr[0].pageY)}handleTouchStartPan(){if(cr.length===2){let e=.5*(cr[0].pageX+cr[1].pageX),t=.5*(cr[0].pageY+cr[1].pageY);this.panStart.set(e,t)}else this.panStart.set(cr[0].pageX,cr[0].pageY)}handleTouchStartDolly(){let e=cr[0].pageX-cr[1].pageX,t=cr[0].pageY-cr[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(cr.length===2){let r=CB(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this.rotateEnd.set(n,i)}else{if(e.pointerId!==cr[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(cr.length===2){let t=CB(e),r=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);this.panEnd.set(r,n)}else{if(e.pointerId!==cr[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=CB(e),r=e.pageX-t.x,n=e.pageY-t.y,i=Math.sqrt(r*r+n*n);this.dollyEnd.set(0,i),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function Ec(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function DK(e){return 1-Math.pow(1-e,4)}function S7e(e){return e.wheelDeltaY===0||e.deltaY===0?eI&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var OK=class{constructor(e,t,r,n,i,o){this.id=e,this.data=t,this.object=r,this.page=n,this.currentIntersectedObjects=[],this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Wa(t,t.actions,n,i,o,r),this.target=t.target,this.useToggle=t.runMode==="Toggle",this.triggeringObjects=t.triggeringObjects.map(a=>n.scene.find(a))}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){Mo(this.actions)}dispatch(){this.disabled||this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this?(e.object.currentTransitionEvent=this,e.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(e)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{this.alreadyPlayedNonTogglingActions.has(e)===!1&&e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}},qr;pze.then(e=>qr=e);var Ni=new X,bu=new xr,zf=new X,LN=new So(0,0,0,"YXZ"),RK=new So(0,0,0,"XYZ"),xu=new X,BN=new X,NN=new X(1,1,1),qy=new xr,zP=new ft,IK=new ft,A7e={type:"updateMatrix"},LK=new xr,kN=new Ts,Wz={type:"beginEvent",eventName:"Collision"},M7e={type:"beginEvent",eventName:"Trigger"};function C7e(e){if(BA.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((r,n)=>{if(n.events){if(Array.isArray(n.events)){for(let i of n.events)if(i.data.disabled!==!0&&i.data.type==="GameControl"&&i.data.collisionEnabled){t=!0;break}}else for(let i of Object.values(n.events))if(i.disabled!==!0&&i.type==="GameControl"&&i.collisionEnabled){t=!0;break}}}),t}var bO=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),T7e=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==qr.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[r,n,i]=this.rigidBodyToMesh.get(t.handle);if(Ni.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),bu.copy(t.rotation()),r.matrixWorld.compose(Ni,bu,n),r.hasNonUniformScale&&r.matrixWorld.multiply(r.shearScale),r.dispatchEvent(A7e),i){let o=r.cloner;if(o&&o.objectForSample===void 0){o.matrixWorld.copy(r.matrixWorld);for(let a of o.children)a.updateMatrixWorld(!0)}for(let a of r.children)a.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,r,n)=>{var a,s,l,u;if(n===!1)return;let i,o;if(this.sensorToTriggerEvent[t]?(i=this.sensorToTriggerEvent[t],o=this.sharedGameControlGlobals.colliderToEntity.get(r)):this.sensorToTriggerEvent[r]&&(i=this.sensorToTriggerEvent[r],o=this.sharedGameControlGlobals.colliderToEntity.get(t)),i&&o&&i.isValidTriggeringObject(o)){i.dispatch();return}for(let d=this.sharedGameControlGlobals.createdObjects.length-1;d>=0;d--){let c=this.sharedGameControlGlobals.createdObjects[d];if(c.userData.hasCollisionDestroy&&(((a=c.rigidBody)==null?void 0:a.collider(0).handle)===t||((s=c.rigidBody)==null?void 0:s.collider(0).handle)===r)){this.sharedGameControlGlobals.createdObjects.splice(d,1),c.removeFromParent(),requestAnimationFrame(()=>{var h;return(h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.removeRigidBody(c.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)===this.sharedGameControlGlobals.colliderToEntity.get(t)){let d=this.sharedGameControlGlobals.colliderToEntity.get(r),c=this.sharedGameControlGlobals.entityToCollisionEvents[d.uuid];if(c===void 0)return;for(let h of c)h.data.target==="character"&&this.dispatchCollisionEvent(h,d,r)}else if(((u=this.gameControl)==null?void 0:u.object)===this.sharedGameControlGlobals.colliderToEntity.get(r)){let d=this.sharedGameControlGlobals.colliderToEntity.get(t),c=this.sharedGameControlGlobals.entityToCollisionEvents[d.uuid];if(c===void 0)return;for(let h of c)h.data.target==="character"&&this.dispatchCollisionEvent(h,d,t)}else{let d=this.sharedGameControlGlobals.colliderToEntity.get(t),c=this.sharedGameControlGlobals.entityToCollisionEvents[d.uuid];if(c!==void 0)for(let g of c)g.data.target==="scene"&&this.dispatchCollisionEvent(g,d,t);let h=this.sharedGameControlGlobals.colliderToEntity.get(r),f=this.sharedGameControlGlobals.entityToCollisionEvents[h==null?void 0:h.uuid];if(f!==void 0)for(let g of f)g.data.target==="scene"&&this.dispatchCollisionEvent(g,h,r)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=Nse,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",r=>{"gamepad"in r.data&&"axes"in r.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(r.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var r,n;let t=e.dataPatched;for(let i of t.events){if(i.data.disabled===!0)continue;let o=(n=(r=i.data.actions)==null?void 0:r.find(a=>a.data.type==="Destroy"))==null?void 0:n.data;if(o)for(let a of o.objects){let s=this.page.scene.find(a);s&&(s.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let r of t.events)if(!(r.data.disabled===!0||r.data.type!=="DragDrop"))for(let n of r.data.objects){let i=this.page.scene.find(n);i&&(i.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var s,l;let r;if(t instanceof Lu)return;t instanceof ia?r=t.object:r=t;let n=r.dataPatched;if(((s=n.physics)==null?void 0:s.enabled)==="visibility"?!n.visible:!((l=n.physics)!=null&&l.enabled))return!0;let i=t.geometry,o=r.userData.hasDestroy===!0,a=r.userData.hasDrag===!0;if(bO(n)||o||a||r.dataPatched.events.some(u=>u.data.disabled!==!0&&u.data.type==="GameControl"))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;i&&e.push(nh(i,t.matrixWorld))}),e.length>0){let t=kg(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new DS(t)}}addRigidBody(e,t,r){let n=[],i="geometry"in e?e.geometry:void 0,o=t.dataPatched;if((i==null?void 0:i.getAttribute("position"))!==void 0&&n.push(nh(i,e.shearScale)),o.physics.fusedBody){let a=this.gatherChildrenGeom(e,n);e.traverseObject(a),e.children.forEach(l=>l.updateMatrixWorld(!0));let s=e.cloner;s&&s.objectForSample===void 0&&o.physics.rigidBody==="dynamic"&&(s.traverseObject(a),s.children.forEach(l=>l.updateMatrixWorld(!0)))}if(n.length>0){let a,s=!r.fromCreate&&o.physics.rigidBody==="dynamic"||r.fromCreate&&r.dynamic;s?(a=qr.RigidBodyDesc.dynamic(),a.setLinearDamping(o.physics.damping).setAngularDamping(o.physics.damping).setAdditionalMass(1e-9).setGravityScale(o.physics.gravityScale).enabledRotations(...o.physics.enabledRotation).enabledTranslations(...o.physics.enabledTranslation)):(r.hasTransformAnim||r.hasFollow||r.hasDrag)&&!r.fromCreate?(a=qr.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):a=qr.RigidBodyDesc.fixed();let l=kg(n);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Ni,bu,zf),e.position0=Ni.clone().divideScalar(this.pixelsPerMeter),e.rotation0=bu.clone(),Ni.divideScalar(this.pixelsPerMeter),a.setTranslation(Ni.x,Ni.y,Ni.z).setRotation(bu),i?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(zf.x/this.pixelsPerMeter,zf.y/this.pixelsPerMeter,zf.z/this.pixelsPerMeter);let u=this.sharedGameControlGlobals.rapierWorld.createRigidBody(a);s&&this.rigidBodyToMesh.set(u.handle,[e,zf.clone(),o.physics.fusedBody]);let d=!(o.geometry===void 0||o.geometry.type==="SubdivGeometry"||o.geometry.type==="NonParametricGeometry"||o.geometry.type==="BooleanGeometry"||o.geometry.type==="VectorGeometry"||o.geometry.type==="StarGeometry"||o.geometry.type==="RectangleGeometry"||o.geometry.type==="EllipseGeometry"||o.geometry.type==="TriangleGeometry"||o.geometry.type==="TorusGeometry"||o.geometry.type==="HelixGeometry");try{this.addCollider(u,o.physics,l,t,d)}catch{try{this.addCollider(u,o.physics,l,t,!1)}catch(c){console.error(c)}}e.rigidBody=u}}addBoundsTree(e){var r,n;let t=[];if(((r=e.geometry)==null?void 0:r.getAttribute("position"))!==void 0&&((n=e.geometry)==null?void 0:n.getAttribute("position").count)>0&&t.push(nh(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(i=>i.updateMatrixWorld(!0)),t.length>0){let i=kg(t,!1);e.bvhGeometry=i,e.bvhGeometry.boundsTree=new DS(i),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,t,r,n,i=!0){var s,l;if((r==null?void 0:r.getAttribute("position").count)===0||((s=r==null?void 0:r.getIndex())==null?void 0:s.count)===0)return;let o;r&&(t.colliderType==="trimesh"?o=qr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):o=qr.ColliderDesc.convexMesh(r.getAttribute("position").array,i?r.getIndex().array:void 0)),o.setFrictionCombineRule(qr.CoefficientCombineRule.Average).setRestitutionCombineRule(qr.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let a=this.sharedGameControlGlobals.rapierWorld.createCollider(o,e);this.sharedGameControlGlobals.colliderToEntity.set(a.handle,n),(l=this.sharedGameControlGlobals.entityToCollisionEvents[n.uuid])!=null&&l.some(u=>u.target==="scene")&&a.setActiveEvents(qr.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(r,n)=>{var s;if(n===0)return;let i;if(r instanceof Lu)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;i=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof ia)i=r.object;else if(i=r,(s=i.dataPatched.cloner)==null?void 0:s.hideBase)return!0;let o=i.dataPatched;if(o.physics.enabled==="visibility"?!o.visible:!o.physics.enabled)return!0;n===1?e.hasNonUniformScale?r.matrixWorld.multiplyMatrices(e.shearScale,r.hiddenMatrix):r.matrixWorld.copy(r.hiddenMatrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.hiddenMatrix),r.matrixWorld.multiply(r.matrix);let a=r.geometry;(a==null?void 0:a.getAttribute("position"))!==void 0&&t.push(nh(a,r.matrixWorld))}}activate(e){var h,f;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,r=!1,n=5,i=8,o=9,a="drag",s=this.page.data.publish.gameControlObject,l=s!==null?this.page.find(s):null,u=null;if(l)for(let g of l.data.events){if(g.data.disabled||g.data.type!=="GameControl")break;let y=l;for(;this.usePhysics&&((h=y=y.parent)==null?void 0:h.parent)!==null&&!((f=y.data.physics)!=null&&f.fusedBody););g.data.collisionEnabled&&(this.needsCollisionDetection=!0),u===null&&(u=g.data)}if(this.page.traverseEntity(g=>{for(let y of g.dataPatched.events)if(y.data.disabled===!1&&y.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),l&&u){r=r||u.camera===t.uuid||l.uuid===t.uuid;let g=new kse(l,this.renderer.domElement,u,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&u.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=g,n=u.joystickPosLoc,i=u.joystickRotLoc,o=u.jumpTouchButtonLoc,a=u.rotByTouch,Qs&&u.touchControl&&(this.joystickToGameControls[n]="pos",u.moveMode==="walk"&&(this.joystickToGameControls[o]="jmp"),a==="joystick"&&(this.joystickToGameControls[i]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let g=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new f7e(this.usePhysics,this.isExport);let y;g.collider.type==="sphere"?y=g.collider.radius*2:y=g.collider.height,y=Math.floor(y/g.navmesh.ch-1),this.navigationMeshWrapper.init({...g.navmesh,walkableHeight:y},this.gameControl,this.eventContext)}}if(r===!1){let{enableRotate:g,enablePan:y,enableZoom:m,autoRotate:p,hoverRotatePanMode:v}=this.eventManager.publish.orbitControls;(g||y||m||p||v!==0)&&(this.orbitControls=new Wse(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let d=this.renderer.domElement.width/this.renderer.getPixelRatio(),c=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((g,y)=>{let m=document.body.appendChild(document.createElement("div")),[p,v,b]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[y],x=(d-5*p)/4+p,_={},A=g==="jmp",M=A?0:p;y<10?(y<5?_.top=M/2:_.bottom=M/2,_.left=M/2+y%5*x):y===10?(_.left=M/2,_.top=c/2):(_.right=M/2,_.top=c/2),_.top?_.top-=v[1]:_.bottom+=v[1],_.left?_.left+=v[0]:_.right-=v[0];for(let E in _)_[E]+="px";if(A){let E=m.appendChild(document.createElement("div"));Object.assign(E.style,_,{position:"absolute",width:p+"px",height:p+"px",backgroundColor:`rgba(255,255,255,${b==="show"?.4:0})`,zIndex:"9999",borderRadius:p+"px",border:b==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let D=p/16*16*.4;b==="show"&&(E.innerHTML=`
						<svg width="${D}" height="${p*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),E.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),E.addEventListener("touchend",I=>I.preventDefault()),this.joysticks[y]=[void 0,m];return}let T={zone:m,mode:"static",position:_,size:p};b==="hide"&&(T.restOpacity=0);let C=GWe.create(T);C.on("move",(E,D)=>{let I=this.gameControl;g==="pos"?D.force<.2?I.moveForce=0:(I.movementState.movePosZ=Math.sin(-D.angle.radian),I.movementState.movePosX=Math.cos(-D.angle.radian),D.force>1.2?I.movementState.run=1:I.movementState.run=0,D.force<.3?I.moveForce=(D.force-.2)/.1:I.moveForce=1):g==="rot"&&(D.force<.2?I.rotForce=0:(I.movementState.rotPosX=D.vector.y,I.movementState.rotPosY=-D.vector.x,D.force<.3?I.rotForce=(D.force-.2)/.1:I.rotForce=1)),this.requestRender()}),C.on("end",(E,D)=>{let I=this.gameControl;g==="pos"?(I.movementState.movePosZ=0,I.movementState.movePosX=0,I.moveForce=1):g==="rot"&&(I.movementState.rotPosX=0,I.movementState.rotPosY=0,I.rotForce=1)}),this.joysticks[y]=[C,m]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(g=>g.disabled=!1)},80)}initPhysics(){var a;(a=this.sharedGameControlGlobals.rapierWorld)==null||a.free(),this.sharedGameControlGlobals.rapierWorld=new qr.World(new qr.Vector3(0,this.gravity,0)),this.events=new qr.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(s=>{var p,v,b,x;let l;if(s instanceof Lu)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;l=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof ia)l=s.object;else if(l=s,((p=l.dataPatched.cloner)==null?void 0:p.disabled)===!1&&((v=l.dataPatched.cloner)==null?void 0:v.hideBase)&&((b=l.dataPatched.physics)==null?void 0:b.fusedBody)!==!0)return!0;let u=l.dataPatched,d;for(let _ of u.events)_.data.disabled!==!0&&_.data.type==="GameControl"&&(d=_.data);if(!u.physics||(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled))return!0;s.updateMatrixWorldSVD();let c=bO(u),h=!1,f=l.userData.hasDestroy,g=l.userData.hasDrag,y=!1;for(let _ of u.events)if(_.data.disabled!==!0){if(_.data.type==="Collision"){h=!0;let A=new r7e(_.id,_.data,l,this.page,this.sharedAssets,this.eventManager);A.disabled=!0,this.collisionEvents.push(A),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(M=>M.id!==_.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(A):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[A]}else if(_.data.type==="Follow"){y=!0;let A=_.data.target;s.traverseVisible(M=>{M.userData.isFollowingObj=A})}}u.physics.rigidBody==="dynamic"&&u.physics.fusedBody===!1&&(s.matrixWorldFusedFalse=s.matrixWorld.clone());let m=s.geometry;if(d!==void 0){let _=qr.RigidBodyDesc.kinematicPositionBased();(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(Ni,bu,zf),s.position0=Ni.clone().divideScalar(this.pixelsPerMeter),s.rotation0=bu.clone(),Ni.divideScalar(this.pixelsPerMeter),_.setTranslation(Ni.x,Ni.y,Ni.z).setRotation(bu);let A=this.sharedGameControlGlobals.rapierWorld.createRigidBody(_);s.rigidBody=A;let M;d.collider.type==="sphere"?M=qr.ColliderDesc.ball(d.collider.radius/this.pixelsPerMeter):d.collider.type==="capsule"?M=qr.ColliderDesc.capsule((d.collider.height/2-d.collider.radius)/this.pixelsPerMeter,d.collider.radius/this.pixelsPerMeter):M=qr.ColliderDesc.cuboid(d.collider.width/this.pixelsPerMeter/2,d.collider.height/this.pixelsPerMeter/2,d.collider.depth/this.pixelsPerMeter/2),M.setFrictionCombineRule(qr.CoefficientCombineRule.Average).setRestitutionCombineRule(qr.CoefficientCombineRule.Average).setDensity(u.physics.density).setFriction(u.physics.friction).setRestitution(u.physics.restitution);let T=this.sharedGameControlGlobals.rapierWorld.createCollider(M,A);this.sharedGameControlGlobals.colliderToEntity.set(T.handle,l),Ni.fromArray(d.collider.position).multiply(zf.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),T.setTranslationWrtParent(Ni);let C=new xr().setFromEuler(new So().setFromVector3(new X().fromArray(d.collider.rotation)));T.setRotationWrtParent(C),T.setActiveEvents(qr.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else u.physics.rigidBody==="dynamic"||c||y||f||g||h?(this.addRigidBody(s,l,{hasFollow:y,hasTransformAnim:c,hasDrag:g}),this.generateSensorColliderDescs(l,u.physics.fusedBody)):(m&&e.push(nh(m,s.matrixWorld)),u.physics.fusedBody&&s.traverseObject((_,A)=>{var E;if(A===0)return;let M;if(_ instanceof Lu)if(_.objectForSample){if(_.objectForSample.dataPatched.physics.fusedBody)return;M=_.object}else return _.object.dataPatched.physics.fusedBody===!0&&_.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(_ instanceof ia)M=_.object;else if(M=_,(E=M.dataPatched.cloner)==null?void 0:E.hideBase)return!0;let T=M.dataPatched;if(T.physics.enabled==="visibility"?!T.visible:!T.physics.enabled)return!0;let C=_.geometry;(C==null?void 0:C.getAttribute("position"))!==void 0&&e.push(nh(C,_.matrixWorld))}),this.generateSensorColliderDescs(l,u.physics.fusedBody,t));if(((x=u.physics)==null?void 0:x.fusedBody)===!0||d)return!0}),e.length===0)return;let r=kg(e);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let n=qr.RigidBodyDesc.fixed(),i=this.sharedGameControlGlobals.rapierWorld.createRigidBody(n),o=qr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(qr.CoefficientCombineRule.Multiply).setRestitutionCombineRule(qr.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(o,i);for(let[s,l]of t){let u=this.sharedGameControlGlobals.rapierWorld.createCollider(s,i);this.sensorToTriggerEvent[u.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let r=new OK(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),n=new ft().compose(xu.fromArray(t.data.position),qy.setFromEuler(RK.fromArray(t.data.rotation)),NN);if(t.data.triggerZone==="box"){let i=new Oi;i.min.fromArray(t.data.size).multiplyScalar(-.5),i.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([i,n,e,r])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,n,e,r])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,r,n;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(i=>{let o=i;o.matrixWorldFusedFalse&&(o.matrixWorldFusedFalse=void 0),o.rigidBody&&(o.rigidBody=void 0),o.position0&&(o.position0=void 0),o.rotation0&&(o.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(r=this.gameControl)==null||r.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([i,o])=>{i==null||i.destroy(),o.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(n=this.navigationMeshWrapper)==null||n.dispose(),this.navigationMeshWrapper=void 0;for(let i of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))i.forEach(o=>o.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,r){if(!this.isEnabled)return!0;let n=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(n=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,n=!1):this.initializationCounter===2&&this.gameControl&&(n=!this.gameControl.update(e,t,r)&&n),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let i=.016666666666666666;if(e===0)n=this.stepPhysics()&&n;else{let o=e/1e3;o<i&&o>i*.55&&(o=i),this.accumulator+=o;let a=performance.now(),s=0,l=6;for(;this.accumulator>=i&&s<l&&(n=this.stepPhysics()&&n,this.accumulator-=i,s++,!(performance.now()-a>i*1e3)););this.accumulator=this.accumulator%i}}return n}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(Ni,bu,zf),LN.setFromQuaternion(bu);let r=t;r.prevR===void 0?(r.prevR=LN.clone(),r.prevT=Ni.clone()):(r.prevR.copy(LN),r.prevT.copy(Ni)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(Ni.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(bu))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,r){var o;let n=((o=this.sharedGameControlGlobals.rapierWorld)==null?void 0:o.getCollider(r))._parent,i;if(t.cloner){for(let a of t.cloner.children)if(a.rigidBody===n){i=a;break}}e.dispatch(i),t.dispatchEvent(Wz)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,r){let n=IK.copy(e.matrixWorld).invert();e.traverseEntity((i,o)=>{if(t===!1&&o===1)return!0;for(let a of i.dataPatched.events)if(a.data.type==="Trigger"&&a.data.disabled!==!0){let s=new OK(a.id,a.data,i,this.page,this.sharedAssets,this.eventManager),l;if(a.data.triggerZone==="box"?l=qr.ColliderDesc.cuboid(...a.data.size.map(u=>u/(2*this.pixelsPerMeter))):l=qr.ColliderDesc.ball(a.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(qr.ActiveEvents.COLLISION_EVENTS),xu.fromArray(a.data.position),qy.setFromEuler(RK.fromArray(a.data.rotation)),zP.compose(xu,qy,NN).premultiply(i.matrixWorld),r?(zP.decompose(xu,qy,BN),l.setActiveCollisionTypes(qr.ActiveCollisionTypes.KINEMATIC_FIXED|qr.ActiveCollisionTypes.DYNAMIC_FIXED)):(zP.premultiply(n).decompose(xu,qy,BN),e.rigidBody.bodyType()===qr.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===qr.RigidBodyType.Fixed?l.setActiveCollisionTypes(qr.ActiveCollisionTypes.KINEMATIC_FIXED|qr.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(qr.ActiveCollisionTypes.KINEMATIC_KINEMATIC|qr.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),xu.divideScalar(this.pixelsPerMeter),l.setTranslation(xu.x,xu.y,xu.z),l.setRotation(qy),r)r.push([l,s]);else{let u=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[u.handle]=s}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[r,n,i,o]=this.sharedGameControlGlobals.triggers[t];for(let a=0;a<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;a++){let s=this.sharedGameControlGlobals.entitiesWithTransformAnim[a];if(i===s||o.isValidTriggeringObject(jr.is(s)?s:s.object)===!1)continue;let l=IK.copy(i.matrixWorld).decompose(xu,LK,BN).compose(xu,LK,NN).multiply(n),u=zP.copy(s.matrixWorld).invert().multiply(l);r instanceof Oi?e=s.bvhGeometry.boundsTree.intersectsBox(r,u):(kN.radius=r,kN.center.setFromMatrixPosition(u),e=s.bvhGeometry.boundsTree.intersectsSphere(kN)),e?o.currentIntersectedObjects.indexOf(s)===-1&&(o.currentIntersectedObjects.push(s),o.dispatch(),i.dispatchEvent(M7e)):o.currentIntersectedObjects=o.currentIntersectedObjects.filter(d=>d!==s)}}}};function E7e(e){let t=this._clip.duration,r=this._clip.start??0,n=this.loop,i=this.time+e,o=this._loopCount,a=n===EV;if(e===0)return o===-1?i:a&&(o&1)===1?t-(i-r):i;if(n===gne){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<r){let s=Math.floor((i-r)/(t-r));i-=(t-r)*s,o+=Math.abs(s);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a||(i=e>0?t:r,this.repetitions===1&&(i=t)),this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(a&&(o&1)===1)return t-(i-r)}return i}var BK=!1,P7e=class{constructor(e,t,r,n){this.scene=e,this.requestRender=t,this.updateDisplayProgress=r,this.animationInspectorState=n,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=i=>{i.data.type==="Empty"&&i.data.animations&&i.data.animations.forEach((o,a)=>{let s=o[0]+"/";if(Array.isArray(i.identity)?s+=i.identity[0]:s+=i.uuid,this.clipIdToAction[s])return;let l=m5.parse(JSON.parse(o[2]));i.animations[a]=l;let u=this.mixer.clipAction(l,i);BK===!1&&(Object.getPrototypeOf(u)._updateTime=E7e,BK=!0),u.clampWhenFinished=!0,this.clipIdToAction[s]=u})},this.mixer=new PRe(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let r=this.scene.find(t);if(!r)return;let n=r.animations.find(o=>o.uuid===e);if(!n)return;let i=this.clipIdToAction[e];!i||(i.stop(),this.mixer.uncacheClip(n),delete this.clipIdToAction[e],r.animations=r.animations.filter(o=>o.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=vne}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,r=this.clipIdToAction[t];if(r)return e&&(e.repeat>=0&&(r.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(r.loop=EV)),r.play(),r.paused=!1,this.requestRender(),r}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var e,t;return((t=(e=this.activeClip)==null?void 0:e.tracks[0])==null?void 0:t.times.length)??0}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let r=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),r&&(this.clipIdToAction[t].paused=!0)}},FN=new WeakMap,D7e=class extends jV{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,n){let i=new g5(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,o=>{this.decodeDracoFile(o,t).catch(n)},r,n)}decodeDracoFile(e,t,r,n){let i={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){let r=JSON.stringify(t);if(FN.has(e)){let s=FN.get(e);if(s.key===r)return s.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n,i=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(i,o).then(s=>(n=s,new Promise((l,u)=>{n._callbacks[i]={resolve:l,reject:u},n.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(s=>this._createGeometry(s.geometry));return a.catch(()=>!0).then(()=>{n&&i&&this._releaseTask(n,i)}),FN.set(e,{key:r,promise:a}),a}_createGeometry(e){let t=new Jt;e.index&&t.setIndex(new fr(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let n=e.attributes[r],i=n.name,o=n.array,a=n.itemSize;t.setAttribute(i,new fr(o,a))}return t}_loadLibrary(e,t){let r=new g5(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((n,i)=>{r.load(e,n,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{let n=r[0];e||(this.decoderConfig.wasmBinary=r[1]);let i=O7e.toString(),o=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(i){let o=i.data;switch(o.type){case"decode":n._callbacks[o.id].resolve(o);break;case"error":n._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(n,i){return n._taskLoad>i._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function O7e(){let e,t;onmessage=function(a){let s=a.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise(function(d){e.onModuleLoaded=function(c){d({draco:c})},DracoDecoderModule(e)});break;case"decode":let l=s.buffer,u=s.taskConfig;t.then(d=>{let c=d.draco,h=new c.Decoder,f=new c.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let g=r(c,h,f,u),y=g.attributes.map(m=>m.array.buffer);g.index&&y.push(g.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:g},y)}catch(g){console.error(g),self.postMessage({type:"error",id:s.id,error:g.message})}finally{c.destroy(f),c.destroy(h)}});break}};function r(a,s,l,u){let d=u.attributeIDs,c=u.attributeTypes,h,f,g=s.GetEncodedGeometryType(l);if(g===a.TRIANGULAR_MESH)h=new a.Mesh,f=s.DecodeBufferToMesh(l,h);else if(g===a.POINT_CLOUD)h=new a.PointCloud,f=s.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let y={index:null,attributes:[]};for(let m in d){let p=self[c[m]],v,b;if(u.useUniqueIDs)b=d[m],v=s.GetAttributeByUniqueId(h,b);else{if(b=s.GetAttributeId(h,a[d[m]]),b===-1)continue;v=s.GetAttribute(h,b)}y.attributes.push(i(a,s,h,m,p,v))}return g===a.TRIANGULAR_MESH&&(y.index=n(a,s,h)),a.destroy(h),y}function n(a,s,l){let u=l.num_faces()*3,d=u*4,c=a._malloc(d);s.GetTrianglesUInt32Array(l,d,c);let h=new Uint32Array(a.HEAPF32.buffer,c,u).slice();return a._free(c),{array:h,itemSize:1}}function i(a,s,l,u,d,c){let h=c.num_components(),f=l.num_points()*h,g=f*d.BYTES_PER_ELEMENT,y=o(a,d),m=a._malloc(g);s.GetAttributeDataArrayForAllPoints(l,c,y,g,m);let p=new d(a.HEAPF32.buffer,m,f).slice();return a._free(m),{name:u,array:p,itemSize:h}}function o(a,s){switch(s){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}var pp;function R7e(){return pp||(pp=new D7e,pp.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),pp.decoderPending}async function I7e(e){if(pp){let t={attributeIDs:pp.defaultAttributeIDs,attributeTypes:pp.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=await pp.decodeGeometry(new Int8Array(e).buffer,t)}catch(n){console.error(n)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([n,i])=>({name:n,itemSize:i.itemSize,array:i.array}))}}return null}async function L7e(e,t){let[r,n]=Zie(R5.deserialize(new Uint8Array(e)));Soe(r);let i=[];r.scene.objects.traverse((o,a)=>{a.type==="Mesh"&&a.geometry.type==="NonParametricGeometry"&&a.geometry.data.draco!==void 0&&i.push(a)}),i.length&&await R7e();for(let o of i){let a=await I7e(Wi(o.geometry.data.draco));if(a){a.index&&(o.geometry.data.index={array:a.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let s={};a.attributes.forEach(({name:l,array:u,itemSize:d})=>{s[l]={array:u,itemSize:d,type:"Float32Array",normalized:!1}}),o.geometry.data.attributes=s,o.geometry.data.draco=void 0}}return t&&t(r),n.result().data}var B7e=class{constructor(e,t,r,n,i,o,a){this.id=e,this.data=t,this.dataEvent=r,this.object=n,this.stage=!1,this.actions=Wa(r,t.actions,i,o,a,n)}disconnect(){Mo(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},N7e=class extends ec{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(r,n)=>{this.breakpoints.forEach(i=>{let o=N5.deviceToSize(i.data.size),a=i.dataEvent.orientation==="horizontal"?r:n,s;switch(i.data.operator){case"<":s=a<o[0];break;case">":s=a>o[0];break;case"<>":s=a>o[0]&&a<o[1];break}i.stage!==s&&(i.stage=s,i.stage?i.dispatchIn():i.dispatchOut())})},this.onResizeObserver=new ResizeObserver(r=>{for(let n of r){let{width:i,height:o}=n.contentRect;this.resize(i,o)}})}connect(){let{page:e,sharedAssets:t,domElement:r}=this.eventContext;this.onResizeObserver.observe(r),e.traverseEntity(n=>{var i;if(!(!n.visible||!((i=n.data)!=null&&i.events.length)))for(let{data:o}of n.data.events)o.disabled||o.type==="Resize"&&o.breakpoints.forEach(({data:a,id:s})=>{try{let l=new B7e(s,a,o,n,e,t,this.eventManager);this.breakpoints.push(l)}catch{}})})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},k7e=class{constructor(e,t,r,n,i){this.publish=e,this.controlsManager=t,this.animationControls=r,this.eventContext=n,this.sharedVariables=i,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=o=>{(o.touches.length>1||this.preventTouchScroll)&&o.preventDefault()},this.onMouseWheelPreventScroll=o=>{this.preventScroll&&o.preventDefault()},this.onMouseMove=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:o.buttons>0}},this.onMouseDown=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:!0}},this.onMouseUp=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:!1}},this.getMousePosition=o=>{var u;let{domRect:a}=this.eventContext,{pageX:s,pageY:l}=((u=o.touches)==null?void 0:u.length)>0?o.touches[0]:o;return{x:s-(a.left+window.scrollX),y:l-(a.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=n.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new M9e(this.eventContext),DynamicVariable:new n7e(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),Conditional:new R9e(this.eventContext,this),Start:new t7e(this.eventContext,this),Basic:new T9e(this.eventContext,this,this.needsRaycast),MouseHover:new J9e(this.eventContext,this),Scroll:new $9e(this.eventContext,this),Follow:new j9e(this.eventContext,this),DragDrop:new k9e(this.eventContext,this),LookAt:new X9e(this.eventContext),Resize:new N7e(this.eventContext,this)};let{page:e,domElement:t,eventElement:r}=this.eventContext;this.hideCursor&&(t.style.cursor="none"),e.traverseEntity(n=>{n.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(n=>n.connect()),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var r;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:e,domElement:t}=this.eventContext;t.style.cursor="",Object.values(this.handlers).forEach(n=>n.disconnect()),(r=this.controlsManager.gameControl)==null||r.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(n=>{n.removeEventListener("requestRender",this.requestRender),n.destroyedInAction=!1}),t.removeEventListener("touchmove",this.onTouchMovePreventScroll),t.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=r=>{if(r.data.type==="Conditional"&&(r.data.ifActions.forEach(t),r.data.elseActions.forEach(t)),r.data.type==="Conditional"||r.data.type==="SetVariable")for(let n of r.data.type==="Conditional"?r.data.condition:r.data.expression)"id"in n&&Array.isArray(n.id)&&(n.id[0]==="mouse"&&(this.needsMouse=!0),n.id[0]==="raycast"&&(this.needsRaycast=!0));r.data.type==="DynamicVariablePlay"&&r.data.variableId!==""&&(r.data.mode==="Play"||r.data.mode==="PlayPause"||r.data.mode==="Toggle")&&e.setDynamicVariablePlayState(r.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(r=>{var n;if((n=r.data)!=null&&n.events.length){for(let i of r.data.events)if(!i.data.disabled)if(i.data.type==="VariableChange"&&(i.data.variableId==="mouseProperty"&&(this.needsMouse=!0),i.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),i.data.type==="Conditional")for(let o of["inActions","outActions"])i.data[o].forEach(t);else if(i.data.type==="DragDrop")for(let o of["drag","drop"])i.data.dragDropActions[o].forEach(t);else if(i.data.type==="GameControl")for(let o of["idle","move","jump","run"])i.data.gameActions[o].forEach(t);else if(i.data.type==="Resize")for(let o of i.data.breakpoints)o.data.actions.forEach(t);else i.data.type==="LookAt"||i.data.actions.forEach(t)}})}},F7e=class{constructor(e,t,r,n,i){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new Ae().copy(r),this._editorSize=new Ae().copy(n),this._aspect=t.aspect,this._fov=i??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.y;this._aspect=e/t,t<=r&&(this._camera.zoom*=r/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,r=this._editorSize.y,n=this._fov;if(e&&t>r){let i=z7e(t,1080,2160,1,15)/100;n*=t/r,n*=1-i}this._camera.aspect=this._aspect,this._camera.fov=n,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function z7e(e,t,r,n,i){return(e-t)/(r-t)*(i-n)+n}var U7e=class{get sharedAssets(){return this.shared}constructor(e,t={}){this.shared=new Nj(e.shared,t),this.scene=new Wj(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof Op&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Ua&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},V7e=class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function j7e(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function BS(e){return e instanceof UA?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function H7e(e,t){let r={};return e.traverseEntity(n=>{var l;if(!n.visible||!(n instanceof Es)||n.type!=="Mesh"||Array.isArray(n.material)||n.states&&Object.keys(n.states).length)return;let i=n.parent;for(;i;){if(i instanceof Es&&n.states&&Object.keys(n.states).length)return;i=i.parent}let o=n.material.uuid,a=t.shared.materials[o];if(a){if(!aa.isMergable(a))return}else{let u=(l=t.scene.objects.get(n.uuid))==null?void 0:l.data;if(u&&"material"in u&&typeof u.material!="string"){if(!aa.isMergable(u.material))return;o=aa.getHash(u.material)}}r[o]||(r[o]={});let s=r[o][BS(n)];if(s){if(s.push(n),n.cloner)for(let u of n.cloner.children)s.push(u)}else if(r[o][BS(n)]=[n],n.cloner)for(let u of n.cloner.children)r[o][BS(n)].push(u)}),r}function G7e(e){let t=0;return Object.values(e).forEach(r=>{Object.values(r).forEach(n=>{let i=n.length;i>t&&(t=i)})}),t}function W7e(e,t){let r=H7e(t,e),n=G7e(r),i=new Array(n),o=0,a=new Array(n),s=0,l=new Array(n),u=0,d=new Array(n),c=0;for(let[h,f]of Object.entries(r))for(let g of Object.values(f)){if(s=0,u=0,g.forEach(m=>{m instanceof Es&&(a[s++]=m.geometry.clone(),l[u++]=m)}),u<2)continue;for(let m=0;m<u;m++)l[m].updateWorldMatrix(!0,!1),a[m].applyMatrix4(l[m].matrixWorld),l[m].matrixWorld.determinant()<0&&j7e(a[m]);let y=kg(a.slice(0,s),!1);if(y){let m;switch(h){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),m=new Fa(y,l[0].material);break}default:{m=new Fa(y,l[0].material);break}}m.castShadow=l[0].castShadow,m.receiveShadow=l[0].receiveShadow,t.add(m);let p=v=>{c=0;for(let b of v)b.children&&p(b.children),b instanceof Es&&(Array.isArray(b.material)||r[b.material.uuid]&&r[b.material.uuid][BS(b)]&&r[b.material.uuid][BS(b)].length>1||(d[c++]=b));for(let b=0;b<c;b++)t.attach(d[b])};for(let v=0;v<u;v++){let b=l[v];p(b.children),i[o++]=b}}}for(let h=0;h<o;h++)i[h].removeFromParent()}var q7e=Po(yCe(),1),X7e=new Ae;function Y7e(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var K7e=class{constructor(e,{renderOnDemand:t,renderMode:r="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=n=>{var i,o,a,s,l,u,d,c,h,f,g,y;if(this.time=n,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(i=this._perfs)==null||i.start(),!this._renderer){(o=this._perfs)==null||o.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(a=this._perfs)==null||a.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((s=this._eventManager.handlers)!=null&&s.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(u=this._eventManager.handlers)!=null&&u.Conditional.hasVideoAction)&&(this._skipRender=!1),(d=this._animationControls)==null||d.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(c=this._eventManager)!=null&&c.isEnabled&&(((h=this._eventManager.handlers)==null?void 0:h.Follow).onAnimationFrameDamping(),((f=this._eventManager.handlers)==null?void 0:f.LookAt).onAnimationFrameDamping(),((g=this._eventManager.handlers)==null?void 0:g.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let m=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=m,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(y=this._perfs)==null||y.end()},this._resize=()=>{var n,i,o,a,s,l,u,d,c,h;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=X7e.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(n=this._scene)==null?void 0:n.activeCamera,(u=this._scene)==null||u.updateViewPlaneSize(((o=(i=this._frameView)==null?void 0:i.frameSize)==null?void 0:o.x)??this._viewportWidth,((s=(a=this._frameView)==null?void 0:a.frameSize)==null?void 0:s.y)??this._viewportHeight,((l=this._frameView)==null?void 0:l.enableResponsive)??!1),this._camera){let f=Object.values(((d=this._data)==null?void 0:d.frames)??{})[0].preset??"fullscreen";(c=this._frameView)==null||c.setCamera(this._camera),(h=this._frameView)==null||h.updateCamera(f!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=lj(this._resize,10),this.canvas=e,this.renderMode=t?"auto":r,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new V7e({x:10,y:10})),cze(e)}async load(e,t,r){Y7e(e),this.disposed=!1;let n=await(await fetch(e,r)).arrayBuffer();await this.start(n,{variables:t})}async start(e,{interactive:t=!0,variables:r}={}){var s,l,u;if(this.disposed)return;let n=await L7e(e);this._data=n,n.version&&(0,q7e.default)(n.version,"0.9.520")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([xY(n)&&GVe(),IHe(n)&&VVe(),BA.physicsEnabled(n.scene.objects)&&mze(),pY(n)&&xHe(),m7e(n)&&fze()].filter(Boolean)),(s=this._eventManager)==null||s.deactivate(),(l=this._controls)==null||l.deactivate(),(u=this._scene)==null||u.dispose();let i=new U7e(n);if(i.resetPersonalCameraFromDocumentData(),this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let d=performance.now();W7e(n,i.scene);let c=performance.now();console.log("Merged geometries in ",c-d," ms")}xY(n)&&this._scene.traverse(d=>{Uc(d)&&d.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var d;this._requestRenderAutoMode(),(d=this._scene)==null||d.traverse(c=>{c instanceof Lu&&c.pendingMediaLoad&&c.update()})});let o=Object.keys(n.shared.fonts).map(d=>this._sharedAssetsManager.getFont(d).loadingPromise);Promise.all(o).then(()=>{i.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),pY(n)&&C7e(n)&&await Promise.all(o),this._scene.rewriteEventsBeforeGoToPlayMode(),nH(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new lWe({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=n.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),this._scene.initializeSplatViewer(this._renderer),n.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(n.scene.blueNoiseTextureData);let a=Object.values(n.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(a.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=a.size[0],this._viewportHeight=a.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new F7e(this._renderer,this._camera,new Ae(this._viewportWidth,this._viewportHeight),new Ae(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(a.allowResponsive??!1)&&a.preset==="fullscreen"),t){let d=new S9e(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,a);this._scene.updateMatrixWorld(!0),this._controls=new T7e(d),this._animationControls=new P7e(this._scene,this._requestRenderAutoMode),this._eventManager=new k7e(n.scene.publish,this._controls,this._animationControls,d,n.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),r!==void 0&&this.setVariables(r),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var d;(d=this._renderer)==null||d.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300)}setVariables(e){if(this._data!==void 0){let t=Object.entries(e);for(let[r,n]of t)this.setVariable(r,n)}}setVariable(e,t){var n;let r=this._getVariableByName(e);if(r&&!("dynamicVariableType"in r.data)){let i=t;typeof r.data.value=="number"?i=typeof t=="number"?t:typeof t=="boolean"?t===!0?1:0:parseFloat(t):typeof r.data.value=="boolean"?i=typeof t=="number"?!!t:typeof t=="boolean"?t:t.toLocaleLowerCase()==="false"?!1:!!t:typeof r.data.value!="string"&&r.data.value.textValue!==void 0&&(i=t.toString());let o=typeof i=="string"?{textValue:i}:i;(n=this._sharedAssetsManager)==null||n.updateVariable(r.id,o),this.requestRender(),this._requestRenderAutoMode()}else r===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in r.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{e[t.data.name]===void 0&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let r=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(r)}}_getVariableValue(e){return typeof e!="string"&&Zs.isTextValue(e)?Zs.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(r=>r.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(r=>{if(r.uuid!==M1&&!this._scene.isInvisibleObjects(r)&&!(r instanceof Op)){let n=this._createProxyObject(r);n&&e.push(n)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEvent(e)}emitEventReverse(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,r;((t=this._controls)==null?void 0:t.orbitControls)instanceof Wse&&((r=this._controls)==null||r.orbitControls.zoomOut(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var a;let{r:t,g:r,b:n,a:i}={r:0,g:0,b:0,a:1},o=new Cs(t,r,n,i);try{o.setStyle(e)}catch{console.error("This is not a valid css color",e)}(a=this._scene)==null||a.activePage.setBackgroundColor(o),this._requestRenderAutoMode()}dispose(){var e,t,r,n,i,o,a;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._proxyObjectCache.forEach(s=>{z7.unsubscribe(s)}),this._variablesCache.clear(),(n=this._renderer)==null||n.setAnimationLoop(null),(i=this._renderer)==null||i.dispose(),this._renderer=void 0,(o=this._sharedAssetsManager)==null||o.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(a=this._controls)==null||a.deactivate(),dze(this.canvas)}get isStopped(){return this._isPaused}stop(){var e,t,r;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(r=this._controls)!=null&&r.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,r;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(r=this._renderer)==null||r.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var i;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(o=>{o instanceof Op&&(t=o.name)});let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof Op||e instanceof Wj||(i=e.parent)==null?void 0:i.uuid,emitEvent(o){e.dispatchEvent({type:"userEvent",eventName:o})},emitEventReverse(o){e.dispatchEvent({type:"userEvent",eventName:o,reverse:!0})}},n=z7(r,(o,a)=>{var s;typeof e[o]!="object"&&((s=Object.getOwnPropertyDescriptor(e,o))!=null&&s.writable)&&(e[o]=a),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,n),n}},UP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qz={},J7e={get exports(){return qz},set exports(e){qz=e}},F_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NK;function Q7e(){if(NK)return F_;NK=1;var e=i1,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(s,l,u){var d,c={},h=null,f=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(f=l.ref);for(d in l)n.call(l,d)&&!o.hasOwnProperty(d)&&(c[d]=l[d]);if(s&&s.defaultProps)for(d in l=s.defaultProps,l)c[d]===void 0&&(c[d]=l[d]);return{$$typeof:t,type:s,key:h,ref:f,props:c,_owner:i.current}}return F_.Fragment=r,F_.jsx=a,F_.jsxs=a,F_}(function(e){e.exports=Q7e()})(J7e);const Xz=qz.jsx;var Z7e="Expected a function",kK=NaN,$7e="[object Symbol]",eqe=/^\s+|\s+$/g,tqe=/^[-+]0x[0-9a-f]+$/i,rqe=/^0b[01]+$/i,nqe=/^0o[0-7]+$/i,iqe=parseInt,oqe=typeof UP=="object"&&UP&&UP.Object===Object&&UP,aqe=typeof self=="object"&&self&&self.Object===Object&&self,sqe=oqe||aqe||Function("return this")(),lqe=Object.prototype,uqe=lqe.toString,cqe=Math.max,dqe=Math.min,zN=function(){return sqe.Date.now()};function hqe(e,t,r){var n,i,o,a,s,l,u=0,d=!1,c=!1,h=!0;if(typeof e!="function")throw new TypeError(Z7e);t=FK(t)||0,Yz(r)&&(d=!!r.leading,c="maxWait"in r,o=c?cqe(FK(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h);function f(A){var M=n,T=i;return n=i=void 0,u=A,a=e.apply(T,M),a}function g(A){return u=A,s=setTimeout(p,t),d?f(A):a}function y(A){var M=A-l,T=A-u,C=t-M;return c?dqe(C,o-T):C}function m(A){var M=A-l,T=A-u;return l===void 0||M>=t||M<0||c&&T>=o}function p(){var A=zN();if(m(A))return v(A);s=setTimeout(p,y(A))}function v(A){return s=void 0,h&&n?f(A):(n=i=void 0,a)}function b(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function x(){return s===void 0?a:v(zN())}function _(){var A=zN(),M=m(A);if(n=arguments,i=this,l=A,M){if(s===void 0)return g(l);if(c)return s=setTimeout(p,t),f(l)}return s===void 0&&(s=setTimeout(p,t)),a}return _.cancel=b,_.flush=x,_}function Yz(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fqe(e){return!!e&&typeof e=="object"}function pqe(e){return typeof e=="symbol"||fqe(e)&&uqe.call(e)==$7e}function FK(e){if(typeof e=="number")return e;if(pqe(e))return kK;if(Yz(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Yz(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(eqe,"");var r=rqe.test(e);return r||nqe.test(e)?iqe(e.slice(2),r?2:8):tqe.test(e)?kK:+e}var mqe=hqe;function gqe(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}const vqe=[],yqe={width:"100%",height:"100%"},bqe=te.forwardRef(function({className:e,children:t,debounceTime:r=300,ignoreDimensions:n=vqe,parentSizeStyles:i,enableDebounceLeadingCall:o=!0,resizeObserverPolyfill:a,...s},l){const u=te.useRef(null),d=te.useRef(0),[c,h]=te.useState({width:0,height:0,top:0,left:0}),f=te.useMemo(()=>{const g=Array.isArray(n)?n:[n];return mqe(y=>{h(m=>Object.keys(m).filter(p=>m[p]!==y[p]).every(p=>g.includes(p))?m:y)},r,{leading:o})},[r,o,n]);return te.useEffect(()=>{const g=a||window.ResizeObserver,y=new g(m=>{m.forEach(p=>{const{left:v,top:b,width:x,height:_}=(p==null?void 0:p.contentRect)??{};d.current=window.requestAnimationFrame(()=>{f({width:x,height:_,top:b,left:v})})})});return u.current&&y.observe(u.current),()=>{window.cancelAnimationFrame(d.current),y.disconnect(),f.cancel()}},[f,a]),Xz("div",{style:{...yqe,...i},ref:gqe([l,u]),className:e,...s,children:t({...c,ref:u.current,resize:f})})}),xqe=te.forwardRef(({scene:e,style:t,onMouseDown:r,onMouseUp:n,onMouseHover:i,onKeyDown:o,onKeyUp:a,onStart:s,onLookAt:l,onFollow:u,onWheel:d,onLoad:c,renderOnDemand:h=!0,...f},g)=>{const y=te.useRef(null),[m,p]=te.useState(!0);return te.useEffect(()=>{p(!0);let v;const b=[{name:"mouseDown",cb:r},{name:"mouseUp",cb:n},{name:"mouseHover",cb:i},{name:"keyDown",cb:o},{name:"keyUp",cb:a},{name:"start",cb:s},{name:"lookAt",cb:l},{name:"follow",cb:u},{name:"scroll",cb:d}];if(y.current){v=new K7e(y.current,{renderOnDemand:h});async function x(){await v.load(e);for(let _ of b)_.cb&&v.addEventListener(_.name,_.cb);p(!1),c==null||c(v)}x()}return()=>{for(let x of b)x.cb&&v.removeEventListener(x.name,x.cb);v.dispose()}},[e]),Xz(bqe,{ref:g,parentSizeStyles:t,debounceTime:50,...f,children:()=>Xz("canvas",{ref:y,style:{display:m?"none":"block"}})})});function wqe(){return Qe.jsx(xqe,{scene:"https://prod.spline.design/smKT6lidWY3aswzv/scene.splinecode"})}const qse=te.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),fI=te.createContext({}),oH=te.createContext(null),pI=typeof document<"u",_qe=pI?te.useLayoutEffect:te.useEffect,Xse=te.createContext({strict:!1}),aH=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Sqe="framerAppearId",Yse="data-"+aH(Sqe);function Aqe(e,t,r,n){const{visualElement:i}=te.useContext(fI),o=te.useContext(Xse),a=te.useContext(oH),s=te.useContext(qse).reducedMotion,l=te.useRef();n=n||o.renderer,!l.current&&n&&(l.current=n(e,{visualState:t,parent:i,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:s}));const u=l.current;te.useInsertionEffect(()=>{u&&u.update(r,a)});const d=te.useRef(!!(r[Yse]&&!window.HandoffComplete));return _qe(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),te.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Pb(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Mqe(e,t,r){return te.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Pb(r)&&(r.current=n))},[t])}function jA(e){return typeof e=="string"||Array.isArray(e)}function mI(e){return typeof e=="object"&&typeof e.start=="function"}const sH=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lH=["initial",...sH];function gI(e){return mI(e.animate)||lH.some(t=>jA(e[t]))}function Kse(e){return!!(gI(e)||e.variants)}function Cqe(e,t){if(gI(e)){const{initial:r,animate:n}=e;return{initial:r===!1||jA(r)?r:void 0,animate:jA(n)?n:void 0}}return e.inherit!==!1?t:{}}function Tqe(e){const{initial:t,animate:r}=Cqe(e,te.useContext(fI));return te.useMemo(()=>({initial:t,animate:r}),[zK(t),zK(r)])}function zK(e){return Array.isArray(e)?e.join(" "):e}const UK={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},HA={};for(const e in UK)HA[e]={isEnabled:t=>UK[e].some(r=>!!t[r])};function Eqe(e){for(const t in e)HA[t]={...HA[t],...e[t]}}const Jse=te.createContext({}),Qse=te.createContext({}),Pqe=Symbol.for("motionComponentSymbol");function Dqe({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:i}){e&&Eqe(e);function o(s,l){let u;const d={...te.useContext(qse),...s,layoutId:Oqe(s)},{isStatic:c}=d,h=Tqe(s),f=n(s,c);if(!c&&pI){h.visualElement=Aqe(i,f,d,t);const g=te.useContext(Qse),y=te.useContext(Xse).strict;h.visualElement&&(u=h.visualElement.loadFeatures(d,y,e,g))}return te.createElement(fI.Provider,{value:h},u&&h.visualElement?te.createElement(u,{visualElement:h.visualElement,...d}):null,r(i,s,Mqe(f,h.visualElement,l),f,c,h.visualElement))}const a=te.forwardRef(o);return a[Pqe]=i,a}function Oqe({layoutId:e}){const t=te.useContext(Jse).id;return t&&e!==void 0?t+"-"+e:e}function Rqe(e){function t(n,i={}){return Dqe(e(n,i))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,i)=>(r.has(i)||r.set(i,t(i)),r.get(i))})}const Iqe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uH(e){return typeof e!="string"||e.includes("-")?!1:!!(Iqe.indexOf(e)>-1||/[A-Z]/.test(e))}const xO={};function Lqe(e){Object.assign(xO,e)}const UM=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],k0=new Set(UM);function Zse(e,{layout:t,layoutId:r}){return k0.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!xO[e]||e==="opacity")}const Ps=e=>!!(e&&e.getVelocity),Bqe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nqe=UM.length;function kqe(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,i){let o="";for(let a=0;a<Nqe;a++){const s=UM[a];if(e[s]!==void 0){const l=Bqe[s]||s;o+=`${l}(${e[s]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,n?"":o):r&&n&&(o="none"),o}const $se=e=>t=>typeof t=="string"&&t.startsWith(e),ele=$se("--"),Kz=$se("var(--"),Fqe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,zqe=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Gp=(e,t,r)=>Math.min(Math.max(r,e),t),F0={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},NS={...F0,transform:e=>Gp(0,1,e)},VP={...F0,default:1},kS=e=>Math.round(e*1e5)/1e5,vI=/(-)?([\d]*\.?[\d])+/g,tle=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Uqe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function VM(e){return typeof e=="string"}const jM=e=>({test:t=>VM(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),jf=jM("deg"),Jc=jM("%"),yr=jM("px"),Vqe=jM("vh"),jqe=jM("vw"),VK={...Jc,parse:e=>Jc.parse(e)/100,transform:e=>Jc.transform(e*100)},jK={...F0,transform:Math.round},rle={borderWidth:yr,borderTopWidth:yr,borderRightWidth:yr,borderBottomWidth:yr,borderLeftWidth:yr,borderRadius:yr,radius:yr,borderTopLeftRadius:yr,borderTopRightRadius:yr,borderBottomRightRadius:yr,borderBottomLeftRadius:yr,width:yr,maxWidth:yr,height:yr,maxHeight:yr,size:yr,top:yr,right:yr,bottom:yr,left:yr,padding:yr,paddingTop:yr,paddingRight:yr,paddingBottom:yr,paddingLeft:yr,margin:yr,marginTop:yr,marginRight:yr,marginBottom:yr,marginLeft:yr,rotate:jf,rotateX:jf,rotateY:jf,rotateZ:jf,scale:VP,scaleX:VP,scaleY:VP,scaleZ:VP,skew:jf,skewX:jf,skewY:jf,distance:yr,translateX:yr,translateY:yr,translateZ:yr,x:yr,y:yr,z:yr,perspective:yr,transformPerspective:yr,opacity:NS,originX:VK,originY:VK,originZ:yr,zIndex:jK,fillOpacity:NS,strokeOpacity:NS,numOctaves:jK};function cH(e,t,r,n){const{style:i,vars:o,transform:a,transformOrigin:s}=e;let l=!1,u=!1,d=!0;for(const c in t){const h=t[c];if(ele(c)){o[c]=h;continue}const f=rle[c],g=zqe(h,f);if(k0.has(c)){if(l=!0,a[c]=g,!d)continue;h!==(f.default||0)&&(d=!1)}else c.startsWith("origin")?(u=!0,s[c]=g):i[c]=g}if(t.transform||(l||n?i.transform=kqe(e.transform,r,d,n):i.transform&&(i.transform="none")),u){const{originX:c="50%",originY:h="50%",originZ:f=0}=s;i.transformOrigin=`${c} ${h} ${f}`}}const dH=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nle(e,t,r){for(const n in t)!Ps(t[n])&&!Zse(n,r)&&(e[n]=t[n])}function Hqe({transformTemplate:e},t,r){return te.useMemo(()=>{const n=dH();return cH(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function Gqe(e,t,r){const n=e.style||{},i={};return nle(i,n,e),Object.assign(i,Hqe(e,t,r)),e.transformValues?e.transformValues(i):i}function Wqe(e,t,r){const n={},i=Gqe(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const qqe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function wO(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||qqe.has(e)}let ile=e=>!wO(e);function Xqe(e){e&&(ile=t=>t.startsWith("on")?!wO(t):e(t))}try{Xqe(require("@emotion/is-prop-valid").default)}catch{}function Yqe(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(ile(i)||r===!0&&wO(i)||!t&&!wO(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function HK(e,t,r){return typeof e=="string"?e:yr.transform(t+r*e)}function Kqe(e,t,r){const n=HK(t,e.x,e.width),i=HK(r,e.y,e.height);return`${n} ${i}`}const Jqe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qqe={offset:"strokeDashoffset",array:"strokeDasharray"};function Zqe(e,t,r=1,n=0,i=!0){e.pathLength=1;const o=i?Jqe:Qqe;e[o.offset]=yr.transform(-n);const a=yr.transform(t),s=yr.transform(r);e[o.array]=`${a} ${s}`}function hH(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:o,pathLength:a,pathSpacing:s=1,pathOffset:l=0,...u},d,c,h){if(cH(e,u,d,h),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:g,dimensions:y}=e;f.transform&&(y&&(g.transform=f.transform),delete f.transform),y&&(i!==void 0||o!==void 0||g.transform)&&(g.transformOrigin=Kqe(y,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),a!==void 0&&Zqe(f,a,s,l,!1)}const ole=()=>({...dH(),attrs:{}}),fH=e=>typeof e=="string"&&e.toLowerCase()==="svg";function $qe(e,t,r,n){const i=te.useMemo(()=>{const o=ole();return hH(o,t,{enableHardwareAcceleration:!1},fH(n),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};nle(o,e.style,e),i.style={...o,...i.style}}return i}function eXe(e=!1){return(r,n,i,{latestValues:o},a)=>{const l=(uH(r)?$qe:Wqe)(n,o,a,r),d={...Yqe(n,typeof r=="string",e),...l,ref:i},{children:c}=n,h=te.useMemo(()=>Ps(c)?c.get():c,[c]);return te.createElement(r,{...d,children:h})}}function ale(e,{style:t,vars:r},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const o in r)e.style.setProperty(o,r[o])}const sle=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lle(e,t,r,n){ale(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(sle.has(i)?i:aH(i),t.attrs[i])}function pH(e,t){const{style:r}=e,n={};for(const i in r)(Ps(r[i])||t.style&&Ps(t.style[i])||Zse(i,e))&&(n[i]=r[i]);return n}function ule(e,t){const r=pH(e,t);for(const n in e)if(Ps(e[n])||Ps(t[n])){const i=UM.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=e[n]}return r}function mH(e,t,r,n={},i={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,i)),t}function tXe(e){const t=te.useRef(null);return t.current===null&&(t.current=e()),t.current}const _O=e=>Array.isArray(e),rXe=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),nXe=e=>_O(e)?e[e.length-1]||0:e;function R2(e){const t=Ps(e)?e.get():e;return rXe(t)?t.toValue():t}function iXe({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,i,o){const a={latestValues:oXe(n,i,o,e),renderState:t()};return r&&(a.mount=s=>r(n,s,a)),a}const cle=e=>(t,r)=>{const n=te.useContext(fI),i=te.useContext(oH),o=()=>iXe(e,t,n,i);return r?o():tXe(o)};function oXe(e,t,r,n){const i={},o=n(e,{});for(const h in o)i[h]=R2(o[h]);let{initial:a,animate:s}=e;const l=gI(e),u=Kse(e);t&&u&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),s===void 0&&(s=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const c=d?s:a;return c&&typeof c!="boolean"&&!mI(c)&&(Array.isArray(c)?c:[c]).forEach(f=>{const g=mH(e,f);if(!g)return;const{transitionEnd:y,transition:m,...p}=g;for(const v in p){let b=p[v];if(Array.isArray(b)){const x=d?b.length-1:0;b=b[x]}b!==null&&(i[v]=b)}for(const v in y)i[v]=y[v]}),i}const yi=e=>e;class GK{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function aXe(e){let t=new GK,r=new GK,n=0,i=!1,o=!1;const a=new WeakSet,s={schedule:(l,u=!1,d=!1)=>{const c=d&&i,h=c?t:r;return u&&a.add(l),h.add(l)&&c&&i&&(n=t.order.length),l},cancel:l=>{r.remove(l),a.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(l),a.has(d)&&(s.schedule(d),e())}i=!1,o&&(o=!1,s.process(l))}};return s}const jP=["prepare","read","update","preRender","render","postRender"],sXe=40;function lXe(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=jP.reduce((c,h)=>(c[h]=aXe(()=>r=!0),c),{}),a=c=>o[c].process(i),s=()=>{const c=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(c-i.timestamp,sXe),1),i.timestamp=c,i.isProcessing=!0,jP.forEach(a),i.isProcessing=!1,r&&t&&(n=!1,e(s))},l=()=>{r=!0,n=!0,i.isProcessing||e(s)};return{schedule:jP.reduce((c,h)=>{const f=o[h];return c[h]=(g,y=!1,m=!1)=>(r||l(),f.schedule(g,y,m)),c},{}),cancel:c=>jP.forEach(h=>o[h].cancel(c)),state:i,steps:o}}const{schedule:zn,cancel:Nh,state:wo,steps:UN}=lXe(typeof requestAnimationFrame<"u"?requestAnimationFrame:yi,!0),uXe={useVisualState:cle({scrapeMotionValuesFromProps:ule,createRenderState:ole,onMount:(e,t,{renderState:r,latestValues:n})=>{zn.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),zn.render(()=>{hH(r,n,{enableHardwareAcceleration:!1},fH(t.tagName),e.transformTemplate),lle(t,r)})}})},cXe={useVisualState:cle({scrapeMotionValuesFromProps:pH,createRenderState:dH})};function dXe(e,{forwardMotionProps:t=!1},r,n){return{...uH(e)?uXe:cXe,preloadedFeatures:r,useRender:eXe(t),createVisualElement:n,Component:e}}function ph(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const dle=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function yI(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const hXe=e=>t=>dle(t)&&e(t,yI(t));function wh(e,t,r,n){return ph(e,t,hXe(r),n)}const fXe=(e,t)=>r=>t(e(r)),Rp=(...e)=>e.reduce(fXe);function hle(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const WK=hle("dragHorizontal"),qK=hle("dragVertical");function fle(e){let t=!1;if(e==="y")t=qK();else if(e==="x")t=WK();else{const r=WK(),n=qK();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function ple(){const e=fle(!0);return e?(e(),!1):!0}class nm{constructor(t){this.isMounted=!1,this.node=t}update(){}}function XK(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),i=(o,a)=>{if(o.type==="touch"||ple())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[n]&&zn.update(()=>s[n](o,a))};return wh(e.current,r,i,{passive:!e.getProps()[n]})}class pXe extends nm{mount(){this.unmount=Rp(XK(this.node,!0),XK(this.node,!1))}unmount(){}}class mXe extends nm{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rp(ph(this.node.current,"focus",()=>this.onFocus()),ph(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const mle=(e,t)=>t?e===t?!0:mle(e,t.parentElement):!1;function VN(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,yI(r))}class gXe extends nm{constructor(){super(...arguments),this.removeStartListeners=yi,this.removeEndListeners=yi,this.removeAccessibleListeners=yi,this.startPointerPress=(t,r)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),o=wh(window,"pointerup",(s,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d}=this.node.getProps();zn.update(()=>{mle(this.node.current,s.target)?u&&u(s,l):d&&d(s,l)})},{passive:!(n.onTap||n.onPointerUp)}),a=wh(window,"pointercancel",(s,l)=>this.cancelPress(s,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Rp(o,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=s=>{s.key!=="Enter"||!this.checkPressEnd()||VN("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&zn.update(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=ph(this.node.current,"keyup",a),VN("down",(s,l)=>{this.startPress(s,l)})},r=ph(this.node.current,"keydown",t),n=()=>{this.isPressing&&VN("cancel",(o,a)=>this.cancelPress(o,a))},i=ph(this.node.current,"blur",n);this.removeAccessibleListeners=Rp(r,i)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&zn.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ple()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&zn.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=wh(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=ph(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Rp(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Jz=new WeakMap,jN=new WeakMap,vXe=e=>{const t=Jz.get(e.target);t&&t(e)},yXe=e=>{e.forEach(vXe)};function bXe({root:e,...t}){const r=e||document;jN.has(r)||jN.set(r,{});const n=jN.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(yXe,{root:e,...t})),n[i]}function xXe(e,t,r){const n=bXe(t);return Jz.set(e,r),n.observe(e),()=>{Jz.delete(e),n.unobserve(e)}}const wXe={some:0,all:1};class _Xe extends nm{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:o}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:wXe[i]},s=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:c}=this.node.getProps(),h=u?d:c;h&&h(l)};return xXe(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(SXe(t,r))&&this.startObserver()}unmount(){}}function SXe({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const AXe={inView:{Feature:_Xe},tap:{Feature:gXe},focus:{Feature:mXe},hover:{Feature:pXe}};function gle(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function MXe(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function CXe(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function bI(e,t,r){const n=e.getProps();return mH(n,t,r!==void 0?r:n.custom,MXe(e),CXe(e))}let TXe=yi,gH=yi;const Ip=e=>e*1e3,_h=e=>e/1e3,EXe={current:!1},vle=e=>Array.isArray(e)&&typeof e[0]=="number";function yle(e){return!!(!e||typeof e=="string"&&ble[e]||vle(e)||Array.isArray(e)&&e.every(yle))}const aS=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,ble={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:aS([0,.65,.55,1]),circOut:aS([.55,0,1,.45]),backIn:aS([.31,.01,.66,-.59]),backOut:aS([.33,1.53,.69,.99])};function xle(e){if(e)return vle(e)?aS(e):Array.isArray(e)?e.map(xle):ble[e]}function PXe(e,t,r,{delay:n=0,duration:i,repeat:o=0,repeatType:a="loop",ease:s,times:l}={}){const u={[t]:r};l&&(u.offset=l);const d=xle(s);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function DXe(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const wle=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,OXe=1e-7,RXe=12;function IXe(e,t,r,n,i){let o,a,s=0;do a=t+(r-t)/2,o=wle(a,n,i)-e,o>0?r=a:t=a;while(Math.abs(o)>OXe&&++s<RXe);return a}function HM(e,t,r,n){if(e===t&&r===n)return yi;const i=o=>IXe(o,0,1,e,r);return o=>o===0||o===1?o:wle(i(o),t,n)}const LXe=HM(.42,0,1,1),BXe=HM(0,0,.58,1),_le=HM(.42,0,.58,1),NXe=e=>Array.isArray(e)&&typeof e[0]!="number",Sle=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ale=e=>t=>1-e(1-t),Mle=e=>1-Math.sin(Math.acos(e)),vH=Ale(Mle),kXe=Sle(vH),Cle=HM(.33,1.53,.69,.99),yH=Ale(Cle),FXe=Sle(yH),zXe=e=>(e*=2)<1?.5*yH(e):.5*(2-Math.pow(2,-10*(e-1))),UXe={linear:yi,easeIn:LXe,easeInOut:_le,easeOut:BXe,circIn:Mle,circInOut:kXe,circOut:vH,backIn:yH,backInOut:FXe,backOut:Cle,anticipate:zXe},YK=e=>{if(Array.isArray(e)){gH(e.length===4);const[t,r,n,i]=e;return HM(t,r,n,i)}else if(typeof e=="string")return UXe[e];return e},bH=(e,t)=>r=>!!(VM(r)&&Uqe.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),Tle=(e,t,r)=>n=>{if(!VM(n))return n;const[i,o,a,s]=n.match(vI);return{[e]:parseFloat(i),[t]:parseFloat(o),[r]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},VXe=e=>Gp(0,255,e),HN={...F0,transform:e=>Math.round(VXe(e))},Vg={test:bH("rgb","red"),parse:Tle("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+HN.transform(e)+", "+HN.transform(t)+", "+HN.transform(r)+", "+kS(NS.transform(n))+")"};function jXe(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Qz={test:bH("#"),parse:jXe,transform:Vg.transform},Db={test:bH("hsl","hue"),parse:Tle("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Jc.transform(kS(t))+", "+Jc.transform(kS(r))+", "+kS(NS.transform(n))+")"},Ea={test:e=>Vg.test(e)||Qz.test(e)||Db.test(e),parse:e=>Vg.test(e)?Vg.parse(e):Db.test(e)?Db.parse(e):Qz.parse(e),transform:e=>VM(e)?e:e.hasOwnProperty("red")?Vg.transform(e):Db.transform(e)},ei=(e,t,r)=>-r*e+r*t+e;function GN(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function HXe({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,o=0,a=0;if(!t)i=o=a=r;else{const s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;i=GN(l,s,e+1/3),o=GN(l,s,e),a=GN(l,s,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const WN=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},GXe=[Qz,Vg,Db],WXe=e=>GXe.find(t=>t.test(e));function KK(e){const t=WXe(e);let r=t.parse(e);return t===Db&&(r=HXe(r)),r}const Ele=(e,t)=>{const r=KK(e),n=KK(t),i={...r};return o=>(i.red=WN(r.red,n.red,o),i.green=WN(r.green,n.green,o),i.blue=WN(r.blue,n.blue,o),i.alpha=ei(r.alpha,n.alpha,o),Vg.transform(i))};function qXe(e){var t,r;return isNaN(e)&&VM(e)&&(((t=e.match(vI))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(tle))===null||r===void 0?void 0:r.length)||0)>0}const Ple={regex:Fqe,countKey:"Vars",token:"${v}",parse:yi},Dle={regex:tle,countKey:"Colors",token:"${c}",parse:Ea.parse},Ole={regex:vI,countKey:"Numbers",token:"${n}",parse:F0.parse};function qN(e,{regex:t,countKey:r,token:n,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...o.map(i)))}function SO(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&qN(r,Ple),qN(r,Dle),qN(r,Ole),r}function Rle(e){return SO(e).values}function Ile(e){const{values:t,numColors:r,numVars:n,tokenised:i}=SO(e),o=t.length;return a=>{let s=i;for(let l=0;l<o;l++)l<n?s=s.replace(Ple.token,a[l]):l<n+r?s=s.replace(Dle.token,Ea.transform(a[l])):s=s.replace(Ole.token,kS(a[l]));return s}}const XXe=e=>typeof e=="number"?0:e;function YXe(e){const t=Rle(e);return Ile(e)(t.map(XXe))}const Wp={test:qXe,parse:Rle,createTransformer:Ile,getAnimatableNone:YXe},Lle=(e,t)=>r=>`${r>0?t:e}`;function Ble(e,t){return typeof e=="number"?r=>ei(e,t,r):Ea.test(e)?Ele(e,t):e.startsWith("var(")?Lle(e,t):kle(e,t)}const Nle=(e,t)=>{const r=[...e],n=r.length,i=e.map((o,a)=>Ble(o,t[a]));return o=>{for(let a=0;a<n;a++)r[a]=i[a](o);return r}},KXe=(e,t)=>{const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=Ble(e[i],t[i]));return i=>{for(const o in n)r[o]=n[o](i);return r}},kle=(e,t)=>{const r=Wp.createTransformer(t),n=SO(e),i=SO(t);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?Rp(Nle(n.values,i.values),r):Lle(e,t)},GA=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},JK=(e,t)=>r=>ei(e,t,r);function JXe(e){return typeof e=="number"?JK:typeof e=="string"?Ea.test(e)?Ele:kle:Array.isArray(e)?Nle:typeof e=="object"?KXe:JK}function QXe(e,t,r){const n=[],i=r||JXe(e[0]),o=e.length-1;for(let a=0;a<o;a++){let s=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||yi:t;s=Rp(l,s)}n.push(s)}return n}function Fle(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const o=e.length;if(gH(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=QXe(t,n,i),s=a.length,l=u=>{let d=0;if(s>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const c=GA(e[d],e[d+1],u);return a[d](c)};return r?u=>l(Gp(e[0],e[o-1],u)):l}function ZXe(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=GA(0,t,n);e.push(ei(r,1,i))}}function $Xe(e){const t=[0];return ZXe(t,e.length-1),t}function eYe(e,t){return e.map(r=>r*t)}function tYe(e,t){return e.map(()=>t||_le).splice(0,e.length-1)}function AO({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=NXe(n)?n.map(YK):YK(n),o={done:!1,value:t[0]},a=eYe(r&&r.length===t.length?r:$Xe(t),e),s=Fle(a,t,{ease:Array.isArray(i)?i:tYe(t,i)});return{calculatedDuration:e,next:l=>(o.value=s(l),o.done=l>=e,o)}}function zle(e,t){return t?e*(1e3/t):0}const rYe=5;function Ule(e,t,r){const n=Math.max(t-rYe,0);return zle(r-e(n),t-n)}const XN=.001,nYe=.01,QK=10,iYe=.05,oYe=1;function aYe({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,o;TXe(e<=Ip(QK));let a=1-t;a=Gp(iYe,oYe,a),e=Gp(nYe,QK,_h(e)),a<1?(i=u=>{const d=u*a,c=d*e,h=d-r,f=Zz(u,a),g=Math.exp(-c);return XN-h/f*g},o=u=>{const c=u*a*e,h=c*r+r,f=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-c),y=Zz(Math.pow(u,2),a);return(-i(u)+XN>0?-1:1)*((h-f)*g)/y}):(i=u=>{const d=Math.exp(-u*e),c=(u-r)*e+1;return-XN+d*c},o=u=>{const d=Math.exp(-u*e),c=(r-u)*(e*e);return d*c});const s=5/e,l=lYe(i,o,s);if(e=Ip(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const sYe=12;function lYe(e,t,r){let n=r;for(let i=1;i<sYe;i++)n=n-e(n)/t(n);return n}function Zz(e,t){return e*Math.sqrt(1-t*t)}const uYe=["duration","bounce"],cYe=["stiffness","damping","mass"];function ZK(e,t){return t.some(r=>e[r]!==void 0)}function dYe(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!ZK(e,cYe)&&ZK(e,uYe)){const r=aYe(e);t={...t,...r,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}function Vle({keyframes:e,restDelta:t,restSpeed:r,...n}){const i=e[0],o=e[e.length-1],a={done:!1,value:i},{stiffness:s,damping:l,mass:u,velocity:d,duration:c,isResolvedFromDuration:h}=dYe(n),f=d?-_h(d):0,g=l/(2*Math.sqrt(s*u)),y=o-i,m=_h(Math.sqrt(s/u)),p=Math.abs(y)<5;r||(r=p?.01:2),t||(t=p?.005:.5);let v;if(g<1){const b=Zz(m,g);v=x=>{const _=Math.exp(-g*m*x);return o-_*((f+g*m*y)/b*Math.sin(b*x)+y*Math.cos(b*x))}}else if(g===1)v=b=>o-Math.exp(-m*b)*(y+(f+m*y)*b);else{const b=m*Math.sqrt(g*g-1);v=x=>{const _=Math.exp(-g*m*x),A=Math.min(b*x,300);return o-_*((f+g*m*y)*Math.sinh(A)+b*y*Math.cosh(A))/b}}return{calculatedDuration:h&&c||null,next:b=>{const x=v(b);if(h)a.done=b>=c;else{let _=f;b!==0&&(g<1?_=Ule(v,b,x):_=0);const A=Math.abs(_)<=r,M=Math.abs(o-x)<=t;a.done=A&&M}return a.value=a.done?o:x,a}}}function $K({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:l,restDelta:u=.5,restSpeed:d}){const c=e[0],h={done:!1,value:c},f=T=>s!==void 0&&T<s||l!==void 0&&T>l,g=T=>s===void 0?l:l===void 0||Math.abs(s-T)<Math.abs(l-T)?s:l;let y=r*t;const m=c+y,p=a===void 0?m:a(m);p!==m&&(y=p-c);const v=T=>-y*Math.exp(-T/n),b=T=>p+v(T),x=T=>{const C=v(T),E=b(T);h.done=Math.abs(C)<=u,h.value=h.done?p:E};let _,A;const M=T=>{f(h.value)&&(_=T,A=Vle({keyframes:[h.value,g(h.value)],velocity:Ule(b,T,h.value),damping:i,stiffness:o,restDelta:u,restSpeed:d}))};return M(0),{calculatedDuration:null,next:T=>{let C=!1;return!A&&_===void 0&&(C=!0,x(T),M(T)),_!==void 0&&T>_?A.next(T-_):(!C&&x(T),h)}}}const hYe=e=>{const t=({timestamp:r})=>e(r);return{start:()=>zn.update(t,!0),stop:()=>Nh(t),now:()=>wo.isProcessing?wo.timestamp:performance.now()}},eJ=2e4;function tJ(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<eJ;)t+=r,n=e.next(t);return t>=eJ?1/0:t}const fYe={decay:$K,inertia:$K,tween:AO,keyframes:AO,spring:Vle};function MO({autoplay:e=!0,delay:t=0,driver:r=hYe,keyframes:n,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:s="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:c,...h}){let f=1,g=!1,y,m;const p=()=>{m=new Promise(H=>{y=H})};p();let v;const b=fYe[i]||AO;let x;b!==AO&&typeof n[0]!="number"&&(x=Fle([0,100],n,{clamp:!1}),n=[0,100]);const _=b({...h,keyframes:n});let A;s==="mirror"&&(A=b({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let M="idle",T=null,C=null,E=null;_.calculatedDuration===null&&o&&(_.calculatedDuration=tJ(_));const{calculatedDuration:D}=_;let I=1/0,k=1/0;D!==null&&(I=D+a,k=I*(o+1)-a);let L=0;const U=H=>{if(C===null)return;f>0&&(C=Math.min(C,H)),f<0&&(C=Math.min(H-k/f,C)),T!==null?L=T:L=Math.round(H-C)*f;const Y=L-t*(f>=0?1:-1),Q=f>=0?Y<0:Y>k;L=Math.max(Y,0),M==="finished"&&T===null&&(L=k);let $=L,ne=_;if(o){const ie=L/I;let le=Math.floor(ie),se=ie%1;!se&&ie>=1&&(se=1),se===1&&le--,le=Math.min(le,o+1);const re=!!(le%2);re&&(s==="reverse"?(se=1-se,a&&(se-=a/I)):s==="mirror"&&(ne=A));let ye=Gp(0,1,se);L>k&&(ye=s==="reverse"&&re?1:0),$=ye*I}const Z=Q?{done:!1,value:n[0]}:ne.next($);x&&(Z.value=x(Z.value));let{done:ce}=Z;!Q&&D!==null&&(ce=f>=0?L>=k:L<=0);const ae=T===null&&(M==="finished"||M==="running"&&ce);return c&&c(Z.value),ae&&z(),Z},W=()=>{v&&v.stop(),v=void 0},G=()=>{M="idle",W(),y(),p(),C=E=null},z=()=>{M="finished",d&&d(),W(),y()},V=()=>{if(g)return;v||(v=r(U));const H=v.now();l&&l(),T!==null?C=H-T:(!C||M==="finished")&&(C=H),M==="finished"&&p(),E=C,T=null,M="running",v.start()};e&&V();const j={then(H,Y){return m.then(H,Y)},get time(){return _h(L)},set time(H){H=Ip(H),L=H,T!==null||!v||f===0?T=H:C=v.now()-H/f},get duration(){const H=_.calculatedDuration===null?tJ(_):_.calculatedDuration;return _h(H)},get speed(){return f},set speed(H){H===f||!v||(f=H,j.time=_h(L))},get state(){return M},play:V,pause:()=>{M="paused",T=L},stop:()=>{g=!0,M!=="idle"&&(M="idle",u&&u(),G())},cancel:()=>{E!==null&&U(E),G()},complete:()=>{M="finished"},sample:H=>(C=0,U(H))};return j}function pYe(e){let t;return()=>(t===void 0&&(t=e()),t)}const mYe=pYe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),gYe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),HP=10,vYe=2e4,yYe=(e,t)=>t.type==="spring"||e==="backgroundColor"||!yle(t.ease);function bYe(e,t,{onUpdate:r,onComplete:n,...i}){if(!(mYe()&&gYe.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,s,l;const u=()=>{l=new Promise(v=>{s=v})};u();let{keyframes:d,duration:c=300,ease:h,times:f}=i;if(yYe(t,i)){const v=MO({...i,repeat:0,delay:0});let b={done:!1,value:d[0]};const x=[];let _=0;for(;!b.done&&_<vYe;)b=v.sample(_),x.push(b.value),_+=HP;f=void 0,d=x,c=_-HP,h="linear"}const g=PXe(e.owner.current,t,d,{...i,duration:c,ease:h,times:f});i.syncStart&&(g.startTime=wo.isProcessing?wo.timestamp:document.timeline?document.timeline.currentTime:performance.now());const y=()=>g.cancel(),m=()=>{zn.update(y),s(),u()};return g.onfinish=()=>{e.set(DXe(d,i)),n&&n(),m()},{then(v,b){return l.then(v,b)},attachTimeline(v){return g.timeline=v,g.onfinish=null,yi},get time(){return _h(g.currentTime||0)},set time(v){g.currentTime=Ip(v)},get speed(){return g.playbackRate},set speed(v){g.playbackRate=v},get duration(){return _h(c)},play:()=>{a||(g.play(),Nh(y))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:v}=g;if(v){const b=MO({...i,autoplay:!1});e.setWithVelocity(b.sample(v-HP).value,b.sample(v).value,HP)}m()},complete:()=>g.finish(),cancel:m}}function xYe({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const i=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:yi,pause:yi,stop:yi,then:o=>(o(),Promise.resolve()),cancel:yi,complete:yi});return t?MO({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const wYe={type:"spring",stiffness:500,damping:25,restSpeed:10},_Ye=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),SYe={type:"keyframes",duration:.8},AYe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},MYe=(e,{keyframes:t})=>t.length>2?SYe:k0.has(e)?e.startsWith("scale")?_Ye(t[1]):wYe:AYe,$z=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wp.test(t)||t==="0")&&!t.startsWith("url(")),CYe=new Set(["brightness","contrast","saturate","opacity"]);function TYe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(vI)||[];if(!n)return e;const i=r.replace(n,"");let o=CYe.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+i+")"}const EYe=/([a-z-]*)\(.*?\)/g,eU={...Wp,getAnimatableNone:e=>{const t=e.match(EYe);return t?t.map(TYe).join(" "):e}},PYe={...rle,color:Ea,backgroundColor:Ea,outlineColor:Ea,fill:Ea,stroke:Ea,borderColor:Ea,borderTopColor:Ea,borderRightColor:Ea,borderBottomColor:Ea,borderLeftColor:Ea,filter:eU,WebkitFilter:eU},xH=e=>PYe[e];function jle(e,t){let r=xH(e);return r!==eU&&(r=Wp),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Hle=e=>/^0[^.\s]+$/.test(e);function DYe(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Hle(e)}function OYe(e,t,r,n){const i=$z(t,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const a=n.from!==void 0?n.from:e.get();let s;const l=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?a:o[u-1]),DYe(o[u])&&l.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(s=o[u]);if(i&&l.length&&s)for(let u=0;u<l.length;u++){const d=l[u];o[d]=jle(t,s)}return o}function RYe({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function wH(e,t){return e[t]||e.default||e}const _H=(e,t,r,n={})=>i=>{const o=wH(n,e)||{},a=o.delay||n.delay||0;let{elapsed:s=0}=n;s=s-Ip(a);const l=OYe(t,e,r,o),u=l[0],d=l[l.length-1],c=$z(e,u),h=$z(e,d);let f={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-s,onUpdate:g=>{t.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(RYe(o)||(f={...f,...MYe(e,f)}),f.duration&&(f.duration=Ip(f.duration)),f.repeatDelay&&(f.repeatDelay=Ip(f.repeatDelay)),!c||!h||EXe.current||o.type===!1)return xYe(f);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=bYe(t,e,f);if(g)return g}return MO(f)};function CO(e){return!!(Ps(e)&&e.add)}const Gle=e=>/^\-?\d*\.?\d+$/.test(e);function SH(e,t){e.indexOf(t)===-1&&e.push(t)}function AH(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class MH{constructor(){this.subscriptions=[]}add(t){return SH(this.subscriptions,t),()=>AH(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const IYe=e=>!isNaN(parseFloat(e));let LYe=class{constructor(t,r={}){this.version="10.16.15",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:a}=wo;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,zn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>zn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=IYe(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new MH);const n=this.events[t].add(r);return t==="change"?()=>{n(),zn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?zle(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function qx(e,t){return new LYe(e,t)}const Wle=e=>t=>t.test(e),BYe={test:e=>e==="auto",parse:e=>e},qle=[F0,yr,Jc,jf,jqe,Vqe,BYe],z_=e=>qle.find(Wle(e)),NYe=[...qle,Ea,Wp],kYe=e=>NYe.find(Wle(e));function FYe(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,qx(r))}function zYe(e,t){const r=bI(e,t);let{transitionEnd:n={},transition:i={},...o}=r?e.makeTargetAnimatable(r,!1):{};o={...o,...n};for(const a in o){const s=nXe(o[a]);FYe(e,a,s)}}function UYe(e,t,r){var n,i;const o=Object.keys(t).filter(s=>!e.hasValue(s)),a=o.length;if(a)for(let s=0;s<a;s++){const l=o[s],u=t[l];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(i=(n=r[l])!==null&&n!==void 0?n:e.readValue(l))!==null&&i!==void 0?i:t[l]),d!=null&&(typeof d=="string"&&(Gle(d)||Hle(d))?d=parseFloat(d):!kYe(d)&&Wp.test(u)&&(d=jle(l,u)),e.addValue(l,qx(d,{owner:e})),r[l]===void 0&&(r[l]=d),d!==null&&e.setBaseTarget(l,d))}}function VYe(e,t){return t?(t[e]||t.default||t).from:void 0}function jYe(e,t,r){const n={};for(const i in e){const o=VYe(i,t);if(o!==void 0)n[i]=o;else{const a=r.getValue(i);a&&(n[i]=a.get())}}return n}function HYe({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function GYe(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function Xle(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...s}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");n&&(o=n);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const c in s){const h=e.getValue(c),f=s[c];if(!h||f===void 0||d&&HYe(d,c))continue;const g={delay:r,elapsed:0,...wH(o||{},c)};let y=!0;if(window.HandoffAppearAnimations&&!h.hasAnimated){const v=e.getProps()[Yse];if(v){const b=window.HandoffAppearAnimations(v,c,h,zn);b&&(y=!1,g.elapsed=b,g.syncStart=!0)}}let m=y&&!GYe(h,f);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(m=!1),h.animation&&(m=!1),m)continue;h.start(_H(c,h,f,e.shouldReduceMotion&&k0.has(c)?{type:!1}:g));const p=h.animation;CO(l)&&(l.add(c),p.then(()=>l.remove(c))),u.push(p)}return a&&Promise.all(u).then(()=>{a&&zYe(e,a)}),u}function tU(e,t,r={}){const n=bI(e,t,r.custom);let{transition:i=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const o=n?()=>Promise.all(Xle(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:c}=i;return WYe(e,t,u+l,d,c,r)}:()=>Promise.resolve(),{when:s}=i;if(s){const[l,u]=s==="beforeChildren"?[o,a]:[a,o];return l().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function WYe(e,t,r=0,n=0,i=1,o){const a=[],s=(e.variantChildren.size-1)*n,l=i===1?(u=0)=>u*n:(u=0)=>s-u*n;return Array.from(e.variantChildren).sort(qYe).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(tU(u,t,{...o,delay:r+l(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function qYe(e,t){return e.sortNodePosition(t)}function XYe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(o=>tU(e,o,r));n=Promise.all(i)}else if(typeof t=="string")n=tU(e,t,r);else{const i=typeof t=="function"?bI(e,t,r.custom):t;n=Promise.all(Xle(e,i,r))}return n.then(()=>e.notify("AnimationComplete",t))}const YYe=[...sH].reverse(),KYe=sH.length;function JYe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>XYe(e,r,n)))}function QYe(e){let t=JYe(e);const r=$Ye();let n=!0;const i=(l,u)=>{const d=bI(e,u);if(d){const{transition:c,transitionEnd:h,...f}=d;l={...l,...f,...h}}return l};function o(l){t=l(e)}function a(l,u){const d=e.getProps(),c=e.getVariantContext(!0)||{},h=[],f=new Set;let g={},y=1/0;for(let p=0;p<KYe;p++){const v=YYe[p],b=r[v],x=d[v]!==void 0?d[v]:c[v],_=jA(x),A=v===u?b.isActive:null;A===!1&&(y=p);let M=x===c[v]&&x!==d[v]&&_;if(M&&n&&e.manuallyAnimateOnMount&&(M=!1),b.protectedKeys={...g},!b.isActive&&A===null||!x&&!b.prevProp||mI(x)||typeof x=="boolean")continue;const T=ZYe(b.prevProp,x);let C=T||v===u&&b.isActive&&!M&&_||p>y&&_;const E=Array.isArray(x)?x:[x];let D=E.reduce(i,{});A===!1&&(D={});const{prevResolvedValues:I={}}=b,k={...I,...D},L=U=>{C=!0,f.delete(U),b.needsAnimating[U]=!0};for(const U in k){const W=D[U],G=I[U];g.hasOwnProperty(U)||(W!==G?_O(W)&&_O(G)?!gle(W,G)||T?L(U):b.protectedKeys[U]=!0:W!==void 0?L(U):f.add(U):W!==void 0&&f.has(U)?L(U):b.protectedKeys[U]=!0)}b.prevProp=x,b.prevResolvedValues=D,b.isActive&&(g={...g,...D}),n&&e.blockInitialAnimation&&(C=!1),C&&!M&&h.push(...E.map(U=>({animation:U,options:{type:v,...l}})))}if(f.size){const p={};f.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(p[v]=b)}),h.push({animation:p})}let m=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(m=!1),n=!1,m?t(h):Promise.resolve()}function s(l,u,d){var c;if(r[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,u)}),r[l].isActive=u;const h=a(d,l);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>r}}function ZYe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gle(t,e):!1}function ag(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $Ye(){return{animate:ag(!0),whileInView:ag(),whileHover:ag(),whileTap:ag(),whileDrag:ag(),whileFocus:ag(),exit:ag()}}class eKe extends nm{constructor(t){super(t),t.animationState||(t.animationState=QYe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),mI(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let tKe=0;class rKe extends nm{constructor(){super(...arguments),this.id=tKe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&o.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const nKe={animation:{Feature:eKe},exit:{Feature:rKe}},rJ=(e,t)=>Math.abs(e-t);function iKe(e,t){const r=rJ(e.x,t.x),n=rJ(e.y,t.y);return Math.sqrt(r**2+n**2)}class Yle{constructor(t,r,{transformPagePoint:n,contextWindow:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=KN(this.lastMoveEventInfo,this.history),c=this.startEvent!==null,h=iKe(d.offset,{x:0,y:0})>=3;if(!c&&!h)return;const{point:f}=d,{timestamp:g}=wo;this.history.push({...f,timestamp:g});const{onStart:y,onMove:m}=this.handlers;c||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,c)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=YN(c,this.transformPagePoint),zn.update(this.updatePoint,!0)},this.handlePointerUp=(d,c)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:h,onSessionEnd:f}=this.handlers,g=KN(d.type==="pointercancel"?this.lastMoveEventInfo:YN(c,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,g),f&&f(d,g)},!dle(t))return;this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const o=yI(t),a=YN(o,this.transformPagePoint),{point:s}=a,{timestamp:l}=wo;this.history=[{...s,timestamp:l}];const{onSessionStart:u}=r;u&&u(t,KN(a,this.history)),this.removeListeners=Rp(wh(this.contextWindow,"pointermove",this.handlePointerMove),wh(this.contextWindow,"pointerup",this.handlePointerUp),wh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Nh(this.updatePoint)}}function YN(e,t){return t?{point:t(e.point)}:e}function nJ(e,t){return{x:e.x-t.x,y:e.y-t.y}}function KN({point:e},t){return{point:e,delta:nJ(e,Kle(t)),offset:nJ(e,oKe(t)),velocity:aKe(t,.1)}}function oKe(e){return e[0]}function Kle(e){return e[e.length-1]}function aKe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=Kle(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>Ip(t)));)r--;if(!n)return{x:0,y:0};const o=_h(i.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-n.x)/o,y:(i.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function sl(e){return e.max-e.min}function rU(e,t=0,r=.01){return Math.abs(e-t)<=r}function iJ(e,t,r,n=.5){e.origin=n,e.originPoint=ei(t.min,t.max,e.origin),e.scale=sl(r)/sl(t),(rU(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ei(r.min,r.max,e.origin)-e.originPoint,(rU(e.translate)||isNaN(e.translate))&&(e.translate=0)}function FS(e,t,r,n){iJ(e.x,t.x,r.x,n?n.originX:void 0),iJ(e.y,t.y,r.y,n?n.originY:void 0)}function oJ(e,t,r){e.min=r.min+t.min,e.max=e.min+sl(t)}function sKe(e,t,r){oJ(e.x,t.x,r.x),oJ(e.y,t.y,r.y)}function aJ(e,t,r){e.min=t.min-r.min,e.max=e.min+sl(t)}function zS(e,t,r){aJ(e.x,t.x,r.x),aJ(e.y,t.y,r.y)}function lKe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ei(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ei(r,e,n.max):Math.min(e,r)),e}function sJ(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function uKe(e,{top:t,left:r,bottom:n,right:i}){return{x:sJ(e.x,r,i),y:sJ(e.y,t,n)}}function lJ(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function cKe(e,t){return{x:lJ(e.x,t.x),y:lJ(e.y,t.y)}}function dKe(e,t){let r=.5;const n=sl(e),i=sl(t);return i>n?r=GA(t.min,t.max-n,e.min):n>i&&(r=GA(e.min,e.max-i,t.min)),Gp(0,1,r)}function hKe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const nU=.35;function fKe(e=nU){return e===!1?e=0:e===!0&&(e=nU),{x:uJ(e,"left","right"),y:uJ(e,"top","bottom")}}function uJ(e,t,r){return{min:cJ(e,t),max:cJ(e,r)}}function cJ(e,t){return typeof e=="number"?e:e[t]||0}const dJ=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ob=()=>({x:dJ(),y:dJ()}),hJ=()=>({min:0,max:0}),ki=()=>({x:hJ(),y:hJ()});function Oc(e){return[e("x"),e("y")]}function Jle({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function pKe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mKe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function JN(e){return e===void 0||e===1}function iU({scale:e,scaleX:t,scaleY:r}){return!JN(e)||!JN(t)||!JN(r)}function yg(e){return iU(e)||Qle(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Qle(e){return fJ(e.x)||fJ(e.y)}function fJ(e){return e&&e!=="0%"}function TO(e,t,r){const n=e-r,i=t*n;return r+i}function pJ(e,t,r,n,i){return i!==void 0&&(e=TO(e,i,n)),TO(e,r,n)+t}function oU(e,t=0,r=1,n,i){e.min=pJ(e.min,t,r,n,i),e.max=pJ(e.max,t,r,n,i)}function Zle(e,{x:t,y:r}){oU(e.x,t.translate,t.scale,t.originPoint),oU(e.y,r.translate,r.scale,r.originPoint)}function gKe(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let o,a;for(let s=0;s<i;s++){o=r[s],a=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Rb(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Zle(e,a)),n&&yg(o.latestValues)&&Rb(e,o.latestValues))}t.x=mJ(t.x),t.y=mJ(t.y)}function mJ(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Kf(e,t){e.min=e.min+t,e.max=e.max+t}function gJ(e,t,[r,n,i]){const o=t[i]!==void 0?t[i]:.5,a=ei(e.min,e.max,o);oU(e,t[r],t[n],a,t.scale)}const vKe=["x","scaleX","originX"],yKe=["y","scaleY","originY"];function Rb(e,t){gJ(e.x,t,vKe),gJ(e.y,t,yKe)}function $le(e,t){return Jle(mKe(e.getBoundingClientRect(),t))}function bKe(e,t,r){const n=$le(e,r),{scroll:i}=t;return i&&(Kf(n.x,i.offset.x),Kf(n.y,i.offset.y)),n}const eue=({current:e})=>e?e.ownerDocument.defaultView:null,xKe=new WeakMap;class wKe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ki(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=l=>{this.stopAnimation(),r&&this.snapToCursor(yI(l,"page").point)},o=(l,u)=>{const{drag:d,dragPropagation:c,onDragStart:h}=this.getProps();if(d&&!c&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=fle(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Oc(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Jc.test(y)){const{projection:m}=this.visualElement;if(m&&m.layout){const p=m.layout.layoutBox[g];p&&(y=sl(p)*(parseFloat(y)/100))}}this.originPoint[g]=y}),h&&zn.update(()=>h(l,u),!1,!0);const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},a=(l,u)=>{const{dragPropagation:d,dragDirectionLock:c,onDirectionLock:h,onDrag:f}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:g}=u;if(c&&this.currentDirection===null){this.currentDirection=_Ke(g),this.currentDirection!==null&&h&&h(this.currentDirection);return}this.updateAxis("x",u.point,g),this.updateAxis("y",u.point,g),this.visualElement.render(),f&&f(l,u)},s=(l,u)=>this.stop(l,u);this.panSession=new Yle(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:s},{transformPagePoint:this.visualElement.getTransformPagePoint(),contextWindow:eue(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&zn.update(()=>o(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!GP(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=lKe(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;r&&Pb(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=uKe(i.layoutBox,r):this.constraints=!1,this.elastic=fKe(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Oc(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=hKe(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Pb(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=bKe(n,i.root,this.visualElement.getTransformPagePoint());let a=cKe(i.layout.layoutBox,o);if(r){const s=r(pKe(a));this.hasMutatedConstraints=!!s,s&&(a=Jle(s))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},u=Oc(d=>{if(!GP(d,r,this.currentDirection))return;let c=l&&l[d]||{};a&&(c={min:0,max:0});const h=i?200:1e6,f=i?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...o,...c};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(s)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(_H(t,n,0,r))}stopAnimation(){Oc(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Oc(r=>{const{drag:n}=this.getProps();if(!GP(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(r);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[r];o.set(t[r]-ei(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Pb(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Oc(a=>{const s=this.getAxisMotionValue(a);if(s){const l=s.get();i[a]=dKe({min:l,max:l},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Oc(a=>{if(!GP(a,t,null))return;const s=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];s.set(ei(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;xKe.set(this.visualElement,this);const t=this.visualElement.current,r=wh(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Pb(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const a=ph(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Oc(d=>{const c=this.getAxisMotionValue(d);c&&(this.originPoint[d]+=l[d].translate,c.set(c.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),r(),o(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=nU,dragMomentum:s=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function GP(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function _Ke(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class SKe extends nm{constructor(t){super(t),this.removeGroupControls=yi,this.removeListeners=yi,this.controls=new wKe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yi}unmount(){this.removeGroupControls(),this.removeListeners()}}const vJ=e=>(t,r)=>{e&&zn.update(()=>e(t,r))};class AKe extends nm{constructor(){super(...arguments),this.removePointerDownListener=yi}onPointerDown(t){this.session=new Yle(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eue(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:vJ(t),onStart:vJ(r),onMove:n,onEnd:(o,a)=>{delete this.session,i&&zn.update(()=>i(o,a))}}}mount(){this.removePointerDownListener=wh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function MKe(){const e=te.useContext(oH);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,i=te.useId();return te.useEffect(()=>n(i),[]),!t&&r?[!1,()=>r&&r(i)]:[!0]}const I2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yJ(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const U_={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(yr.test(e))e=parseFloat(e);else return e;const r=yJ(e,t.target.x),n=yJ(e,t.target.y);return`${r}% ${n}%`}},CKe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=Wp.parse(e);if(i.length>5)return n;const o=Wp.createTransformer(e),a=typeof i[0]!="number"?1:0,s=r.x.scale*t.x,l=r.y.scale*t.y;i[0+a]/=s,i[1+a]/=l;const u=ei(s,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),o(i)}};class TKe extends i1.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:o}=t;Lqe(EKe),o&&(r.group&&r.group.add(o),n&&n.register&&i&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),I2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,i||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||zn.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function tue(e){const[t,r]=MKe(),n=te.useContext(Jse);return i1.createElement(TKe,{...e,layoutGroup:n,switchLayoutGroup:te.useContext(Qse),isPresent:t,safeToRemove:r})}const EKe={borderRadius:{...U_,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:U_,borderTopRightRadius:U_,borderBottomLeftRadius:U_,borderBottomRightRadius:U_,boxShadow:CKe},rue=["TopLeft","TopRight","BottomLeft","BottomRight"],PKe=rue.length,bJ=e=>typeof e=="string"?parseFloat(e):e,xJ=e=>typeof e=="number"||yr.test(e);function DKe(e,t,r,n,i,o){i?(e.opacity=ei(0,r.opacity!==void 0?r.opacity:1,OKe(n)),e.opacityExit=ei(t.opacity!==void 0?t.opacity:1,0,RKe(n))):o&&(e.opacity=ei(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<PKe;a++){const s=`border${rue[a]}Radius`;let l=wJ(t,s),u=wJ(r,s);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||xJ(l)===xJ(u)?(e[s]=Math.max(ei(bJ(l),bJ(u),n),0),(Jc.test(u)||Jc.test(l))&&(e[s]+="%")):e[s]=u}(t.rotate||r.rotate)&&(e.rotate=ei(t.rotate||0,r.rotate||0,n))}function wJ(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const OKe=nue(0,.5,vH),RKe=nue(.5,.95,yi);function nue(e,t,r){return n=>n<e?0:n>t?1:r(GA(e,t,n))}function _J(e,t){e.min=t.min,e.max=t.max}function Pl(e,t){_J(e.x,t.x),_J(e.y,t.y)}function SJ(e,t,r,n,i){return e-=t,e=TO(e,1/r,n),i!==void 0&&(e=TO(e,1/i,n)),e}function IKe(e,t=0,r=1,n=.5,i,o=e,a=e){if(Jc.test(t)&&(t=parseFloat(t),t=ei(a.min,a.max,t/100)-a.min),typeof t!="number")return;let s=ei(o.min,o.max,n);e===o&&(s-=t),e.min=SJ(e.min,t,r,s,i),e.max=SJ(e.max,t,r,s,i)}function AJ(e,t,[r,n,i],o,a){IKe(e,t[r],t[n],t[i],t.scale,o,a)}const LKe=["x","scaleX","originX"],BKe=["y","scaleY","originY"];function MJ(e,t,r,n){AJ(e.x,t,LKe,r?r.x:void 0,n?n.x:void 0),AJ(e.y,t,BKe,r?r.y:void 0,n?n.y:void 0)}function CJ(e){return e.translate===0&&e.scale===1}function iue(e){return CJ(e.x)&&CJ(e.y)}function NKe(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function oue(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function TJ(e){return sl(e.x)/sl(e.y)}class kKe{constructor(){this.members=[]}add(t){SH(this.members,t),t.scheduleRender()}remove(t){if(AH(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function EJ(e,t,r){let n="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(n=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:l,rotateX:u,rotateY:d}=r;l&&(n+=`rotate(${l}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,s=e.y.scale*t.y;return(a!==1||s!==1)&&(n+=`scale(${a}, ${s})`),n||"none"}const FKe=(e,t)=>e.depth-t.depth;class zKe{constructor(){this.children=[],this.isDirty=!1}add(t){SH(this.children,t),this.isDirty=!0}remove(t){AH(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(FKe),this.isDirty=!1,this.children.forEach(t)}}function UKe(e,t){const r=performance.now(),n=({timestamp:i})=>{const o=i-r;o>=t&&(Nh(n),e(o-t))};return zn.read(n,!0),()=>Nh(n)}function VKe(e){window.MotionDebug&&window.MotionDebug.record(e)}function jKe(e){return e instanceof SVGElement&&e.tagName!=="svg"}function HKe(e,t,r){const n=Ps(e)?e:qx(e);return n.start(_H("",n,t,r)),n.animation}const PJ=["","X","Y","Z"],GKe={visibility:"hidden"},DJ=1e3;let WKe=0;const bg={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function aue({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},s=t==null?void 0:t()){this.id=WKe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,bg.totalNodes=bg.resolvedTargetDeltas=bg.recalculatedProjection=0,this.nodes.forEach(YKe),this.nodes.forEach($Ke),this.nodes.forEach(eJe),this.nodes.forEach(KKe),VKe(bg)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new zKe)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new MH),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jKe(a),this.instance=a;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(u||l)&&(this.isLayoutDirty=!0),e){let c;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,c&&c(),c=UKe(h,250),I2.hasAnimatedSinceResize&&(I2.hasAnimatedSinceResize=!1,this.nodes.forEach(RJ))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||oJe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:p}=d.getProps(),v=!this.targetLayout||!oue(this.targetLayout,g)||f,b=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(c,b);const x={...wH(y,"layout"),onPlay:m,onComplete:p};(d.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else h||RJ(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Nh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tJe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const c=this.path[d];c.shouldResetTransform=!0,c.updateScroll("snapshot"),c.options.layoutRoot&&c.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(OJ);return}this.isUpdating||this.nodes.forEach(QKe),this.isUpdating=!1,this.nodes.forEach(ZKe),this.nodes.forEach(qKe),this.nodes.forEach(XKe),this.clearAllSnapshots();const s=performance.now();wo.delta=Gp(0,1e3/60,s-wo.timestamp),wo.timestamp=s,wo.isProcessing=!0,UN.update.process(wo),UN.preRender.process(wo),UN.render.process(wo),wo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(JKe),this.sharedNodes.forEach(rJe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ki(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,s=this.projectionDelta&&!iue(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(s||yg(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),aJe(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ki();const s=a.measureViewportBox(),{scroll:l}=this.root;return l&&(Kf(s.x,l.offset.x),Kf(s.y,l.offset.y)),s}removeElementScroll(a){const s=ki();Pl(s,a);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:c}=u;if(u!==this.root&&d&&c.layoutScroll){if(d.isRoot){Pl(s,a);const{scroll:h}=this.root;h&&(Kf(s.x,-h.offset.x),Kf(s.y,-h.offset.y))}Kf(s.x,d.offset.x),Kf(s.y,d.offset.y)}}return s}applyTransform(a,s=!1){const l=ki();Pl(l,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!s&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Rb(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),yg(d.latestValues)&&Rb(l,d.latestValues)}return yg(this.latestValues)&&Rb(l,this.latestValues),l}removeTransform(a){const s=ki();Pl(s,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!yg(u.latestValues))continue;iU(u.latestValues)&&u.updateSnapshot();const d=ki(),c=u.measurePageBox();Pl(d,c),MJ(s,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return yg(this.latestValues)&&MJ(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var s;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=wo.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ki(),this.relativeTargetOrigin=ki(),zS(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ki(),this.targetWithTransforms=ki()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sKe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pl(this.target,this.layout.layoutBox),Zle(this.target,this.targetDelta)):Pl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ki(),this.relativeTargetOrigin=ki(),zS(this.relativeTargetOrigin,this.target,f.target),Pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}bg.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||iU(this.parent.latestValues)||Qle(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===wo.timestamp&&(u=!1),u)return;const{layout:d,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||c))return;Pl(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;gKe(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox);const{target:g}=s;if(!g){this.projectionTransform&&(this.projectionDelta=Ob(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ob(),this.projectionDeltaWithTransform=Ob());const y=this.projectionTransform;FS(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=EJ(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==h||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),bg.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,s=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},c=Ob();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=ki(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=f!==g,m=this.getStack(),p=!m||m.members.length<=1,v=!!(y&&!p&&this.options.crossfade===!0&&!this.path.some(iJe));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const _=x/1e3;IJ(c.x,a.x,_),IJ(c.y,a.y,_),this.setTargetDelta(c),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zS(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nJe(this.relativeTarget,this.relativeTargetOrigin,h,_),b&&NKe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ki()),Pl(b,this.relativeTarget)),y&&(this.animationValues=d,DKe(d,u,this.latestValues,_,v,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Nh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zn.update(()=>{I2.hasAnimatedSinceResize=!0,this.currentAnimation=HKe(0,DJ,{...a,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DJ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:u,latestValues:d}=a;if(!(!s||!l||!u)){if(this!==a&&this.layout&&u&&sue(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ki();const c=sl(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+c;const h=sl(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Pl(s,l),Rb(s,d),FS(this.projectionDeltaWithTransform,this.layoutCorrected,s,d)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new kKe),this.sharedNodes.get(a).add(s);const u=s.options.initialPromotionConfig;s.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(s=!0),!s)return;const u={};for(let d=0;d<PJ.length;d++){const c="rotate"+PJ[d];l[c]&&(u[c]=l[c],a.setStaticValue(c,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var s,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return GKe;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=R2(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=R2(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!yg(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const h=c.animationValues||c.latestValues;this.applyTransformsToTarget(),u.transform=EJ(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:f,y:g}=this.projectionDelta;u.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,c.animationValues?u.opacity=c===this?(l=(s=h.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in xO){if(h[y]===void 0)continue;const{correct:m,applyTo:p}=xO[y],v=u.transform==="none"?h[y]:m(h[y],c);if(p){const b=p.length;for(let x=0;x<b;x++)u[p[x]]=v}else u[y]=v}return this.options.layoutId&&(u.pointerEvents=c===this?R2(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(OJ),this.root.sharedNodes.clear()}}}function qKe(e){e.updateLayout()}function XKe(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:o}=e.options,a=r.source!==e.layout.source;o==="size"?Oc(c=>{const h=a?r.measuredBox[c]:r.layoutBox[c],f=sl(h);h.min=n[c].min,h.max=h.min+f}):sue(o,r.layoutBox,n)&&Oc(c=>{const h=a?r.measuredBox[c]:r.layoutBox[c],f=sl(n[c]);h.max=h.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[c].max=e.relativeTarget[c].min+f)});const s=Ob();FS(s,n,r.layoutBox);const l=Ob();a?FS(l,e.applyTransform(i,!0),r.measuredBox):FS(l,n,r.layoutBox);const u=!iue(s);let d=!1;if(!e.resumeFrom){const c=e.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:h,layout:f}=c;if(h&&f){const g=ki();zS(g,r.layoutBox,h.layoutBox);const y=ki();zS(y,n,f.layoutBox),oue(g,y)||(d=!0),c.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=c)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:s,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function YKe(e){bg.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function KKe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function JKe(e){e.clearSnapshot()}function OJ(e){e.clearMeasurements()}function QKe(e){e.isLayoutDirty=!1}function ZKe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function RJ(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $Ke(e){e.resolveTargetDelta()}function eJe(e){e.calcProjection()}function tJe(e){e.resetRotation()}function rJe(e){e.removeLeadSnapshot()}function IJ(e,t,r){e.translate=ei(t.translate,0,r),e.scale=ei(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function LJ(e,t,r,n){e.min=ei(t.min,r.min,n),e.max=ei(t.max,r.max,n)}function nJe(e,t,r,n){LJ(e.x,t.x,r.x,n),LJ(e.y,t.y,r.y,n)}function iJe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const oJe={duration:.45,ease:[.4,0,.1,1]},BJ=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),NJ=BJ("applewebkit/")&&!BJ("chrome/")?Math.round:yi;function kJ(e){e.min=NJ(e.min),e.max=NJ(e.max)}function aJe(e){kJ(e.x),kJ(e.y)}function sue(e,t,r){return e==="position"||e==="preserve-aspect"&&!rU(TJ(t),TJ(r),.2)}const sJe=aue({attachResizeListener:(e,t)=>ph(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),QN={current:void 0},lue=aue({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!QN.current){const e=new sJe({});e.mount(window),e.setOptions({layoutScroll:!0}),QN.current=e}return QN.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lJe={pan:{Feature:AKe},drag:{Feature:SKe,ProjectionNode:lue,MeasureLayout:tue}},uJe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cJe(e){const t=uJe.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function aU(e,t,r=1){const[n,i]=cJe(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const a=o.trim();return Gle(a)?parseFloat(a):a}else return Kz(i)?aU(i,t,r+1):i}function dJe(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(i=>{const o=i.get();if(!Kz(o))return;const a=aU(o,n);a&&i.set(a)});for(const i in t){const o=t[i];if(!Kz(o))continue;const a=aU(o,n);a&&(t[i]=a,r||(r={}),r[i]===void 0&&(r[i]=o))}return{target:t,transitionEnd:r}}const hJe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),uue=e=>hJe.has(e),fJe=e=>Object.keys(e).some(uue),FJ=e=>e===F0||e===yr,zJ=(e,t)=>parseFloat(e.split(", ")[t]),UJ=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return zJ(i[1],t);{const o=n.match(/^matrix\((.+)\)$/);return o?zJ(o[1],e):0}},pJe=new Set(["x","y","z"]),mJe=UM.filter(e=>!pJe.has(e));function gJe(e){const t=[];return mJe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Xx={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:UJ(4,13),y:UJ(5,14)};Xx.translateX=Xx.x;Xx.translateY=Xx.y;const vJe=(e,t,r)=>{const n=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:a}=o,s={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{s[u]=Xx[u](n,o)}),t.render();const l=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(s[u]),e[u]=Xx[u](l,o)}),e},yJe=(e,t,r={},n={})=>{t={...t},n={...n};const i=Object.keys(t).filter(uue);let o=[],a=!1;const s=[];if(i.forEach(l=>{const u=e.getValue(l);if(!e.hasValue(l))return;let d=r[l],c=z_(d);const h=t[l];let f;if(_O(h)){const g=h.length,y=h[0]===null?1:0;d=h[y],c=z_(d);for(let m=y;m<g&&h[m]!==null;m++)f?gH(z_(h[m])===f):f=z_(h[m])}else f=z_(h);if(c!==f)if(FJ(c)&&FJ(f)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof h=="string"?t[l]=parseFloat(h):Array.isArray(h)&&f===yr&&(t[l]=h.map(parseFloat))}else c!=null&&c.transform&&(f!=null&&f.transform)&&(d===0||h===0)?d===0?u.set(f.transform(d)):t[l]=c.transform(h):(a||(o=gJe(e),a=!0),s.push(l),n[l]=n[l]!==void 0?n[l]:t[l],u.jump(h))}),s.length){const l=s.indexOf("height")>=0?window.pageYOffset:null,u=vJe(t,e,s);return o.length&&o.forEach(([d,c])=>{e.getValue(d).set(c)}),e.render(),pI&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function bJe(e,t,r,n){return fJe(t)?yJe(e,t,r,n):{target:t,transitionEnd:n}}const xJe=(e,t,r,n)=>{const i=dJe(e,t,n);return t=i.target,n=i.transitionEnd,bJe(e,t,r,n)},sU={current:null},cue={current:!1};function wJe(){if(cue.current=!0,!!pI)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sU.current=e.matches;e.addListener(t),t()}else sU.current=!1}function _Je(e,t,r){const{willChange:n}=t;for(const i in t){const o=t[i],a=r[i];if(Ps(o))e.addValue(i,o),CO(n)&&n.add(i);else if(Ps(a))e.addValue(i,qx(o,{owner:e})),CO(n)&&n.remove(i);else if(a!==o)if(e.hasValue(i)){const s=e.getValue(i);!s.hasAnimated&&s.set(o)}else{const s=e.getStaticValue(i);e.addValue(i,qx(s!==void 0?s:o,{owner:e}))}}for(const i in r)t[i]===void 0&&e.removeValue(i);return t}const VJ=new WeakMap,due=Object.keys(HA),SJe=due.length,jJ=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],AJe=lH.length;class MJe{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>zn.render(this.render,!1,!0);const{latestValues:s,renderState:l}=o;this.latestValues=s,this.baseTarget={...s},this.initialValues=r.initial?{...s}:{},this.renderState=l,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=gI(r),this.isVariantNode=Kse(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const c in d){const h=d[c];s[c]!==void 0&&Ps(h)&&(h.set(s[c],!1),CO(u)&&u.add(c))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,VJ.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),cue.current||wJe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sU.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){VJ.delete(this.current),this.projection&&this.projection.unmount(),Nh(this.notifyUpdate),Nh(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=k0.has(t),i=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&zn.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,i,o){let a,s;for(let l=0;l<SJe;l++){const u=due[l],{isEnabled:d,Feature:c,ProjectionNode:h,MeasureLayout:f}=HA[u];h&&(a=h),d(r)&&(!this.features[u]&&c&&(this.features[u]=new c(this)),f&&(s=f))}if(!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:d,dragConstraints:c,layoutScroll:h,layoutRoot:f}=r;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||c&&Pb(c),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:h,layoutRoot:f})}return s}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ki()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<jJ.length;n++){const i=jJ[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=_Je(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<AJe;n++){const i=lH[n],o=this.props[i];(jA(o)||o===!1)&&(r[i]=o)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=qx(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(r=mH(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Ps(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new MH),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class hue extends MJe{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:i},o){let a=jYe(n,t||{},this);if(i&&(r&&(r=i(r)),n&&(n=i(n)),a&&(a=i(a))),o){UYe(this,n,a);const s=xJe(this,n,a,r);r=s.transitionEnd,n=s.target}return{transition:t,transitionEnd:r,...n}}}function CJe(e){return window.getComputedStyle(e)}class TJe extends hue{readValueFromInstance(t,r){if(k0.has(r)){const n=xH(r);return n&&n.default||0}else{const n=CJe(t),i=(ele(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return $le(t,r)}build(t,r,n,i){cH(t,r,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,r){return pH(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ps(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,i){ale(t,r,n,i)}}class EJe extends hue{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(k0.has(r)){const n=xH(r);return n&&n.default||0}return r=sle.has(r)?r:aH(r),t.getAttribute(r)}measureInstanceViewportBox(){return ki()}scrapeMotionValuesFromProps(t,r){return ule(t,r)}build(t,r,n,i){hH(t,r,n,this.isSVGTag,i.transformTemplate)}renderInstance(t,r,n,i){lle(t,r,n,i)}mount(t){this.isSVGTag=fH(t.tagName),super.mount(t)}}const PJe=(e,t)=>uH(e)?new EJe(t,{enableHardwareAcceleration:!1}):new TJe(t,{enableHardwareAcceleration:!0}),DJe={layout:{ProjectionNode:lue,MeasureLayout:tue}},OJe={...nKe,...AXe,...lJe,...DJe},sd=Rqe((e,t)=>dXe(e,t,OJe,PJe)),nl={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},RJe=()=>Qe.jsxs("section",{className:"relative w-full h-[100vh] mx-auto",children:[Qe.jsxs("div",{className:`absolute inset-0 top-[120px]  max-w-7xl mx-auto ${nl.paddingX} flex flex-row items-start gap-5`,children:[Qe.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[Qe.jsx("div",{className:"w-5 h-5 rounded-full bg-[#915EFF]"}),Qe.jsx("div",{className:"w-1 sm:h-80 h-40 violet-gradient"})]}),Qe.jsxs("div",{children:[Qe.jsx("div",{className:"flex items-center",children:Qe.jsxs("h1",{className:`${nl.heroHeadText} text-white`,children:["Hi, I'm",Qe.jsx("span",{className:"text-[#915eff]",children:" Yaopu"})]})}),Qe.jsxs("p",{className:`${nl.heroSubText} mt-2 text-white-100`,children:["I develope React & Flutter frontend",Qe.jsx("br",{}),"Python & Spring Boot backend",Qe.jsx("br",{}),"Welcome to my space",Qe.jsx("br",{}),Qe.jsx("br",{className:"sm:block hidden"}),Qe.jsx("span",{className:"sm:inline hidden",children:"Hover on"}),Qe.jsx("span",{className:"text-[#915eff] sm:inline hidden",children:" Sphere "}),Qe.jsx("span",{className:"sm:inline hidden",children:"to begin "})]})]})]}),Qe.jsx("div",{className:"absolute top-60 xs:top-50 sm:top-50 w-full h-[80vh] sm:h-[100vh] xs:h-[50vh]",children:Qe.jsx("a",{href:"#about",children:Qe.jsx(wqe,{})})})]}),IJe="/assets/WA-lJhPWSYm.png",LJe="/assets/backend-IU17xwLW.png",BJe="/assets/creator-d3V1jrfE.png",NJe="/assets/mobile-zsmMcWH-.png",kJe="/assets/web-NPJKP6jW.png",FJe="/assets/github-VH8e7qgP.png",zJe="data:image/svg+xml,%3csvg%20width='20'%20height='12'%20viewBox='0%200%2020%2012'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%202L19%202C19.2652%202%2019.5196%201.89464%2019.7071%201.70711C19.8946%201.51957%2020%201.26522%2020%201C20%200.734784%2019.8946%200.480429%2019.7071%200.292892C19.5196%200.105356%2019.2652%200%2019%200L9%200C8.73478%200%208.48043%200.105356%208.29289%200.292892C8.10536%200.480429%208%200.734784%208%201C8%201.26522%208.10536%201.51957%208.29289%201.70711C8.48043%201.89464%208.73478%202%209%202ZM19%2010L1%2010C0.734784%2010%200.480429%2010.1054%200.292892%2010.2929C0.105356%2010.4804%200%2010.7348%200%2011C0%2011.2652%200.105356%2011.5196%200.292892%2011.7071C0.480429%2011.8946%200.734784%2012%201%2012L19%2012C19.2652%2012%2019.5196%2011.8946%2019.7071%2011.7071C19.8946%2011.5196%2020%2011.2652%2020%2011C20%2010.7348%2019.8946%2010.4804%2019.7071%2010.2929C19.5196%2010.1054%2019.2652%2010%2019%2010V10ZM1%207L19%207C19.2652%207%2019.5196%206.89464%2019.7071%206.70711C19.8946%206.51957%2020%206.26522%2020%206C20%205.73478%2019.8946%205.48043%2019.7071%205.29289C19.5196%205.10536%2019.2652%205%2019%205L1%205C0.734784%205%200.480429%205.10536%200.292892%205.29289C0.105356%205.48043%200%205.73478%200%206C0%206.26522%200.105356%206.51957%200.292892%206.70711C0.480429%206.89464%200.734784%207%201%207Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",UJe="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.4099%209L16.7099%202.71C16.8982%202.5217%2017.004%202.2663%2017.004%202C17.004%201.7337%2016.8982%201.47831%2016.7099%201.29C16.5216%201.1017%2016.2662%200.995911%2015.9999%200.995911C15.7336%200.995911%2015.4782%201.1017%2015.2899%201.29L8.99994%207.59L2.70994%201.29C2.52164%201.1017%202.26624%200.995911%201.99994%200.995911C1.73364%200.995911%201.47824%201.1017%201.28994%201.29C1.10164%201.47831%200.995847%201.7337%200.995847%202C0.995847%202.2663%201.10164%202.5217%201.28994%202.71L7.58994%209L1.28994%2015.29C1.19621%2015.383%201.12182%2015.4936%201.07105%2015.6154C1.02028%2015.7373%200.994141%2015.868%200.994141%2016C0.994141%2016.132%201.02028%2016.2627%201.07105%2016.3846C1.12182%2016.5064%201.19621%2016.617%201.28994%2016.71C1.3829%2016.8037%201.4935%2016.8781%201.61536%2016.9289C1.73722%2016.9797%201.86793%2017.0058%201.99994%2017.0058C2.13195%2017.0058%202.26266%2016.9797%202.38452%2016.9289C2.50638%2016.8781%202.61698%2016.8037%202.70994%2016.71L8.99994%2010.41L15.2899%2016.71C15.3829%2016.8037%2015.4935%2016.8781%2015.6154%2016.9289C15.7372%2016.9797%2015.8679%2017.0058%2015.9999%2017.0058C16.132%2017.0058%2016.2627%2016.9797%2016.3845%2016.9289C16.5064%2016.8781%2016.617%2016.8037%2016.7099%2016.71C16.8037%2016.617%2016.8781%2016.5064%2016.9288%2016.3846C16.9796%2016.2627%2017.0057%2016.132%2017.0057%2016C17.0057%2015.868%2016.9796%2015.7373%2016.9288%2015.6154C16.8781%2015.4936%2016.8037%2015.383%2016.7099%2015.29L10.4099%209Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",VJe="/assets/ant-R9633NUQ.png",jJe="/assets/homer3-rRMtAjca.png",HJe="/assets/meechu-dDRLOYSC.png",GJe="/assets/tal-GaGYT_M6.png",WJe="/assets/roundblock-d9Ab7LNQ.png",qJe="/assets/blogProject-sdb4ZDb9.png",XJe="/assets/meechuProject-5KVjqgCt.png",YJe="/assets/cicdProject-aUCh3do_.png",KJe="/assets/zillowProject-C-xJqtQd.jpg",JJe="/assets/covidProject-8ZUmsr-B.png",QJe="/assets/ticketProject-HSdCYlee.png",ZJe="/assets/pencraftProject-RSD39rH2.png",HJ=[{id:"about",title:"About"},{id:"work",title:"Work"},{id:"contact",title:"Contact"}],$Je=[{title:`Data 
 Scientist`,icon:BJe},{title:"Web Developer",icon:kJe},{title:"Moblie Developer",icon:NJe},{title:"Backend Developer",icon:LJe}],eQe=[{title:"Data Science - Intern",company_name:"Tianhong Asset Management (Ant Group)",icon:VJe,iconBg:"#383E56",date:"July 2023 - Sept 2023",link:"https://www.linkedin.com/company/tianhong-asset-management/",points:["Contribute to the training and development of a customer service chatbot with NLP.","Improve customer experience by answering investing questions using LLM from the company knowledge base.","Pre-processing finance training data using Spark and Pandas in Python.","Integrate NL2SQL with Langchain GPT, and test on WikiSQL datasets, generate over 15k rows of SQL queries for training.","Perform comparative analysis on various models. Identify 50% improvements in fine-tuned models."]},{title:"Backend R&D - Intern",company_name:"Tal Education Group",icon:GJe,iconBg:"#c7e7ed",date:"May 2023 - July 2023",link:"https://www.linkedin.com/company/taleducationgroup/",points:["Develop an AI Virtual Teacher using Python, and achieve over 10,000 daily active users on the MVP launch.","Implement an automated training flow for AI modules. Engineered server logging and failure alert.","Implement multiprocessing technique to Improve video merging speed by approximately 30%.","Implement Kafka Apache for video queue and transfer. Use local cache to prevent message loss and duplication.","Utilize Tencent Cloud Object Storage (COS) to achieve video storage.","Manage two Ubuntu GPU servers for training and utilize Docker for containerized deployment."]},{title:"Web Developer - Intern",company_name:"RoundBlock",icon:WJe,iconBg:"#c7cded",date:"Jan 2023 - May 2023",link:"https://www.linkedin.com/company/roundblock-technology/",points:["Developing and maintaining web applications using React.js and other related technologies.","Collaborating with cross-functional teams including designers, product managers, and other developers to create high-quality products.","Implementing responsive design and ensuring cross-browser compatibility.","Participating in code reviews and providing constructive feedback to other developers."]},{title:"IOS & Android - Founder",company_name:"Meechu",icon:HJe,iconBg:"#ebc39d",date:"Sept 2020 - Dec 2021",link:"https://www.bu.edu/articles/2021/students-new-app-meechu-connects-classmates-notifies-about-open-seats/",points:["Lead the Meechu team to win 3rd place in the 2021 New Venture Competition. ","Develop an auto-track system for over 5,000 Boston University courses using Selenium and deploy on AWS. ","Develop the IOS and Android mobile app with Flutter. Deliver 5 front-end functions with over 20 pages.","Build the backend using Flask, MongoDB, and AWS. Use Firebase as a database and web hosting solution.","Contribute to 80% of code and commits on GitHub. Send out 20,000 monthly emails and receive over 3000 users."]},{title:"Software Research",company_name:"Homer3",icon:jJe,iconBg:"#abcfb6",date:"Sept 2020 - Dec 2021",link:"https://openfnirs.org/software/homer/homer3/",points:["Achieve accuracy improvement from 60% to near 100% using 20+ open-source brain activity signals.","Reconstruct brain signal data structure and create visualization GUI using Matlab."]}],tQe=[{name:"Ticket Booking",description:"Spring Boot application that enables user to book, search and cancel tickets. It also allows admin to add, update and delete movies and theaters.",tags:[{name:"spring boot",color:"blue-text-gradient"},{name:"mysql",color:"green-text-gradient"},{name:"redis",color:"pink-text-gradient"},{name:"react",color:"green-text-gradient"}],image:QJe,source_code_link:"https://github.com/SweetSourPeter/onlineFilm-java-web-v2"},{name:"US housing price Prediction",description:"Based on 7.5 million Real Estate data, this project aims to improve the accuracy of Zestimates by traning different LM models to predict and evaluate Zillows Zestimate.",tags:[{name:"data-cleaning",color:"blue-text-gradient"},{name:"modeling",color:"green-text-gradient"},{name:"param tuning",color:"pink-text-gradient"}],image:KJe,source_code_link:""},{name:"AI Blog Writer",description:"A completly automated blog writer using GPT-3.5. It can not only generate blogs based on youtube videos, but also calculate key frames based on subtitles to extract images.",tags:[{name:"gpt-3.5 restapi",color:"blue-text-gradient"},{name:"langchain",color:"green-text-gradient"},{name:"Whisper",color:"pink-text-gradient"}],image:qJe,source_code_link:""},{name:"Shopify Web App",description:"A shopify web app that allows merchants to generate store related SEO contents and blogs. It intergrates with Google trending keywords to optimize SEO.",tags:[{name:"React",color:"blue-text-gradient"},{name:"shopify",color:"green-text-gradient"},{name:"SEO",color:"pink-text-gradient"}],image:ZJe,source_code_link:"https://pencraft.earlybird.rocks/"},{name:"Real-time Chat & Scrap ",description:"An app that matches college students with their classmates. It also notifies users when there are open seats in their favorite classes by scrapping school website.",tags:[{name:"flutter",color:"blue-text-gradient"},{name:"selenium",color:"green-text-gradient"},{name:"nosql",color:"pink-text-gradient"},{name:"AWS",color:"blue-text-gradient"},{name:"flask",color:"pink-text-gradient"}],image:XJe,source_code_link:"https://github.com/SweetSourPeter/MINISeniorDesign-CovidAPP"},{name:"CI/CD Pipeline",description:"CI/CD pipeline for any scale of Flask applications. It implements unit testing, and deployment automation.",tags:[{name:"github actions",color:"blue-text-gradient"},{name:"docker",color:"green-text-gradient"},{name:"openshift",color:"pink-text-gradient"},{name:"flask",color:"blue-text-gradient"},{name:"pytest",color:"green-text-gradient"}],image:YJe,source_code_link:"https://github.com/SweetSourPeter/Building_CI_CD_for_API"},{name:"Covid App",description:"Moblie application that tracks the spread of COVID-19 in real time. It also allows users log symptoms and get notify admin if they are tested positive.",tags:[{name:"flutter",color:"blue-text-gradient"},{name:"restapi",color:"green-text-gradient"},{name:"nosql",color:"pink-text-gradient"}],image:JJe,source_code_link:"https://github.com/SweetSourPeter/MINISeniorDesign-CovidAPP"}],rQe=()=>{const[e,t]=te.useState(""),[r,n]=te.useState(!1);return Qe.jsx("nav",{className:`${nl.paddingX} w-full flex items-center py-5 fixed top-0 z-20 bg-primary`,children:Qe.jsxs("div",{className:"w-full flex justify-between item-center max-w-7xl mx-auto",children:[Qe.jsxs(K0e,{to:"./",className:"flex items-center gap-2",onClick:()=>{t(""),window.scrollTo(0,0)},children:[Qe.jsx("img",{src:IJe,alt:"logo",className:"w-9 h-9 object-contain"}),Qe.jsxs("p",{className:"text-white text-[18px] font-bold cursor-pointer flex",children:["Yaopu ",Qe.jsx("span",{className:"sm:block hidden",children:"| Full-Stack"})]})]}),Qe.jsx("ul",{className:"list-non hidden sm:flex flex-row gap-10",children:HJ.map(i=>Qe.jsx("li",{className:`${e===i.title?"text-white":"text-secondary"} hover:text-white text-[18px] font-medium cursor-pointer`,onClick:()=>{t(i.title)},children:Qe.jsx("a",{href:`#${i.id}`,children:i.title})},i.id))}),Qe.jsxs("div",{className:"sm:hidden flex flex-1 justify-end items-center",children:[Qe.jsx("img",{src:r?UJe:zJe,alt:"menu",className:"w-[28px] h-[28px] object-contain cursor-pointer",onClick:()=>{n(!r)}}),Qe.jsx("div",{className:`${r?"flex":"hidden"} p-6 black-gradient absolute top-20 right-0 mx-4 my-2 min-w-[140px] z-10 rounded-xl`,children:Qe.jsx("ul",{className:"list-none flex justify-end items-start flex-1 flex-col gap-4",children:HJ.map(i=>Qe.jsx("li",{className:`font-poppins font-medium cursor-pointer text-[16px] ${e===i.title?"text-white":"text-secondary"}`,onClick:()=>{n(!r),t(i.title)},children:Qe.jsx("a",{href:`#${i.id}`,children:i.title})},i.id))})})]})]})})};var nQe=Object.defineProperty,iQe=Object.defineProperties,oQe=Object.getOwnPropertyDescriptors,GJ=Object.getOwnPropertySymbols,aQe=Object.prototype.hasOwnProperty,sQe=Object.prototype.propertyIsEnumerable,WJ=(e,t,r)=>t in e?nQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V_=(e,t)=>{for(var r in t||(t={}))aQe.call(t,r)&&WJ(e,r,t[r]);if(GJ)for(var r of GJ(t))sQe.call(t,r)&&WJ(e,r,t[r]);return e},j_=(e,t)=>iQe(e,oQe(t)),fue=class extends te.Component{constructor(e){super(e),this.ref=i1.createRef(),this.state={style:{}};const t={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},t,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(e=()=>{},t){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:j_(V_({},this.state.style),{willChange:"transform"})})),this.setTransition(),e(t)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:j_(V_({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(e=()=>{},t){return t.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=t,this.updateCall=requestAnimationFrame(this.update.bind(this,t)),e(t)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:j_(V_({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:j_(V_({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(e=()=>{},t){return this.setTransition(),this.settings.reset&&this.reset(),e(t)}getValues(e){const t=(e.nativeEvent.clientX-this.left)/this.width,r=(e.nativeEvent.clientY-this.top)/this.height,n=Math.min(Math.max(t,0),1),i=Math.min(Math.max(r,0),1),o=(this.reverse*(this.settings.max/2-n*this.settings.max)).toFixed(2),a=(this.reverse*(i*this.settings.max-this.settings.max/2)).toFixed(2),s=n*100,l=i*100;return{tiltX:o,tiltY:a,percentageX:s,percentageY:l}}updateElementPosition(){const e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}update(e){const t=this.getValues(e);this.setState(Object.assign({},this.state,{style:j_(V_({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:t.tiltY}deg) rotateY(${this.settings.axis==="y"?0:t.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const e=Object.assign({},this.props.style,this.state.style);return Qe.jsx("div",{style:e,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const CH=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),xI=(e,t,r,n)=>({hidden:{x:e==="left"?100:e==="right"?-100:0,y:e==="up"?100:e==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:t,delay:r,duration:n,ease:"easeOut"}}}),qJ=(e,t,r,n)=>({hidden:{x:e==="left"?"-100%":e==="right"?"100%":0,y:e==="up"||e==="down"?"100%":0},show:{x:0,y:0,transition:{type:t,delay:r,duration:n,ease:"easeOut"}}}),lQe=(e,t)=>({hidden:{},show:{transition:{staggerChildren:e,delayChildren:t||0}}}),wI=(e,t)=>function(){return Qe.jsxs(sd.section,{variants:lQe(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${nl.padding} max-w-7xl mx-auto relative z-0`,children:[Qe.jsx("span",{className:"hash-span",id:t,children:""}),Qe.jsx(e,{})]})},uQe=({index:e,title:t,icon:r})=>Qe.jsx(fue,{className:"xs:w-[250px] w-full",children:Qe.jsx(sd.div,{variants:xI("right","spring",e*.5,.75),className:"w-full green-pink-gradient p-[1px] rounded-[20px] shadow-card",children:Qe.jsx("a",{href:"#work",children:Qe.jsxs("div",{options:{max:45,scale:1,speed:450},className:"bg-tertiary rounded-[20px] py-5 px-12 min-h-[280px] flex justify-evenly items-center flex-col",children:[Qe.jsx("img",{src:r,alt:"web-development",className:"w-16 h-16 object-contain"}),Qe.jsx("h3",{className:"text-white text-[20px] font-bold text-center",children:t})]})})})}),cQe=()=>Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs(sd.div,{variants:CH(),children:[Qe.jsx("p",{className:nl.sectionSubText,children:"Introduction"}),Qe.jsx("h2",{className:nl.sectionHeadText,children:"Overview."})]}),Qe.jsxs(sd.p,{variants:xI("","",.1,1),className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:["I am a skilled software developer with expertise in Java, Python, and JavaScript, along with proficiency in frameworks such as React, Spring Boot, and Docker. I hold a Bachelor's degree in Computer Engineering from"," ",Qe.jsx("a",{className:"underline text-[#915eff]",href:"https://www.bu.edu/",target:"_blank",rel:"noopener noreferrer",children:"Boston University"})," ","and a Master's degree in Electrical Engineering from"," ",Qe.jsx("a",{href:"https://www.upenn.edu/",target:"_blank",rel:"noopener noreferrer",className:"underline text-[#915eff]",children:"University of Pennsylvania"}),". Known for my quick learning ability, I collaborate closely with colleagues to create efficient, scalable, and user-friendly solutions that address real-world problems. "," ",Qe.jsx("a",{href:"https://www.linkedin.com/in/yaopu-wang-seeking-ng-sde-43824b249/",target:"_blank",rel:"noopener noreferrer",className:"underline text-[#915eff]",children:"Let's connect!"})]}),Qe.jsx("div",{className:"mt-20 flex flex-wrap gap-10",children:$Je.map((e,t)=>Qe.jsx(uQe,{index:t,...e},e.title))})]}),dQe=wI(cQe,"about");var _I={},pue={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var n=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var a=typeof o;if(a==="string"||a==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var s=r.apply(null,o);s&&n.push(s)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var l in o)t.call(o,l)&&o[l]&&n.push(l)}}}return n.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(pue);var gr=pue.exports;_I.__esModule=!0;_I.default=void 0;var hQe=TH(te),Uf=TH(Kt),fQe=TH(gr);function TH(e){return e&&e.__esModule?e:{default:e}}const mue=({animate:e=!0,className:t="",layout:r="2-columns",lineColor:n="#FFF",children:i})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",n),hQe.default.createElement("div",{className:(0,fQe.default)(t,"vertical-timeline",{"vertical-timeline--animate":e,"vertical-timeline--two-columns":r==="2-columns","vertical-timeline--one-column-left":r==="1-column"||r==="1-column-left","vertical-timeline--one-column-right":r==="1-column-right"})},i));mue.propTypes={children:Uf.default.oneOfType([Uf.default.arrayOf(Uf.default.node),Uf.default.node]).isRequired,className:Uf.default.string,animate:Uf.default.bool,layout:Uf.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:Uf.default.string};var pQe=mue;_I.default=pQe;var SI={};function lU(){return lU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lU.apply(this,arguments)}function mQe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,uU(e,t)}function uU(e,t){return uU=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},uU(e,t)}function gQe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var cU=new Map,WP=new WeakMap,XJ=0,gue=void 0;function vQe(e){gue=e}function yQe(e){return e?(WP.has(e)||(XJ+=1,WP.set(e,XJ.toString())),WP.get(e)):"0"}function bQe(e){return Object.keys(e).sort().filter(function(t){return e[t]!==void 0}).map(function(t){return t+"_"+(t==="root"?yQe(e.root):e[t])}).toString()}function xQe(e){var t=bQe(e),r=cU.get(t);if(!r){var n=new Map,i,o=new IntersectionObserver(function(a){a.forEach(function(s){var l,u=s.isIntersecting&&i.some(function(d){return s.intersectionRatio>=d});e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=u),(l=n.get(s.target))==null||l.forEach(function(d){d(u,s)})})},e);i=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:n},cU.set(t,r)}return r}function EH(e,t,r,n){if(r===void 0&&(r={}),n===void 0&&(n=gue),typeof window.IntersectionObserver>"u"&&n!==void 0){var i=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var o=xQe(r),a=o.id,s=o.observer,l=o.elements,u=l.get(e)||[];return l.has(e)||l.set(e,u),u.push(t),s.observe(e),function(){u.splice(u.indexOf(t),1),u.length===0&&(l.delete(e),s.unobserve(e)),l.size===0&&(s.disconnect(),cU.delete(a))}}var wQe=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function YJ(e){return typeof e.children!="function"}var EO=function(e){mQe(t,e);function t(n){var i;return i=e.call(this,n)||this,i.node=null,i._unobserveCb=null,i.handleNode=function(o){i.node&&(i.unobserve(),!o&&!i.props.triggerOnce&&!i.props.skip&&i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=o||null,i.observeNode()},i.handleChange=function(o,a){o&&i.props.triggerOnce&&i.unobserve(),YJ(i.props)||i.setState({inView:o,entry:a}),i.props.onChange&&i.props.onChange(o,a)},i.state={inView:!!n.initialInView,entry:void 0},i}var r=t.prototype;return r.componentDidUpdate=function(i){(i.rootMargin!==this.props.rootMargin||i.root!==this.props.root||i.threshold!==this.props.threshold||i.skip!==this.props.skip||i.trackVisibility!==this.props.trackVisibility||i.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},r.componentWillUnmount=function(){this.unobserve(),this.node=null},r.observeNode=function(){if(!(!this.node||this.props.skip)){var i=this.props,o=i.threshold,a=i.root,s=i.rootMargin,l=i.trackVisibility,u=i.delay,d=i.fallbackInView;this._unobserveCb=EH(this.node,this.handleChange,{threshold:o,root:a,rootMargin:s,trackVisibility:l,delay:u},d)}},r.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},r.render=function(){if(!YJ(this.props)){var i=this.state,o=i.inView,a=i.entry;return this.props.children({inView:o,entry:a,ref:this.handleNode})}var s=this.props,l=s.children,u=s.as,d=gQe(s,wQe);return te.createElement(u||"div",lU({ref:this.handleNode},d),l)},t}(te.Component);EO.displayName="InView";EO.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function _Qe(e){var t=e===void 0?{}:e,r=t.threshold,n=t.delay,i=t.trackVisibility,o=t.rootMargin,a=t.root,s=t.triggerOnce,l=t.skip,u=t.initialInView,d=t.fallbackInView,c=te.useRef(),h=te.useState({inView:!!u}),f=h[0],g=h[1],y=te.useCallback(function(p){c.current!==void 0&&(c.current(),c.current=void 0),!l&&p&&(c.current=EH(p,function(v,b){g({inView:v,entry:b}),b.isIntersecting&&s&&c.current&&(c.current(),c.current=void 0)},{root:a,rootMargin:o,threshold:r,trackVisibility:i,delay:n},d))},[Array.isArray(r)?r.toString():r,a,o,s,l,i,d,n]);te.useEffect(function(){!c.current&&f.entry&&!s&&!l&&g({inView:!!u})});var m=[y,f.inView,f.entry];return m.ref=m[0],m.inView=m[1],m.entry=m[2],m}const SQe=Object.freeze(Object.defineProperty({__proto__:null,InView:EO,default:EO,defaultFallbackInView:vQe,observe:EH,useInView:_Qe},Symbol.toStringTag,{value:"Module"})),AQe=r1(SQe);SI.__esModule=!0;SI.default=void 0;var Vf=PH(te),Hn=PH(Kt),qP=PH(gr),MQe=AQe;function PH(e){return e&&e.__esModule?e:{default:e}}const vue=({children:e="",className:t="",contentArrowStyle:r=null,contentStyle:n=null,date:i="",dateClassName:o="",icon:a=null,iconClassName:s="",iconOnClick:l=null,onTimelineElementClick:u=null,iconStyle:d=null,id:c="",position:h="",style:f=null,textClassName:g="",intersectionObserverProps:y={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:m=!1})=>Vf.default.createElement(MQe.InView,y,({inView:p,ref:v})=>Vf.default.createElement("div",{ref:v,id:c,className:(0,qP.default)(t,"vertical-timeline-element",{"vertical-timeline-element--left":h==="left","vertical-timeline-element--right":h==="right","vertical-timeline-element--no-children":e===""}),style:f},Vf.default.createElement(Vf.default.Fragment,null,Vf.default.createElement("span",{style:d,onClick:l,className:(0,qP.default)(s,"vertical-timeline-element-icon",{"bounce-in":p||m,"is-hidden":!(p||m)})},a),Vf.default.createElement("div",{style:n,onClick:u,className:(0,qP.default)(g,"vertical-timeline-element-content",{"bounce-in":p||m,"is-hidden":!(p||m)})},Vf.default.createElement("div",{style:r,className:"vertical-timeline-element-content-arrow"}),e,Vf.default.createElement("span",{className:(0,qP.default)(o,"vertical-timeline-element-date")},i)))));vue.propTypes={children:Hn.default.oneOfType([Hn.default.arrayOf(Hn.default.node),Hn.default.node]),className:Hn.default.string,contentArrowStyle:Hn.default.shape({}),contentStyle:Hn.default.shape({}),date:Hn.default.node,dateClassName:Hn.default.string,icon:Hn.default.element,iconClassName:Hn.default.string,iconStyle:Hn.default.shape({}),iconOnClick:Hn.default.func,onTimelineElementClick:Hn.default.func,id:Hn.default.string,position:Hn.default.string,style:Hn.default.shape({}),textClassName:Hn.default.string,visible:Hn.default.bool,intersectionObserverProps:Hn.default.shape({root:Hn.default.object,rootMargin:Hn.default.string,threshold:Hn.default.number,triggerOnce:Hn.default.bool})};var CQe=vue;SI.default=CQe;var yue={VerticalTimeline:_I.default,VerticalTimelineElement:SI.default};const TQe=({experience:e})=>Qe.jsxs(yue.VerticalTimelineElement,{contentStyle:{background:"#1d1836",color:"#fff"},contentArrowStyle:{borderRight:"7px solid  #232631"},date:e.date,iconStyle:{background:e.iconBg},iconOnClick:()=>window.open(e.link,"_blank"),icon:Qe.jsx("div",{className:"flex justify-center items-center w-full h-full",children:Qe.jsx("img",{src:e.icon,alt:e.company_name,className:"w-[60%] h-[60%] object-contain"})}),children:[Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-white text-[24px] font-bold",children:e.title}),Qe.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:e.link?Qe.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:e.company_name}):e.company_name})]}),Qe.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:e.points.map((t,r)=>Qe.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:t},`experience-point-${r}`))})]}),EQe=()=>Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs(sd.div,{variants:CH(),children:[Qe.jsx("p",{className:`${nl.sectionSubText} text-center`,children:"What I have done so far"}),Qe.jsx("h2",{className:`${nl.sectionHeadText} text-center`,children:"Work Experience."})]}),Qe.jsx("div",{className:"mt-20 flex flex-col",children:Qe.jsx(yue.VerticalTimeline,{children:eQe.map((e,t)=>Qe.jsx(TQe,{experience:e},`experience-${t}`))})})]}),PQe=wI(EQe,"work"),DQe=({index:e,name:t,description:r,tags:n,image:i,source_code_link:o})=>Qe.jsx(sd.div,{variants:xI("up","spring",e*.5,.75),children:Qe.jsxs(fue,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full",children:[Qe.jsxs("div",{className:"relative w-full h-[230px]",onClick:()=>{o!==""?window.open(o,"_blank"):alert("This is a private project.")},children:[Qe.jsx("img",{src:i,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"}),o===""?Qe.jsx(Qe.Fragment,{}):Qe.jsx("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:Qe.jsx("div",{className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer",children:Qe.jsx("img",{src:FJe,alt:"source code",className:"w-1/2 h-1/2 object-contain"})})})]}),Qe.jsxs("div",{className:"mt-5",children:[Qe.jsx("h3",{className:"text-white font-bold text-[24px]",children:t}),Qe.jsx("p",{className:"mt-2 text-secondary text-[14px]",children:r})]}),Qe.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:n.map(a=>Qe.jsxs("p",{className:`text-[14px] ${a.color}`,children:["#",a.name]},`${t}-${a.name}`))})]})}),OQe=()=>Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs(sd.div,{variants:CH(),children:[Qe.jsx("p",{className:`${nl.sectionSubText} `,children:"My work"}),Qe.jsx("h2",{className:`${nl.sectionHeadText}`,children:"Projects."})]}),Qe.jsx("div",{className:"w-full flex",children:Qe.jsx(sd.p,{variants:xI("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Following projects showcases my skills and experience through real-world examples of my work. Each project is briefly described with links to code repositories(some are private). It reflects my ability to solve complex problems, work with different technologies, and manage projects effectively."})}),Qe.jsx("div",{className:"mt-20 flex flex-wrap gap-7",children:tQe.map((e,t)=>Qe.jsx(DQe,{index:t,...e},`project-${t}`))})]}),RQe=wI(OQe,""),WA={_origin:"https://api.emailjs.com"},IQe=(e,t="https://api.emailjs.com")=>{WA._userID=e,WA._origin=t},bue=(e,t,r)=>{if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class KJ{constructor(t){this.status=t?t.status:0,this.text=t?t.responseText:"Network Error"}}const xue=(e,t,r={})=>new Promise((n,i)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:a})=>{const s=new KJ(a);s.status===200||s.text==="OK"?n(s):i(s)}),o.addEventListener("error",({target:a})=>{i(new KJ(a))}),o.open("POST",WA._origin+e,!0),Object.keys(r).forEach(a=>{o.setRequestHeader(a,r[a])}),o.send(t)}),LQe=(e,t,r,n)=>{const i=n||WA._userID;return bue(i,e,t),xue("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:i,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})},BQe=e=>{let t;if(typeof e=="string"?t=document.querySelector(e):t=e,!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},NQe=(e,t,r,n)=>{const i=n||WA._userID,o=BQe(r);bue(i,e,t);const a=new FormData(o);return a.append("lib_version","3.11.0"),a.append("service_id",e),a.append("template_id",t),a.append("user_id",i),xue("/api/v1.0/email/send-form",a)},kQe={init:IQe,send:LQe,sendForm:NQe},FQe=()=>{const e=te.useRef(),[t,r]=te.useState({name:"",email:"",message:""}),[n,i]=te.useState(!1),o=s=>{const{target:l}=s,{name:u,value:d}=l;r({...t,[u]:d})},a=s=>{s.preventDefault(),i(!0),kQe.send("service_cuvjeak","template_52fhvrb",{from_name:t.name,to_name:"Yaopu Wang",from_email:t.email,to_email:"yaopuw.careers@gmail.com",message:t.message},"t86UPyjEO_1LP9Tx6").then(()=>{i(!1),alert("Thank you. I will get back to you as soon as possible."),r({name:"",email:"",message:""})},l=>{i(!1),console.error(l),alert("Ahh, something went wrong. Please try again.")})};return Qe.jsxs("div",{className:"xl:mt-12 flex xl:flex-row flex-col-reverse gap-10 overflow-hidden",children:[Qe.jsxs(sd.div,{variants:qJ("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[Qe.jsx("p",{className:nl.sectionSubText,children:"Get in touch"}),Qe.jsx("h3",{className:nl.sectionHeadText,children:"Contact."}),Qe.jsxs("form",{ref:e,onSubmit:a,className:"mt-12 flex flex-col gap-8",children:[Qe.jsxs("label",{className:"flex flex-col",children:[Qe.jsx("span",{className:"text-white font-medium mb-4",children:"Your Name"}),Qe.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,placeholder:"What's your good name?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),Qe.jsxs("label",{className:"flex flex-col",children:[Qe.jsx("span",{className:"text-white font-medium mb-4",children:"Your email"}),Qe.jsx("input",{type:"email",name:"email",value:t.email,onChange:o,placeholder:"What's your web address?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),Qe.jsxs("label",{className:"flex flex-col",children:[Qe.jsx("span",{className:"text-white font-medium mb-4",children:"Your Message"}),Qe.jsx("textarea",{rows:7,name:"message",value:t.message,onChange:o,placeholder:"What you want to say?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),Qe.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 rounded-xl outline-none w-fit text-white font-bold shadow-md shadow-primary",children:n?"Sending...":"Send"})]})]}),Qe.jsx(sd.div,{variants:qJ("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:Qe.jsx(jMe,{})})]})},zQe=wI(FQe,"contact");var wue={},_ue={},Sue={exports:{}},wu={};function DH(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Aue(e))&&(n&&(n+=" "),n+=t);return n}function Aue(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=Aue(e[n]))&&(r&&(r+=" "),r+=t);return r}function dU(){return dU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dU.apply(this,arguments)}function UQe(e){var t=function(r){var n=r.theme,i=r.prefix,o={nextPart:new Map,validators:[]};return function(a,s){return s?a.map(function(l){return[l[0],l[1].map(function(u){return typeof u=="string"?s+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(function(d){return[s+d[0],d[1]]})):u})]}):a}(Object.entries(r.classGroups),i).forEach(function(a){hU(a[1],o,a[0],n)}),o}(e);return{getClassGroupId:function(r){var n=r.split("-");return n[0]===""&&n.length!==1&&n.shift(),Mue(n,t)||function(i){if(JJ.test(i)){var o=JJ.exec(i)[1],a=o==null?void 0:o.substring(0,o.indexOf(":"));if(a)return"arbitrary.."+a}}(r)},getConflictingClassGroupIds:function(r){return e.conflictingClassGroups[r]||[]}}}function Mue(e,t){var r;if(e.length===0)return t.classGroupId;var n=t.nextPart.get(e[0]),i=n?Mue(e.slice(1),n):void 0;if(i)return i;if(t.validators.length!==0){var o=e.join("-");return(r=t.validators.find(function(a){return(0,a.validator)(o)}))==null?void 0:r.classGroupId}}Object.defineProperty(wu,"__esModule",{value:!0});var JJ=/^\[(.+)\]$/;function hU(e,t,r,n){e.forEach(function(i){if(typeof i!="string"){if(typeof i=="function")return i.isThemeGetter?void hU(i(n),t,r,n):void t.validators.push({validator:i,classGroupId:r});Object.entries(i).forEach(function(o){hU(o[1],QJ(t,o[0]),r,n)})}else(i===""?t:QJ(t,i)).classGroupId=r})}function QJ(e,t){var r=e;return t.split("-").forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function VQe(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function i(o,a){r.set(o,a),++t>e&&(t=0,n=r,r=new Map)}return{get:function(o){var a=r.get(o);return a!==void 0?a:(a=n.get(o))!==void 0?(i(o,a),a):void 0},set:function(o,a){r.has(o)?r.set(o,a):i(o,a)}}}function jQe(e){var t=e.separator||":";return function(r){for(var n=0,i=[],o=0,a=0;a<r.length;a++){var s=r[a];n===0&&s===t[0]&&(t.length!==1&&r.slice(a,a+t.length)!==t||(i.push(r.slice(o,a)),o=a+t.length)),s==="["?n++:s==="]"&&n--}var l=i.length===0?r:r.substring(o),u=l.startsWith("!");return{modifiers:i,hasImportantModifier:u,baseClassName:u?l.substring(1):l}}}function HQe(e){return dU({cache:VQe(e.cacheSize),splitModifiers:jQe(e)},UQe(e))}var GQe=/\s+/;function WQe(e,t){var r=t.splitModifiers,n=t.getClassGroupId,i=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(GQe).map(function(a){var s=r(a),l=s.modifiers,u=s.hasImportantModifier,d=n(s.baseClassName);if(!d)return{isTailwindClass:!1,originalClassName:a};var c=function(h){if(h.length<=1)return h;var f=[],g=[];return h.forEach(function(y){y[0]==="["?(f.push.apply(f,g.sort().concat([y])),g=[]):g.push(y)}),f.push.apply(f,g.sort()),f}(l).join(":");return{isTailwindClass:!0,modifierId:u?c+"!":c,classGroupId:d,originalClassName:a}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var s=a.modifierId,l=a.classGroupId,u=s+l;return!o.has(u)&&(o.add(u),i(l).forEach(function(d){return o.add(s+d)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function fU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,o,a=s;function s(u){var d=t[0],c=t.slice(1).reduce(function(h,f){return f(h)},d());return n=HQe(c),i=n.cache.get,o=n.cache.set,a=l,l(u)}function l(u){var d=i(u);if(d)return d;var c=WQe(u,n);return o(u,c),c}return function(){return a(DH.apply(null,arguments))}}function Ln(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var im=/^\[(.+)\]$/,qQe=/^\d+\/\d+$/,XQe=new Set(["px","full","screen"]),YQe=/^(\d+)?(xs|sm|md|lg|xl)$/,KQe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh)/,JQe=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Dl(e){return!Number.isNaN(Number(e))||XQe.has(e)||qQe.test(e)||Jf(e)}function Jf(e){var t,r=(t=im.exec(e))==null?void 0:t[1];return!!r&&(r.startsWith("length:")||KQe.test(r))}function Cue(e){var t,r=(t=im.exec(e))==null?void 0:t[1];return!!r&&r.startsWith("size:")}function Tue(e){var t,r=(t=im.exec(e))==null?void 0:t[1];return!!r&&r.startsWith("position:")}function Eue(e){var t,r=(t=im.exec(e))==null?void 0:t[1];return!!r&&(r.startsWith("url(")||r.startsWith("url:"))}function PO(e){var t,r=(t=im.exec(e))==null?void 0:t[1];return!!r&&(!Number.isNaN(Number(r))||r.startsWith("number:"))}function Qo(e){var t,r=(t=im.exec(e))==null?void 0:t[1];return Number.isInteger(Number(r||e))}function bo(e){return im.test(e)}function rb(){return!0}function Kd(e){return YQe.test(e)}function Pue(e){var t,r=(t=im.exec(e))==null?void 0:t[1];return!!r&&JQe.test(r)}var QQe={__proto__:null,isLength:Dl,isArbitraryLength:Jf,isArbitrarySize:Cue,isArbitraryPosition:Tue,isArbitraryUrl:Eue,isArbitraryNumber:PO,isArbitraryWeight:PO,isInteger:Qo,isArbitraryValue:bo,isAny:rb,isTshirtSize:Kd,isArbitraryShadow:Pue};function L2(){var e=Ln("colors"),t=Ln("spacing"),r=Ln("blur"),n=Ln("brightness"),i=Ln("borderColor"),o=Ln("borderRadius"),a=Ln("borderSpacing"),s=Ln("borderWidth"),l=Ln("contrast"),u=Ln("grayscale"),d=Ln("hueRotate"),c=Ln("invert"),h=Ln("gap"),f=Ln("gradientColorStops"),g=Ln("inset"),y=Ln("margin"),m=Ln("opacity"),p=Ln("padding"),v=Ln("saturate"),b=Ln("scale"),x=Ln("sepia"),_=Ln("skew"),A=Ln("space"),M=Ln("translate"),T=function(){return["auto",t]},C=function(){return["",Dl]},E=function(){return["auto",Qo]},D=function(){return["","0",bo]};return{cacheSize:500,theme:{colors:[rb],spacing:[Dl],blur:["none","",Kd,Jf],brightness:[Qo],borderColor:[e],borderRadius:["none","","full",Kd,Jf],borderSpacing:[t],borderWidth:C(),contrast:[Qo],grayscale:D(),hueRotate:[Qo],invert:D(),gap:[t],gradientColorStops:[e],inset:T(),margin:T(),opacity:[Qo],padding:[t],saturate:[Qo],scale:[Qo],sepia:D(),skew:[Qo,bo],space:[t],translate:[t]},classGroups:{aspect:[{aspect:["auto","square","video",bo]}],container:["container"],columns:[{columns:[Kd]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[bo])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:[Qo]}],basis:[{basis:[t]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",bo]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Qo]}],"grid-cols":[{"grid-cols":[rb]}],"col-start-end":[{col:["auto",{span:[Qo]}]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[rb]}],"row-start-end":[{row:["auto",{span:[Qo]}]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",bo]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",bo]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["start","end","center","between","around","evenly"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:[].concat(["start","end","center","between","around","evenly"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly"],["baseline","stretch"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",t]}],"min-w":[{"min-w":["min","max","fit",Dl]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Kd]},Kd,Jf]}],h:[{h:[t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Dl]}],"max-h":[{"max-h":[t,"min","max","fit"]}],"font-size":[{text:["base",Kd,Jf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",PO]}],"font-family":[{font:[rb]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Jf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Dl]}],"list-style-type":[{list:["none","disc","decimal",bo]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Dl]}],"underline-offset":[{"underline-offset":["auto",Dl]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[t]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jf]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap"]}],break:[{break:["normal","words","all","keep"]}],content:[{content:["none",bo]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[Tue])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Cue]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Eue]}],"bg-color":[{bg:[e]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[Dl]}],"outline-w":[{outline:[Dl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[Dl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Kd,Pue]}],"shadow-color":[{shadow:[rb]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Kd,bo]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[c]}],saturate:[{saturate:[v]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[c]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",bo]}],duration:[{duration:[Qo]}],ease:[{ease:["linear","in","out","in-out",bo]}],delay:[{delay:[Qo]}],animate:[{animate:["none","spin","ping","pulse","bounce",bo]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Qo,bo]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",bo]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bo]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[t]}],"scroll-mx":[{"scroll-mx":[t]}],"scroll-my":[{"scroll-my":[t]}],"scroll-mt":[{"scroll-mt":[t]}],"scroll-mr":[{"scroll-mr":[t]}],"scroll-mb":[{"scroll-mb":[t]}],"scroll-ml":[{"scroll-ml":[t]}],"scroll-p":[{"scroll-p":[t]}],"scroll-px":[{"scroll-px":[t]}],"scroll-py":[{"scroll-py":[t]}],"scroll-pt":[{"scroll-pt":[t]}],"scroll-pr":[{"scroll-pr":[t]}],"scroll-pb":[{"scroll-pb":[t]}],"scroll-pl":[{"scroll-pl":[t]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bo]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Dl,PO]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-t","rounded-r","rounded-b","rounded-l","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]}}}var ZQe=fU(L2);function ZJ(e,t){for(var r in t)Due(e,r,t[r]);return e}var $Qe=Object.prototype.hasOwnProperty,eZe=new Set(["string","number","boolean"]);function Due(e,t,r){if($Qe.call(e,t)&&!eZe.has(typeof r)&&r!==null){if(Array.isArray(r)&&Array.isArray(e[t]))e[t]=e[t].concat(r);else if(typeof r=="object"&&typeof e[t]=="object"){if(e[t]===null)return void(e[t]=r);for(var n in r)Due(e[t],n,r[n])}}else e[t]=r}var tZe=DH;wu.createTailwindMerge=fU,wu.extendTailwindMerge=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return fU.apply(void 0,typeof e=="function"?[L2,e].concat(r):[function(){return ZJ(L2(),e)}].concat(r))},wu.fromTheme=Ln,wu.getDefaultConfig=L2,wu.join=tZe,wu.mergeConfigs=ZJ,wu.twJoin=DH,wu.twMerge=ZQe,wu.validators=QQe;Sue.exports=wu;var Qt=Sue.exports,Yt={},Oue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return s}});function t(l,u){(u==null||u>l.length)&&(u=l.length);for(var d=0,c=new Array(u);d<u;d++)c[d]=l[d];return c}function r(l){if(Array.isArray(l))return t(l)}function n(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(l){return r(l)||n(l)||a(l)||i()}function a(l,u){if(l){if(typeof l=="string")return t(l,u);var d=Object.prototype.toString.call(l).slice(8,-1);if(d==="Object"&&l.constructor&&(d=l.constructor.name),d==="Map"||d==="Set")return Array.from(d);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return t(l,u)}}function s(l){var u=[];return Object.values(l).forEach(function(d){typeof d=="string"?u=o(u).concat([d]):typeof d=="object"&&!Array.isArray(d)&&d!==null&&(u=o(u).concat(o(s(d))))}),u}})(Oue);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});var t=r(Oue);function r(i){return i&&i.__esModule?i:{default:i}}function n(i){return(0,t.default)(i).join(" ")}})(Yt);var jt={},rZe=function(t){return nZe(t)&&!iZe(t)};function nZe(e){return!!e&&typeof e=="object"}function iZe(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||sZe(e)}var oZe=typeof Symbol=="function"&&Symbol.for,aZe=oZe?Symbol.for("react.element"):60103;function sZe(e){return e.$$typeof===aZe}function lZe(e){return Array.isArray(e)?[]:{}}function qA(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Yx(lZe(e),e,t):e}function uZe(e,t,r){return e.concat(t).map(function(n){return qA(n,r)})}function cZe(e,t){if(!t.customMerge)return Yx;var r=t.customMerge(e);return typeof r=="function"?r:Yx}function dZe(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function $J(e){return Object.keys(e).concat(dZe(e))}function Rue(e,t){try{return t in e}catch{return!1}}function hZe(e,t){return Rue(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function fZe(e,t,r){var n={};return r.isMergeableObject(e)&&$J(e).forEach(function(i){n[i]=qA(e[i],r)}),$J(t).forEach(function(i){hZe(e,i)||(Rue(e,i)&&r.isMergeableObject(t[i])?n[i]=cZe(i,r)(e[i],t[i],r):n[i]=qA(t[i],r))}),n}function Yx(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||uZe,r.isMergeableObject=r.isMergeableObject||rZe,r.cloneUnlessOtherwiseSpecified=qA;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):fZe(e,t,r):qA(t,r)}Yx.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return Yx(n,i,r)},{})};var pZe=Yx,jo=pZe,OH={},Iue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{accordion:function(){return r},default:function(){return n}});var r={defaultProps:{icon:void 0,className:"",animate:{unmount:{},mount:{}},disabled:!1},styles:{base:{container:{display:"block",position:"relative",width:"w-full"},header:{initial:{display:"flex",justifyContent:"justify-between",alignItems:"items-center",width:"w-full",py:"py-4",borderWidth:"border-b border-b-blue-gray-100",color:"text-blue-gray-700",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-xl",textAlign:"text-left",fontWeight:"font-semibold",lineHeight:"leading-snug",userSelect:"select-none",hover:"hover:text-blue-gray-900",transition:"transition-colors"},active:{color:"text-blue-gray-900"},icon:{ml:"ml-4"}},body:{display:"block",width:"w-full",py:"py-4",color:"text-gray-700",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-sm",fontWeight:"font-light",lineHeight:"leading-normal"},disabled:{pointerEvents:"pointer-events-none",opacity:"opacity-50"}}}},n=r})(Iue);var Lue={},Bue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{backgroud:"bg-blue-gray-500",color:"text-white"},gray:{backgroud:"bg-gray-900",color:"text-white"},brown:{backgroud:"bg-brown-500",color:"text-white"},"deep-orange":{backgroud:"bg-deep-orange-500",color:"text-white"},orange:{backgroud:"bg-orange-500",color:"text-white"},amber:{backgroud:"bg-amber-500",color:"text-black"},yellow:{backgroud:"bg-yellow-500",color:"text-black"},lime:{backgroud:"bg-lime-500",color:"text-black"},"light-green":{backgroud:"bg-light-green-500",color:"text-white"},green:{backgroud:"bg-green-500",color:"text-white"},teal:{backgroud:"bg-teal-500",color:"text-white"},cyan:{backgroud:"bg-cyan-500",color:"text-white"},"light-blue":{backgroud:"bg-light-blue-500",color:"text-white"},blue:{backgroud:"bg-blue-500",color:"text-white"},indigo:{backgroud:"bg-indigo-500",color:"text-white"},"deep-purple":{backgroud:"bg-deep-purple-500",color:"text-white"},purple:{backgroud:"bg-purple-500",color:"text-white"},pink:{backgroud:"bg-pink-500",color:"text-white"},red:{backgroud:"bg-red-500",color:"text-white"}},r=t})(Bue);var Nue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{backgroud:"bg-gradient-to-tr from-blue-gray-600 to-blue-gray-400",color:"text-white"},gray:{backgroud:"bg-gradient-to-tr from-gray-900 to-gray-800",color:"text-white"},brown:{backgroud:"bg-gradient-to-tr from-brown-600 to-brown-400",color:"text-white"},"deep-orange":{backgroud:"bg-gradient-to-tr from-deep-orange-600 to-deep-orange-400",color:"text-white"},orange:{backgroud:"bg-gradient-to-tr from-orange-600 to-orange-400",color:"text-white"},amber:{backgroud:"bg-gradient-to-tr from-amber-600 to-amber-400",color:"text-black"},yellow:{backgroud:"bg-gradient-to-tr from-yellow-600 to-yellow-400",color:"text-black"},lime:{backgroud:"bg-gradient-to-tr from-lime-600 to-lime-400",color:"text-black"},"light-green":{backgroud:"bg-gradient-to-tr from-light-green-600 to-light-green-400",color:"text-white"},green:{backgroud:"bg-gradient-to-tr from-green-600 to-green-400",color:"text-white"},teal:{backgroud:"bg-gradient-to-tr from-teal-600 to-teal-400",color:"text-white"},cyan:{backgroud:"bg-gradient-to-tr from-cyan-600 to-cyan-400",color:"text-white"},"light-blue":{backgroud:"bg-gradient-to-tr from-light-blue-600 to-light-blue-400",color:"text-white"},blue:{backgroud:"bg-gradient-to-tr from-blue-600 to-blue-400",color:"text-white"},indigo:{backgroud:"bg-gradient-to-tr from-indigo-600 to-indigo-400",color:"text-white"},"deep-purple":{backgroud:"bg-gradient-to-tr from-deep-purple-600 to-deep-purple-400",color:"text-white"},purple:{backgroud:"bg-gradient-to-tr from-purple-600 to-purple-400",color:"text-white"},pink:{backgroud:"bg-gradient-to-tr from-pink-600 to-pink-400",color:"text-white"},red:{backgroud:"bg-gradient-to-tr from-red-600 to-red-400",color:"text-white"}},r=t})(Nue);var kue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{border:"border border-blue-gray-500",color:"text-blue-gray-700"},gray:{border:"border border-gray-900",color:"text-gray-900"},brown:{border:"border border-brown-500",color:"text-brown-700"},"deep-orange":{border:"border border-deep-orange-500",color:"text-deep-orange-700"},orange:{border:"border border-orange-500",color:"text-orange-700"},amber:{border:"border border-amber-500",color:"text-amber-700"},yellow:{border:"border border-yellow-500",color:"text-yellow-700"},lime:{border:"border border-lime-500",color:"text-lime-700"},"light-green":{border:"border border-light-green-500",color:"text-light-green-700"},green:{border:"border border-green-500",color:"text-green-700"},teal:{border:"border border-teal-500",color:"text-teal-700"},cyan:{border:"border border-cyan-500",color:"text-cyan-700"},"light-blue":{border:"border border-light-blue-500",color:"text-light-blue-700"},blue:{border:"border border-blue-500",color:"text-blue-700"},indigo:{border:"border border-indigo-500",color:"text-indigo-700"},"deep-purple":{border:"border border-deep-purple-500",color:"text-deep-purple-700"},purple:{border:"border border-purple-500",color:"text-purple-700"},pink:{border:"border border-pink-500",color:"text-pink-700"},red:{border:"border border-red-500",color:"text-red-700"}},r=t})(kue);var Fue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{backgroud:"bg-blue-gray-500/20",color:"text-blue-gray-900"},gray:{backgroud:"bg-gray-900/10",color:"text-gray-900"},brown:{backgroud:"bg-brown-500/20",color:"text-brown-900"},"deep-orange":{backgroud:"bg-deep-orange-500/20",color:"text-deep-orange-900"},orange:{backgroud:"bg-orange-500/20",color:"text-orange-900"},amber:{backgroud:"bg-amber-500/20",color:"text-amber-900"},yellow:{backgroud:"bg-yellow-500/20",color:"text-yellow-900"},lime:{backgroud:"bg-lime-500/20",color:"text-lime-900"},"light-green":{backgroud:"bg-light-green-500/20",color:"text-light-green-900"},green:{backgroud:"bg-green-500/20",color:"text-green-900"},teal:{backgroud:"bg-teal-500/20",color:"text-teal-900"},cyan:{backgroud:"bg-cyan-500/20",color:"text-cyan-900"},"light-blue":{backgroud:"bg-light-blue-500/20",color:"text-light-blue-900"},blue:{backgroud:"bg-blue-500/20",color:"text-blue-900"},indigo:{backgroud:"bg-indigo-500/20",color:"text-indigo-900"},"deep-purple":{backgroud:"bg-deep-purple-500/20",color:"text-deep-purple-900"},purple:{backgroud:"bg-purple-500/20",color:"text-purple-900"},pink:{backgroud:"bg-pink-500/20",color:"text-pink-900"},red:{backgroud:"bg-red-500/20",color:"text-red-900"}},r=t})(Fue);var RH={},Un={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){for(var c in d)Object.defineProperty(u,c,{enumerable:!0,get:d[c]})}t(e,{propTypesColors:function(){return i},propTypesAnimation:function(){return o},propTypesDismissType:function(){return a},propTypesOffsetType:function(){return s},propTypesPlacements:function(){return l}});var r=n(Kt);function n(u){return u&&u.__esModule?u:{default:u}}var i=["blue-gray","gray","brown","deep-orange","orange","amber","yellow","lime","light-green","green","teal","cyan","light-blue","blue","indigo","deep-purple","purple","pink","red"],o=r.default.shape({mount:r.default.instanceOf(Object),unmount:r.default.instanceOf(Object)}),a=r.default.shape({enabled:r.default.bool,escapeKey:r.default.bool,referencePress:r.default.bool,referencePressEvent:r.default.oneOf(["pointerdown","mousedown","click"]),outsidePress:r.default.oneOfType([r.default.bool,r.default.func]),outsidePressEvent:r.default.oneOf(["pointerdown","mousedown","click"]),ancestorScroll:r.default.bool,bubbles:r.default.oneOfType([r.default.bool,r.default.shape({escapeKey:r.default.bool,outsidePress:r.default.bool})])}),s=r.default.oneOfType([r.default.number,r.default.shape({mainAxis:r.default.number,crossAxis:r.default.number,alignmentAxis:r.default.number})]),l=["top-start","top","top-end","right-start","right","right-end","bottom-start","bottom","bottom-end","left-start","left","left-end"]})(Un);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,y){for(var m in y)Object.defineProperty(g,m,{enumerable:!0,get:y[m]})}t(e,{propTypesVariant:function(){return o},propTypesColor:function(){return a},propTypesIcon:function(){return s},propTypesOpen:function(){return l},propTypesOnClose:function(){return u},propTypesAction:function(){return d},propTypesAnimate:function(){return c},propTypesClassName:function(){return h},propTypesChildren:function(){return f}});var r=i(Kt),n=Un;function i(g){return g&&g.__esModule?g:{default:g}}var o=["filled","gradient","outlined","ghost"],a=n.propTypesColors,s=r.default.node,l=r.default.bool,u=r.default.func,d=r.default.node,c=n.propTypesAnimation,h=r.default.string,f=r.default.node.isRequired})(RH);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(d,c){for(var h in c)Object.defineProperty(d,h,{enumerable:!0,get:c[h]})}t(e,{alert:function(){return l},default:function(){return u}});var r=s(Bue),n=s(Nue),i=s(kue),o=s(Fue),a=RH;function s(d){return d&&d.__esModule?d:{default:d}}var l={defaultProps:{variant:"filled",color:"gray",icon:void 0,open:!0,action:void 0,onClose:void 0,animate:{unmount:{},mount:{}},className:""},valid:{variants:a.propTypesVariant,colors:a.propTypesColor},styles:{base:{alert:{position:"relative",display:"block",width:"w-full",fontFamily:"font-sans",fontSize:"text-base",fontWeight:"font-regular",px:"px-4",py:"py-4",borderRadius:"rounded-lg"},action:{position:"!absolute",top:"top-3",right:"right-3"}},variants:{filled:r.default,gradient:n.default,outlined:i.default,ghost:o.default}}},u=l})(Lue);var zue={},IH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{propTypesVariant:function(){return c},propTypesSize:function(){return h},propTypesClassName:function(){return f},propTypesWithBorder:function(){return g},propTypesColor:function(){return y}});var r=a(Kt),n=Un;function i(m,p){(p==null||p>m.length)&&(p=m.length);for(var v=0,b=new Array(p);v<p;v++)b[v]=m[v];return b}function o(m){if(Array.isArray(m))return i(m)}function a(m){return m&&m.__esModule?m:{default:m}}function s(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(m){return o(m)||s(m)||d(m)||l()}function d(m,p){if(m){if(typeof m=="string")return i(m,p);var v=Object.prototype.toString.call(m).slice(8,-1);if(v==="Object"&&m.constructor&&(v=m.constructor.name),v==="Map"||v==="Set")return Array.from(v);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return i(m,p)}}var c=["circular","rounded","square"],h=["xs","sm","md","lg","xl","xxl"],f=r.default.string,g=r.default.bool,y=["white"].concat(u(n.propTypesColors))})(IH);var Uue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{borderColor:"border-white"},"blue-gray":{borderColor:"border-blue-gray-500"},gray:{borderColor:"border-gray-900"},brown:{borderColor:"border-brown-500"},"deep-orange":{borderColor:"border-deep-orange-500"},orange:{borderColor:"border-orange-500"},amber:{borderColor:"border-amber-500"},yellow:{borderColor:"border-yellow-500"},lime:{borderColor:"border-lime-500"},"light-green":{borderColor:"border-light-green-500"},green:{borderColor:"border-green-500"},teal:{borderColor:"border-teal-500"},cyan:{borderColor:"border-cyan-500"},"light-blue":{borderColor:"border-light-blue-500"},blue:{borderColor:"border-blue-500"},indigo:{borderColor:"border-indigo-500"},"deep-purple":{borderColor:"border-deep-purple-500"},purple:{borderColor:"border-purple-500"},pink:{borderColor:"border-pink-500"},red:{borderColor:"border-red-500"}},r=t})(Uue);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{avatar:function(){return o},default:function(){return a}});var r=IH,n=i(Uue);function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{variant:"circular",size:"md",className:"",withBorder:!1,color:"gray"},valid:{variants:r.propTypesVariant,sizes:r.propTypesSize,colors:r.propTypesColor},styles:{base:{initial:{display:"inline-block",position:"relative",objectFit:"object-cover",objectPosition:"object-center"},withBorder:{border:"border-2"}},sizes:{xs:{width:"w-6",height:"h-6",borderRadius:"rounded-md"},sm:{width:"w-9",height:"h-9",borderRadius:"rounded-md"},md:{width:"w-12",height:"h-12",borderRadius:"rounded-lg"},lg:{width:"w-[58px]",height:"h-[58px]",borderRadius:"rounded-lg"},xl:{width:"w-[74px]",height:"h-[74px]",borderRadius:"rounded-xl"},xxl:{width:"w-[110px]",height:"h-[110px]",borderRadius:"rounded-2xl"}},variants:{rounded:{},square:{borderRadius:"!rounded-none"},circular:{borderRadius:"!rounded-full"}},borderColor:n.default}},a=o})(zue);var Vue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{breadcrumbs:function(){return r},default:function(){return n}});var r={defaultProps:{className:"",fullWidth:!1,separator:"/"},styles:{base:{root:{initial:{width:"w-max"},fullWidth:{display:"block",width:"w-full"}},list:{display:"flex",flexWrap:"flex-wrap",alignItems:"items-center",width:"w-full",bg:"bg-blue-gray-50",bgOpacity:"bg-opacity-60",py:"py-2",px:"px-4",borderRadius:"rounded-md"},item:{initial:{display:"flex",alignItems:"items-center",color:"text-blue-gray-900",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-sm",fontWeight:"font-normal",lineHeight:"leading-normal",cursor:"cursor-pointer",transition:"transition-colors duration-300",hover:"hover:text-light-blue-500"},disabled:{pointerEvents:"pointer-events-none"}},separator:{color:"text-blue-gray-500",fontSize:"text-sm",fontSmoothing:"antialiased",fontFamily:"font-sans",fontWeight:"font-normal",lineHeight:"leading-normal",px:"mx-2",pointerEvents:"pointer-events-none",userSelcet:"select-none"}}}},n=r})(Vue);var jue={},LH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{background:"bg-white",color:"text-blue-gray-900",shadow:"shadow-md shadow-blue-gray-500/10",hover:"hover:shadow-lg hover:shadow-blue-gray-500/20",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},"blue-gray":{background:"bg-blue-gray-500",color:"text-white",shadow:"shadow-md shadow-blue-gray-500/20",hover:"hover:shadow-lg hover:shadow-blue-gray-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},gray:{background:"bg-gray-900",color:"text-white",shadow:"shadow-md shadow-gray-900/10",hover:"hover:shadow-lg hover:shadow-gray-900/20",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},brown:{background:"bg-brown-500",color:"text-white",shadow:"shadow-md shadow-brown-500/20",hover:"hover:shadow-lg hover:shadow-brown-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},"deep-orange":{background:"bg-deep-orange-500",color:"text-white",shadow:"shadow-md shadow-deep-orange-500/20",hover:"hover:shadow-lg hover:shadow-deep-orange-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},orange:{background:"bg-orange-500",color:"text-white",shadow:"shadow-md shadow-orange-500/20",hover:"hover:shadow-lg hover:shadow-orange-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},amber:{background:"bg-amber-500",color:"text-black",shadow:"shadow-md shadow-amber-500/20",hover:"hover:shadow-lg hover:shadow-amber-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},yellow:{background:"bg-yellow-500",color:"text-black",shadow:"shadow-md shadow-yellow-500/20",hover:"hover:shadow-lg hover:shadow-yellow-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},lime:{background:"bg-lime-500",color:"text-black",shadow:"shadow-md shadow-lime-500/20",hover:"hover:shadow-lg hover:shadow-lime-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},"light-green":{background:"bg-light-green-500",color:"text-white",shadow:"shadow-md shadow-light-green-500/20",hover:"hover:shadow-lg hover:shadow-light-green-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},green:{background:"bg-green-500",color:"text-white",shadow:"shadow-md shadow-green-500/20",hover:"hover:shadow-lg hover:shadow-green-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},teal:{background:"bg-teal-500",color:"text-white",shadow:"shadow-md shadow-teal-500/20",hover:"hover:shadow-lg hover:shadow-teal-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},cyan:{background:"bg-cyan-500",color:"text-white",shadow:"shadow-md shadow-cyan-500/20",hover:"hover:shadow-lg hover:shadow-cyan-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},"light-blue":{background:"bg-light-blue-500",color:"text-white",shadow:"shadow-md shadow-light-blue-500/20",hover:"hover:shadow-lg hover:shadow-light-blue-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},blue:{background:"bg-blue-500",color:"text-white",shadow:"shadow-md shadow-blue-500/20",hover:"hover:shadow-lg hover:shadow-blue-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},indigo:{background:"bg-indigo-500",color:"text-white",shadow:"shadow-md shadow-indigo-500/20",hover:"hover:shadow-lg hover:shadow-indigo-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},"deep-purple":{background:"bg-deep-purple-500",color:"text-white",shadow:"shadow-md shadow-deep-purple-500/20",hover:"hover:shadow-lg hover:shadow-deep-purple-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},purple:{background:"bg-purple-500",color:"text-white",shadow:"shadow-md shadow-purple-500/20",hover:"hover:shadow-lg hover:shadow-purple-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},pink:{background:"bg-pink-500",color:"text-white",shadow:"shadow-md shadow-pink-500/20",hover:"hover:shadow-lg hover:shadow-pink-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},red:{background:"bg-red-500",color:"text-white",shadow:"shadow-md shadow-red-500/20",hover:"hover:shadow-lg hover:shadow-red-500/40",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"}},r=t})(LH);var BH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{background:"bg-white",color:"text-blue-gray-900",shadow:"shadow-md shadow-blue-gray-500/10",hover:"hover:shadow-lg hover:shadow-blue-gray-500/20",focus:"focus:opacity-[0.85] focus:shadow-none",active:"active:opacity-[0.85] active:shadow-none"},"blue-gray":{background:"bg-gradient-to-tr from-blue-gray-600 to-blue-gray-400",color:"text-white",shadow:"shadow-md shadow-blue-gray-500/20",hover:"hover:shadow-lg hover:shadow-blue-gray-500/40",active:"active:opacity-[0.85]"},gray:{background:"bg-gradient-to-tr from-gray-900 to-gray-800",color:"text-white",shadow:"shadow-md shadow-gray-900/10",hover:"hover:shadow-lg hover:shadow-gray-900/20",active:"active:opacity-[0.85]"},brown:{background:"bg-gradient-to-tr from-brown-600 to-brown-400",color:"text-white",shadow:"shadow-md shadow-brown-500/20",hover:"hover:shadow-lg hover:shadow-brown-500/40",active:"active:opacity-[0.85]"},"deep-orange":{background:"bg-gradient-to-tr from-deep-orange-600 to-deep-orange-400",color:"text-white",shadow:"shadow-md shadow-deep-orange-500/20",hover:"hover:shadow-lg hover:shadow-deep-orange-500/40",active:"active:opacity-[0.85]"},orange:{background:"bg-gradient-to-tr from-orange-600 to-orange-400",color:"text-white",shadow:"shadow-md shadow-orange-500/20",hover:"hover:shadow-lg hover:shadow-orange-500/40",active:"active:opacity-[0.85]"},amber:{background:"bg-gradient-to-tr from-amber-600 to-amber-400",color:"text-black",shadow:"shadow-md shadow-amber-500/20",hover:"hover:shadow-lg hover:shadow-amber-500/40",active:"active:opacity-[0.85]"},yellow:{background:"bg-gradient-to-tr from-yellow-600 to-yellow-400",color:"text-black",shadow:"shadow-md shadow-yellow-500/20",hover:"hover:shadow-lg hover:shadow-yellow-500/40",active:"active:opacity-[0.85]"},lime:{background:"bg-gradient-to-tr from-lime-600 to-lime-400",color:"text-black",shadow:"shadow-md shadow-lime-500/20",hover:"hover:shadow-lg hover:shadow-lime-500/40",active:"active:opacity-[0.85]"},"light-green":{background:"bg-gradient-to-tr from-light-green-600 to-light-green-400",color:"text-white",shadow:"shadow-md shadow-light-green-500/20",hover:"hover:shadow-lg hover:shadow-light-green-500/40",active:"active:opacity-[0.85]"},green:{background:"bg-gradient-to-tr from-green-600 to-green-400",color:"text-white",shadow:"shadow-md shadow-green-500/20",hover:"hover:shadow-lg hover:shadow-green-500/40",active:"active:opacity-[0.85]"},teal:{background:"bg-gradient-to-tr from-teal-600 to-teal-400",color:"text-white",shadow:"shadow-md shadow-teal-500/20",hover:"hover:shadow-lg hover:shadow-teal-500/40",active:"active:opacity-[0.85]"},cyan:{background:"bg-gradient-to-tr from-cyan-600 to-cyan-400",color:"text-white",shadow:"shadow-md shadow-cyan-500/20",hover:"hover:shadow-lg hover:shadow-cyan-500/40",active:"active:opacity-[0.85]"},"light-blue":{background:"bg-gradient-to-tr from-light-blue-600 to-light-blue-400",color:"text-white",shadow:"shadow-md shadow-light-blue-500/20",hover:"hover:shadow-lg hover:shadow-light-blue-500/40",active:"active:opacity-[0.85]"},blue:{background:"bg-gradient-to-tr from-blue-600 to-blue-400",color:"text-white",shadow:"shadow-md shadow-blue-500/20",hover:"hover:shadow-lg hover:shadow-blue-500/40",active:"active:opacity-[0.85]"},indigo:{background:"bg-gradient-to-tr from-indigo-600 to-indigo-400",color:"text-white",shadow:"shadow-md shadow-indigo-500/20",hover:"hover:shadow-lg hover:shadow-indigo-500/40",active:"active:opacity-[0.85]"},"deep-purple":{background:"bg-gradient-to-tr from-deep-purple-600 to-deep-purple-400",color:"text-white",shadow:"shadow-md shadow-deep-purple-500/20",hover:"hover:shadow-lg hover:shadow-deep-purple-500/40",active:"active:opacity-[0.85]"},purple:{background:"bg-gradient-to-tr from-purple-600 to-purple-400",color:"text-white",shadow:"shadow-md shadow-purple-500/20",hover:"hover:shadow-lg hover:shadow-purple-500/40",active:"active:opacity-[0.85]"},pink:{background:"bg-gradient-to-tr from-pink-600 to-pink-400",color:"text-white",shadow:"shadow-md shadow-pink-500/20",hover:"hover:shadow-lg hover:shadow-pink-500/40",active:"active:opacity-[0.85]"},red:{background:"bg-gradient-to-tr from-red-600 to-red-400",color:"text-white",shadow:"shadow-md shadow-red-500/20",hover:"hover:shadow-lg hover:shadow-red-500/40",active:"active:opacity-[0.85]"}},r=t})(BH);var NH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{border:"border border-white",color:"text-white",hover:"hover:opacity-75",focus:"focus:ring focus:ring-white/50",active:"active:opacity-[0.85]"},"blue-gray":{border:"border border-blue-gray-500",color:"text-blue-gray-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-blue-gray-200",active:"active:opacity-[0.85]"},gray:{border:"border border-gray-900",color:"text-gray-900",hover:"hover:opacity-75",focus:"focus:ring focus:ring-gray-300",active:"active:opacity-[0.85]"},brown:{border:"border border-brown-500",color:"text-brown-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-brown-200",active:"active:opacity-[0.85]"},"deep-orange":{border:"border border-deep-orange-500",color:"text-deep-orange-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-deep-orange-200",active:"active:opacity-[0.85]"},orange:{border:"border border-orange-500",color:"text-orange-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-orange-200",active:"active:opacity-[0.85]"},amber:{border:"border border-amber-500",color:"text-amber-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-amber-200",active:"active:opacity-[0.85]"},yellow:{border:"border border-yellow-500",color:"text-yellow-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-yellow-200",active:"active:opacity-[0.85]"},lime:{border:"border border-lime-500",color:"text-lime-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-lime-200",active:"active:opacity-[0.85]"},"light-green":{border:"border border-light-green-500",color:"text-light-green-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-light-green-200",active:"active:opacity-[0.85]"},green:{border:"border border-green-500",color:"text-green-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-green-200",active:"active:opacity-[0.85]"},teal:{border:"border border-teal-500",color:"text-teal-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-teal-200",active:"active:opacity-[0.85]"},cyan:{border:"border border-cyan-500",color:"text-cyan-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-cyan-200",active:"active:opacity-[0.85]"},"light-blue":{border:"border border-light-blue-500",color:"text-light-blue-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-light-blue-200",active:"active:opacity-[0.85]"},blue:{border:"border border-blue-500",color:"text-blue-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-blue-200",active:"active:opacity-[0.85]"},indigo:{border:"border border-indigo-500",color:"text-indigo-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-indigo-200",active:"active:opacity-[0.85]"},"deep-purple":{border:"border border-deep-purple-500",color:"text-deep-purple-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-deep-purple-200",active:"active:opacity-[0.85]"},purple:{border:"border border-purple-500",color:"text-purple-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-purple-200",active:"active:opacity-[0.85]"},pink:{border:"border border-pink-500",color:"text-pink-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-pink-200",active:"active:opacity-[0.85]"},red:{border:"border border-red-500",color:"text-red-500",hover:"hover:opacity-75",focus:"focus:ring focus:ring-red-200",active:"active:opacity-[0.85]"}},r=t})(NH);var kH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{color:"text-white",hover:"hover:bg-white/10",active:"active:bg-white/30"},"blue-gray":{color:"text-blue-gray-500",hover:"hover:bg-blue-gray-500/10",active:"active:bg-blue-gray-500/30"},gray:{color:"text-gray-900",hover:"hover:bg-gray-900/10",active:"active:bg-gray-900/20"},brown:{color:"text-brown-500",hover:"hover:bg-brown-500/10",active:"active:bg-brown-500/30"},"deep-orange":{color:"text-deep-orange-500",hover:"hover:bg-deep-orange-500/10",active:"active:bg-deep-orange-500/30"},orange:{color:"text-orange-500",hover:"hover:bg-orange-500/10",active:"active:bg-orange-500/30"},amber:{color:"text-amber-500",hover:"hover:bg-amber-500/10",active:"active:bg-amber-500/30"},yellow:{color:"text-yellow-500",hover:"hover:bg-yellow-500/10",active:"active:bg-yellow-500/30"},lime:{color:"text-lime-500",hover:"hover:bg-lime-500/10",active:"active:bg-lime-500/30"},"light-green":{color:"text-light-green-500",hover:"hover:bg-light-green-500/10",active:"active:bg-light-green-500/30"},green:{color:"text-green-500",hover:"hover:bg-green-500/10",active:"active:bg-green-500/30"},teal:{color:"text-teal-500",hover:"hover:bg-teal-500/10",active:"active:bg-teal-500/30"},cyan:{color:"text-cyan-500",hover:"hover:bg-cyan-500/10",active:"active:bg-cyan-500/30"},"light-blue":{color:"text-light-blue-500",hover:"hover:bg-light-blue-500/10",active:"active:bg-light-blue-500/30"},blue:{color:"text-blue-500",hover:"hover:bg-blue-500/10",active:"active:bg-blue-500/30"},indigo:{color:"text-indigo-500",hover:"hover:bg-indigo-500/10",active:"active:bg-indigo-500/30"},"deep-purple":{color:"text-deep-purple-500",hover:"hover:bg-deep-purple-500/10",active:"active:bg-deep-purple-500/30"},purple:{color:"text-purple-500",hover:"hover:bg-purple-500/10",active:"active:bg-purple-500/30"},pink:{color:"text-pink-500",hover:"hover:bg-pink-500/10",active:"active:bg-pink-500/30"},red:{color:"text-red-500",hover:"hover:bg-red-500/10",active:"active:bg-red-500/30"}},r=t})(kH);var z0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{propTypesVariant:function(){return c},propTypesSize:function(){return h},propTypesColor:function(){return f},propTypesFullWidth:function(){return g},propTypesRipple:function(){return y},propTypesClassName:function(){return m},propTypesChildren:function(){return p}});var r=a(Kt),n=Un;function i(v,b){(b==null||b>v.length)&&(b=v.length);for(var x=0,_=new Array(b);x<b;x++)_[x]=v[x];return _}function o(v){if(Array.isArray(v))return i(v)}function a(v){return v&&v.__esModule?v:{default:v}}function s(v){if(typeof Symbol<"u"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(v){return o(v)||s(v)||d(v)||l()}function d(v,b){if(v){if(typeof v=="string")return i(v,b);var x=Object.prototype.toString.call(v).slice(8,-1);if(x==="Object"&&v.constructor&&(x=v.constructor.name),x==="Map"||x==="Set")return Array.from(x);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return i(v,b)}}var c=["filled","outlined","gradient","text"],h=["sm","md","lg"],f=["white"].concat(u(n.propTypesColors)),g=r.default.bool,y=r.default.bool,m=r.default.string,p=r.default.node.isRequired})(z0);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(d,c){for(var h in c)Object.defineProperty(d,h,{enumerable:!0,get:c[h]})}t(e,{button:function(){return l},default:function(){return u}});var r=s(LH),n=s(BH),i=s(NH),o=s(kH),a=z0;function s(d){return d&&d.__esModule?d:{default:d}}var l={defaultProps:{variant:"filled",size:"md",color:"gray",fullWidth:!1,ripple:!0,className:""},valid:{variants:a.propTypesVariant,sizes:a.propTypesSize,colors:a.propTypesColor},styles:{base:{initial:{verticalAlign:"align-middle",userSelect:"select-none",fontFamily:"font-sans",fontWeight:"font-bold",textAlign:"text-center",textTransform:"uppercase",transition:"transition-all",disabled:"disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none"},fullWidth:{display:"block",width:"w-full"}},sizes:{sm:{fontSize:"text-xs",py:"py-2",px:"px-4",borderRadius:"rounded-lg"},md:{fontSize:"text-xs",py:"py-3",px:"px-6",borderRadius:"rounded-lg"},lg:{fontSize:"text-sm",py:"py-3.5",px:"px-7",borderRadius:"rounded-lg"}},variants:{filled:r.default,gradient:n.default,outlined:i.default,text:o.default}}},u=l})(jue);var Hue={},FH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={transparent:{backgroud:"bg-transparent",color:"text-gray-700",shadow:"shadow-none"},white:{backgroud:"bg-white",color:"text-gray-700"},"blue-gray":{backgroud:"bg-blue-gray-500",color:"text-white",shadow:"shadow-blue-gray-500/40"},gray:{backgroud:"bg-gray-900",color:"text-white",shadow:"shadow-gray-900/20"},brown:{backgroud:"bg-brown-500",color:"text-white",shadow:"shadow-brown-500/40"},"deep-orange":{backgroud:"bg-deep-orange-500",color:"text-white",shadow:"shadow-deep-orange-500/40"},orange:{backgroud:"bg-orange-500",color:"text-white",shadow:"shadow-orange-500/40"},amber:{backgroud:"bg-amber-500",color:"text-gray-700",shadow:"shadow-amber-500/40"},yellow:{backgroud:"bg-yellow-500",color:"text-gray-700",shadow:"shadow-yellow-500/40"},lime:{backgroud:"bg-lime-500",color:"text-gray-700",shadow:"shadow-lime-500/40"},"light-green":{backgroud:"bg-light-green-500",color:"text-white",shadow:"shadow-light-green-500/40"},green:{backgroud:"bg-green-500",color:"text-white",shadow:"shadow-green-500/40"},teal:{backgroud:"bg-teal-500",color:"text-white",shadow:"shadow-teal-500/40"},cyan:{backgroud:"bg-cyan-500",color:"text-white",shadow:"shadow-cyan-500/40"},"light-blue":{backgroud:"bg-light-blue-500",color:"text-white",shadow:"shadow-light-blue-500/40"},blue:{backgroud:"bg-blue-500",color:"text-white",shadow:"shadow-blue-500/40"},indigo:{backgroud:"bg-indigo-500",color:"text-white",shadow:"shadow-indigo-500/40"},"deep-purple":{backgroud:"bg-deep-purple-500",color:"text-white",shadow:"shadow-deep-purple-500/40"},purple:{backgroud:"bg-purple-500",color:"text-white",shadow:"shadow-purple-500/40"},pink:{backgroud:"bg-pink-500",color:"text-white",shadow:"shadow-pink-500/40"},red:{backgroud:"bg-red-500",color:"text-white",shadow:"shadow-red-500/40"}},r=t})(FH);var zH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={transparent:{backgroud:"bg-transparent",color:"text-gray-700",shadow:"shadow-none"},white:{backgroud:"bg-white",color:"text-gray-700"},"blue-gray":{backgroud:"bg-gradient-to-tr from-blue-gray-600 to-blue-gray-400",color:"text-white",shadow:"shadow-blue-gray-500/40"},gray:{backgroud:"bg-gradient-to-tr from-gray-900 to-gray-800",color:"text-white",shadow:"shadow-gray-900/20"},brown:{backgroud:"bg-gradient-to-tr from-brown-600 to-brown-400",color:"text-white",shadow:"shadow-brown-500/40"},"deep-orange":{backgroud:"bg-gradient-to-tr from-deep-orange-600 to-deep-orange-400",color:"text-white",shadow:"shadow-deep-orange-500/40"},orange:{backgroud:"bg-gradient-to-tr from-orange-600 to-orange-400",color:"text-white",shadow:"shadow-orange-500/40"},amber:{backgroud:"bg-gradient-to-tr from-amber-600 to-amber-400",color:"text-gray-700",shadow:"shadow-amber-500/40"},yellow:{backgroud:"bg-gradient-to-tr from-yellow-600 to-yellow-400",color:"text-gray-700",shadow:"shadow-yellow-500/40"},lime:{backgroud:"bg-gradient-to-tr from-lime-600 to-lime-400",color:"text-gray-700",shadow:"shadow-lime-500/40"},"light-green":{backgroud:"bg-gradient-to-tr from-light-green-600 to-light-green-400",color:"text-white",shadow:"shadow-light-green-500/40"},green:{backgroud:"bg-gradient-to-tr from-green-600 to-green-400",color:"text-white",shadow:"shadow-green-500/40"},teal:{backgroud:"bg-gradient-to-tr from-teal-600 to-teal-400",color:"text-white",shadow:"shadow-teal-500/40"},cyan:{backgroud:"bg-gradient-to-tr from-cyan-600 to-cyan-400",color:"text-white",shadow:"shadow-cyan-500/40"},"light-blue":{backgroud:"bg-gradient-to-tr from-light-blue-600 to-light-blue-400",color:"text-white",shadow:"shadow-light-blue-500/40"},blue:{backgroud:"bg-gradient-to-tr from-blue-600 to-blue-400",color:"text-white",shadow:"shadow-blue-500/40"},indigo:{backgroud:"bg-gradient-to-tr from-indigo-600 to-indigo-400",color:"text-white",shadow:"shadow-indigo-500/40"},"deep-purple":{backgroud:"bg-gradient-to-tr from-deep-purple-600 to-deep-purple-400",color:"text-white",shadow:"shadow-deep-purple-500/40"},purple:{backgroud:"bg-gradient-to-tr from-purple-600 to-purple-400",color:"text-white",shadow:"shadow-purple-500/40"},pink:{backgroud:"bg-gradient-to-tr from-pink-600 to-pink-400",color:"text-white",shadow:"shadow-pink-500/40"},red:{backgroud:"bg-gradient-to-tr from-red-600 to-red-400",color:"text-white",shadow:"shadow-red-500/40"}},r=t})(zH);var U0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{propTypesVariant:function(){return c},propTypesColor:function(){return h},propTypesShadow:function(){return f},propTypesFloated:function(){return g},propTypesDivider:function(){return y},propTypesClassName:function(){return m},propTypesChildren:function(){return p}});var r=a(Kt),n=Un;function i(v,b){(b==null||b>v.length)&&(b=v.length);for(var x=0,_=new Array(b);x<b;x++)_[x]=v[x];return _}function o(v){if(Array.isArray(v))return i(v)}function a(v){return v&&v.__esModule?v:{default:v}}function s(v){if(typeof Symbol<"u"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(v){return o(v)||s(v)||d(v)||l()}function d(v,b){if(v){if(typeof v=="string")return i(v,b);var x=Object.prototype.toString.call(v).slice(8,-1);if(x==="Object"&&v.constructor&&(x=v.constructor.name),x==="Map"||x==="Set")return Array.from(x);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return i(v,b)}}var c=["filled","gradient"],h=["transparent","white"].concat(u(n.propTypesColors)),f=r.default.bool,g=r.default.bool,y=r.default.bool,m=r.default.string,p=r.default.node.isRequired})(U0);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(FH),r=i(zH),n=U0;function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{variant:"filled",color:"white",shadow:!0,className:""},valid:{variants:n.propTypesVariant,colors:n.propTypesColor},styles:{base:{initial:{position:"relative",display:"flex",flexDirection:"flex-col",backgroundClip:"bg-clip-border",borderRadius:"rounded-xl"},shadow:{boxShadow:"shadow-md"}},variants:{filled:t.default,gradient:r.default}}},a=o})(Hue);var Gue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{cardBody:function(){return r},default:function(){return n}});var r={defaultProps:{className:""},styles:{base:{p:"p-6"}}},n=r})(Gue);var Wue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{cardFooter:function(){return r},default:function(){return n}});var r={defaultProps:{className:""},styles:{base:{initial:{p:"p-6"},divider:{borderWidth:"border-t",borderColor:"border-blue-gray-50"}}}},n=r})(Wue);var que={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(FH),r=i(zH),n=U0;function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{variant:"filled",color:"white",shadow:!0,floated:!0,className:""},valid:{variants:n.propTypesVariant,colors:n.propTypesColor},styles:{base:{initial:{position:"relative",backgroundClip:"bg-clip-border",mt:"mt-4",mx:"mx-4",borderRadius:"rounded-xl",overflow:"overflow-hidden"},shadow:{boxShadow:"shadow-lg"},floated:{mt:"-mt-6"}},variants:{filled:t.default,gradient:r.default}}},a=o})(que);var Xue={},Yue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{background:"checked:bg-blue-gray-500",border:"checked:border-blue-gray-500",before:"checked:before:bg-blue-gray-500"},gray:{background:"checked:bg-gray-900",border:"checked:border-gray-900",before:"checked:before:bg-gray-900"},brown:{background:"checked:bg-brown-500",border:"checked:border-brown-500",before:"checked:before:bg-brown-500"},"deep-orange":{background:"checked:bg-deep-orange-500",border:"checked:border-deep-orange-500",before:"checked:before:bg-deep-orange-500"},orange:{background:"checked:bg-orange-500",border:"checked:border-orange-500",before:"checked:before:bg-orange-500"},amber:{background:"checked:bg-amber-500",border:"checked:border-amber-500",before:"checked:before:bg-amber-500"},yellow:{background:"checked:bg-yellow-500",border:"checked:border-yellow-500",before:"checked:before:bg-yellow-500"},lime:{background:"checked:bg-lime-500",border:"checked:border-lime-500",before:"checked:before:bg-lime-500"},"light-green":{background:"checked:bg-light-green-500",border:"checked:border-light-green-500",before:"checked:before:bg-light-green-500"},green:{background:"checked:bg-green-500",border:"checked:border-green-500",before:"checked:before:bg-green-500"},teal:{background:"checked:bg-teal-500",border:"checked:border-teal-500",before:"checked:before:bg-teal-500"},cyan:{background:"checked:bg-cyan-500",border:"checked:border-cyan-500",before:"checked:before:bg-cyan-500"},"light-blue":{background:"checked:bg-light-blue-500",border:"checked:border-light-blue-500",before:"checked:before:bg-light-blue-500"},blue:{background:"checked:bg-blue-500",border:"checked:border-blue-500",before:"checked:before:bg-blue-500"},indigo:{background:"checked:bg-indigo-500",border:"checked:border-indigo-500",before:"checked:before:bg-indigo-500"},"deep-purple":{background:"checked:bg-deep-purple-500",border:"checked:border-deep-purple-500",before:"checked:before:bg-deep-purple-500"},purple:{background:"checked:bg-purple-500",border:"checked:border-purple-500",before:"checked:before:bg-purple-500"},pink:{background:"checked:bg-pink-500",border:"checked:border-pink-500",before:"checked:before:bg-pink-500"},red:{background:"checked:bg-red-500",border:"checked:border-red-500",before:"checked:before:bg-red-500"}},r=t})(Yue);var V0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(h,f){for(var g in f)Object.defineProperty(h,g,{enumerable:!0,get:f[g]})}t(e,{propTypesColor:function(){return o},propTypesLabel:function(){return a},propTypesIcon:function(){return s},propTypesRipple:function(){return l},propTypesClassName:function(){return u},propTypesDisabled:function(){return d},propTypesObject:function(){return c}});var r=i(Kt),n=Un;function i(h){return h&&h.__esModule?h:{default:h}}var o=n.propTypesColors,a=r.default.node,s=r.default.node,l=r.default.bool,u=r.default.string,d=r.default.bool,c=r.default.instanceOf(Object)})(V0);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{checkbox:function(){return o},default:function(){return a}});var r=i(Yue),n=V0;function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{color:"gray",label:void 0,icon:void 0,ripple:!0,className:"",disabled:!1,containerProps:void 0,labelProps:void 0,iconProps:void 0},valid:{colors:n.propTypesColor},styles:{base:{root:{display:"inline-flex",alignItems:"items-center"},container:{position:"relative",display:"flex",alignItems:"items-center",cursor:"cursor-pointer",p:"p-3",borderRadius:"rounded-full"},input:{peer:"peer",position:"relative",appearance:"appearance-none",width:"w-5",height:"h-5",borderWidth:"border",borderRadius:"rounded-md",borderColor:"border-blue-gray-200",cursor:"cursor-pointer",transition:"transition-all",before:{content:"before:content['']",display:"before:block",bg:"before:bg-blue-gray-500",width:"before:w-12",height:"before:h-12",borderRadius:"before:rounded-full",position:"before:absolute",top:"before:top-2/4",left:"before:left-2/4",transform:"before:-translate-y-2/4 before:-translate-x-2/4",opacity:"before:opacity-0 hover:before:opacity-10",transition:"before:transition-opacity"}},label:{color:"text-gray-700",fontWeight:"font-light",userSelect:"select-none",cursor:"cursor-pointer",mt:"mt-px"},icon:{color:"text-white",position:"absolute",top:"top-2/4",left:"left-2/4",translate:"-translate-y-2/4 -translate-x-2/4",pointerEvents:"pointer-events-none",opacity:"opacity-0 peer-checked:opacity-100",transition:"transition-opacity"},disabled:{opacity:"opacity-50",pointerEvents:"pointer-events-none"}},colors:r.default}},a=o})(Xue);var Kue={},Jue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{backgroud:"bg-blue-gray-500",color:"text-white"},gray:{backgroud:"bg-gray-900",color:"text-white"},brown:{backgroud:"bg-brown-500",color:"text-white"},"deep-orange":{backgroud:"bg-deep-orange-500",color:"text-white"},orange:{backgroud:"bg-orange-500",color:"text-white"},amber:{backgroud:"bg-amber-500",color:"text-black"},yellow:{backgroud:"bg-yellow-500",color:"text-black"},lime:{backgroud:"bg-lime-500",color:"text-black"},"light-green":{backgroud:"bg-light-green-500",color:"text-white"},green:{backgroud:"bg-green-500",color:"text-white"},teal:{backgroud:"bg-teal-500",color:"text-white"},cyan:{backgroud:"bg-cyan-500",color:"text-white"},"light-blue":{backgroud:"bg-light-blue-500",color:"text-white"},blue:{backgroud:"bg-blue-500",color:"text-white"},indigo:{backgroud:"bg-indigo-500",color:"text-white"},"deep-purple":{backgroud:"bg-deep-purple-500",color:"text-white"},purple:{backgroud:"bg-purple-500",color:"text-white"},pink:{backgroud:"bg-pink-500",color:"text-white"},red:{backgroud:"bg-red-500",color:"text-white"}},r=t})(Jue);var Que={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{backgroud:"bg-gradient-to-tr from-blue-gray-600 to-blue-gray-400",color:"text-white"},gray:{backgroud:"bg-gradient-to-tr from-gray-900 to-gray-800",color:"text-white"},brown:{backgroud:"bg-gradient-to-tr from-brown-600 to-brown-400",color:"text-white"},"deep-orange":{backgroud:"bg-gradient-to-tr from-deep-orange-600 to-deep-orange-400",color:"text-white"},orange:{backgroud:"bg-gradient-to-tr from-orange-600 to-orange-400",color:"text-white"},amber:{backgroud:"bg-gradient-to-tr from-amber-600 to-amber-400",color:"text-black"},yellow:{backgroud:"bg-gradient-to-tr from-yellow-600 to-yellow-400",color:"text-black"},lime:{backgroud:"bg-gradient-to-tr from-lime-600 to-lime-400",color:"text-black"},"light-green":{backgroud:"bg-gradient-to-tr from-light-green-600 to-light-green-400",color:"text-white"},green:{backgroud:"bg-gradient-to-tr from-green-600 to-green-400",color:"text-white"},teal:{backgroud:"bg-gradient-to-tr from-teal-600 to-teal-400",color:"text-white"},cyan:{backgroud:"bg-gradient-to-tr from-cyan-600 to-cyan-400",color:"text-white"},"light-blue":{backgroud:"bg-gradient-to-tr from-light-blue-600 to-light-blue-400",color:"text-white"},blue:{backgroud:"bg-gradient-to-tr from-blue-600 to-blue-400",color:"text-white"},indigo:{backgroud:"bg-gradient-to-tr from-indigo-600 to-indigo-400",color:"text-white"},"deep-purple":{backgroud:"bg-gradient-to-tr from-deep-purple-600 to-deep-purple-400",color:"text-white"},purple:{backgroud:"bg-gradient-to-tr from-purple-600 to-purple-400",color:"text-white"},pink:{backgroud:"bg-gradient-to-tr from-pink-600 to-pink-400",color:"text-white"},red:{backgroud:"bg-gradient-to-tr from-red-600 to-red-400",color:"text-white"}},r=t})(Que);var Zue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{border:"border border-blue-gray-500",color:"text-blue-gray-700"},gray:{border:"border border-gray-900",color:"text-gray-700"},brown:{border:"border border-brown-500",color:"text-brown-700"},"deep-orange":{border:"border border-deep-orange-500",color:"text-deep-orange-700"},orange:{border:"border border-orange-500",color:"text-orange-700"},amber:{border:"border border-amber-500",color:"text-amber-700"},yellow:{border:"border border-yellow-500",color:"text-yellow-700"},lime:{border:"border border-lime-500",color:"text-lime-700"},"light-green":{border:"border border-light-green-500",color:"text-light-green-700"},green:{border:"border border-green-500",color:"text-green-700"},teal:{border:"border border-teal-500",color:"text-teal-700"},cyan:{border:"border border-cyan-500",color:"text-cyan-700"},"light-blue":{border:"border border-light-blue-500",color:"text-light-blue-700"},blue:{border:"border border-blue-500",color:"text-blue-700"},indigo:{border:"border border-indigo-500",color:"text-indigo-700"},"deep-purple":{border:"border border-deep-purple-500",color:"text-deep-purple-700"},purple:{border:"border border-purple-500",color:"text-purple-700"},pink:{border:"border border-pink-500",color:"text-pink-700"},red:{border:"border border-red-500",color:"text-red-700"}},r=t})(Zue);var $ue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{backgroud:"bg-blue-gray-500/20",color:"text-blue-gray-900"},gray:{backgroud:"bg-gray-900/10",color:"text-gray-900"},brown:{backgroud:"bg-brown-500/20",color:"text-brown-900"},"deep-orange":{backgroud:"bg-deep-orange-500/20",color:"text-deep-orange-900"},orange:{backgroud:"bg-orange-500/20",color:"text-orange-900"},amber:{backgroud:"bg-amber-500/20",color:"text-amber-900"},yellow:{backgroud:"bg-yellow-500/20",color:"text-yellow-900"},lime:{backgroud:"bg-lime-500/20",color:"text-lime-900"},"light-green":{backgroud:"bg-light-green-500/20",color:"text-light-green-900"},green:{backgroud:"bg-green-500/20",color:"text-green-900"},teal:{backgroud:"bg-teal-500/20",color:"text-teal-900"},cyan:{backgroud:"bg-cyan-500/20",color:"text-cyan-900"},"light-blue":{backgroud:"bg-light-blue-500/20",color:"text-light-blue-900"},blue:{backgroud:"bg-blue-500/20",color:"text-blue-900"},indigo:{backgroud:"bg-indigo-500/20",color:"text-indigo-900"},"deep-purple":{backgroud:"bg-deep-purple-500/20",color:"text-deep-purple-900"},purple:{backgroud:"bg-purple-500/20",color:"text-purple-900"},pink:{backgroud:"bg-pink-500/20",color:"text-pink-900"},red:{backgroud:"bg-red-500/20",color:"text-red-900"}},r=t})($ue);var UH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(y,m){for(var p in m)Object.defineProperty(y,p,{enumerable:!0,get:m[p]})}t(e,{propTypesVariant:function(){return o},propTypesSize:function(){return a},propTypesColor:function(){return s},propTypesIcon:function(){return l},propTypesOpen:function(){return u},propTypesOnClose:function(){return d},propTypesAction:function(){return c},propTypesAnimate:function(){return h},propTypesClassName:function(){return f},propTypesValue:function(){return g}});var r=i(Kt),n=Un;function i(y){return y&&y.__esModule?y:{default:y}}var o=["filled","gradient","outlined","ghost"],a=["sm","md","lg"],s=n.propTypesColors,l=r.default.node,u=r.default.bool,d=r.default.func,c=r.default.node,h=n.propTypesAnimation,f=r.default.string,g=r.default.node.isRequired})(UH);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(d,c){for(var h in c)Object.defineProperty(d,h,{enumerable:!0,get:c[h]})}t(e,{chip:function(){return l},default:function(){return u}});var r=s(Jue),n=s(Que),i=s(Zue),o=s($ue),a=UH;function s(d){return d&&d.__esModule?d:{default:d}}var l={defaultProps:{variant:"filled",size:"md",color:"gray",icon:void 0,open:!0,onClose:void 0,action:void 0,animate:{unmount:{},mount:{}},className:""},valid:{variants:a.propTypesVariant,sizes:a.propTypesSize,colors:a.propTypesColor},styles:{base:{chip:{position:"relative",display:"grid",placeItems:"items-center",fontFamily:"font-sans",fontWeight:"font-bold",textTransform:"uppercase",lineHeight:"leading-none",whiteSpace:"whitespace-nowrap",userSelect:"select-none"},action:{position:"!absolute",top:"top-2/4",right:"right-1",translate:"-translate-y-2/4",mx:"mx-px",rounded:"rounded-md"},icon:{position:"absolute",top:"top-2/4",translate:"-translate-y-2/4"}},sizes:{sm:{chip:{py:"py-1",px:"px-2",fontSize:"text-xs",borderRadius:"rounded-md"},action:{width:"w-4",height:"h-4"},icon:{width:"w-4",height:"h-4",left:"left-1"}},md:{chip:{py:"py-1.5",px:"px-3",fontSize:"text-xs",borderRadius:"rounded-lg"},action:{width:"w-5",height:"h-5"},icon:{width:"w-5",height:"h-5",left:"left-1.5"}},lg:{chip:{py:"py-2",px:"px-4",fontSize:"text-xs",borderRadius:"rounded-lg"},action:{width:"w-6",height:"h-6"},icon:{width:"w-6",height:"h-6",left:"left-1.5"}}},variants:{filled:r.default,gradient:n.default,outlined:i.default,ghost:o.default}}},u=l})(Kue);var ece={},P1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{propTypesOpen:function(){return o},propTypesHandler:function(){return a},propTypesSize:function(){return s},propTypesDismiss:function(){return l},propTypesAnimate:function(){return u},propTypesDivider:function(){return d},propTypesClassName:function(){return c},propTypesChildren:function(){return h}});var r=i(Kt),n=Un;function i(f){return f&&f.__esModule?f:{default:f}}var o=r.default.bool.isRequired,a=r.default.func,s=["xs","sm","md","lg","xl","xxl"],l=n.propTypesDismissType,u=n.propTypesAnimation,d=r.default.bool,c=r.default.string,h=r.default.node.isRequired})(P1);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,a){for(var s in a)Object.defineProperty(o,s,{enumerable:!0,get:a[s]})}t(e,{dialog:function(){return n},default:function(){return i}});var r=P1,n={defaultProps:{size:"md",dismiss:{},animate:{unmount:{},mount:{}},className:""},valid:{sizes:r.propTypesSize},styles:{base:{backdrop:{display:"grid",placeItems:"place-items-center",position:"fixed",top:0,left:0,width:"w-screen",height:"h-screen",backgroundColor:"bg-black",backgroundOpacity:"bg-opacity-60",backdropFilter:"backdrop-blur-sm"},container:{position:"relative",bg:"bg-white",m:"m-4",borderRadius:"rounded-lg",boxShadow:"shadow-2xl",color:"text-blue-gray-500",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-base",fontWeight:"font-light",lineHeight:"leading-relaxed"}},sizes:{xs:{width:"w-full md:w-3/5 lg:w-2/5 2xl:w-1/4",minWidth:"min-w-[80%] md:min-w-[60%] lg:min-w-[40%] 2xl:min-w-[25%]",maxWidth:"max-w-[80%] md:max-w-[60%] lg:max-w-[40%] 2xl:max-w-[25%]"},sm:{width:"w-full md:w-2/3 lg:w-2/4 2xl:w-1/3",minWidth:"min-w-[80%] md:min-w-[66.666667%] lg:min-w-[50%] 2xl:min-w-[33.333333%]",maxWidth:"max-w-[80%] md:max-w-[66.666667%] lg:max-w-[50%] 2xl:max-w-[33.333333%]"},md:{width:"w-full md:w-3/4 lg:w-3/5 2xl:w-2/5",minWidth:"min-w-[90%] md:min-w-[75%] lg:min-w-[60%] 2xl:min-w-[40%]",maxWidth:"max-w-[90%] md:max-w-[75%] lg:max-w-[60%] 2xl:max-w-[40%]"},lg:{width:"w-full md:w-5/6 lg:w-3/4 2xl:w-3/5",minWidth:"min-w-[90%] md:min-w-[83.333333%] lg:min-w-[75%] 2xl:min-w-[60%]",maxWidth:"max-w-[90%] md:max-w-[83.333333%] lg:max-w-[75%] 2xl:max-w-[60%]"},xl:{width:"w-full md:w-5/6 2xl:w-3/4",minWidth:"min-w-[95%] md:min-w-[83.333333%] 2xl:min-w-[75%]",maxWidth:"max-w-[95%] md:max-w-[83.333333%] 2xl:max-w-[75%]"},xxl:{display:"flex",flexDirection:"flex-col",width:"w-screen",minWidth:"min-w-[100vw]",maxWidth:"max-w-[100vw]",height:"h-screen",minHeight:"min-h-[100vh]",maxHeight:"max-h-[100vh]",m:"m-0",borderRadius:"rounded-none"}}}},i=n})(ece);var tce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{dialogBody:function(){return r},default:function(){return n}});var r={defaultProps:{className:"",divider:!1},styles:{base:{initial:{position:"relative",p:"p-4",color:"text-blue-gray-500",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-base",fontWeight:"font-light",lineHeight:"leading-relaxed"},divider:{borderTop:"border-t",borderTopColor:"border-t-blue-gray-100",borderBottom:"border-b",borderBottomColor:"border-b-blue-gray-100"}}}},n=r})(tce);var rce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{dialogFooter:function(){return r},default:function(){return n}});var r={defaultProps:{className:""},styles:{base:{display:"flex",alignItems:"items-center",justifyContent:"justify-end",flexShrink:"shrink-0",flexWrap:"flex-wrap",p:"p-4",color:"text-blue-gray-500"}}},n=r})(rce);var nce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{dialogHeader:function(){return r},default:function(){return n}});var r={defaultProps:{className:""},styles:{base:{display:"flex",alignItems:"items-center",flexShrink:"shrink-0",p:"p-4",color:"text-blue-gray-900",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-2xl",fontWeight:"font-semibold",lineHeight:"leading-snug"}}},n=r})(nce);var ice={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(d,c){for(var h in c)Object.defineProperty(d,h,{enumerable:!0,get:c[h]})}t(e,{iconButton:function(){return l},default:function(){return u}});var r=s(LH),n=s(BH),i=s(NH),o=s(kH),a=z0;function s(d){return d&&d.__esModule?d:{default:d}}var l={defaultProps:{variant:"filled",size:"md",color:"gray",fullWidth:!1,ripple:!0,className:""},valid:{variants:a.propTypesVariant,sizes:a.propTypesSize,colors:a.propTypesColor},styles:{base:{position:"relative",verticalAlign:"align-middle",userSelect:"select-none",fontFamily:"font-sans",fontWeight:"font-medium",textAlign:"text-center",textTransform:"uppercase",transition:"transition-all",disabled:"disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none"},sizes:{sm:{width:"w-8",maxWidth:"max-w-[32px]",height:"h-8",maxHeight:"max-h-[32px]",borderRadius:"rounded-lg",fontSize:"text-xs"},md:{width:"w-10",maxWidth:"max-w-[40px]",height:"h-10",maxHeight:"max-h-[40px]",borderRadius:"rounded-lg",fontSize:"text-xs"},lg:{width:"w-12",maxWidth:"max-w-[48px]",height:"h-12",maxHeight:"max-h-[48px]",borderRadius:"rounded-lg",fontSize:"text-sm"}},variants:{filled:r.default,gradient:n.default,outlined:i.default,text:o.default}}},u=l})(ice);var oce={},ace={},sce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-1.5",fontSize:"peer-placeholder-shown:text-sm",floated:{fontSize:"text-[11px] peer-focus:text-[11px]"},before:{content:"before:content[' ']",display:"before:block",boxSizing:"before:box-border",width:"before:w-2.5",height:"before:h-1.5",mt:"before:mt-[6.5px]",mr:"before:mr-1",borderColor:"peer-placeholder-shown:before:border-transparent",borderRadius:"before:rounded-tl-md",floated:{bt:"before:border-t peer-focus:before:border-t-2",bl:"before:border-l peer-focus:before:border-l-2"},pointerEvents:"before:pointer-events-none",transition:"before:transition-all",disabled:"peer-disabled:before:border-transparent"},after:{content:"after:content[' ']",display:"after:block",flexGrow:"after:flex-grow",boxSizing:"after:box-border",width:"after:w-2.5",height:"after:h-1.5",mt:"after:mt-[6.5px]",ml:"after:ml-1",borderColor:"peer-placeholder-shown:after:border-transparent",borderRadius:"after:rounded-tr-md",floated:{bt:"after:border-t peer-focus:after:border-t-2",br:"after:border-r peer-focus:after:border-r-2"},pointerEvents:"after:pointer-events-none",transition:"after:transition-all",disabled:"peer-disabled:after:border-transparent"}},r=t})(sce);var lce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={black:{color:"text-black",borderColor:"border-black",borderColorFocused:"focus:border-black"},white:{color:"!text-white",borderColor:"border-white",borderColorFocused:"focus:border-white"},"blue-gray":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-gray-500"},gray:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-gray-900"},brown:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-brown-500"},"deep-orange":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-orange-500"},orange:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-orange-500"},amber:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-amber-500"},yellow:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-yellow-500"},lime:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-lime-500"},"light-green":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-green-500"},green:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-green-500"},teal:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-teal-500"},cyan:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-cyan-500"},"light-blue":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-blue-500"},blue:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-500"},indigo:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-indigo-500"},"deep-purple":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-purple-500"},purple:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-purple-500"},pink:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-pink-500"},red:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-red-500"}},r=t})(lce);var uce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={black:{color:"!text-black peer-focus:text-black",before:"before:border-black peer-focus:before:!border-black",after:"after:border-black peer-focus:after:!border-black"},white:{color:"!text-white peer-focus:text-white",before:"before:border-white peer-focus:before:!border-white",after:"after:border-white peer-focus:after:!border-white"},"blue-gray":{color:"text-blue-gray-400 peer-focus:text-blue-gray-500",before:"before:border-blue-gray-200 peer-focus:before:!border-blue-gray-500",after:"after:border-blue-gray-200 peer-focus:after:!border-blue-gray-500"},gray:{color:"text-gray-500 peer-focus:text-gray-900",before:"before:border-blue-gray-200 peer-focus:before:!border-gray-900",after:"after:border-blue-gray-200 peer-focus:after:!border-gray-900"},brown:{color:"text-blue-gray-400 peer-focus:text-brown-500",before:"before:border-blue-gray-200 peer-focus:before:!border-brown-500",after:"after:border-blue-gray-200 peer-focus:after:!border-brown-500"},"deep-orange":{color:"text-blue-gray-400 peer-focus:text-deep-orange-500",before:"before:border-blue-gray-200 peer-focus:before:!border-deep-orange-500",after:"after:border-blue-gray-200 peer-focus:after:!border-deep-orange-500"},orange:{color:"text-blue-gray-400 peer-focus:text-orange-500",before:"before:border-blue-gray-200 peer-focus:before:!border-orange-500",after:"after:border-blue-gray-200 peer-focus:after:!border-orange-500"},amber:{color:"text-blue-gray-400 peer-focus:text-amber-500",before:"before:border-blue-gray-200 peer-focus:before:!border-amber-500",after:"after:border-blue-gray-200 peer-focus:after:!border-amber-500"},yellow:{color:"text-blue-gray-400 peer-focus:text-yellow-500",before:"before:border-blue-gray-200 peer-focus:before:!border-yellow-500",after:"after:border-blue-gray-200 peer-focus:after:!border-yellow-500"},lime:{color:"text-blue-gray-400 peer-focus:text-lime-500",before:"before:border-blue-gray-200 peer-focus:before:!border-lime-500",after:"after:border-blue-gray-200 peer-focus:after:!border-lime-500"},"light-green":{color:"text-blue-gray-400 peer-focus:text-light-green-500",before:"before:border-blue-gray-200 peer-focus:before:!border-light-green-500",after:"after:border-blue-gray-200 peer-focus:after:!border-light-green-500"},green:{color:"text-blue-gray-400 peer-focus:text-green-500",before:"before:border-blue-gray-200 peer-focus:before:!border-green-500",after:"after:border-blue-gray-200 peer-focus:after:!border-green-500"},teal:{color:"text-blue-gray-400 peer-focus:text-teal-500",before:"before:border-blue-gray-200 peer-focus:before:!border-teal-500",after:"after:border-blue-gray-200 peer-focus:after:!border-teal-500"},cyan:{color:"text-blue-gray-400 peer-focus:text-cyan-500",before:"before:border-blue-gray-200 peer-focus:before:!border-cyan-500",after:"after:border-blue-gray-200 peer-focus:after:!border-cyan-500"},"light-blue":{color:"text-blue-gray-400 peer-focus:text-light-blue-500",before:"before:border-blue-gray-200 peer-focus:before:!border-light-blue-500",after:"after:border-blue-gray-200 peer-focus:after:!border-light-blue-500"},blue:{color:"text-blue-gray-400 peer-focus:text-blue-500",before:"before:border-blue-gray-200 peer-focus:before:!border-blue-500",after:"after:border-blue-gray-200 peer-focus:after:!border-blue-500"},indigo:{color:"text-blue-gray-400 peer-focus:text-indigo-500",before:"before:border-blue-gray-200 peer-focus:before:!border-indigo-500",after:"after:border-blue-gray-200 peer-focus:after:!border-indigo-500"},"deep-purple":{color:"text-blue-gray-400 peer-focus:text-deep-purple-500",before:"before:border-blue-gray-200 peer-focus:before:!border-deep-purple-500",after:"after:border-blue-gray-200 peer-focus:after:!border-deep-purple-500"},purple:{color:"text-blue-gray-400 peer-focus:text-purple-500",before:"before:border-blue-gray-200 peer-focus:before:!border-purple-500",after:"after:border-blue-gray-200 peer-focus:after:!border-purple-500"},pink:{color:"text-blue-gray-400 peer-focus:text-pink-500",before:"before:border-blue-gray-200 peer-focus:before:!border-pink-500",after:"after:border-blue-gray-200 peer-focus:after:!border-pink-500"},red:{color:"text-blue-gray-400 peer-focus:text-red-500",before:"before:border-blue-gray-200 peer-focus:before:!border-red-500",after:"after:border-blue-gray-200 peer-focus:after:!border-red-500"}},r=t})(uce);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(sce),r=i(lce),n=i(uce);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{input:{borderWidth:"placeholder-shown:border",borderColor:"placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200",floated:{borderWidth:"border focus:border-2",borderColor:"border-t-transparent focus:border-t-transparent"}},inputWithIcon:{pr:"!pr-9"},icon:{top:"top-2/4",right:"right-3",transform:"-translate-y-2/4"},label:t.default},sizes:{md:{container:{height:"h-10"},input:{fontSize:"text-sm",px:"px-3",py:"py-2.5",borderRadius:"rounded-[7px]"},label:{lineHeight:"peer-placeholder-shown:leading-[3.75]"},icon:{width:"w-5",height:"h-5"}},lg:{container:{height:"h-11"},input:{fontSize:"text-sm",px:"px-3",py:"py-3",borderRadius:"rounded-md"},label:{lineHeight:"peer-placeholder-shown:leading-[4.1]"},icon:{width:"w-6",height:"h-6"}}},colors:{input:r.default,label:n.default},error:{input:{borderColor:"border-red-500 placeholder-shown:border-t-red-500 placeholder-shown:border-red-500",borderColorFocused:"focus:border-red-500"},label:{color:"text-red-500 peer-focus:text-red-500 peer-placeholder-shown:text-red-500",before:"before:border-red-500 peer-focus:before:border-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},success:{input:{borderColor:"border-green-500 placeholder-shown:border-t-green-500 placeholder-shown:border-green-500",borderColorFocused:"focus:border-green-500"},label:{color:"text-green-500 peer-focus:text-green-500 peer-placeholder-shown:text-green-500",before:"before:border-green-500 peer-focus:before:border-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"}},shrink:{input:{borderTop:"!border-t-transparent"},label:{fontSize:"!text-[11px]",lineHeight:"!leading-tight",borderColor:"before:!border-blue-gray-200 after:!border-blue-gray-200"}}},a=o})(ace);var cce={},dce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-1.5",fontSize:"peer-placeholder-shown:text-sm",floated:{fontSize:"text-[11px] peer-focus:text-[11px]"},after:{content:"after:content['']",display:"after:block",width:"after:w-full",position:"after:absolute",bottom:"after:-bottom-1.5",left:"left-0",borderWidth:"after:border-b-2",scale:"after:scale-x-0",floated:{scale:"peer-focus:after:scale-x-100"},transition:"after:transition-transform after:duration-300"}},r=t})(dce);var hce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={black:{color:"text-black",borderColor:"border-black",borderColorFocused:"focus:border-black"},white:{color:"!text-white",borderColor:"border-white",borderColorFocused:"focus:border-white"},"blue-gray":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-gray-900"},gray:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-gray-500"},brown:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-brown-500"},"deep-orange":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-orange-500"},orange:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-orange-500"},amber:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-amber-500"},yellow:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-yellow-500"},lime:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-lime-500"},"light-green":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-green-500"},green:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-green-500"},teal:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-teal-500"},cyan:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-cyan-500"},"light-blue":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-blue-500"},blue:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-500"},indigo:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-indigo-500"},"deep-purple":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-purple-500"},purple:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-purple-500"},pink:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-pink-500"},red:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-red-500"}},r=t})(hce);var fce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={black:{color:"!text-black peer-focus:text-black",after:"after:border-black peer-focus:after:border-black"},white:{color:"!text-white peer-focus:text-white",after:"after:border-white peer-focus:after:border-white"},"blue-gray":{color:"text-blue-gray-500 peer-focus:text-blue-gray-500",after:"after:border-blue-gray-500 peer-focus:after:border-blue-gray-500"},gray:{color:"text-gray-500 peer-focus:text-gray-900",after:"after:border-gray-500 peer-focus:after:border-gray-900"},brown:{color:"text-blue-gray-500 peer-focus:text-brown-500",after:"after:border-brown-500 peer-focus:after:border-brown-500"},"deep-orange":{color:"text-blue-gray-500 peer-focus:text-deep-orange-500",after:"after:border-deep-orange-500 peer-focus:after:border-deep-orange-500"},orange:{color:"text-blue-gray-500 peer-focus:text-orange-500",after:"after:border-orange-500 peer-focus:after:border-orange-500"},amber:{color:"text-blue-gray-500 peer-focus:text-amber-500",after:"after:border-amber-500 peer-focus:after:border-amber-500"},yellow:{color:"text-blue-gray-500 peer-focus:text-yellow-500",after:"after:border-yellow-500 peer-focus:after:border-yellow-500"},lime:{color:"text-blue-gray-500 peer-focus:text-lime-500",after:"after:border-lime-500 peer-focus:after:border-lime-500"},"light-green":{color:"text-blue-gray-500 peer-focus:text-light-green-500",after:"after:border-light-green-500 peer-focus:after:border-light-green-500"},green:{color:"text-blue-gray-500 peer-focus:text-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"},teal:{color:"text-blue-gray-500 peer-focus:text-teal-500",after:"after:border-teal-500 peer-focus:after:border-teal-500"},cyan:{color:"text-blue-gray-500 peer-focus:text-cyan-500",after:"after:border-cyan-500 peer-focus:after:border-cyan-500"},"light-blue":{color:"text-blue-gray-500 peer-focus:text-light-blue-500",after:"after:border-light-blue-500 peer-focus:after:border-light-blue-500"},blue:{color:"text-blue-gray-500 peer-focus:text-blue-500",after:"after:border-blue-500 peer-focus:after:border-blue-500"},indigo:{color:"text-blue-gray-500 peer-focus:text-indigo-500",after:"after:border-indigo-500 peer-focus:after:border-indigo-500"},"deep-purple":{color:"text-blue-gray-500 peer-focus:text-deep-purple-500",after:"after:border-deep-purple-500 peer-focus:after:border-deep-purple-500"},purple:{color:"text-blue-gray-500 peer-focus:text-purple-500",after:"after:border-purple-500 peer-focus:after:border-purple-500"},pink:{color:"text-blue-gray-500 peer-focus:text-pink-500",after:"after:border-pink-500 peer-focus:after:border-pink-500"},red:{color:"text-blue-gray-500 peer-focus:text-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},r=t})(fce);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(dce),r=i(hce),n=i(fce);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{input:{borderWidth:"border-b",borderColor:"placeholder-shown:border-blue-gray-200"},inputWithIcon:{pr:"!pr-7"},icon:{top:"top-2/4",right:"right-0",transform:"-translate-y-1/4"},label:t.default},sizes:{md:{container:{height:"h-11"},input:{fontSize:"text-sm",pt:"pt-4",pb:"pb-1.5"},label:{lineHeight:"peer-placeholder-shown:leading-[4.25]"},icon:{width:"w-5",height:"h-5"}},lg:{container:{height:"h-12"},input:{fontSize:"text-sm",px:"px-px",pt:"pt-5",pb:"pb-2"},label:{lineHeight:"peer-placeholder-shown:leading-[4.875]"},icon:{width:"w-6",height:"h-6"}}},colors:{input:r.default,label:n.default},error:{input:{borderColor:"border-red-500 placeholder-shown:border-red-500",borderColorFocused:"focus:border-red-500"},label:{color:"text-red-500 peer-focus:text-red-500 peer-placeholder-shown:text-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},success:{input:{borderColor:"border-green-500 placeholder-shown:border-green-500",borderColorFocused:"focus:border-green-500"},label:{color:"text-green-500 peer-focus:text-green-500 peer-placeholder-shown:text-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"}},shrink:{input:{},label:{fontSize:"!text-[11px]",lineHeight:"!leading-tight"}}},a=o})(cce);var pce={},mce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-2.5",fontSize:"text-sm peer-focus:text-sm",after:{content:"after:content[' ']",display:"after:block",width:"after:w-full",position:"after:absolute",bottom:"after:-bottom-2.5",left:"left-0",borderWidth:"after:border-b-2",scale:"after:scale-x-0",floated:{scale:"peer-focus:after:scale-x-100"},transition:"after:transition-transform after:duration-300"}},r=t})(mce);var gce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={black:{color:"text-black",borderColor:"border-black",borderColorFocused:"focus:border-black"},white:{color:"!text-white",borderColor:"border-white",borderColorFocused:"focus:border-white"},"blue-gray":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-gray-500"},gray:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-gray-900"},brown:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-brown-500"},"deep-orange":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-orange-500"},orange:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-orange-500"},amber:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-amber-500"},yellow:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-yellow-500"},lime:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-lime-500"},"light-green":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-green-500"},green:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-green-500"},teal:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-teal-500"},cyan:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-cyan-500"},"light-blue":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-blue-500"},blue:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-500"},indigo:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-indigo-500"},"deep-purple":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-purple-500"},purple:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-purple-500"},pink:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-pink-500"},red:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-red-500"}},r=t})(gce);var vce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={black:{color:"!text-black peer-focus:black",after:"after:border-black peer-focus:after:border-black"},white:{color:"!text-white peer-focus:white",after:"after:border-white peer-focus:after:border-white"},"blue-gray":{color:"text-blue-gray-500 peer-focus:text-blue-gray-500",after:"after:border-blue-gray-500 peer-focus:after:border-blue-gray-500"},gray:{color:"text-gray-500 peer-focus:text-gray-900",after:"after:border-gray-500 peer-focus:after:border-gray-900"},brown:{color:"text-blue-gray-500 peer-focus:text-brown-500",after:"after:border-brown-500 peer-focus:after:border-brown-500"},"deep-orange":{color:"text-blue-gray-500 peer-focus:text-deep-orange-500",after:"after:border-deep-orange-500 peer-focus:after:border-deep-orange-500"},orange:{color:"text-blue-gray-500 peer-focus:text-orange-500",after:"after:border-orange-500 peer-focus:after:border-orange-500"},amber:{color:"text-blue-gray-500 peer-focus:text-amber-500",after:"after:border-amber-500 peer-focus:after:border-amber-500"},yellow:{color:"text-blue-gray-500 peer-focus:text-yellow-500",after:"after:border-yellow-500 peer-focus:after:border-yellow-500"},lime:{color:"text-blue-gray-500 peer-focus:text-lime-500",after:"after:border-lime-500 peer-focus:after:border-lime-500"},"light-green":{color:"text-blue-gray-500 peer-focus:text-light-green-500",after:"after:border-light-green-500 peer-focus:after:border-light-green-500"},green:{color:"text-blue-gray-500 peer-focus:text-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"},teal:{color:"text-blue-gray-500 peer-focus:text-teal-500",after:"after:border-teal-500 peer-focus:after:border-teal-500"},cyan:{color:"text-blue-gray-500 peer-focus:text-cyan-500",after:"after:border-cyan-500 peer-focus:after:border-cyan-500"},"light-blue":{color:"text-blue-gray-500 peer-focus:text-light-blue-500",after:"after:border-light-blue-500 peer-focus:after:border-light-blue-500"},blue:{color:"text-blue-gray-500 peer-focus:text-blue-500",after:"after:border-blue-500 peer-focus:after:border-blue-500"},indigo:{color:"text-blue-gray-500 peer-focus:text-indigo-500",after:"after:border-indigo-500 peer-focus:after:border-indigo-500"},"deep-purple":{color:"text-blue-gray-500 peer-focus:text-deep-purple-500",after:"after:border-deep-purple-500 peer-focus:after:border-deep-purple-500"},purple:{color:"text-blue-gray-500 peer-focus:text-purple-500",after:"after:border-purple-500 peer-focus:after:border-purple-500"},pink:{color:"text-blue-gray-500 peer-focus:text-pink-500",after:"after:border-pink-500 peer-focus:after:border-pink-500"},red:{color:"text-blue-gray-500 peer-focus:text-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},r=t})(vce);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(mce),r=i(gce),n=i(vce);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{input:{borderWidth:"border-b",borderColor:"placeholder-shown:border-blue-gray-200"},inputWithIcon:{pr:"!pr-7"},icon:{top:"top-2/4",right:"right-0",transform:"-translate-y-1/4"},label:t.default},sizes:{md:{container:{height:"h-11"},input:{fontSize:"text-sm",pt:"pt-4",pb:"pb-1.5"},label:{lineHeight:"peer-placeholder-shown:leading-tight"},icon:{width:"w-5",height:"h-5"}},lg:{container:{height:"h-12"},input:{fontSize:"text-sm",px:"px-px",pt:"pt-5",pb:"pb-2"},label:{lineHeight:"peer-placeholder-shown:leading-tight"},icon:{width:"w-6",height:"h-6"}}},colors:{input:r.default,label:n.default},error:{input:{borderColor:"border-red-500 placeholder-shown:border-red-500",borderColorFocused:"focus:border-red-500"},label:{color:"text-red-500 peer-focus:text-red-500 peer-placeholder-shown:text-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},success:{input:{borderColor:"border-green-500 placeholder-shown:border-green-500",borderColorFocused:"focus:border-green-500"},label:{color:"text-green-500 peer-focus:text-green-500 peer-placeholder-shown:text-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"}},shrink:{input:{},label:{}}},a=o})(pce);var GM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(M,T){for(var C in T)Object.defineProperty(M,C,{enumerable:!0,get:T[C]})}t(e,{propTypesVariant:function(){return c},propTypesSize:function(){return h},propTypesColor:function(){return f},propTypesLabel:function(){return g},propTypesError:function(){return y},propTypesSuccess:function(){return m},propTypesIcon:function(){return p},propTypesResize:function(){return v},propTypesLabelProps:function(){return b},propTypesContainerProps:function(){return x},propTypesShrink:function(){return _},propTypesClassName:function(){return A}});var r=a(Kt),n=Un;function i(M,T){(T==null||T>M.length)&&(T=M.length);for(var C=0,E=new Array(T);C<T;C++)E[C]=M[C];return E}function o(M){if(Array.isArray(M))return i(M)}function a(M){return M&&M.__esModule?M:{default:M}}function s(M){if(typeof Symbol<"u"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(M){return o(M)||s(M)||d(M)||l()}function d(M,T){if(M){if(typeof M=="string")return i(M,T);var C=Object.prototype.toString.call(M).slice(8,-1);if(C==="Object"&&M.constructor&&(C=M.constructor.name),C==="Map"||C==="Set")return Array.from(C);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return i(M,T)}}var c=["standard","outlined","static"],h=["md","lg"],f=["black","white"].concat(u(n.propTypesColors)),g=r.default.string,y=r.default.bool,m=r.default.bool,p=r.default.node,v=r.default.bool,b=r.default.instanceOf(Object),x=r.default.instanceOf(Object),_=r.default.bool,A=r.default.string})(GM);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){for(var c in d)Object.defineProperty(u,c,{enumerable:!0,get:d[c]})}t(e,{input:function(){return s},default:function(){return l}});var r=a(ace),n=a(cce),i=a(pce),o=GM;function a(u){return u&&u.__esModule?u:{default:u}}var s={defaultProps:{variant:"outlined",size:"md",color:"gray",label:"",error:!1,success:!1,icon:void 0,labelProps:void 0,containerProps:void 0,shrink:!1,className:""},valid:{variants:o.propTypesVariant,sizes:o.propTypesSize,colors:o.propTypesColor},styles:{base:{container:{position:"relative",width:"w-full",minWidth:"min-w-[200px]"},input:{peer:"peer",width:"w-full",height:"h-full",bg:"bg-transparent",color:"text-blue-gray-700",fontFamily:"font-sans",fontWeight:"font-normal",outline:"outline outline-0 focus:outline-0",disabled:"disabled:bg-blue-gray-50 disabled:border-0",transition:"transition-all"},label:{display:"flex",width:"w-full",height:"h-full",userSelect:"select-none",pointerEvents:"pointer-events-none",position:"absolute",left:"left-0",fontWeight:"font-normal",overflow:"!overflow-visible",textOverflow:"truncate",color:"peer-placeholder-shown:text-blue-gray-500",lineHeight:"leading-tight peer-focus:leading-tight",disabled:"peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500",transition:"transition-all"},icon:{display:"grid",placeItems:"place-items-center",position:"absolute",color:"text-blue-gray-500"},asterisk:{display:"inline-block",color:"text-red-500",ml:"ml-0.5"}},variants:{outlined:r.default,standard:n.default,static:i.default}}},l=s})(oce);var yce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{menu:function(){return r},default:function(){return n}});var r={defaultProps:{placement:"bottom",offset:5,dismiss:{itemPress:!0},animate:{unmount:{},mount:{}},lockScroll:!1},styles:{base:{menu:{bg:"bg-white",minWidth:"min-w-[180px]",p:"p-3",border:"border border-blue-gray-50",borderRadius:"rounded-md",boxShadow:"shadow-lg shadow-blue-gray-500/10",fontFamily:"font-sans",fontSize:"text-sm",fontWeight:"font-normal",color:"text-blue-gray-500",overflow:"overflow-auto",outline:"focus:outline-none",zIndex:"z-[999]"},item:{initial:{display:"block",width:"w-full",pt:"pt-[9px]",pb:"pb-2",px:"px-3",borderRadius:"rounded-md",textAlign:"text-start",lightHeight:"leading-tight",cursor:"cursor-pointer",userSelect:"select-none",transition:"transition-all",bg:"hover:bg-blue-gray-50 hover:bg-opacity-80 focus:bg-blue-gray-50 focus:bg-opacity-80 active:bg-blue-gray-50 active:bg-opacity-80",color:"hover:text-blue-gray-900 focus:text-blue-gray-900 active:text-blue-gray-900",outline:"outline-none"},disabled:{opacity:"opacity-50",cursor:"cursor-not-allowed",pointerEvents:"pointer-events-none",userSelect:"select-none",bg:"hover:bg-transparent focus:bg-transparent active:bg-transparent",color:"hover:text-blue-gray-500 focus:text-blue-gray-500 active:text-blue-gray-500"}}}}},n=r})(yce);var bce={},xce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={transparent:{backgroud:"bg-transparent",color:"text-white",boxShadow:"shadow-none"},white:{backgroud:"bg-white",color:"text-white"},"blue-gray":{backgroud:"bg-blue-gray-500",color:"text-white"},gray:{backgroud:"bg-gray-500",color:"text-white"},brown:{backgroud:"bg-brown-500",color:"text-white"},"deep-orange":{backgroud:"bg-deep-orange-500",color:"text-white"},orange:{backgroud:"bg-orange-500",color:"text-white"},amber:{backgroud:"bg-amber-500",color:"text-black"},yellow:{backgroud:"bg-yellow-500",color:"text-black"},lime:{backgroud:"bg-lime-500",color:"text-black"},"light-green":{backgroud:"bg-light-green-500",color:"text-white"},green:{backgroud:"bg-green-500",color:"text-white"},teal:{backgroud:"bg-teal-500",color:"text-white"},cyan:{backgroud:"bg-cyan-500",color:"text-white"},"light-blue":{backgroud:"bg-light-blue-500",color:"text-white"},blue:{backgroud:"bg-blue-500",color:"text-white"},indigo:{backgroud:"bg-indigo-500",color:"text-white"},"deep-purple":{backgroud:"bg-deep-purple-500",color:"text-white"},purple:{backgroud:"bg-purple-500",color:"text-white"},pink:{backgroud:"bg-pink-500",color:"text-white"},red:{backgroud:"bg-red-500",color:"text-white"}},r=t})(xce);var wce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={transparent:{backgroud:"bg-transparent",color:"text-blue-gray-900",boxShadow:"shadow-none"},white:{backgroud:"bg-white",color:"text-blue-gray-900"},"blue-gray":{backgroud:"bg-gradient-to-tr from-blue-gray-600 to-blue-gray-400",color:"text-white"},gray:{backgroud:"bg-gradient-to-tr from-gray-600 to-gray-400",color:"text-white"},brown:{backgroud:"bg-gradient-to-tr from-brown-600 to-brown-400",color:"text-white"},"deep-orange":{backgroud:"bg-gradient-to-tr from-deep-orange-600 to-deep-orange-400",color:"text-white"},orange:{backgroud:"bg-gradient-to-tr from-orange-600 to-orange-400",color:"text-white"},amber:{backgroud:"bg-gradient-to-tr from-amber-600 to-amber-400",color:"text-black"},yellow:{backgroud:"bg-gradient-to-tr from-yellow-600 to-yellow-400",color:"text-black"},lime:{backgroud:"bg-gradient-to-tr from-lime-600 to-lime-400",color:"text-black"},"light-green":{backgroud:"bg-gradient-to-tr from-light-green-600 to-light-green-400",color:"text-white"},green:{backgroud:"bg-gradient-to-tr from-green-600 to-green-400",color:"text-white"},teal:{backgroud:"bg-gradient-to-tr from-teal-600 to-teal-400",color:"text-white"},cyan:{backgroud:"bg-gradient-to-tr from-cyan-600 to-cyan-400",color:"text-white"},"light-blue":{backgroud:"bg-gradient-to-tr from-light-blue-600 to-light-blue-400",color:"text-white"},blue:{backgroud:"bg-gradient-to-tr from-blue-600 to-blue-400",color:"text-white"},indigo:{backgroud:"bg-gradient-to-tr from-indigo-600 to-indigo-400",color:"text-white"},"deep-purple":{backgroud:"bg-gradient-to-tr from-deep-purple-600 to-deep-purple-400",color:"text-white"},purple:{backgroud:"bg-gradient-to-tr from-purple-600 to-purple-400",color:"text-white"},pink:{backgroud:"bg-gradient-to-tr from-pink-600 to-pink-400",color:"text-white"},red:{backgroud:"bg-gradient-to-tr from-red-600 to-red-400",color:"text-white"}},r=t})(wce);var AI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,_){for(var A in _)Object.defineProperty(x,A,{enumerable:!0,get:_[A]})}t(e,{propTypesVariant:function(){return c},propTypesColor:function(){return h},propTypesShadow:function(){return f},propTypesBlurred:function(){return g},propTypesFullWidth:function(){return y},propTypesClassName:function(){return m},propTypesChildren:function(){return p},propTypesOpen:function(){return v},propTypesAnimate:function(){return b}});var r=a(Kt),n=Un;function i(x,_){(_==null||_>x.length)&&(_=x.length);for(var A=0,M=new Array(_);A<_;A++)M[A]=x[A];return M}function o(x){if(Array.isArray(x))return i(x)}function a(x){return x&&x.__esModule?x:{default:x}}function s(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(x){return o(x)||s(x)||d(x)||l()}function d(x,_){if(x){if(typeof x=="string")return i(x,_);var A=Object.prototype.toString.call(x).slice(8,-1);if(A==="Object"&&x.constructor&&(A=x.constructor.name),A==="Map"||A==="Set")return Array.from(A);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return i(x,_)}}var c=["filled","gradient"],h=["transparent","white"].concat(u(n.propTypesColors)),f=r.default.bool,g=r.default.bool,y=r.default.bool,m=r.default.string,p=r.default.node.isRequired,v=r.default.bool.isRequired,b=n.propTypesAnimation})(AI);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,u){for(var d in u)Object.defineProperty(l,d,{enumerable:!0,get:u[d]})}t(e,{navbar:function(){return a},default:function(){return s}});var r=o(xce),n=o(wce),i=AI;function o(l){return l&&l.__esModule?l:{default:l}}var a={defaultProps:{variant:"filled",color:"white",shadow:!0,blurred:!0,fullWidth:!1,className:""},valid:{variants:i.propTypesVariant,colors:i.propTypesColor},styles:{base:{navbar:{initial:{display:"block",width:"w-full",maxWidth:"max-w-screen-2xl",borderRadius:"rounded-xl",py:"py-4",px:"px-8"},shadow:{boxShadow:"shadow-md"},blurred:{backdropFilter:"backdrop-saturate-200 backdrop-blur-2xl",bgOpacity:"bg-opacity-80",borderWidth:"border",borderColor:"border-white/80"},fullWidth:{width:"w-full",maxWidth:"max-w-full",rounded:"rounded-none",px:"px-4"}},mobileNav:{display:"block",width:"w-full",basis:"basis-full",overflow:"overflow-hidden"}},variants:{filled:r.default,gradient:n.default}}},s=a})(bce);var _ce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{popover:function(){return r},default:function(){return n}});var r={defaultProps:{placement:"top",offset:5,dismiss:{},animate:{unmount:{},mount:{}},className:""},styles:{base:{bg:"bg-white",p:"p-4",border:"border border-blue-gray-50",borderRadius:"rounded-lg",boxShadow:"shadow-lg shadow-blue-gray-500/10",fontFamily:"font-sans",fontSize:"text-sm",fontWeight:"font-normal",color:"text-blue-gray-500",outline:"focus:outline-none",overflowWrap:"break-words",whiteSpace:"whitespace-normal"}}},n=r})(_ce);var Sce={},Ace={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{backgroud:"bg-blue-gray-500",color:"text-white"},gray:{backgroud:"bg-gray-900",color:"text-white"},brown:{backgroud:"bg-brown-500",color:"text-white"},"deep-orange":{backgroud:"bg-deep-orange-500",color:"text-white"},orange:{backgroud:"bg-orange-500",color:"text-white"},amber:{backgroud:"bg-amber-500",color:"text-black"},yellow:{backgroud:"bg-yellow-500",color:"text-black"},lime:{backgroud:"bg-lime-500",color:"text-black"},"light-green":{backgroud:"bg-light-green-500",color:"text-white"},green:{backgroud:"bg-green-500",color:"text-white"},teal:{backgroud:"bg-teal-500",color:"text-white"},cyan:{backgroud:"bg-cyan-500",color:"text-white"},"light-blue":{backgroud:"bg-light-blue-500",color:"text-white"},blue:{backgroud:"bg-blue-500",color:"text-white"},indigo:{backgroud:"bg-indigo-500",color:"text-white"},"deep-purple":{backgroud:"bg-deep-purple-500",color:"text-white"},purple:{backgroud:"bg-purple-500",color:"text-white"},pink:{backgroud:"bg-pink-500",color:"text-white"},red:{backgroud:"bg-red-500",color:"text-white"}},r=t})(Ace);var Mce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{backgroud:"bg-gradient-to-tr from-blue-gray-600 to-blue-gray-400",color:"text-white"},gray:{backgroud:"bg-gradient-to-tr from-gray-900 to-gray-800",color:"text-white"},brown:{backgroud:"bg-gradient-to-tr from-brown-600 to-brown-400",color:"text-white"},"deep-orange":{backgroud:"bg-gradient-to-tr from-deep-orange-600 to-deep-orange-400",color:"text-white"},orange:{backgroud:"bg-gradient-to-tr from-orange-600 to-orange-400",color:"text-white"},amber:{backgroud:"bg-gradient-to-tr from-amber-600 to-amber-400",color:"text-black"},yellow:{backgroud:"bg-gradient-to-tr from-yellow-600 to-yellow-400",color:"text-black"},lime:{backgroud:"bg-gradient-to-tr from-lime-600 to-lime-400",color:"text-black"},"light-green":{backgroud:"bg-gradient-to-tr from-light-green-600 to-light-green-400",color:"text-white"},green:{backgroud:"bg-gradient-to-tr from-green-600 to-green-400",color:"text-white"},teal:{backgroud:"bg-gradient-to-tr from-teal-600 to-teal-400",color:"text-white"},cyan:{backgroud:"bg-gradient-to-tr from-cyan-600 to-cyan-400",color:"text-white"},"light-blue":{backgroud:"bg-gradient-to-tr from-light-blue-600 to-light-blue-400",color:"text-white"},blue:{backgroud:"bg-gradient-to-tr from-blue-600 to-blue-400",color:"text-white"},indigo:{backgroud:"bg-gradient-to-tr from-indigo-600 to-indigo-400",color:"text-white"},"deep-purple":{backgroud:"bg-gradient-to-tr from-deep-purple-600 to-deep-purple-400",color:"text-white"},purple:{backgroud:"bg-gradient-to-tr from-purple-600 to-purple-400",color:"text-white"},pink:{backgroud:"bg-gradient-to-tr from-pink-600 to-pink-400",color:"text-white"},red:{backgroud:"bg-gradient-to-tr from-red-600 to-red-400",color:"text-white"}},r=t})(Mce);var VH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(h,f){for(var g in f)Object.defineProperty(h,g,{enumerable:!0,get:f[g]})}t(e,{propTypesVariant:function(){return o},propTypesColor:function(){return a},propTypesSize:function(){return s},propTypesValue:function(){return l},propTypesLabel:function(){return u},propTypesBarProps:function(){return d},propTypesClassName:function(){return c}});var r=i(Kt),n=Un;function i(h){return h&&h.__esModule?h:{default:h}}var o=["filled","gradient"],a=n.propTypesColors,s=["sm","md","lg"],l=r.default.number,u=r.default.oneOfType([r.default.string,r.default.bool]),d=r.default.instanceOf(Object),c=r.default.string})(VH);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,u){for(var d in u)Object.defineProperty(l,d,{enumerable:!0,get:u[d]})}t(e,{progress:function(){return a},default:function(){return s}});var r=o(Ace),n=o(Mce),i=VH;function o(l){return l&&l.__esModule?l:{default:l}}var a={defaultProps:{variant:"filled",color:"gray",size:"md",value:0,label:!1,className:"",barProps:{}},valid:{variants:i.propTypesVariant,colors:i.propTypesColor,sizes:i.propTypesSize},styles:{base:{container:{initial:{display:"flex",justifyContent:"flex-start",bg:"bg-blue-gray-50",overflow:"overflow-hidden",width:"w-full",fontFamily:"font-sans",borderRadius:"rounded-full",fontSize:"text-xs",fontWeight:"font-medium"},withLabel:{}},bar:{display:"flex",justifyContent:"justify-center",alignItems:"items-center",height:"h-full",overflow:"overflow-hidden",wordBreak:"break-all",borderRadius:"rounded-full"}},sizes:{sm:{container:{initial:{height:"h-1.5"},withLabel:{height:"h-3.5"}},bar:{}},md:{container:{initial:{height:"h-2.5"},withLabel:{height:"h-4"}},bar:{}},lg:{container:{initial:{height:"h-3.5"},withLabel:{height:"h-5"}},bar:{}}},variants:{filled:r.default,gradient:n.default}}},s=a})(Sce);var Cce={},Tce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{color:"text-blue-gray-500",border:"checked:border-blue-gray-500",before:"checked:before:bg-blue-gray-500"},gray:{color:"text-gray-900",border:"checked:border-gray-900",before:"checked:before:bg-gray-900"},brown:{color:"text-brown-500",border:"checked:border-brown-500",before:"checked:before:bg-brown-500"},"deep-orange":{color:"text-deep-orange-500",border:"checked:border-deep-orange-500",before:"checked:before:bg-deep-orange-500"},orange:{color:"text-orange-500",border:"checked:border-orange-500",before:"checked:before:bg-orange-500"},amber:{color:"text-amber-500",border:"checked:border-amber-500",before:"checked:before:bg-amber-500"},yellow:{color:"text-yellow-500",border:"checked:border-yellow-500",before:"checked:before:bg-yellow-500"},lime:{color:"text-lime-500",border:"checked:border-lime-500",before:"checked:before:bg-lime-500"},"light-green":{color:"text-light-green-500",border:"checked:border-light-green-500",before:"checked:before:bg-light-green-500"},green:{color:"text-green-500",border:"checked:border-green-500",before:"checked:before:bg-green-500"},teal:{color:"text-teal-500",border:"checked:border-teal-500",before:"checked:before:bg-teal-500"},cyan:{color:"text-cyan-500",border:"checked:border-cyan-500",before:"checked:before:bg-cyan-500"},"light-blue":{color:"text-light-blue-500",border:"checked:border-light-blue-500",before:"checked:before:bg-light-blue-500"},blue:{color:"text-blue-500",border:"checked:border-blue-500",before:"checked:before:bg-blue-500"},indigo:{color:"text-indigo-500",border:"checked:border-indigo-500",before:"checked:before:bg-indigo-500"},"deep-purple":{color:"text-deep-purple-500",border:"checked:border-deep-purple-500",before:"checked:before:bg-deep-purple-500"},purple:{color:"text-purple-500",border:"checked:border-purple-500",before:"checked:before:bg-purple-500"},pink:{color:"text-pink-500",border:"checked:border-pink-500",before:"checked:before:bg-pink-500"},red:{color:"text-red-500",border:"checked:border-red-500",before:"checked:before:bg-red-500"}},r=t})(Tce);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{radio:function(){return o},default:function(){return a}});var r=i(Tce),n=V0;function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{color:"gray",label:void 0,icon:void 0,ripple:!0,className:"",disabled:!1,containerProps:void 0,labelProps:void 0,iconProps:void 0},valid:{colors:n.propTypesColor},styles:{base:{root:{display:"inline-flex",alignItems:"items-center"},container:{position:"relative",display:"flex",alignItems:"items-center",cursor:"cursor-pointer",p:"p-3",borderRadius:"rounded-full"},input:{peer:"peer",position:"relative",appearance:"appearance-none",width:"w-5",height:"h-5",borderWidth:"border",borderRadius:"rounded-full",borderColor:"border-blue-gray-200",cursor:"cursor-pointer",transition:"transition-all",before:{content:"before:content['']",display:"before:block",bg:"before:bg-blue-gray-500",width:"before:w-12",height:"before:h-12",borderRadius:"before:rounded-full",position:"before:absolute",top:"before:top-2/4",left:"before:left-2/4",transform:"before:-translate-y-2/4 before:-translate-x-2/4",opacity:"before:opacity-0 hover:before:opacity-10",transition:"before:transition-opacity"}},label:{color:"text-gray-700",fontWeight:"font-light",userSelect:"select-none",cursor:"cursor-pointer",mt:"mt-px"},icon:{position:"absolute",top:"top-2/4",left:"left-2/4",translate:"-translate-y-2/4 -translate-x-2/4",pointerEvents:"pointer-events-none",opacity:"opacity-0 peer-checked:opacity-100",transition:"transition-opacity"},disabled:{opacity:"opacity-50",pointerEvents:"pointer-events-none"}},colors:r.default}},a=o})(Cce);var Ece={},Pce={},Dce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-1.5",before:{content:"before:content[' ']",display:"before:block",boxSizing:"before:box-border",width:"before:w-2.5",height:"before:h-1.5",mt:"before:mt-[6.5px]",mr:"before:mr-1",borderRadius:"before:rounded-tl-md",pointerEvents:"before:pointer-events-none",transition:"before:transition-all",disabled:"peer-disabled:before:border-transparent"},after:{content:"after:content[' ']",display:"after:block",flexGrow:"after:flex-grow",boxSizing:"after:box-border",width:"after:w-2.5",height:"after:h-1.5",mt:"after:mt-[6.5px]",ml:"after:ml-1",borderRadius:"after:rounded-tr-md",pointerEvents:"after:pointer-events-none",transition:"after:transition-all",disabled:"peer-disabled:after:border-transparent"}},r=t})(Dce);var Oce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-blue-gray-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},gray:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-gray-900",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},brown:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-brown-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},"deep-orange":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-deep-orange-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},orange:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-orange-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},amber:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-amber-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},yellow:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-yellow-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},lime:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-lime-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},"light-green":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-light-green-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},green:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-green-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},teal:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-teal-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},cyan:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-cyan-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},"light-blue":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-light-blue-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},blue:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-blue-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},indigo:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-indigo-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},"deep-purple":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-deep-purple-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},purple:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-purple-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},pink:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-pink-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}},red:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-red-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-blue-gray-200",borderTopColor:"border-t-transparent"}}},r=t})(Oce);var Rce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-blue-gray-500",before:"before:border-blue-gray-500",after:"after:border-blue-gray-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},gray:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-gray-900",before:"before:border-gray-900",after:"after:border-gray-900"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},brown:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-brown-500",before:"before:border-brown-500",after:"after:border-brown-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},"deep-orange":{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-deep-orange-500",before:"before:border-deep-orange-500",after:"after:border-deep-orange-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},orange:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-orange-500",before:"before:border-orange-500",after:"after:border-orange-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},amber:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-amber-500",before:"before:border-amber-500",after:"after:border-amber-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},yellow:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-yellow-500",before:"before:border-yellow-500",after:"after:border-yellow-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},lime:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-lime-500",before:"before:border-lime-500",after:"after:border-lime-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},"light-green":{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-light-green-500",before:"before:border-light-green-500",after:"after:border-light-green-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},green:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-green-500",before:"before:border-green-500",after:"after:border-green-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},teal:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-teal-500",before:"before:border-teal-500",after:"after:border-teal-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},cyan:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-cyan-500",before:"before:border-cyan-500",after:"after:border-cyan-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},"light-blue":{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-light-blue-500",before:"before:border-light-blue-500",after:"after:border-light-blue-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},blue:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-blue-500",before:"before:border-blue-500",after:"after:border-blue-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},indigo:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-indigo-500",before:"before:border-indigo-500",after:"after:border-indigo-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},"deep-purple":{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-deep-purple-500",before:"before:border-deep-purple-500",after:"after:border-deep-purple-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},purple:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-purple-500",before:"before:border-purple-500",after:"after:border-purple-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},pink:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-pink-500",before:"before:border-pink-500",after:"after:border-pink-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}},red:{close:{color:"text-blue-gray-400",before:"before:border-transparent",after:"after:border-transparent"},open:{color:"text-red-500",before:"before:border-red-500",after:"after:border-red-500"},withValue:{color:"text-blue-gray-400",before:"before:border-blue-gray-200",after:"after:border-blue-gray-200"}}},r=t})(Rce);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(Dce),r=i(Oce),n=i(Rce);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{select:{},label:t.default},sizes:{md:{container:{height:"h-10"},select:{fontSize:"text-sm",px:"px-3",py:"py-2.5",borderRadius:"rounded-[7px]"},label:{initial:{},states:{close:{lineHeight:"leading-[3.75]"},open:{lineHeight:"leading-tight"},withValue:{lineHeight:"leading-tight"}}}},lg:{container:{height:"h-11"},select:{fontSize:"text-sm",px:"px-3",py:"py-3",borderRadius:"rounded-[7px]"},label:{initial:{},states:{close:{lineHeight:"leading-[4.1]"},open:{lineHeight:"leading-tight"},withValue:{lineHeight:"leading-tight"}}}}},colors:{select:r.default,label:n.default},states:{close:{select:{borderWidth:"border"},label:{fontSize:"text-sm",disabled:"peer-disabled:text-blue-gray-400",before:{bt:"before:border-t-transparent",bl:"before:border-l-transparent"},after:{bt:"after:border-t-transparent",br:"after:border-r-transparent"}}},open:{select:{borderWidth:"border-2",borderColor:"border-t-transparent"},label:{fontSize:"text-[11px]",disabled:"peer-disabled:text-transparent",before:{bt:"before:border-t-2",bl:"before:border-l-2"},after:{bt:"after:border-t-2",br:"after:border-r-2"}}},withValue:{select:{borderWidth:"border",borderColor:"border-t-transparent"},label:{fontSize:"text-[11px]",disabled:"peer-disabled:text-transparent",before:{bt:"before:border-t",bl:"before:border-l"},after:{bt:"after:border-t",br:"after:border-r"}}}},error:{select:{initial:{},states:{close:{borderColor:"border-red-500"},open:{borderColor:"border-red-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-red-500",borderTopColor:"border-t-transparent"}}},label:{initial:{},states:{close:{color:"text-red-500",before:"before:border-red-500",after:"after:border-red-500"},open:{color:"text-red-500",before:"before:border-red-500",after:"after:border-red-500"},withValue:{color:"text-red-500",before:"before:border-red-500",after:"after:border-red-500"}}}},success:{select:{initial:{},states:{close:{borderColor:"border-green-500"},open:{borderColor:"border-green-500",borderTopColor:"border-t-transparent"},withValue:{borderColor:"border-green-500",borderTopColor:"border-t-transparent"}}},label:{initial:{},states:{close:{color:"text-green-500",before:"before:border-green-500",after:"after:border-green-500"},open:{color:"text-green-500",before:"before:border-green-500",after:"after:border-green-500"},withValue:{color:"text-green-500",before:"before:border-green-500",after:"after:border-green-500"}}}}},a=o})(Pce);var Ice={},Lce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-1.5",after:{content:"after:content[' ']",display:"after:block",width:"after:w-full",position:"after:absolute",bottom:"after:-bottom-1.5",left:"left-0",borderWidth:"after:border-b-2",transition:"after:transition-transform after:duration-300"}},r=t})(Lce);var Bce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-blue-gray-500"},withValue:{borderColor:"border-blue-gray-200"}},gray:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-gray-900"},withValue:{borderColor:"border-blue-gray-200"}},brown:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-brown-500"},withValue:{borderColor:"border-blue-gray-200"}},"deep-orange":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-deep-orange-500"},withValue:{borderColor:"border-blue-gray-200"}},orange:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-orange-500"},withValue:{borderColor:"border-blue-gray-200"}},amber:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-amber-500"},withValue:{borderColor:"border-blue-gray-200"}},yellow:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-yellow-500"},withValue:{borderColor:"border-blue-gray-200"}},lime:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-lime-500"},withValue:{borderColor:"border-blue-gray-200"}},"light-green":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-light-green-500"},withValue:{borderColor:"border-blue-gray-200"}},green:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-green-500"},withValue:{borderColor:"border-blue-gray-200"}},teal:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-teal-500"},withValue:{borderColor:"border-blue-gray-200"}},cyan:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-cyan-500"},withValue:{borderColor:"border-blue-gray-200"}},"light-blue":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-light-blue-500"},withValue:{borderColor:"border-blue-gray-200"}},blue:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-blue-500"},withValue:{borderColor:"border-blue-gray-200"}},indigo:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-indigo-500"},withValue:{borderColor:"border-blue-gray-200"}},"deep-purple":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-deep-purple-500"},withValue:{borderColor:"border-blue-gray-200"}},purple:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-purple-500"},withValue:{borderColor:"border-blue-gray-200"}},pink:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-pink-500"},withValue:{borderColor:"border-blue-gray-200"}},red:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-red-500"},withValue:{borderColor:"border-blue-gray-200"}}},r=t})(Bce);var Nce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{close:{color:"text-blue-gray-500",after:"after:border-blue-gray-500"},open:{color:"text-blue-gray-500",after:"after:border-blue-gray-500"},withValue:{color:"text-blue-gray-500",after:"after:border-blue-gray-50"}},gray:{close:{color:"text-blue-gray-500",after:"after:border-gray-500"},open:{color:"text-gray-900",after:"after:border-gray-900"},withValue:{color:"text-blue-gray-500",after:"after:border-gray-500"}},brown:{close:{color:"text-blue-gray-500",after:"after:border-brown-500"},open:{color:"text-brown-500",after:"after:border-brown-500"},withValue:{color:"text-blue-gray-500",after:"after:border-brown-500"}},"deep-orange":{close:{color:"text-blue-gray-500",after:"after:border-deep-orange-500"},open:{color:"text-deep-orange-500",after:"after:border-deep-orange-500"},withValue:{color:"text-blue-gray-500",after:"after:border-deep-orange-500"}},orange:{close:{color:"text-blue-gray-500",after:"after:border-orange-500"},open:{color:"text-orange-500",after:"after:border-orange-500"},withValue:{color:"text-blue-gray-500",after:"after:border-orange-500"}},amber:{close:{color:"text-blue-gray-500",after:"after:border-amber-500"},open:{color:"text-amber-500",after:"after:border-amber-500"},withValue:{color:"text-blue-gray-500",after:"after:border-amber-500"}},yellow:{close:{color:"text-blue-gray-500",after:"after:border-yellow-500"},open:{color:"text-yellow-500",after:"after:border-yellow-500"},withValue:{color:"text-blue-gray-500",after:"after:border-yellow-500"}},lime:{close:{color:"text-blue-gray-500",after:"after:border-lime-500"},open:{color:"text-lime-500",after:"after:border-lime-500"},withValue:{color:"text-blue-gray-500",after:"after:border-lime-500"}},"light-green":{close:{color:"text-blue-gray-500",after:"after:border-light-green-500"},open:{color:"text-light-green-500",after:"after:border-light-green-500"},withValue:{color:"text-blue-gray-500",after:"after:border-light-green-500"}},green:{close:{color:"text-blue-gray-500",after:"after:border-green-500"},open:{color:"text-green-500",after:"after:border-green-500"},withValue:{color:"text-blue-gray-500",after:"after:border-green-500"}},teal:{close:{color:"text-blue-gray-500",after:"after:border-teal-500"},open:{color:"text-teal-500",after:"after:border-teal-500"},withValue:{color:"text-blue-gray-500",after:"after:border-teal-500"}},cyan:{close:{color:"text-blue-gray-500",after:"after:border-cyan-500"},open:{color:"text-cyan-500",after:"after:border-cyan-500"},withValue:{color:"text-blue-gray-500",after:"after:border-cyan-500"}},"light-blue":{close:{color:"text-blue-gray-500",after:"after:border-light-blue-500"},open:{color:"text-light-blue-500",after:"after:border-light-blue-500"},withValue:{color:"text-blue-gray-500",after:"after:border-light-blue-500"}},blue:{close:{color:"text-blue-gray-500",after:"after:border-blue-500"},open:{color:"text-blue-500",after:"after:border-blue-500"},withValue:{color:"text-blue-gray-500",after:"after:border-blue-500"}},indigo:{close:{color:"text-blue-gray-500",after:"after:border-indigo-500"},open:{color:"text-indigo-500",after:"after:border-indigo-500"},withValue:{color:"text-blue-gray-500",after:"after:border-indigo-500"}},"deep-purple":{close:{color:"text-blue-gray-500",after:"after:border-deep-purple-500"},open:{color:"text-deep-purple-500",after:"after:border-deep-purple-500"},withValue:{color:"text-blue-gray-500",after:"after:border-deep-purple-500"}},purple:{close:{color:"text-blue-gray-500",after:"after:border-purple-500"},open:{color:"text-purple-500",after:"after:border-purple-500"},withValue:{color:"text-blue-gray-500",after:"after:border-purple-500"}},pink:{close:{color:"text-blue-gray-500",after:"after:border-pink-500"},open:{color:"text-pink-500",after:"after:border-pink-500"},withValue:{color:"text-blue-gray-500",after:"after:border-pink-500"}},red:{close:{color:"text-blue-gray-500",after:"after:border-red-500"},open:{color:"text-red-500",after:"after:border-red-500"},withValue:{color:"text-blue-gray-500",after:"after:border-red-500"}}},r=t})(Nce);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(Lce),r=i(Bce),n=i(Nce);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{select:{},label:t.default},sizes:{md:{container:{height:"h-11"},select:{fontSize:"text-sm",pt:"pt-4",pb:"pb-1.5"},label:{initial:{},states:{close:{lineHeight:"leading-[4.25]"},open:{lineHeight:"leading-tight"},withValue:{lineHeight:"leading-tight"}}}},lg:{container:{height:"h-12"},select:{fontSize:"text-sm",px:"px-px",pt:"pt-5",pb:"pb-2"},label:{initial:{},states:{close:{lineHeight:"leading-[4.875]"},open:{lineHeight:"leading-tight"},withValue:{lineHeight:"leading-tight"}}}}},colors:{select:r.default,label:n.default},states:{close:{select:{borderWidth:"border-b"},label:{fontSize:"text-sm",disabled:"peer-disabled:text-blue-gray-400",after:{transform:"after:scale-x-0"}}},open:{select:{borderWidth:"border-b"},label:{fontSize:"text-[11px]",disabled:"peer-disabled:text-transparent",after:{transform:"after:scale-x-100"}}},withValue:{select:{borderWidth:"border-b"},label:{fontSize:"text-[11px]",disabled:"peer-disabled:text-transparent",after:{transform:"after:scale-x-0"}}}},error:{select:{initial:{},states:{close:{borderColor:"border-red-500"},open:{borderColor:"border-red-500"},withValue:{borderColor:"border-red-500"}}},label:{initial:{},states:{close:{color:"text-red-500",after:"after:border-red-500"},open:{color:"text-red-500",after:"after:border-red-500"},withValue:{color:"text-red-500",after:"after:border-red-500"}}}},success:{select:{initial:{},states:{close:{borderColor:"border-green-500"},open:{borderColor:"border-green-500"},withValue:{borderColor:"border-green-500"}}},label:{initial:{},states:{close:{color:"text-green-500",after:"after:border-green-500"},open:{color:"text-green-500",after:"after:border-green-500"},withValue:{color:"text-green-500",after:"after:border-green-500"}}}}},a=o})(Ice);var kce={},Fce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-2.5",after:{content:"after:content[' ']",display:"after:block",width:"after:w-full",position:"after:absolute",bottom:"after:-bottom-2.5",left:"left-0",borderWidth:"after:border-b-2",transition:"after:transition-transform after:duration-300"}},r=t})(Fce);var zce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-blue-gray-500"},withValue:{borderColor:"border-blue-gray-200"}},gray:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-gray-900"},withValue:{borderColor:"border-blue-gray-200"}},brown:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-brown-500"},withValue:{borderColor:"border-blue-gray-200"}},"deep-orange":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-deep-orange-500"},withValue:{borderColor:"border-blue-gray-200"}},orange:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-orange-500"},withValue:{borderColor:"border-blue-gray-200"}},amber:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-amber-500"},withValue:{borderColor:"border-blue-gray-200"}},yellow:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-yellow-500"},withValue:{borderColor:"border-blue-gray-200"}},lime:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-lime-500"},withValue:{borderColor:"border-blue-gray-200"}},"light-green":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-light-green-500"},withValue:{borderColor:"border-blue-gray-200"}},green:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-green-500"},withValue:{borderColor:"border-blue-gray-200"}},teal:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-teal-500"},withValue:{borderColor:"border-blue-gray-200"}},cyan:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-cyan-500"},withValue:{borderColor:"border-blue-gray-200"}},"light-blue":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-light-blue-500"},withValue:{borderColor:"border-blue-gray-200"}},blue:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-blue-500"},withValue:{borderColor:"border-blue-gray-200"}},indigo:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-indigo-500"},withValue:{borderColor:"border-blue-gray-200"}},"deep-purple":{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-deep-purple-500"},withValue:{borderColor:"border-blue-gray-200"}},purple:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-purple-500"},withValue:{borderColor:"border-blue-gray-200"}},pink:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-pink-500"},withValue:{borderColor:"border-blue-gray-200"}},red:{close:{borderColor:"border-blue-gray-200"},open:{borderColor:"border-red-500"},withValue:{borderColor:"border-blue-gray-200"}}},r=t})(zce);var Uce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{close:{color:"text-blue-gray-500",after:"after:border-blue-gray-500"},open:{color:"text-blue-gray-500",after:"after:border-blue-gray-500"},withValue:{color:"text-blue-gray-500",after:"after:border-blue-gray-50"}},gray:{close:{color:"text-blue-gray-500",after:"after:border-gray-500"},open:{color:"text-gray-900",after:"after:border-gray-900"},withValue:{color:"text-blue-gray-500",after:"after:border-gray-500"}},brown:{close:{color:"text-blue-gray-500",after:"after:border-brown-500"},open:{color:"text-brown-500",after:"after:border-brown-500"},withValue:{color:"text-blue-gray-500",after:"after:border-brown-500"}},"deep-orange":{close:{color:"text-blue-gray-500",after:"after:border-deep-orange-500"},open:{color:"text-deep-orange-500",after:"after:border-deep-orange-500"},withValue:{color:"text-blue-gray-500",after:"after:border-deep-orange-500"}},orange:{close:{color:"text-blue-gray-500",after:"after:border-orange-500"},open:{color:"text-orange-500",after:"after:border-orange-500"},withValue:{color:"text-blue-gray-500",after:"after:border-orange-500"}},amber:{close:{color:"text-blue-gray-500",after:"after:border-amber-500"},open:{color:"text-amber-500",after:"after:border-amber-500"},withValue:{color:"text-blue-gray-500",after:"after:border-amber-500"}},yellow:{close:{color:"text-blue-gray-500",after:"after:border-yellow-500"},open:{color:"text-yellow-500",after:"after:border-yellow-500"},withValue:{color:"text-blue-gray-500",after:"after:border-yellow-500"}},lime:{close:{color:"text-blue-gray-500",after:"after:border-lime-500"},open:{color:"text-lime-500",after:"after:border-lime-500"},withValue:{color:"text-blue-gray-500",after:"after:border-lime-500"}},"light-green":{close:{color:"text-blue-gray-500",after:"after:border-light-green-500"},open:{color:"text-light-green-500",after:"after:border-light-green-500"},withValue:{color:"text-blue-gray-500",after:"after:border-light-green-500"}},green:{close:{color:"text-blue-gray-500",after:"after:border-green-500"},open:{color:"text-green-500",after:"after:border-green-500"},withValue:{color:"text-blue-gray-500",after:"after:border-green-500"}},teal:{close:{color:"text-blue-gray-500",after:"after:border-teal-500"},open:{color:"text-teal-500",after:"after:border-teal-500"},withValue:{color:"text-blue-gray-500",after:"after:border-teal-500"}},cyan:{close:{color:"text-blue-gray-500",after:"after:border-cyan-500"},open:{color:"text-cyan-500",after:"after:border-cyan-500"},withValue:{color:"text-blue-gray-500",after:"after:border-cyan-500"}},"light-blue":{close:{color:"text-blue-gray-500",after:"after:border-light-blue-500"},open:{color:"text-light-blue-500",after:"after:border-light-blue-500"},withValue:{color:"text-blue-gray-500",after:"after:border-light-blue-500"}},blue:{close:{color:"text-blue-gray-500",after:"after:border-blue-500"},open:{color:"text-blue-500",after:"after:border-blue-500"},withValue:{color:"text-blue-gray-500",after:"after:border-blue-500"}},indigo:{close:{color:"text-blue-gray-500",after:"after:border-indigo-500"},open:{color:"text-indigo-500",after:"after:border-indigo-500"},withValue:{color:"text-blue-gray-500",after:"after:border-indigo-500"}},"deep-purple":{close:{color:"text-blue-gray-500",after:"after:border-deep-purple-500"},open:{color:"text-deep-purple-500",after:"after:border-deep-purple-500"},withValue:{color:"text-blue-gray-500",after:"after:border-deep-purple-500"}},purple:{close:{color:"text-blue-gray-500",after:"after:border-purple-500"},open:{color:"text-purple-500",after:"after:border-purple-500"},withValue:{color:"text-blue-gray-500",after:"after:border-purple-500"}},pink:{close:{color:"text-blue-gray-500",after:"after:border-pink-500"},open:{color:"text-pink-500",after:"after:border-pink-500"},withValue:{color:"text-blue-gray-500",after:"after:border-pink-500"}},red:{close:{color:"text-blue-gray-500",after:"after:border-red-500"},open:{color:"text-red-500",after:"after:border-red-500"},withValue:{color:"text-blue-gray-500",after:"after:border-red-500"}}},r=t})(Uce);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(Fce),r=i(zce),n=i(Uce);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{select:{},label:t.default},sizes:{md:{container:{height:"h-11"},select:{fontSize:"text-sm",pt:"pt-4",pb:"pb-1.5"},label:{initial:{},states:{close:{lineHeight:"leading-tight"},open:{lineHeight:"leading-tight"},withValue:{lineHeight:"leading-tight"}}}},lg:{container:{height:"h-12"},select:{fontSize:"text-sm",px:"px-px",pt:"pt-5",pb:"pb-2"},label:{initial:{},states:{close:{lineHeight:"leading-tight"},open:{lineHeight:"leading-tight"},withValue:{lineHeight:"leading-tight"}}}}},colors:{select:r.default,label:n.default},states:{close:{select:{borderWidth:"border-b"},label:{fontSize:"text-sm",disabled:"peer-disabled:text-blue-gray-400",after:{transform:"after:scale-x-0"}}},open:{select:{borderWidth:"border-b"},label:{fontSize:"text-sm",disabled:"peer-disabled:text-transparent",after:{transform:"after:scale-x-100"}}},withValue:{select:{borderWidth:"border-b"},label:{fontSize:"text-sm",disabled:"peer-disabled:text-transparent",after:{transform:"after:scale-x-0"}}}},error:{select:{initial:{},states:{close:{borderColor:"border-red-500"},open:{borderColor:"border-red-500"},withValue:{borderColor:"border-red-500"}}},label:{initial:{},states:{close:{color:"text-red-500",after:"after:border-red-500"},open:{color:"text-red-500",after:"after:border-red-500"},withValue:{color:"text-red-500",after:"after:border-red-500"}}}},success:{select:{initial:{},states:{close:{borderColor:"border-green-500"},open:{borderColor:"border-green-500"},withValue:{borderColor:"border-green-500"}}},label:{initial:{},states:{close:{color:"text-green-500",after:"after:border-green-500"},open:{color:"text-green-500",after:"after:border-green-500"},withValue:{color:"text-green-500",after:"after:border-green-500"}}}}},a=o})(kce);var WM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(k,L){for(var U in L)Object.defineProperty(k,U,{enumerable:!0,get:L[U]})}t(e,{propTypesVariant:function(){return o},propTypesSize:function(){return a},propTypesColor:function(){return s},propTypesLabel:function(){return l},propTypesError:function(){return u},propTypesSuccess:function(){return d},propTypesArrow:function(){return c},propTypesValue:function(){return h},propTypesOnChange:function(){return f},propTypesSelected:function(){return g},propTypesOffset:function(){return y},propTypesDismiss:function(){return m},propTypesAnimate:function(){return p},propTypesAutoHeight:function(){return v},propTypesLockScroll:function(){return b},propTypesLabelProps:function(){return x},propTypesMenuProps:function(){return _},propTypesIndex:function(){return A},propTypesDisabled:function(){return M},propTypesClassName:function(){return T},propTypesName:function(){return C},propTypesChildren:function(){return E},propTypesContainerProps:function(){return D},propTypesContextValue:function(){return I}});var r=i(Kt),n=Un;function i(k){return k&&k.__esModule?k:{default:k}}var o=["standard","outlined","static"],a=["md","lg"],s=n.propTypesColors,l=r.default.string,u=r.default.bool,d=r.default.bool,c=r.default.node,h=r.default.string,f=r.default.func,g=r.default.func,y=n.propTypesOffsetType,m=n.propTypesDismissType,p=n.propTypesAnimation,v=r.default.bool,b=r.default.bool,x=r.default.instanceOf(Object),_=r.default.instanceOf(Object),A=r.default.number,M=r.default.bool,T=r.default.string,C=r.default.string,E=r.default.node.isRequired,D=r.default.instanceOf(Object),I=r.default.shape({selectedIndex:r.default.number.isRequired,setSelectedIndex:r.default.func.isRequired,activeIndex:r.default.oneOfType([r.default.number,r.default.instanceOf(null)]),setActiveIndex:r.default.func.isRequired,listRef:r.default.instanceOf(Object).isRequired,setOpen:r.default.func.isRequired,onChange:r.default.func.isRequired,getItemProps:r.default.func.isRequired,dataRef:r.default.instanceOf(Object).isRequired}).isRequired})(WM);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){for(var c in d)Object.defineProperty(u,c,{enumerable:!0,get:d[c]})}t(e,{select:function(){return s},default:function(){return l}});var r=a(Pce),n=a(Ice),i=a(kce),o=WM;function a(u){return u&&u.__esModule?u:{default:u}}var s={defaultProps:{variant:"outlined",color:"gray",size:"md",label:"",error:!1,success:!1,arrow:void 0,value:void 0,onChange:void 0,selected:void 0,offset:5,dismiss:{},animate:{unmount:{},mount:{}},autoHeight:!1,lockScroll:!1,labelProps:{},menuProps:{},className:"",disabled:!1,containerProps:void 0},valid:{variants:o.propTypesVariant,sizes:o.propTypesSize,colors:o.propTypesColor},styles:{base:{container:{position:"relative",width:"w-full",minWidth:"min-w-[200px]"},select:{peer:"peer",width:"w-full",height:"h-full",bg:"bg-transparent",color:"text-blue-gray-700",fontFamily:"font-sans",fontWeight:"font-normal",textAlign:"text-left",outline:"outline outline-0 focus:outline-0",disabled:"disabled:bg-blue-gray-50 disabled:border-0",transition:"transition-all"},arrow:{initial:{display:"grid",placeItems:"place-items-center",position:"absolute",top:"top-2/4",right:"right-2",pt:"pt-px",width:"w-5",height:"h-5",color:"text-blue-gray-400",transform:"rotate-0 -translate-y-2/4",transition:"transition-all"},active:{transform:"rotate-180",mt:"mt-px"}},label:{display:"flex",width:"w-full",height:"h-full",userSelect:"select-none",pointerEvents:"pointer-events-none",position:"absolute",left:"left-0",fontWeight:"font-normal",transition:"transition-all"},menu:{width:"w-full",maxHeight:"max-h-96",bg:"bg-white",p:"p-3",border:"border border-blue-gray-50",borderRadius:"rounded-md",boxShadow:"shadow-lg shadow-blue-gray-500/10",fontFamily:"font-sans",fontSize:"text-sm",fontWeight:"font-normal",color:"text-blue-gray-500",overflow:"overflow-auto",outline:"focus:outline-none"},option:{initial:{pt:"pt-[9px]",pb:"pb-2",px:"px-3",borderRadius:"rounded-md",lightHeight:"leading-tight",cursor:"cursor-pointer",userSelect:"select-none",background:"hover:bg-blue-gray-50 focus:bg-blue-gray-50",opacity:"hover:bg-opacity-80 focus:bg-opacity-80",color:"hover:text-blue-gray-900 focus:text-blue-gray-900",outline:"outline outline-0",transition:"transition-all"},active:{bg:"bg-blue-gray-50 bg-opacity-80",color:"text-blue-gray-900"},disabled:{opacity:"opacity-50",cursor:"cursor-not-allowed",userSelect:"select-none",pointerEvents:"pointer-events-none"}}},variants:{outlined:r.default,standard:n.default,static:i.default}}},l=s})(Ece);var Vce={},jce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{input:"checked:bg-blue-gray-500",circle:"peer-checked:border-blue-gray-500",before:"peer-checked:before:bg-blue-gray-500"},gray:{input:"checked:bg-gray-900",circle:"peer-checked:border-gray-900",before:"peer-checked:before:bg-gray-900"},brown:{input:"checked:bg-brown-500",circle:"peer-checked:border-brown-500",before:"peer-checked:before:bg-brown-500"},"deep-orange":{input:"checked:bg-deep-orange-500",circle:"peer-checked:border-deep-orange-500",before:"peer-checked:before:bg-deep-orange-500"},orange:{input:"checked:bg-orange-500",circle:"peer-checked:border-orange-500",before:"peer-checked:before:bg-orange-500"},amber:{input:"checked:bg-amber-500",circle:"peer-checked:border-amber-500",before:"peer-checked:before:bg-amber-500"},yellow:{input:"checked:bg-yellow-500",circle:"peer-checked:border-yellow-500",before:"peer-checked:before:bg-yellow-500"},lime:{input:"checked:bg-lime-500",circle:"peer-checked:border-lime-500",before:"peer-checked:before:bg-lime-500"},"light-green":{input:"checked:bg-light-green-500",circle:"peer-checked:border-light-green-500",before:"peer-checked:before:bg-light-green-500"},green:{input:"checked:bg-green-500",circle:"peer-checked:border-green-500",before:"peer-checked:before:bg-green-500"},teal:{input:"checked:bg-teal-500",circle:"peer-checked:border-teal-500",before:"peer-checked:before:bg-teal-500"},cyan:{input:"checked:bg-cyan-500",circle:"peer-checked:border-cyan-500",before:"peer-checked:before:bg-cyan-500"},"light-blue":{input:"checked:bg-light-blue-500",circle:"peer-checked:border-light-blue-500",before:"peer-checked:before:bg-light-blue-500"},blue:{input:"checked:bg-blue-500",circle:"peer-checked:border-blue-500",before:"peer-checked:before:bg-blue-500"},indigo:{input:"checked:bg-indigo-500",circle:"peer-checked:border-indigo-500",before:"peer-checked:before:bg-indigo-500"},"deep-purple":{input:"checked:bg-deep-purple-500",circle:"peer-checked:border-deep-purple-500",before:"peer-checked:before:bg-deep-purple-500"},purple:{input:"checked:bg-purple-500",circle:"peer-checked:border-purple-500",before:"peer-checked:before:bg-purple-500"},pink:{input:"checked:bg-pink-500",circle:"peer-checked:border-pink-500",before:"peer-checked:before:bg-pink-500"},red:{input:"checked:bg-red-500",circle:"peer-checked:border-red-500",before:"peer-checked:before:bg-red-500"}},r=t})(jce);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{switchButton:function(){return o},default:function(){return a}});var r=i(jce),n=V0;function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{color:"gray",label:"",ripple:!0,className:"",disabled:!1,containerProps:void 0,labelProps:void 0,circleProps:void 0},valid:{colors:n.propTypesColor},styles:{base:{root:{display:"inline-flex",alignItems:"items-center"},container:{position:"relative",display:"inline-block",width:"w-8",height:"h-4",cursor:"cursor-pointer",borderRadius:"rounded-full"},input:{peer:"peer",appearance:"appearance-none",width:"w-8",height:"h-4",position:"absolute",background:"bg-blue-gray-100",borderRadius:"rounded-full",cursor:"cursor-pointer",transition:"transition-colors duration-300"},circle:{bg:"bg-white",width:"w-5",height:"h-5",borderWidth:"border",borderColor:"border-blue-gray-100",borderRadius:"rounded-full",boxShadow:"shadow-md",position:"absolute",top:"top-2/4",left:"-left-1",transform:"-translate-y-2/4 peer-checked:translate-x-full",transition:"transition-all duration-300",cursor:"cursor-pointer",before:{content:"before:content['']",display:"before:block",bg:"before:bg-blue-gray-500",width:"before:w-10",height:"before:h-10",borderRadius:"before:rounded-full",position:"before:absolute",top:"before:top-2/4",left:"before:left-2/4",transform:"before:-translate-y-2/4 before:-translate-x-2/4",transition:"before:transition-opacity",opacity:"before:opacity-0 hover:before:opacity-10"}},ripple:{display:"inline-block",top:"top-2/4",left:"left-2/4",transform:"-translate-x-2/4 -translate-y-2/4",p:"p-5",borderRadius:"rounded-full"},label:{color:"text-gray-700",fontWeight:"font-light",userSelect:"select-none",cursor:"cursor-pointer",mt:"mt-px",ml:"ml-3",mb:"mb-0"},disabled:{opacity:"opacity-50",pointerEvents:"pointer-events-none"}},colors:r.default}},a=o})(Vce);var Hce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{tab:function(){return r},default:function(){return n}});var r={defaultProps:{className:"",activeClassName:"",disabled:!1},styles:{base:{tab:{initial:{display:"flex",alignItems:"items-center",justifyContent:"justify-center",textAlign:"text-center",width:"w-full",height:"h-full",position:"relative",bg:"bg-transparent",py:"py-1",px:"px-2",color:"text-blue-gray-900",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-base",fontWeight:"font-normal",lineHeight:"leading-relaxed",userSelect:"select-none",cursor:"cursor-pointer"},disabled:{opacity:"opacity-50",cursor:"cursor-not-allowed",pointerEvents:"pointer-events-none",userSelect:"select-none"}},indicator:{position:"absolute",inset:"inset-0",zIndex:"z-10",height:"h-full",bg:"bg-white",borderRadius:"rounded-md",boxShadow:"shadow"}}}},n=r})(Hce);var Gce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{tabs:function(){return r},default:function(){return n}});var r={defaultProps:{className:"",orientation:"horizontal"},styles:{base:{overflow:"overflow-hidden"},horizontal:{display:"block"},vertical:{display:"flex"}}},n=r})(Gce);var Wce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{tabsBody:function(){return r},default:function(){return n}});var r={defaultProps:{animate:{unmount:{},mount:{}},className:""},styles:{base:{display:"block",width:"w-full",position:"relative",bg:"bg-transparent",overflow:"overflow-hidden"}}},n=r})(Wce);var qce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{tabsHeader:function(){return r},default:function(){return n}});var r={defaultProps:{className:""},styles:{base:{display:"flex",position:"relative",bg:"bg-blue-gray-50",bgOpacity:"bg-opacity-60",borderRadius:"rounded-lg",p:"p-1"},horizontal:{flexDirection:"flex-row"},vertical:{flexDirection:"flex-col"}}},n=r})(qce);var Xce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{tabPanel:function(){return r},default:function(){return n}});var r={defaultProps:{className:""},styles:{base:{width:"w-full",height:"h-max",color:"text-gray-700",p:"p-4",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-base",fontWeight:"font-light",lineHeight:"leading-relaxed"}}},n=r})(Xce);var Yce={},Kce={},Jce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-1.5",fontSize:"peer-placeholder-shown:text-sm",floated:{fontSize:"text-[11px] peer-focus:text-[11px]"},before:{content:"before:content[' ']",display:"before:block",boxSizing:"before:box-border",width:"before:w-2.5",height:"before:h-1.5",mt:"before:mt-[6.5px]",mr:"before:mr-1",borderColor:"peer-placeholder-shown:before:border-transparent",borderRadius:"before:rounded-tl-md",floated:{bt:"before:border-t peer-focus:before:border-t-2",bl:"before:border-l peer-focus:before:border-l-2"},pointerEvents:"before:pointer-events-none",transition:"before:transition-all",disabled:"peer-disabled:before:border-transparent"},after:{content:"after:content[' ']",display:"after:block",flexGrow:"after:flex-grow",boxSizing:"after:box-border",width:"after:w-2.5",height:"after:h-1.5",mt:"after:mt-[6.5px]",ml:"after:ml-1",borderColor:"peer-placeholder-shown:after:border-transparent",borderRadius:"after:rounded-tr-md",floated:{bt:"after:border-t peer-focus:after:border-t-2",br:"after:border-r peer-focus:after:border-r-2"},pointerEvents:"after:pointer-events-none",transition:"after:transition-all",disabled:"peer-disabled:after:border-transparent"}},r=t})(Jce);var Qce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-gray-500"},gray:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-gray-900"},brown:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-brown-500"},"deep-orange":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-orange-500"},orange:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-orange-500"},amber:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-amber-500"},yellow:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-yellow-500"},lime:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-lime-500"},"light-green":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-green-500"},green:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-green-500"},teal:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-teal-500"},cyan:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-cyan-500"},"light-blue":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-blue-500"},blue:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-500"},indigo:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-indigo-500"},"deep-purple":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-purple-500"},purple:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-purple-500"},pink:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-pink-500"},red:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-red-500"}},r=t})(Qce);var Zce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{color:"text-blue-gray-400 peer-focus:text-blue-gray-500",before:"before:border-blue-gray-200 peer-focus:before:!border-blue-gray-500",after:"after:border-blue-gray-200 peer-focus:after:!border-blue-gray-500"},gray:{color:"text-blue-gray-400 peer-focus:text-gray-900",before:"before:border-blue-gray-200 peer-focus:before:!border-gray-900",after:"after:border-blue-gray-200 peer-focus:after:!border-gray-900"},brown:{color:"text-blue-gray-400 peer-focus:text-brown-500",before:"before:border-blue-gray-200 peer-focus:before:!border-brown-500",after:"after:border-blue-gray-200 peer-focus:after:!border-brown-500"},"deep-orange":{color:"text-blue-gray-400 peer-focus:text-deep-orange-500",before:"before:border-blue-gray-200 peer-focus:before:!border-deep-orange-500",after:"after:border-blue-gray-200 peer-focus:after:!border-deep-orange-500"},orange:{color:"text-blue-gray-400 peer-focus:text-orange-500",before:"before:border-blue-gray-200 peer-focus:before:!border-orange-500",after:"after:border-blue-gray-200 peer-focus:after:!border-orange-500"},amber:{color:"text-blue-gray-400 peer-focus:text-amber-500",before:"before:border-blue-gray-200 peer-focus:before:!border-amber-500",after:"after:border-blue-gray-200 peer-focus:after:!border-amber-500"},yellow:{color:"text-blue-gray-400 peer-focus:text-yellow-500",before:"before:border-blue-gray-200 peer-focus:before:!border-yellow-500",after:"after:border-blue-gray-200 peer-focus:after:!border-yellow-500"},lime:{color:"text-blue-gray-400 peer-focus:text-lime-500",before:"before:border-blue-gray-200 peer-focus:before:!border-lime-500",after:"after:border-blue-gray-200 peer-focus:after:!border-lime-500"},"light-green":{color:"text-blue-gray-400 peer-focus:text-light-green-500",before:"before:border-blue-gray-200 peer-focus:before:!border-light-green-500",after:"after:border-blue-gray-200 peer-focus:after:!border-light-green-500"},green:{color:"text-blue-gray-400 peer-focus:text-green-500",before:"before:border-blue-gray-200 peer-focus:before:!border-green-500",after:"after:border-blue-gray-200 peer-focus:after:!border-green-500"},teal:{color:"text-blue-gray-400 peer-focus:text-teal-500",before:"before:border-blue-gray-200 peer-focus:before:!border-teal-500",after:"after:border-blue-gray-200 peer-focus:after:!border-teal-500"},cyan:{color:"text-blue-gray-400 peer-focus:text-cyan-500",before:"before:border-blue-gray-200 peer-focus:before:!border-cyan-500",after:"after:border-blue-gray-200 peer-focus:after:!border-cyan-500"},"light-blue":{color:"text-blue-gray-400 peer-focus:text-light-blue-500",before:"before:border-blue-gray-200 peer-focus:before:!border-light-blue-500",after:"after:border-blue-gray-200 peer-focus:after:!border-light-blue-500"},blue:{color:"text-blue-gray-400 peer-focus:text-blue-500",before:"before:border-blue-gray-200 peer-focus:before:!border-blue-500",after:"after:border-blue-gray-200 peer-focus:after:!border-blue-500"},indigo:{color:"text-blue-gray-400 peer-focus:text-indigo-500",before:"before:border-blue-gray-200 peer-focus:before:!border-indigo-500",after:"after:border-blue-gray-200 peer-focus:after:!border-indigo-500"},"deep-purple":{color:"text-blue-gray-400 peer-focus:text-deep-purple-500",before:"before:border-blue-gray-200 peer-focus:before:!border-deep-purple-500",after:"after:border-blue-gray-200 peer-focus:after:!border-deep-purple-500"},purple:{color:"text-blue-gray-400 peer-focus:text-purple-500",before:"before:border-blue-gray-200 peer-focus:before:!border-purple-500",after:"after:border-blue-gray-200 peer-focus:after:!border-purple-500"},pink:{color:"text-blue-gray-400 peer-focus:text-pink-500",before:"before:border-blue-gray-200 peer-focus:before:!border-pink-500",after:"after:border-blue-gray-200 peer-focus:after:!border-pink-500"},red:{color:"text-blue-gray-400 peer-focus:text-red-500",before:"before:border-blue-gray-200 peer-focus:before:!border-red-500",after:"after:border-blue-gray-200 peer-focus:after:!border-red-500"}},r=t})(Zce);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(Jce),r=i(Qce),n=i(Zce);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{textarea:{borderWidth:"placeholder-shown:border",borderColor:"placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200",floated:{borderWidth:"border focus:border-2",borderColor:"border-t-transparent focus:border-t-transparent"}},label:t.default},sizes:{md:{container:{height:"h-10"},textarea:{fontSize:"text-sm",px:"px-3",py:"py-2.5",borderRadius:"rounded-[7px]"},label:{lineHeight:"peer-placeholder-shown:leading-[3.75]"}},lg:{container:{height:"h-11"},textarea:{fontSize:"text-sm",px:"px-3",py:"py-3",borderRadius:"rounded-md"},label:{lineHeight:"peer-placeholder-shown:leading-[4.1]"}}},colors:{textarea:r.default,label:n.default},error:{textarea:{borderColor:"border-red-500 placeholder-shown:border-t-red-500 placeholder-shown:border-red-500",borderColorFocused:"focus:border-red-500"},label:{color:"text-red-500 peer-focus:text-red-500 peer-placeholder-shown:text-red-500",before:"before:border-red-500 peer-focus:before:border-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},success:{textarea:{borderColor:"border-green-500 placeholder-shown:border-t-green-500 placeholder-shown:border-green-500",borderColorFocused:"focus:border-green-500"},label:{color:"text-green-500 peer-focus:text-green-500 peer-placeholder-shown:text-green-500",before:"before:border-green-500 peer-focus:before:border-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"}},shrink:{textarea:{borderTop:"!border-t-transparent"},label:{fontSize:"!text-[11px]",lineHeight:"!leading-tight",borderColor:"before:!border-blue-gray-200 after:!border-blue-gray-200"}}},a=o})(Kce);var $ce={},ede={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-1.5",fontSize:"peer-placeholder-shown:text-sm",floated:{fontSize:"text-[11px] peer-focus:text-[11px]"},after:{content:"after:content[' ']",display:"after:block",width:"after:w-full",position:"after:absolute",bottom:"after:-bottom-0",left:"left-0",borderWidth:"after:border-b-2",scale:"after:scale-x-0",floated:{scale:"peer-focus:after:scale-x-100"},transition:"after:transition-transform after:duration-300"}},r=t})(ede);var tde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-gray-500"},gray:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-gray-900"},brown:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-brown-500"},"deep-orange":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-orange-500"},orange:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-orange-500"},amber:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-amber-500"},yellow:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-yellow-500"},lime:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-lime-500"},"light-green":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-green-500"},green:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-green-500"},teal:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-teal-500"},cyan:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-cyan-500"},"light-blue":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-blue-500"},blue:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-500"},indigo:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-indigo-500"},"deep-purple":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-purple-500"},purple:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-purple-500"},pink:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-pink-500"},red:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-red-500"}},r=t})(tde);var rde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{color:"text-blue-gray-500 peer-focus:text-blue-gray-500",after:"after:border-blue-gray-500 peer-focus:after:!border-blue-gray-500"},gray:{color:"text-gray-500 peer-focus:text-gray-900",after:"after:border-gray-500 peer-focus:after:!border-gray-900"},brown:{color:"text-blue-gray-500 peer-focus:text-brown-500",after:"after:border-brown-500 peer-focus:after:!border-brown-500"},"deep-orange":{color:"text-blue-gray-500 peer-focus:text-deep-orange-500",after:"after:border-deep-orange-500 peer-focus:after:!border-deep-orange-500"},orange:{color:"text-blue-gray-500 peer-focus:text-orange-500",after:"after:border-orange-500 peer-focus:after:!border-orange-500"},amber:{color:"text-blue-gray-500 peer-focus:text-amber-500",after:"after:border-amber-500 peer-focus:after:!border-amber-500"},yellow:{color:"text-blue-gray-500 peer-focus:text-yellow-500",after:"after:border-yellow-500 peer-focus:after:!border-yellow-500"},lime:{color:"text-blue-gray-500 peer-focus:text-lime-500",after:"after:border-lime-500 peer-focus:after:!border-lime-500"},"light-green":{color:"text-blue-gray-500 peer-focus:text-light-green-500",after:"after:border-light-green-500 peer-focus:after:!border-light-green-500"},green:{color:"text-blue-gray-500 peer-focus:text-green-500",after:"after:border-green-500 peer-focus:after:!border-green-500"},teal:{color:"text-blue-gray-500 peer-focus:text-teal-500",after:"after:border-teal-500 peer-focus:after:!border-teal-500"},cyan:{color:"text-blue-gray-500 peer-focus:text-cyan-500",after:"after:border-cyan-500 peer-focus:after:!border-cyan-500"},"light-blue":{color:"text-blue-gray-500 peer-focus:text-light-blue-500",after:"after:border-light-blue-500 peer-focus:after:!border-light-blue-500"},blue:{color:"text-blue-gray-500 peer-focus:text-blue-500",after:"after:border-blue-500 peer-focus:after:!border-blue-500"},indigo:{color:"text-blue-gray-500 peer-focus:text-indigo-500",after:"after:border-indigo-500 peer-focus:after:!border-indigo-500"},"deep-purple":{color:"text-blue-gray-500 peer-focus:text-deep-purple-500",after:"after:border-deep-purple-500 peer-focus:after:!border-deep-purple-500"},purple:{color:"text-blue-gray-500 peer-focus:text-purple-500",after:"after:border-purple-500 peer-focus:after:!border-purple-500"},pink:{color:"text-blue-gray-500 peer-focus:text-pink-500",after:"after:border-pink-500 peer-focus:after:!border-pink-500"},red:{color:"text-blue-gray-500 peer-focus:text-red-500",after:"after:border-red-500 peer-focus:after:!border-red-500"}},r=t})(rde);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(ede),r=i(tde),n=i(rde);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{textarea:{borderWidth:"border-b",borderColor:"placeholder-shown:border-blue-gray-200"},label:t.default},sizes:{md:{container:{height:"h-11"},textarea:{fontSize:"text-sm",pt:"pt-4",pb:"pb-1.5"},label:{lineHeight:"peer-placeholder-shown:leading-[4.25]"}},lg:{container:{height:"h-12"},textarea:{fontSize:"text-sm",px:"px-px",pt:"pt-5",pb:"pb-2"},label:{lineHeight:"peer-placeholder-shown:leading-[4.875]"}}},colors:{textarea:r.default,label:n.default},error:{textarea:{borderColor:"border-red-500 placeholder-shown:border-red-500",borderColorFocused:"focus:border-red-500"},label:{color:"text-red-500 peer-focus:text-red-500 peer-placeholder-shown:text-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},success:{textarea:{borderColor:"border-green-500 placeholder-shown:border-green-500",borderColorFocused:"focus:border-green-500"},label:{color:"text-green-500 peer-focus:text-green-500 peer-placeholder-shown:text-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"}},shrink:{textarea:{},label:{fontSize:"!text-[11px]",lineHeight:"!leading-tight"}}},a=o})($ce);var nde={},ide={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={position:"-top-2.5",fontSize:"text-sm peer-focus:text-sm",after:{content:"after:content[' ']",display:"after:block",width:"after:w-full",position:"after:absolute",bottom:"after:-bottom-1",left:"left-0",borderWidth:"after:border-b-2",scale:"after:scale-x-0",floated:{scale:"peer-focus:after:scale-x-100"},transition:"after:transition-transform after:duration-300"}},r=t})(ide);var ode={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-gray-500"},gray:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-gray-900"},brown:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-brown-500"},"deep-orange":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-orange-500"},orange:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-orange-500"},amber:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-amber-500"},yellow:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-yellow-500"},lime:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-lime-500"},"light-green":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-green-500"},green:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-green-500"},teal:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-teal-500"},cyan:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-cyan-500"},"light-blue":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-light-blue-500"},blue:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-blue-500"},indigo:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-indigo-500"},"deep-purple":{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-deep-purple-500"},purple:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-purple-500"},pink:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-pink-500"},red:{borderColor:"border-blue-gray-200",borderColorFocused:"focus:border-red-500"}},r=t})(ode);var ade={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{color:"text-blue-gray-500 peer-focus:text-blue-gray-500",after:"after:border-blue-gray-500 peer-focus:after:border-blue-gray-500"},gray:{color:"text-gray-500 peer-focus:text-gray-900",after:"after:border-gray-500 peer-focus:after:border-gray-900"},brown:{color:"text-blue-gray-500 peer-focus:text-brown-500",after:"after:border-brown-500 peer-focus:after:border-brown-500"},"deep-orange":{color:"text-blue-gray-500 peer-focus:text-deep-orange-500",after:"after:border-deep-orange-500 peer-focus:after:border-deep-orange-500"},orange:{color:"text-blue-gray-500 peer-focus:text-orange-500",after:"after:border-orange-500 peer-focus:after:border-orange-500"},amber:{color:"text-blue-gray-500 peer-focus:text-amber-500",after:"after:border-amber-500 peer-focus:after:border-amber-500"},yellow:{color:"text-blue-gray-500 peer-focus:text-yellow-500",after:"after:border-yellow-500 peer-focus:after:border-yellow-500"},lime:{color:"text-blue-gray-500 peer-focus:text-lime-500",after:"after:border-lime-500 peer-focus:after:border-lime-500"},"light-green":{color:"text-blue-gray-500 peer-focus:text-light-green-500",after:"after:border-light-green-500 peer-focus:after:border-light-green-500"},green:{color:"text-blue-gray-500 peer-focus:text-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"},teal:{color:"text-blue-gray-500 peer-focus:text-teal-500",after:"after:border-teal-500 peer-focus:after:border-teal-500"},cyan:{color:"text-blue-gray-500 peer-focus:text-cyan-500",after:"after:border-cyan-500 peer-focus:after:border-cyan-500"},"light-blue":{color:"text-blue-gray-500 peer-focus:text-light-blue-500",after:"after:border-light-blue-500 peer-focus:after:border-light-blue-500"},blue:{color:"text-blue-gray-500 peer-focus:text-blue-500",after:"after:border-blue-500 peer-focus:after:border-blue-500"},indigo:{color:"text-blue-gray-500 peer-focus:text-indigo-500",after:"after:border-indigo-500 peer-focus:after:border-indigo-500"},"deep-purple":{color:"text-blue-gray-500 peer-focus:text-deep-purple-500",after:"after:border-deep-purple-500 peer-focus:after:border-deep-purple-500"},purple:{color:"text-blue-gray-500 peer-focus:text-purple-500",after:"after:border-purple-500 peer-focus:after:border-purple-500"},pink:{color:"text-blue-gray-500 peer-focus:text-pink-500",after:"after:border-pink-500 peer-focus:after:border-pink-500"},red:{color:"text-blue-gray-500 peer-focus:text-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},r=t})(ade);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var t=i(ide),r=i(ode),n=i(ade);function i(s){return s&&s.__esModule?s:{default:s}}var o={base:{textarea:{borderWidth:"border-b",borderColor:"placeholder-shown:border-blue-gray-200"},label:t.default},sizes:{md:{container:{height:"h-11"},textarea:{fontSize:"text-sm",pt:"pt-4",pb:"pb-1.5"},label:{lineHeight:"peer-placeholder-shown:leading-tight"}},lg:{container:{height:"h-12"},textarea:{fontSize:"text-sm",px:"px-px",pt:"pt-5",pb:"pb-2"},label:{lineHeight:"peer-placeholder-shown:leading-tight"}}},colors:{textarea:r.default,label:n.default},error:{textarea:{borderColor:"border-red-500 placeholder-shown:border-red-500",borderColorFocused:"focus:border-red-500"},label:{color:"text-red-500 peer-focus:text-red-500 peer-placeholder-shown:text-red-500",after:"after:border-red-500 peer-focus:after:border-red-500"}},success:{textarea:{borderColor:"border-green-500 placeholder-shown:border-green-500",borderColorFocused:"focus:border-green-500"},label:{color:"text-green-500 peer-focus:text-green-500 peer-placeholder-shown:text-green-500",after:"after:border-green-500 peer-focus:after:border-green-500"}},shrink:{textarea:{},label:{}}},a=o})(nde);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){for(var c in d)Object.defineProperty(u,c,{enumerable:!0,get:d[c]})}t(e,{textarea:function(){return s},default:function(){return l}});var r=a(Kce),n=a($ce),i=a(nde),o=GM;function a(u){return u&&u.__esModule?u:{default:u}}var s={defaultProps:{variant:"outlined",size:"md",color:"gray",label:"",error:!1,success:!1,resize:!0,labelProps:void 0,containerProps:void 0,shrink:!1,className:""},valid:{variants:o.propTypesVariant,sizes:o.propTypesSize,colors:o.propTypesColor},styles:{base:{container:{position:"relative",width:"w-full",minWidth:"min-w-[200px]"},textarea:{peer:"peer",width:"w-full",height:"h-full",minHeight:"min-h-[100px]",bg:"bg-transparent",color:"text-blue-gray-700",fontFamily:"font-sans",fontWeight:"font-normal",outline:"outline outline-0 focus:outline-0",resize:"resize-y",disabled:"disabled:bg-blue-gray-50 disabled:border-0 disabled:resize-none",transition:"transition-all"},label:{display:"flex",width:"w-full",height:"h-full",userSelect:"select-none",pointerEvents:"pointer-events-none",position:"absolute",left:"left-0",fontWeight:"font-normal",color:"peer-placeholder-shown:text-blue-gray-500",lineHeight:"leading-tight peer-focus:leading-tight",disabled:"peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500",transition:"transition-all"}},variants:{outlined:r.default,standard:n.default,static:i.default}}},l=s})(Yce);var sde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{tooltip:function(){return r},default:function(){return n}});var r={defaultProps:{interactive:!1,placement:"top",offset:5,dismiss:{},animate:{unmount:{},mount:{}},className:""},styles:{base:{bg:"bg-black",py:"py-1.5",px:"px-3",borderRadius:"rounded-lg",fontFamily:"font-sans",fontSize:"text-sm",fontWeight:"font-normal",color:"text-white",outline:"focus:outline-none",overflowWrap:"break-words",zIndex:"z-[999]",whiteSpace:"whitespace-normal"}}},n=r})(sde);var lde={},ude={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={inherit:{color:"text-inherit"},current:{color:"text-current"},black:{color:"text-black"},white:{color:"text-white"},"blue-gray":{color:"text-blue-gray-900",gradient:"bg-gradient-to-tr from-blue-gray-600 to-blue-gray-400"},gray:{color:"text-gray-700",gradient:"bg-gradient-to-tr from-gray-600 to-gray-400"},brown:{color:"text-brown-500",gradient:"bg-gradient-to-tr from-brown-600 to-brown-400"},"deep-orange":{color:"text-deep-orange-500",gradient:"bg-gradient-to-tr from-deep-orange-600 to-deep-orange-400"},orange:{color:"text-orange-500",gradient:"bg-gradient-to-tr from-orange-600 to-orange-400"},amber:{color:"text-amber-500",gradient:"bg-gradient-to-tr from-amber-600 to-amber-400"},yellow:{color:"text-yellow-500",gradient:"bg-gradient-to-tr from-yellow-600 to-yellow-400"},lime:{color:"text-lime-500",gradient:"bg-gradient-to-tr from-lime-600 to-lime-400"},"light-green":{color:"text-light-green-500",gradient:"bg-gradient-to-tr from-light-green-600 to-light-green-400"},green:{color:"text-green-500",gradient:"bg-gradient-to-tr from-green-600 to-green-400"},teal:{color:"text-teal-500",gradient:"bg-gradient-to-tr from-teal-600 to-teal-400"},cyan:{color:"text-cyan-500",gradient:"bg-gradient-to-tr from-cyan-600 to-cyan-400"},"light-blue":{color:"text-light-blue-500",gradient:"bg-gradient-to-tr from-light-blue-600 to-light-blue-400"},blue:{color:"text-blue-500",gradient:"bg-gradient-to-tr from-blue-600 to-blue-400"},indigo:{color:"text-indigo-500",gradient:"bg-gradient-to-tr from-indigo-600 to-indigo-400"},"deep-purple":{color:"text-deep-purple-500",gradient:"bg-gradient-to-tr from-deep-purple-600 to-deep-purple-400"},purple:{color:"text-purple-500",gradient:"bg-gradient-to-tr from-purple-600 to-purple-400"},pink:{color:"text-pink-500",gradient:"bg-gradient-to-tr from-pink-600 to-pink-400"},red:{color:"text-red-500",gradient:"bg-gradient-to-tr from-red-600 to-red-400"}},r=t})(ude);var jH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{propTypesVariant:function(){return c},propTypesColor:function(){return h},propTypesAs:function(){return f},propTypesTextGradient:function(){return g},propTypesClassName:function(){return y},propTypesChildren:function(){return m}});var r=a(Kt),n=Un;function i(p,v){(v==null||v>p.length)&&(v=p.length);for(var b=0,x=new Array(v);b<v;b++)x[b]=p[b];return x}function o(p){if(Array.isArray(p))return i(p)}function a(p){return p&&p.__esModule?p:{default:p}}function s(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(p){return o(p)||s(p)||d(p)||l()}function d(p,v){if(p){if(typeof p=="string")return i(p,v);var b=Object.prototype.toString.call(p).slice(8,-1);if(b==="Object"&&p.constructor&&(b=p.constructor.name),b==="Map"||b==="Set")return Array.from(b);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return i(p,v)}}var c=["h1","h2","h3","h4","h5","h6","lead","paragraph","small"],h=["inherit","current","black","white"].concat(u(n.propTypesColors)),f=r.default.elementType,g=r.default.bool,y=r.default.string,m=r.default.node.isRequired})(jH);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{typography:function(){return o},default:function(){return a}});var r=i(ude),n=jH;function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{variant:"paragraph",color:"inherit",textGradient:!1,className:""},valid:{variants:n.propTypesVariant,colors:n.propTypesColor},styles:{variants:{h1:{display:"block",fontSmoothing:"antialiased",letterSpacing:"tracking-normal",fontFamily:"font-sans",fontSize:"text-5xl",fontWeight:"font-semibold",lineHeight:"leading-tight"},h2:{display:"block",fontSmoothing:"antialiased",letterSpacing:"tracking-normal",fontFamily:"font-sans",fontSize:"text-4xl",fontWeight:"font-semibold",lineHeight:"leading-[1.3]"},h3:{display:"block",fontSmoothing:"antialiased",letterSpacing:"tracking-normal",fontFamily:"font-sans",fontSize:"text-3xl",fontWeight:"font-semibold",lineHeight:"leading-snug"},h4:{display:"block",fontSmoothing:"antialiased",letterSpacing:"tracking-normal",fontFamily:"font-sans",fontSize:"text-2xl",fontWeight:"font-semibold",lineHeight:"leading-snug"},h5:{display:"block",fontSmoothing:"antialiased",letterSpacing:"tracking-normal",fontFamily:"font-sans",fontSize:"text-xl",fontWeight:"font-semibold",lineHeight:"leading-snug"},h6:{display:"block",fontSmoothing:"antialiased",letterSpacing:"tracking-normal",fontFamily:"font-sans",fontSize:"text-base",fontWeight:"font-semibold",lineHeight:"leading-relaxed"},lead:{display:"block",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-xl",fontWeight:"font-normal",lineHeight:"leading-relaxed"},paragraph:{display:"block",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-base",fontWeight:"font-light",lineHeight:"leading-relaxed"},small:{display:"block",fontSmoothing:"antialiased",fontFamily:"font-sans",fontSize:"text-sm",fontWeight:"font-light",lineHeight:"leading-normal"}},textGradient:{bgClip:"bg-clip-text",color:"text-transparent"},colors:r.default}},a=o})(lde);var cde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{collapse:function(){return r},default:function(){return n}});var r={defaultProps:{animate:{unmount:{},mount:{}},className:""},styles:{base:{display:"block",width:"w-full",basis:"basis-full",overflow:"overflow-hidden"}}},n=r})(cde);var dde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{list:function(){return r},default:function(){return n}});var r={defaultProps:{ripple:!0,className:""},styles:{base:{list:{display:"flex",flexDirection:"flex-col",gap:"gap-1",minWidth:"min-w-[240px]",p:"p-2",fontFamily:"font-sans",fontSize:"text-base",fontWeight:"font-normal",color:"text-blue-gray-700"},item:{initial:{display:"flex",alignItems:"items-center",width:"w-full",padding:"p-3",borderRadius:"rounded-lg",textAlign:"text-start",lightHeight:"leading-tight",transition:"transition-all",bg:"hover:bg-blue-gray-50 hover:bg-opacity-80 focus:bg-blue-gray-50 focus:bg-opacity-80 active:bg-blue-gray-50 active:bg-opacity-80",color:"hover:text-blue-gray-900 focus:text-blue-gray-900 active:text-blue-gray-900",outline:"outline-none"},selected:{bg:"bg-blue-gray-50/50",color:"text-blue-gray-700"},disabled:{opacity:"opacity-50",cursor:"cursor-not-allowed",pointerEvents:"pointer-events-none",userSelect:"select-none",bg:"hover:bg-transparent focus:bg-transparent active:bg-transparent",color:"hover:text-blue-gray-500 focus:text-blue-gray-500 active:text-blue-gray-500"}},itemPrefix:{display:"grid",placeItems:"place-items-center",marginRight:"mr-4"},itemSuffix:{display:"grid",placeItems:"place-items-center",marginRight:"ml-auto justify-self-end"}}}},n=r})(dde);var hde={},fde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{divideColor:"divide-blue-gray-50"},"blue-gray":{divideColor:"divide-blue-gray-600"},gray:{divideColor:"divide-gray-800"},brown:{divideColor:"divide-brown-600"},"deep-orange":{divideColor:"divide-deep-orange-600"},orange:{divideColor:"divide-orange-600"},amber:{divideColor:"divide-amber-600"},yellow:{divideColor:"divide-yellow-600"},lime:{divideColor:"divide-lime-600"},"light-green":{divideColor:"divide-light-green-600"},green:{divideColor:"divide-green-600"},teal:{divideColor:"divide-teal-600"},cyan:{divideColor:"divide-cyan-600"},"light-blue":{divideColor:"divide-light-blue-600"},blue:{divideColor:"divide-blue-600"},indigo:{divideColor:"divide-indigo-600"},"deep-purple":{divideColor:"divide-deep-purple-600"},purple:{divideColor:"divide-purple-600"},pink:{divideColor:"divide-pink-600"},red:{divideColor:"divide-red-600"}},r=t})(fde);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{buttonGroup:function(){return o},default:function(){return a}});var r=i(fde),n=z0;function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{variant:"filled",size:"md",color:"gray",fullWidth:!1,ripple:!0,className:""},valid:{variants:n.propTypesVariant,sizes:n.propTypesSize,colors:n.propTypesColor},styles:{base:{initial:{display:"flex",flexDirection:"row"},fullWidth:{width:"w-full"}},dividerColor:r.default}},a=o})(hde);var pde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,s){for(var l in s)Object.defineProperty(a,l,{enumerable:!0,get:s[l]})}t(e,{carousel:function(){return i},default:function(){return o}});var r=n(te);function n(a){return a&&a.__esModule?a:{default:a}}var i={defaultProps:{prevArrow:function(a){var s=a.loop,l=a.handlePrev,u=a.firstIndex;return r.default.createElement("button",{onClick:l,disabled:!s&&u,className:"!absolute top-2/4 left-4 -translate-y-2/4 rounded-full select-none transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-12 max-w-[48px] h-12 max-h-[48px] text-white hover:bg-white/10 active:bg-white/30 grid place-items-center"},r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,className:"-ml-1 h-7 w-7"},r.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})))},nextArrow:function(a){var s=a.loop,l=a.handleNext,u=a.lastIndex;return r.default.createElement("button",{onClick:l,disabled:!s&&u,className:"!absolute top-2/4 right-4 -translate-y-2/4 rounded-full select-none transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-12 max-w-[48px] h-12 max-h-[48px] text-white hover:bg-white/10 active:bg-white/30 grid place-items-center"},r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,className:"ml-1 h-7 w-7"},r.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})))},navigation:function(a){var s=a.setActiveIndex,l=a.activeIndex,u=a.length;return r.default.createElement("div",{className:"absolute bottom-4 left-2/4 z-50 flex -translate-x-2/4 gap-2"},new Array(u).fill("").map(function(d,c){return r.default.createElement("span",{key:c,className:"block h-3 w-3 cursor-pointer rounded-full transition-colors content-[''] ".concat(l===c?"bg-white":"bg-white/50"),onClick:function(){return s(c)}})}))},autoplay:!1,autoplayDelay:5e3,transition:{type:"tween",duration:.5},loop:!1,className:""},styles:{base:{carousel:{position:"relative",width:"w-full",height:"h-full",overflowX:"overflow-x-hidden",display:"flex"},slide:{width:"w-full",height:"h-full",display:"inline-block",flex:"flex-none"}}}},o=i})(pde);var mde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{drawer:function(){return r},default:function(){return n}});var r={defaultProps:{size:300,overlay:!0,placement:"left",overlayProps:void 0,className:"",dismiss:void 0,onClose:void 0,transition:{type:"tween",duration:.3}},styles:{base:{drawer:{position:"fixed",zIndex:"z-[9999]",pointerEvents:"pointer-events-auto",backgroundColor:"bg-white",boxSizing:"box-border",width:"w-full",boxShadow:"shadow-2xl shadow-blue-gray-900/10"},overlay:{position:"absolute",inset:"inset-0",width:"w-full",height:"h-full",pointerEvents:"pointer-events-auto",zIndex:"z-[9995]",backgroundColor:"bg-black",backgroundOpacity:"bg-opacity-60",backdropBlur:"backdrop-blur-sm"}}}},n=r})(mde);var gde={},HH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,A){for(var M in A)Object.defineProperty(_,M,{enumerable:!0,get:A[M]})}t(e,{propTypesColor:function(){return c},propTypesInvisible:function(){return h},propTypesWithBorder:function(){return f},propTypesOverlap:function(){return g},propTypesPlacement:function(){return y},propTypesClassName:function(){return m},propTypesContent:function(){return p},propTypesChildren:function(){return v},propTypesContainerProps:function(){return b},propTypesContainerRef:function(){return x}});var r=a(Kt),n=Un;function i(_,A){(A==null||A>_.length)&&(A=_.length);for(var M=0,T=new Array(A);M<A;M++)T[M]=_[M];return T}function o(_){if(Array.isArray(_))return i(_)}function a(_){return _&&_.__esModule?_:{default:_}}function s(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(_){return o(_)||s(_)||d(_)||l()}function d(_,A){if(_){if(typeof _=="string")return i(_,A);var M=Object.prototype.toString.call(_).slice(8,-1);if(M==="Object"&&_.constructor&&(M=_.constructor.name),M==="Map"||M==="Set")return Array.from(M);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return i(_,A)}}var c=["white"].concat(u(n.propTypesColors)),h=r.default.bool,f=r.default.bool,g=["circular","square"],y=["top-start","top-end","bottom-start","bottom-end"],m=r.default.string,p=r.default.node,v=r.default.node.isRequired,b=r.default.instanceOf(Object),x=r.default.oneOfType([r.default.func,r.default.shape({current:r.default.any})])})(HH);var vde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{backgroud:"bg-white",color:"text-blue-gray-900"},"blue-gray":{backgroud:"bg-blue-gray-500",color:"text-white"},gray:{backgroud:"bg-gray-500",color:"text-white"},brown:{backgroud:"bg-brown-500",color:"text-white"},"deep-orange":{backgroud:"bg-deep-orange-500",color:"text-white"},orange:{backgroud:"bg-orange-500",color:"text-white"},amber:{backgroud:"bg-amber-500",color:"text-black"},yellow:{backgroud:"bg-yellow-500",color:"text-black"},lime:{backgroud:"bg-lime-500",color:"text-black"},"light-green":{backgroud:"bg-light-green-500",color:"text-white"},green:{backgroud:"bg-green-500",color:"text-white"},teal:{backgroud:"bg-teal-500",color:"text-white"},cyan:{backgroud:"bg-cyan-500",color:"text-white"},"light-blue":{backgroud:"bg-light-blue-500",color:"text-white"},blue:{backgroud:"bg-blue-500",color:"text-white"},indigo:{backgroud:"bg-indigo-500",color:"text-white"},"deep-purple":{backgroud:"bg-deep-purple-500",color:"text-white"},purple:{backgroud:"bg-purple-500",color:"text-white"},pink:{backgroud:"bg-pink-500",color:"text-white"},red:{backgroud:"bg-red-500",color:"text-white"}},r=t})(vde);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{badge:function(){return o},default:function(){return a}});var r=HH,n=i(vde);function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{color:"red",invisible:!1,withBorder:!1,overlap:"square",content:void 0,placement:"top-end",className:void 0,containerProps:void 0},valid:{colors:r.propTypesColor,overlaps:r.propTypesOverlap,placements:r.propTypesPlacement},styles:{base:{container:{position:"relative",display:"inline-flex"},badge:{initial:{position:"absolute",minWidth:"min-w-[12px]",minHeight:"min-h-[12px]",borderRadius:"rounded-full",paddingY:"py-1",paddingX:"px-1",fontSize:"text-xs",fontWeight:"font-medium",content:"content-['']",lineHeight:"leading-none",display:"grid",placeItems:"place-items-center"},withBorder:{borderWidth:"border-2",borderColor:"border-white"},withContent:{minWidth:"min-w-[24px]",minHeight:"min-h-[24px]"}}},placements:{"top-start":{square:{top:"top-[4%]",left:"left-[2%]",translateX:"-translate-x-2/4",translateY:"-translate-y-2/4"},circular:{top:"top-[14%]",left:"left-[14%]",translateX:"-translate-x-2/4",translateY:"-translate-y-2/4"}},"top-end":{square:{top:"top-[4%]",right:"right-[2%]",translateX:"translate-x-2/4",translateY:"-translate-y-2/4"},circular:{top:"top-[14%]",right:"right-[14%]",translateX:"translate-x-2/4",translateY:"-translate-y-2/4"}},"bottom-start":{square:{bottom:"bottom-[4%]",left:"left-[2%]",translateX:"-translate-x-2/4",translateY:"translate-y-2/4"},circular:{bottom:"bottom-[14%]",left:"left-[14%]",translateX:"-translate-x-2/4",translateY:"translate-y-2/4"}},"bottom-end":{square:{bottom:"bottom-[4%]",right:"right-[2%]",translateX:"translate-x-2/4",translateY:"translate-y-2/4"},circular:{bottom:"bottom-[14%]",right:"right-[14%]",translateX:"translate-x-2/4",translateY:"translate-y-2/4"}}},colors:n.default}},a=o})(gde);var yde={},GH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(b,x){for(var _ in x)Object.defineProperty(b,_,{enumerable:!0,get:x[_]})}t(e,{propTypesCount:function(){return c},propTypesValue:function(){return h},propTypesRatedIcon:function(){return f},propTypesUnratedIcon:function(){return g},propTypesColor:function(){return y},propTypesOnChange:function(){return m},propTypesClassName:function(){return p},propTypesReadonly:function(){return v}});var r=a(Kt),n=Un;function i(b,x){(x==null||x>b.length)&&(x=b.length);for(var _=0,A=new Array(x);_<x;_++)A[_]=b[_];return A}function o(b){if(Array.isArray(b))return i(b)}function a(b){return b&&b.__esModule?b:{default:b}}function s(b){if(typeof Symbol<"u"&&b[Symbol.iterator]!=null||b["@@iterator"]!=null)return Array.from(b)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(b){return o(b)||s(b)||d(b)||l()}function d(b,x){if(b){if(typeof b=="string")return i(b,x);var _=Object.prototype.toString.call(b).slice(8,-1);if(_==="Object"&&b.constructor&&(_=b.constructor.name),_==="Map"||_==="Set")return Array.from(_);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return i(b,x)}}var c=r.default.number,h=r.default.number,f=r.default.oneOfType([r.default.node,r.default.instanceOf(Object)]),g=r.default.oneOfType([r.default.node,r.default.instanceOf(Object)]),y=["white"].concat(u(n.propTypesColors)),m=r.default.func,p=r.default.string,v=r.default.bool})(GH);var bde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{color:"text-white"},"blue-gray":{color:"text-blue-gray-500"},gray:{color:"text-gray-500"},brown:{color:"text-brown-500"},"deep-orange":{color:"text-deep-orange-500"},orange:{color:"text-orange-500"},amber:{color:"text-amber-500"},yellow:{color:"text-yellow-700"},lime:{color:"text-lime-500"},"light-green":{color:"text-light-green-500"},green:{color:"text-green-500"},teal:{color:"text-teal-500"},cyan:{color:"text-cyan-500"},"light-blue":{color:"text-light-blue-500"},blue:{color:"text-blue-500"},indigo:{color:"text-indigo-500"},"deep-purple":{color:"text-deep-purple-500"},purple:{color:"text-purple-500"},pink:{color:"text-pink-500"},red:{color:"text-red-500"}},r=t})(bde);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,u){for(var d in u)Object.defineProperty(l,d,{enumerable:!0,get:u[d]})}t(e,{rating:function(){return a},default:function(){return s}});var r=o(te),n=GH,i=o(bde);function o(l){return l&&l.__esModule?l:{default:l}}var a={defaultProps:{count:5,value:0,ratedIcon:r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6"},r.default.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z",clipRule:"evenodd"})),unratedIcon:r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6"},r.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})),ratedColor:"yellow",unratedColor:"blue-gray",className:void 0,onChange:void 0,readonly:!1},valid:{colors:n.propTypesColor},styles:{base:{rating:{display:"inline-flex",alignItems:"items-center"},icon:{width:"w-5",height:"h-5",color:"text-inherit",cursor:"cursor-pointer"}},colors:i.default}},s=a})(yde);var xde={},WH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(b,x){for(var _ in x)Object.defineProperty(b,_,{enumerable:!0,get:x[_]})}t(e,{propTypesColor:function(){return o},propTypesSize:function(){return a},propTypesClassName:function(){return s},propTypesTrackClassName:function(){return l},propTypesThumbClassName:function(){return u},propTypesBarClassName:function(){return d},propTypesDefaultValue:function(){return c},propTypesValue:function(){return h},propTypesOnChange:function(){return f},propTypesMin:function(){return g},propTypesMax:function(){return y},propTypesStep:function(){return m},propTypesInputRef:function(){return p},propTypesInputProps:function(){return v}});var r=i(Kt),n=Un;function i(b){return b&&b.__esModule?b:{default:b}}var o=n.propTypesColors,a=["sm","md","lg"],s=r.default.string,l=r.default.string,u=r.default.string,d=r.default.string,c=r.default.oneOfType([r.default.number,r.default.string]),h=r.default.oneOfType([r.default.number,r.default.string]),f=r.default.func,g=r.default.oneOfType([r.default.number,r.default.string]),y=r.default.oneOfType([r.default.number,r.default.string]),m=r.default.oneOfType([r.default.number,r.default.string]),p=r.default.oneOfType([r.default.func,r.default.shape({current:r.default.any})]),v=r.default.instanceOf(Object)})(WH);var wde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={"blue-gray":{color:"text-blue-gray-500"},gray:{color:"text-gray-900"},brown:{color:"text-brown-500"},"deep-orange":{color:"text-deep-orange-500"},orange:{color:"text-orange-500"},amber:{color:"text-amber-500"},yellow:{color:"text-yellow-500"},lime:{color:"text-lime-500"},"light-green":{color:"text-light-green-500"},green:{color:"text-green-500"},teal:{color:"text-teal-500"},cyan:{color:"text-cyan-500"},"light-blue":{color:"text-light-blue-500"},blue:{color:"text-blue-500"},indigo:{color:"text-indigo-500"},"deep-purple":{color:"text-deep-purple-500"},purple:{color:"text-purple-500"},pink:{color:"text-pink-500"},red:{color:"text-red-500"}},r=t})(wde);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{slider:function(){return o},default:function(){return a}});var r=WH,n=i(wde);function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{color:"gray",size:"md",min:void 0,max:void 0,step:"any",className:"",trackClassName:"",thumbClassName:"",barClassName:"",inputProps:void 0},valid:{sizes:r.propTypesSize,colors:r.propTypesColor},styles:{base:{container:{position:"relative",width:"w-full",minWidth:"min-w-[200px]"},slider:{width:"w-full",position:"absolute",inset:"inset-0",backgroundColor:"bg-transparent",cursor:"cursor-pointer",outline:"focus:outline-none focus:outline-0",appearance:"appearance-none [-webkit-appearance:none]"},track:{height:"[&::-webkit-slider-runnable-track]:h-full [&::-moz-range-track]:h-full",borderRadius:"[&::-webkit-slider-runnable-track]:rounded-full [&::-moz-range-track]:rounded-full",backgroundColor:"[&::-webkit-slider-runnable-track]:bg-blue-gray-100 [&::-moz-range-track]:bg-blue-gray-100"},thumb:{appearance:"[&::-moz-range-thumb]:appearance-none [&::-moz-range-thumb]:[-webkit-appearance:none] [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:[-webkit-appearance:none]",borderRadius:"[&::-moz-range-thumb]:rounded-full [&::-webkit-slider-thumb]:rounded-full",border:"[&::-moz-range-thumb]:border-0 [&::-webkit-slider-thumb]:border-0",ringWidth:"[&::-moz-range-thumb]:ring-2 [&::-webkit-slider-thumb]:ring-2",ringColor:"[&::-moz-range-thumb]:ring-current [&::-webkit-slider-thumb]:ring-current",backgroundColor:"[&::-moz-range-thumb]:bg-white [&::-webkit-slider-thumb]:bg-white",position:"[&::-moz-range-thumb]:relative [&::-webkit-slider-thumb]:relative",zIndex:"[&::-moz-range-thumb]:z-20 [&::-webkit-slider-thumb]:z-20"},bar:{position:"absolute",inset:"inset-0",zIndex:"z-10",borderRadius:"rounded-l-full",height:"h-full",pointerEvents:"pointer-events-none",backgroundColor:"bg-current"}},sizes:{sm:{container:{height:"h-1"},thumb:{width:"[&::-moz-range-thumb]:w-2.5 [&::-webkit-slider-thumb]:w-2.5",height:"[&::-moz-range-thumb]:h-2.5 [&::-webkit-slider-thumb]:h-2.5",marginTop:"[&::-moz-range-thumb]:-mt-[3px] [&::-webkit-slider-thumb]:-mt-[3px]"},slider:{},track:{},bar:{}},md:{container:{height:"h-2"},thumb:{width:"[&::-moz-range-thumb]:w-3.5 [&::-webkit-slider-thumb]:w-3.5",height:"[&::-moz-range-thumb]:h-3.5 [&::-webkit-slider-thumb]:h-3.5",marginTop:"[&::-moz-range-thumb]:-mt-[3px] [&::-webkit-slider-thumb]:-mt-[3px]"},slider:{},track:{},bar:{}},lg:{container:{height:"h-3"},thumb:{width:"[&::-moz-range-thumb]:w-5 [&::-webkit-slider-thumb]:w-5",height:"[&::-moz-range-thumb]:h-5 [&::-webkit-slider-thumb]:h-5",marginTop:"[&::-moz-range-thumb]:-mt-1 [&::-webkit-slider-thumb]:-mt-1"},slider:{},track:{},bar:{}}},colors:n.default}},a=o})(xde);var _de={},qH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{propTypesColor:function(){return c},propTypesClassName:function(){return h}});var r=a(Kt),n=Un;function i(f,g){(g==null||g>f.length)&&(g=f.length);for(var y=0,m=new Array(g);y<g;y++)m[y]=f[y];return m}function o(f){if(Array.isArray(f))return i(f)}function a(f){return f&&f.__esModule?f:{default:f}}function s(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(f){return o(f)||s(f)||d(f)||l()}function d(f,g){if(f){if(typeof f=="string")return i(f,g);var y=Object.prototype.toString.call(f).slice(8,-1);if(y==="Object"&&f.constructor&&(y=f.constructor.name),y==="Map"||y==="Set")return Array.from(y);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return i(f,g)}}var c=["white"].concat(u(n.propTypesColors)),h=r.default.string})(qH);var Sde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={white:{color:"text-white"},"blue-gray":{color:"text-blue-gray-500"},gray:{color:"text-gray-900"},brown:{color:"text-brown-500"},"deep-orange":{color:"text-deep-orange-500"},orange:{color:"text-orange-500"},amber:{color:"text-amber-500"},yellow:{color:"text-yellow-500"},lime:{color:"text-lime-500"},"light-green":{color:"text-light-green-500"},green:{color:"text-green-500"},teal:{color:"text-teal-500"},cyan:{color:"text-cyan-500"},"light-blue":{color:"text-light-blue-500"},blue:{color:"text-blue-500"},indigo:{color:"text-indigo-500"},"deep-purple":{color:"text-deep-purple-500"},purple:{color:"text-purple-500"},pink:{color:"text-pink-500"},red:{color:"text-red-500"}},r=t})(Sde);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){for(var u in l)Object.defineProperty(s,u,{enumerable:!0,get:l[u]})}t(e,{spinner:function(){return o},default:function(){return a}});var r=qH,n=i(Sde);function i(s){return s&&s.__esModule?s:{default:s}}var o={defaultProps:{color:"gray",className:""},valid:{colors:r.propTypesColor},styles:{base:{color:"text-gray-300",animation:"animate-spin"},colors:n.default}},a=o})(_de);var Ade={},Mde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{timeline:function(){return r},default:function(){return n}});var r={styles:{base:{display:"w-full",position:"flex",flexDirection:"flex-col"}}},n=r})(Mde);var Cde={},jh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(y,m){for(var p in m)Object.defineProperty(y,p,{enumerable:!0,get:m[p]})}t(e,{propTypeClassName:function(){return c},propTypeChildren:function(){return h},propTypeColor:function(){return f},propTypeVariant:function(){return g}});var r=a(Kt),n=Un;function i(y,m){(m==null||m>y.length)&&(m=y.length);for(var p=0,v=new Array(m);p<m;p++)v[p]=y[p];return v}function o(y){if(Array.isArray(y))return i(y)}function a(y){return y&&y.__esModule?y:{default:y}}function s(y){if(typeof Symbol<"u"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(y){return o(y)||s(y)||d(y)||l()}function d(y,m){if(y){if(typeof y=="string")return i(y,m);var p=Object.prototype.toString.call(y).slice(8,-1);if(p==="Object"&&y.constructor&&(p=y.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return i(y,m)}}var c=r.default.string,h=r.default.node,f=["white"].concat(u(n.propTypesColors)),g=["filled","outlined","ghost","gradient"]})(jh);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,a){for(var s in a)Object.defineProperty(o,s,{enumerable:!0,get:a[s]})}t(e,{timelineItem:function(){return n},default:function(){return i}});var r=jh,n={defaultProps:{color:"gray",variant:"filled"},valid:{colors:r.propTypeColor,variants:r.propTypeVariant},styles:{base:{display:"flex",position:"relative",flexDirection:"flex-col",gap:"gap-2"}}},i=n})(Cde);var Tde={},Ede={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={transparent:{backgroud:"bg-transparent",color:"text-blue-gray-900"},white:{color:"text-white",background:"bg-white/10"},"blue-gray":{color:"text-blue-gray-500",background:"bg-blue-gray-500/10"},gray:{color:"text-gray-900",background:"bg-gray-900/10"},brown:{color:"text-brown-500",background:"bg-brown-500/10"},"deep-orange":{color:"text-deep-orange-500",background:"bg-deep-orange-500/10"},orange:{color:"text-orange-500",background:"bg-orange-500/10"},amber:{color:"text-amber-500",background:"bg-amber-500/10"},yellow:{color:"text-yellow-500",background:"bg-yellow-500/10"},lime:{color:"text-lime-500",background:"bg-lime-500/10"},"light-green":{color:"text-light-green-500",background:"bg-light-green-500/10"},green:{color:"text-green-500",background:"bg-green-500/10"},teal:{color:"text-teal-500",background:"bg-teal-500/10"},cyan:{color:"text-cyan-500",background:"bg-cyan-500/10"},"light-blue":{color:"text-light-blue-500",background:"bg-light-blue-500/10"},blue:{color:"text-blue-500",background:"bg-blue-500/10"},indigo:{color:"text-indigo-500",background:"bg-indigo-500/10"},"deep-purple":{color:"text-deep-purple-500",background:"bg-deep-purple-500/10"},purple:{color:"text-purple-500",background:"bg-purple-500/10"},pink:{color:"text-pink-500",background:"bg-pink-500/10"},red:{color:"text-red-500",background:"bg-red-500/10"}},r=t})(Ede);var Pde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={transparent:{backgroud:"bg-transparent",color:"text-blue-gray-900"},white:{backgroud:"bg-white",color:"text-blue-gray-900"},"blue-gray":{backgroud:"bg-blue-gray-500",color:"text-white"},gray:{backgroud:"bg-gray-900",color:"text-white"},brown:{backgroud:"bg-brown-500",color:"text-white"},"deep-orange":{backgroud:"bg-deep-orange-500",color:"text-white"},orange:{backgroud:"bg-orange-500",color:"text-white"},amber:{backgroud:"bg-amber-500",color:"text-black"},yellow:{backgroud:"bg-yellow-500",color:"text-black"},lime:{backgroud:"bg-lime-500",color:"text-black"},"light-green":{backgroud:"bg-light-green-500",color:"text-white"},green:{backgroud:"bg-green-500",color:"text-white"},teal:{backgroud:"bg-teal-500",color:"text-white"},cyan:{backgroud:"bg-cyan-500",color:"text-white"},"light-blue":{backgroud:"bg-light-blue-500",color:"text-white"},blue:{backgroud:"bg-blue-500",color:"text-white"},indigo:{backgroud:"bg-indigo-500",color:"text-white"},"deep-purple":{backgroud:"bg-deep-purple-500",color:"text-white"},purple:{backgroud:"bg-purple-500",color:"text-white"},pink:{backgroud:"bg-pink-500",color:"text-white"},red:{backgroud:"bg-red-500",color:"text-white"}},r=t})(Pde);var Dde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={transparent:{backgroud:"bg-transparent",color:"text-blue-gray-900"},white:{border:"border border-white",color:"text-white"},"blue-gray":{border:"border border-blue-gray-500",color:"text-blue-gray-500"},gray:{border:"border border-gray-900",color:"text-gray-900"},brown:{border:"border border-brown-500",color:"text-brown-500"},"deep-orange":{border:"border border-deep-orange-500",color:"text-deep-orange-500"},orange:{border:"border border-orange-500",color:"text-orange-500"},amber:{border:"border border-amber-500",color:"text-amber-500"},yellow:{border:"border border-yellow-500",color:"text-yellow-500"},lime:{border:"border border-lime-500",color:"text-lime-500"},"light-green":{border:"border border-light-green-500",color:"text-light-green-500"},green:{border:"border border-green-500",color:"text-green-500"},teal:{border:"border border-teal-500",color:"text-teal-500"},cyan:{border:"border border-cyan-500",color:"text-cyan-500"},"light-blue":{border:"border border-light-blue-500",color:"text-light-blue-500"},blue:{border:"border border-blue-500",color:"text-blue-500"},indigo:{border:"border border-indigo-500",color:"text-indigo-500"},"deep-purple":{border:"border border-deep-purple-500",color:"text-deep-purple-500"},purple:{border:"border border-purple-500",color:"text-purple-500"},pink:{border:"border border-pink-500",color:"text-pink-500"},red:{border:"border border-red-500",color:"text-red-500"}},r=t})(Dde);var Ode={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t={transparent:{backgroud:"bg-transparent",color:"text-blue-gray-900"},white:{backgroud:"bg-white",color:"text-blue-gray-900"},"blue-gray":{backgroud:"bg-gradient-to-tr from-blue-gray-600 to-blue-gray-400",color:"text-white"},gray:{backgroud:"bg-gradient-to-tr from-gray-900 to-gray-800",color:"text-white"},brown:{backgroud:"bg-gradient-to-tr from-brown-600 to-brown-400",color:"text-white"},"deep-orange":{backgroud:"bg-gradient-to-tr from-deep-orange-600 to-deep-orange-400",color:"text-white"},orange:{backgroud:"bg-gradient-to-tr from-orange-600 to-orange-400",color:"text-white"},amber:{backgroud:"bg-gradient-to-tr from-amber-600 to-amber-400",color:"text-black"},yellow:{backgroud:"bg-gradient-to-tr from-yellow-600 to-yellow-400",color:"text-black"},lime:{backgroud:"bg-gradient-to-tr from-lime-600 to-lime-400",color:"text-black"},"light-green":{backgroud:"bg-gradient-to-tr from-light-green-600 to-light-green-400",color:"text-white"},green:{backgroud:"bg-gradient-to-tr from-green-600 to-green-400",color:"text-white"},teal:{backgroud:"bg-gradient-to-tr from-teal-600 to-teal-400",color:"text-white"},cyan:{backgroud:"bg-gradient-to-tr from-cyan-600 to-cyan-400",color:"text-white"},"light-blue":{backgroud:"bg-gradient-to-tr from-light-blue-600 to-light-blue-400",color:"text-white"},blue:{backgroud:"bg-gradient-to-tr from-blue-600 to-blue-400",color:"text-white"},indigo:{backgroud:"bg-gradient-to-tr from-indigo-600 to-indigo-400",color:"text-white"},"deep-purple":{backgroud:"bg-gradient-to-tr from-deep-purple-600 to-deep-purple-400",color:"text-white"},purple:{backgroud:"bg-gradient-to-tr from-purple-600 to-purple-400",color:"text-white"},pink:{backgroud:"bg-gradient-to-tr from-pink-600 to-pink-400",color:"text-white"},red:{backgroud:"bg-gradient-to-tr from-red-600 to-red-400",color:"text-white"}},r=t})(Ode);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(d,c){for(var h in c)Object.defineProperty(d,h,{enumerable:!0,get:c[h]})}t(e,{timelineIcon:function(){return l},default:function(){return u}});var r=s(Ede),n=s(Pde),i=s(Dde),o=s(Ode),a=jh;function s(d){return d&&d.__esModule?d:{default:d}}var l={defaultProps:{color:"gray",variant:"filled"},valid:{colors:a.propTypeColor,variants:a.propTypeVariant},styles:{base:{width:"w-max",height:"w-max",padding:"p-1.5",position:"relative",zIndex:"z-[2]",flexShrink:"flex-shrink-0",borderRadius:"rounded-full",overflow:"overflow-hidden"},variants:{ghost:r.default,filled:n.default,outlined:i.default,gradient:o.default}}},u=l})(Tde);var Rde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{timelineHeader:function(){return r},default:function(){return n}});var r={styles:{base:{display:"flex",alignItems:"items-center",gap:"gap-4"}}},n=r})(Rde);var Ide={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{timelineBody:function(){return r},default:function(){return n}});var r={styles:{base:{display:"flex",gap:"gap-4"}}},n=r})(Ide);var Lde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{timelineConnector:function(){return r},default:function(){return n}});var r={styles:{base:{container:{position:"absolute",left:"left-0",display:"grid",justifyContent:"justify-center",backgroundColor:"bg-transparent",transition:"transition-opacity duration-200"},line:{width:"w-0.5",height:"h-full",backgroundColor:"bg-blue-gray-100"}}}},n=r})(Lde);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),t(Mde,e),t(Cde,e),t(Tde,e),t(Rde,e),t(Ide,e),t(Lde,e);function t(r,n){return Object.keys(r).forEach(function(i){i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[i]}})}),r}})(Ade);var Bde={},Nde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{step:function(){return r},default:function(){return n}});var r={styles:{base:{initial:{position:"relative",zIndex:"z-10",display:"grid",placeItems:"place-items-center",width:"w-10",height:"h-10",borderRadius:"rounded-full",backgroundColor:"bg-gray-300",color:"text-gray-900",fontWeight:"font-bold",transition:"transition-all duration-300"},active:{backgroundColor:"bg-gray-900",color:"text-white"},completed:{backgroundColor:"bg-gray-900",color:"text-white"}}}},n=r})(Nde);var kde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{stepper:function(){return r},default:function(){return n}});var r={styles:{base:{stepper:{width:"w-full",position:"relative",display:"flex",alignItems:"items-center",justifyContent:"justify-between"},line:{initial:{position:"absolute",left:"left-0",top:"top-2/4",height:"h-0.5",width:"w-full",transform:"-translate-y-2/4",backgroundColor:"bg-gray-300"},active:{backgroundColor:"bg-gray-900",transition:"transition-all",duration:"duration-500"}}}}},n=r})(kde);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),t(Nde,e),t(kde,e);function t(r,n){return Object.keys(r).forEach(function(i){i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[i]}})}),r}})(Bde);var Fde={},zde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{speedDial:function(){return r},default:function(){return n}});var r={defaultProps:{offset:5,placement:"top",dismiss:void 0,animate:{unmount:{},mount:{}}}},n=r})(zde);var Ude={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{speedDialContent:function(){return r},default:function(){return n}});var r={styles:{padding:"p-0.5",width:"w-max",display:"flex",flexDirection:"flex-col",alignItems:"items-center",gap:"gap-1"}},n=r})(Ude);var Vde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,o){for(var a in o)Object.defineProperty(i,a,{enumerable:!0,get:o[a]})}t(e,{speedDialAction:function(){return r},default:function(){return n}});var r={styles:{display:"flex",flexDirection:"flex-col",alignItems:"items-center",justifyContent:"justify-center",gap:"gap-1",padding:"p-1",margin:"m-0.5",borderWidth:"border",minWidth:"min-w-[48px]",fontFamily:"font-normal",minHeight:"min-h-[48px]",backgroundColor:"bg-white",borderRadius:"rounded-full",borderColor:"border-blue-gray-50",scale:"hover:scale-110 focus:scale-110 active:scale-100",transition:"transition-transform duration-300 ease-in-out"}},n=r})(Vde);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),t(zde,e),t(Ude,e),t(Vde,e);function t(r,n){return Object.keys(r).forEach(function(i){i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[i]}})}),r}})(Fde);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return re}});var t=le(ie(Iue,e)),r=le(ie(Lue,e)),n=le(ie(zue,e)),i=le(ie(Vue,e)),o=le(ie(jue,e)),a=le(ie(Hue,e)),s=le(ie(Gue,e)),l=le(ie(Wue,e)),u=le(ie(que,e)),d=le(ie(Xue,e)),c=le(ie(Kue,e)),h=le(ie(ece,e)),f=le(ie(tce,e)),g=le(ie(rce,e)),y=le(ie(nce,e)),m=le(ie(ice,e)),p=le(ie(oce,e)),v=le(ie(yce,e)),b=le(ie(bce,e)),x=le(ie(_ce,e)),_=le(ie(Sce,e)),A=le(ie(Cce,e)),M=le(ie(Ece,e)),T=le(ie(Vce,e)),C=le(ie(Hce,e)),E=le(ie(Gce,e)),D=le(ie(Wce,e)),I=le(ie(qce,e)),k=le(ie(Xce,e)),L=le(ie(Yce,e)),U=le(ie(sde,e)),W=le(ie(lde,e)),G=le(ie(cde,e)),z=le(ie(dde,e)),V=le(ie(hde,e)),j=le(ie(pde,e)),H=le(ie(mde,e)),Y=le(ie(gde,e)),Q=le(ie(yde,e)),$=le(ie(xde,e)),ne=le(ie(_de,e)),Z=ie(Ade,e),ce=ie(Bde,e),ae=ie(Fde,e);function ie(ye,be){return Object.keys(ye).forEach(function(_e){_e!=="default"&&!Object.prototype.hasOwnProperty.call(be,_e)&&Object.defineProperty(be,_e,{enumerable:!0,get:function(){return ye[_e]}})}),ye}function le(ye){return ye&&ye.__esModule?ye:{default:ye}}var se={accordion:t.default,alert:r.default,avatar:n.default,breadcrumbs:i.default,button:o.default,card:a.default,cardBody:s.default,cardFooter:l.default,cardHeader:u.default,checkbox:d.default,chip:c.default,dialog:h.default,dialogBody:f.default,dialogFooter:g.default,dialogHeader:y.default,iconButton:m.default,input:p.default,menu:v.default,navbar:b.default,popover:x.default,progress:_.default,radio:A.default,select:M.default,switch:T.default,tab:C.default,tabs:E.default,tabsBody:D.default,tabsHeader:I.default,tabPanel:k.default,textarea:L.default,tooltip:U.default,typography:W.default,collapse:G.default,list:z.default,buttonGroup:V.default,carousel:j.default,drawer:H.default,badge:Y.default,rating:Q.default,slider:$.default,spinner:ne.default,timeline:Z.timeline,timelineItem:Z.timelineItem,timelineIcon:Z.timelineIcon,timelineHeader:Z.timelineHeader,timelineBody:Z.timelineBody,timelineConnector:Z.timelineConnector,step:ce.step,stepper:ce.stepper,speedDial:ae.speedDial,speedDialContent:ae.speedDialContent,speedDialAction:ae.speedDialAction},re=se})(OH);var jde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});var t=r(jo);function r(i){return i&&i.__esModule?i:{default:i}}function n(i,o,a){var s=i.slice();return o.forEach(function(l,u){typeof s[u]>"u"?s[u]=a.cloneUnlessOtherwiseSpecified(l,a):a.isMergeableObject(l)?s[u]=(0,t.default)(i[u],l,a):i.indexOf(l)===-1&&s.push(l)}),s}})(jde);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{MaterialTailwindTheme:function(){return d},ThemeProvider:function(){return c},useTheme:function(){return h}});var r=u(te),n=s(Kt),i=s(jo),o=s(OH),a=s(jde);function s(f){return f&&f.__esModule?f:{default:f}}function l(f){if(typeof WeakMap!="function")return null;var g=new WeakMap,y=new WeakMap;return(l=function(m){return m?y:g})(f)}function u(f,g){if(!g&&f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var y=l(g);if(y&&y.has(f))return y.get(f);var m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in f)if(v!=="default"&&Object.prototype.hasOwnProperty.call(f,v)){var b=p?Object.getOwnPropertyDescriptor(f,v):null;b&&(b.get||b.set)?Object.defineProperty(m,v,b):m[v]=f[v]}return m.default=f,y&&y.set(f,m),m}var d=(0,r.createContext)(o.default);d.displayName="MaterialTailwindThemeProvider";function c(f){var g=f.value,y=g===void 0?o.default:g,m=f.children,p=(0,i.default)(o.default,y,{arrayMerge:a.default});return r.default.createElement(d.Provider,{value:p},m)}var h=function(){return(0,r.useContext)(d)};c.propTypes={value:n.default.instanceOf(Object),children:n.default.node.isRequired}})(jt);var MI={},qM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(h,f){for(var g in f)Object.defineProperty(h,g,{enumerable:!0,get:f[g]})}t(e,{propTypesOpen:function(){return o},propTypesIcon:function(){return a},propTypesAnimate:function(){return s},propTypesDisabled:function(){return l},propTypesClassName:function(){return u},propTypesValue:function(){return d},propTypesChildren:function(){return c}});var r=i(Kt),n=Un;function i(h){return h&&h.__esModule?h:{default:h}}var o=r.default.bool.isRequired,a=r.default.node,s=n.propTypesAnimation,l=r.default.bool,u=r.default.string,d=r.default.instanceOf(Object).isRequired,c=r.default.node.isRequired})(qM);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,u){for(var d in u)Object.defineProperty(l,d,{enumerable:!0,get:u[d]})}t(e,{AccordionContext:function(){return o},useAccordion:function(){return a},AccordionContextProvider:function(){return s}});var r=i(te),n=qM;function i(l){return l&&l.__esModule?l:{default:l}}var o=r.default.createContext(null);o.displayName="MaterialTailwind.AccordionContext";function a(){var l=r.default.useContext(o);if(!l)throw new Error("useAccordion() must be used within an Accordion. It happens when you use AccordionHeader or AccordionBody components outside the Accordion component.");return l}var s=function(l){var u=l.value,d=l.children;return r.default.createElement(o.Provider,{value:u},d)};s.propTypes={value:n.propTypesValue,children:n.propTypesChildren},s.displayName="MaterialTailwind.AccordionContextProvider"})(MI);var Hde={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{AccordionHeader:function(){return g},default:function(){return y}});var r=c(te),n=c(gr),i=Qt,o=c(Yt),a=MI,s=jt,l=qM;function u(m,p,v){return p in m?Object.defineProperty(m,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[p]=v,m}function d(){return d=Object.assign||function(m){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},d.apply(this,arguments)}function c(m){return m&&m.__esModule?m:{default:m}}function h(m,p){if(m==null)return{};var v=f(m,p),b,x;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);for(x=0;x<_.length;x++)b=_[x],!(p.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(v[b]=m[b])}return v}function f(m,p){if(m==null)return{};var v={},b=Object.keys(m),x,_;for(_=0;_<b.length;_++)x=b[_],!(p.indexOf(x)>=0)&&(v[x]=m[x]);return v}var g=r.default.forwardRef(function(m,p){var v=m.className,b=m.children,x=h(m,["className","children"]),_=(0,a.useAccordion)(),A=_.open,M=_.icon,T=_.disabled,C=(0,s.useTheme)().accordion,E=C.styles.base;v=v??"";var D=(0,i.twMerge)((0,n.default)((0,o.default)(E.header.initial),u({},(0,o.default)(E.header.active),A)),v),I=(0,n.default)((0,o.default)(E.header.icon));return r.default.createElement("button",d({},x,{ref:p,type:"button",disabled:T,className:D}),b,r.default.createElement("span",{className:I},M??(A?r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.default.createElement("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})):r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.default.createElement("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})))))});g.propTypes={className:l.propTypesClassName,children:l.propTypesChildren},g.displayName="MaterialTailwind.AccordionHeader";var y=g})(Hde);var Gde={},Do={},pU=function(e,t){return pU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},pU(e,t)};function Wde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");pU(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var DO=function(){return DO=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},DO.apply(this,arguments)};function D1(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function qde(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function Xde(e,t){return function(r,n){t(r,n,e)}}function mZe(e,t,r,n,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),c,h=!1,f=r.length-1;f>=0;f--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(p){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var m=(0,r[f])(s==="accessor"?{get:d.get,set:d.set}:d[l],g);if(s==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(c=a(m.get))&&(d.get=c),(c=a(m.set))&&(d.set=c),(c=a(m.init))&&i.unshift(c)}else(c=a(m))&&(s==="field"?i.unshift(c):d[l]=c)}u&&Object.defineProperty(u,n.name,d),h=!0}function gZe(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function vZe(e){return typeof e=="symbol"?e:"".concat(e)}function yZe(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Yde(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Kde(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?o(d.value):i(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})}function Jde(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var CI=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Qde(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&CI(t,e,r)}function OO(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function XH(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function Zde(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(XH(arguments[t]));return e}function $de(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function ehe(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Kx(e){return this instanceof Kx?(this.v=e,this):new Kx(e)}function the(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(h){n[h]&&(i[h]=function(f){return new Promise(function(g,y){o.push([h,f,g,y])>1||s(h,f)})})}function s(h,f){try{l(n[h](f))}catch(g){c(o[0][3],g)}}function l(h){h.value instanceof Kx?Promise.resolve(h.value.v).then(u,d):c(o[0][2],h)}function u(h){s("next",h)}function d(h){s("throw",h)}function c(h,f){h(f),o.shift(),o.length&&s(o[0][0],o[0][1])}}function rhe(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,o){t[i]=e[i]?function(a){return(r=!r)?{value:Kx(e[i](a)),done:!1}:o?o(a):a}:o}}function nhe(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof OO=="function"?OO(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(a){return new Promise(function(s,l){a=e[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(u){o({value:u,done:s})},a)}}function ihe(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var bZe=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function ohe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&CI(t,e,r);return bZe(t,e),t}function ahe(e){return e&&e.__esModule?e:{default:e}}function she(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function lhe(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function uhe(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function che(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var xZe=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function dhe(e){function t(n){e.error=e.hasError?new xZe(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(o){return t(o),r()})}catch(o){t(o)}}if(e.hasError)throw e.error}return r()}const wZe={__extends:Wde,__assign:DO,__rest:D1,__decorate:qde,__param:Xde,__metadata:Yde,__awaiter:Kde,__generator:Jde,__createBinding:CI,__exportStar:Qde,__values:OO,__read:XH,__spread:Zde,__spreadArrays:$de,__spreadArray:ehe,__await:Kx,__asyncGenerator:the,__asyncDelegator:rhe,__asyncValues:nhe,__makeTemplateObject:ihe,__importStar:ohe,__importDefault:ahe,__classPrivateFieldGet:she,__classPrivateFieldSet:lhe,__classPrivateFieldIn:uhe,__addDisposableResource:che,__disposeResources:dhe},_Ze=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:che,get __assign(){return DO},__asyncDelegator:rhe,__asyncGenerator:the,__asyncValues:nhe,__await:Kx,__awaiter:Kde,__classPrivateFieldGet:she,__classPrivateFieldIn:uhe,__classPrivateFieldSet:lhe,__createBinding:CI,__decorate:qde,__disposeResources:dhe,__esDecorate:mZe,__exportStar:Qde,__extends:Wde,__generator:Jde,__importDefault:ahe,__importStar:ohe,__makeTemplateObject:ihe,__metadata:Yde,__param:Xde,__propKey:vZe,__read:XH,__rest:D1,__runInitializers:gZe,__setFunctionName:yZe,__spread:Zde,__spreadArray:ehe,__spreadArrays:$de,__values:OO,default:wZe},Symbol.toStringTag,{value:"Module"})),hhe=r1(_Ze);var SZe=function(){},fhe=function(){};const AZe=Object.freeze(Object.defineProperty({__proto__:null,invariant:fhe,warning:SZe},Symbol.toStringTag,{value:"Module"})),phe=r1(AZe);var ho={};Object.defineProperty(ho,"__esModule",{value:!0});const mhe=(e,t)=>r=>Math.max(Math.min(r,t),e),US=e=>e%1?Number(e.toFixed(5)):e,XA=/(-)?([\d]*\.?[\d])+/g,mU=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,MZe=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function XM(e){return typeof e=="string"}const YM={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},YH=Object.assign(Object.assign({},YM),{transform:mhe(0,1)}),CZe=Object.assign(Object.assign({},YM),{default:1}),KM=e=>({test:t=>XM(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),TZe=KM("deg"),lx=KM("%"),EZe=KM("px"),PZe=KM("vh"),DZe=KM("vw"),OZe=Object.assign(Object.assign({},lx),{parse:e=>lx.parse(e)/100,transform:e=>lx.transform(e*100)}),KH=(e,t)=>r=>!!(XM(r)&&MZe.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),ghe=(e,t,r)=>n=>{if(!XM(n))return n;const[i,o,a,s]=n.match(XA);return{[e]:parseFloat(i),[t]:parseFloat(o),[r]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},sS={test:KH("hsl","hue"),parse:ghe("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+lx.transform(US(t))+", "+lx.transform(US(r))+", "+US(YH.transform(n))+")"},RZe=mhe(0,255),B2=Object.assign(Object.assign({},YM),{transform:e=>Math.round(RZe(e))}),Ib={test:KH("rgb","red"),parse:ghe("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+B2.transform(e)+", "+B2.transform(t)+", "+B2.transform(r)+", "+US(YH.transform(n))+")"};function IZe(e){let t="",r="",n="",i="";return e.length>5?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),i=e.substr(4,1),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const gU={test:KH("#"),parse:IZe,transform:Ib.transform},JH={test:e=>Ib.test(e)||gU.test(e)||sS.test(e),parse:e=>Ib.test(e)?Ib.parse(e):sS.test(e)?sS.parse(e):gU.parse(e),transform:e=>XM(e)?e:e.hasOwnProperty("red")?Ib.transform(e):sS.transform(e)},vhe="${c}",yhe="${n}";function LZe(e){var t,r,n,i;return isNaN(e)&&XM(e)&&((r=(t=e.match(XA))===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0)+((i=(n=e.match(mU))===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0)>0}function bhe(e){typeof e=="number"&&(e=`${e}`);const t=[];let r=0;const n=e.match(mU);n&&(r=n.length,e=e.replace(mU,vhe),t.push(...n.map(JH.parse)));const i=e.match(XA);return i&&(e=e.replace(XA,yhe),t.push(...i.map(YM.parse))),{values:t,numColors:r,tokenised:e}}function xhe(e){return bhe(e).values}function whe(e){const{values:t,numColors:r,tokenised:n}=bhe(e),i=t.length;return o=>{let a=n;for(let s=0;s<i;s++)a=a.replace(s<r?vhe:yhe,s<r?JH.transform(o[s]):US(o[s]));return a}}const BZe=e=>typeof e=="number"?0:e;function NZe(e){const t=xhe(e);return whe(e)(t.map(BZe))}const _he={test:LZe,parse:xhe,createTransformer:whe,getAnimatableNone:NZe},kZe=new Set(["brightness","contrast","saturate","opacity"]);function FZe(e){let[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(XA)||[];if(!n)return e;const i=r.replace(n,"");let o=kZe.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+i+")"}const zZe=/([a-z-]*)\(.*?\)/g,UZe=Object.assign(Object.assign({},_he),{getAnimatableNone:e=>{const t=e.match(zZe);return t?t.map(FZe).join(" "):e}});ho.alpha=YH;ho.color=JH;ho.complex=_he;ho.degrees=TZe;ho.filter=UZe;ho.hex=gU;ho.hsla=sS;ho.number=YM;ho.percent=lx;ho.progressPercentage=OZe;ho.px=EZe;ho.rgbUnit=B2;ho.rgba=Ib;ho.scale=CZe;ho.vh=PZe;ho.vw=DZe;var lr={},j0={};Object.defineProperty(j0,"__esModule",{value:!0});const She=1/60*1e3,VZe=typeof performance<"u"?()=>performance.now():()=>Date.now(),Ahe=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(VZe()),She);function jZe(e){let t=[],r=[],n=0,i=!1,o=!1;const a=new WeakSet,s={schedule:(l,u=!1,d=!1)=>{const c=d&&i,h=c?t:r;return u&&a.add(l),h.indexOf(l)===-1&&(h.push(l),c&&i&&(n=t.length)),l},cancel:l=>{const u=r.indexOf(l);u!==-1&&r.splice(u,1),a.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[t,r]=[r,t],r.length=0,n=t.length,n)for(let u=0;u<n;u++){const d=t[u];d(l),a.has(d)&&(s.schedule(d),e())}i=!1,o&&(o=!1,s.process(l))}};return s}const HZe=40;let vU=!0,YA=!1,yU=!1;const ux={delta:0,timestamp:0},JM=["read","update","preRender","render","postRender"],TI=JM.reduce((e,t)=>(e[t]=jZe(()=>YA=!0),e),{}),GZe=JM.reduce((e,t)=>{const r=TI[t];return e[t]=(n,i=!1,o=!1)=>(YA||YZe(),r.schedule(n,i,o)),e},{}),WZe=JM.reduce((e,t)=>(e[t]=TI[t].cancel,e),{}),qZe=JM.reduce((e,t)=>(e[t]=()=>TI[t].process(ux),e),{}),XZe=e=>TI[e].process(ux),Mhe=e=>{YA=!1,ux.delta=vU?She:Math.max(Math.min(e-ux.timestamp,HZe),1),ux.timestamp=e,yU=!0,JM.forEach(XZe),yU=!1,YA&&(vU=!1,Ahe(Mhe))},YZe=()=>{YA=!0,vU=!0,yU||Ahe(Mhe)},KZe=()=>ux;j0.cancelSync=WZe;j0.default=GZe;j0.flushSync=qZe;j0.getFrameData=KZe;Object.defineProperty(lr,"__esModule",{value:!0});var Che=hhe,Jx=phe,Nu=ho,EI=j0;function JZe(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var QZe=JZe(EI);const KA=(e,t,r)=>Math.min(Math.max(r,e),t),ZN=.001,ZZe=.01,eQ=10,$Ze=.05,e$e=1;function t$e({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,o;Jx.warning(e<=eQ*1e3,"Spring duration must be 10 seconds or less");let a=1-t;a=KA($Ze,e$e,a),e=KA(ZZe,eQ,e/1e3),a<1?(i=u=>{const d=u*a,c=d*e,h=d-r,f=bU(u,a),g=Math.exp(-c);return ZN-h/f*g},o=u=>{const c=u*a*e,h=c*r+r,f=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-c),y=bU(Math.pow(u,2),a);return(-i(u)+ZN>0?-1:1)*((h-f)*g)/y}):(i=u=>{const d=Math.exp(-u*e),c=(u-r)*e+1;return-ZN+d*c},o=u=>{const d=Math.exp(-u*e),c=(r-u)*(e*e);return d*c});const s=5/e,l=n$e(i,o,s);if(e=e*1e3,isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const r$e=12;function n$e(e,t,r){let n=r;for(let i=1;i<r$e;i++)n=n-e(n)/t(n);return n}function bU(e,t){return e*Math.sqrt(1-t*t)}const i$e=["duration","bounce"],o$e=["stiffness","damping","mass"];function tQ(e,t){return t.some(r=>e[r]!==void 0)}function a$e(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!tQ(e,o$e)&&tQ(e,i$e)){const r=t$e(e);t=Object.assign(Object.assign(Object.assign({},t),r),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}function PI(e){var{from:t=0,to:r=1,restSpeed:n=2,restDelta:i}=e,o=Che.__rest(e,["from","to","restSpeed","restDelta"]);const a={done:!1,value:t};let{stiffness:s,damping:l,mass:u,velocity:d,duration:c,isResolvedFromDuration:h}=a$e(o),f=rQ,g=rQ;function y(){const m=d?-(d/1e3):0,p=r-t,v=l/(2*Math.sqrt(s*u)),b=Math.sqrt(s/u)/1e3;if(i===void 0&&(i=Math.min(Math.abs(r-t)/100,.4)),v<1){const x=bU(b,v);f=_=>{const A=Math.exp(-v*b*_);return r-A*((m+v*b*p)/x*Math.sin(x*_)+p*Math.cos(x*_))},g=_=>{const A=Math.exp(-v*b*_);return v*b*A*(Math.sin(x*_)*(m+v*b*p)/x+p*Math.cos(x*_))-A*(Math.cos(x*_)*(m+v*b*p)-x*p*Math.sin(x*_))}}else if(v===1)f=x=>r-Math.exp(-b*x)*(p+(m+b*p)*x);else{const x=b*Math.sqrt(v*v-1);f=_=>{const A=Math.exp(-v*b*_),M=Math.min(x*_,300);return r-A*((m+v*b*p)*Math.sinh(M)+x*p*Math.cosh(M))/x}}}return y(),{next:m=>{const p=f(m);if(h)a.done=m>=c;else{const v=g(m)*1e3,b=Math.abs(v)<=n,x=Math.abs(r-p)<=i;a.done=b&&x}return a.value=a.done?r:p,a},flipTarget:()=>{d=-d,[t,r]=[r,t],y()}}}PI.needsInterpolation=(e,t)=>typeof e=="string"||typeof t=="string";const rQ=e=>0,QH=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},DI=(e,t,r)=>-r*e+r*t+e;function $N(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function nQ({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,o=0,a=0;if(!t)i=o=a=r;else{const s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;i=$N(l,s,e+1/3),o=$N(l,s,e),a=$N(l,s,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const s$e=(e,t,r)=>{const n=e*e,i=t*t;return Math.sqrt(Math.max(0,r*(i-n)+n))},l$e=[Nu.hex,Nu.rgba,Nu.hsla],iQ=e=>l$e.find(t=>t.test(e)),oQ=e=>`'${e}' is not an animatable color. Use the equivalent color code instead.`,ZH=(e,t)=>{let r=iQ(e),n=iQ(t);Jx.invariant(!!r,oQ(e)),Jx.invariant(!!n,oQ(t));let i=r.parse(e),o=n.parse(t);r===Nu.hsla&&(i=nQ(i),r=Nu.rgba),n===Nu.hsla&&(o=nQ(o),n=Nu.rgba);const a=Object.assign({},i);return s=>{for(const l in a)l!=="alpha"&&(a[l]=s$e(i[l],o[l],s));return a.alpha=DI(i.alpha,o.alpha,s),r.transform(a)}},u$e={x:0,y:0,z:0},xU=e=>typeof e=="number",c$e=(e,t)=>r=>t(e(r)),$H=(...e)=>e.reduce(c$e);function The(e,t){return xU(e)?r=>DI(e,t,r):Nu.color.test(e)?ZH(e,t):eG(e,t)}const Ehe=(e,t)=>{const r=[...e],n=r.length,i=e.map((o,a)=>The(o,t[a]));return o=>{for(let a=0;a<n;a++)r[a]=i[a](o);return r}},d$e=(e,t)=>{const r=Object.assign(Object.assign({},e),t),n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=The(e[i],t[i]));return i=>{for(const o in n)r[o]=n[o](i);return r}};function aQ(e){const t=Nu.complex.parse(e),r=t.length;let n=0,i=0,o=0;for(let a=0;a<r;a++)n||typeof t[a]=="number"?n++:t[a].hue!==void 0?o++:i++;return{parsed:t,numNumbers:n,numRGB:i,numHSL:o}}const eG=(e,t)=>{const r=Nu.complex.createTransformer(t),n=aQ(e),i=aQ(t);return n.numHSL===i.numHSL&&n.numRGB===i.numRGB&&n.numNumbers>=i.numNumbers?$H(Ehe(n.parsed,i.parsed),r):(Jx.warning(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),a=>`${a>0?t:e}`)},h$e=(e,t)=>r=>DI(e,t,r);function f$e(e){if(typeof e=="number")return h$e;if(typeof e=="string")return Nu.color.test(e)?ZH:eG;if(Array.isArray(e))return Ehe;if(typeof e=="object")return d$e}function p$e(e,t,r){const n=[],i=r||f$e(e[0]),o=e.length-1;for(let a=0;a<o;a++){let s=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]:t;s=$H(l,s)}n.push(s)}return n}function m$e([e,t],[r]){return n=>r(QH(e,t,n))}function g$e(e,t){const r=e.length,n=r-1;return i=>{let o=0,a=!1;if(i<=e[0]?a=!0:i>=e[n]&&(o=n-1,a=!0),!a){let l=1;for(;l<r&&!(e[l]>i||l===n);l++);o=l-1}const s=QH(e[o],e[o+1],i);return t[o](s)}}function tG(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const o=e.length;Jx.invariant(o===t.length,"Both input and output ranges must be the same length"),Jx.invariant(!n||!Array.isArray(n)||n.length===o-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[o-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const a=p$e(t,n,i),s=o===2?m$e(e,a):g$e(e,a);return r?l=>s(KA(e[0],e[o-1],l)):s}const QM=e=>t=>1-e(1-t),OI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Phe=e=>t=>Math.pow(t,e),rG=e=>t=>t*t*((e+1)*t-e),Dhe=e=>{const t=rG(e);return r=>(r*=2)<1?.5*t(r):.5*(2-Math.pow(2,-10*(r-1)))},Ohe=1.525,v$e=4/11,y$e=8/11,b$e=9/10,Rhe=e=>e,nG=Phe(2),x$e=QM(nG),Ihe=OI(nG),Lhe=e=>1-Math.sin(Math.acos(e)),Bhe=QM(Lhe),w$e=OI(Bhe),iG=rG(Ohe),_$e=QM(iG),S$e=OI(iG),A$e=Dhe(Ohe),M$e=4356/361,C$e=35442/1805,T$e=16061/1805,RO=e=>{if(e===1||e===0)return e;const t=e*e;return e<v$e?7.5625*t:e<y$e?9.075*t-9.9*e+3.4:e<b$e?M$e*t-C$e*e+T$e:10.8*e*e-20.52*e+10.72},E$e=QM(RO),P$e=e=>e<.5?.5*(1-RO(1-e*2)):.5*RO(e*2-1)+.5;function D$e(e,t){return e.map(()=>t||Ihe).splice(0,e.length-1)}function O$e(e){const t=e.length;return e.map((r,n)=>n!==0?n/(t-1):0)}function R$e(e,t){return e.map(r=>r*t)}function VS({from:e=0,to:t=1,ease:r,offset:n,duration:i=300}){const o={done:!1,value:e},a=Array.isArray(t)?t:[e,t],s=R$e(n&&n.length===a.length?n:O$e(a),i);function l(){return tG(s,a,{ease:Array.isArray(r)?r:D$e(a,r)})}let u=l();return{next:d=>(o.value=u(d),o.done=d>=i,o),flipTarget:()=>{a.reverse(),u=l()}}}function Nhe({velocity:e=0,from:t=0,power:r=.8,timeConstant:n=350,restDelta:i=.5,modifyTarget:o}){const a={done:!1,value:t};let s=r*e;const l=t+s,u=o===void 0?l:o(l);return u!==l&&(s=u-t),{next:d=>{const c=-s*Math.exp(-d/n);return a.done=!(c>i||c<-i),a.value=a.done?u:u+c,a},flipTarget:()=>{}}}const sQ={keyframes:VS,spring:PI,decay:Nhe};function I$e(e){if(Array.isArray(e.to))return VS;if(sQ[e.type])return sQ[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?VS:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?PI:VS}function khe(e,t,r=0){return e-t-r}function L$e(e,t,r=0,n=!0){return n?khe(t+-e,t,r):t-(e-t)+r}function B$e(e,t,r,n){return n?e>=t+r:e<=-r}const N$e=e=>{const t=({delta:r})=>e(r);return{start:()=>QZe.default.update(t,!0),stop:()=>EI.cancelSync.update(t)}};function Fhe(e){var t,r,{from:n,autoplay:i=!0,driver:o=N$e,elapsed:a=0,repeat:s=0,repeatType:l="loop",repeatDelay:u=0,onPlay:d,onStop:c,onComplete:h,onRepeat:f,onUpdate:g}=e,y=Che.__rest(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:m}=y,p,v=0,b=y.duration,x,_=!1,A=!0,M;const T=I$e(y);!((r=(t=T).needsInterpolation)===null||r===void 0)&&r.call(t,n,m)&&(M=tG([0,100],[n,m],{clamp:!1}),n=0,m=100);const C=T(Object.assign(Object.assign({},y),{from:n,to:m}));function E(){v++,l==="reverse"?(A=v%2===0,a=L$e(a,b,u,A)):(a=khe(a,b,u),l==="mirror"&&C.flipTarget()),_=!1,f&&f()}function D(){p.stop(),h&&h()}function I(L){if(A||(L=-L),a+=L,!_){const U=C.next(Math.max(0,a));x=U.value,M&&(x=M(x)),_=A?U.done:a<=0}g==null||g(x),_&&(v===0&&(b??(b=a)),v<s?B$e(a,b,u,A)&&E():D())}function k(){d==null||d(),p=o(I),p.start()}return i&&k(),{stop:()=>{c==null||c(),p.stop()}}}function zhe(e,t){return t?e*(1e3/t):0}function k$e({from:e=0,velocity:t=0,min:r,max:n,power:i=.8,timeConstant:o=750,bounceStiffness:a=500,bounceDamping:s=10,restDelta:l=1,modifyTarget:u,driver:d,onUpdate:c,onComplete:h,onStop:f}){let g;function y(b){return r!==void 0&&b<r||n!==void 0&&b>n}function m(b){return r===void 0?n:n===void 0||Math.abs(r-b)<Math.abs(n-b)?r:n}function p(b){g==null||g.stop(),g=Fhe(Object.assign(Object.assign({},b),{driver:d,onUpdate:x=>{var _;c==null||c(x),(_=b.onUpdate)===null||_===void 0||_.call(b,x)},onComplete:h,onStop:f}))}function v(b){p(Object.assign({type:"spring",stiffness:a,damping:s,restDelta:l},b))}if(y(e))v({from:e,velocity:t,to:m(e)});else{let b=i*t+e;typeof u<"u"&&(b=u(b));const x=m(b),_=x===r?-1:1;let A,M;const T=C=>{A=M,M=C,t=zhe(C-A,EI.getFrameData().delta),(_===1&&C>x||_===-1&&C<x)&&v({from:C,to:x,velocity:t})};p({type:"decay",from:e,velocity:t,timeConstant:o,power:i,restDelta:l,modifyTarget:u,onUpdate:y(b)?T:void 0})}return{stop:()=>g==null?void 0:g.stop()}}const Uhe=e=>e*180/Math.PI,F$e=(e,t=u$e)=>Uhe(Math.atan2(t.y-e.y,t.x-e.x)),z$e=(e,t)=>{let r=!0;return t===void 0&&(t=e,r=!1),n=>r?n-e+t:(e=n,r=!0,t)},U$e=e=>e,oG=(e=U$e)=>(t,r,n)=>{const i=r-n,o=-(0-t+1)*(0-e(Math.abs(i)));return i<=0?r+o:r-o},V$e=oG(),j$e=oG(Math.sqrt),Vhe=e=>e*Math.PI/180,IO=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"),wU=e=>IO(e)&&e.hasOwnProperty("z"),XP=(e,t)=>Math.abs(e-t);function H$e(e,t){if(xU(e)&&xU(t))return XP(e,t);if(IO(e)&&IO(t)){const r=XP(e.x,t.x),n=XP(e.y,t.y),i=wU(e)&&wU(t)?XP(e.z,t.z):0;return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2))}}const G$e=(e,t,r)=>(t=Vhe(t),{x:r*Math.cos(t)+e.x,y:r*Math.sin(t)+e.y}),jhe=(e,t=2)=>(t=Math.pow(10,t),Math.round(e*t)/t),Hhe=(e,t,r,n=0)=>jhe(e+r*(t-e)/Math.max(n,r)),W$e=(e=50)=>{let t=0,r=0;return n=>{const i=EI.getFrameData().timestamp,o=i!==r?i-r:0,a=o?Hhe(t,n,o,e):t;return r=i,t=a,a}},q$e=e=>{if(typeof e=="number")return t=>Math.round(t/e)*e;{let t=0;const r=e.length;return n=>{let i=Math.abs(e[0]-n);for(t=1;t<r;t++){const o=e[t],a=Math.abs(o-n);if(a===0)return o;if(a>i)return e[t-1];if(t===r-1)return o;i=a}}}};function X$e(e,t){return e/(1e3/t)}const Y$e=(e,t,r)=>{const n=t-e;return((r-e)%n+n)%n+e},Ghe=(e,t)=>1-3*t+3*e,Whe=(e,t)=>3*t-6*e,qhe=e=>3*e,LO=(e,t,r)=>((Ghe(t,r)*e+Whe(t,r))*e+qhe(t))*e,Xhe=(e,t,r)=>3*Ghe(t,r)*e*e+2*Whe(t,r)*e+qhe(t),K$e=1e-7,J$e=10;function Q$e(e,t,r,n,i){let o,a,s=0;do a=t+(r-t)/2,o=LO(a,n,i)-e,o>0?r=a:t=a;while(Math.abs(o)>K$e&&++s<J$e);return a}const Z$e=8,$$e=.001;function eet(e,t,r,n){for(let i=0;i<Z$e;++i){const o=Xhe(t,r,n);if(o===0)return t;const a=LO(t,r,n)-e;t-=a/o}return t}const N2=11,YP=1/(N2-1);function tet(e,t,r,n){if(e===t&&r===n)return Rhe;const i=new Float32Array(N2);for(let a=0;a<N2;++a)i[a]=LO(a*YP,e,r);function o(a){let s=0,l=1;const u=N2-1;for(;l!==u&&i[l]<=a;++l)s+=YP;--l;const d=(a-i[l])/(i[l+1]-i[l]),c=s+d*YP,h=Xhe(c,e,r);return h>=$$e?eet(a,c,e,r):h===0?c:Q$e(a,s,s+YP,e,r)}return a=>a===0||a===1?a:LO(o(a),t,n)}const ret=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*e,i=t==="end"?Math.floor(n):Math.ceil(n);return KA(0,1,i/e)};lr.angle=F$e;lr.animate=Fhe;lr.anticipate=A$e;lr.applyOffset=z$e;lr.attract=V$e;lr.attractExpo=j$e;lr.backIn=iG;lr.backInOut=S$e;lr.backOut=_$e;lr.bounceIn=E$e;lr.bounceInOut=P$e;lr.bounceOut=RO;lr.circIn=Lhe;lr.circInOut=w$e;lr.circOut=Bhe;lr.clamp=KA;lr.createAnticipate=Dhe;lr.createAttractor=oG;lr.createBackIn=rG;lr.createExpoIn=Phe;lr.cubicBezier=tet;lr.decay=Nhe;lr.degreesToRadians=Vhe;lr.distance=H$e;lr.easeIn=nG;lr.easeInOut=Ihe;lr.easeOut=x$e;lr.inertia=k$e;lr.interpolate=tG;lr.isPoint=IO;lr.isPoint3D=wU;lr.keyframes=VS;lr.linear=Rhe;lr.mirrorEasing=OI;lr.mix=DI;lr.mixColor=ZH;lr.mixComplex=eG;lr.pipe=$H;lr.pointFromVector=G$e;lr.progress=QH;lr.radiansToDegrees=Uhe;lr.reverseEasing=QM;lr.smooth=W$e;lr.smoothFrame=Hhe;lr.snap=q$e;lr.spring=PI;lr.steps=ret;lr.toDecimal=jhe;lr.velocityPerFrame=X$e;lr.velocityPerSecond=zhe;lr.wrap=Y$e;class net{setAnimation(t){this.animation=t,t==null||t.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const ek=new WeakMap;function aG(e){return ek.has(e)||ek.set(e,{transforms:[],values:new Map}),ek.get(e)}function iet(e,t){return e.has(t)||e.set(t,new net),e.get(t)}function Yhe(e,t){e.indexOf(t)===-1&&e.push(t)}function Khe(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Jhe=(e,t,r)=>Math.min(Math.max(r,e),t),gs={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},kh=e=>typeof e=="number",JA=e=>Array.isArray(e)&&!kh(e[0]),oet=(e,t,r)=>{const n=t-e;return((r-e)%n+n)%n+e};function Qhe(e,t){return JA(e)?e[oet(0,e.length,t)]:e}const sG=(e,t,r)=>-r*e+r*t+e,lG=()=>{},Sh=e=>e,RI=(e,t,r)=>t-e===0?1:(r-e)/(t-e);function uG(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=RI(0,t,n);e.push(sG(r,1,i))}}function cG(e){const t=[0];return uG(t,e-1),t}function Zhe(e,t=cG(e.length),r=Sh){const n=e.length,i=n-t.length;return i>0&&uG(t,i),o=>{let a=0;for(;a<n-2&&!(o<t[a+1]);a++);let s=Jhe(0,1,RI(t[a],t[a+1],o));return s=Qhe(r,a)(s),sG(e[a],e[a+1],s)}}const $he=e=>Array.isArray(e)&&kh(e[0]),BO=e=>typeof e=="object"&&!!e.createAnimation,aet=e=>typeof e=="function",dG=e=>typeof e=="string",i0={ms:e=>e*1e3,s:e=>e/1e3};function efe(e,t){return t?e*(1e3/t):0}const set=["","X","Y","Z"],uet=["translate","scale","rotate","skew"],Qx={x:"translateX",y:"translateY",z:"translateZ"},lQ={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},cet={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:lQ,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Sh},skew:lQ},Zx=new Map,II=e=>`--motion-${e}`,NO=["x","y","z"];uet.forEach(e=>{set.forEach(t=>{NO.push(e+t),Zx.set(II(e+t),cet[e])})});const det=(e,t)=>NO.indexOf(e)-NO.indexOf(t),het=new Set(NO),LI=e=>het.has(e),fet=(e,t)=>{Qx[t]&&(t=Qx[t]);const{transforms:r}=aG(e);Yhe(r,t),e.style.transform=tfe(r)},tfe=e=>e.sort(det).reduce(pet,"").trim(),pet=(e,t)=>`${e} ${t}(var(${II(t)}))`,_U=e=>e.startsWith("--"),uQ=new Set;function met(e){if(!uQ.has(e)){uQ.add(e);try{const{syntax:t,initialValue:r}=Zx.has(e)?Zx.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:r})}catch{}}}const rfe=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,get=1e-7,vet=12;function yet(e,t,r,n,i){let o,a,s=0;do a=t+(r-t)/2,o=rfe(a,n,i)-e,o>0?r=a:t=a;while(Math.abs(o)>get&&++s<vet);return a}function lS(e,t,r,n){if(e===t&&r===n)return Sh;const i=o=>yet(o,0,1,e,r);return o=>o===0||o===1?o:rfe(i(o),t,n)}const bet=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*e,i=t==="end"?Math.floor(n):Math.ceil(n);return Jhe(0,1,i/e)},cQ={ease:lS(.25,.1,.25,1),"ease-in":lS(.42,0,1,1),"ease-in-out":lS(.42,0,.58,1),"ease-out":lS(0,0,.58,1)},xet=/\((.*?)\)/;function SU(e){if(aet(e))return e;if($he(e))return lS(...e);if(cQ[e])return cQ[e];if(e.startsWith("steps")){const t=xet.exec(e);if(t){const r=t[1].split(",");return bet(parseFloat(r[0]),r[1].trim())}}return Sh}class wet{constructor(t,r=[0,1],{easing:n,duration:i=gs.duration,delay:o=gs.delay,endDelay:a=gs.endDelay,repeat:s=gs.repeat,offset:l,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Sh,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((c,h)=>{this.resolve=c,this.reject=h}),n=n||gs.easing,BO(n)){const c=n.createAnimation(r);n=c.easing,r=c.keyframes||r,i=c.duration||i}this.repeat=s,this.easing=JA(n)?Sh:SU(n),this.updateDuration(i);const d=Zhe(r,l,JA(n)?n.map(SU):Sh);this.tick=c=>{var h;o=o;let f=0;this.pauseTime!==void 0?f=this.pauseTime:f=(c-this.startTime)*this.rate,this.t=f,f/=1e3,f=Math.max(f-o,0),this.playState==="finished"&&this.pauseTime===void 0&&(f=this.totalDuration);const g=f/this.duration;let y=Math.floor(g),m=g%1;!m&&g>=1&&(m=1),m===1&&y--;const p=y%2;(u==="reverse"||u==="alternate"&&p||u==="alternate-reverse"&&!p)&&(m=1-m);const v=f>=this.totalDuration?1:Math.min(m,1),b=d(this.easing(v));t(b),this.pauseTime===void 0&&(this.playState==="finished"||f>=this.totalDuration+a)?(this.playState="finished",(h=this.resolve)===null||h===void 0||h.call(this,b)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(t=this.reject)===null||t===void 0||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){this.pauseTime!==void 0||this.rate===0?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}const dQ=e=>$he(e)?_et(e):e,_et=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,hQ=e=>document.createElement("div").animate(e,{duration:.001}),fQ={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{hQ({opacity:[1]})}catch{return!1}return!0},finished:()=>!!hQ({opacity:[0,1]}).finished},tk={},k2={};for(const e in fQ)k2[e]=()=>(tk[e]===void 0&&(tk[e]=fQ[e]()),tk[e]);function Aet(e,t){for(let r=0;r<e.length;r++)e[r]===null&&(e[r]=r?e[r-1]:t());return e}const nfe=e=>Array.isArray(e)?e:[e];function kO(e){return Qx[e]&&(e=Qx[e]),LI(e)?II(e):e}const Lb={get:(e,t)=>{t=kO(t);let r=_U(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!r&&r!==0){const n=Zx.get(t);n&&(r=n.initialValue)}return r},set:(e,t,r)=>{t=kO(t),_U(t)?e.style.setProperty(t,r):e.style[t]=r}};function ife(e,t=!0){if(!(!e||e.playState==="finished"))try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch{}}function Met(){return window.__MOTION_DEV_TOOLS_RECORD}function BI(e,t,r,n={}){const i=Met(),o=n.record!==!1&&i;let a,{duration:s=gs.duration,delay:l=gs.delay,endDelay:u=gs.endDelay,repeat:d=gs.repeat,easing:c=gs.easing,direction:h,offset:f,allowWebkitAcceleration:g=!1}=n;const y=aG(e);let m=k2.waapi();const p=LI(t);p&&fet(e,t);const v=kO(t),b=iet(y.values,v),x=Zx.get(v);return ife(b.animation,!(BO(c)&&b.generator)&&n.record!==!1),()=>{const _=()=>{var M,T;return(T=(M=Lb.get(e,v))!==null&&M!==void 0?M:x==null?void 0:x.initialValue)!==null&&T!==void 0?T:0};let A=Aet(nfe(r),_);if(BO(c)){const M=c.createAnimation(A,_,p,v,b);c=M.easing,M.keyframes!==void 0&&(A=M.keyframes),M.duration!==void 0&&(s=M.duration)}if(_U(v)&&(k2.cssRegisterProperty()?met(v):m=!1),m){x&&(A=A.map(C=>kh(C)?x.toDefaultUnit(C):C)),A.length===1&&(!k2.partialKeyframes()||o)&&A.unshift(_());const M={delay:i0.ms(l),duration:i0.ms(s),endDelay:i0.ms(u),easing:JA(c)?void 0:dQ(c),direction:h,iterations:d+1,fill:"both"};a=e.animate({[v]:A,offset:f,easing:JA(c)?c.map(dQ):void 0},M),a.finished||(a.finished=new Promise((C,E)=>{a.onfinish=C,a.oncancel=E}));const T=A[A.length-1];a.finished.then(()=>{Lb.set(e,v,T),a.cancel()}).catch(lG),g||(a.playbackRate=1.000001)}else if(p){A=A.map(T=>typeof T=="string"?parseFloat(T):T),A.length===1&&A.unshift(parseFloat(_()));const M=T=>{x&&(T=x.toDefaultUnit(T)),Lb.set(e,v,T)};a=new wet(M,A,Object.assign(Object.assign({},n),{duration:s,easing:c}))}else{const M=A[A.length-1];Lb.set(e,v,x&&kh(M)?x.toDefaultUnit(M):M)}return o&&i(e,t,A,{duration:s,delay:l,easing:c,repeat:d,offset:f},"motion-one"),b.setAnimation(a),a}}const hG=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function NI(e,t){var r;return typeof e=="string"?t?((r=t[e])!==null&&r!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const Cet=e=>e(),fG=(e,t,r=gs.duration)=>new Proxy({animations:e.map(Cet).filter(Boolean),duration:r,options:t},Eet),Tet=e=>e.animations[0],Eet={get:(e,t)=>{const r=Tet(e);switch(t){case"duration":return e.duration;case"currentTime":return i0.s((r==null?void 0:r[t])||0);case"playbackRate":case"playState":return r==null?void 0:r[t];case"finished":return e.finished||(e.finished=Promise.all(e.animations.map(Pet)).catch(lG)),e.finished;case"stop":return()=>{e.animations.forEach(n=>ife(n))};case"forEachNative":return n=>{e.animations.forEach(i=>n(i,e))};default:return typeof(r==null?void 0:r[t])>"u"?void 0:()=>e.animations.forEach(n=>n[t]())}},set:(e,t,r)=>{switch(t){case"currentTime":r=i0.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<e.animations.length;n++)e.animations[n][t]=r;return!0}return!1}},Pet=e=>e.finished;function Det(e=.1,{start:t=0,from:r=0,easing:n}={}){return(i,o)=>{const a=kh(r)?r:Oet(r,o),s=Math.abs(a-i);let l=e*s;if(n){const u=o*e;l=SU(n)(l/u)*u}return t+l}}function Oet(e,t){if(e==="first")return 0;{const r=t-1;return e==="last"?r:r/2}}function ofe(e,t,r){return typeof e=="function"?e(t,r):e}function Ret(e,t,r={}){e=NI(e);const n=e.length,i=[];for(let o=0;o<n;o++){const a=e[o];for(const s in t){const l=hG(r,s);l.delay=ofe(l.delay,o,n);const u=BI(a,s,t[s],l);i.push(u)}}return fG(i,r,r.duration)}function pQ(e,t,r,n){var i;return kh(t)?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?r:(i=n.get(t))!==null&&i!==void 0?i:e}function Iet(e,t,r){for(let n=0;n<e.length;n++){const i=e[n];i.at>t&&i.at<r&&(Khe(e,i),n--)}}function Let(e,t,r,n,i,o){Iet(e,i,o);for(let a=0;a<t.length;a++)e.push({value:t[a],at:sG(i,o,n[a]),easing:Qhe(r,a)})}function Bet(e,t){return e.at===t.at?e.value===null?1:-1:e.at-t.at}function Net(e,t={}){var r;const n=ket(e,t),i=n.map(o=>BI(...o)).filter(Boolean);return fG(i,t,(r=n[0])===null||r===void 0?void 0:r[3].duration)}function ket(e,t={}){var{defaultOptions:r={}}=t,n=D1(t,["defaultOptions"]);const i=[],o=new Map,a={},s=new Map;let l=0,u=0,d=0;for(let c=0;c<e.length;c++){const h=e[c];if(dG(h)){s.set(h,u);continue}else if(!Array.isArray(h)){s.set(h.name,pQ(u,h.at,l,s));continue}const[f,g,y={}]=h;y.at!==void 0&&(u=pQ(u,y.at,l,s));let m=0;const p=NI(f,a),v=p.length;for(let b=0;b<v;b++){const x=p[b],_=Fet(x,o);for(const A in g){const M=zet(A,_);let T=nfe(g[A]);const C=hG(y,A);let{duration:E=r.duration||gs.duration,easing:D=r.easing||gs.easing}=C;if(BO(D)){const G=LI(A);fhe(T.length===2||!G);const z=D.createAnimation(T,()=>"0",G);D=z.easing,z.keyframes!==void 0&&(T=z.keyframes),z.duration!==void 0&&(E=z.duration)}const I=ofe(y.delay,b,v)||0,k=u+I,L=k+E;let{offset:U=cG(T.length)}=C;U.length===1&&U[0]===0&&(U[1]=1);const W=length-T.length;W>0&&uG(U,W),T.length===1&&T.unshift(null),Let(M,T,D,U,k,L),m=Math.max(I+E,m),d=Math.max(L,d)}}l=u,u+=m}return o.forEach((c,h)=>{for(const f in c){const g=c[f];g.sort(Bet);const y=[],m=[],p=[];for(let v=0;v<g.length;v++){const{at:b,value:x,easing:_}=g[v];y.push(x),m.push(RI(0,d,b)),p.push(_||gs.easing)}m[0]!==0&&(m.unshift(0),y.unshift(y[0]),p.unshift("linear")),m[m.length-1]!==1&&(m.push(1),y.push(null)),i.push([h,f,y,Object.assign(Object.assign(Object.assign({},r),{duration:d,easing:p,offset:m}),n)])}}),i}function Fet(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function zet(e,t){return t[e]||(t[e]=[]),t[e]}const Uet=5;function pG(e,t,r){const n=Math.max(t-Uet,0);return efe(r-e(n),t-n)}const cx={stiffness:100,damping:10,mass:1},Vet=(e=cx.stiffness,t=cx.damping,r=cx.mass)=>t/(2*Math.sqrt(e*r));function jet(e,t,r){return e<t&&r>=t||e>t&&r<=t}const afe=({stiffness:e=cx.stiffness,damping:t=cx.damping,mass:r=cx.mass,from:n=0,to:i=1,velocity:o=0,restSpeed:a,restDistance:s}={})=>{o=o?i0.s(o):0;const l={done:!1,hasReachedTarget:!1,current:n,target:i},u=i-n,d=Math.sqrt(e/r)/1e3,c=Vet(e,t,r),h=Math.abs(u)<5;a||(a=h?.01:2),s||(s=h?.005:.5);let f;if(c<1){const g=d*Math.sqrt(1-c*c);f=y=>i-Math.exp(-c*d*y)*((-o+c*d*u)/g*Math.sin(g*y)+u*Math.cos(g*y))}else f=g=>i-Math.exp(-d*g)*(u+(-o+d*u)*g);return g=>{l.current=f(g);const y=g===0?o:pG(f,g,l.current),m=Math.abs(y)<=a,p=Math.abs(i-l.current)<=s;return l.done=m&&p,l.hasReachedTarget=jet(n,i,l.current),l}},Het=({from:e=0,velocity:t=0,power:r=.8,decay:n=.325,bounceDamping:i,bounceStiffness:o,changeTarget:a,min:s,max:l,restDistance:u=.5,restSpeed:d})=>{n=i0.ms(n);const c={hasReachedTarget:!1,done:!1,current:e,target:e},h=M=>s!==void 0&&M<s||l!==void 0&&M>l,f=M=>s===void 0?l:l===void 0||Math.abs(s-M)<Math.abs(l-M)?s:l;let g=r*t;const y=e+g,m=a===void 0?y:a(y);c.target=m,m!==y&&(g=m-e);const p=M=>-g*Math.exp(-M/n),v=M=>m+p(M),b=M=>{const T=p(M),C=v(M);c.done=Math.abs(T)<=u,c.current=c.done?m:C};let x,_;const A=M=>{h(c.current)&&(x=M,_=afe({from:c.current,to:f(c.current),velocity:pG(v,M,c.current),damping:i,stiffness:o,restDistance:u,restSpeed:d}))};return A(0),M=>{let T=!1;return!_&&x===void 0&&(T=!0,b(M),A(M)),x!==void 0&&M>x?(c.hasReachedTarget=!0,_(M-x)):(c.hasReachedTarget=!1,!T&&b(M),c)}},rk=10,Get=1e4;function Wet(e,t=Sh){let r,n=rk,i=e(0);const o=[t(i.current)];for(;!i.done&&n<Get;)i=e(n),o.push(t(i.done?i.target:i.current)),r===void 0&&i.hasReachedTarget&&(r=n),n+=rk;const a=n-rk;return o.length===1&&o.push(i.current),{keyframes:o,duration:a/1e3,overshootDuration:(r??a)/1e3}}function sfe(e){const t=new WeakMap;return(r={})=>{const n=new Map,i=(a=0,s=100,l=0,u=!1)=>{const d=`${a}-${s}-${l}-${u}`;return n.has(d)||n.set(d,e(Object.assign({from:a,to:s,velocity:l,restSpeed:u?.05:2,restDistance:u?.01:.5},r))),n.get(d)},o=a=>(t.has(a)||t.set(a,Wet(a)),t.get(a));return{createAnimation:(a,s,l,u,d)=>{var c,h;let f;const g=a.length;if(l&&g<=2&&a.every(qet)){const m=a[g-1],p=g===1?null:a[0];let v=0,b=0;const x=d==null?void 0:d.generator;if(x){const{animation:M,generatorStartTime:T}=d,C=(M==null?void 0:M.startTime)||T||0,E=(M==null?void 0:M.currentTime)||performance.now()-C,D=x(E).current;b=(c=p)!==null&&c!==void 0?c:D,(g===1||g===2&&a[0]===null)&&(v=pG(I=>x(I).current,E,D))}else b=(h=p)!==null&&h!==void 0?h:parseFloat(s());const _=i(b,m,v,u==null?void 0:u.includes("scale")),A=o(_);f=Object.assign(Object.assign({},A),{easing:"linear"}),d&&(d.generator=_,d.generatorStartTime=performance.now())}else f={easing:"ease",duration:o(i(0,100)).overshootDuration};return f}}}}const qet=e=>typeof e!="string",Xet=sfe(afe),Yet=sfe(Het),Ket={any:0,all:1};function lfe(e,t,{root:r,margin:n,amount:i="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const o=NI(e),a=new WeakMap,s=u=>{u.forEach(d=>{const c=a.get(d.target);if(d.isIntersecting!==!!c)if(d.isIntersecting){const h=t(d);typeof h=="function"?a.set(d.target,h):l.unobserve(d.target)}else c&&(c(d),a.delete(d.target))})},l=new IntersectionObserver(s,{root:r,rootMargin:n,threshold:typeof i=="number"?i:Ket[i]});return o.forEach(u=>l.observe(u)),()=>l.disconnect()}const F2=new WeakMap;let Hf;function Jet(e,t){if(t){const{inlineSize:r,blockSize:n}=t[0];return{width:r,height:n}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function Qet({target:e,contentRect:t,borderBoxSize:r}){var n;(n=F2.get(e))===null||n===void 0||n.forEach(i=>{i({target:e,contentSize:t,get size(){return Jet(e,r)}})})}function Zet(e){e.forEach(Qet)}function $et(){typeof ResizeObserver>"u"||(Hf=new ResizeObserver(Zet))}function ett(e,t){Hf||$et();const r=NI(e);return r.forEach(n=>{let i=F2.get(n);i||(i=new Set,F2.set(n,i)),i.add(t),Hf==null||Hf.observe(n)}),()=>{r.forEach(n=>{const i=F2.get(n);i==null||i.delete(t),i!=null&&i.size||Hf==null||Hf.unobserve(n)})}}const z2=new Set;let jS;function ttt(){jS=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};z2.forEach(r=>r(t))},window.addEventListener("resize",jS)}function rtt(e){return z2.add(e),jS||ttt(),()=>{z2.delete(e),!z2.size&&jS&&(jS=void 0)}}function ufe(e,t){return typeof e=="function"?rtt(e):ett(e,t)}const ntt=50,mQ=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),itt=()=>({time:0,x:mQ(),y:mQ()}),ott={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function gQ(e,t,r,n){const i=r[t],{length:o,position:a}=ott[t],s=i.current,l=r.time;i.current=e["scroll"+a],i.scrollLength=e["scroll"+o]-e["client"+o],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=RI(0,i.scrollLength,i.current);const u=n-l;i.velocity=u>ntt?0:efe(i.current-s,u)}function att(e,t,r){gQ(e,"x",t,r),gQ(e,"y",t,r),t.time=r}function stt(e,t){let r={x:0,y:0},n=e;for(;n&&n!==t;)if(n instanceof HTMLElement)r.x+=n.offsetLeft,r.y+=n.offsetTop,n=n.offsetParent;else if(n instanceof SVGGraphicsElement&&"getBBox"in n){const{top:i,left:o}=n.getBBox();for(r.x+=o,r.y+=i;n&&n.tagName!=="svg";)n=n.parentNode}return r}const cfe={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},AU={start:0,center:.5,end:1};function vQ(e,t,r=0){let n=0;if(AU[e]!==void 0&&(e=AU[e]),dG(e)){const i=parseFloat(e);e.endsWith("px")?n=i:e.endsWith("%")?e=i/100:e.endsWith("vw")?n=i/100*document.documentElement.clientWidth:e.endsWith("vh")?n=i/100*document.documentElement.clientHeight:e=i}return kh(e)&&(n=t*e),r+n}const ltt=[0,0];function utt(e,t,r,n){let i=Array.isArray(e)?e:ltt,o=0,a=0;return kh(e)?i=[e,e]:dG(e)&&(e=e.trim(),e.includes(" ")?i=e.split(" "):i=[e,AU[e]?e:"0"]),o=vQ(i[0],r,n),a=vQ(i[1],t),o-a}const ctt={x:0,y:0};function dtt(e,t,r){let{offset:n=cfe.All}=r;const{target:i=e,axis:o="y"}=r,a=o==="y"?"height":"width",s=i!==e?stt(i,e):ctt,l=i===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:i.clientWidth,height:i.clientHeight},u={width:e.clientWidth,height:e.clientHeight};t[o].offset.length=0;let d=!t[o].interpolate;const c=n.length;for(let h=0;h<c;h++){const f=utt(n[h],u[a],l[a],s[o]);!d&&f!==t[o].interpolatorOffsets[h]&&(d=!0),t[o].offset[h]=f}d&&(t[o].interpolate=Zhe(cG(c),t[o].offset),t[o].interpolatorOffsets=[...t[o].offset]),t[o].progress=t[o].interpolate(t[o].current)}function htt(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let n=t;for(;n&&n!=e;)r.x.targetOffset+=n.offsetLeft,r.y.targetOffset+=n.offsetTop,n=n.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}function ftt(e,t,r,n={}){const i=n.axis||"y";return{measure:()=>htt(e,n.target,r),update:o=>{att(e,r,o),(n.offset||n.target)&&dtt(e,r,n)},notify:typeof t=="function"?()=>t(r):ptt(t,r[i])}}function ptt(e,t){return e.pause(),e.forEachNative((r,{easing:n})=>{var i,o;if(r.updateDuration)n||(r.easing=Sh),r.updateDuration(1);else{const a={duration:1e3};n||(a.easing="linear"),(o=(i=r.effect)===null||i===void 0?void 0:i.updateTiming)===null||o===void 0||o.call(i,a)}}),()=>{e.currentTime=t.progress}}const H_=new WeakMap,yQ=new WeakMap,nk=new WeakMap,bQ=e=>e===document.documentElement?window:e;function mtt(e,t={}){var{container:r=document.documentElement}=t,n=D1(t,["container"]);let i=nk.get(r);i||(i=new Set,nk.set(r,i));const o=itt(),a=ftt(r,e,o,n);if(i.add(a),!H_.has(r)){const u=()=>{const c=performance.now();for(const h of i)h.measure();for(const h of i)h.update(c);for(const h of i)h.notify()};H_.set(r,u);const d=bQ(r);window.addEventListener("resize",u,{passive:!0}),r!==document.documentElement&&yQ.set(r,ufe(r,u)),d.addEventListener("scroll",u,{passive:!0})}const s=H_.get(r),l=requestAnimationFrame(s);return()=>{var u;typeof e!="function"&&e.stop(),cancelAnimationFrame(l);const d=nk.get(r);if(!d||(d.delete(a),d.size))return;const c=H_.get(r);H_.delete(r),c&&(bQ(r).removeEventListener("scroll",c),(u=yQ.get(r))===null||u===void 0||u(),window.removeEventListener("resize",c))}}function gtt(e,t){return typeof e!=typeof t?!0:Array.isArray(e)&&Array.isArray(t)?!vtt(e,t):e!==t}function vtt(e,t){const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ytt(e){return typeof e=="object"}function xQ(e,t){if(ytt(e))return e;if(e&&t)return t[e]}let Lp;function btt(){if(!Lp)return;const e=Lp.sort(wtt).map(_tt);e.forEach(wQ),e.forEach(wQ),Lp=void 0}function ik(e){Lp?Yhe(Lp,e):(Lp=[e],requestAnimationFrame(btt))}function xtt(e){Lp&&Khe(Lp,e)}const wtt=(e,t)=>e.getDepth()-t.getDepth(),_tt=e=>e.animateUpdates(),wQ=e=>e.next(),_Q=(e,t)=>new CustomEvent(e,{detail:{target:t}});function MU(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:r}}))}function SQ(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:r}}))}const Stt={isActive:e=>!!e.inView,subscribe:(e,{enable:t,disable:r},{inViewOptions:n={}})=>{const{once:i}=n,o=D1(n,["once"]);return lfe(e,a=>{if(t(),SQ(e,"viewenter",a),!i)return s=>{r(),SQ(e,"viewleave",s)}},o)}},AQ=(e,t,r)=>n=>{n.pointerType&&n.pointerType!=="mouse"||(r(),MU(e,t,n))},Att={isActive:e=>!!e.hover,subscribe:(e,{enable:t,disable:r})=>{const n=AQ(e,"hoverstart",t),i=AQ(e,"hoverend",r);return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",i),()=>{e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",i)}}},Mtt={isActive:e=>!!e.press,subscribe:(e,{enable:t,disable:r})=>{const n=o=>{r(),MU(e,"pressend",o),window.removeEventListener("pointerup",n)},i=o=>{t(),MU(e,"pressstart",o),window.addEventListener("pointerup",n)};return e.addEventListener("pointerdown",i),()=>{e.removeEventListener("pointerdown",i),window.removeEventListener("pointerup",n)}}},U2={inView:Stt,hover:Att,press:Mtt},MQ=["initial","animate",...Object.keys(U2),"exit"],CU=new WeakMap;function Ctt(e={},t){let r,n=t?t.getDepth()+1:0;const i={initial:!0,animate:!0},o={},a={};for(const y of MQ)a[y]=typeof e[y]=="string"?e[y]:t==null?void 0:t.getContext()[y];const s=e.initial===!1?"animate":"initial";let l=xQ(e[s]||a[s],e.variants)||{},u=D1(l,["transition"]);const d=Object.assign({},u);function*c(){var y,m;const p=u;u={};const v={};for(const M of MQ){if(!i[M])continue;const T=xQ(e[M]);if(T)for(const C in T)C!=="transition"&&(u[C]=T[C],v[C]=hG((m=(y=T.transition)!==null&&y!==void 0?y:e.transition)!==null&&m!==void 0?m:{},C))}const b=new Set([...Object.keys(u),...Object.keys(p)]),x=[];b.forEach(M=>{var T;u[M]===void 0&&(u[M]=d[M]),gtt(p[M],u[M])&&((T=d[M])!==null&&T!==void 0||(d[M]=Lb.get(r,M)),x.push(BI(r,M,u[M],v[M])))}),yield;const _=x.map(M=>M()).filter(Boolean);if(!_.length)return;const A=u;r.dispatchEvent(_Q("motionstart",A)),Promise.all(_.map(M=>M.finished)).then(()=>{r.dispatchEvent(_Q("motioncomplete",A))}).catch(lG)}const h=(y,m)=>()=>{i[y]=m,ik(g)},f=()=>{for(const y in U2){const m=U2[y].isActive(e),p=o[y];m&&!p?o[y]=U2[y].subscribe(r,{enable:h(y,!0),disable:h(y,!1)},e):!m&&p&&(p(),delete o[y])}},g={update:y=>{r&&(e=y,f(),ik(g))},setActive:(y,m)=>{r&&(i[y]=m,ik(g))},animateUpdates:c,getDepth:()=>n,getTarget:()=>u,getOptions:()=>e,getContext:()=>a,mount:y=>(r=y,CU.set(r,g),f(),()=>{CU.delete(r),xtt(g);for(const m in o)o[m]()}),isMounted:()=>!!r};return g}function dfe(e){const t={},r=[];for(let n in e){const i=e[n];LI(n)&&(Qx[n]&&(n=Qx[n]),r.push(n),n=II(n));let o=Array.isArray(i)?i[0]:i;const a=Zx.get(n);a&&(o=kh(i)?a.toDefaultUnit(i):i),t[n]=o}return r.length&&(t.transform=tfe(r)),t}const Ttt=e=>`-${e.toLowerCase()}`,Ett=e=>e.replace(/[A-Z]/g,Ttt);function Ptt(e={}){const t=dfe(e);let r="";for(const n in t)r+=n.startsWith("--")?n:Ett(n),r+=`: ${t[n]}; `;return r}const Dtt=Object.freeze(Object.defineProperty({__proto__:null,ScrollOffset:cfe,animate:Ret,animateStyle:BI,createMotionState:Ctt,createStyleString:Ptt,createStyles:dfe,getAnimationData:aG,getStyleName:kO,glide:Yet,inView:lfe,mountedStates:CU,resize:ufe,scroll:mtt,spring:Xet,stagger:Det,style:Lb,timeline:Net,withControls:fG},Symbol.toStringTag,{value:"Module"})),Ott=r1(Dtt);function Rtt(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Itt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ltt=Rtt(function(e){return Itt.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});const Btt=Object.freeze(Object.defineProperty({__proto__:null,default:Ltt},Symbol.toStringTag,{value:"Module"})),Ntt=r1(Btt);(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0});var r=hhe,n=te,i=phe,o=ho,a=lr,s=j0,l=Ott;function u(O){return O&&typeof O=="object"&&"default"in O?O:{default:O}}function d(O){if(O&&O.__esModule)return O;var B=Object.create(null);return O&&Object.keys(O).forEach(function(w){if(w!=="default"){var S=Object.getOwnPropertyDescriptor(O,w);Object.defineProperty(B,w,S.get?S:{enumerable:!0,get:function(){return O[w]}})}}),B.default=O,Object.freeze(B)}var c=d(n),h=u(n),f=u(s),g="production",y=typeof process>"u"||t===void 0?g:"production",m=function(O){return{isEnabled:function(B){return O.some(function(w){return!!B[w]})}}},p={measureLayout:m(["layout","layoutId","drag"]),animation:m(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:m(["exit"]),drag:m(["drag","dragControls"]),focus:m(["whileFocus"]),hover:m(["whileHover","onHoverStart","onHoverEnd"]),tap:m(["whileTap","onTap","onTapStart","onTapCancel"]),pan:m(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:m(["whileInView","onViewportEnter","onViewportLeave"])};function v(O){for(var B in O)O[B]!==null&&(B==="projectionNodeConstructor"?p.projectionNodeConstructor=O[B]:p[B].Component=O[B])}var b=n.createContext({strict:!1}),x=Object.keys(p),_=x.length;function A(O,B,w){var S=[],P=n.useContext(b);if(!B)return null;y!=="production"&&w&&P.strict&&i.invariant(!1,"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.");for(var R=0;R<_;R++){var N=x[R],F=p[N],K=F.isEnabled,ee=F.Component;K(O)&&ee&&S.push(c.createElement(ee,r.__assign({key:N},O,{visualElement:B})))}return S}var M=n.createContext({transformPagePoint:function(O){return O},isStatic:!1,reducedMotion:"never"}),T=n.createContext({});function C(){return n.useContext(T).visualElement}var E=n.createContext(null),D=typeof document<"u",I=D?n.useLayoutEffect:n.useEffect,k={current:null},L=!1;function U(){if(L=!0,!!D)if(window.matchMedia){var O=window.matchMedia("(prefers-reduced-motion)"),B=function(){return k.current=O.matches};O.addListener(B),B()}else k.current=!1}function W(){!L&&U();var O=r.__read(n.useState(k.current),1),B=O[0];return B}function G(){var O=W(),B=n.useContext(M).reducedMotion;return B==="never"?!1:B==="always"?!0:O}function z(O,B,w,S){var P=n.useContext(b),R=C(),N=n.useContext(E),F=G(),K=n.useRef(void 0);S||(S=P.renderer),!K.current&&S&&(K.current=S(O,{visualState:B,parent:R,props:w,presenceId:N==null?void 0:N.id,blockInitialAnimation:(N==null?void 0:N.initial)===!1,shouldReduceMotion:F}));var ee=K.current;return I(function(){ee==null||ee.syncRender()}),n.useEffect(function(){var oe;(oe=ee==null?void 0:ee.animationState)===null||oe===void 0||oe.animateChanges()}),I(function(){return function(){return ee==null?void 0:ee.notifyUnmount()}},[]),ee}function V(O){return typeof O=="object"&&Object.prototype.hasOwnProperty.call(O,"current")}function j(O,B,w){return n.useCallback(function(S){var P;S&&((P=O.mount)===null||P===void 0||P.call(O,S)),B&&(S?B.mount(S):B.unmount()),w&&(typeof w=="function"?w(S):V(w)&&(w.current=S))},[B])}function H(O){return Array.isArray(O)}function Y(O){return typeof O=="string"||H(O)}function Q(O){var B={};return O.forEachValue(function(w,S){return B[S]=w.get()}),B}function $(O){var B={};return O.forEachValue(function(w,S){return B[S]=w.getVelocity()}),B}function ne(O,B,w,S,P){var R;return S===void 0&&(S={}),P===void 0&&(P={}),typeof B=="function"&&(B=B(w??O.custom,S,P)),typeof B=="string"&&(B=(R=O.variants)===null||R===void 0?void 0:R[B]),typeof B=="function"&&(B=B(w??O.custom,S,P)),B}function Z(O,B,w){var S=O.getProps();return ne(S,B,w??S.custom,Q(O),$(O))}function ce(O){var B;return typeof((B=O.animate)===null||B===void 0?void 0:B.start)=="function"||Y(O.initial)||Y(O.animate)||Y(O.whileHover)||Y(O.whileDrag)||Y(O.whileTap)||Y(O.whileFocus)||Y(O.exit)}function ae(O){return!!(ce(O)||O.variants)}function ie(O,B){if(ce(O)){var w=O.initial,S=O.animate;return{initial:w===!1||Y(w)?w:void 0,animate:Y(S)?S:void 0}}return O.inherit!==!1?B:{}}function le(O){var B=ie(O,n.useContext(T)),w=B.initial,S=B.animate;return n.useMemo(function(){return{initial:w,animate:S}},[se(w),se(S)])}function se(O){return Array.isArray(O)?O.join(" "):O}function re(O){var B=n.useRef(null);return B.current===null&&(B.current=O()),B.current}var ye={hasAnimatedSinceResize:!0,hasEverUpdated:!1},be=1;function _e(){return re(function(){if(ye.hasEverUpdated)return be++})}var Se=n.createContext({}),Fe=n.createContext({});function Re(O,B,w,S){var P,R=B.layoutId,N=B.layout,F=B.drag,K=B.dragConstraints,ee=B.layoutScroll,oe=n.useContext(Fe);!S||!w||w!=null&&w.projection||(w.projection=new S(O,w.getLatestValues(),(P=w.parent)===null||P===void 0?void 0:P.projection),w.projection.setOptions({layoutId:R,layout:N,alwaysMeasureLayout:!!F||K&&V(K),visualElement:w,scheduleRender:function(){return w.scheduleRender()},animationType:typeof N=="string"?N:"both",initialPromotionConfig:oe,layoutScroll:ee}))}var Le=function(O){r.__extends(B,O);function B(){return O!==null&&O.apply(this,arguments)||this}return B.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},B.prototype.componentDidUpdate=function(){},B.prototype.updateProps=function(){var w=this.props,S=w.visualElement,P=w.props;S&&S.setProps(P)},B.prototype.render=function(){return this.props.children},B}(h.default.Component);function rt(O){var B=O.preloadedFeatures,w=O.createVisualElement,S=O.projectionNodeConstructor,P=O.useRender,R=O.useVisualState,N=O.Component;B&&v(B);function F(K,ee){var oe=st(K);K=r.__assign(r.__assign({},K),{layoutId:oe});var ve=n.useContext(M),xe=null,Te=le(K),Me=ve.isStatic?void 0:_e(),He=R(K,ve.isStatic);return!ve.isStatic&&D&&(Te.visualElement=z(N,He,r.__assign(r.__assign({},ve),K),w),Re(Me,K,Te.visualElement,S||p.projectionNodeConstructor),xe=A(K,Te.visualElement,B)),c.createElement(Le,{visualElement:Te.visualElement,props:r.__assign(r.__assign({},ve),K)},xe,c.createElement(T.Provider,{value:Te},P(N,K,Me,j(He,Te.visualElement,ee),He,ve.isStatic,Te.visualElement)))}return n.forwardRef(F)}function st(O){var B,w=O.layoutId,S=(B=n.useContext(Se))===null||B===void 0?void 0:B.id;return S&&w!==void 0?S+"-"+w:w}function he(O){function B(S,P){return P===void 0&&(P={}),rt(O(S,P))}if(typeof Proxy>"u")return B;var w=new Map;return new Proxy(B,{get:function(S,P){return w.has(P)||w.set(P,B(P)),w.get(P)}})}var q=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function J(O){return typeof O!="string"||O.includes("-")?!1:!!(q.indexOf(O)>-1||/[A-Z]/.test(O))}var ge={};function Pe(O){Object.assign(ge,O)}var De=["","X","Y","Z"],Ve=["translate","scale","rotate","skew"],et=["transformPerspective","x","y","z"];Ve.forEach(function(O){return De.forEach(function(B){return et.push(O+B)})});function Ce(O,B){return et.indexOf(O)-et.indexOf(B)}var Je=new Set(et);function ut(O){return Je.has(O)}var pt=new Set(["originX","originY","originZ"]);function Ke(O){return pt.has(O)}function gt(O,B){var w=B.layout,S=B.layoutId;return ut(O)||Ke(O)||(w||S!==void 0)&&(!!ge[O]||O==="opacity")}var we=function(O){return!!(O!==null&&typeof O=="object"&&O.getVelocity)},Xe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function nt(O,B,w,S){var P=O.transform,R=O.transformKeys,N=B.enableHardwareAcceleration,F=N===void 0?!0:N,K=B.allowTransformNone,ee=K===void 0?!0:K,oe="";R.sort(Ce);for(var ve=!1,xe=R.length,Te=0;Te<xe;Te++){var Me=R[Te];oe+="".concat(Xe[Me]||Me,"(").concat(P[Me],") "),Me==="z"&&(ve=!0)}return!ve&&F?oe+="translateZ(0)":oe=oe.trim(),S?oe=S(P,w?"":oe):ee&&w&&(oe="none"),oe}function fe(O){var B=O.originX,w=B===void 0?"50%":B,S=O.originY,P=S===void 0?"50%":S,R=O.originZ,N=R===void 0?0:R;return"".concat(w," ").concat(P," ").concat(N)}function Be(O){return O.startsWith("--")}var de=function(O,B){return B&&typeof O=="number"?B.transform(O):O},Ye=r.__assign(r.__assign({},o.number),{transform:Math.round}),$e={borderWidth:o.px,borderTopWidth:o.px,borderRightWidth:o.px,borderBottomWidth:o.px,borderLeftWidth:o.px,borderRadius:o.px,radius:o.px,borderTopLeftRadius:o.px,borderTopRightRadius:o.px,borderBottomRightRadius:o.px,borderBottomLeftRadius:o.px,width:o.px,maxWidth:o.px,height:o.px,maxHeight:o.px,size:o.px,top:o.px,right:o.px,bottom:o.px,left:o.px,padding:o.px,paddingTop:o.px,paddingRight:o.px,paddingBottom:o.px,paddingLeft:o.px,margin:o.px,marginTop:o.px,marginRight:o.px,marginBottom:o.px,marginLeft:o.px,rotate:o.degrees,rotateX:o.degrees,rotateY:o.degrees,rotateZ:o.degrees,scale:o.scale,scaleX:o.scale,scaleY:o.scale,scaleZ:o.scale,skew:o.degrees,skewX:o.degrees,skewY:o.degrees,distance:o.px,translateX:o.px,translateY:o.px,translateZ:o.px,x:o.px,y:o.px,z:o.px,perspective:o.px,transformPerspective:o.px,opacity:o.alpha,originX:o.progressPercentage,originY:o.progressPercentage,originZ:o.px,zIndex:Ye,fillOpacity:o.alpha,strokeOpacity:o.alpha,numOctaves:Ye};function ze(O,B,w,S){var P,R=O.style,N=O.vars,F=O.transform,K=O.transformKeys,ee=O.transformOrigin;K.length=0;var oe=!1,ve=!1,xe=!0;for(var Te in B){var Me=B[Te];if(Be(Te)){N[Te]=Me;continue}var He=$e[Te],Ze=de(Me,He);if(ut(Te)){if(oe=!0,F[Te]=Ze,K.push(Te),!xe)continue;Me!==((P=He.default)!==null&&P!==void 0?P:0)&&(xe=!1)}else Ke(Te)?(ee[Te]=Ze,ve=!0):R[Te]=Ze}oe?R.transform=nt(O,w,xe,S):S?R.transform=S({},""):!B.transform&&R.transform&&(R.transform="none"),ve&&(R.transformOrigin=fe(ee))}var ct=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function At(O,B,w){for(var S in B)!we(B[S])&&!gt(S,w)&&(O[S]=B[S])}function rr(O,B,w){var S=O.transformTemplate;return n.useMemo(function(){var P=ct();ze(P,B,{enableHardwareAcceleration:!w},S);var R=P.vars,N=P.style;return r.__assign(r.__assign({},R),N)},[B])}function Gt(O,B,w){var S=O.style||{},P={};return At(P,S,O),Object.assign(P,rr(O,B,w)),O.transformValues&&(P=O.transformValues(P)),P}function Lr(O,B,w){var S={},P=Gt(O,B,w);return O.drag&&O.dragListener!==!1&&(S.draggable=!1,P.userSelect=P.WebkitUserSelect=P.WebkitTouchCallout="none",P.touchAction=O.drag===!0?"none":"pan-".concat(O.drag==="x"?"y":"x")),S.style=P,S}var nr=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function on(O){return nr.has(O)}var bi=function(O){return!on(O)};function dl(O){O&&(bi=function(B){return B.startsWith("on")?!on(B):O(B)})}try{dl(Ntt.default)}catch{}function Ka(O,B,w){var S={};for(var P in O)(bi(P)||w===!0&&on(P)||!B&&!on(P)||O.draggable&&P.startsWith("onDrag"))&&(S[P]=O[P]);return S}function me(O,B,w){return typeof O=="string"?O:o.px.transform(B+w*O)}function qe(O,B,w){var S=me(B,O.x,O.width),P=me(w,O.y,O.height);return"".concat(S," ").concat(P)}var it={offset:"stroke-dashoffset",array:"stroke-dasharray"},je={offset:"strokeDashoffset",array:"strokeDasharray"};function at(O,B,w,S,P){w===void 0&&(w=1),S===void 0&&(S=0),P===void 0&&(P=!0),O.pathLength=1;var R=P?it:je;O[R.offset]=o.px.transform(-S);var N=o.px.transform(B),F=o.px.transform(w);O[R.array]="".concat(N," ").concat(F)}function Ft(O,B,w,S){var P=B.attrX,R=B.attrY,N=B.originX,F=B.originY,K=B.pathLength,ee=B.pathSpacing,oe=ee===void 0?1:ee,ve=B.pathOffset,xe=ve===void 0?0:ve,Te=r.__rest(B,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]);ze(O,Te,w,S),O.attrs=O.style,O.style={};var Me=O.attrs,He=O.style,Ze=O.dimensions;Me.transform&&(Ze&&(He.transform=Me.transform),delete Me.transform),Ze&&(N!==void 0||F!==void 0||He.transform)&&(He.transformOrigin=qe(Ze,N!==void 0?N:.5,F!==void 0?F:.5)),P!==void 0&&(Me.x=P),R!==void 0&&(Me.y=R),K!==void 0&&at(Me,K,oe,xe,!1)}var ur=function(){return r.__assign(r.__assign({},ct()),{attrs:{}})};function er(O,B){var w=n.useMemo(function(){var P=ur();return Ft(P,B,{enableHardwareAcceleration:!1},O.transformTemplate),r.__assign(r.__assign({},P.attrs),{style:r.__assign({},P.style)})},[B]);if(O.style){var S={};At(S,O.style,O),w.style=r.__assign(r.__assign({},S),w.style)}return w}function ue(O){O===void 0&&(O=!1);var B=function(w,S,P,R,N,F){var K=N.latestValues,ee=J(w)?er:Lr,oe=ee(S,K,F),ve=Ka(S,typeof w=="string",O),xe=r.__assign(r.__assign(r.__assign({},ve),oe),{ref:R});return P&&(xe["data-projection-id"]=P),n.createElement(w,xe)};return B}var Ie=/([a-z])([A-Z])/g,Ne="$1-$2",Ue=function(O){return O.replace(Ie,Ne).toLowerCase()};function Ge(O,B,w,S){var P=B.style,R=B.vars;Object.assign(O.style,P,S&&S.getProjectionStyles(w));for(var N in R)O.style.setProperty(N,R[N])}var yt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function It(O,B,w,S){Ge(O,B,void 0,S);for(var P in B.attrs)O.setAttribute(yt.has(P)?P:Ue(P),B.attrs[P])}function Ut(O){var B=O.style,w={};for(var S in B)(we(B[S])||gt(S,O))&&(w[S]=B[S]);return w}function Ot(O){var B=Ut(O);for(var w in O)if(we(O[w])){var S=w==="x"||w==="y"?"attr"+w.toUpperCase():w;B[S]=O[w]}return B}function xt(O){return typeof O=="object"&&typeof O.start=="function"}var qt=function(O){return Array.isArray(O)},ar=function(O){return!!(O&&typeof O=="object"&&O.mix&&O.toValue)},zr=function(O){return qt(O)?O[O.length-1]||0:O};function an(O){var B=we(O)?O.get():O;return ar(B)?B.toValue():B}function Ur(O,B,w,S){var P=O.scrapeMotionValuesFromProps,R=O.createRenderState,N=O.onMount,F={latestValues:Bt(B,w,S,P),renderState:R()};return N&&(F.mount=function(K){return N(B,K,F)}),F}var tn=function(O){return function(B,w){var S=n.useContext(T),P=n.useContext(E);return w?Ur(O,B,S,P):re(function(){return Ur(O,B,S,P)})}};function Bt(O,B,w,S){var P={},R=(w==null?void 0:w.initial)===!1,N=S(O);for(var F in N)P[F]=an(N[F]);var K=O.initial,ee=O.animate,oe=ce(O),ve=ae(O);B&&ve&&!oe&&O.inherit!==!1&&(K??(K=B.initial),ee??(ee=B.animate));var xe=R||K===!1,Te=xe?ee:K;if(Te&&typeof Te!="boolean"&&!xt(Te)){var Me=Array.isArray(Te)?Te:[Te];Me.forEach(function(He){var Ze=ne(O,He);if(Ze){var bt=Ze.transitionEnd;Ze.transition;var Nt=r.__rest(Ze,["transitionEnd","transition"]);for(var Oe in Nt){var Ee=Nt[Oe];if(Array.isArray(Ee)){var ke=xe?Ee.length-1:0;Ee=Ee[ke]}Ee!==null&&(P[Oe]=Ee)}for(var Oe in bt)P[Oe]=bt[Oe]}})}return P}var Tt={useVisualState:tn({scrapeMotionValuesFromProps:Ot,createRenderState:ur,onMount:function(O,B,w){var S=w.renderState,P=w.latestValues;try{S.dimensions=typeof B.getBBox=="function"?B.getBBox():B.getBoundingClientRect()}catch{S.dimensions={x:0,y:0,width:0,height:0}}Ft(S,P,{enableHardwareAcceleration:!1},O.transformTemplate),It(B,S)}})},Ii={useVisualState:tn({scrapeMotionValuesFromProps:Ut,createRenderState:ct})};function Xt(O,B,w,S,P){var R=B.forwardMotionProps,N=R===void 0?!1:R,F=J(O)?Tt:Ii;return r.__assign(r.__assign({},F),{preloadedFeatures:w,useRender:ue(N),createVisualElement:S,projectionNodeConstructor:P,Component:O})}e.AnimationType=void 0,function(O){O.Animate="animate",O.Hover="whileHover",O.Tap="whileTap",O.Drag="whileDrag",O.Focus="whileFocus",O.InView="whileInView",O.Exit="exit"}(e.AnimationType||(e.AnimationType={}));function mr(O,B,w,S){return S===void 0&&(S={passive:!0}),O.addEventListener(B,w,S),function(){return O.removeEventListener(B,w)}}function Vr(O,B,w,S){n.useEffect(function(){var P=O.current;if(w&&P)return mr(P,B,w,S)},[O,B,w,S])}function kr(O){var B=O.whileFocus,w=O.visualElement,S=function(){var R;(R=w.animationState)===null||R===void 0||R.setActive(e.AnimationType.Focus,!0)},P=function(){var R;(R=w.animationState)===null||R===void 0||R.setActive(e.AnimationType.Focus,!1)};Vr(w,"focus",B?S:void 0),Vr(w,"blur",B?P:void 0)}function cn(O){return typeof PointerEvent<"u"&&O instanceof PointerEvent?O.pointerType==="mouse":O instanceof MouseEvent}function sn(O){var B=!!O.touches;return B}function Xi(O){return function(B){var w=B instanceof MouseEvent,S=!w||w&&B.button===0;S&&O(B)}}var hl={pageX:0,pageY:0};function ii(O,B){B===void 0&&(B="page");var w=O.touches[0]||O.changedTouches[0],S=w||hl;return{x:S[B+"X"],y:S[B+"Y"]}}function Gh(O,B){return B===void 0&&(B="page"),{x:O[B+"X"],y:O[B+"Y"]}}function Oo(O,B){return B===void 0&&(B="page"),{point:sn(O)?ii(O,B):Gh(O,B)}}var Wh=function(O,B){B===void 0&&(B=!1);var w=function(S){return O(S,Oo(S))};return B?Xi(w):w},GI=function(){return D&&window.onpointerdown===null},WI=function(){return D&&window.ontouchstart===null},q0=function(){return D&&window.onmousedown===null},X0={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},om={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function am(O){return GI()?O:WI()?om[O]:q0()?X0[O]:O}function pd(O,B,w,S){return mr(O,am(B),Wh(w,B==="pointerdown"),S)}function Y0(O,B,w,S){return Vr(O,am(B),w&&Wh(w,B==="pointerdown"),S)}function K0(O){var B=null;return function(){var w=function(){B=null};return B===null?(B=O,w):!1}}var J0=K0("dragHorizontal"),qh=K0("dragVertical");function iC(O){var B=!1;if(O==="y")B=qh();else if(O==="x")B=J0();else{var w=J0(),S=qh();w&&S?B=function(){w(),S()}:(w&&w(),S&&S())}return B}function sm(){var O=iC(!0);return O?(O(),!1):!0}function Gr(O,B,w){return function(S,P){var R;!cn(S)||sm()||((R=O.animationState)===null||R===void 0||R.setActive(e.AnimationType.Hover,B),w==null||w(S,P))}}function oC(O){var B=O.onHoverStart,w=O.onHoverEnd,S=O.whileHover,P=O.visualElement;Y0(P,"pointerenter",B||S?Gr(P,!0,B):void 0,{passive:!B}),Y0(P,"pointerleave",w||S?Gr(P,!1,w):void 0,{passive:!w})}var Q0=function(O,B){return B?O===B?!0:Q0(O,B.parentElement):!1};function lm(O){return n.useEffect(function(){return function(){return O()}},[])}function qI(O){var B=O.onTap,w=O.onTapStart,S=O.onTapCancel,P=O.whileTap,R=O.visualElement,N=B||w||S||P,F=n.useRef(!1),K=n.useRef(null),ee={passive:!(w||B||S||Me)};function oe(){var He;(He=K.current)===null||He===void 0||He.call(K),K.current=null}function ve(){var He;return oe(),F.current=!1,(He=R.animationState)===null||He===void 0||He.setActive(e.AnimationType.Tap,!1),!sm()}function xe(He,Ze){ve()&&(Q0(R.getInstance(),He.target)?B==null||B(He,Ze):S==null||S(He,Ze))}function Te(He,Ze){ve()&&(S==null||S(He,Ze))}function Me(He,Ze){var bt;oe(),!F.current&&(F.current=!0,K.current=a.pipe(pd(window,"pointerup",xe,ee),pd(window,"pointercancel",Te,ee)),(bt=R.animationState)===null||bt===void 0||bt.setActive(e.AnimationType.Tap,!0),w==null||w(He,Ze))}Y0(R,"pointerdown",N?Me:void 0,ee),lm(oe)}var aC=new Set;function oi(O,B,w){O||aC.has(B)||(console.warn(B),w&&console.warn(w),aC.add(B))}var um=new WeakMap,k1=new WeakMap,F1=function(O){var B;(B=um.get(O.target))===null||B===void 0||B(O)},XI=function(O){O.forEach(F1)};function Z0(O){var B=O.root,w=r.__rest(O,["root"]),S=B||document;k1.has(S)||k1.set(S,{});var P=k1.get(S),R=JSON.stringify(w);return P[R]||(P[R]=new IntersectionObserver(XI,r.__assign({root:B},w))),P[R]}function fl(O,B,w){var S=Z0(B);return um.set(O,w),S.observe(O),function(){um.delete(O),S.unobserve(O)}}function YI(O){var B=O.visualElement,w=O.whileInView,S=O.onViewportEnter,P=O.onViewportLeave,R=O.viewport,N=R===void 0?{}:R,F=n.useRef({hasEnteredView:!1,isInView:!1}),K=!!(w||S||P);N.once&&F.current.hasEnteredView&&(K=!1);var ee=typeof IntersectionObserver>"u"?tu:pl;ee(K,F.current,B,N)}var KI={some:0,all:1};function pl(O,B,w,S){var P=S.root,R=S.margin,N=S.amount,F=N===void 0?"some":N,K=S.once;n.useEffect(function(){if(O){var ee={root:P==null?void 0:P.current,rootMargin:R,threshold:typeof F=="number"?F:KI[F]},oe=function(ve){var xe,Te=ve.isIntersecting;if(B.isInView!==Te&&(B.isInView=Te,!(K&&!Te&&B.hasEnteredView))){Te&&(B.hasEnteredView=!0),(xe=w.animationState)===null||xe===void 0||xe.setActive(e.AnimationType.InView,Te);var Me=w.getProps(),He=Te?Me.onViewportEnter:Me.onViewportLeave;He==null||He(ve)}};return fl(w.getInstance(),ee,oe)}},[O,P,R,F])}function tu(O,B,w,S){var P=S.fallback,R=P===void 0?!0:P;n.useEffect(function(){!O||!R||(y!=="production"&&oi(!1,"IntersectionObserver not available on this device. whileInView animations will trigger on mount."),requestAnimationFrame(function(){var N;B.hasEnteredView=!0;var F=w.getProps().onViewportEnter;F==null||F(null),(N=w.animationState)===null||N===void 0||N.setActive(e.AnimationType.InView,!0)}))},[O])}var Os=function(O){return function(B){return O(B),null}},$0={inView:Os(YI),tap:Os(qI),focus:Os(kr),hover:Os(oC)},sC=0,JI=function(){return sC++},Rs=function(){return re(JI)};function z1(){var O=n.useContext(E);if(O===null)return[!0,null];var B=O.isPresent,w=O.onExitComplete,S=O.register,P=Rs();n.useEffect(function(){return S(P)},[]);var R=function(){return w==null?void 0:w(P)};return!B&&w?[!1,R]:[!0]}function ev(){return QI(n.useContext(E))}function QI(O){return O===null?!0:O.isPresent}function Ja(O,B){if(!Array.isArray(B))return!1;var w=B.length;if(w!==O.length)return!1;for(var S=0;S<w;S++)if(B[S]!==O[S])return!1;return!0}var md=function(O){return O*1e3},cm={linear:a.linear,easeIn:a.easeIn,easeInOut:a.easeInOut,easeOut:a.easeOut,circIn:a.circIn,circInOut:a.circInOut,circOut:a.circOut,backIn:a.backIn,backInOut:a.backInOut,backOut:a.backOut,anticipate:a.anticipate,bounceIn:a.bounceIn,bounceInOut:a.bounceInOut,bounceOut:a.bounceOut},gd=function(O){if(Array.isArray(O)){i.invariant(O.length===4,"Cubic bezier arrays must contain four numerical values.");var B=r.__read(O,4),w=B[0],S=B[1],P=B[2],R=B[3];return a.cubicBezier(w,S,P,R)}else if(typeof O=="string")return i.invariant(cm[O]!==void 0,"Invalid easing type '".concat(O,"'")),cm[O];return O},U1=function(O){return Array.isArray(O)&&typeof O[0]!="number"},tv=function(O,B){return O==="zIndex"?!1:!!(typeof B=="number"||Array.isArray(B)||typeof B=="string"&&o.complex.test(B)&&!B.startsWith("url("))},tc=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},Xh=function(O){return{type:"spring",stiffness:550,damping:O===0?2*Math.sqrt(550):30,restSpeed:10}},dm=function(){return{type:"keyframes",ease:"linear",duration:.3}},Yh=function(O){return{type:"keyframes",duration:.8,values:O}},fa={x:tc,y:tc,z:tc,rotate:tc,rotateX:tc,rotateY:tc,rotateZ:tc,scaleX:Xh,scaleY:Xh,scale:Xh,opacity:dm,backgroundColor:dm,color:dm,default:Xh},ml=function(O,B){var w;return qt(B)?w=Yh:w=fa[O]||fa.default,r.__assign({to:B},w(B))},rc=r.__assign(r.__assign({},$e),{color:o.color,backgroundColor:o.color,outlineColor:o.color,fill:o.color,stroke:o.color,borderColor:o.color,borderTopColor:o.color,borderRightColor:o.color,borderBottomColor:o.color,borderLeftColor:o.color,filter:o.filter,WebkitFilter:o.filter}),hm=function(O){return rc[O]};function rv(O,B){var w,S=hm(O);return S!==o.filter&&(S=o.complex),(w=S.getAnimatableNone)===null||w===void 0?void 0:w.call(S,B)}var Is={current:!1};function nc(O){O.when,O.delay,O.delayChildren,O.staggerChildren,O.staggerDirection,O.repeat,O.repeatType,O.repeatDelay,O.from;var B=r.__rest(O,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(B).length}var fm=!1;function lC(O){var B=O.ease,w=O.times,S=O.yoyo,P=O.flip,R=O.loop,N=r.__rest(O,["ease","times","yoyo","flip","loop"]),F=r.__assign({},N);return w&&(F.offset=w),N.duration&&(F.duration=md(N.duration)),N.repeatDelay&&(F.repeatDelay=md(N.repeatDelay)),B&&(F.ease=U1(B)?B.map(gd):gd(B)),N.type==="tween"&&(F.type="keyframes"),(S||R||P)&&(i.warning(!fm,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),fm=!0,S?F.repeatType="reverse":R?F.repeatType="loop":P&&(F.repeatType="mirror"),F.repeat=R||S||P||N.repeat),N.type!=="spring"&&(F.type="keyframes"),F}function nv(O,B){var w,S,P=iv(O,B)||{};return(S=(w=P.delay)!==null&&w!==void 0?w:O.delay)!==null&&S!==void 0?S:0}function uC(O){return Array.isArray(O.to)&&O.to[0]===null&&(O.to=r.__spreadArray([],r.__read(O.to),!1),O.to[0]=O.from),O}function cC(O,B,w){var S;return Array.isArray(B.to)&&((S=O.duration)!==null&&S!==void 0||(O.duration=.8)),uC(B),nc(O)||(O=r.__assign(r.__assign({},O),ml(w,B.to))),r.__assign(r.__assign({},B),lC(O))}function V1(O,B,w,S,P){var R,N=iv(S,O),F=(R=N.from)!==null&&R!==void 0?R:B.get(),K=tv(O,w);F==="none"&&K&&typeof w=="string"?F=rv(O,w):pm(F)&&typeof w=="string"?F=j1(w):!Array.isArray(w)&&pm(w)&&typeof F=="string"&&(w=j1(F));var ee=tv(O,F);i.warning(ee===K,"You are trying to animate ".concat(O,' from "').concat(F,'" to "').concat(w,'". ').concat(F," is not an animatable value - to enable this animation set ").concat(F," to a value animatable to ").concat(w," via the `style` property."));function oe(){var xe={from:F,to:w,velocity:B.getVelocity(),onComplete:P,onUpdate:function(Te){return B.set(Te)}};return N.type==="inertia"||N.type==="decay"?a.inertia(r.__assign(r.__assign({},xe),N)):a.animate(r.__assign(r.__assign({},cC(N,xe,O)),{onUpdate:function(Te){var Me;xe.onUpdate(Te),(Me=N.onUpdate)===null||Me===void 0||Me.call(N,Te)},onComplete:function(){var Te;xe.onComplete(),(Te=N.onComplete)===null||Te===void 0||Te.call(N)}}))}function ve(){var xe,Te,Me=zr(w);return B.set(Me),P(),(xe=N==null?void 0:N.onUpdate)===null||xe===void 0||xe.call(N,Me),(Te=N==null?void 0:N.onComplete)===null||Te===void 0||Te.call(N),{stop:function(){}}}return!ee||!K||N.type===!1?ve:oe}function pm(O){return O===0||typeof O=="string"&&parseFloat(O)===0&&O.indexOf(" ")===-1}function j1(O){return typeof O=="number"?0:rv("",O)}function iv(O,B){return O[B]||O.default||O}function ov(O,B,w,S){return S===void 0&&(S={}),Is.current&&(S={type:!1}),B.start(function(P){var R,N,F=V1(O,B,w,S,P),K=nv(S,O),ee=function(){return N=F()};return K?R=window.setTimeout(ee,md(K)):ee(),function(){clearTimeout(R),N==null||N.stop()}})}var H1=function(O){return/^\-?\d*\.?\d+$/.test(O)},Kh=function(O){return/^0[^.\s]+$/.test(O)};function ic(O,B){O.indexOf(B)===-1&&O.push(B)}function Jh(O,B){var w=O.indexOf(B);w>-1&&O.splice(w,1)}function av(O,B,w){var S=r.__read(O),P=S.slice(0),R=B<0?P.length+B:B;if(R>=0&&R<P.length){var N=w<0?P.length+w:w,F=r.__read(P.splice(B,1),1),K=F[0];P.splice(N,0,K)}return P}var po=function(){function O(){this.subscriptions=[]}return O.prototype.add=function(B){var w=this;return ic(this.subscriptions,B),function(){return Jh(w.subscriptions,B)}},O.prototype.notify=function(B,w,S){var P=this.subscriptions.length;if(P)if(P===1)this.subscriptions[0](B,w,S);else for(var R=0;R<P;R++){var N=this.subscriptions[R];N&&N(B,w,S)}},O.prototype.getSize=function(){return this.subscriptions.length},O.prototype.clear=function(){this.subscriptions.length=0},O}(),Qa=function(O){return!isNaN(parseFloat(O))},oc=function(){function O(B){var w=this;this.version="6.5.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new po,this.velocityUpdateSubscribers=new po,this.renderSubscribers=new po,this.canTrackVelocity=!1,this.updateAndNotify=function(S,P){P===void 0&&(P=!0),w.prev=w.current,w.current=S;var R=s.getFrameData(),N=R.delta,F=R.timestamp;w.lastUpdated!==F&&(w.timeDelta=N,w.lastUpdated=F,f.default.postRender(w.scheduleVelocityCheck)),w.prev!==w.current&&w.updateSubscribers.notify(w.current),w.velocityUpdateSubscribers.getSize()&&w.velocityUpdateSubscribers.notify(w.getVelocity()),P&&w.renderSubscribers.notify(w.current)},this.scheduleVelocityCheck=function(){return f.default.postRender(w.velocityCheck)},this.velocityCheck=function(S){var P=S.timestamp;P!==w.lastUpdated&&(w.prev=w.current,w.velocityUpdateSubscribers.notify(w.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=B,this.canTrackVelocity=Qa(this.current)}return O.prototype.onChange=function(B){return this.updateSubscribers.add(B)},O.prototype.clearListeners=function(){this.updateSubscribers.clear()},O.prototype.onRenderRequest=function(B){return B(this.get()),this.renderSubscribers.add(B)},O.prototype.attach=function(B){this.passiveEffect=B},O.prototype.set=function(B,w){w===void 0&&(w=!0),!w||!this.passiveEffect?this.updateAndNotify(B,w):this.passiveEffect(B,this.updateAndNotify)},O.prototype.get=function(){return this.current},O.prototype.getPrevious=function(){return this.prev},O.prototype.getVelocity=function(){return this.canTrackVelocity?a.velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},O.prototype.start=function(B){var w=this;return this.stop(),new Promise(function(S){w.hasAnimated=!0,w.stopAnimation=B(S)}).then(function(){return w.clearAnimation()})},O.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},O.prototype.isAnimating=function(){return!!this.stopAnimation},O.prototype.clearAnimation=function(){this.stopAnimation=null},O.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},O}();function ai(O){return new oc(O)}var gl=function(O){return function(B){return B.test(O)}},vd={test:function(O){return O==="auto"},parse:function(O){return O}},G1=[o.number,o.px,o.percent,o.degrees,o.vw,o.vh,vd],yd=function(O){return G1.find(gl(O))},W1=r.__spreadArray(r.__spreadArray([],r.__read(G1),!1),[o.color,o.complex],!1),pa=function(O){return W1.find(gl(O))};function ma(O,B,w){O.hasValue(B)?O.getValue(B).set(w):O.addValue(B,ai(w))}function wn(O,B){var w=Z(O,B),S=w?O.makeTargetAnimatable(w,!1):{},P=S.transitionEnd,R=P===void 0?{}:P;S.transition;var N=r.__rest(S,["transitionEnd","transition"]);N=r.__assign(r.__assign({},N),R);for(var F in N){var K=zr(N[F]);ma(O,F,K)}}function bd(O,B){var w=r.__spreadArray([],r.__read(B),!1).reverse();w.forEach(function(S){var P,R=O.getVariant(S);R&&wn(O,R),(P=O.variantChildren)===null||P===void 0||P.forEach(function(N){bd(N,B)})})}function Ls(O,B){if(Array.isArray(B))return bd(O,B);if(typeof B=="string")return bd(O,[B]);wn(O,B)}function sv(O,B,w){var S,P,R,N,F=Object.keys(B).filter(function(Te){return!O.hasValue(Te)}),K=F.length;if(K)for(var ee=0;ee<K;ee++){var oe=F[ee],ve=B[oe],xe=null;Array.isArray(ve)&&(xe=ve[0]),xe===null&&(xe=(P=(S=w[oe])!==null&&S!==void 0?S:O.readValue(oe))!==null&&P!==void 0?P:B[oe]),xe!=null&&(typeof xe=="string"&&(H1(xe)||Kh(xe))?xe=parseFloat(xe):!pa(xe)&&o.complex.test(ve)&&(xe=rv(oe,ve)),O.addValue(oe,ai(xe)),(R=(N=w)[oe])!==null&&R!==void 0||(N[oe]=xe),O.setBaseTarget(oe,xe))}}function dC(O,B){if(B){var w=B[O]||B.default||B;return w.from}}function lv(O,B,w){var S,P,R={};for(var N in O)R[N]=(S=dC(N,B))!==null&&S!==void 0?S:(P=w.getValue(N))===null||P===void 0?void 0:P.get();return R}function Qh(O,B,w){w===void 0&&(w={}),O.notifyAnimationStart(B);var S;if(Array.isArray(B)){var P=B.map(function(N){return uv(O,N,w)});S=Promise.all(P)}else if(typeof B=="string")S=uv(O,B,w);else{var R=typeof B=="function"?Z(O,B,w.custom):B;S=Zh(O,R,w)}return S.then(function(){return O.notifyAnimationComplete(B)})}function uv(O,B,w){var S;w===void 0&&(w={});var P=Z(O,B,w.custom),R=(P||{}).transition,N=R===void 0?O.getDefaultTransition()||{}:R;w.transitionOverride&&(N=w.transitionOverride);var F=P?function(){return Zh(O,P,w)}:function(){return Promise.resolve()},K=!((S=O.variantChildren)===null||S===void 0)&&S.size?function(Te){Te===void 0&&(Te=0);var Me=N.delayChildren,He=Me===void 0?0:Me,Ze=N.staggerChildren,bt=N.staggerDirection;return $h(O,B,He+Te,Ze,bt,w)}:function(){return Promise.resolve()},ee=N.when;if(ee){var oe=r.__read(ee==="beforeChildren"?[F,K]:[K,F],2),ve=oe[0],xe=oe[1];return ve().then(xe)}else return Promise.all([F(),K(w.delay)])}function Zh(O,B,w){var S,P=w===void 0?{}:w,R=P.delay,N=R===void 0?0:R,F=P.transitionOverride,K=P.type,ee=O.makeTargetAnimatable(B),oe=ee.transition,ve=oe===void 0?O.getDefaultTransition():oe,xe=ee.transitionEnd,Te=r.__rest(ee,["transition","transitionEnd"]);F&&(ve=F);var Me=[],He=K&&((S=O.animationState)===null||S===void 0?void 0:S.getState()[K]);for(var Ze in Te){var bt=O.getValue(Ze),Nt=Te[Ze];if(!(!bt||Nt===void 0||He&&cv(He,Ze))){var Oe=r.__assign({delay:N},ve);O.shouldReduceMotion&&ut(Ze)&&(Oe=r.__assign(r.__assign({},Oe),{type:!1,delay:0}));var Ee=ov(Ze,bt,Nt,Oe);Me.push(Ee)}}return Promise.all(Me).then(function(){xe&&wn(O,xe)})}function $h(O,B,w,S,P,R){w===void 0&&(w=0),S===void 0&&(S=0),P===void 0&&(P=1);var N=[],F=(O.variantChildren.size-1)*S,K=P===1?function(ee){return ee===void 0&&(ee=0),ee*S}:function(ee){return ee===void 0&&(ee=0),F-ee*S};return Array.from(O.variantChildren).sort(mm).forEach(function(ee,oe){N.push(uv(ee,B,r.__assign(r.__assign({},R),{delay:w+K(oe)})).then(function(){return ee.notifyAnimationComplete(B)}))}),Promise.all(N)}function q1(O){O.forEachValue(function(B){return B.stop()})}function mm(O,B){return O.sortNodePosition(B)}function cv(O,B){var w=O.protectedKeys,S=O.needsAnimating,P=w.hasOwnProperty(B)&&S[B]!==!0;return S[B]=!1,P}var dv=[e.AnimationType.Animate,e.AnimationType.InView,e.AnimationType.Focus,e.AnimationType.Hover,e.AnimationType.Tap,e.AnimationType.Drag,e.AnimationType.Exit],hC=r.__spreadArray([],r.__read(dv),!1).reverse(),ef=dv.length;function fC(O){return function(B){return Promise.all(B.map(function(w){var S=w.animation,P=w.options;return Qh(O,S,P)}))}}function gm(O){var B=fC(O),w=tf(),S={},P=!0,R=function(oe,ve){var xe=Z(O,ve);if(xe){xe.transition;var Te=xe.transitionEnd,Me=r.__rest(xe,["transition","transitionEnd"]);oe=r.__assign(r.__assign(r.__assign({},oe),Me),Te)}return oe};function N(oe){return S[oe]!==void 0}function F(oe){B=oe(O)}function K(oe,ve){for(var xe,Te=O.getProps(),Me=O.getVariantContext(!0)||{},He=[],Ze=new Set,bt={},Nt=1/0,Oe=function(wt){var Mt=hC[wt],Et=w[Mt],Zt=(xe=Te[Mt])!==null&&xe!==void 0?xe:Me[Mt],rn=Y(Zt),br=Mt===ve?Et.isActive:null;br===!1&&(Nt=wt);var si=Zt===Me[Mt]&&Zt!==Te[Mt]&&rn;if(si&&P&&O.manuallyAnimateOnMount&&(si=!1),Et.protectedKeys=r.__assign({},bt),!Et.isActive&&br===null||!Zt&&!Et.prevProp||xt(Zt)||typeof Zt=="boolean")return"continue";var mc=Za(Et.prevProp,Zt),pf=mc||Mt===ve&&Et.isActive&&!si&&rn||wt>Nt&&rn,mf=Array.isArray(Zt)?Zt:[Zt],bl=mf.reduce(R,{});br===!1&&(bl={});var kw=Et.prevResolvedValues,Vv=kw===void 0?{}:kw,sT=r.__assign(r.__assign({},Vv),bl),jv=function(vr){pf=!0,Ze.delete(vr),Et.needsAnimating[vr]=!0};for(var is in sT){var ln=bl[is],Vt=Vv[is];bt.hasOwnProperty(is)||(ln!==Vt?qt(ln)&&qt(Vt)?!Ja(ln,Vt)||mc?jv(is):Et.protectedKeys[is]=!0:ln!==void 0?jv(is):Ze.add(is):ln!==void 0&&Ze.has(is)?jv(is):Et.protectedKeys[is]=!0)}Et.prevProp=Zt,Et.prevResolvedValues=bl,Et.isActive&&(bt=r.__assign(r.__assign({},bt),bl)),P&&O.blockInitialAnimation&&(pf=!1),pf&&!si&&He.push.apply(He,r.__spreadArray([],r.__read(mf.map(function(vr){return{animation:vr,options:r.__assign({type:Mt},oe)}})),!1))},Ee=0;Ee<ef;Ee++)Oe(Ee);if(S=r.__assign({},bt),Ze.size){var ke={};Ze.forEach(function(wt){var Mt=O.getBaseTarget(wt);Mt!==void 0&&(ke[wt]=Mt)}),He.push({animation:ke})}var mt=!!He.length;return P&&Te.initial===!1&&!O.manuallyAnimateOnMount&&(mt=!1),P=!1,mt?B(He):Promise.resolve()}function ee(oe,ve,xe){var Te;if(w[oe].isActive===ve)return Promise.resolve();(Te=O.variantChildren)===null||Te===void 0||Te.forEach(function(Ze){var bt;return(bt=Ze.animationState)===null||bt===void 0?void 0:bt.setActive(oe,ve)}),w[oe].isActive=ve;var Me=K(xe,oe);for(var He in w)w[He].protectedKeys={};return Me}return{isAnimated:N,animateChanges:K,setActive:ee,setAnimateFunction:F,getState:function(){return w}}}function Za(O,B){return typeof B=="string"?B!==O:H(B)?!Ja(B,O):!1}function Bs(O){return O===void 0&&(O=!1),{isActive:O,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tf(){var O;return O={},O[e.AnimationType.Animate]=Bs(!0),O[e.AnimationType.InView]=Bs(),O[e.AnimationType.Hover]=Bs(),O[e.AnimationType.Tap]=Bs(),O[e.AnimationType.Drag]=Bs(),O[e.AnimationType.Focus]=Bs(),O[e.AnimationType.Exit]=Bs(),O}var $a={animation:Os(function(O){var B=O.visualElement,w=O.animate;B.animationState||(B.animationState=gm(B)),xt(w)&&n.useEffect(function(){return w.subscribe(B)},[w])}),exit:Os(function(O){var B=O.custom,w=O.visualElement,S=r.__read(z1(),2),P=S[0],R=S[1],N=n.useContext(E);n.useEffect(function(){var F,K;w.isPresent=P;var ee=(F=w.animationState)===null||F===void 0?void 0:F.setActive(e.AnimationType.Exit,!P,{custom:(K=N==null?void 0:N.custom)!==null&&K!==void 0?K:B});!P&&(ee==null||ee.then(R))},[P])})},hv=function(){function O(B,w,S){var P=this,R=S===void 0?{}:S,N=R.transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(P.lastMoveEvent&&P.lastMoveEventInfo){var xe=vm(P.lastMoveEventInfo,P.history),Te=P.startEvent!==null,Me=a.distance(xe.offset,{x:0,y:0})>=3;if(!(!Te&&!Me)){var He=xe.point,Ze=s.getFrameData().timestamp;P.history.push(r.__assign(r.__assign({},He),{timestamp:Ze}));var bt=P.handlers,Nt=bt.onStart,Oe=bt.onMove;Te||(Nt&&Nt(P.lastMoveEvent,xe),P.startEvent=P.lastMoveEvent),Oe&&Oe(P.lastMoveEvent,xe)}}},this.handlePointerMove=function(xe,Te){if(P.lastMoveEvent=xe,P.lastMoveEventInfo=ac(Te,P.transformPagePoint),cn(xe)&&xe.buttons===0){P.handlePointerUp(xe,Te);return}f.default.update(P.updatePoint,!0)},this.handlePointerUp=function(xe,Te){P.end();var Me=P.handlers,He=Me.onEnd,Ze=Me.onSessionEnd,bt=vm(ac(Te,P.transformPagePoint),P.history);P.startEvent&&He&&He(xe,bt),Ze&&Ze(xe,bt)},!(sn(B)&&B.touches.length>1)){this.handlers=w,this.transformPagePoint=N;var F=Oo(B),K=ac(F,this.transformPagePoint),ee=K.point,oe=s.getFrameData().timestamp;this.history=[r.__assign(r.__assign({},ee),{timestamp:oe})];var ve=w.onSessionStart;ve&&ve(B,vm(K,this.history)),this.removeListeners=a.pipe(pd(window,"pointermove",this.handlePointerMove),pd(window,"pointerup",this.handlePointerUp),pd(window,"pointercancel",this.handlePointerUp))}}return O.prototype.updateHandlers=function(B){this.handlers=B},O.prototype.end=function(){this.removeListeners&&this.removeListeners(),s.cancelSync.update(this.updatePoint)},O}();function ac(O,B){return B?{point:B(O.point)}:O}function X1(O,B){return{x:O.x-B.x,y:O.y-B.y}}function vm(O,B){var w=O.point;return{point:w,delta:X1(w,ym(B)),offset:X1(w,On(B)),velocity:Y1(B,.1)}}function On(O){return O[0]}function ym(O){return O[O.length-1]}function Y1(O,B){if(O.length<2)return{x:0,y:0};for(var w=O.length-1,S=null,P=ym(O);w>=0&&(S=O[w],!(P.timestamp-S.timestamp>md(B)));)w--;if(!S)return{x:0,y:0};var R=(P.timestamp-S.timestamp)/1e3;if(R===0)return{x:0,y:0};var N={x:(P.x-S.x)/R,y:(P.y-S.y)/R};return N.x===1/0&&(N.x=0),N.y===1/0&&(N.y=0),N}function es(O){return O.max-O.min}function bm(O,B,w){return B===void 0&&(B=0),w===void 0&&(w=.01),a.distance(O,B)<w}function ga(O,B,w,S){S===void 0&&(S=.5),O.origin=S,O.originPoint=a.mix(B.min,B.max,O.origin),O.scale=es(w)/es(B),(bm(O.scale,1,1e-4)||isNaN(O.scale))&&(O.scale=1),O.translate=a.mix(w.min,w.max,O.origin)-O.originPoint,(bm(O.translate)||isNaN(O.translate))&&(O.translate=0)}function vl(O,B,w,S){ga(O.x,B.x,w.x,S==null?void 0:S.originX),ga(O.y,B.y,w.y,S==null?void 0:S.originY)}function Rn(O,B,w){O.min=w.min+B.min,O.max=O.min+es(B)}function mo(O,B,w){Rn(O.x,B.x,w.x),Rn(O.y,B.y,w.y)}function xi(O,B,w){O.min=B.min-w.min,O.max=O.min+es(B)}function sc(O,B,w){xi(O.x,B.x,w.x),xi(O.y,B.y,w.y)}function xm(O,B,w){var S=B.min,P=B.max;return S!==void 0&&O<S?O=w?a.mix(S,O,w.min):Math.max(O,S):P!==void 0&&O>P&&(O=w?a.mix(P,O,w.max):Math.min(O,P)),O}function rf(O,B,w){return{min:B!==void 0?O.min+B:void 0,max:w!==void 0?O.max+w-(O.max-O.min):void 0}}function ZI(O,B){var w=B.top,S=B.left,P=B.bottom,R=B.right;return{x:rf(O.x,S,R),y:rf(O.y,w,P)}}function Yi(O,B){var w,S=B.min-O.min,P=B.max-O.max;return B.max-B.min<O.max-O.min&&(w=r.__read([P,S],2),S=w[0],P=w[1]),{min:S,max:P}}function K1(O,B){return{x:Yi(O.x,B.x),y:Yi(O.y,B.y)}}function J1(O,B){var w=.5,S=es(O),P=es(B);return P>S?w=a.progress(B.min,B.max-S,O.min):S>P&&(w=a.progress(O.min,O.max-P,B.min)),a.clamp(0,1,w)}function Q1(O,B){var w={};return B.min!==void 0&&(w.min=B.min-O.min),B.max!==void 0&&(w.max=B.max-O.min),w}var Ns=.35;function yl(O){return O===void 0&&(O=Ns),O===!1?O=0:O===!0&&(O=Ns),{x:lc(O,"left","right"),y:lc(O,"top","bottom")}}function lc(O,B,w){return{min:wm(O,B),max:wm(O,w)}}function wm(O,B){var w;return typeof O=="number"?O:(w=O[B])!==null&&w!==void 0?w:0}var _m=function(){return{translate:0,scale:1,origin:0,originPoint:0}},nf=function(){return{x:_m(),y:_m()}},Z1=function(){return{min:0,max:0}},wi=function(){return{x:Z1(),y:Z1()}};function ks(O){return[O("x"),O("y")]}function $1(O){var B=O.top,w=O.left,S=O.right,P=O.bottom;return{x:{min:w,max:S},y:{min:B,max:P}}}function pC(O){var B=O.x,w=O.y;return{top:w.min,right:B.max,bottom:w.max,left:B.min}}function ew(O,B){if(!B)return O;var w=B({x:O.left,y:O.top}),S=B({x:O.right,y:O.bottom});return{top:w.y,left:w.x,bottom:S.y,right:S.x}}function xd(O){return O===void 0||O===1}function tw(O){var B=O.scale,w=O.scaleX,S=O.scaleY;return!xd(B)||!xd(w)||!xd(S)}function Fs(O){return tw(O)||Sm(O.x)||Sm(O.y)||O.z||O.rotate||O.rotateX||O.rotateY}function Sm(O){return O&&O!=="0%"}function of(O,B,w){var S=O-w,P=B*S;return w+P}function af(O,B,w,S,P){return P!==void 0&&(O=of(O,P,S)),of(O,w,S)+B}function fv(O,B,w,S,P){B===void 0&&(B=0),w===void 0&&(w=1),O.min=af(O.min,B,w,S,P),O.max=af(O.max,B,w,S,P)}function rw(O,B){var w=B.x,S=B.y;fv(O.x,w.translate,w.scale,w.originPoint),fv(O.y,S.translate,S.scale,S.originPoint)}function mC(O,B,w,S){var P,R;S===void 0&&(S=!1);var N=w.length;if(N){B.x=B.y=1;for(var F,K,ee=0;ee<N;ee++)F=w[ee],K=F.projectionDelta,((R=(P=F.instance)===null||P===void 0?void 0:P.style)===null||R===void 0?void 0:R.display)!=="contents"&&(S&&F.options.layoutScroll&&F.scroll&&F!==F.root&&sf(O,{x:-F.scroll.x,y:-F.scroll.y}),K&&(B.x*=K.x.scale,B.y*=K.y.scale,rw(O,K)),S&&Fs(F.latestValues)&&sf(O,F.latestValues))}}function ru(O,B){O.min=O.min+B,O.max=O.max+B}function pv(O,B,w){var S=r.__read(w,3),P=S[0],R=S[1],N=S[2],F=B[N]!==void 0?B[N]:.5,K=a.mix(O.min,O.max,F);fv(O,B[P],B[R],K,B.scale)}var gC=["x","scaleX","originX"],vC=["y","scaleY","originY"];function sf(O,B){pv(O.x,B,gC),pv(O.y,B,vC)}function nw(O,B){return $1(ew(O.getBoundingClientRect(),B))}function $I(O,B,w){var S=nw(O,w),P=B.scroll;return P&&(ru(S.x,P.x),ru(S.y,P.y)),S}var e3=new WeakMap,yC=function(){function O(B){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wi(),this.visualElement=B}return O.prototype.start=function(B,w){var S=this,P=w===void 0?{}:w,R=P.snapToCursor,N=R===void 0?!1:R;if(this.visualElement.isPresent!==!1){var F=function(ve){S.stopAnimation(),N&&S.snapToCursor(Oo(ve,"page").point)},K=function(ve,xe){var Te,Me=S.getProps(),He=Me.drag,Ze=Me.dragPropagation,bt=Me.onDragStart;He&&!Ze&&(S.openGlobalLock&&S.openGlobalLock(),S.openGlobalLock=iC(He),!S.openGlobalLock)||(S.isDragging=!0,S.currentDirection=null,S.resolveConstraints(),S.visualElement.projection&&(S.visualElement.projection.isAnimationBlocked=!0,S.visualElement.projection.target=void 0),ks(function(Nt){var Oe,Ee,ke=S.getAxisMotionValue(Nt).get()||0;if(o.percent.test(ke)){var mt=(Ee=(Oe=S.visualElement.projection)===null||Oe===void 0?void 0:Oe.layout)===null||Ee===void 0?void 0:Ee.actual[Nt];if(mt){var wt=es(mt);ke=wt*(parseFloat(ke)/100)}}S.originPoint[Nt]=ke}),bt==null||bt(ve,xe),(Te=S.visualElement.animationState)===null||Te===void 0||Te.setActive(e.AnimationType.Drag,!0))},ee=function(ve,xe){var Te=S.getProps(),Me=Te.dragPropagation,He=Te.dragDirectionLock,Ze=Te.onDirectionLock,bt=Te.onDrag;if(!(!Me&&!S.openGlobalLock)){var Nt=xe.offset;if(He&&S.currentDirection===null){S.currentDirection=bC(Nt),S.currentDirection!==null&&(Ze==null||Ze(S.currentDirection));return}S.updateAxis("x",xe.point,Nt),S.updateAxis("y",xe.point,Nt),S.visualElement.syncRender(),bt==null||bt(ve,xe)}},oe=function(ve,xe){return S.stop(ve,xe)};this.panSession=new hv(B,{onSessionStart:F,onStart:K,onMove:ee,onSessionEnd:oe},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},O.prototype.stop=function(B,w){var S=this.isDragging;if(this.cancel(),!!S){var P=w.velocity;this.startAnimation(P);var R=this.getProps().onDragEnd;R==null||R(B,w)}},O.prototype.cancel=function(){var B,w;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),(B=this.panSession)===null||B===void 0||B.end(),this.panSession=void 0;var S=this.getProps().dragPropagation;!S&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),(w=this.visualElement.animationState)===null||w===void 0||w.setActive(e.AnimationType.Drag,!1)},O.prototype.updateAxis=function(B,w,S){var P=this.getProps().drag;if(!(!S||!Am(B,P,this.currentDirection))){var R=this.getAxisMotionValue(B),N=this.originPoint[B]+S[B];this.constraints&&this.constraints[B]&&(N=xm(N,this.constraints[B],this.elastic[B])),R.set(N)}},O.prototype.resolveConstraints=function(){var B=this,w=this.getProps(),S=w.dragConstraints,P=w.dragElastic,R=(this.visualElement.projection||{}).layout,N=this.constraints;S&&V(S)?this.constraints||(this.constraints=this.resolveRefConstraints()):S&&R?this.constraints=ZI(R.actual,S):this.constraints=!1,this.elastic=yl(P),N!==this.constraints&&R&&this.constraints&&!this.hasMutatedConstraints&&ks(function(F){B.getAxisMotionValue(F)&&(B.constraints[F]=Q1(R.actual[F],B.constraints[F]))})},O.prototype.resolveRefConstraints=function(){var B=this.getProps(),w=B.dragConstraints,S=B.onMeasureDragConstraints;if(!w||!V(w))return!1;var P=w.current;i.invariant(P!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var R=this.visualElement.projection;if(!R||!R.layout)return!1;var N=$I(P,R.root,this.visualElement.getTransformPagePoint()),F=K1(R.layout.actual,N);if(S){var K=S(pC(F));this.hasMutatedConstraints=!!K,K&&(F=$1(K))}return F},O.prototype.startAnimation=function(B){var w=this,S=this.getProps(),P=S.drag,R=S.dragMomentum,N=S.dragElastic,F=S.dragTransition,K=S.dragSnapToOrigin,ee=S.onDragTransitionEnd,oe=this.constraints||{},ve=ks(function(xe){var Te;if(Am(xe,P,w.currentDirection)){var Me=(Te=oe==null?void 0:oe[xe])!==null&&Te!==void 0?Te:{};K&&(Me={min:0,max:0});var He=N?200:1e6,Ze=N?40:1e7,bt=r.__assign(r.__assign({type:"inertia",velocity:R?B[xe]:0,bounceStiffness:He,bounceDamping:Ze,timeConstant:750,restDelta:1,restSpeed:10},F),Me);return w.startAxisValueAnimation(xe,bt)}});return Promise.all(ve).then(ee)},O.prototype.startAxisValueAnimation=function(B,w){var S=this.getAxisMotionValue(B);return ov(B,S,0,w)},O.prototype.stopAnimation=function(){var B=this;ks(function(w){return B.getAxisMotionValue(w).stop()})},O.prototype.getAxisMotionValue=function(B){var w,S,P="_drag"+B.toUpperCase(),R=this.visualElement.getProps()[P];return R||this.visualElement.getValue(B,(S=(w=this.visualElement.getProps().initial)===null||w===void 0?void 0:w[B])!==null&&S!==void 0?S:0)},O.prototype.snapToCursor=function(B){var w=this;ks(function(S){var P=w.getProps().drag;if(Am(S,P,w.currentDirection)){var R=w.visualElement.projection,N=w.getAxisMotionValue(S);if(R&&R.layout){var F=R.layout.actual[S],K=F.min,ee=F.max;N.set(B[S]-a.mix(K,ee,.5))}}})},O.prototype.scalePositionWithinConstraints=function(){var B=this,w,S=this.getProps(),P=S.drag,R=S.dragConstraints,N=this.visualElement.projection;if(!(!V(R)||!N||!this.constraints)){this.stopAnimation();var F={x:0,y:0};ks(function(ee){var oe=B.getAxisMotionValue(ee);if(oe){var ve=oe.get();F[ee]=J1({min:ve,max:ve},B.constraints[ee])}});var K=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=K?K({},""):"none",(w=N.root)===null||w===void 0||w.updateScroll(),N.updateLayout(),this.resolveConstraints(),ks(function(ee){if(Am(ee,P,null)){var oe=B.getAxisMotionValue(ee),ve=B.constraints[ee],xe=ve.min,Te=ve.max;oe.set(a.mix(xe,Te,F[ee]))}})}},O.prototype.addListeners=function(){var B=this,w;e3.set(this.visualElement,this);var S=this.visualElement.getInstance(),P=pd(S,"pointerdown",function(ee){var oe=B.getProps(),ve=oe.drag,xe=oe.dragListener,Te=xe===void 0?!0:xe;ve&&Te&&B.start(ee)}),R=function(){var ee=B.getProps().dragConstraints;V(ee)&&(B.constraints=B.resolveRefConstraints())},N=this.visualElement.projection,F=N.addEventListener("measure",R);N&&!N.layout&&((w=N.root)===null||w===void 0||w.updateScroll(),N.updateLayout()),R();var K=mr(window,"resize",function(){return B.scalePositionWithinConstraints()});return N.addEventListener("didUpdate",function(ee){var oe=ee.delta,ve=ee.hasLayoutChanged;B.isDragging&&ve&&(ks(function(xe){var Te=B.getAxisMotionValue(xe);Te&&(B.originPoint[xe]+=oe[xe].translate,Te.set(Te.get()+oe[xe].translate))}),B.visualElement.syncRender())}),function(){K(),P(),F()}},O.prototype.getProps=function(){var B=this.visualElement.getProps(),w=B.drag,S=w===void 0?!1:w,P=B.dragDirectionLock,R=P===void 0?!1:P,N=B.dragPropagation,F=N===void 0?!1:N,K=B.dragConstraints,ee=K===void 0?!1:K,oe=B.dragElastic,ve=oe===void 0?Ns:oe,xe=B.dragMomentum,Te=xe===void 0?!0:xe;return r.__assign(r.__assign({},B),{drag:S,dragDirectionLock:R,dragPropagation:F,dragConstraints:ee,dragElastic:ve,dragMomentum:Te})},O}();function Am(O,B,w){return(B===!0||B===O)&&(w===null||w===O)}function bC(O,B){B===void 0&&(B=10);var w=null;return Math.abs(O.y)>B?w="y":Math.abs(O.x)>B&&(w="x"),w}function xC(O){var B=O.dragControls,w=O.visualElement,S=re(function(){return new yC(w)});n.useEffect(function(){return B&&B.subscribe(S)},[S,B]),n.useEffect(function(){return S.addListeners()},[S])}function mv(O){var B=O.onPan,w=O.onPanStart,S=O.onPanEnd,P=O.onPanSessionStart,R=O.visualElement,N=B||w||S||P,F=n.useRef(null),K=n.useContext(M).transformPagePoint,ee={onSessionStart:P,onStart:w,onMove:B,onEnd:function(ve,xe){F.current=null,S&&S(ve,xe)}};n.useEffect(function(){F.current!==null&&F.current.updateHandlers(ee)});function oe(ve){F.current=new hv(ve,ee,{transformPagePoint:K})}Y0(R,"pointerdown",N&&oe),lm(function(){return F.current&&F.current.end()})}var wC={pan:Os(mv),drag:Os(xC)},gv=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];function t3(){var O=gv.map(function(){return new po}),B={},w={clearAllListeners:function(){return O.forEach(function(S){return S.clear()})},updatePropListeners:function(S){gv.forEach(function(P){var R,N="on"+P,F=S[N];(R=B[P])===null||R===void 0||R.call(B),F&&(B[P]=w[N](F))})}};return O.forEach(function(S,P){w["on"+gv[P]]=function(R){return S.add(R)},w["notify"+gv[P]]=function(){for(var R=[],N=0;N<arguments.length;N++)R[N]=arguments[N];return S.notify.apply(S,r.__spreadArray([],r.__read(R),!1))}}),w}function iw(O,B,w){var S;for(var P in B){var R=B[P],N=w[P];if(we(R))O.addValue(P,R);else if(we(N))O.addValue(P,ai(R));else if(N!==R)if(O.hasValue(P)){var F=O.getValue(P);!F.hasAnimated&&F.set(R)}else O.addValue(P,ai((S=O.getStaticValue(P))!==null&&S!==void 0?S:R))}for(var P in w)B[P]===void 0&&O.removeValue(P);return B}var lf=function(O){var B=O.treeType,w=B===void 0?"":B,S=O.build,P=O.getBaseTarget,R=O.makeTargetAnimatable,N=O.measureViewportBox,F=O.render,K=O.readValueFromInstance,ee=O.removeValueFromRenderState,oe=O.sortNodePosition,ve=O.scrapeMotionValuesFromProps;return function(xe,Te){var Me=xe.parent,He=xe.props,Ze=xe.presenceId,bt=xe.blockInitialAnimation,Nt=xe.visualState,Oe=xe.shouldReduceMotion;Te===void 0&&(Te={});var Ee=!1,ke=Nt.latestValues,mt=Nt.renderState,wt,Mt=t3(),Et=new Map,Zt=new Map,rn={},br=r.__assign({},ke),si;function mc(){!wt||!Ee||(pf(),F(wt,mt,He.style,ln.projection))}function pf(){S(ln,mt,ke,Te,He)}function mf(){Mt.notifyUpdate(ke)}function bl(Vt,vr){var xa=vr.onChange(function(lT){ke[Vt]=lT,He.onUpdate&&f.default.update(mf,!1,!0)}),Fw=vr.onRenderRequest(ln.scheduleRender);Zt.set(Vt,function(){xa(),Fw()})}var kw=ve(He);for(var Vv in kw){var sT=kw[Vv];ke[Vv]!==void 0&&we(sT)&&sT.set(ke[Vv],!1)}var jv=ce(He),is=ae(He),ln=r.__assign(r.__assign({treeType:w,current:null,depth:Me?Me.depth+1:0,parent:Me,children:new Set,presenceId:Ze,shouldReduceMotion:Oe,variantChildren:is?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:!!(Me!=null&&Me.isMounted()),blockInitialAnimation:bt,isMounted:function(){return!!wt},mount:function(Vt){Ee=!0,wt=ln.current=Vt,ln.projection&&ln.projection.mount(Vt),is&&Me&&!jv&&(si=Me==null?void 0:Me.addVariantChild(ln)),Et.forEach(function(vr,xa){return bl(xa,vr)}),Me==null||Me.children.add(ln),ln.setProps(He)},unmount:function(){var Vt;(Vt=ln.projection)===null||Vt===void 0||Vt.unmount(),s.cancelSync.update(mf),s.cancelSync.render(mc),Zt.forEach(function(vr){return vr()}),si==null||si(),Me==null||Me.children.delete(ln),Mt.clearAllListeners(),wt=void 0,Ee=!1},addVariantChild:function(Vt){var vr,xa=ln.getClosestVariantNode();if(xa)return(vr=xa.variantChildren)===null||vr===void 0||vr.add(Vt),function(){return xa.variantChildren.delete(Vt)}},sortNodePosition:function(Vt){return!oe||w!==Vt.treeType?0:oe(ln.getInstance(),Vt.getInstance())},getClosestVariantNode:function(){return is?ln:Me==null?void 0:Me.getClosestVariantNode()},getLayoutId:function(){return He.layoutId},getInstance:function(){return wt},getStaticValue:function(Vt){return ke[Vt]},setStaticValue:function(Vt,vr){return ke[Vt]=vr},getLatestValues:function(){return ke},setVisibility:function(Vt){ln.isVisible!==Vt&&(ln.isVisible=Vt,ln.scheduleRender())},makeTargetAnimatable:function(Vt,vr){return vr===void 0&&(vr=!0),R(ln,Vt,He,vr)},measureViewportBox:function(){return N(wt,He)},addValue:function(Vt,vr){ln.hasValue(Vt)&&ln.removeValue(Vt),Et.set(Vt,vr),ke[Vt]=vr.get(),bl(Vt,vr)},removeValue:function(Vt){var vr;Et.delete(Vt),(vr=Zt.get(Vt))===null||vr===void 0||vr(),Zt.delete(Vt),delete ke[Vt],ee(Vt,mt)},hasValue:function(Vt){return Et.has(Vt)},getValue:function(Vt,vr){var xa=Et.get(Vt);return xa===void 0&&vr!==void 0&&(xa=ai(vr),ln.addValue(Vt,xa)),xa},forEachValue:function(Vt){return Et.forEach(Vt)},readValue:function(Vt){var vr;return(vr=ke[Vt])!==null&&vr!==void 0?vr:K(wt,Vt,Te)},setBaseTarget:function(Vt,vr){br[Vt]=vr},getBaseTarget:function(Vt){if(P){var vr=P(He,Vt);if(vr!==void 0&&!we(vr))return vr}return br[Vt]}},Mt),{build:function(){return pf(),mt},scheduleRender:function(){f.default.render(mc,!1,!0)},syncRender:mc,setProps:function(Vt){(Vt.transformTemplate||He.transformTemplate)&&ln.scheduleRender(),He=Vt,Mt.updatePropListeners(Vt),rn=iw(ln,ve(He),rn)},getProps:function(){return He},getVariant:function(Vt){var vr;return(vr=He.variants)===null||vr===void 0?void 0:vr[Vt]},getDefaultTransition:function(){return He.transition},getTransformPagePoint:function(){return He.transformPagePoint},getVariantContext:function(Vt){if(Vt===void 0&&(Vt=!1),Vt)return Me==null?void 0:Me.getVariantContext();if(!jv){var vr=(Me==null?void 0:Me.getVariantContext())||{};return He.initial!==void 0&&(vr.initial=He.initial),vr}for(var xa={},Fw=0;Fw<SC;Fw++){var lT=_C[Fw],d3=He[lT];(Y(d3)||d3===!1)&&(xa[lT]=d3)}return xa}});return ln}},_C=r.__spreadArray(["initial"],r.__read(dv),!1),SC=_C.length;function vv(O){return typeof O=="string"&&O.startsWith("var(--")}var ow=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function AC(O){var B=ow.exec(O);if(!B)return[,];var w=r.__read(B,3),S=w[1],P=w[2];return[S,P]}var MC=4;function ts(O,B,w){w===void 0&&(w=1),i.invariant(w<=MC,'Max CSS variable fallback depth detected in property "'.concat(O,'". This may indicate a circular fallback dependency.'));var S=r.__read(AC(O),2),P=S[0],R=S[1];if(P){var N=window.getComputedStyle(B).getPropertyValue(P);return N?N.trim():vv(R)?ts(R,B,w+1):R}}function CC(O,B,w){var S,P=r.__rest(B,[]),R=O.getInstance();if(!(R instanceof Element))return{target:P,transitionEnd:w};w&&(w=r.__assign({},w)),O.forEachValue(function(ee){var oe=ee.get();if(vv(oe)){var ve=ts(oe,R);ve&&ee.set(ve)}});for(var N in P){var F=P[N];if(vv(F)){var K=ts(F,R);K&&(P[N]=K,w&&((S=w[N])!==null&&S!==void 0||(w[N]=F)))}}return{target:P,transitionEnd:w}}var Mm=new Set(["width","height","top","left","right","bottom","x","y"]),uf=function(O){return Mm.has(O)},yv=function(O){return Object.keys(O).some(uf)},Cm=function(O,B){O.set(B,!1),O.set(B)},Tm=function(O){return O===o.number||O===o.px},cf;(function(O){O.width="width",O.height="height",O.left="left",O.right="right",O.top="top",O.bottom="bottom"})(cf||(cf={}));var Ki=function(O,B){return parseFloat(O.split(", ")[B])},TC=function(O,B){return function(w,S){var P=S.transform;if(P==="none"||!P)return 0;var R=P.match(/^matrix3d\((.+)\)$/);if(R)return Ki(R[1],B);var N=P.match(/^matrix\((.+)\)$/);return N?Ki(N[1],O):0}},r3=new Set(["x","y","z"]),va=et.filter(function(O){return!r3.has(O)});function Ro(O){var B=[];return va.forEach(function(w){var S=O.getValue(w);S!==void 0&&(B.push([w,S.get()]),S.set(w.startsWith("scale")?1:0))}),B.length&&O.syncRender(),B}var aw={width:function(O,B){var w=O.x,S=B.paddingLeft,P=S===void 0?"0":S,R=B.paddingRight,N=R===void 0?"0":R;return w.max-w.min-parseFloat(P)-parseFloat(N)},height:function(O,B){var w=O.y,S=B.paddingTop,P=S===void 0?"0":S,R=B.paddingBottom,N=R===void 0?"0":R;return w.max-w.min-parseFloat(P)-parseFloat(N)},top:function(O,B){var w=B.top;return parseFloat(w)},left:function(O,B){var w=B.left;return parseFloat(w)},bottom:function(O,B){var w=O.y,S=B.top;return parseFloat(S)+(w.max-w.min)},right:function(O,B){var w=O.x,S=B.left;return parseFloat(S)+(w.max-w.min)},x:TC(4,13),y:TC(5,14)},EC=function(O,B,w){var S=B.measureViewportBox(),P=B.getInstance(),R=getComputedStyle(P),N=R.display,F={};N==="none"&&B.setStaticValue("display",O.display||"block"),w.forEach(function(ee){F[ee]=aw[ee](S,R)}),B.syncRender();var K=B.measureViewportBox();return w.forEach(function(ee){var oe=B.getValue(ee);Cm(oe,F[ee]),O[ee]=aw[ee](K,R)}),O},PC=function(O,B,w,S){w===void 0&&(w={}),S===void 0&&(S={}),B=r.__assign({},B),S=r.__assign({},S);var P=Object.keys(B).filter(uf),R=[],N=!1,F=[];if(P.forEach(function(oe){var ve=O.getValue(oe);if(O.hasValue(oe)){var xe=w[oe],Te=yd(xe),Me=B[oe],He;if(qt(Me)){var Ze=Me.length,bt=Me[0]===null?1:0;xe=Me[bt],Te=yd(xe);for(var Nt=bt;Nt<Ze;Nt++)He?i.invariant(yd(Me[Nt])===He,"All keyframes must be of the same type"):(He=yd(Me[Nt]),i.invariant(He===Te||Tm(Te)&&Tm(He),"Keyframes must be of the same dimension as the current value"))}else He=yd(Me);if(Te!==He)if(Tm(Te)&&Tm(He)){var Oe=ve.get();typeof Oe=="string"&&ve.set(parseFloat(Oe)),typeof Me=="string"?B[oe]=parseFloat(Me):Array.isArray(Me)&&He===o.px&&(B[oe]=Me.map(parseFloat))}else Te!=null&&Te.transform&&(He!=null&&He.transform)&&(xe===0||Me===0)?xe===0?ve.set(He.transform(xe)):B[oe]=Te.transform(Me):(N||(R=Ro(O),N=!0),F.push(oe),S[oe]=S[oe]!==void 0?S[oe]:B[oe],Cm(ve,Me))}}),F.length){var K=F.indexOf("height")>=0?window.pageYOffset:null,ee=EC(B,O,F);return R.length&&R.forEach(function(oe){var ve=r.__read(oe,2),xe=ve[0],Te=ve[1];O.getValue(xe).set(Te)}),O.syncRender(),K!==null&&window.scrollTo({top:K}),{target:ee,transitionEnd:S}}else return{target:B,transitionEnd:S}};function DC(O,B,w,S){return yv(B)?PC(O,B,w,S):{target:B,transitionEnd:S}}var OC=function(O,B,w,S){var P=CC(O,B,S);return B=P.target,S=P.transitionEnd,DC(O,B,w,S)};function sw(O){return window.getComputedStyle(O)}var lw={treeType:"dom",readValueFromInstance:function(O,B){if(ut(B)){var w=hm(B);return w&&w.default||0}else{var S=sw(O);return(Be(B)?S.getPropertyValue(B):S[B])||0}},sortNodePosition:function(O,B){return O.compareDocumentPosition(B)&2?1:-1},getBaseTarget:function(O,B){var w;return(w=O.style)===null||w===void 0?void 0:w[B]},measureViewportBox:function(O,B){var w=B.transformPagePoint;return nw(O,w)},resetTransform:function(O,B,w){var S=w.transformTemplate;B.style.transform=S?S({},""):"none",O.scheduleRender()},restoreTransform:function(O,B){O.style.transform=B.style.transform},removeValueFromRenderState:function(O,B){var w=B.vars,S=B.style;delete w[O],delete S[O]},makeTargetAnimatable:function(O,B,w,S){var P=w.transformValues;S===void 0&&(S=!0);var R=B.transition,N=B.transitionEnd,F=r.__rest(B,["transition","transitionEnd"]),K=lv(F,R||{},O);if(P&&(N&&(N=P(N)),F&&(F=P(F)),K&&(K=P(K))),S){sv(O,F,K);var ee=OC(O,F,K,N);N=ee.transitionEnd,F=ee.target}return r.__assign({transition:R,transitionEnd:N},F)},scrapeMotionValuesFromProps:Ut,build:function(O,B,w,S,P){O.isVisible!==void 0&&(B.style.visibility=O.isVisible?"visible":"hidden"),ze(B,w,S,P.transformTemplate)},render:Ge},uw=lf(lw),RC=lf(r.__assign(r.__assign({},lw),{getBaseTarget:function(O,B){return O[B]},readValueFromInstance:function(O,B){var w;return ut(B)?((w=hm(B))===null||w===void 0?void 0:w.default)||0:(B=yt.has(B)?B:Ue(B),O.getAttribute(B))},scrapeMotionValuesFromProps:Ot,build:function(O,B,w,S,P){Ft(B,w,S,P.transformTemplate)},render:It})),bv=function(O,B){return J(O)?RC(B,{enableHardwareAcceleration:!1}):uw(B,{enableHardwareAcceleration:!0})};function Em(O,B){return B.max===B.min?0:O/(B.max-B.min)*100}var uc={correct:function(O,B){if(!B.target)return O;if(typeof O=="string")if(o.px.test(O))O=parseFloat(O);else return O;var w=Em(O,B.target.x),S=Em(O,B.target.y);return"".concat(w,"% ").concat(S,"%")}},cw="_$css",dw={correct:function(O,B){var w=B.treeScale,S=B.projectionDelta,P=O,R=O.includes("var("),N=[];R&&(O=O.replace(ow,function(He){return N.push(He),cw}));var F=o.complex.parse(O);if(F.length>5)return P;var K=o.complex.createTransformer(O),ee=typeof F[0]!="number"?1:0,oe=S.x.scale*w.x,ve=S.y.scale*w.y;F[0+ee]/=oe,F[1+ee]/=ve;var xe=a.mix(oe,ve,.5);typeof F[2+ee]=="number"&&(F[2+ee]/=xe),typeof F[3+ee]=="number"&&(F[3+ee]/=xe);var Te=K(F);if(R){var Me=0;Te=Te.replace(cw,function(){var He=N[Me];return Me++,He})}return Te}},IC=function(O){r.__extends(B,O);function B(){return O!==null&&O.apply(this,arguments)||this}return B.prototype.componentDidMount=function(){var w=this,S=this.props,P=S.visualElement,R=S.layoutGroup,N=S.switchLayoutGroup,F=S.layoutId,K=P.projection;Pe(xv),K&&(R!=null&&R.group&&R.group.add(K),N!=null&&N.register&&F&&N.register(K),K.root.didUpdate(),K.addEventListener("animationComplete",function(){w.safeToRemove()}),K.setOptions(r.__assign(r.__assign({},K.options),{onExitComplete:function(){return w.safeToRemove()}}))),ye.hasEverUpdated=!0},B.prototype.getSnapshotBeforeUpdate=function(w){var S=this,P=this.props,R=P.layoutDependency,N=P.visualElement,F=P.drag,K=P.isPresent,ee=N.projection;return ee&&(ee.isPresent=K,F||w.layoutDependency!==R||R===void 0?ee.willUpdate():this.safeToRemove(),w.isPresent!==K&&(K?ee.promote():ee.relegate()||f.default.postRender(function(){var oe;!((oe=ee.getStack())===null||oe===void 0)&&oe.members.length||S.safeToRemove()}))),null},B.prototype.componentDidUpdate=function(){var w=this.props.visualElement.projection;w&&(w.root.didUpdate(),!w.currentAnimation&&w.isLead()&&this.safeToRemove())},B.prototype.componentWillUnmount=function(){var w=this.props,S=w.visualElement,P=w.layoutGroup,R=w.switchLayoutGroup,N=S.projection;N&&(N.scheduleCheckAfterUnmount(),P!=null&&P.group&&P.group.remove(N),R!=null&&R.deregister&&R.deregister(N))},B.prototype.safeToRemove=function(){var w=this.props.safeToRemove;w==null||w()},B.prototype.render=function(){return null},B}(h.default.Component);function LC(O){var B=r.__read(z1(),2),w=B[0],S=B[1],P=n.useContext(Se);return h.default.createElement(IC,r.__assign({},O,{layoutGroup:P,switchLayoutGroup:n.useContext(Fe),isPresent:w,safeToRemove:S}))}var xv={borderRadius:r.__assign(r.__assign({},uc),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:uc,borderTopRightRadius:uc,borderBottomLeftRadius:uc,borderBottomRightRadius:uc,boxShadow:dw},hw={measureLayout:LC};function wv(O,B,w){w===void 0&&(w={});var S=we(O)?O:ai(O);return ov("",S,B,w),{stop:function(){return S.stop()},isAnimating:function(){return S.isAnimating()}}}var fw=["TopLeft","TopRight","BottomLeft","BottomRight"],nu=fw.length,BC=function(O){return typeof O=="string"?parseFloat(O):O},NC=function(O){return typeof O=="number"||o.px.test(O)};function _v(O,B,w,S,P,R){var N,F,K,ee;P?(O.opacity=a.mix(0,(N=w.opacity)!==null&&N!==void 0?N:1,n3(S)),O.opacityExit=a.mix((F=B.opacity)!==null&&F!==void 0?F:1,0,Pt(S))):R&&(O.opacity=a.mix((K=B.opacity)!==null&&K!==void 0?K:1,(ee=w.opacity)!==null&&ee!==void 0?ee:1,S));for(var oe=0;oe<nu;oe++){var ve="border".concat(fw[oe],"Radius"),xe=cc(B,ve),Te=cc(w,ve);if(!(xe===void 0&&Te===void 0)){xe||(xe=0),Te||(Te=0);var Me=xe===0||Te===0||NC(xe)===NC(Te);Me?(O[ve]=Math.max(a.mix(BC(xe),BC(Te),S),0),(o.percent.test(Te)||o.percent.test(xe))&&(O[ve]+="%")):O[ve]=Te}}(B.rotate||w.rotate)&&(O.rotate=a.mix(B.rotate||0,w.rotate||0,S))}function cc(O,B){var w;return(w=O[B])!==null&&w!==void 0?w:O.borderRadius}var n3=Pm(0,.5,a.circOut),Pt=Pm(.5,.95,a.linear);function Pm(O,B,w){return function(S){return S<O?0:S>B?1:w(a.progress(O,B,S))}}function Sv(O,B){O.min=B.min,O.max=B.max}function rs(O,B){Sv(O.x,B.x),Sv(O.y,B.y)}function kC(O,B,w,S,P){return O-=B,O=of(O,1/w,S),P!==void 0&&(O=of(O,1/P,S)),O}function wd(O,B,w,S,P,R,N){if(B===void 0&&(B=0),w===void 0&&(w=1),S===void 0&&(S=.5),R===void 0&&(R=O),N===void 0&&(N=O),o.percent.test(B)){B=parseFloat(B);var F=a.mix(N.min,N.max,B/100);B=F-N.min}if(typeof B=="number"){var K=a.mix(R.min,R.max,S);O===R&&(K-=B),O.min=kC(O.min,B,w,K,P),O.max=kC(O.max,B,w,K,P)}}function df(O,B,w,S,P){var R=r.__read(w,3),N=R[0],F=R[1],K=R[2];wd(O,B[N],B[F],B[K],B.scale,S,P)}var pw=["x","scaleX","originX"],FC=["y","scaleY","originY"];function mw(O,B,w,S){df(O.x,B,pw,w==null?void 0:w.x,S==null?void 0:S.x),df(O.y,B,FC,w==null?void 0:w.y,S==null?void 0:S.y)}function gw(O){return O.translate===0&&O.scale===1}function vw(O){return gw(O.x)&&gw(O.y)}function yw(O,B){return O.x.min===B.x.min&&O.x.max===B.x.max&&O.y.min===B.y.min&&O.y.max===B.y.max}var zC=function(){function O(){this.members=[]}return O.prototype.add=function(B){ic(this.members,B),B.scheduleRender()},O.prototype.remove=function(B){if(Jh(this.members,B),B===this.prevLead&&(this.prevLead=void 0),B===this.lead){var w=this.members[this.members.length-1];w&&this.promote(w)}},O.prototype.relegate=function(B){var w=this.members.findIndex(function(N){return B===N});if(w===0)return!1;for(var S,P=w;P>=0;P--){var R=this.members[P];if(R.isPresent!==!1){S=R;break}}return S?(this.promote(S),!0):!1},O.prototype.promote=function(B,w){var S,P=this.lead;if(B!==P&&(this.prevLead=P,this.lead=B,B.show(),P)){P.instance&&P.scheduleRender(),B.scheduleRender(),B.resumeFrom=P,w&&(B.resumeFrom.preserveOpacity=!0),P.snapshot&&(B.snapshot=P.snapshot,B.snapshot.latestValues=P.animationValues||P.latestValues,B.snapshot.isShared=!0),!((S=B.root)===null||S===void 0)&&S.isUpdating&&(B.isLayoutDirty=!0);var R=B.options.crossfade;R===!1&&P.hide()}},O.prototype.exitAnimationComplete=function(){this.members.forEach(function(B){var w,S,P,R,N;(S=(w=B.options).onExitComplete)===null||S===void 0||S.call(w),(N=(P=B.resumingFrom)===null||P===void 0?void 0:(R=P.options).onExitComplete)===null||N===void 0||N.call(R)})},O.prototype.scheduleRender=function(){this.members.forEach(function(B){B.instance&&B.scheduleRender(!1)})},O.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},O}(),bw="translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)";function Av(O,B,w){var S=O.x.translate/B.x,P=O.y.translate/B.y,R="translate3d(".concat(S,"px, ").concat(P,"px, 0) ");if(R+="scale(".concat(1/B.x,", ").concat(1/B.y,") "),w){var N=w.rotate,F=w.rotateX,K=w.rotateY;N&&(R+="rotate(".concat(N,"deg) ")),F&&(R+="rotateX(".concat(F,"deg) ")),K&&(R+="rotateY(".concat(K,"deg) "))}var ee=O.x.scale*B.x,oe=O.y.scale*B.y;return R+="scale(".concat(ee,", ").concat(oe,")"),R===bw?"none":R}var UC=function(O,B){return O.depth-B.depth},Mv=function(){function O(){this.children=[],this.isDirty=!1}return O.prototype.add=function(B){ic(this.children,B),this.isDirty=!0},O.prototype.remove=function(B){Jh(this.children,B),this.isDirty=!0},O.prototype.forEach=function(B){this.isDirty&&this.children.sort(UC),this.isDirty=!1,this.children.forEach(B)},O}(),Dm=1e3;function VC(O){var B=O.attachResizeListener,w=O.defaultParent,S=O.measureScroll,P=O.checkIsScrollRoot,R=O.resetTransform;return function(){function N(F,K,ee){var oe=this;K===void 0&&(K={}),ee===void 0&&(ee=w==null?void 0:w()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){oe.isUpdating&&(oe.isUpdating=!1,oe.clearAllSnapshots())},this.updateProjection=function(){oe.nodes.forEach(Tv),oe.nodes.forEach(Ev)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=F,this.latestValues=K,this.root=ee?ee.root||ee:this,this.path=ee?r.__spreadArray(r.__spreadArray([],r.__read(ee.path),!1),[ee],!1):[],this.parent=ee,this.depth=ee?ee.depth+1:0,F&&this.root.registerPotentialNode(F,this);for(var ve=0;ve<this.path.length;ve++)this.path[ve].shouldResetTransform=!0;this.root===this&&(this.nodes=new Mv)}return N.prototype.addEventListener=function(F,K){return this.eventHandlers.has(F)||this.eventHandlers.set(F,new po),this.eventHandlers.get(F).add(K)},N.prototype.notifyListeners=function(F){for(var K=[],ee=1;ee<arguments.length;ee++)K[ee-1]=arguments[ee];var oe=this.eventHandlers.get(F);oe==null||oe.notify.apply(oe,r.__spreadArray([],r.__read(K),!1))},N.prototype.hasListeners=function(F){return this.eventHandlers.has(F)},N.prototype.registerPotentialNode=function(F,K){this.potentialNodes.set(F,K)},N.prototype.mount=function(F,K){var ee=this,oe;if(K===void 0&&(K=!1),!this.instance){this.isSVG=F instanceof SVGElement&&F.tagName!=="svg",this.instance=F;var ve=this.options,xe=ve.layoutId,Te=ve.layout,Me=ve.visualElement;if(Me&&!Me.getInstance()&&Me.mount(F),this.root.nodes.add(this),(oe=this.parent)===null||oe===void 0||oe.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),K&&(Te||xe)&&(this.isLayoutDirty=!0),B){var He,Ze=function(){return ee.root.updateBlockedByResize=!1};B(F,function(){ee.root.updateBlockedByResize=!0,clearTimeout(He),He=window.setTimeout(Ze,250),ye.hasAnimatedSinceResize&&(ye.hasAnimatedSinceResize=!1,ee.nodes.forEach(Cv))})}xe&&this.root.registerSharedNode(xe,this),this.options.animate!==!1&&Me&&(xe||Te)&&this.addEventListener("didUpdate",function(bt){var Nt,Oe,Ee,ke,mt,wt=bt.delta,Mt=bt.hasLayoutChanged,Et=bt.hasRelativeTargetChanged,Zt=bt.layout;if(ee.isTreeAnimationBlocked()){ee.target=void 0,ee.relativeTarget=void 0;return}var rn=(Oe=(Nt=ee.options.transition)!==null&&Nt!==void 0?Nt:Me.getDefaultTransition())!==null&&Oe!==void 0?Oe:WC,br=Me.getProps(),si=br.onLayoutAnimationStart,mc=br.onLayoutAnimationComplete,pf=!ee.targetLayout||!yw(ee.targetLayout,Zt)||Et,mf=!Mt&&Et;if(!((Ee=ee.resumeFrom)===null||Ee===void 0)&&Ee.instance||mf||Mt&&(pf||!ee.currentAnimation)){ee.resumeFrom&&(ee.resumingFrom=ee.resumeFrom,ee.resumingFrom.resumingFrom=void 0),ee.setAnimationOrigin(wt,mf);var bl=r.__assign(r.__assign({},iv(rn,"layout")),{onPlay:si,onComplete:mc});Me.shouldReduceMotion&&(bl.delay=0,bl.type=!1),ee.startAnimation(bl)}else!Mt&&ee.animationProgress===0&&ee.finishAnimation(),ee.isLead()&&((mt=(ke=ee.options).onExitComplete)===null||mt===void 0||mt.call(ke));ee.targetLayout=Zt})}},N.prototype.unmount=function(){var F,K;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),(F=this.getStack())===null||F===void 0||F.remove(this),(K=this.parent)===null||K===void 0||K.children.delete(this),this.instance=void 0,s.cancelSync.preRender(this.updateProjection)},N.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},N.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},N.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},N.prototype.isTreeAnimationBlocked=function(){var F;return this.isAnimationBlocked||((F=this.parent)===null||F===void 0?void 0:F.isTreeAnimationBlocked())||!1},N.prototype.startUpdate=function(){var F;this.isUpdateBlocked()||(this.isUpdating=!0,(F=this.nodes)===null||F===void 0||F.forEach(Pv))},N.prototype.willUpdate=function(F){var K,ee,oe;if(F===void 0&&(F=!0),this.root.isUpdateBlocked()){(ee=(K=this.options).onExitComplete)===null||ee===void 0||ee.call(K);return}if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var ve=0;ve<this.path.length;ve++){var xe=this.path[ve];xe.shouldResetTransform=!0,xe.updateScroll()}var Te=this.options,Me=Te.layoutId,He=Te.layout;if(!(Me===void 0&&!He)){var Ze=(oe=this.options.visualElement)===null||oe===void 0?void 0:oe.getProps().transformTemplate;this.prevTransformTemplateValue=Ze==null?void 0:Ze(this.latestValues,""),this.updateSnapshot(),F&&this.notifyListeners("willUpdate")}}},N.prototype.didUpdate=function(){var F=this.isUpdateBlocked();if(F){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xw);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(Sw),this.potentialNodes.clear()),this.nodes.forEach(GC),this.nodes.forEach(i3),this.nodes.forEach(jC),this.clearAllSnapshots(),s.flushSync.update(),s.flushSync.preRender(),s.flushSync.render())},N.prototype.clearAllSnapshots=function(){this.nodes.forEach(HC),this.sharedNodes.forEach(Dv)},N.prototype.scheduleUpdateProjection=function(){f.default.preRender(this.updateProjection,!1,!0)},N.prototype.scheduleCheckAfterUnmount=function(){var F=this;f.default.postRender(function(){F.isLayoutDirty?F.root.didUpdate():F.root.checkUpdateFailed()})},N.prototype.updateSnapshot=function(){if(!(this.snapshot||!this.instance)){var F=this.measure(),K=this.removeTransform(this.removeElementScroll(F));Om(K),this.snapshot={measured:F,layout:K,latestValues:{}}}},N.prototype.updateLayout=function(){var F;if(this.instance&&(this.updateScroll(),!(!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))){if(this.resumeFrom&&!this.resumeFrom.instance)for(var K=0;K<this.path.length;K++){var ee=this.path[K];ee.updateScroll()}var oe=this.measure();Om(oe);var ve=this.layout;this.layout={measured:oe,actual:this.removeElementScroll(oe)},this.layoutCorrected=wi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),(F=this.options.visualElement)===null||F===void 0||F.notifyLayoutMeasure(this.layout.actual,ve==null?void 0:ve.actual)}},N.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=P(this.instance),this.scroll=S(this.instance))},N.prototype.resetTransform=function(){var F;if(R){var K=this.isLayoutDirty||this.shouldResetTransform,ee=this.projectionDelta&&!vw(this.projectionDelta),oe=(F=this.options.visualElement)===null||F===void 0?void 0:F.getProps().transformTemplate,ve=oe==null?void 0:oe(this.latestValues,""),xe=ve!==this.prevTransformTemplateValue;K&&(ee||Fs(this.latestValues)||xe)&&(R(this.instance,ve),this.shouldResetTransform=!1,this.scheduleRender())}},N.prototype.measure=function(){var F=this.options.visualElement;if(!F)return wi();var K=F.measureViewportBox(),ee=this.root.scroll;return ee&&(ru(K.x,ee.x),ru(K.y,ee.y)),K},N.prototype.removeElementScroll=function(F){var K=wi();rs(K,F);for(var ee=0;ee<this.path.length;ee++){var oe=this.path[ee],ve=oe.scroll,xe=oe.options,Te=oe.isScrollRoot;if(oe!==this.root&&ve&&xe.layoutScroll){if(Te){rs(K,F);var Me=this.root.scroll;Me&&(ru(K.x,-Me.x),ru(K.y,-Me.y))}ru(K.x,ve.x),ru(K.y,ve.y)}}return K},N.prototype.applyTransform=function(F,K){K===void 0&&(K=!1);var ee=wi();rs(ee,F);for(var oe=0;oe<this.path.length;oe++){var ve=this.path[oe];!K&&ve.options.layoutScroll&&ve.scroll&&ve!==ve.root&&sf(ee,{x:-ve.scroll.x,y:-ve.scroll.y}),Fs(ve.latestValues)&&sf(ee,ve.latestValues)}return Fs(this.latestValues)&&sf(ee,this.latestValues),ee},N.prototype.removeTransform=function(F){var K,ee=wi();rs(ee,F);for(var oe=0;oe<this.path.length;oe++){var ve=this.path[oe];if(ve.instance&&Fs(ve.latestValues)){tw(ve.latestValues)&&ve.updateSnapshot();var xe=wi(),Te=ve.measure();rs(xe,Te),mw(ee,ve.latestValues,(K=ve.snapshot)===null||K===void 0?void 0:K.layout,xe)}}return Fs(this.latestValues)&&mw(ee,this.latestValues),ee},N.prototype.setTargetDelta=function(F){this.targetDelta=F,this.root.scheduleUpdateProjection()},N.prototype.setOptions=function(F){var K;this.options=r.__assign(r.__assign(r.__assign({},this.options),F),{crossfade:(K=F.crossfade)!==null&&K!==void 0?K:!0})},N.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},N.prototype.resolveTargetDelta=function(){var F,K=this.options,ee=K.layout,oe=K.layoutId;!this.layout||!(ee||oe)||(!this.targetDelta&&!this.relativeTarget&&(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),sc(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),rs(this.relativeTarget,this.relativeTargetOrigin))),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wi(),this.targetWithTransforms=wi()),this.relativeTarget&&this.relativeTargetOrigin&&(!((F=this.relativeParent)===null||F===void 0)&&F.target)?mo(this.target,this.relativeTarget,this.relativeParent.target):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.actual):rs(this.target,this.layout.actual),rw(this.target,this.targetDelta)):rs(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&!!this.relativeParent.resumingFrom==!!this.resumingFrom&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),sc(this.relativeTargetOrigin,this.target,this.relativeParent.target),rs(this.relativeTarget,this.relativeTargetOrigin)))))},N.prototype.getClosestProjectingParent=function(){if(!(!this.parent||Fs(this.parent.latestValues)))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},N.prototype.calcProjection=function(){var F,K=this.options,ee=K.layout,oe=K.layoutId;if(this.isTreeAnimating=!!(!((F=this.parent)===null||F===void 0)&&F.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!(!this.layout||!(ee||oe))){var ve=this.getLead();rs(this.layoutCorrected,this.layout.actual),mC(this.layoutCorrected,this.treeScale,this.path,!!this.resumingFrom||this!==ve);var xe=ve.target;if(xe){this.projectionDelta||(this.projectionDelta=nf(),this.projectionDeltaWithTransform=nf());var Te=this.treeScale.x,Me=this.treeScale.y,He=this.projectionTransform;vl(this.projectionDelta,this.layoutCorrected,xe,this.latestValues),this.projectionTransform=Av(this.projectionDelta,this.treeScale),(this.projectionTransform!==He||this.treeScale.x!==Te||this.treeScale.y!==Me)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",xe))}}},N.prototype.hide=function(){this.isVisible=!1},N.prototype.show=function(){this.isVisible=!0},N.prototype.scheduleRender=function(F){var K,ee,oe;F===void 0&&(F=!0),(ee=(K=this.options).scheduleRender)===null||ee===void 0||ee.call(K),F&&((oe=this.getStack())===null||oe===void 0||oe.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},N.prototype.setAnimationOrigin=function(F,K){var ee=this,oe;K===void 0&&(K=!1);var ve=this.snapshot,xe=(ve==null?void 0:ve.latestValues)||{},Te=r.__assign({},this.latestValues),Me=nf();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!K;var He=wi(),Ze=ve==null?void 0:ve.isShared,bt=(((oe=this.getStack())===null||oe===void 0?void 0:oe.members.length)||0)<=1,Nt=!!(Ze&&!bt&&this.options.crossfade===!0&&!this.path.some(_w));this.animationProgress=0,this.mixTargetDelta=function(Oe){var Ee,ke=Oe/1e3;hf(Me.x,F.x,ke),hf(Me.y,F.y,ke),ee.setTargetDelta(Me),ee.relativeTarget&&ee.relativeTargetOrigin&&ee.layout&&(!((Ee=ee.relativeParent)===null||Ee===void 0)&&Ee.layout)&&(sc(He,ee.layout.actual,ee.relativeParent.layout.actual),ww(ee.relativeTarget,ee.relativeTargetOrigin,He,ke)),Ze&&(ee.animationValues=Te,_v(Te,xe,ee.latestValues,ke,Nt,bt)),ee.root.scheduleUpdateProjection(),ee.scheduleRender(),ee.animationProgress=ke},this.mixTargetDelta(0)},N.prototype.startAnimation=function(F){var K=this,ee,oe;this.notifyListeners("animationStart"),(ee=this.currentAnimation)===null||ee===void 0||ee.stop(),this.resumingFrom&&((oe=this.resumingFrom.currentAnimation)===null||oe===void 0||oe.stop()),this.pendingAnimation&&(s.cancelSync.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=f.default.update(function(){ye.hasAnimatedSinceResize=!0,K.currentAnimation=wv(0,Dm,r.__assign(r.__assign({},F),{onUpdate:function(ve){var xe;K.mixTargetDelta(ve),(xe=F.onUpdate)===null||xe===void 0||xe.call(F,ve)},onComplete:function(){var ve;(ve=F.onComplete)===null||ve===void 0||ve.call(F),K.completeAnimation()}})),K.resumingFrom&&(K.resumingFrom.currentAnimation=K.currentAnimation),K.pendingAnimation=void 0})},N.prototype.completeAnimation=function(){var F;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),(F=this.getStack())===null||F===void 0||F.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},N.prototype.finishAnimation=function(){var F;this.currentAnimation&&((F=this.mixTargetDelta)===null||F===void 0||F.call(this,Dm),this.currentAnimation.stop()),this.completeAnimation()},N.prototype.applyTransformsToTarget=function(){var F=this.getLead(),K=F.targetWithTransforms,ee=F.target,oe=F.layout,ve=F.latestValues;!K||!ee||!oe||(rs(K,ee),sf(K,ve),vl(this.projectionDeltaWithTransform,this.layoutCorrected,K,ve))},N.prototype.registerSharedNode=function(F,K){var ee,oe,ve;this.sharedNodes.has(F)||this.sharedNodes.set(F,new zC);var xe=this.sharedNodes.get(F);xe.add(K),K.promote({transition:(ee=K.options.initialPromotionConfig)===null||ee===void 0?void 0:ee.transition,preserveFollowOpacity:(ve=(oe=K.options.initialPromotionConfig)===null||oe===void 0?void 0:oe.shouldPreserveFollowOpacity)===null||ve===void 0?void 0:ve.call(oe,K)})},N.prototype.isLead=function(){var F=this.getStack();return F?F.lead===this:!0},N.prototype.getLead=function(){var F,K=this.options.layoutId;return K?((F=this.getStack())===null||F===void 0?void 0:F.lead)||this:this},N.prototype.getPrevLead=function(){var F,K=this.options.layoutId;return K?(F=this.getStack())===null||F===void 0?void 0:F.prevLead:void 0},N.prototype.getStack=function(){var F=this.options.layoutId;if(F)return this.root.sharedNodes.get(F)},N.prototype.promote=function(F){var K=F===void 0?{}:F,ee=K.needsReset,oe=K.transition,ve=K.preserveFollowOpacity,xe=this.getStack();xe&&xe.promote(this,ve),ee&&(this.projectionDelta=void 0,this.needsReset=!0),oe&&this.setOptions({transition:oe})},N.prototype.relegate=function(){var F=this.getStack();return F?F.relegate(this):!1},N.prototype.resetRotation=function(){var F=this.options.visualElement;if(F){for(var K=!1,ee={},oe=0;oe<De.length;oe++){var ve=De[oe],xe="rotate"+ve;F.getStaticValue(xe)&&(K=!0,ee[xe]=F.getStaticValue(xe),F.setStaticValue(xe,0))}if(K){F==null||F.syncRender();for(var xe in ee)F.setStaticValue(xe,ee[xe]);F.scheduleRender()}}},N.prototype.getProjectionStyles=function(F){var K,ee,oe,ve,xe,Te;F===void 0&&(F={});var Me={};if(!this.instance||this.isSVG)return Me;if(this.isVisible)Me.visibility="";else return{visibility:"hidden"};var He=(K=this.options.visualElement)===null||K===void 0?void 0:K.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,Me.opacity="",Me.pointerEvents=an(F.pointerEvents)||"",Me.transform=He?He(this.latestValues,""):"none",Me;var Ze=this.getLead();if(!this.projectionDelta||!this.layout||!Ze.target){var bt={};return this.options.layoutId&&(bt.opacity=(ee=this.latestValues.opacity)!==null&&ee!==void 0?ee:1,bt.pointerEvents=an(F.pointerEvents)||""),this.hasProjected&&!Fs(this.latestValues)&&(bt.transform=He?He({},""):"none",this.hasProjected=!1),bt}var Nt=Ze.animationValues||Ze.latestValues;this.applyTransformsToTarget(),Me.transform=Av(this.projectionDeltaWithTransform,this.treeScale,Nt),He&&(Me.transform=He(Nt,Me.transform));var Oe=this.projectionDelta,Ee=Oe.x,ke=Oe.y;Me.transformOrigin="".concat(Ee.origin*100,"% ").concat(ke.origin*100,"% 0"),Ze.animationValues?Me.opacity=Ze===this?(ve=(oe=Nt.opacity)!==null&&oe!==void 0?oe:this.latestValues.opacity)!==null&&ve!==void 0?ve:1:this.preserveOpacity?this.latestValues.opacity:Nt.opacityExit:Me.opacity=Ze===this?(xe=Nt.opacity)!==null&&xe!==void 0?xe:"":(Te=Nt.opacityExit)!==null&&Te!==void 0?Te:0;for(var mt in ge)if(Nt[mt]!==void 0){var wt=ge[mt],Mt=wt.correct,Et=wt.applyTo,Zt=Mt(Nt[mt],Ze);if(Et)for(var rn=Et.length,br=0;br<rn;br++)Me[Et[br]]=Zt;else Me[mt]=Zt}return this.options.layoutId&&(Me.pointerEvents=Ze===this?an(F.pointerEvents)||"":"none"),Me},N.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},N.prototype.resetTree=function(){this.root.nodes.forEach(function(F){var K;return(K=F.currentAnimation)===null||K===void 0?void 0:K.stop()}),this.root.nodes.forEach(xw),this.root.sharedNodes.clear()},N}()}function i3(O){O.updateLayout()}function jC(O){var B,w,S,P,R=(w=(B=O.resumeFrom)===null||B===void 0?void 0:B.snapshot)!==null&&w!==void 0?w:O.snapshot;if(O.isLead()&&O.layout&&R&&O.hasListeners("didUpdate")){var N=O.layout,F=N.actual,K=N.measured;O.options.animationType==="size"?ks(function(Nt){var Oe=R.isShared?R.measured[Nt]:R.layout[Nt],Ee=es(Oe);Oe.min=F[Nt].min,Oe.max=Oe.min+Ee}):O.options.animationType==="position"&&ks(function(Nt){var Oe=R.isShared?R.measured[Nt]:R.layout[Nt],Ee=es(F[Nt]);Oe.max=Oe.min+Ee});var ee=nf();vl(ee,F,R.layout);var oe=nf();R.isShared?vl(oe,O.applyTransform(K,!0),R.measured):vl(oe,F,R.layout);var ve=!vw(ee),xe=!1;if(!O.resumeFrom&&(O.relativeParent=O.getClosestProjectingParent(),O.relativeParent&&!O.relativeParent.resumeFrom)){var Te=O.relativeParent,Me=Te.snapshot,He=Te.layout;if(Me&&He){var Ze=wi();sc(Ze,R.layout,Me.layout);var bt=wi();sc(bt,F,He.actual),yw(Ze,bt)||(xe=!0)}}O.notifyListeners("didUpdate",{layout:F,snapshot:R,delta:oe,layoutDelta:ee,hasLayoutChanged:ve,hasRelativeTargetChanged:xe})}else O.isLead()&&((P=(S=O.options).onExitComplete)===null||P===void 0||P.call(S));O.options.transition=void 0}function HC(O){O.clearSnapshot()}function xw(O){O.clearMeasurements()}function GC(O){var B=O.options.visualElement;B!=null&&B.getProps().onBeforeLayoutMeasure&&B.notifyBeforeLayoutMeasure(),O.resetTransform()}function Cv(O){O.finishAnimation(),O.targetDelta=O.relativeTarget=O.target=void 0}function Tv(O){O.resolveTargetDelta()}function Ev(O){O.calcProjection()}function Pv(O){O.resetRotation()}function Dv(O){O.removeLeadSnapshot()}function hf(O,B,w){O.translate=a.mix(B.translate,0,w),O.scale=a.mix(B.scale,1,w),O.origin=B.origin,O.originPoint=B.originPoint}function Ov(O,B,w,S){O.min=a.mix(B.min,w.min,S),O.max=a.mix(B.max,w.max,S)}function ww(O,B,w,S){Ov(O.x,B.x,w.x,S),Ov(O.y,B.y,w.y,S)}function _w(O){return O.animationValues&&O.animationValues.opacityExit!==void 0}var WC={duration:.45,ease:[.4,0,.1,1]};function Sw(O,B){for(var w=O.root,S=O.path.length-1;S>=0;S--)if(O.path[S].instance){w=O.path[S];break}var P=w&&w!==O.root?w.instance:document,R=P.querySelector('[data-projection-id="'.concat(B,'"]'));R&&O.mount(R,!0)}function qC(O){O.min=Math.round(O.min),O.max=Math.round(O.max)}function Om(O){qC(O.x),qC(O.y)}var Aw=VC({attachResizeListener:function(O,B){return mr(O,"resize",B)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),dn={current:void 0},Tr=VC({measureScroll:function(O){return{x:O.scrollLeft,y:O.scrollTop}},defaultParent:function(){if(!dn.current){var O=new Aw(0,{});O.mount(window),O.setOptions({layoutScroll:!0}),dn.current=O}return dn.current},resetTransform:function(O,B){O.style.transform=B??"none"},checkIsScrollRoot:function(O){return window.getComputedStyle(O).position==="fixed"}}),Xn=r.__assign(r.__assign(r.__assign(r.__assign({},$a),$0),wC),hw),Vn=he(function(O,B){return Xt(O,B,Xn,bv,Tr)});function Ji(O){return rt(Xt(O,{forwardMotionProps:!1},Xn,bv,Tr))}var ya=he(Xt);function _d(){var O=n.useRef(!1);return I(function(){return O.current=!0,function(){O.current=!1}},[]),O}function jn(){var O=_d(),B=r.__read(n.useState(0),2),w=B[0],S=B[1],P=n.useCallback(function(){O.current&&S(w+1)},[w]),R=n.useCallback(function(){return f.default.postRender(P)},[P]);return[R,w]}var Sd=function(O){var B=O.children,w=O.initial,S=O.isPresent,P=O.onExitComplete,R=O.custom,N=O.presenceAffectsLayout,F=re(ff),K=Rs(),ee=n.useMemo(function(){return{id:K,initial:w,isPresent:S,custom:R,onExitComplete:function(oe){var ve,xe;F.set(oe,!0);try{for(var Te=r.__values(F.values()),Me=Te.next();!Me.done;Me=Te.next()){var He=Me.value;if(!He)return}}catch(Ze){ve={error:Ze}}finally{try{Me&&!Me.done&&(xe=Te.return)&&xe.call(Te)}finally{if(ve)throw ve.error}}P==null||P()},register:function(oe){return F.set(oe,!1),function(){return F.delete(oe)}}}},N?void 0:[S]);return n.useMemo(function(){F.forEach(function(oe,ve){return F.set(ve,!1)})},[S]),c.useEffect(function(){!S&&!F.size&&(P==null||P())},[S]),c.createElement(E.Provider,{value:ee},B)};function ff(){return new Map}var iu=function(O){return O.key||""};function Mw(O,B){O.forEach(function(w){var S=iu(w);B.set(S,w)})}function Rm(O){var B=[];return n.Children.forEach(O,function(w){n.isValidElement(w)&&B.push(w)}),B}var Ho=function(O){var B=O.children,w=O.custom,S=O.initial,P=S===void 0?!0:S,R=O.onExitComplete,N=O.exitBeforeEnter,F=O.presenceAffectsLayout,K=F===void 0?!0:F,ee=r.__read(jn(),1),oe=ee[0],ve=n.useContext(Se).forceRender;ve&&(oe=ve);var xe=_d(),Te=Rm(B),Me=Te,He=new Set,Ze=n.useRef(Me),bt=n.useRef(new Map).current,Nt=n.useRef(!0);if(I(function(){Nt.current=!1,Mw(Te,bt),Ze.current=Me}),lm(function(){Nt.current=!0,bt.clear(),He.clear()}),Nt.current)return c.createElement(c.Fragment,null,Me.map(function(Mt){return c.createElement(Sd,{key:iu(Mt),isPresent:!0,initial:P?void 0:!1,presenceAffectsLayout:K},Mt)}));Me=r.__spreadArray([],r.__read(Me),!1);for(var Oe=Ze.current.map(iu),Ee=Te.map(iu),ke=Oe.length,mt=0;mt<ke;mt++){var wt=Oe[mt];Ee.indexOf(wt)===-1&&He.add(wt)}return N&&He.size&&(Me=[]),He.forEach(function(Mt){if(Ee.indexOf(Mt)===-1){var Et=bt.get(Mt);if(Et){var Zt=Oe.indexOf(Mt),rn=function(){bt.delete(Mt),He.delete(Mt);var br=Ze.current.findIndex(function(si){return si.key===Mt});if(Ze.current.splice(br,1),!He.size){if(Ze.current=Te,xe.current===!1)return;oe(),R&&R()}};Me.splice(Zt,0,c.createElement(Sd,{key:iu(Et),isPresent:!1,onExitComplete:rn,custom:w,presenceAffectsLayout:K},Et))}}}),Me=Me.map(function(Mt){var Et=Mt.key;return He.has(Et)?Mt:c.createElement(Sd,{key:iu(Mt),isPresent:!0,presenceAffectsLayout:K},Mt)}),y!=="production"&&N&&Me.length>1&&console.warn("You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour."),c.createElement(c.Fragment,null,He.size?Me:Me.map(function(Mt){return n.cloneElement(Mt)}))},Rv=n.createContext(null),Cw=function(O){return!O.isLayoutDirty&&O.willUpdate(!1)};function Ad(){var O=new Set,B=new WeakMap,w=function(){return O.forEach(Cw)};return{add:function(S){O.add(S),B.set(S,S.addEventListener("willUpdate",w))},remove:function(S){var P;O.delete(S),(P=B.get(S))===null||P===void 0||P(),B.delete(S),w()},dirty:w}}var Im=function(O){return O===!0},Tw=function(O){return Im(O===!0)||O==="id"},ou=function(O){var B,w,S=O.children,P=O.id,R=O.inheritId,N=O.inherit,F=N===void 0?!0:N;R!==void 0&&(F=R);var K=n.useContext(Se),ee=n.useContext(Rv),oe=r.__read(jn(),2),ve=oe[0],xe=oe[1],Te=n.useRef(null),Me=(B=K.id)!==null&&B!==void 0?B:ee;Te.current===null&&(Tw(F)&&Me&&(P=P?Me+"-"+P:Me),Te.current={id:P,group:Im(F)&&(w=K==null?void 0:K.group)!==null&&w!==void 0?w:Ad()});var He=n.useMemo(function(){return r.__assign(r.__assign({},Te.current),{forceRender:ve})},[xe]);return c.createElement(Se.Provider,{value:He},S)},Iv=0,dc=function(O){var B=O.children;return c.useEffect(function(){i.warning(!1,"AnimateSharedLayout is deprecated: https://www.framer.com/docs/guide-upgrade/##shared-layout-animations")},[]),c.createElement(ou,{id:re(function(){return"asl-".concat(Iv++)})},B)};function Lv(O){var B=O.children,w=O.isValidProp,S=r.__rest(O,["children","isValidProp"]);w&&dl(w),S=r.__assign(r.__assign({},n.useContext(M)),S),S.isStatic=re(function(){return S.isStatic});var P=n.useMemo(function(){return S},[JSON.stringify(S.transition),S.transformPagePoint,S.reducedMotion]);return c.createElement(M.Provider,{value:P},B)}function Lm(O){var B=O.children,w=O.features,S=O.strict,P=S===void 0?!1:S,R=r.__read(n.useState(!Bm(w)),2),N=R[1],F=n.useRef(void 0);if(!Bm(w)){var K=w.renderer,ee=r.__rest(w,["renderer"]);F.current=K,v(ee)}return n.useEffect(function(){Bm(w)&&w().then(function(oe){var ve=oe.renderer,xe=r.__rest(oe,["renderer"]);v(xe),F.current=ve,N(!0)})},[]),c.createElement(b.Provider,{value:{renderer:F.current,strict:P}},B)}function Bm(O){return typeof O=="function"}var Nm=n.createContext(null);function Bv(O,B,w,S){if(!S)return O;var P=O.findIndex(function(oe){return oe.value===B});if(P===-1)return O;var R=S>0?1:-1,N=O[P+R];if(!N)return O;var F=O[P],K=N.layout,ee=a.mix(K.min,K.max,.5);return R===1&&F.layout.max+w>ee||R===-1&&F.layout.min+w<ee?av(O,P,P+R):O}function Io(O,B){var w=O.children,S=O.as,P=S===void 0?"ul":S,R=O.axis,N=R===void 0?"y":R,F=O.onReorder,K=O.values,ee=r.__rest(O,["children","as","axis","onReorder","values"]),oe=re(function(){return Vn(P)}),ve=[],xe=n.useRef(!1);i.invariant(!!K,"Reorder.Group must be provided a values prop");var Te={axis:N,registerItem:function(Me,He){He&&ve.findIndex(function(Ze){return Me===Ze.value})===-1&&(ve.push({value:Me,layout:He[N]}),ve.sort(Nv))},updateOrder:function(Me,He,Ze){if(!xe.current){var bt=Bv(ve,Me,He,Ze);ve!==bt&&(xe.current=!0,F(bt.map(ns).filter(function(Nt){return K.indexOf(Nt)!==-1})))}}};return n.useEffect(function(){xe.current=!1}),c.createElement(oe,r.__assign({},ee,{ref:B}),c.createElement(Nm.Provider,{value:Te},w))}var hc=n.forwardRef(Io);function ns(O){return O.value}function Nv(O,B){return O.layout.min-B.layout.min}function Yn(O){var B=re(function(){return ai(O)}),w=n.useContext(M).isStatic;if(w){var S=r.__read(n.useState(O),2),P=S[1];n.useEffect(function(){return B.onChange(P)},[])}return B}var XC=function(O){return typeof O=="object"&&O.mix},Ew=function(O){return XC(O)?O.mix:void 0};function kv(){for(var O=[],B=0;B<arguments.length;B++)O[B]=arguments[B];var w=!Array.isArray(O[0]),S=w?0:-1,P=O[0+S],R=O[1+S],N=O[2+S],F=O[3+S],K=a.interpolate(R,N,r.__assign({mixer:Ew(N[0])},F));return w?K(P):K}function o3(O,B){I(function(){if(we(O))return O.onChange(B)},[B])}function fc(O,B){I(function(){var w=O.map(function(S){return S.onChange(B)});return function(){return w.forEach(function(S){return S()})}})}function Pw(O,B){var w=Yn(B()),S=function(){return w.set(B())};return S(),fc(O,function(){return f.default.update(S,!1,!0)}),w}function km(O,B,w,S){var P=typeof B=="function"?B:kv(B,w,S);return Array.isArray(O)?Fv(O,P):Fv([O],function(R){var N=r.__read(R,1),F=N[0];return P(F)})}function Fv(O,B){var w=re(function(){return[]});return Pw(O,function(){w.length=0;for(var S=O.length,P=0;P<S;P++)w[P]=O[P].get();return B(w)})}function pc(O,B){return B===void 0&&(B=0),we(O)?O:Yn(B)}function YC(O,B){var w=O.children,S=O.style,P=O.value,R=O.as,N=R===void 0?"li":R,F=O.onDrag,K=O.layout,ee=K===void 0?!0:K,oe=r.__rest(O,["children","style","value","as","onDrag","layout"]),ve=re(function(){return Vn(N)}),xe=n.useContext(Nm),Te={x:pc(S==null?void 0:S.x),y:pc(S==null?void 0:S.y)},Me=km([Te.x,Te.y],function(Ee){var ke=r.__read(Ee,2),mt=ke[0],wt=ke[1];return mt||wt?1:"unset"}),He=n.useRef(null);i.invariant(!!xe,"Reorder.Item must be a child of Reorder.Group");var Ze=xe,bt=Ze.axis,Nt=Ze.registerItem,Oe=Ze.updateOrder;return n.useEffect(function(){Nt(P,He.current)},[xe]),c.createElement(ve,r.__assign({drag:bt},oe,{dragSnapToOrigin:!0,style:r.__assign(r.__assign({},S),{x:Te.x,y:Te.y,zIndex:Me}),layout:ee,onDrag:function(Ee,ke){var mt=ke.velocity;mt[bt]&&Oe(P,Te[bt].get(),mt[bt]),F==null||F(Ee,ke)},onLayoutMeasure:function(Ee){He.current=Ee},ref:B}),w)}var KC=n.forwardRef(YC),Dw={Group:hc,Item:KC},Fm=r.__assign(r.__assign({renderer:bv},$a),$0),a3=r.__assign(r.__assign(r.__assign(r.__assign({},Fm),wC),hw),{projectionNodeConstructor:Tr});function s3(O){for(var B=[],w=1;w<arguments.length;w++)B[w-1]=arguments[w];var S=O.length;function P(){for(var R="",N=0;N<S;N++){R+=O[N];var F=B[N];F&&(R+=B[N].get())}return R}return Pw(B,P)}function JC(O,B){B===void 0&&(B={});var w=n.useContext(M).isStatic,S=n.useRef(null),P=Yn(we(O)?O.get():O);return n.useMemo(function(){return P.attach(function(R,N){return w?N(R):(S.current&&S.current.stop(),S.current=a.animate(r.__assign(r.__assign({from:P.get(),to:R,velocity:P.getVelocity()},B),{onUpdate:N})),P.get())})},[JSON.stringify(B)]),o3(O,function(R){return P.set(parseFloat(R))}),P}function QC(O){var B=Yn(O.getVelocity());return n.useEffect(function(){return O.velocityUpdateSubscribers.add(function(w){B.set(w)})},[O]),B}var Md=function(){return{scrollX:ai(0),scrollY:ai(0),scrollXProgress:ai(0),scrollYProgress:ai(0)}};function Ow(O){O===void 0&&(O={});var B=O.container,w=O.target,S=r.__rest(O,["container","target"]),P=re(Md);return I(function(){return l.scroll(function(R){var N=R.x,F=R.y;P.scrollX.set(N.current),P.scrollXProgress.set(N.progress),P.scrollY.set(F.current),P.scrollYProgress.set(F.progress)},r.__assign(r.__assign({},S),{container:(B==null?void 0:B.current)||void 0,target:(w==null?void 0:w.current)||void 0}))},[]),P}function Cd(O){return oi(!1,"useElementScroll is deprecated. Convert to useScroll({ container: ref })."),Ow({container:O})}function ZC(){return oi(!1,"useViewportScroll is deprecated. Convert to useScroll()."),Ow()}var Go=typeof performance<"u"?function(){return performance.now()}:function(){return Date.now()};function $C(O){var B=re(Go),w=n.useContext(M).isStatic;n.useEffect(function(){if(!w){var S=function(P){var R=P.timestamp;O(R-B)};return f.default.update(S,!0),function(){return s.cancelSync.update(S)}}},[O])}function eT(){var O=Yn(0);return $C(function(B){return O.set(B)}),O}function tT(){var O=!1,B=[],w=new Set,S={subscribe:function(P){return w.add(P),function(){return void w.delete(P)}},start:function(P,R){if(O){var N=[];return w.forEach(function(F){N.push(Qh(F,P,{transitionOverride:R}))}),Promise.all(N)}else return new Promise(function(F){B.push({animation:[P,R],resolve:F})})},set:function(P){return i.invariant(O,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),w.forEach(function(R){Ls(R,P)})},stop:function(){w.forEach(function(P){q1(P)})},mount:function(){return O=!0,B.forEach(function(P){var R=P.animation,N=P.resolve;S.start.apply(S,r.__spreadArray([],r.__read(R),!1)).then(N)}),function(){O=!1,S.stop()}}};return S}function rT(){var O=re(tT);return n.useEffect(O.mount,[]),O}var nT=rT;function iT(){for(var O=[],B=0;B<arguments.length;B++)O[B]=arguments[B];var w=n.useRef(0),S=r.__read(n.useState(O[w.current]),2),P=S[0],R=S[1],N=n.useCallback(function(F){w.current=typeof F!="number"?a.wrap(0,O.length,w.current+1):F,R(O[w.current])},r.__spreadArray([O.length],r.__read(O),!1));return[P,N]}function l3(O,B){var w=B===void 0?{}:B,S=w.root,P=w.margin,R=w.amount,N=w.once,F=N===void 0?!1:N,K=r.__read(n.useState(!1),2),ee=K[0],oe=K[1];return n.useEffect(function(){var ve;if(!(!O.current||F&&ee)){var xe=function(){return oe(!0),F?void 0:function(){return oe(!1)}},Te={root:(ve=S==null?void 0:S.current)!==null&&ve!==void 0?ve:void 0,margin:P,amount:R==="some"?"any":R};return l.inView(O.current,xe,Te)}},[S,O,P,F]),ee}var ba=function(){function O(){this.componentControls=new Set}return O.prototype.subscribe=function(B){var w=this;return this.componentControls.add(B),function(){return w.componentControls.delete(B)}},O.prototype.start=function(B,w){this.componentControls.forEach(function(S){S.start(B.nativeEvent||B,w)})},O}(),Rw=function(){return new ba};function u3(){return re(Rw)}function au(){return zv}function zv(O){dn.current&&(dn.current.isUpdating=!1,dn.current.blockUpdate(),O==null||O())}function Td(){var O=r.__read(jn(),2),B=O[0],w=O[1],S=au();return n.useEffect(function(){f.default.postRender(function(){return f.default.postRender(function(){return Is.current=!1})})},[w]),function(P){S(function(){Is.current=!0,B(),P()})}}function Uv(){var O=c.useCallback(function(){var B=dn.current;B&&B.resetTree()},[]);return O}var zm=function(){return{}},Iw=lf({build:function(){},measureViewportBox:wi,resetTransform:function(){},restoreTransform:function(){},removeValueFromRenderState:function(){},render:function(){},scrapeMotionValuesFromProps:zm,readValueFromInstance:function(O,B,w){return w.initialState[B]||0},makeTargetAnimatable:function(O,B){var w=B.transition,S=B.transitionEnd,P=r.__rest(B,["transition","transitionEnd"]),R=lv(P,w||{},O);return sv(O,P,R),r.__assign({transition:w,transitionEnd:S},P)}}),c3=tn({scrapeMotionValuesFromProps:zm,createRenderState:zm});function oT(O){var B=r.__read(n.useState(O),2),w=B[0],S=B[1],P=c3({},!1),R=re(function(){return Iw({props:{},visualState:P},{initialState:O})});n.useEffect(function(){return R.mount({}),R.unmount},[R]),n.useEffect(function(){R.setProps({onUpdate:function(F){S(r.__assign({},F))}})},[S,R]);var N=re(function(){return function(F){return Qh(R,F)}});return[w,N]}var aT=1e5,Lw=function(O){return O>.001?1/O:aT},Bw=!1;function Nw(O){var B=Yn(1),w=Yn(1),S=C();i.invariant(!!(O||S),"If no scale values are provided, useInvertedScale must be used within a child of another motion component."),i.warning(Bw,"useInvertedScale is deprecated and will be removed in 3.0. Use the layout prop instead."),Bw=!0,O?(B=O.scaleX||B,w=O.scaleY||w):S&&(B=S.getValue("scaleX",1),w=S.getValue("scaleY",1));var P=km(B,Lw),R=km(w,Lw);return{scaleX:P,scaleY:R}}e.AnimatePresence=Ho,e.AnimateSharedLayout=dc,e.DeprecatedLayoutGroupContext=Rv,e.DragControls=ba,e.FlatTree=Mv,e.LayoutGroup=ou,e.LayoutGroupContext=Se,e.LazyMotion=Lm,e.MotionConfig=Lv,e.MotionConfigContext=M,e.MotionContext=T,e.MotionValue=oc,e.PresenceContext=E,e.Reorder=Dw,e.SwitchLayoutGroupContext=Fe,e.addPointerEvent=pd,e.addScaleCorrector=Pe,e.animate=wv,e.animateVisualElement=Qh,e.animationControls=tT,e.animations=$a,e.calcLength=es,e.checkTargetForNewValues=sv,e.createBox=wi,e.createDomMotionComponent=Ji,e.createMotionComponent=rt,e.domAnimation=Fm,e.domMax=a3,e.filterProps=Ka,e.isBrowser=D,e.isDragActive=sm,e.isMotionValue=we,e.isValidMotionProp=on,e.m=ya,e.makeUseVisualState=tn,e.motion=Vn,e.motionValue=ai,e.resolveMotionValue=an,e.transform=kv,e.useAnimation=nT,e.useAnimationControls=rT,e.useAnimationFrame=$C,e.useCycle=iT,e.useDeprecatedAnimatedState=oT,e.useDeprecatedInvertedScale=Nw,e.useDomEvent=Vr,e.useDragControls=u3,e.useElementScroll=Cd,e.useForceUpdate=jn,e.useInView=l3,e.useInstantLayoutTransition=au,e.useInstantTransition=Td,e.useIsPresent=ev,e.useIsomorphicLayoutEffect=I,e.useMotionTemplate=s3,e.useMotionValue=Yn,e.usePresence=z1,e.useReducedMotion=W,e.useReducedMotionConfig=G,e.useResetProjection=Uv,e.useScroll=Ow,e.useSpring=JC,e.useTime=eT,e.useTransform=km,e.useUnmountEffect=lm,e.useVelocity=QC,e.useViewportScroll=ZC,e.useVisualElementContext=C,e.visualElement=lf,e.wrapHandler=Wh})(Do);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{AccordionBody:function(){return y},default:function(){return m}});var r=h(te),n=Do,i=h(gr),o=h(jo),a=h(Yt),s=Qt,l=MI,u=jt,d=qM;function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.className,x=p.children,_=f(p,["className","children"]),A=(0,l.useAccordion)(),M=A.open,T=A.animate,C=(0,u.useTheme)().accordion,E=C.styles.base;b=b??"";var D=(0,s.twMerge)((0,i.default)((0,a.default)(E.body)),b),I={unmount:{height:"0px",transition:{duration:.2,times:[.4,0,.2,1]}},mount:{height:"auto",transition:{duration:.2,times:[.4,0,.2,1]}}},k={unmount:{transition:{duration:.3,ease:"linear"}},mount:{transition:{duration:.3,ease:"linear"}}},L=(0,o.default)(k,T);return r.default.createElement(n.LazyMotion,{features:n.domAnimation},r.default.createElement(n.m.div,{className:"overflow-hidden",initial:"unmount",exit:"unmount",animate:M?"mount":"unmount",variants:I},r.default.createElement(n.m.div,c({},_,{ref:v,className:D,initial:"unmount",exit:"unmount",animate:M?"mount":"unmount",variants:L}),x)))});y.propTypes={className:d.propTypesClassName,children:d.propTypesChildren},y.displayName="MaterialTailwind.AccordionBody";var m=y})(Gde);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Accordion:function(){return m},AccordionHeader:function(){return u.AccordionHeader},AccordionBody:function(){return d.AccordionBody},useAccordion:function(){return s.useAccordion},default:function(){return p}});var r=f(te),n=f(gr),i=Qt,o=f(Yt),a=jt,s=MI,l=qM,u=Hde,d=Gde;function c(v,b,x){return b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.open,_=v.icon,A=v.animate,M=v.className,T=v.disabled,C=v.children,E=g(v,["open","icon","animate","className","disabled","children"]),D=(0,a.useTheme)().accordion,I=D.defaultProps,k=D.styles.base;_=_??I.icon,A=A??I.animate,M=M??I.className,T=T??I.disabled;var L=(0,i.twMerge)((0,n.default)((0,o.default)(k.container),c({},(0,o.default)(k.disabled),T)),M),U=r.default.useMemo(function(){return{open:x,icon:_,animate:A,disabled:T}},[x,_,A,T]);return r.default.createElement(s.AccordionContextProvider,{value:U},r.default.createElement("div",h({},E,{ref:b,className:L}),C))});m.propTypes={open:l.propTypesOpen,icon:l.propTypesIcon,animate:l.propTypesAnimate,disabled:l.propTypesDisabled,className:l.propTypesClassName,children:l.propTypesChildren},m.displayName="MaterialTailwind.Accordion";var p=Object.assign(m,{Header:u.AccordionHeader,Body:d.AccordionBody})})(_ue);var hfe={},qn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});function t(n,i,o){var a=n.findIndex(function(s){return s===i});return a>=0?i:o}var r=t})(qn);var kI={},O1=class{constructor(){this.x=0,this.y=0,this.z=0}findFurthestPoint(t,r,n,i,o,a){return this.x=t-n>r/2?0:r,this.y=i-a>o/2?0:o,this.z=Math.hypot(this.x-(t-n),this.y-(i-a)),this.z}appyStyles(t,r,n,i,o){t.classList.add("ripple"),t.style.backgroundColor=r==="dark"?"rgba(0,0,0, 0.2)":"rgba(255,255,255, 0.3)",t.style.borderRadius="50%",t.style.pointerEvents="none",t.style.position="absolute",t.style.left=o.clientX-n.left-i+"px",t.style.top=o.clientY-n.top-i+"px",t.style.width=t.style.height=i*2+"px"}applyAnimation(t){t.animate([{transform:"scale(0)",opacity:1},{transform:"scale(1.5)",opacity:0}],{duration:500,easing:"linear"})}create(t,r){const n=t.currentTarget;n.style.position="relative",n.style.overflow="hidden";const i=n.getBoundingClientRect(),o=this.findFurthestPoint(t.clientX,n.offsetWidth,i.left,t.clientY,n.offsetHeight,i.top),a=document.createElement("span");this.appyStyles(a,r,i,o,t),this.applyAnimation(a),n.appendChild(a),setTimeout(()=>a.remove(),500)}};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{IconButton:function(){return y},default:function(){return m}});var r=h(te),n=h(Kt),i=h(O1),o=h(gr),a=Qt,s=h(qn),l=h(Yt),u=jt,d=z0;function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.variant,x=p.size,_=p.color,A=p.ripple,M=p.className,T=p.children;p.fullWidth;var C=f(p,["variant","size","color","ripple","className","children","fullWidth"]),E=(0,u.useTheme)().iconButton,D=E.valid,I=E.defaultProps,k=E.styles,L=k.base,U=k.variants,W=k.sizes;b=b??I.variant,x=x??I.size,_=_??I.color,A=A??I.ripple,M=M??I.className;var G=A!==void 0&&new i.default,z=(0,l.default)(L),V=(0,l.default)(U[(0,s.default)(D.variants,b,"filled")][(0,s.default)(D.colors,_,"gray")]),j=(0,l.default)(W[(0,s.default)(D.sizes,x,"md")]),H=(0,a.twMerge)((0,o.default)(z,j,V),M);return r.default.createElement("button",c({},C,{ref:v,className:H,type:C.type||"button",onMouseDown:function(Y){var Q=C==null?void 0:C.onMouseDown;return A&&G.create(Y,(b==="filled"||b==="gradient")&&_!=="white"?"light":"dark"),typeof Q=="function"&&Q(Y)}}),r.default.createElement("span",{className:"absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2"},T))});y.propTypes={variant:n.default.oneOf(d.propTypesVariant),size:n.default.oneOf(d.propTypesSize),color:n.default.oneOf(d.propTypesColor),ripple:d.propTypesRipple,className:d.propTypesClassName,children:d.propTypesChildren},y.displayName="MaterialTailwind.IconButton";var m=y})(kI);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(b,x){for(var _ in x)Object.defineProperty(b,_,{enumerable:!0,get:x[_]})}t(e,{Alert:function(){return p},default:function(){return v}});var r=g(te),n=g(Kt),i=Do,o=g(gr),a=g(jo),s=Qt,l=g(qn),u=g(Yt),d=jt,c=RH,h=g(kI);function f(){return f=Object.assign||function(b){for(var x=1;x<arguments.length;x++){var _=arguments[x];for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&(b[A]=_[A])}return b},f.apply(this,arguments)}function g(b){return b&&b.__esModule?b:{default:b}}function y(b,x){if(b==null)return{};var _=m(b,x),A,M;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(b);for(M=0;M<T.length;M++)A=T[M],!(x.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(b,A)&&(_[A]=b[A])}return _}function m(b,x){if(b==null)return{};var _={},A=Object.keys(b),M,T;for(T=0;T<A.length;T++)M=A[T],!(x.indexOf(M)>=0)&&(_[M]=b[M]);return _}var p=r.default.forwardRef(function(b,x){var _=b.variant,A=b.color,M=b.icon,T=b.open,C=b.action,E=b.onClose,D=b.animate,I=b.className,k=b.children,L=y(b,["variant","color","icon","open","action","onClose","animate","className","children"]),U=(0,d.useTheme)().alert,W=U.defaultProps,G=U.valid,z=U.styles,V=z.base,j=z.variants;_=_??W.variant,A=A??W.color,I=I??W.className,D=D??W.animate,T=T??W.open,C=C??W.action,E=E??W.onClose;var H=(0,u.default)(V.alert),Y=(0,u.default)(V.action),Q=(0,u.default)(j[(0,l.default)(G.variants,_,"filled")][(0,l.default)(G.colors,A,"gray")]),$=(0,s.twMerge)((0,o.default)(H,Q),I),ne=(0,o.default)(Y),Z={unmount:{opacity:0},mount:{opacity:1}},ce=(0,a.default)(Z,D),ae=r.default.createElement("div",{className:"shrink-0"},M),ie=i.AnimatePresence;return r.default.createElement(i.LazyMotion,{features:i.domAnimation},r.default.createElement(ie,null,T&&r.default.createElement(i.m.div,f({},L,{ref:x,role:"alert",className:"".concat($," flex"),initial:"unmount",exit:"unmount",animate:T?"mount":"unmount",variants:ce}),M&&ae,r.default.createElement("div",{className:"".concat(M?"ml-3":""," mr-12")},k),E&&!C&&r.default.createElement(h.default,{onClick:E,size:"sm",variant:"text",color:_==="outlined"||_==="ghost"?A:"white",className:ne},r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-6 w-6",strokeWidth:2},r.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))),C||null)))});p.propTypes={variant:n.default.oneOf(c.propTypesVariant),color:n.default.oneOf(c.propTypesColor),icon:c.propTypesIcon,open:c.propTypesOpen,action:c.propTypesAction,onClose:c.propTypesOnClose,animate:c.propTypesAnimate,className:c.propTypesClassName,children:c.propTypesChildren},p.displayName="MaterialTailwind.Alert";var v=p})(hfe);var ffe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{Avatar:function(){return y},default:function(){return m}});var r=h(te),n=h(Kt),i=h(gr),o=Qt,a=h(qn),s=h(Yt),l=jt,u=IH;function d(p,v,b){return v in p?Object.defineProperty(p,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):p[v]=b,p}function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.variant,x=p.size,_=p.className,A=p.color,M=p.withBorder,T=f(p,["variant","size","className","color","withBorder"]),C=(0,l.useTheme)().avatar,E=C.valid,D=C.defaultProps,I=C.styles,k=I.base,L=I.variants,U=I.sizes,W=I.borderColor;b=b??D.variant,x=x??D.size,_=_??D.className,M=M??D.withBorder,A=A??D.color;var G=(0,s.default)(L[(0,a.default)(E.variants,b,"rounded")]),z=(0,s.default)(U[(0,a.default)(E.sizes,x,"md")]),V=(0,s.default)(W[(0,a.default)(E.colors,A,"gray")]),j,H=(0,o.twMerge)((0,i.default)((0,s.default)(k.initial),G,z,(j={},d(j,(0,s.default)(k.withBorder),M),d(j,V,M),j)),_);return r.default.createElement("img",c({},T,{ref:v,className:H}))});y.propTypes={variant:n.default.oneOf(u.propTypesVariant),size:n.default.oneOf(u.propTypesSize),className:u.propTypesClassName,withBorder:u.propTypesWithBorder,color:n.default.oneOf(u.propTypesColor)},y.displayName="MaterialTailwind.Avatar";var m=y})(ffe);var pfe={},mfe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,u){for(var d in u)Object.defineProperty(l,d,{enumerable:!0,get:u[d]})}t(e,{propTypesSeparator:function(){return i},propTypesFullWidth:function(){return o},propTypesClassName:function(){return a},propTypesChildren:function(){return s}});var r=n(Kt);function n(l){return l&&l.__esModule?l:{default:l}}var i=r.default.node,o=r.default.bool,a=r.default.string,s=r.default.node.isRequired})(mfe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{Breadcrumbs:function(){return y},default:function(){return m}});var r=h(te),n=d(gr),i=Qt,o=d(Yt),a=jt,s=mfe;function l(p,v,b){return v in p?Object.defineProperty(p,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):p[v]=b,p}function u(){return u=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},u.apply(this,arguments)}function d(p){return p&&p.__esModule?p:{default:p}}function c(p){if(typeof WeakMap!="function")return null;var v=new WeakMap,b=new WeakMap;return(c=function(x){return x?b:v})(p)}function h(p,v){if(!v&&p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var b=c(v);if(b&&b.has(p))return b.get(p);var x={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in p)if(A!=="default"&&Object.prototype.hasOwnProperty.call(p,A)){var M=_?Object.getOwnPropertyDescriptor(p,A):null;M&&(M.get||M.set)?Object.defineProperty(x,A,M):x[A]=p[A]}return x.default=p,b&&b.set(p,x),x}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=(0,r.forwardRef)(function(p,v){var b=p.separator,x=p.fullWidth,_=p.className,A=p.children,M=f(p,["separator","fullWidth","className","children"]),T=(0,a.useTheme)().breadcrumbs,C=T.defaultProps,E=T.styles.base;b=b??C.separator,x=x??C.fullWidth,_=_??C.className;var D=(0,n.default)((0,o.default)(E.root.initial),l({},(0,o.default)(E.root.fullWidth),x)),I=(0,i.twMerge)((0,n.default)((0,o.default)(E.list)),_),k=(0,n.default)((0,o.default)(E.item.initial)),L=(0,n.default)((0,o.default)(E.separator));return r.default.createElement("nav",{"aria-label":"breadcrumb",className:D},r.default.createElement("ol",u({},M,{ref:v,className:I}),r.Children.map(A,function(U,W){if((0,r.isValidElement)(U)){var G;return r.default.createElement("li",{className:(0,n.default)(k,l({},(0,o.default)(E.item.disabled),U==null||(G=U.props)===null||G===void 0?void 0:G.disabled))},U,W!==r.Children.count(A)-1&&r.default.createElement("span",{className:L},b))}return null})))});y.propTypes={separator:s.propTypesSeparator,fullWidth:s.propTypesFullWidth,className:s.propTypesClassName,children:s.propTypesChildren},y.displayName="MaterialTailwind.Breadcrumbs";var m=y})(pfe);var gfe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Button:function(){return m},default:function(){return p}});var r=f(te),n=f(Kt),i=f(O1),o=f(gr),a=Qt,s=f(qn),l=f(Yt),u=jt,d=z0;function c(v,b,x){return b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.variant,_=v.size,A=v.color,M=v.fullWidth,T=v.ripple,C=v.className,E=v.children,D=g(v,["variant","size","color","fullWidth","ripple","className","children"]),I=(0,u.useTheme)().button,k=I.valid,L=I.defaultProps,U=I.styles,W=U.base,G=U.variants,z=U.sizes;x=x??L.variant,_=_??L.size,A=A??L.color,M=M??L.fullWidth,T=T??L.ripple,C=C??L.className;var V=T!==void 0&&new i.default,j=(0,l.default)(W.initial),H=(0,l.default)(G[(0,s.default)(k.variants,x,"filled")][(0,s.default)(k.colors,A,"gray")]),Y=(0,l.default)(z[(0,s.default)(k.sizes,_,"md")]),Q=(0,a.twMerge)((0,o.default)(j,Y,H,c({},(0,l.default)(W.fullWidth),M)),C);return r.default.createElement("button",h({},D,{ref:b,className:Q,type:D.type||"button",onMouseDown:function($){var ne=D==null?void 0:D.onMouseDown;return T&&V.create($,(x==="filled"||x==="gradient")&&A!=="white"?"light":"dark"),typeof ne=="function"&&ne($)}}),E)});m.propTypes={variant:n.default.oneOf(d.propTypesVariant),size:n.default.oneOf(d.propTypesSize),color:n.default.oneOf(d.propTypesColor),fullWidth:d.propTypesFullWidth,ripple:d.propTypesRipple,className:d.propTypesClassName,children:d.propTypesChildren},m.displayName="MaterialTailwind.Button";var p=m})(gfe);var vfe={},yfe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{CardHeader:function(){return y},default:function(){return m}});var r=h(te),n=h(Kt),i=h(gr),o=Qt,a=h(qn),s=h(Yt),l=jt,u=U0;function d(p,v,b){return v in p?Object.defineProperty(p,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):p[v]=b,p}function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.variant,x=p.color,_=p.shadow,A=p.floated,M=p.className,T=p.children,C=f(p,["variant","color","shadow","floated","className","children"]),E=(0,l.useTheme)().cardHeader,D=E.defaultProps,I=E.styles,k=E.valid,L=I.base,U=I.variants;b=b??D.variant,x=x??D.color,_=_??D.shadow,A=A??D.floated,M=M??D.className;var W=(0,s.default)(L.initial),G=(0,s.default)(U[(0,a.default)(k.variants,b,"filled")][(0,a.default)(k.colors,x,"white")]),z=(0,o.twMerge)((0,i.default)(W,G,d({},(0,s.default)(L.shadow),_),d({},(0,s.default)(L.floated),A)),M);return r.default.createElement("div",c({},C,{ref:v,className:z}),T)});y.propTypes={variant:n.default.oneOf(u.propTypesVariant),color:n.default.oneOf(u.propTypesColor),shadow:u.propTypesShadow,floated:u.propTypesFloated,className:u.propTypesClassName,children:u.propTypesChildren},y.displayName="MaterialTailwind.CardHeader";var m=y})(yfe);var bfe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,y){for(var m in y)Object.defineProperty(g,m,{enumerable:!0,get:y[m]})}t(e,{CardBody:function(){return h},default:function(){return f}});var r=u(te),n=u(gr),i=Qt,o=u(Yt),a=jt,s=U0;function l(){return l=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var m=arguments[y];for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(g[p]=m[p])}return g},l.apply(this,arguments)}function u(g){return g&&g.__esModule?g:{default:g}}function d(g,y){if(g==null)return{};var m=c(g,y),p,v;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(g);for(v=0;v<b.length;v++)p=b[v],!(y.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(g,p)&&(m[p]=g[p])}return m}function c(g,y){if(g==null)return{};var m={},p=Object.keys(g),v,b;for(b=0;b<p.length;b++)v=p[b],!(y.indexOf(v)>=0)&&(m[v]=g[v]);return m}var h=r.default.forwardRef(function(g,y){var m=g.className,p=g.children,v=d(g,["className","children"]),b=(0,a.useTheme)().cardBody,x=b.defaultProps,_=b.styles.base;m=m??x.className;var A=(0,i.twMerge)((0,n.default)((0,o.default)(_)),m);return r.default.createElement("div",l({},v,{ref:y,className:A}),p)});h.propTypes={className:s.propTypesClassName,children:s.propTypesChildren},h.displayName="MaterialTailwind.CardBody";var f=h})(bfe);var xfe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(y,m){for(var p in m)Object.defineProperty(y,p,{enumerable:!0,get:m[p]})}t(e,{CardFooter:function(){return f},default:function(){return g}});var r=d(te),n=d(gr),i=Qt,o=d(Yt),a=jt,s=U0;function l(y,m,p){return m in y?Object.defineProperty(y,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[m]=p,y}function u(){return u=Object.assign||function(y){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(y[v]=p[v])}return y},u.apply(this,arguments)}function d(y){return y&&y.__esModule?y:{default:y}}function c(y,m){if(y==null)return{};var p=h(y,m),v,b;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);for(b=0;b<x.length;b++)v=x[b],!(m.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(y,v)&&(p[v]=y[v])}return p}function h(y,m){if(y==null)return{};var p={},v=Object.keys(y),b,x;for(x=0;x<v.length;x++)b=v[x],!(m.indexOf(b)>=0)&&(p[b]=y[b]);return p}var f=r.default.forwardRef(function(y,m){var p=y.divider,v=y.className,b=y.children,x=c(y,["divider","className","children"]),_=(0,a.useTheme)().cardFooter,A=_.defaultProps,M=_.styles.base;v=v??A.className,p=p??A.divider;var T=(0,i.twMerge)((0,n.default)((0,o.default)(M.initial),l({},(0,o.default)(M.divider),p)),v);return r.default.createElement("div",u({},x,{ref:m,className:T}),b)});f.propTypes={divider:s.propTypesDivider,className:s.propTypesClassName,children:s.propTypesChildren},f.displayName="MaterialTailwind.CardFooter";var g=f})(xfe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,_){for(var A in _)Object.defineProperty(x,A,{enumerable:!0,get:_[A]})}t(e,{Card:function(){return v},CardHeader:function(){return u.CardHeader},CardBody:function(){return d.CardBody},CardFooter:function(){return c.CardFooter},default:function(){return b}});var r=y(te),n=y(Kt),i=y(gr),o=Qt,a=y(qn),s=y(Yt),l=jt,u=yfe,d=bfe,c=xfe,h=U0;function f(x,_,A){return _ in x?Object.defineProperty(x,_,{value:A,enumerable:!0,configurable:!0,writable:!0}):x[_]=A,x}function g(){return g=Object.assign||function(x){for(var _=1;_<arguments.length;_++){var A=arguments[_];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(x[M]=A[M])}return x},g.apply(this,arguments)}function y(x){return x&&x.__esModule?x:{default:x}}function m(x,_){if(x==null)return{};var A=p(x,_),M,T;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(x);for(T=0;T<C.length;T++)M=C[T],!(_.indexOf(M)>=0)&&Object.prototype.propertyIsEnumerable.call(x,M)&&(A[M]=x[M])}return A}function p(x,_){if(x==null)return{};var A={},M=Object.keys(x),T,C;for(C=0;C<M.length;C++)T=M[C],!(_.indexOf(T)>=0)&&(A[T]=x[T]);return A}var v=r.default.forwardRef(function(x,_){var A=x.variant,M=x.color,T=x.shadow,C=x.className,E=x.children,D=m(x,["variant","color","shadow","className","children"]),I=(0,l.useTheme)().card,k=I.defaultProps,L=I.styles,U=I.valid,W=L.base,G=L.variants;A=A??k.variant,M=M??k.color,T=T??k.shadow,C=C??k.className;var z=(0,s.default)(W.initial),V=(0,s.default)(G[(0,a.default)(U.variants,A,"filled")][(0,a.default)(U.colors,M,"white")]),j=(0,o.twMerge)((0,i.default)(z,V,f({},(0,s.default)(W.shadow),T)),C);return r.default.createElement("div",g({},D,{ref:_,className:j}),E)});v.propTypes={variant:n.default.oneOf(h.propTypesVariant),color:n.default.oneOf(h.propTypesColor),shadow:h.propTypesShadow,className:h.propTypesClassName,children:h.propTypesChildren},v.displayName="MaterialTailwind.Card";var b=Object.assign(v,{Header:u.CardHeader,Body:d.CardBody,Footer:c.CardFooter})})(vfe);var wfe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Checkbox:function(){return m},default:function(){return p}});var r=f(te),n=f(Kt),i=f(O1),o=f(gr),a=Qt,s=f(qn),l=f(Yt),u=jt,d=V0;function c(v,b,x){return b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.color,_=v.label,A=v.icon,M=v.ripple,T=v.className,C=v.disabled,E=v.containerProps,D=v.labelProps,I=v.iconProps,k=v.inputRef,L=g(v,["color","label","icon","ripple","className","disabled","containerProps","labelProps","iconProps","inputRef"]),U=(0,u.useTheme)().checkbox,W=U.defaultProps,G=U.valid,z=U.styles,V=z.base,j=z.colors,H=r.default.useId();x=x??W.color,_=_??W.label,A=A??W.icon,M=M??W.ripple,T=T??W.className,C=C??W.disabled,E=E??W.containerProps,D=D??W.labelProps,I=I??W.iconProps;var Y=M!==void 0&&new i.default,Q=(0,o.default)((0,l.default)(V.root),c({},(0,l.default)(V.disabled),C)),$=(0,a.twMerge)((0,o.default)((0,l.default)(V.container)),E==null?void 0:E.className),ne=(0,a.twMerge)((0,o.default)((0,l.default)(V.input),(0,l.default)(j[(0,s.default)(G.colors,x,"gray")])),T),Z=(0,a.twMerge)((0,o.default)((0,l.default)(V.label)),D==null?void 0:D.className),ce=(0,a.twMerge)((0,o.default)((0,l.default)(V.icon)),I==null?void 0:I.className);return r.default.createElement("div",{ref:b,className:Q},r.default.createElement("label",h({},E,{className:$,htmlFor:L.id||H,onMouseDown:function(ae){var ie=E==null?void 0:E.onMouseDown;return M&&Y.create(ae,"dark"),typeof ie=="function"&&ie(ae)}}),r.default.createElement("input",h({},L,{ref:k,type:"checkbox",disabled:C,className:ne,id:L.id||H})),r.default.createElement("span",{className:ce},A||r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor",strokeWidth:1},r.default.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})))),_&&r.default.createElement("label",h({},D,{className:Z,htmlFor:L.id||H}),_))});m.propTypes={color:n.default.oneOf(d.propTypesColor),label:d.propTypesLabel,icon:d.propTypesIcon,ripple:d.propTypesRipple,className:d.propTypesClassName,disabled:d.propTypesDisabled,containerProps:d.propTypesObject,labelProps:d.propTypesObject},m.displayName="MaterialTailwind.Checkbox";var p=m})(wfe);var _fe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(b,x){for(var _ in x)Object.defineProperty(b,_,{enumerable:!0,get:x[_]})}t(e,{Chip:function(){return p},default:function(){return v}});var r=g(te),n=g(Kt),i=Do,o=g(gr),a=g(jo),s=Qt,l=g(qn),u=g(Yt),d=jt,c=UH,h=g(kI);function f(){return f=Object.assign||function(b){for(var x=1;x<arguments.length;x++){var _=arguments[x];for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&(b[A]=_[A])}return b},f.apply(this,arguments)}function g(b){return b&&b.__esModule?b:{default:b}}function y(b,x){if(b==null)return{};var _=m(b,x),A,M;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(b);for(M=0;M<T.length;M++)A=T[M],!(x.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(b,A)&&(_[A]=b[A])}return _}function m(b,x){if(b==null)return{};var _={},A=Object.keys(b),M,T;for(T=0;T<A.length;T++)M=A[T],!(x.indexOf(M)>=0)&&(_[M]=b[M]);return _}var p=r.default.forwardRef(function(b,x){var _=b.variant,A=b.size,M=b.color,T=b.icon,C=b.open,E=b.onClose,D=b.action,I=b.animate,k=b.className,L=b.value,U=y(b,["variant","size","color","icon","open","onClose","action","animate","className","value"]),W=(0,d.useTheme)().chip,G=W.defaultProps,z=W.valid,V=W.styles,j=V.base,H=V.variants,Y=V.sizes;_=_??G.variant,A=A??G.size,M=M??G.color,k=k??G.className,I=I??G.animate,C=C??G.open,D=D??G.action,E=E??G.onClose;var Q=(0,u.default)(j.chip),$=(0,u.default)(j.action),ne=(0,u.default)(j.icon),Z=(0,u.default)(H[(0,l.default)(z.variants,_,"filled")][(0,l.default)(z.colors,M,"gray")]),ce=(0,u.default)(Y[(0,l.default)(z.sizes,A,"md")].chip),ae=(0,u.default)(Y[(0,l.default)(z.sizes,A,"md")].action),ie=(0,u.default)(Y[(0,l.default)(z.sizes,A,"md")].icon),le=(0,s.twMerge)((0,o.default)(Q,Z,ce),k),se=(0,o.default)($,ae),re=(0,o.default)(ne,ie),ye=(0,o.default)({"ml-4":T&&A==="sm","ml-[18px]":T&&A==="md","ml-5":T&&A==="lg","mr-5":E}),be={unmount:{opacity:0},mount:{opacity:1}},_e=(0,a.default)(be,I),Se=r.default.createElement("div",{className:re},T),Fe=i.AnimatePresence;return r.default.createElement(i.LazyMotion,{features:i.domAnimation},r.default.createElement(Fe,null,C&&r.default.createElement(i.m.div,f({},U,{ref:x,className:le,initial:"unmount",exit:"unmount",animate:C?"mount":"unmount",variants:_e}),T&&Se,r.default.createElement("span",{className:ye},L),E&&!D&&r.default.createElement(h.default,{onClick:E,size:"sm",variant:"text",color:_==="outlined"||_==="ghost"?M:"white",className:se},r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:(0,o.default)({"h-3.5 w-3.5":A==="sm","h-4 w-4":A==="md","h-5 w-5":A==="lg"}),strokeWidth:2},r.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))),D||null)))});p.propTypes={variant:n.default.oneOf(c.propTypesVariant),size:n.default.oneOf(c.propTypesSize),color:n.default.oneOf(c.propTypesColor),icon:c.propTypesIcon,open:c.propTypesOpen,onClose:c.propTypesOnClose,action:c.propTypesAction,animate:c.propTypesAnimate,className:c.propTypesClassName,value:c.propTypesValue},p.displayName="MaterialTailwind.Chip";var v=p})(_fe);var Sfe={},ktt=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xy=new WeakMap,KP=new WeakMap,JP={},ok=0,Afe=function(e){return e&&(e.host||Afe(e.parentNode))},Ftt=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Afe(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},ztt=function(e,t,r,n){var i=Ftt(t,Array.isArray(e)?e:[e]);JP[r]||(JP[r]=new WeakMap);var o=JP[r],a=[],s=new Set,l=new Set(i),u=function(c){!c||s.has(c)||(s.add(c),u(c.parentNode))};i.forEach(u);var d=function(c){!c||l.has(c)||Array.prototype.forEach.call(c.children,function(h){if(s.has(h))d(h);else{var f=h.getAttribute(n),g=f!==null&&f!=="false",y=(Xy.get(h)||0)+1,m=(o.get(h)||0)+1;Xy.set(h,y),o.set(h,m),a.push(h),y===1&&g&&KP.set(h,!0),m===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}})};return d(t),s.clear(),ok++,function(){a.forEach(function(c){var h=Xy.get(c)-1,f=o.get(c)-1;Xy.set(c,h),o.set(c,f),h||(KP.has(c)||c.removeAttribute(n),KP.delete(c)),f||c.removeAttribute(r)}),ok--,ok||(Xy=new WeakMap,Xy=new WeakMap,KP=new WeakMap,JP={})}},Utt=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||ktt(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),ztt(n,i,r,"aria-hidden")):function(){return null}};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Vtt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],TU=Vtt.join(","),Mfe=typeof Element>"u",QA=Mfe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,FO=!Mfe&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},zO=function e(t,r){var n;r===void 0&&(r=!0);var i=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),o=i===""||i==="true",a=o||r&&t&&e(t.parentNode);return a},jtt=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},Htt=function(t,r,n){if(zO(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(TU));return r&&QA.call(t,TU)&&i.unshift(t),i=i.filter(n),i},Gtt=function e(t,r,n){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!zO(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),l=s.length?s:a.children,u=e(l,!0,n);n.flatten?i.push.apply(i,u):i.push({scopeParent:a,candidates:u})}else{var d=QA.call(a,TU);d&&n.filter(a)&&(r||!t.includes(a))&&i.push(a);var c=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),h=!zO(c,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(c&&h){var f=e(c===!0?a.children:c.children,!0,n);n.flatten?i.push.apply(i,f):i.push({scopeParent:a,candidates:f})}else o.unshift.apply(o,a.children)}}return i},Cfe=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Tfe=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||jtt(t))&&!Cfe(t)?0:t.tabIndex},Wtt=function(t,r){var n=Tfe(t);return n<0&&r&&!Cfe(t)?0:n},qtt=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},Efe=function(t){return t.tagName==="INPUT"},Xtt=function(t){return Efe(t)&&t.type==="hidden"},Ytt=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},Ktt=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},Jtt=function(t){if(!t.name)return!0;var r=t.form||FO(t),n=function(s){return r.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var o=Ktt(i,t.form);return!o||o===t},Qtt=function(t){return Efe(t)&&t.type==="radio"},Ztt=function(t){return Qtt(t)&&!Jtt(t)},$tt=function(t){var r,n=t&&FO(t),i=(r=n)===null||r===void 0?void 0:r.host,o=!1;if(n&&n!==t){var a,s,l;for(o=!!((a=i)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(i)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!o&&i;){var u,d,c;n=FO(i),i=(u=n)===null||u===void 0?void 0:u.host,o=!!((d=i)!==null&&d!==void 0&&(c=d.ownerDocument)!==null&&c!==void 0&&c.contains(i))}}return o},CQ=function(t){var r=t.getBoundingClientRect(),n=r.width,i=r.height;return n===0&&i===0},ert=function(t,r){var n=r.displayCheck,i=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=QA.call(t,"details>summary:first-of-type"),a=o?t.parentElement:t;if(QA.call(a,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof i=="function"){for(var s=t;t;){var l=t.parentElement,u=FO(t);if(l&&!l.shadowRoot&&i(l)===!0)return CQ(t);t.assignedSlot?t=t.assignedSlot:!l&&u!==t.ownerDocument?t=u.host:t=l}t=s}if($tt(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return CQ(t);return!1},trt=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var i=r.children.item(n);if(i.tagName==="LEGEND")return QA.call(r,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}r=r.parentElement}return!1},rrt=function(t,r){return!(r.disabled||zO(r)||Xtt(r)||ert(r,t)||Ytt(r)||trt(r))},TQ=function(t,r){return!(Ztt(r)||Tfe(r)<0||!rrt(t,r))},nrt=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},irt=function e(t){var r=[],n=[];return t.forEach(function(i,o){var a=!!i.scopeParent,s=a?i.scopeParent:i,l=Wtt(s,a),u=a?e(i.candidates):s;l===0?a?r.push.apply(r,u):r.push(s):n.push({documentOrder:o,tabIndex:l,item:i,isScope:a,content:u})}),n.sort(qtt).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(r)},UO=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Gtt([t],r.includeContainer,{filter:TQ.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:nrt}):n=Htt(t,r.includeContainer,TQ.bind(null,r)),irt(n)};const Pfe=["top","right","bottom","left"],EQ=["start","end"],PQ=Pfe.reduce((e,t)=>e.concat(t,t+"-"+EQ[0],t+"-"+EQ[1]),[]),Xu=Math.min,ta=Math.max,VO=Math.round,QP=Math.floor,qp=e=>({x:e,y:e}),ort={left:"right",right:"left",bottom:"top",top:"bottom"},art={start:"end",end:"start"};function EU(e,t,r){return ta(e,Xu(t,r))}function Yu(e,t){return typeof e=="function"?e(t):e}function ll(e){return e.split("-")[0]}function Vu(e){return e.split("-")[1]}function mG(e){return e==="x"?"y":"x"}function gG(e){return e==="y"?"height":"width"}function H0(e){return["top","bottom"].includes(ll(e))?"y":"x"}function vG(e){return mG(H0(e))}function Dfe(e,t,r){r===void 0&&(r=!1);const n=Vu(e),i=vG(e),o=gG(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=HO(a)),[a,HO(a)]}function srt(e){const t=HO(e);return[jO(e),t,jO(t)]}function jO(e){return e.replace(/start|end/g,t=>art[t])}function lrt(e,t,r){const n=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?o:a;default:return[]}}function urt(e,t,r,n){const i=Vu(e);let o=lrt(ll(e),r==="start",n);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(jO)))),o}function HO(e){return e.replace(/left|right|bottom|top/g,t=>ort[t])}function crt(e){return{top:0,right:0,bottom:0,left:0,...e}}function yG(e){return typeof e!="number"?crt(e):{top:e,right:e,bottom:e,left:e}}function $x(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function DQ(e,t,r){let{reference:n,floating:i}=e;const o=H0(t),a=vG(t),s=gG(a),l=ll(t),u=o==="y",d=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2,h=n[s]/2-i[s]/2;let f;switch(l){case"top":f={x:d,y:n.y-i.height};break;case"bottom":f={x:d,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:c};break;case"left":f={x:n.x-i.width,y:c};break;default:f={x:n.x,y:n.y}}switch(Vu(t)){case"start":f[a]-=h*(r&&u?-1:1);break;case"end":f[a]+=h*(r&&u?-1:1);break}return f}const drt=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:c}=DQ(u,n,l),h=n,f={},g=0;for(let y=0;y<s.length;y++){const{name:m,fn:p}=s[y],{x:v,y:b,data:x,reset:_}=await p({x:d,y:c,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:u,platform:a,elements:{reference:e,floating:t}});if(d=v??d,c=b??c,f={...f,[m]:{...f[m],...x}},_&&g<=50){g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(u=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:d,y:c}=DQ(u,h,l)),y=-1;continue}}return{x:d,y:c,placement:h,strategy:i,middlewareData:f}};async function Qc(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:c="floating",altBoundary:h=!1,padding:f=0}=Yu(t,e),g=yG(f),m=s[h?c==="floating"?"reference":"floating":c],p=$x(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(m)))==null||r?m:m.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:l})),v=c==="floating"?{...a.floating,x:n,y:i}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),x=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},_=$x(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:b,strategy:l}):v);return{top:(p.top-_.top+g.top)/x.y,bottom:(_.bottom-p.bottom+g.bottom)/x.y,left:(p.left-_.left+g.left)/x.x,right:(_.right-p.right+g.right)/x.x}}const OQ=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:u,padding:d=0}=Yu(e,t)||{};if(u==null)return{};const c=yG(d),h={x:r,y:n},f=vG(i),g=gG(f),y=await a.getDimensions(u),m=f==="y",p=m?"top":"left",v=m?"bottom":"right",b=m?"clientHeight":"clientWidth",x=o.reference[g]+o.reference[f]-h[f]-o.floating[g],_=h[f]-o.reference[f],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let M=A?A[b]:0;(!M||!await(a.isElement==null?void 0:a.isElement(A)))&&(M=s.floating[b]||o.floating[g]);const T=x/2-_/2,C=M/2-y[g]/2-1,E=Xu(c[p],C),D=Xu(c[v],C),I=E,k=M-y[g]-D,L=M/2-y[g]/2+T,U=EU(I,L,k),W=!l.arrow&&Vu(i)!=null&&L!=U&&o.reference[g]/2-(L<I?E:D)-y[g]/2<0,G=W?L<I?L-I:L-k:0;return{[f]:h[f]+G,data:{[f]:U,centerOffset:L-U-G,...W&&{alignmentOffset:G}},reset:W}}});function hrt(e,t,r){return(e?[...r.filter(i=>Vu(i)===e),...r.filter(i=>Vu(i)!==e)]:r.filter(i=>ll(i)===i)).filter(i=>e?Vu(i)===e||(t?jO(i)!==i:!1):!0)}const frt=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var r,n,i;const{rects:o,middlewareData:a,placement:s,platform:l,elements:u}=t,{crossAxis:d=!1,alignment:c,allowedPlacements:h=PQ,autoAlignment:f=!0,...g}=Yu(e,t),y=c!==void 0||h===PQ?hrt(c||null,f,h):h,m=await Qc(t,g),p=((r=a.autoPlacement)==null?void 0:r.index)||0,v=y[p];if(v==null)return{};const b=Dfe(v,o,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(s!==v)return{reset:{placement:y[0]}};const x=[m[ll(v)],m[b[0]],m[b[1]]],_=[...((n=a.autoPlacement)==null?void 0:n.overflows)||[],{placement:v,overflows:x}],A=y[p+1];if(A)return{data:{index:p+1,overflows:_},reset:{placement:A}};const M=_.map(E=>{const D=Vu(E.placement);return[E.placement,D&&d?E.overflows.slice(0,2).reduce((I,k)=>I+k,0):E.overflows[0],E.overflows]}).sort((E,D)=>E[1]-D[1]),C=((i=M.filter(E=>E[2].slice(0,Vu(E[0])?2:3).every(D=>D<=0))[0])==null?void 0:i[0])||M[0][0];return C!==s?{data:{index:p+1,overflows:_},reset:{placement:C}}:{}}}},prt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:c=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...m}=Yu(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const p=ll(i),v=ll(s)===s,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),x=h||(v||!y?[HO(s)]:srt(s));!h&&g!=="none"&&x.push(...urt(s,y,g,b));const _=[s,...x],A=await Qc(t,m),M=[];let T=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&M.push(A[p]),c){const I=Dfe(i,a,b);M.push(A[I[0]],A[I[1]])}if(T=[...T,{placement:i,overflows:M}],!M.every(I=>I<=0)){var C,E;const I=(((C=o.flip)==null?void 0:C.index)||0)+1,k=_[I];if(k)return{data:{index:I,overflows:T},reset:{placement:k}};let L=(E=T.filter(U=>U.overflows[0]<=0).sort((U,W)=>U.overflows[1]-W.overflows[1])[0])==null?void 0:E.placement;if(!L)switch(f){case"bestFit":{var D;const U=(D=T.map(W=>[W.placement,W.overflows.filter(G=>G>0).reduce((G,z)=>G+z,0)]).sort((W,G)=>W[1]-G[1])[0])==null?void 0:D[0];U&&(L=U);break}case"initialPlacement":L=s;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function RQ(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function IQ(e){return Pfe.some(t=>e[t]>=0)}const mrt=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=Yu(e,t);switch(n){case"referenceHidden":{const o=await Qc(t,{...i,elementContext:"reference"}),a=RQ(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:IQ(a)}}}case"escaped":{const o=await Qc(t,{...i,altBoundary:!0}),a=RQ(o,r.floating);return{data:{escapedOffsets:a,escaped:IQ(a)}}}default:return{}}}}};function Ofe(e){const t=Xu(...e.map(o=>o.left)),r=Xu(...e.map(o=>o.top)),n=ta(...e.map(o=>o.right)),i=ta(...e.map(o=>o.bottom));return{x:t,y:r,width:n-t,height:i-r}}function grt(e){const t=e.slice().sort((i,o)=>i.y-o.y),r=[];let n=null;for(let i=0;i<t.length;i++){const o=t[i];!n||o.y-n.y>n.height/2?r.push([o]):r[r.length-1].push(o),n=o}return r.map(i=>$x(Ofe(i)))}const vrt=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:r,elements:n,rects:i,platform:o,strategy:a}=t,{padding:s=2,x:l,y:u}=Yu(e,t),d=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(n.reference))||[]),c=grt(d),h=$x(Ofe(d)),f=yG(s);function g(){if(c.length===2&&c[0].left>c[1].right&&l!=null&&u!=null)return c.find(m=>l>m.left-f.left&&l<m.right+f.right&&u>m.top-f.top&&u<m.bottom+f.bottom)||h;if(c.length>=2){if(H0(r)==="y"){const E=c[0],D=c[c.length-1],I=ll(r)==="top",k=E.top,L=D.bottom,U=I?E.left:D.left,W=I?E.right:D.right,G=W-U,z=L-k;return{top:k,bottom:L,left:U,right:W,width:G,height:z,x:U,y:k}}const m=ll(r)==="left",p=ta(...c.map(E=>E.right)),v=Xu(...c.map(E=>E.left)),b=c.filter(E=>m?E.left===v:E.right===p),x=b[0].top,_=b[b.length-1].bottom,A=v,M=p,T=M-A,C=_-x;return{top:x,bottom:_,left:A,right:M,width:T,height:C,x:A,y:x}}return h}const y=await o.getElementRects({reference:{getBoundingClientRect:g},floating:n.floating,strategy:a});return i.reference.x!==y.reference.x||i.reference.y!==y.reference.y||i.reference.width!==y.reference.width||i.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}};async function yrt(e,t){const{placement:r,platform:n,elements:i}=e,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=ll(r),s=Vu(r),l=H0(r)==="y",u=["left","top"].includes(a)?-1:1,d=o&&l?-1:1,c=Yu(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:g}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...c};return s&&typeof g=="number"&&(f=s==="end"?g*-1:g),l?{x:f*d,y:h*u}:{x:h*u,y:f*d}}const Rfe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:o,placement:a,middlewareData:s}=t,l=await yrt(t,e);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:a}}}}},brt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:m=>{let{x:p,y:v}=m;return{x:p,y:v}}},...l}=Yu(e,t),u={x:r,y:n},d=await Qc(t,l),c=H0(ll(i)),h=mG(c);let f=u[h],g=u[c];if(o){const m=h==="y"?"top":"left",p=h==="y"?"bottom":"right",v=f+d[m],b=f-d[p];f=EU(v,f,b)}if(a){const m=c==="y"?"top":"left",p=c==="y"?"bottom":"right",v=g+d[m],b=g-d[p];g=EU(v,g,b)}const y=s.fn({...t,[h]:f,[c]:g});return{...y,data:{x:y.x-r,y:y.y-n}}}}},xrt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:o,middlewareData:a}=t,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=Yu(e,t),d={x:r,y:n},c=H0(i),h=mG(c);let f=d[h],g=d[c];const y=Yu(s,t),m=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const b=h==="y"?"height":"width",x=o.reference[h]-o.floating[b]+m.mainAxis,_=o.reference[h]+o.reference[b]-m.mainAxis;f<x?f=x:f>_&&(f=_)}if(u){var p,v;const b=h==="y"?"width":"height",x=["top","left"].includes(ll(i)),_=o.reference[c]-o.floating[b]+(x&&((p=a.offset)==null?void 0:p[c])||0)+(x?0:m.crossAxis),A=o.reference[c]+o.reference[b]+(x?0:((v=a.offset)==null?void 0:v[c])||0)-(x?m.crossAxis:0);g<_?g=_:g>A&&(g=A)}return{[h]:f,[c]:g}}}},wrt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:r,rects:n,platform:i,elements:o}=t,{apply:a=()=>{},...s}=Yu(e,t),l=await Qc(t,s),u=ll(r),d=Vu(r),c=H0(r)==="y",{width:h,height:f}=n.floating;let g,y;u==="top"||u==="bottom"?(g=u,y=d===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(y=u,g=d==="end"?"top":"bottom");const m=f-l[g],p=h-l[y],v=!t.middlewareData.shift;let b=m,x=p;if(c){const A=h-l.left-l.right;x=d||v?Xu(p,A):A}else{const A=f-l.top-l.bottom;b=d||v?Xu(m,A):A}if(v&&!d){const A=ta(l.left,0),M=ta(l.right,0),T=ta(l.top,0),C=ta(l.bottom,0);c?x=h-2*(A!==0||M!==0?A+M:ta(l.left,l.right)):b=f-2*(T!==0||C!==0?T+C:ta(l.top,l.bottom))}await a({...t,availableWidth:x,availableHeight:b});const _=await i.getDimensions(o.floating);return h!==_.width||f!==_.height?{reset:{rects:!0}}:{}}}};function Xp(e){return Ife(e)?(e.nodeName||"").toLowerCase():"#document"}function il(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Hh(e){var t;return(t=(Ife(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ife(e){return e instanceof Node||e instanceof il(e).Node}function Fh(e){return e instanceof Element||e instanceof il(e).Element}function ld(e){return e instanceof HTMLElement||e instanceof il(e).HTMLElement}function LQ(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof il(e).ShadowRoot}function ZM(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=eu(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function _rt(e){return["table","td","th"].includes(Xp(e))}function bG(e){const t=xG(),r=eu(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Srt(e){let t=e1(e);for(;ld(t)&&!FI(t);){if(bG(t))return t;t=e1(t)}return null}function xG(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function FI(e){return["html","body","#document"].includes(Xp(e))}function eu(e){return il(e).getComputedStyle(e)}function zI(e){return Fh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function e1(e){if(Xp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||LQ(e)&&e.host||Hh(e);return LQ(t)?t.host:t}function Lfe(e){const t=e1(e);return FI(t)?e.ownerDocument?e.ownerDocument.body:e.body:ld(t)&&ZM(t)?t:Lfe(t)}function Ah(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=Lfe(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),a=il(i);return o?t.concat(a,a.visualViewport||[],ZM(i)?i:[],a.frameElement&&r?Ah(a.frameElement):[]):t.concat(i,Ah(i,[],r))}function Bfe(e){const t=eu(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=ld(e),o=i?e.offsetWidth:r,a=i?e.offsetHeight:n,s=VO(r)!==o||VO(n)!==a;return s&&(r=o,n=a),{width:r,height:n,$:s}}function wG(e){return Fh(e)?e:e.contextElement}function dx(e){const t=wG(e);if(!ld(t))return qp(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:o}=Bfe(t);let a=(o?VO(r.width):r.width)/n,s=(o?VO(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const Art=qp(0);function Nfe(e){const t=il(e);return!xG()||!t.visualViewport?Art:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Mrt(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==il(e)?!1:t}function _0(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=wG(e);let a=qp(1);t&&(n?Fh(n)&&(a=dx(n)):a=dx(e));const s=Mrt(o,r,n)?Nfe(o):qp(0);let l=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,d=i.width/a.x,c=i.height/a.y;if(o){const h=il(o),f=n&&Fh(n)?il(n):n;let g=h.frameElement;for(;g&&n&&f!==h;){const y=dx(g),m=g.getBoundingClientRect(),p=eu(g),v=m.left+(g.clientLeft+parseFloat(p.paddingLeft))*y.x,b=m.top+(g.clientTop+parseFloat(p.paddingTop))*y.y;l*=y.x,u*=y.y,d*=y.x,c*=y.y,l+=v,u+=b,g=il(g).frameElement}}return $x({width:d,height:c,x:l,y:u})}function Crt(e){let{rect:t,offsetParent:r,strategy:n}=e;const i=ld(r),o=Hh(r);if(r===o)return t;let a={scrollLeft:0,scrollTop:0},s=qp(1);const l=qp(0);if((i||!i&&n!=="fixed")&&((Xp(r)!=="body"||ZM(o))&&(a=zI(r)),ld(r))){const u=_0(r);s=dx(r),l.x=u.x+r.clientLeft,l.y=u.y+r.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-a.scrollLeft*s.x+l.x,y:t.y*s.y-a.scrollTop*s.y+l.y}}function Trt(e){return Array.from(e.getClientRects())}function kfe(e){return _0(Hh(e)).left+zI(e).scrollLeft}function Ert(e){const t=Hh(e),r=zI(e),n=e.ownerDocument.body,i=ta(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=ta(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+kfe(e);const s=-r.scrollTop;return eu(n).direction==="rtl"&&(a+=ta(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:a,y:s}}function Prt(e,t){const r=il(e),n=Hh(e),i=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const u=xG();(!u||u&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s,y:l}}function Drt(e,t){const r=_0(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=ld(e)?dx(e):qp(1),a=e.clientWidth*o.x,s=e.clientHeight*o.y,l=i*o.x,u=n*o.y;return{width:a,height:s,x:l,y:u}}function BQ(e,t,r){let n;if(t==="viewport")n=Prt(e,r);else if(t==="document")n=Ert(Hh(e));else if(Fh(t))n=Drt(t,r);else{const i=Nfe(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return $x(n)}function Ffe(e,t){const r=e1(e);return r===t||!Fh(r)||FI(r)?!1:eu(r).position==="fixed"||Ffe(r,t)}function Ort(e,t){const r=t.get(e);if(r)return r;let n=Ah(e,[],!1).filter(s=>Fh(s)&&Xp(s)!=="body"),i=null;const o=eu(e).position==="fixed";let a=o?e1(e):e;for(;Fh(a)&&!FI(a);){const s=eu(a),l=bG(a);!l&&s.position==="fixed"&&(i=null),(o?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ZM(a)&&!l&&Ffe(e,a))?n=n.filter(d=>d!==a):i=s,a=e1(a)}return t.set(e,n),n}function Rrt(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?Ort(t,this._c):[].concat(r),n],s=a[0],l=a.reduce((u,d)=>{const c=BQ(t,d,i);return u.top=ta(c.top,u.top),u.right=Xu(c.right,u.right),u.bottom=Xu(c.bottom,u.bottom),u.left=ta(c.left,u.left),u},BQ(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Irt(e){return Bfe(e)}function Lrt(e,t,r){const n=ld(t),i=Hh(t),o=r==="fixed",a=_0(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=qp(0);if(n||!n&&!o)if((Xp(t)!=="body"||ZM(i))&&(s=zI(t)),n){const u=_0(t,!0,o,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else i&&(l.x=kfe(i));return{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function NQ(e,t){return!ld(e)||eu(e).position==="fixed"?null:t?t(e):e.offsetParent}function zfe(e,t){const r=il(e);if(!ld(e))return r;let n=NQ(e,t);for(;n&&_rt(n)&&eu(n).position==="static";)n=NQ(n,t);return n&&(Xp(n)==="html"||Xp(n)==="body"&&eu(n).position==="static"&&!bG(n))?r:n||Srt(e)||r}const Brt=async function(e){let{reference:t,floating:r,strategy:n}=e;const i=this.getOffsetParent||zfe,o=this.getDimensions;return{reference:Lrt(t,await i(r),n),floating:{x:0,y:0,...await o(r)}}};function Nrt(e){return eu(e).direction==="rtl"}const Ufe={convertOffsetParentRelativeRectToViewportRelativeRect:Crt,getDocumentElement:Hh,getClippingRect:Rrt,getOffsetParent:zfe,getElementRects:Brt,getClientRects:Trt,getDimensions:Irt,getScale:dx,isElement:Fh,isRTL:Nrt};function krt(e,t){let r=null,n;const i=Hh(e);function o(){clearTimeout(n),r&&r.disconnect(),r=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),o();const{left:u,top:d,width:c,height:h}=e.getBoundingClientRect();if(s||t(),!c||!h)return;const f=QP(d),g=QP(i.clientWidth-(u+c)),y=QP(i.clientHeight-(d+h)),m=QP(u),v={rootMargin:-f+"px "+-g+"px "+-y+"px "+-m+"px",threshold:ta(0,Xu(1,l))||1};let b=!0;function x(_){const A=_[0].intersectionRatio;if(A!==l){if(!b)return a();A?a(!1,A):n=setTimeout(()=>{a(!1,1e-7)},100)}b=!1}try{r=new IntersectionObserver(x,{...v,root:i.ownerDocument})}catch{r=new IntersectionObserver(x,v)}r.observe(e)}return a(!0),o}function Frt(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=wG(e),d=i||o?[...u?Ah(u):[],...Ah(t)]:[];d.forEach(p=>{i&&p.addEventListener("scroll",r,{passive:!0}),o&&p.addEventListener("resize",r)});const c=u&&s?krt(u,r):null;let h=-1,f=null;a&&(f=new ResizeObserver(p=>{let[v]=p;v&&v.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{f&&f.observe(t)})),r()}),u&&!l&&f.observe(u),f.observe(t));let g,y=l?_0(e):null;l&&m();function m(){const p=_0(e);y&&(p.x!==y.x||p.y!==y.y||p.width!==y.width||p.height!==y.height)&&r(),y=p,g=requestAnimationFrame(m)}return r(),()=>{d.forEach(p=>{i&&p.removeEventListener("scroll",r),o&&p.removeEventListener("resize",r)}),c&&c(),f&&f.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const Vfe=(e,t,r)=>{const n=new Map,i={platform:Ufe,...r},o={...i.platform,_c:n};return drt(e,t,{...i,platform:o})},zrt=e=>{const{element:t,padding:r}=e;function n(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return n(t)?t.current!=null?OQ({element:t.current,padding:r}).fn(i):{}:t?OQ({element:t,padding:r}).fn(i):{}}}};var V2=typeof document<"u"?te.useLayoutEffect:te.useEffect;function GO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!GO(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&e.$$typeof)&&!GO(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function kQ(e){const t=te.useRef(e);return V2(()=>{t.current=e}),t}function Urt(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,whileElementsMounted:o,open:a}=e,[s,l]=te.useState({x:null,y:null,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[u,d]=te.useState(n);GO(u,n)||d(n);const c=te.useRef(null),h=te.useRef(null),f=te.useRef(s),g=kQ(o),y=kQ(i),[m,p]=te.useState(null),[v,b]=te.useState(null),x=te.useCallback(E=>{c.current!==E&&(c.current=E,p(E))},[]),_=te.useCallback(E=>{h.current!==E&&(h.current=E,b(E))},[]),A=te.useCallback(()=>{if(!c.current||!h.current)return;const E={placement:t,strategy:r,middleware:u};y.current&&(E.platform=y.current),Vfe(c.current,h.current,E).then(D=>{const I={...D,isPositioned:!0};M.current&&!GO(f.current,I)&&(f.current=I,Ph.flushSync(()=>{l(I)}))})},[u,t,r,y]);V2(()=>{a===!1&&f.current.isPositioned&&(f.current.isPositioned=!1,l(E=>({...E,isPositioned:!1})))},[a]);const M=te.useRef(!1);V2(()=>(M.current=!0,()=>{M.current=!1}),[]),V2(()=>{if(m&&v){if(g.current)return g.current(m,v,A);A()}},[m,v,A,g]);const T=te.useMemo(()=>({reference:c,floating:h,setReference:x,setFloating:_}),[x,_]),C=te.useMemo(()=>({reference:m,floating:v}),[m,v]);return te.useMemo(()=>({...s,update:A,refs:T,elements:C,reference:x,floating:_}),[s,A,T,C,x,_])}var ti=typeof document<"u"?te.useLayoutEffect:te.useEffect;let ak=!1,Vrt=0;const FQ=()=>"floating-ui-"+Vrt++;function jrt(){const[e,t]=te.useState(()=>ak?FQ():void 0);return ti(()=>{e==null&&t(FQ())},[]),te.useEffect(()=>{ak||(ak=!0)},[]),e}const Hrt=NU.useId,ZA=Hrt||jrt;function jfe(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(i=>i(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){e.set(t,(e.get(t)||[]).filter(n=>n!==r))}}}const Hfe=te.createContext(null),Gfe=te.createContext(null),R1=()=>{var e;return((e=te.useContext(Hfe))==null?void 0:e.id)||null},G0=()=>te.useContext(Gfe),Grt=e=>{const t=ZA(),r=G0(),n=R1(),i=e||n;return ti(()=>{const o={id:t,parentId:i};return r==null||r.addNode(o),()=>{r==null||r.removeNode(o)}},[r,t,i]),t},Wrt=e=>{let{children:t,id:r}=e;const n=R1();return te.createElement(Hfe.Provider,{value:te.useMemo(()=>({id:r,parentId:n}),[r,n])},t)},qrt=e=>{let{children:t}=e;const r=te.useRef([]),n=te.useCallback(a=>{r.current=[...r.current,a]},[]),i=te.useCallback(a=>{r.current=r.current.filter(s=>s!==a)},[]),o=te.useState(()=>jfe())[0];return te.createElement(Gfe.Provider,{value:te.useMemo(()=>({nodesRef:r,addNode:n,removeNode:i,events:o}),[r,n,i,o])},t)};function ws(e){return(e==null?void 0:e.ownerDocument)||document}function _G(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Wfe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:r,version:n}=t;return r+"/"+n}).join(" "):navigator.userAgent}function SG(e){return ws(e).defaultView||window}function Gl(e){return e?e instanceof SG(e).Element:!1}function S0(e){return e?e instanceof SG(e).HTMLElement:!1}function Xrt(e){if(typeof ShadowRoot>"u")return!1;const t=SG(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function qfe(e){if(e.mozInputSource===0&&e.isTrusted)return!0;const t=/Android/i;return(t.test(_G())||t.test(Wfe()))&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Xfe(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType!=="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0}function PU(){return/apple/i.test(navigator.vendor)}function Yfe(){return _G().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function WO(e,t){const r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}function Wl(e){const t=te.useRef(e);return ti(()=>{t.current=e}),t}const zQ="data-floating-ui-safe-polygon";function j2(e,t,r){return r&&!WO(r)?0:typeof e=="number"?e:e==null?void 0:e[t]}const Yrt=function(e,t){let{enabled:r=!0,delay:n=0,handleClose:i=null,mouseOnly:o=!1,restMs:a=0,move:s=!0}=t===void 0?{}:t;const{open:l,onOpenChange:u,dataRef:d,events:c,elements:{domReference:h,floating:f},refs:g}=e,y=G0(),m=R1(),p=Wl(i),v=Wl(n),b=te.useRef(),x=te.useRef(),_=te.useRef(),A=te.useRef(),M=te.useRef(!0),T=te.useRef(!1),C=te.useRef(()=>{}),E=te.useCallback(()=>{var L;const U=(L=d.current.openEvent)==null?void 0:L.type;return(U==null?void 0:U.includes("mouse"))&&U!=="mousedown"},[d]);te.useEffect(()=>{if(!r)return;function L(){clearTimeout(x.current),clearTimeout(A.current),M.current=!0}return c.on("dismiss",L),()=>{c.off("dismiss",L)}},[r,c]),te.useEffect(()=>{if(!r||!p.current||!l)return;function L(){E()&&u(!1)}const U=ws(f).documentElement;return U.addEventListener("mouseleave",L),()=>{U.removeEventListener("mouseleave",L)}},[f,l,u,r,p,d,E]);const D=te.useCallback(function(L){L===void 0&&(L=!0);const U=j2(v.current,"close",b.current);U&&!_.current?(clearTimeout(x.current),x.current=setTimeout(()=>u(!1),U)):L&&(clearTimeout(x.current),u(!1))},[v,u]),I=te.useCallback(()=>{C.current(),_.current=void 0},[]),k=te.useCallback(()=>{if(T.current){const L=ws(g.floating.current).body;L.style.pointerEvents="",L.removeAttribute(zQ),T.current=!1}},[g]);return te.useEffect(()=>{if(!r)return;function L(){return d.current.openEvent?["click","mousedown"].includes(d.current.openEvent.type):!1}function U(z){if(clearTimeout(x.current),M.current=!1,o&&!WO(b.current)||a>0&&j2(v.current,"open")===0)return;d.current.openEvent=z;const V=j2(v.current,"open",b.current);V?x.current=setTimeout(()=>{u(!0)},V):u(!0)}function W(z){if(L())return;C.current();const V=ws(f);if(clearTimeout(A.current),p.current){clearTimeout(x.current),_.current=p.current({...e,tree:y,x:z.clientX,y:z.clientY,onClose(){k(),I(),D()}});const j=_.current;V.addEventListener("mousemove",j),C.current=()=>{V.removeEventListener("mousemove",j)};return}D()}function G(z){L()||p.current==null||p.current({...e,tree:y,x:z.clientX,y:z.clientY,onClose(){I(),D()}})(z)}if(Gl(h)){const z=h;return l&&z.addEventListener("mouseleave",G),f==null||f.addEventListener("mouseleave",G),s&&z.addEventListener("mousemove",U,{once:!0}),z.addEventListener("mouseenter",U),z.addEventListener("mouseleave",W),()=>{l&&z.removeEventListener("mouseleave",G),f==null||f.removeEventListener("mouseleave",G),s&&z.removeEventListener("mousemove",U),z.removeEventListener("mouseenter",U),z.removeEventListener("mouseleave",W)}}},[h,f,r,e,o,a,s,D,I,k,u,l,y,v,p,d]),ti(()=>{var L;if(r&&l&&(L=p.current)!=null&&L.__options.blockPointerEvents&&E()){const G=ws(f).body;if(G.setAttribute(zQ,""),G.style.pointerEvents="none",T.current=!0,Gl(h)&&f){var U,W;const z=h,V=y==null||(U=y.nodesRef.current.find(j=>j.id===m))==null||(W=U.context)==null?void 0:W.elements.floating;return V&&(V.style.pointerEvents=""),z.style.pointerEvents="auto",f.style.pointerEvents="auto",()=>{z.style.pointerEvents="",f.style.pointerEvents=""}}}},[r,l,m,f,h,y,p,d,E]),ti(()=>{l||(b.current=void 0,I(),k())},[l,I,k]),te.useEffect(()=>()=>{I(),clearTimeout(x.current),clearTimeout(A.current),k()},[r,I,k]),te.useMemo(()=>{if(!r)return{};function L(U){b.current=U.pointerType}return{reference:{onPointerDown:L,onPointerEnter:L,onMouseMove(){l||a===0||(clearTimeout(A.current),A.current=setTimeout(()=>{M.current||u(!0)},a))}},floating:{onMouseEnter(){clearTimeout(x.current)},onMouseLeave(){c.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),D(!1)}}}},[c,r,a,l,u,D])},Kfe=te.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{},isInstantPhase:!1}),Jfe=()=>te.useContext(Kfe),Krt=e=>{let{children:t,delay:r,timeoutMs:n=0}=e;const[i,o]=te.useReducer((l,u)=>({...l,...u}),{delay:r,timeoutMs:n,initialDelay:r,currentId:null,isInstantPhase:!1}),a=te.useRef(null),s=te.useCallback(l=>{o({currentId:l})},[]);return ti(()=>{i.currentId?a.current===null?a.current=i.currentId:o({isInstantPhase:!0}):(o({isInstantPhase:!1}),a.current=null)},[i.currentId]),te.createElement(Kfe.Provider,{value:te.useMemo(()=>({...i,setState:o,setCurrentId:s}),[i,o,s])},t)},Jrt=(e,t)=>{let{open:r,onOpenChange:n}=e,{id:i}=t;const{currentId:o,setCurrentId:a,initialDelay:s,setState:l,timeoutMs:u}=Jfe();te.useEffect(()=>{o&&(l({delay:{open:1,close:j2(s,"close")}}),o!==i&&n(!1))},[i,n,l,o,s]),te.useEffect(()=>{function d(){n(!1),l({delay:s,currentId:null})}if(!r&&o===i)if(u){const c=window.setTimeout(d,u);return()=>{clearTimeout(c)}}else d()},[r,l,o,i,n,s,u]),te.useEffect(()=>{r&&a(i)},[r,a,i])};function $A(){return $A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$A.apply(this,arguments)}function A0(e){let t=e.activeElement;for(;((r=t)==null||(n=r.shadowRoot)==null?void 0:n.activeElement)!=null;){var r,n;t=t.shadowRoot.activeElement}return t}function ls(e,t){if(!e||!t)return!1;const r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Xrt(r)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}let UQ=0;function Gf(e,t){t===void 0&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:i=!1}=t;n&&cancelAnimationFrame(UQ);const o=()=>e==null?void 0:e.focus({preventScroll:r});i?o():UQ=requestAnimationFrame(o)}function Qrt(e,t){var r;let n=[],i=(r=e.find(o=>o.id===t))==null?void 0:r.parentId;for(;i;){const o=e.find(a=>a.id===i);i=o==null?void 0:o.parentId,o&&(n=n.concat(o))}return n}function HS(e,t){let r=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)})||[],n=r;for(;n.length;)n=e.filter(i=>{var o;return(o=n)==null?void 0:o.some(a=>{var s;return i.parentId===a.id&&((s=i.context)==null?void 0:s.open)})})||[],r=r.concat(n);return r}function UI(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Zrt="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Qfe(e){return S0(e)&&e.matches(Zrt)}function Nl(e){e.preventDefault(),e.stopPropagation()}const qO=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Zfe(e,t){const r=UO(e,qO());t==="prev"&&r.reverse();const n=r.indexOf(A0(ws(e)));return r.slice(n+1)[0]}function $fe(){return Zfe(document.body,"next")}function epe(){return Zfe(document.body,"prev")}function GS(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!ls(r,n)}function $rt(e){UO(e,qO()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function ent(e){e.querySelectorAll("[data-tabindex]").forEach(r=>{const n=r.dataset.tabindex;delete r.dataset.tabindex,n?r.setAttribute("tabindex",n):r.removeAttribute("tabindex")})}const tnt=NU.useInsertionEffect,rnt=tnt||(e=>e());function I1(e){const t=te.useRef(()=>{});return rnt(()=>{t.current=e}),te.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}const AG={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let DU,MG;function VQ(e){e.key==="Tab"&&(DU=e.target,clearTimeout(MG))}function nnt(e){const t=DU===e.relatedTarget;return DU=e.relatedTarget,clearTimeout(MG),t}const XO=te.forwardRef(function(t,r){const n=I1(t.onFocus),[i,o]=te.useState();return ti(()=>(PU()&&o("button"),document.addEventListener("keydown",VQ),()=>{document.removeEventListener("keydown",VQ)}),[]),te.createElement("span",$A({},t,{ref:r,tabIndex:0,role:i,"aria-hidden":i?void 0:!0,"data-floating-ui-focus-guard":"",style:AG,onFocus:a=>{PU()&&Yfe()&&!nnt(a)?(a.persist(),MG=window.setTimeout(()=>{n(a)},50)):n(a)}}))}),tpe=te.createContext(null),rpe=function(e){let{id:t,enabled:r=!0}=e===void 0?{}:e;const[n,i]=te.useState(null),o=ZA(),a=npe();return ti(()=>{if(!r)return;const s=t?document.getElementById(t):null;if(s)s.setAttribute("data-floating-ui-portal",""),i(s);else{const l=document.createElement("div");t!==""&&(l.id=t||o),l.setAttribute("data-floating-ui-portal",""),i(l);const u=(a==null?void 0:a.portalNode)||document.body;return u.appendChild(l),()=>{u.removeChild(l)}}},[t,a,o,r]),n},int=e=>{let{children:t,id:r,root:n=null,preserveTabOrder:i=!0}=e;const o=rpe({id:r,enabled:!n}),[a,s]=te.useState(null),l=te.useRef(null),u=te.useRef(null),d=te.useRef(null),c=te.useRef(null),h=!!a&&!a.modal&&!!(n||o)&&i;return te.useEffect(()=>{if(!o||!i||a!=null&&a.modal)return;function f(g){o&&GS(g)&&(g.type==="focusin"?ent:$rt)(o)}return o.addEventListener("focusin",f,!0),o.addEventListener("focusout",f,!0),()=>{o.removeEventListener("focusin",f,!0),o.removeEventListener("focusout",f,!0)}},[o,i,a==null?void 0:a.modal]),te.createElement(tpe.Provider,{value:te.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:d,afterInsideRef:c,portalNode:o,setFocusManagerState:s}),[i,o])},h&&o&&te.createElement(XO,{"data-type":"outside",ref:l,onFocus:f=>{if(GS(f,o)){var g;(g=d.current)==null||g.focus()}else{const y=epe()||(a==null?void 0:a.refs.domReference.current);y==null||y.focus()}}}),h&&o&&te.createElement("span",{"aria-owns":o.id,style:AG}),n?Ph.createPortal(t,n):o?Ph.createPortal(t,o):null,h&&o&&te.createElement(XO,{"data-type":"outside",ref:u,onFocus:f=>{if(GS(f,o)){var g;(g=c.current)==null||g.focus()}else{const y=$fe()||(a==null?void 0:a.refs.domReference.current);y==null||y.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1))}}}))},npe=()=>te.useContext(tpe),ont=te.forwardRef(function(t,r){return te.createElement("button",$A({},t,{type:"button",ref:r,tabIndex:-1,style:AG}))});function ant(e){let{context:t,children:r,order:n=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:s=!0,visuallyHiddenDismiss:l=!1,closeOnFocusOut:u=!0}=e;const{refs:d,nodeId:c,onOpenChange:h,events:f,dataRef:g,elements:{domReference:y,floating:m}}=t,p=Wl(n),v=G0(),b=npe(),[x,_]=te.useState(null),A=typeof o=="number"&&o<0,M=te.useRef(null),T=te.useRef(null),C=te.useRef(!1),E=te.useRef(null),D=te.useRef(!1),I=b!=null,k=y&&y.getAttribute("role")==="combobox"&&Qfe(y),L=te.useCallback(function(z){return z===void 0&&(z=m),z?UO(z,qO()):[]},[m]),U=te.useCallback(z=>{const V=L(z);return p.current.map(j=>y&&j==="reference"?y:m&&j==="floating"?m:V).filter(Boolean).flat()},[y,m,p,L]);te.useEffect(()=>{if(!s)return;function z(j){if(j.key==="Tab"){L().length===0&&!k&&Nl(j);const H=U(),Y=UI(j);p.current[0]==="reference"&&Y===y&&(Nl(j),j.shiftKey?Gf(H[H.length-1]):Gf(H[1])),p.current[1]==="floating"&&Y===m&&j.shiftKey&&(Nl(j),Gf(H[0]))}}const V=ws(m);return V.addEventListener("keydown",z),()=>{V.removeEventListener("keydown",z)}},[y,m,s,p,d,k,L,U]),te.useEffect(()=>{if(!u)return;function z(){D.current=!0,setTimeout(()=>{D.current=!1})}function V(j){const H=j.relatedTarget,Y=!(ls(y,H)||ls(m,H)||ls(H,m)||ls(b==null?void 0:b.portalNode,H)||H!=null&&H.hasAttribute("data-floating-ui-focus-guard")||v&&(HS(v.nodesRef.current,c).find(Q=>{var $,ne;return ls(($=Q.context)==null?void 0:$.elements.floating,H)||ls((ne=Q.context)==null?void 0:ne.elements.domReference,H)})||Qrt(v.nodesRef.current,c).find(Q=>{var $,ne;return(($=Q.context)==null?void 0:$.elements.floating)===H||((ne=Q.context)==null?void 0:ne.elements.domReference)===H})));H&&Y&&!D.current&&H!==E.current&&(C.current=!0,setTimeout(()=>h(!1)))}if(m&&S0(y))return y.addEventListener("focusout",V),y.addEventListener("pointerdown",z),!s&&m.addEventListener("focusout",V),()=>{y.removeEventListener("focusout",V),y.removeEventListener("pointerdown",z),!s&&m.removeEventListener("focusout",V)}},[y,m,s,c,v,b,h,u]),te.useEffect(()=>{var z;const V=Array.from((b==null||(z=b.portalNode)==null?void 0:z.querySelectorAll("[data-floating-ui-portal]"))||[]);function j(){return[M.current,T.current].filter(Boolean)}if(m&&s){const H=[m,...V,...j()],Y=Utt(p.current.includes("reference")||k?H.concat(y||[]):H);return()=>{Y()}}},[y,m,s,p,b,k]),te.useEffect(()=>{if(s&&!i&&m){const z=[],V=qO(),j=UO(ws(m).body,V),H=U(),Y=j.filter(Q=>!H.includes(Q));return Y.forEach((Q,$)=>{z[$]=Q.getAttribute("tabindex"),Q.setAttribute("tabindex","-1")}),()=>{Y.forEach((Q,$)=>{const ne=z[$];ne==null?Q.removeAttribute("tabindex"):Q.setAttribute("tabindex",ne)})}}},[m,s,i,U]),ti(()=>{if(!m)return;const z=ws(m);let V=a,j=!1;const H=A0(z),Y=g.current;E.current=H;const Q=U(m),$=(typeof o=="number"?Q[o]:o.current)||m;!A&&Gf($,{preventScroll:$===m});function ne(Z){if(Z.type==="escapeKey"&&d.domReference.current&&(E.current=d.domReference.current),["referencePress","escapeKey"].includes(Z.type))return;const ce=Z.data.returnFocus;typeof ce=="object"?(V=!0,j=ce.preventScroll):V=ce}return f.on("dismiss",ne),()=>{if(f.off("dismiss",ne),ls(m,A0(z))&&d.domReference.current&&(E.current=d.domReference.current),V&&S0(E.current)&&!C.current)if(!d.domReference.current||D.current)Gf(E.current,{cancelPrevious:!1,preventScroll:j});else{var Z;Y.__syncReturnFocus=!0,(Z=E.current)==null||Z.focus({preventScroll:j}),setTimeout(()=>{delete Y.__syncReturnFocus})}}},[m,U,o,a,g,d,f,A]),ti(()=>{if(b)return b.setFocusManagerState({...t,modal:s,closeOnFocusOut:u}),()=>{b.setFocusManagerState(null)}},[b,s,u,t]),ti(()=>{if(A||!m)return;function z(){_(L().length)}if(z(),typeof MutationObserver=="function"){const V=new MutationObserver(z);return V.observe(m,{childList:!0,subtree:!0}),()=>{V.disconnect()}}},[m,L,A,d]);const W=i&&(I||s)&&!k;function G(z){return l&&s?te.createElement(ont,{ref:z==="start"?M:T,onClick:()=>h(!1)},typeof l=="string"?l:"Dismiss"):null}return te.createElement(te.Fragment,null,W&&te.createElement(XO,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:z=>{if(s){const j=U();Gf(n[0]==="reference"?j[0]:j[j.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(C.current=!1,GS(z,b.portalNode)){const j=$fe()||y;j==null||j.focus()}else{var V;(V=b.beforeOutsideRef.current)==null||V.focus()}}}),k?null:G("start"),te.cloneElement(r,x===0||n.includes("floating")?{tabIndex:0}:{}),G("end"),W&&te.createElement(XO,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:z=>{if(s)Gf(U()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(C.current=!0,GS(z,b.portalNode)){const j=epe()||y;j==null||j.focus()}else{var V;(V=b.afterOutsideRef.current)==null||V.focus()}}}))}const ZP="data-floating-ui-scroll-lock",snt=te.forwardRef(function(t,r){let{lockScroll:n=!1,...i}=t;return ti(()=>{var o,a;if(!n||document.body.hasAttribute(ZP))return;document.body.setAttribute(ZP,"");const u=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",d=window.innerWidth-document.documentElement.clientWidth;if(!/iP(hone|ad|od)|iOS/.test(_G()))return Object.assign(document.body.style,{overflow:"hidden",[u]:d+"px"}),()=>{document.body.removeAttribute(ZP),Object.assign(document.body.style,{overflow:"",[u]:""})};const c=((o=window.visualViewport)==null?void 0:o.offsetLeft)||0,h=((a=window.visualViewport)==null?void 0:a.offsetTop)||0,f=window.pageXOffset,g=window.pageYOffset;return Object.assign(document.body.style,{position:"fixed",overflow:"hidden",top:-(g-Math.floor(h))+"px",left:-(f-Math.floor(c))+"px",right:"0",[u]:d+"px"}),()=>{Object.assign(document.body.style,{position:"",overflow:"",top:"",left:"",right:"",[u]:""}),document.body.removeAttribute(ZP),window.scrollTo(f,g)}},[n]),te.createElement("div",$A({ref:r},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function jQ(e){return S0(e.target)&&e.target.tagName==="BUTTON"}function HQ(e){return Qfe(e)}const lnt=function(e,t){let{open:r,onOpenChange:n,dataRef:i,elements:{domReference:o}}=e,{enabled:a=!0,event:s="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:d=!0}=t===void 0?{}:t;const c=te.useRef();return te.useMemo(()=>a?{reference:{onPointerDown(h){c.current=h.pointerType},onMouseDown(h){h.button===0&&(WO(c.current,!0)&&u||s!=="click"&&(r?l&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")&&n(!1):(h.preventDefault(),n(!0)),i.current.openEvent=h.nativeEvent))},onClick(h){if(!i.current.__syncReturnFocus){if(s==="mousedown"&&c.current){c.current=void 0;return}WO(c.current,!0)&&u||(r?l&&(!i.current.openEvent||i.current.openEvent.type==="click")&&n(!1):n(!0),i.current.openEvent=h.nativeEvent)}},onKeyDown(h){c.current=void 0,d&&(jQ(h)||(h.key===" "&&!HQ(o)&&h.preventDefault(),h.key==="Enter"&&(r?l&&n(!1):n(!0))))},onKeyUp(h){d&&(jQ(h)||HQ(o)||h.key===" "&&(r?l&&n(!1):n(!0)))}}}:{},[a,i,s,u,d,o,l,r,n])};function H2(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return r.target!=null&&t.contains(r.target)}const unt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},cnt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},dnt=function(e){var t,r;return e===void 0&&(e=!0),{escapeKeyBubbles:typeof e=="boolean"?e:(t=e.escapeKey)!=null?t:!0,outsidePressBubbles:typeof e=="boolean"?e:(r=e.outsidePress)!=null?r:!0}},hnt=function(e,t){let{open:r,onOpenChange:n,events:i,nodeId:o,elements:{reference:a,domReference:s,floating:l},dataRef:u}=e,{enabled:d=!0,escapeKey:c=!0,outsidePress:h=!0,outsidePressEvent:f="pointerdown",referencePress:g=!1,referencePressEvent:y="pointerdown",ancestorScroll:m=!1,bubbles:p=!0}=t===void 0?{}:t;const v=G0(),b=R1()!=null,x=I1(typeof h=="function"?h:()=>!1),_=typeof h=="function"?x:h,A=te.useRef(!1),{escapeKeyBubbles:M,outsidePressBubbles:T}=dnt(p);return te.useEffect(()=>{if(!r||!d)return;u.current.__escapeKeyBubbles=M,u.current.__outsidePressBubbles=T;function C(L){if(L.key==="Escape"){const U=v?HS(v.nodesRef.current,o):[];if(U.length>0){let W=!0;if(U.forEach(G=>{var z;if((z=G.context)!=null&&z.open&&!G.context.dataRef.current.__escapeKeyBubbles){W=!1;return}}),!W)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),n(!1)}}function E(L){const U=A.current;if(A.current=!1,U||typeof _=="function"&&!_(L))return;const W=UI(L);if(S0(W)&&l){const V=l.ownerDocument.defaultView||window,j=W.scrollWidth>W.clientWidth,H=W.scrollHeight>W.clientHeight;let Y=H&&L.offsetX>W.clientWidth;if(H&&V.getComputedStyle(W).direction==="rtl"&&(Y=L.offsetX<=W.offsetWidth-W.clientWidth),Y||j&&L.offsetY>W.clientHeight)return}const G=v&&HS(v.nodesRef.current,o).some(V=>{var j;return H2(L,(j=V.context)==null?void 0:j.elements.floating)});if(H2(L,l)||H2(L,s)||G)return;const z=v?HS(v.nodesRef.current,o):[];if(z.length>0){let V=!0;if(z.forEach(j=>{var H;if((H=j.context)!=null&&H.open&&!j.context.dataRef.current.__outsidePressBubbles){V=!1;return}}),!V)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:b?{preventScroll:!0}:qfe(L)||Xfe(L)}}),n(!1)}function D(){n(!1)}const I=ws(l);c&&I.addEventListener("keydown",C),_&&I.addEventListener(f,E);let k=[];return m&&(Gl(s)&&(k=Ah(s)),Gl(l)&&(k=k.concat(Ah(l))),!Gl(a)&&a&&a.contextElement&&(k=k.concat(Ah(a.contextElement)))),k=k.filter(L=>{var U;return L!==((U=I.defaultView)==null?void 0:U.visualViewport)}),k.forEach(L=>{L.addEventListener("scroll",D,{passive:!0})}),()=>{c&&I.removeEventListener("keydown",C),_&&I.removeEventListener(f,E),k.forEach(L=>{L.removeEventListener("scroll",D)})}},[u,l,s,a,c,_,f,i,v,o,r,n,m,d,M,T,b]),te.useEffect(()=>{A.current=!1},[_,f]),te.useMemo(()=>d?{reference:{[unt[y]]:()=>{g&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),n(!1))}},floating:{[cnt[f]]:()=>{A.current=!0}}}:{},[d,i,g,f,y,n])},fnt=function(e,t){let{open:r,onOpenChange:n,dataRef:i,events:o,refs:a,elements:{floating:s,domReference:l}}=e,{enabled:u=!0,keyboardOnly:d=!0}=t===void 0?{}:t;const c=te.useRef(""),h=te.useRef(!1),f=te.useRef();return te.useEffect(()=>{if(!u)return;const y=ws(s).defaultView||window;function m(){!r&&S0(l)&&l===A0(ws(l))&&(h.current=!0)}return y.addEventListener("blur",m),()=>{y.removeEventListener("blur",m)}},[s,l,r,u]),te.useEffect(()=>{if(!u)return;function g(y){(y.type==="referencePress"||y.type==="escapeKey")&&(h.current=!0)}return o.on("dismiss",g),()=>{o.off("dismiss",g)}},[o,u]),te.useEffect(()=>()=>{clearTimeout(f.current)},[]),te.useMemo(()=>u?{reference:{onPointerDown(g){let{pointerType:y}=g;c.current=y,h.current=!!(y&&d)},onMouseLeave(){h.current=!1},onFocus(g){var y;h.current||g.type==="focus"&&((y=i.current.openEvent)==null?void 0:y.type)==="mousedown"&&i.current.openEvent&&H2(i.current.openEvent,l)||(i.current.openEvent=g.nativeEvent,n(!0))},onBlur(g){h.current=!1;const y=g.relatedTarget,m=Gl(y)&&y.hasAttribute("data-floating-ui-focus-guard")&&y.getAttribute("data-type")==="outside";f.current=setTimeout(()=>{ls(a.floating.current,y)||ls(l,y)||m||n(!1)})}}}:{},[u,d,l,a,i,n])};let GQ=!1;const CG="ArrowUp",VI="ArrowDown",t1="ArrowLeft",$M="ArrowRight";function $P(e,t,r){return Math.floor(e/t)!==r}function G_(e,t){return t<0||t>=e.current.length}function Zo(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:i,amount:o=1}=t===void 0?{}:t;const a=e.current;let s=r;do{var l,u;s=s+(n?-o:o)}while(s>=0&&s<=a.length-1&&(i?i.includes(s):a[s]==null||(l=a[s])!=null&&l.hasAttribute("disabled")||((u=a[s])==null?void 0:u.getAttribute("aria-disabled"))==="true"));return s}function jI(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function WQ(e,t){return jI(t,e===CG||e===VI,e===t1||e===$M)}function sk(e,t,r){return jI(t,e===VI,r?e===t1:e===$M)||e==="Enter"||e==" "||e===""}function pnt(e,t,r){return jI(t,r?e===t1:e===$M,e===VI)}function mnt(e,t,r){return jI(t,r?e===$M:e===t1,e===CG)}function lk(e,t){return Zo(e,{disabledIndices:t})}function qQ(e,t){return Zo(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}const gnt=function(e,t){let{open:r,onOpenChange:n,refs:i,elements:{domReference:o}}=e,{listRef:a,activeIndex:s,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:d=null,allowEscape:c=!1,loop:h=!1,nested:f=!1,rtl:g=!1,virtual:y=!1,focusItemOnOpen:m="auto",focusItemOnHover:p=!0,openOnArrowKeyDown:v=!0,disabledIndices:b=void 0,orientation:x="vertical",cols:_=1,scrollItemIntoView:A=!0}=t===void 0?{listRef:{current:[]},activeIndex:null,onNavigate:()=>{}}:t;const M=R1(),T=G0(),C=I1(l),E=te.useRef(m),D=te.useRef(d??-1),I=te.useRef(null),k=te.useRef(!0),L=te.useRef(C),U=te.useRef(r),W=te.useRef(!1),G=te.useRef(!1),z=Wl(b),V=Wl(r),j=Wl(A),[H,Y]=te.useState(),Q=te.useCallback(function(Z,ce,ae){ae===void 0&&(ae=!1);const ie=Z.current[ce.current];y?Y(ie==null?void 0:ie.id):Gf(ie,{preventScroll:!0,sync:Yfe()&&PU()?GQ||W.current:!1}),requestAnimationFrame(()=>{const le=j.current;le&&ie&&(ae||!k.current)&&(ie.scrollIntoView==null||ie.scrollIntoView(typeof le=="boolean"?{block:"nearest",inline:"nearest"}:le))})},[y,j]);ti(()=>{document.createElement("div").focus({get preventScroll(){return GQ=!0,!1}})},[]),ti(()=>{u&&(r?E.current&&d!=null&&(G.current=!0,C(d)):U.current&&(D.current=-1,L.current(null)))},[u,r,d,C]),ti(()=>{if(u&&r)if(s==null){if(W.current=!1,d!=null)return;U.current&&(D.current=-1,Q(a,D)),!U.current&&E.current&&(I.current!=null||E.current===!0&&I.current==null)&&(D.current=I.current==null||sk(I.current,x,g)||f?lk(a,z.current):qQ(a,z.current),C(D.current))}else G_(a,s)||(D.current=s,Q(a,D,G.current),G.current=!1)},[u,r,s,d,f,a,x,g,C,Q,z]),ti(()=>{if(u&&U.current&&!r){var Z,ce;const ae=T==null||(Z=T.nodesRef.current.find(ie=>ie.id===M))==null||(ce=Z.context)==null?void 0:ce.elements.floating;ae&&!ls(ae,A0(ws(ae)))&&ae.focus({preventScroll:!0})}},[u,r,T,M]),ti(()=>{I.current=null,L.current=C,U.current=r});const $=s!=null,ne=te.useMemo(()=>{function Z(ae){if(!r)return;const ie=a.current.indexOf(ae);ie!==-1&&C(ie)}return{onFocus(ae){let{currentTarget:ie}=ae;Z(ie)},onClick:ae=>{let{currentTarget:ie}=ae;return ie.focus({preventScroll:!0})},...p&&{onMouseMove(ae){let{currentTarget:ie}=ae;Z(ie)},onPointerLeave(){if(k.current&&(D.current=-1,Q(a,D),Ph.flushSync(()=>C(null)),!y)){var ae;(ae=i.floating.current)==null||ae.focus({preventScroll:!0})}}}}},[r,i,Q,p,a,C,y]);return te.useMemo(()=>{if(!u)return{};const Z=z.current;function ce(se){if(k.current=!1,W.current=!0,!V.current&&se.currentTarget===i.floating.current)return;if(f&&mnt(se.key,x,g)){Nl(se),n(!1),S0(o)&&o.focus();return}const re=D.current,ye=lk(a,Z),be=qQ(a,Z);if(se.key==="Home"&&(D.current=ye,C(D.current)),se.key==="End"&&(D.current=be,C(D.current)),_>1){const _e=D.current;if(se.key===CG){if(Nl(se),_e===-1)D.current=be;else if(D.current=Zo(a,{startingIndex:_e,amount:_,decrement:!0,disabledIndices:Z}),h&&(_e-_<ye||D.current<0)){const Se=_e%_,Fe=be%_,Re=be-(Fe-Se);Fe===Se?D.current=be:D.current=Fe>Se?Re:Re-_}G_(a,D.current)&&(D.current=_e),C(D.current)}if(se.key===VI&&(Nl(se),_e===-1?D.current=ye:(D.current=Zo(a,{startingIndex:_e,amount:_,disabledIndices:Z}),h&&_e+_>be&&(D.current=Zo(a,{startingIndex:_e%_-_,amount:_,disabledIndices:Z}))),G_(a,D.current)&&(D.current=_e),C(D.current)),x==="both"){const Se=Math.floor(_e/_);se.key===$M&&(Nl(se),_e%_!==_-1?(D.current=Zo(a,{startingIndex:_e,disabledIndices:Z}),h&&$P(D.current,_,Se)&&(D.current=Zo(a,{startingIndex:_e-_e%_-1,disabledIndices:Z}))):h&&(D.current=Zo(a,{startingIndex:_e-_e%_-1,disabledIndices:Z})),$P(D.current,_,Se)&&(D.current=_e)),se.key===t1&&(Nl(se),_e%_!==0?(D.current=Zo(a,{startingIndex:_e,disabledIndices:Z,decrement:!0}),h&&$P(D.current,_,Se)&&(D.current=Zo(a,{startingIndex:_e+(_-_e%_),decrement:!0,disabledIndices:Z}))):h&&(D.current=Zo(a,{startingIndex:_e+(_-_e%_),decrement:!0,disabledIndices:Z})),$P(D.current,_,Se)&&(D.current=_e));const Fe=Math.floor(be/_)===Se;G_(a,D.current)&&(h&&Fe?D.current=se.key===t1?be:Zo(a,{startingIndex:_e-_e%_-1,disabledIndices:Z}):D.current=_e),C(D.current);return}}if(WQ(se.key,x)){if(Nl(se),r&&!y&&A0(se.currentTarget.ownerDocument)===se.currentTarget){D.current=sk(se.key,x,g)?ye:be,C(D.current);return}sk(se.key,x,g)?h?D.current=re>=be?c&&re!==a.current.length?-1:ye:Zo(a,{startingIndex:re,disabledIndices:Z}):D.current=Math.min(be,Zo(a,{startingIndex:re,disabledIndices:Z})):h?D.current=re<=ye?c&&re!==-1?a.current.length:be:Zo(a,{startingIndex:re,decrement:!0,disabledIndices:Z}):D.current=Math.max(ye,Zo(a,{startingIndex:re,decrement:!0,disabledIndices:Z})),G_(a,D.current)?C(null):C(D.current)}}function ae(se){m==="auto"&&qfe(se.nativeEvent)&&(E.current=!0)}function ie(se){E.current=m,m==="auto"&&Xfe(se.nativeEvent)&&(E.current=!0)}const le=y&&r&&$&&{"aria-activedescendant":H};return{reference:{...le,onKeyDown(se){k.current=!1;const re=se.key.indexOf("Arrow")===0;if(y&&r)return ce(se);if(!r&&!v&&re)return;if((re||se.key==="Enter"||se.key===" "||se.key==="")&&(I.current=se.key),f){pnt(se.key,x,g)&&(Nl(se),r?(D.current=lk(a,Z),C(D.current)):n(!0));return}WQ(se.key,x)&&(d!=null&&(D.current=d),Nl(se),!r&&v?n(!0):ce(se),r&&C(D.current))},onFocus(){r&&C(null)},onPointerDown:ie,onMouseDown:ae,onClick:ae},floating:{"aria-orientation":x==="both"?void 0:x,...le,onKeyDown:ce,onPointerMove(){k.current=!0}},item:ne}},[o,i,H,z,V,a,u,x,g,y,r,$,f,d,v,c,_,h,m,C,n,ne])};function vnt(e){return te.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})},e)}const ynt=function(e,t){let{open:r}=e,{enabled:n=!0,role:i="dialog"}=t===void 0?{}:t;const o=ZA(),a=ZA();return te.useMemo(()=>{const s={id:o,role:i};return n?i==="tooltip"?{reference:{"aria-describedby":r?o:void 0},floating:s}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":r?o:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:a}},floating:{...s,...i==="menu"&&{"aria-labelledby":a}}}:{}},[n,i,r,o,a])},XQ=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,r)=>(r?"-":"")+t.toLowerCase());function bnt(e,t){const[r,n]=te.useState(e);return e&&!r&&n(!0),te.useEffect(()=>{if(!e){const i=setTimeout(()=>n(!1),t);return()=>clearTimeout(i)}},[e,t]),r}function ipe(e,t){let{open:r,elements:{floating:n}}=e,{duration:i=250}=t===void 0?{}:t;const a=(typeof i=="number"?i:i.close)||0,[s,l]=te.useState(!1),[u,d]=te.useState("unmounted"),c=bnt(r,a);return ti(()=>{s&&!c&&d("unmounted")},[s,c]),ti(()=>{if(n)if(r){d("initial");const h=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(h)}}else l(!0),d("close")},[r,n]),{isMounted:c,status:u}}function xnt(e,t){let{initial:r={opacity:0},open:n,close:i,common:o,duration:a=250}=t===void 0?{}:t;const s=e.placement,l=s.split("-")[0],[u,d]=te.useState({}),{isMounted:c,status:h}=ipe(e,{duration:a}),f=Wl(r),g=Wl(n),y=Wl(i),m=Wl(o),p=typeof a=="number",v=(p?a:a.open)||0,b=(p?a:a.close)||0;return ti(()=>{const x={side:l,placement:s},_=f.current,A=y.current,M=g.current,T=m.current,C=typeof _=="function"?_(x):_,E=typeof A=="function"?A(x):A,D=typeof T=="function"?T(x):T,I=(typeof M=="function"?M(x):M)||Object.keys(C).reduce((k,L)=>(k[L]="",k),{});if(h==="initial"&&d(k=>({transitionProperty:k.transitionProperty,...D,...C})),h==="open"&&d({transitionProperty:Object.keys(I).map(XQ).join(","),transitionDuration:v+"ms",...D,...I}),h==="close"){const k=E||C;d({transitionProperty:Object.keys(k).map(XQ).join(","),transitionDuration:b+"ms",...D,...k})}},[l,s,b,y,f,g,m,v,h]),{isMounted:c,styles:u}}const wnt=function(e,t){var r;let{open:n,dataRef:i}=e,{listRef:o,activeIndex:a,onMatch:s=()=>{},enabled:l=!0,findMatch:u=null,resetMs:d=1e3,ignoreKeys:c=[],selectedIndex:h=null}=t===void 0?{listRef:{current:[]},activeIndex:null}:t;const f=te.useRef(),g=te.useRef(""),y=te.useRef((r=h??a)!=null?r:-1),m=te.useRef(null),p=I1(s),v=Wl(u),b=Wl(c);return ti(()=>{n&&(clearTimeout(f.current),m.current=null,g.current="")},[n]),ti(()=>{if(n&&g.current===""){var x;y.current=(x=h??a)!=null?x:-1}},[n,h,a]),te.useMemo(()=>{if(!l)return{};function x(_){const A=UI(_.nativeEvent);if(Gl(A)&&(A0(ws(A))!==_.currentTarget&&A.closest('[role="dialog"],[role="menu"],[role="listbox"],[role="tree"],[role="grid"]')!==_.currentTarget))return;g.current.length>0&&g.current[0]!==" "&&(i.current.typing=!0,_.key===" "&&Nl(_));const M=o.current;if(M==null||b.current.includes(_.key)||_.key.length!==1||_.ctrlKey||_.metaKey||_.altKey)return;M.every(k=>{var L,U;return k?((L=k[0])==null?void 0:L.toLocaleLowerCase())!==((U=k[1])==null?void 0:U.toLocaleLowerCase()):!0})&&g.current===_.key&&(g.current="",y.current=m.current),g.current+=_.key,clearTimeout(f.current),f.current=setTimeout(()=>{g.current="",y.current=m.current,i.current.typing=!1},d);const C=y.current,E=[...M.slice((C||0)+1),...M.slice(0,(C||0)+1)],D=v.current?v.current(E,g.current):E.find(k=>(k==null?void 0:k.toLocaleLowerCase().indexOf(g.current.toLocaleLowerCase()))===0),I=D?M.indexOf(D):-1;I!==-1&&(p(I),m.current=I)}return{reference:{onKeyDown:x},floating:{onKeyDown:x}}},[l,i,o,d,b,v,p])};function YQ(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const _nt=e=>({name:"inner",options:e,async fn(t){const{listRef:r,overflowRef:n,onFallbackChange:i,offset:o=0,index:a=0,minItemsVisible:s=4,referenceOverflowThreshold:l=0,scrollRef:u,...d}=e,{rects:c,elements:{floating:h}}=t,f=r.current[a];if(!f)return{};const g={...t,...await Rfe(-f.offsetTop-c.reference.height/2-f.offsetHeight/2-o).fn(t)},y=(u==null?void 0:u.current)||h,m=await Qc(YQ(g,y.scrollHeight),d),p=await Qc(g,{...d,elementContext:"reference"}),v=Math.max(0,m.top),b=g.y+v,x=Math.max(0,y.scrollHeight-v-Math.max(0,m.bottom));return y.style.maxHeight=x+"px",y.scrollTop=v,i&&(y.offsetHeight<f.offsetHeight*Math.min(s,r.current.length-1)-1||p.top>=-l||p.bottom>=-l?Ph.flushSync(()=>i(!0)):Ph.flushSync(()=>i(!1))),n&&(n.current=await Qc(YQ({...g,y:b},y.offsetHeight),d)),{y:b}}}),Snt=(e,t)=>{let{open:r,elements:n}=e,{enabled:i=!0,overflowRef:o,scrollRef:a,onChange:s}=t;const l=I1(s),u=te.useRef(!1),d=te.useRef(null),c=te.useRef(null);return te.useEffect(()=>{if(!i)return;function h(g){if(g.ctrlKey||!f||o.current==null)return;const y=g.deltaY,m=o.current.top>=-.5,p=o.current.bottom>=-.5,v=f.scrollHeight-f.clientHeight,b=y<0?-1:1,x=y<0?"max":"min";f.scrollHeight<=f.clientHeight||(!m&&y>0||!p&&y<0?(g.preventDefault(),Ph.flushSync(()=>{l(_=>_+Math[x](y,v*b))})):/firefox/i.test(Wfe())&&(f.scrollTop+=y))}const f=(a==null?void 0:a.current)||n.floating;if(r&&f)return f.addEventListener("wheel",h),requestAnimationFrame(()=>{d.current=f.scrollTop,o.current!=null&&(c.current={...o.current})}),()=>{d.current=null,c.current=null,f.removeEventListener("wheel",h)}},[i,r,n.floating,o,a,l]),te.useMemo(()=>i?{floating:{onKeyDown(){u.current=!0},onWheel(){u.current=!1},onPointerMove(){u.current=!1},onScroll(){const h=(a==null?void 0:a.current)||n.floating;if(!(!o.current||!h||!u.current)){if(d.current!==null){const f=h.scrollTop-d.current;(o.current.bottom<-.5&&f<-1||o.current.top<-.5&&f>1)&&Ph.flushSync(()=>l(g=>g+f))}requestAnimationFrame(()=>{d.current=h.scrollTop})}}}}:{},[i,o,n.floating,a,l])};function Ant(e,t){const[r,n]=e;let i=!1;const o=t.length;for(let a=0,s=o-1;a<o;s=a++){const[l,u]=t[a]||[0,0],[d,c]=t[s]||[0,0];u>=n!=c>=n&&r<=(d-l)*(n-u)/(c-u)+l&&(i=!i)}return i}function Mnt(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function Cnt(e){let{restMs:t=0,buffer:r=.5,blockPointerEvents:n=!1}=e===void 0?{}:e,i,o=!1,a=!1;const s=l=>{let{x:u,y:d,placement:c,elements:h,onClose:f,nodeId:g,tree:y}=l;return function(p){function v(){clearTimeout(i),f()}if(clearTimeout(i),!h.domReference||!h.floating||c==null||u==null||d==null)return;const{clientX:b,clientY:x}=p,_=[b,x],A=UI(p),M=p.type==="mouseleave",T=ls(h.floating,A),C=ls(h.domReference,A),E=h.domReference.getBoundingClientRect(),D=h.floating.getBoundingClientRect(),I=c.split("-")[0],k=u>D.right-D.width/2,L=d>D.bottom-D.height/2,U=Mnt(_,E);if(T&&(a=!0),C&&(a=!1),C&&!M){a=!0;return}if(M&&Gl(p.relatedTarget)&&ls(h.floating,p.relatedTarget)||y&&HS(y.nodesRef.current,g).some(V=>{let{context:j}=V;return j==null?void 0:j.open}))return;if(I==="top"&&d>=E.bottom-1||I==="bottom"&&d<=E.top+1||I==="left"&&u>=E.right-1||I==="right"&&u<=E.left+1)return v();let W=[];switch(I){case"top":W=[[D.left,E.top+1],[D.left,D.bottom-1],[D.right,D.bottom-1],[D.right,E.top+1]],o=b>=D.left&&b<=D.right&&x>=D.top&&x<=E.top+1;break;case"bottom":W=[[D.left,D.top+1],[D.left,E.bottom-1],[D.right,E.bottom-1],[D.right,D.top+1]],o=b>=D.left&&b<=D.right&&x>=E.bottom-1&&x<=D.bottom;break;case"left":W=[[D.right-1,D.bottom],[D.right-1,D.top],[E.left+1,D.top],[E.left+1,D.bottom]],o=b>=D.left&&b<=E.left+1&&x>=D.top&&x<=D.bottom;break;case"right":W=[[E.right-1,D.bottom],[E.right-1,D.top],[D.left+1,D.top],[D.left+1,D.bottom]],o=b>=E.right-1&&b<=D.right&&x>=D.top&&x<=D.bottom;break}function G(V){let[j,H]=V;const Y=D.width>E.width,Q=D.height>E.height;switch(I){case"top":{const $=[Y?j+r/2:k?j+r*4:j-r*4,H+r+1],ne=[Y?j-r/2:k?j+r*4:j-r*4,H+r+1],Z=[[D.left,k||Y?D.bottom-r:D.top],[D.right,k?Y?D.bottom-r:D.top:D.bottom-r]];return[$,ne,...Z]}case"bottom":{const $=[Y?j+r/2:k?j+r*4:j-r*4,H-r],ne=[Y?j-r/2:k?j+r*4:j-r*4,H-r],Z=[[D.left,k||Y?D.top+r:D.bottom],[D.right,k?Y?D.top+r:D.bottom:D.top+r]];return[$,ne,...Z]}case"left":{const $=[j+r+1,Q?H+r/2:L?H+r*4:H-r*4],ne=[j+r+1,Q?H-r/2:L?H+r*4:H-r*4];return[...[[L||Q?D.right-r:D.left,D.top],[L?Q?D.right-r:D.left:D.right-r,D.bottom]],$,ne]}case"right":{const $=[j-r,Q?H+r/2:L?H+r*4:H-r*4],ne=[j-r,Q?H-r/2:L?H+r*4:H-r*4],Z=[[L||Q?D.left+r:D.right,D.top],[L?Q?D.left+r:D.right:D.left+r,D.bottom]];return[$,ne,...Z]}}}const z=o?W:G([u,d]);if(!o){if(a&&!U)return v();Ant([b,x],z)?t&&!a&&(i=setTimeout(v,t)):v()}}};return s.__options={blockPointerEvents:n},s}function Tnt(e){e===void 0&&(e={});const{open:t=!1,onOpenChange:r,nodeId:n}=e,i=Urt(e),o=G0(),a=te.useRef(null),s=te.useRef({}),l=te.useState(()=>jfe())[0],[u,d]=te.useState(null),c=te.useCallback(p=>{const v=Gl(p)?{getBoundingClientRect:()=>p.getBoundingClientRect(),contextElement:p}:p;i.refs.setReference(v)},[i.refs]),h=te.useCallback(p=>{(Gl(p)||p===null)&&(a.current=p,d(p)),(Gl(i.refs.reference.current)||i.refs.reference.current===null||p!==null&&!Gl(p))&&i.refs.setReference(p)},[i.refs]),f=te.useMemo(()=>({...i.refs,setReference:h,setPositionReference:c,domReference:a}),[i.refs,h,c]),g=te.useMemo(()=>({...i.elements,domReference:u}),[i.elements,u]),y=I1(r),m=te.useMemo(()=>({...i,refs:f,elements:g,dataRef:s,nodeId:n,events:l,open:t,onOpenChange:y}),[i,n,l,t,y,f,g]);return ti(()=>{const p=o==null?void 0:o.nodesRef.current.find(v=>v.id===n);p&&(p.context=m)}),te.useMemo(()=>({...i,context:m,refs:f,reference:h,positionReference:c}),[i,f,m,h,c])}function uk(e,t,r){const n=new Map;return{...r==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[r]:null).concat(e).reduce((i,o)=>(o&&Object.entries(o).forEach(a=>{let[s,l]=a;if(s.indexOf("on")===0){if(n.has(s)||n.set(s,[]),typeof l=="function"){var u;(u=n.get(s))==null||u.push(l),i[s]=function(){for(var d,c=arguments.length,h=new Array(c),f=0;f<c;f++)h[f]=arguments[f];(d=n.get(s))==null||d.forEach(g=>g(...h))}}}else i[s]=l}),i),{})}}const Ent=function(e){e===void 0&&(e=[]);const t=e,r=te.useCallback(o=>uk(o,e,"reference"),t),n=te.useCallback(o=>uk(o,e,"floating"),t),i=te.useCallback(o=>uk(o,e,"item"),e.map(o=>o==null?void 0:o.item));return te.useMemo(()=>({getReferenceProps:r,getFloatingProps:n,getItemProps:i}),[r,n,i])},Pnt=Object.freeze(Object.defineProperty({__proto__:null,FloatingDelayGroup:Krt,FloatingFocusManager:ant,FloatingNode:Wrt,FloatingOverlay:snt,FloatingPortal:int,FloatingTree:qrt,arrow:zrt,autoPlacement:frt,autoUpdate:Frt,computePosition:Vfe,detectOverflow:Qc,flip:prt,getOverflowAncestors:Ah,hide:mrt,inline:vrt,inner:_nt,limitShift:xrt,offset:Rfe,platform:Ufe,safePolygon:Cnt,shift:brt,size:wrt,useClick:lnt,useDelayGroup:Jrt,useDelayGroupContext:Jfe,useDismiss:hnt,useFloating:Tnt,useFloatingNodeId:Grt,useFloatingParentNodeId:R1,useFloatingPortalNode:rpe,useFloatingTree:G0,useFocus:fnt,useHover:Yrt,useId:ZA,useInnerOffset:Snt,useInteractions:Ent,useListNavigation:gnt,useMergeRefs:vnt,useRole:ynt,useTransitionStatus:ipe,useTransitionStyles:xnt,useTypeahead:wnt},Symbol.toStringTag,{value:"Module"})),fo=r1(Pnt);var ope={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,y){for(var m in y)Object.defineProperty(g,m,{enumerable:!0,get:y[m]})}t(e,{DialogHeader:function(){return h},default:function(){return f}});var r=u(te),n=u(gr),i=Qt,o=u(Yt),a=jt,s=P1;function l(){return l=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var m=arguments[y];for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(g[p]=m[p])}return g},l.apply(this,arguments)}function u(g){return g&&g.__esModule?g:{default:g}}function d(g,y){if(g==null)return{};var m=c(g,y),p,v;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(g);for(v=0;v<b.length;v++)p=b[v],!(y.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(g,p)&&(m[p]=g[p])}return m}function c(g,y){if(g==null)return{};var m={},p=Object.keys(g),v,b;for(b=0;b<p.length;b++)v=p[b],!(y.indexOf(v)>=0)&&(m[v]=g[v]);return m}var h=r.default.forwardRef(function(g,y){var m=g.className,p=g.children,v=d(g,["className","children"]),b=(0,a.useTheme)().dialogHeader,x=b.defaultProps,_=b.styles.base;m=m??x.className;var A=(0,i.twMerge)((0,n.default)((0,o.default)(_)),m);return r.default.createElement("div",l({},v,{ref:y,className:A}),p)});h.propTypes={className:s.propTypesClassName,children:s.propTypesChildren},h.displayName="MaterialTailwind.DialogHeader";var f=h})(ope);var ape={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(y,m){for(var p in m)Object.defineProperty(y,p,{enumerable:!0,get:m[p]})}t(e,{DialogBody:function(){return f},default:function(){return g}});var r=d(te),n=d(gr),i=Qt,o=d(Yt),a=jt,s=P1;function l(y,m,p){return m in y?Object.defineProperty(y,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[m]=p,y}function u(){return u=Object.assign||function(y){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(y[v]=p[v])}return y},u.apply(this,arguments)}function d(y){return y&&y.__esModule?y:{default:y}}function c(y,m){if(y==null)return{};var p=h(y,m),v,b;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);for(b=0;b<x.length;b++)v=x[b],!(m.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(y,v)&&(p[v]=y[v])}return p}function h(y,m){if(y==null)return{};var p={},v=Object.keys(y),b,x;for(x=0;x<v.length;x++)b=v[x],!(m.indexOf(b)>=0)&&(p[b]=y[b]);return p}var f=r.default.forwardRef(function(y,m){var p=y.divider,v=y.className,b=y.children,x=c(y,["divider","className","children"]),_=(0,a.useTheme)().dialogBody,A=_.defaultProps,M=_.styles.base;v=v??A.className;var T=(0,i.twMerge)((0,n.default)((0,o.default)(M.initial),l({},(0,o.default)(M.divider),p)),v);return r.default.createElement("div",u({},x,{ref:m,className:T}),b)});f.propTypes={divider:s.propTypesDivider,className:s.propTypesClassName,children:s.propTypesChildren},f.displayName="MaterialTailwind.DialogBody";var g=f})(ape);var spe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,y){for(var m in y)Object.defineProperty(g,m,{enumerable:!0,get:y[m]})}t(e,{DialogFooter:function(){return h},default:function(){return f}});var r=u(te),n=u(gr),i=Qt,o=u(Yt),a=jt,s=P1;function l(){return l=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var m=arguments[y];for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(g[p]=m[p])}return g},l.apply(this,arguments)}function u(g){return g&&g.__esModule?g:{default:g}}function d(g,y){if(g==null)return{};var m=c(g,y),p,v;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(g);for(v=0;v<b.length;v++)p=b[v],!(y.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(g,p)&&(m[p]=g[p])}return m}function c(g,y){if(g==null)return{};var m={},p=Object.keys(g),v,b;for(b=0;b<p.length;b++)v=p[b],!(y.indexOf(v)>=0)&&(m[v]=g[v]);return m}var h=r.default.forwardRef(function(g,y){var m=g.className,p=g.children,v=d(g,["className","children"]),b=(0,a.useTheme)().dialogFooter,x=b.defaultProps,_=b.styles.base;m=m??x.className;var A=(0,i.twMerge)((0,n.default)((0,o.default)(_)),m);return r.default.createElement("div",l({},v,{ref:y,className:A}),p)});h.propTypes={className:s.propTypesClassName,children:s.propTypesChildren},h.displayName="MaterialTailwind.DialogFooter";var f=h})(spe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(E,D){for(var I in D)Object.defineProperty(E,I,{enumerable:!0,get:D[I]})}t(e,{Dialog:function(){return T},DialogHeader:function(){return f.DialogHeader},DialogBody:function(){return g.DialogBody},DialogFooter:function(){return y.DialogFooter},default:function(){return C}});var r=v(te),n=v(Kt),i=fo,o=Do,a=v(gr),s=v(jo),l=Qt,u=v(qn),d=v(Yt),c=jt,h=P1,f=ope,g=ape,y=spe;function m(E,D,I){return D in E?Object.defineProperty(E,D,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[D]=I,E}function p(){return p=Object.assign||function(E){for(var D=1;D<arguments.length;D++){var I=arguments[D];for(var k in I)Object.prototype.hasOwnProperty.call(I,k)&&(E[k]=I[k])}return E},p.apply(this,arguments)}function v(E){return E&&E.__esModule?E:{default:E}}function b(E){for(var D=1;D<arguments.length;D++){var I=arguments[D]!=null?arguments[D]:{},k=Object.keys(I);typeof Object.getOwnPropertySymbols=="function"&&(k=k.concat(Object.getOwnPropertySymbols(I).filter(function(L){return Object.getOwnPropertyDescriptor(I,L).enumerable}))),k.forEach(function(L){m(E,L,I[L])})}return E}function x(E,D){var I=Object.keys(E);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(E);D&&(k=k.filter(function(L){return Object.getOwnPropertyDescriptor(E,L).enumerable})),I.push.apply(I,k)}return I}function _(E,D){return D=D??{},Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(D)):x(Object(D)).forEach(function(I){Object.defineProperty(E,I,Object.getOwnPropertyDescriptor(D,I))}),E}function A(E,D){if(E==null)return{};var I=M(E,D),k,L;if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(E);for(L=0;L<U.length;L++)k=U[L],!(D.indexOf(k)>=0)&&Object.prototype.propertyIsEnumerable.call(E,k)&&(I[k]=E[k])}return I}function M(E,D){if(E==null)return{};var I={},k=Object.keys(E),L,U;for(U=0;U<k.length;U++)L=k[U],!(D.indexOf(L)>=0)&&(I[L]=E[L]);return I}var T=r.default.forwardRef(function(E,D){var I=E.open,k=E.handler,L=E.size,U=E.dismiss,W=E.animate,G=E.className,z=E.children,V=A(E,["open","handler","size","dismiss","animate","className","children"]),j=(0,c.useTheme)().dialog,H=j.defaultProps,Y=j.valid,Q=j.styles,$=Q.base,ne=Q.sizes;k=k??void 0,L=L??H.size,U=U??H.dismiss,W=W??H.animate,G=G??H.className;var Z=(0,a.default)((0,d.default)($.backdrop)),ce=(0,l.twMerge)((0,a.default)((0,d.default)($.container),(0,d.default)(ne[(0,u.default)(Y.sizes,L,"md")])),G),ae={unmount:{opacity:0,y:-50,transition:{duration:.3}},mount:{opacity:1,y:0,transition:{duration:.3}}},ie={unmount:{opacity:0,transition:{delay:.2}},mount:{opacity:1}},le=(0,s.default)(ae,W),se=(0,i.useFloating)({open:I,onOpenChange:k}),re=se.floating,ye=se.context,be=(0,i.useId)(),_e="".concat(be,"-label"),Se="".concat(be,"-description"),Fe=(0,i.useInteractions)([(0,i.useClick)(ye),(0,i.useRole)(ye),(0,i.useDismiss)(ye,U)]).getFloatingProps,Re=(0,i.useMergeRefs)([D,re]),Le=o.AnimatePresence;return r.default.createElement(o.LazyMotion,{features:o.domAnimation},r.default.createElement(i.FloatingPortal,null,r.default.createElement(Le,null,I&&r.default.createElement(i.FloatingOverlay,{style:{zIndex:9999},lockScroll:!0},r.default.createElement(i.FloatingFocusManager,{context:ye},r.default.createElement(o.m.div,{className:L==="xxl"?"":Z,initial:"unmount",exit:"unmount",animate:I?"mount":"unmount",variants:ie,transition:{duration:.2}},r.default.createElement(o.m.div,p({},Fe(_(b({},V),{ref:Re,className:ce,"aria-labelledby":_e,"aria-describedby":Se})),{initial:"unmount",exit:"unmount",animate:I?"mount":"unmount",variants:le}),z)))))))});T.propTypes={open:h.propTypesOpen,handler:h.propTypesHandler,size:n.default.oneOf(h.propTypesSize),dismiss:h.propTypesDismiss,animate:h.propTypesAnimate,className:h.propTypesClassName,children:h.propTypesChildren},T.displayName="MaterialTailwind.Dialog";var C=Object.assign(T,{Header:f.DialogHeader,Body:g.DialogBody,Footer:y.DialogFooter})})(Sfe);var lpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{Input:function(){return g},default:function(){return y}});var r=c(te),n=c(Kt),i=c(gr),o=c(qn),a=c(Yt),s=jt,l=GM;function u(m,p,v){return p in m?Object.defineProperty(m,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[p]=v,m}function d(){return d=Object.assign||function(m){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},d.apply(this,arguments)}function c(m){return m&&m.__esModule?m:{default:m}}function h(m,p){if(m==null)return{};var v=f(m,p),b,x;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);for(x=0;x<_.length;x++)b=_[x],!(p.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(v[b]=m[b])}return v}function f(m,p){if(m==null)return{};var v={},b=Object.keys(m),x,_;for(_=0;_<b.length;_++)x=b[_],!(p.indexOf(x)>=0)&&(v[x]=m[x]);return v}var g=r.default.forwardRef(function(m,p){var v=m.variant,b=m.color,x=m.size,_=m.label,A=m.error,M=m.success,T=m.icon,C=m.containerProps,E=m.labelProps,D=m.className,I=m.shrink,k=m.inputRef,L=h(m,["variant","color","size","label","error","success","icon","containerProps","labelProps","className","shrink","inputRef"]),U=(0,s.useTheme)().input,W=U.defaultProps,G=U.valid,z=U.styles,V=z.base,j=z.variants;v=v??W.variant,x=x??W.size,b=b??W.color,_=_??W.label,E=E??W.labelProps,C=C??W.containerProps,D=D??W.className,I=I??W.shrink,T=T??W.icon;var H=j[(0,o.default)(G.variants,v,"outlined")],Y=H.sizes[(0,o.default)(G.sizes,x,"md")],Q=(0,a.default)(H.error.input),$=(0,a.default)(H.success.input),ne=(0,a.default)(H.shrink.input),Z=(0,a.default)(H.colors.input[(0,o.default)(G.colors,b,"gray")]),ce=(0,a.default)(H.error.label),ae=(0,a.default)(H.success.label),ie=(0,a.default)(H.shrink.label),le=(0,a.default)(H.colors.label[(0,o.default)(G.colors,b,"gray")]),se=(0,i.default)((0,a.default)(V.container),(0,a.default)(Y.container),C==null?void 0:C.className),re=(0,i.default)((0,a.default)(V.input),(0,a.default)(H.base.input),(0,a.default)(Y.input),u({},(0,a.default)(H.base.inputWithIcon),T),u({},Z,!A&&!M),u({},Q,A),u({},$,M),u({},ne,I),D),ye=(0,i.default)((0,a.default)(V.label),(0,a.default)(H.base.label),(0,a.default)(Y.label),u({},le,!A&&!M),u({},ce,A),u({},ae,M),u({},ie,I),E==null?void 0:E.className),be=(0,i.default)((0,a.default)(V.icon),(0,a.default)(H.base.icon),(0,a.default)(Y.icon)),_e=(0,i.default)((0,a.default)(V.asterisk));return r.default.createElement("div",d({},C,{ref:p,className:se}),T&&r.default.createElement("div",{className:be},T),r.default.createElement("input",d({},L,{ref:k,className:re,placeholder:(L==null?void 0:L.placeholder)||" "})),r.default.createElement("label",d({},E,{className:ye}),_," ",L.required?r.default.createElement("span",{className:_e},"*"):""))});g.propTypes={variant:n.default.oneOf(l.propTypesVariant),size:n.default.oneOf(l.propTypesSize),color:n.default.oneOf(l.propTypesColor),label:l.propTypesLabel,error:l.propTypesError,success:l.propTypesSuccess,icon:l.propTypesIcon,labelProps:l.propTypesLabelProps,containerProps:l.propTypesContainerProps,shrink:l.propTypesShrink,className:l.propTypesClassName},g.displayName="MaterialTailwind.Input";var y=g})(lpe);var upe={},eC={},L1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,_){for(var A in _)Object.defineProperty(x,A,{enumerable:!0,get:_[A]})}t(e,{propTypesOpen:function(){return u},propTypesHandler:function(){return d},propTypesPlacement:function(){return c},propTypesOffset:function(){return h},propTypesDismiss:function(){return f},propTypesAnimate:function(){return g},propTypesLockScroll:function(){return y},propTypesDisabled:function(){return m},propTypesClassName:function(){return p},propTypesChildren:function(){return v},propTypesContextValue:function(){return b}});var r=o(Kt),n=Un;function i(x,_,A){return _ in x?Object.defineProperty(x,_,{value:A,enumerable:!0,configurable:!0,writable:!0}):x[_]=A,x}function o(x){return x&&x.__esModule?x:{default:x}}function a(x){for(var _=1;_<arguments.length;_++){var A=arguments[_]!=null?arguments[_]:{},M=Object.keys(A);typeof Object.getOwnPropertySymbols=="function"&&(M=M.concat(Object.getOwnPropertySymbols(A).filter(function(T){return Object.getOwnPropertyDescriptor(A,T).enumerable}))),M.forEach(function(T){i(x,T,A[T])})}return x}function s(x,_){var A=Object.keys(x);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(x);_&&(M=M.filter(function(T){return Object.getOwnPropertyDescriptor(x,T).enumerable})),A.push.apply(A,M)}return A}function l(x,_){return _=_??{},Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(_)):s(Object(_)).forEach(function(A){Object.defineProperty(x,A,Object.getOwnPropertyDescriptor(_,A))}),x}var u=r.default.bool,d=r.default.func,c=n.propTypesPlacements,h=n.propTypesOffsetType,f=r.default.shape(l(a({},n.propTypesDismissType),{itemPress:r.default.bool})),g=n.propTypesAnimation,y=r.default.bool,m=r.default.bool,p=r.default.string,v=r.default.node.isRequired,b=r.default.shape({open:r.default.bool.isRequired,handler:r.default.func.isRequired,setInternalOpen:r.default.func.isRequired,strategy:r.default.oneOf(["fixed","absolute"]).isRequired,x:r.default.number.isRequired,y:r.default.number.isRequired,reference:r.default.func.isRequired,floating:r.default.func.isRequired,listItemsRef:r.default.instanceOf(Object).isRequired,getReferenceProps:r.default.func.isRequired,getFloatingProps:r.default.func.isRequired,getItemProps:r.default.func.isRequired,appliedAnimation:g.isRequired,lockScroll:r.default.bool.isRequired,context:r.default.instanceOf(Object).isRequired,tree:r.default.any.isRequired,allowHover:r.default.bool.isRequired,activeIndex:r.default.number.isRequired,setActiveIndex:r.default.func.isRequired,nested:r.default.bool.isRequired})})(L1);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,u){for(var d in u)Object.defineProperty(l,d,{enumerable:!0,get:u[d]})}t(e,{MenuContext:function(){return o},useMenu:function(){return a},MenuContextProvider:function(){return s}});var r=i(te),n=L1;function i(l){return l&&l.__esModule?l:{default:l}}var o=r.default.createContext(null);o.displayName="MaterialTailwind.MenuContext";function a(){var l=r.default.useContext(o);if(!l)throw new Error("useMenu() must be used within a Menu. It happens when you use MenuCore, MenuHandler, MenuItem or MenuList components outside the Menu component.");return l}var s=function(l){var u=l.value,d=l.children;return r.default.createElement(o.Provider,{value:u},d)};s.prototypes={value:n.propTypesContextValue,children:n.propTypesChildren},s.displayName="MaterialTailwind.MenuContextProvider"})(eC);var cpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{MenuCore:function(){return m},default:function(){return p}});var r=c(te),n=c(Kt),i=fo,o=c(jo),a=jt,s=eC,l=L1;function u(v,b){(b==null||b>v.length)&&(b=v.length);for(var x=0,_=new Array(b);x<b;x++)_[x]=v[x];return _}function d(v){if(Array.isArray(v))return v}function c(v){return v&&v.__esModule?v:{default:v}}function h(v,b){var x=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(x!=null){var _=[],A=!0,M=!1,T,C;try{for(x=x.call(v);!(A=(T=x.next()).done)&&(_.push(T.value),!(b&&_.length===b));A=!0);}catch(E){M=!0,C=E}finally{try{!A&&x.return!=null&&x.return()}finally{if(M)throw C}}return _}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(v,b){return d(v)||h(v,b)||y(v,b)||f()}function y(v,b){if(v){if(typeof v=="string")return u(v,b);var x=Object.prototype.toString.call(v).slice(8,-1);if(x==="Object"&&v.constructor&&(x=v.constructor.name),x==="Map"||x==="Set")return Array.from(x);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return u(v,b)}}var m=r.default.forwardRef(function(v,b){var x=v.open,_=v.handler,A=v.placement,M=v.offset,T=v.dismiss,C=v.animate,E=v.lockScroll,D=v.allowHover,I=v.children,k=(0,a.useTheme)().menu,L=k.defaultProps,U=g(r.default.useState(!1),2),W=U[0],G=U[1],z=g(r.default.useState(!1),2),V=z[0],j=z[1];x=x??W,_=_??G,A=A??L.placement,M=M??L.offset,T=T??L.dismiss,C=C??L.animate,E=E??L.lockScroll;var H={unmount:{opacity:0,transformOrigin:"top",transform:"scale(0.95)",transition:{duration:.2,times:[.4,0,.2,1]}},mount:{opacity:1,transformOrigin:"top",transform:"scale(1)",transition:{duration:.2,times:[.4,0,.2,1]}}},Y=(0,o.default)(H,C),Q=g(r.default.useState(null),2),$=Q[0],ne=Q[1],Z=r.default.useRef([]),ce=r.default.useRef(r.default.Children.map(I,function(J){return r.default.isValidElement(J)?J.props.label:null})),ae=(0,i.useFloatingTree)(),ie=(0,i.useFloatingNodeId)(),le=(0,i.useFloatingParentNodeId)(),se=le!=null,re=(0,i.useFloating)({open:x,nodeId:ie,placement:A,onOpenChange:_,middleware:[(0,i.offset)(M),(0,i.flip)(),(0,i.shift)()],whileElementsMounted:i.autoUpdate}),ye=re.x,be=re.y,_e=re.strategy,Se=re.refs,Fe=re.context,Re=(0,i.useInteractions)([(0,i.useHover)(Fe,{handleClose:(0,i.safePolygon)({restMs:25,blockPointerEvents:!0}),enabled:D||se&&V,delay:{open:75}}),(0,i.useClick)(Fe,{toggle:!se||!V,event:"mousedown",ignoreMouse:se}),(0,i.useRole)(Fe,{role:"menu"}),(0,i.useDismiss)(Fe,T),(0,i.useListNavigation)(Fe,{listRef:Z,activeIndex:$,nested:se,onNavigate:ne}),(0,i.useTypeahead)(Fe,{listRef:ce,onMatch:x?ne:void 0,activeIndex:$})]),Le=Re.getReferenceProps,rt=Re.getFloatingProps,st=Re.getItemProps;r.default.useEffect(function(){var J=function(){T.itemPress&&_(!1)},ge=function(De){De.nodeId!==ie&&De.parentId===le&&_(!1)};return ae==null||ae.events.on("click",J),ae==null||ae.events.on("menuopen",ge),function(){ae==null||ae.events.off("click",J),ae==null||ae.events.off("menuopen",ge)}},[ae,ie,le,_,T]),r.default.useEffect(function(){x&&(ae==null||ae.events.emit("menuopen",{parentId:le,nodeId:ie}))},[ae,x,ie,le]),r.default.useEffect(function(){var J=function(De){var Ve=De.pointerType;Ve!=="touch"&&j(!0)},ge=function(){j(!1)};return window.addEventListener("pointermove",J,{once:!0,capture:!0}),window.addEventListener("keydown",ge,!0),function(){window.removeEventListener("pointermove",J,{capture:!0}),window.removeEventListener("keydown",ge,!0)}},[V]);var he=(0,i.useMergeRefs)([Se.setReference,b]),q=r.default.useMemo(function(){return{open:x,handler:_,setInternalOpen:G,strategy:_e,x:ye,y:be,reference:he,floating:Se.setFloating,listItemsRef:Z,getReferenceProps:Le,getFloatingProps:rt,getItemProps:st,appliedAnimation:Y,lockScroll:E,context:Fe,activeIndex:$,tree:ae,allowHover:D,internalAllowHover:V,nested:se,setActiveIndex:ne}},[x,_,G,_e,ye,be,he,Se,Le,rt,st,Y,E,Fe,$,ae,D,V,se,ne]);return r.default.createElement(s.MenuContextProvider,{value:q},r.default.createElement(i.FloatingNode,{id:ie},I))});m.propTypes={open:l.propTypesOpen,handler:l.propTypesHandler,placement:n.default.oneOf(l.propTypesPlacement),offset:l.propTypesOffset,dismiss:l.propTypesDismiss,animate:l.propTypesAnimate,lockScroll:l.propTypesLockScroll,children:l.propTypesChildren},m.displayName="MaterialTailwind.MenuCore";var p=m})(cpe);var dpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(y,m){for(var p in m)Object.defineProperty(y,p,{enumerable:!0,get:m[p]})}t(e,{MenuHandler:function(){return f},default:function(){return g}});var r=s(te),n=fo,i=eC,o=L1;function a(y,m,p){return m in y?Object.defineProperty(y,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[m]=p,y}function s(y){return y&&y.__esModule?y:{default:y}}function l(y){for(var m=1;m<arguments.length;m++){var p=arguments[m]!=null?arguments[m]:{},v=Object.keys(p);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(p).filter(function(b){return Object.getOwnPropertyDescriptor(p,b).enumerable}))),v.forEach(function(b){a(y,b,p[b])})}return y}function u(y,m){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(y);m&&(v=v.filter(function(b){return Object.getOwnPropertyDescriptor(y,b).enumerable})),p.push.apply(p,v)}return p}function d(y,m){return m=m??{},Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(m)):u(Object(m)).forEach(function(p){Object.defineProperty(y,p,Object.getOwnPropertyDescriptor(m,p))}),y}function c(y,m){if(y==null)return{};var p=h(y,m),v,b;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);for(b=0;b<x.length;b++)v=x[b],!(m.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(y,v)&&(p[v]=y[v])}return p}function h(y,m){if(y==null)return{};var p={},v=Object.keys(y),b,x;for(x=0;x<v.length;x++)b=v[x],!(m.indexOf(b)>=0)&&(p[b]=y[b]);return p}var f=r.default.forwardRef(function(y,m){var p=y.children,v=c(y,["children"]),b=(0,i.useMenu)(),x=b.getReferenceProps,_=b.reference,A=b.nested,M=(0,n.useMergeRefs)([m,_]);return r.default.cloneElement(p,l({},x(l(d(l({},v),{ref:M,onClick:function(C){C.stopPropagation()}}),A&&{role:"menuitem"}))))});f.propTypes={children:o.propTypesChildren},f.displayName="MaterialTailwind.MenuHandler";var g=f})(dpe);var hpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{MenuList:function(){return y},default:function(){return m}});var r=h(te),n=fo,i=Do,o=h(gr),a=Qt,s=h(Yt),l=jt,u=eC,d=L1;function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.children,x=p.className,_=f(p,["children","className"]),A=(0,l.useTheme)().menu,M=A.styles.base,T=(0,u.useMenu)(),C=T.open,E=T.handler,D=T.strategy,I=T.x,k=T.y,L=T.floating,U=T.listItemsRef,W=T.getFloatingProps,G=T.getItemProps,z=T.appliedAnimation,V=T.lockScroll,j=T.context,H=T.activeIndex,Y=T.tree,Q=T.allowHover,$=T.internalAllowHover,ne=T.setActiveIndex,Z=T.nested;x=x??"";var ce=(0,a.twMerge)((0,o.default)((0,s.default)(M.menu)),x),ae=(0,n.useMergeRefs)([v,L]),ie=i.AnimatePresence,le=r.default.createElement(i.m.div,c({},_,{ref:ae,style:{position:D,top:k??0,left:I??0},className:ce},W({onKeyDown:function(re){re.key==="Tab"&&(E(!1),re.shiftKey&&re.preventDefault())}}),{initial:"unmount",exit:"unmount",animate:C?"mount":"unmount",variants:z}),r.default.Children.map(b,function(se,re){return r.default.isValidElement(se)&&r.default.cloneElement(se,G({tabIndex:H===re?0:-1,role:"menuitem",className:se.props.className,ref:function(be){U.current[re]=be},onClick:function(be){if(se.props.onClick){var _e,Se;(Se=(_e=se.props).onClick)===null||Se===void 0||Se.call(_e,be)}Y==null||Y.events.emit("click")},onMouseEnter:function(){(Q&&C||$&&C)&&ne(re)}}))}));return r.default.createElement(i.LazyMotion,{features:i.domAnimation},r.default.createElement(n.FloatingPortal,null,r.default.createElement(ie,null,C&&r.default.createElement(r.default.Fragment,null,V?r.default.createElement(n.FloatingOverlay,{lockScroll:!0},r.default.createElement(n.FloatingFocusManager,{context:j,modal:!Z,initialFocus:Z?-1:0,returnFocus:!Z,visuallyHiddenDismiss:!0},le)):r.default.createElement(n.FloatingFocusManager,{context:j,modal:!Z,initialFocus:Z?-1:0,returnFocus:!Z,visuallyHiddenDismiss:!0},le)))))});y.propTypes={className:d.propTypesClassName,children:d.propTypesChildren},y.displayName="MaterialTailwind.MenuList";var m=y})(hpe);var fpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(y,m){for(var p in m)Object.defineProperty(y,p,{enumerable:!0,get:m[p]})}t(e,{MenuItem:function(){return f},default:function(){return g}});var r=d(te),n=d(gr),i=Qt,o=d(Yt),a=jt,s=L1;function l(y,m,p){return m in y?Object.defineProperty(y,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[m]=p,y}function u(){return u=Object.assign||function(y){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(y[v]=p[v])}return y},u.apply(this,arguments)}function d(y){return y&&y.__esModule?y:{default:y}}function c(y,m){if(y==null)return{};var p=h(y,m),v,b;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);for(b=0;b<x.length;b++)v=x[b],!(m.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(y,v)&&(p[v]=y[v])}return p}function h(y,m){if(y==null)return{};var p={},v=Object.keys(y),b,x;for(x=0;x<v.length;x++)b=v[x],!(m.indexOf(b)>=0)&&(p[b]=y[b]);return p}var f=r.default.forwardRef(function(y,m){var p=y.className,v=p===void 0?"":p,b=y.disabled,x=b===void 0?!1:b,_=y.children,A=c(y,["className","disabled","children"]),M=(0,a.useTheme)().menu,T=M.styles.base,C=(0,i.twMerge)((0,n.default)((0,o.default)(T.item.initial),l({},(0,o.default)(T.item.disabled),x)),v);return r.default.createElement("button",u({},A,{ref:m,role:"menuitem",className:C}),_)});f.propTypes={className:s.propTypesClassName,disabled:s.propTypesDisabled,children:s.propTypesChildren},f.displayName="MaterialTailwind.MenuItem";var g=f})(fpe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{Menu:function(){return c},MenuHandler:function(){return a.MenuHandler},MenuList:function(){return s.MenuList},MenuItem:function(){return l.MenuItem},useMenu:function(){return i.useMenu},default:function(){return h}});var r=d(te),n=fo,i=eC,o=cpe,a=dpe,s=hpe,l=fpe;function u(){return u=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(f[m]=y[m])}return f},u.apply(this,arguments)}function d(f){return f&&f.__esModule?f:{default:f}}var c=r.default.forwardRef(function(f,g){var y=f.open,m=f.handler,p=f.placement,v=f.offset,b=f.dismiss,x=f.animate,_=f.lockScroll,A=f.allowHover,M=f.children,T=(0,n.useFloatingParentNodeId)(),C={open:y,handler:m,placement:p,offset:v,dismiss:b,animate:x,lockScroll:_,allowHover:A};return T==null?r.default.createElement(n.FloatingTree,null,r.default.createElement(o.MenuCore,u({ref:g},C),M)):r.default.createElement(o.MenuCore,u({ref:g},C),M)});c.propTypes=o.MenuCore.propTypes,c.displayName="MaterialTailwind.Menu";var h=Object.assign(c,{Handler:a.MenuHandler,List:s.MenuList,Item:l.MenuItem})})(upe);var ppe={},mpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{MobileNav:function(){return y},default:function(){return m}});var r=h(te),n=Do,i=fo,o=h(jo),a=h(gr),s=Qt,l=h(Yt),u=jt,d=AI;function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.open,x=p.animate,_=p.className,A=p.children,M=f(p,["open","animate","className","children"]),T;console.error(`<MobileNav /> will be deprecated in the future versions of @material-tailwind/react use <Collapse /> instead.
      
More details: https://www.material-tailwind.com/docs/react/collapse
      `);var C=r.default.useRef(null),E=(0,u.useTheme)().navbar,D=E.styles,I=D.base.mobileNav;x=x??{},_=_??"";var k=(0,s.twMerge)((0,a.default)((0,l.default)(I)),_),L={unmount:{height:0,opacity:0,transition:{duration:.3,times:"[0.4, 0, 0.2, 1]"}},mount:{opacity:1,height:"".concat((T=C.current)===null||T===void 0?void 0:T.scrollHeight,"px"),transition:{duration:.3,times:"[0.4, 0, 0.2, 1]"}}},U=(0,o.default)(L,x),W=n.AnimatePresence,G=(0,i.useMergeRefs)([v,C]);return r.default.createElement(n.LazyMotion,{features:n.domAnimation},r.default.createElement(W,null,r.default.createElement(n.m.div,c({},M,{ref:G,className:k,initial:"unmount",exit:"unmount",animate:b?"mount":"unmount",variants:U}),A)))});y.displayName="MaterialTailwind.MobileNav",y.propTypes={open:d.propTypesOpen,animate:d.propTypesAnimate,className:d.propTypesClassName,children:d.propTypesChildren};var m=y})(mpe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Navbar:function(){return m},MobileNav:function(){return u.MobileNav},default:function(){return p}});var r=f(te),n=f(Kt),i=f(gr),o=Qt,a=f(qn),s=f(Yt),l=jt,u=mpe,d=AI;function c(v,b,x){return b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.variant,_=v.color,A=v.shadow,M=v.blurred,T=v.fullWidth,C=v.className,E=v.children,D=g(v,["variant","color","shadow","blurred","fullWidth","className","children"]),I=(0,l.useTheme)().navbar,k=I.defaultProps,L=I.valid,U=I.styles,W=U.base,G=U.variants;x=x??k.variant,_=_??k.color,A=A??k.shadow,M=M??k.blurred,T=T??k.fullWidth,C=C??k.className;var z,V=(0,i.default)((0,s.default)(W.navbar.initial),(z={},c(z,(0,s.default)(W.navbar.shadow),A),c(z,(0,s.default)(W.navbar.blurred),M&&_==="white"),c(z,(0,s.default)(W.navbar.fullWidth),T),z)),j=(0,i.default)((0,s.default)(G[(0,a.default)(L.variants,x,"filled")][(0,a.default)(L.colors,_,"white")])),H=(0,o.twMerge)((0,i.default)(V,j),C);return r.default.createElement("nav",h({},D,{ref:b,className:H}),E)});m.propTypes={variant:n.default.oneOf(d.propTypesVariant),color:n.default.oneOf(d.propTypesColor),shadow:d.propTypesShadow,blurred:d.propTypesBlurred,fullWidth:d.propTypesFullWidth,className:d.propTypesClassName,children:d.propTypesChildren},m.displayName="MaterialTailwind.Navbar";var p=Object.assign(m,{MobileNav:u.MobileNav})})(ppe);var gpe={},HI={},B1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{propTypesOpen:function(){return o},propTypesHandler:function(){return a},propTypesPlacement:function(){return s},propTypesOffset:function(){return l},propTypesDismiss:function(){return u},propTypesAnimate:function(){return d},propTypesContent:function(){return c},propTypesInteractive:function(){return h},propTypesClassName:function(){return f},propTypesChildren:function(){return g},propTypesContextValue:function(){return y}});var r=i(Kt),n=Un;function i(m){return m&&m.__esModule?m:{default:m}}var o=r.default.bool,a=r.default.func,s=n.propTypesPlacements,l=n.propTypesOffsetType,u=n.propTypesDismissType,d=n.propTypesAnimation,c=r.default.node,h=r.default.bool,f=r.default.string,g=r.default.node.isRequired,y=r.default.shape({open:r.default.bool.isRequired,strategy:r.default.oneOf(["fixed","absolute"]).isRequired,x:r.default.number,y:r.default.number,context:r.default.instanceOf(Object).isRequired,reference:r.default.func.isRequired,floating:r.default.func.isRequired,getReferenceProps:r.default.func.isRequired,getFloatingProps:r.default.func.isRequired,appliedAnimation:d.isRequired,labelId:r.default.string.isRequired,descriptionId:r.default.string.isRequired}).isRequired})(B1);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,u){for(var d in u)Object.defineProperty(l,d,{enumerable:!0,get:u[d]})}t(e,{PopoverContext:function(){return o},usePopover:function(){return a},PopoverContextProvider:function(){return s}});var r=i(te),n=B1;function i(l){return l&&l.__esModule?l:{default:l}}var o=r.default.createContext(null);o.displayName="MaterialTailwind.PopoverContext";function a(){var l=r.default.useContext(o);if(!l)throw new Error("usePopover() must be used within a Popover. It happens when you use PopoverHandler or PopoverContent components outside the Popover component.");return l}var s=function(l){var u=l.value,d=l.children;return r.default.createElement(o.Provider,{value:u},d)};s.propTypes={value:n.propTypesContextValue,children:n.propTypesChildren},s.displayName="MaterialTailwind.PopoverContextProvider"})(HI);var vpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(y,m){for(var p in m)Object.defineProperty(y,p,{enumerable:!0,get:m[p]})}t(e,{PopoverHandler:function(){return f},default:function(){return g}});var r=s(te),n=fo,i=HI,o=B1;function a(y,m,p){return m in y?Object.defineProperty(y,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[m]=p,y}function s(y){return y&&y.__esModule?y:{default:y}}function l(y){for(var m=1;m<arguments.length;m++){var p=arguments[m]!=null?arguments[m]:{},v=Object.keys(p);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(p).filter(function(b){return Object.getOwnPropertyDescriptor(p,b).enumerable}))),v.forEach(function(b){a(y,b,p[b])})}return y}function u(y,m){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(y);m&&(v=v.filter(function(b){return Object.getOwnPropertyDescriptor(y,b).enumerable})),p.push.apply(p,v)}return p}function d(y,m){return m=m??{},Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(m)):u(Object(m)).forEach(function(p){Object.defineProperty(y,p,Object.getOwnPropertyDescriptor(m,p))}),y}function c(y,m){if(y==null)return{};var p=h(y,m),v,b;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);for(b=0;b<x.length;b++)v=x[b],!(m.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(y,v)&&(p[v]=y[v])}return p}function h(y,m){if(y==null)return{};var p={},v=Object.keys(y),b,x;for(x=0;x<v.length;x++)b=v[x],!(m.indexOf(b)>=0)&&(p[b]=y[b]);return p}var f=r.default.forwardRef(function(y,m){var p=y.children,v=c(y,["children"]),b=(0,i.usePopover)(),x=b.getReferenceProps,_=b.reference,A=(0,n.useMergeRefs)([m,_]);return r.default.cloneElement(p,l({},x(d(l({},v),{ref:A}))))});f.propTypes={children:o.propTypesChildren},f.displayName="MaterialTailwind.PopoverHandler";var g=f})(vpe);var ype={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,A){for(var M in A)Object.defineProperty(_,M,{enumerable:!0,get:A[M]})}t(e,{PopoverContent:function(){return b},default:function(){return x}});var r=f(te),n=fo,i=Do,o=f(gr),a=Qt,s=f(Yt),l=jt,u=HI,d=B1;function c(_,A,M){return A in _?Object.defineProperty(_,A,{value:M,enumerable:!0,configurable:!0,writable:!0}):_[A]=M,_}function h(){return h=Object.assign||function(_){for(var A=1;A<arguments.length;A++){var M=arguments[A];for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(_[T]=M[T])}return _},h.apply(this,arguments)}function f(_){return _&&_.__esModule?_:{default:_}}function g(_){for(var A=1;A<arguments.length;A++){var M=arguments[A]!=null?arguments[A]:{},T=Object.keys(M);typeof Object.getOwnPropertySymbols=="function"&&(T=T.concat(Object.getOwnPropertySymbols(M).filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable}))),T.forEach(function(C){c(_,C,M[C])})}return _}function y(_,A){var M=Object.keys(_);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(_);A&&(T=T.filter(function(C){return Object.getOwnPropertyDescriptor(_,C).enumerable})),M.push.apply(M,T)}return M}function m(_,A){return A=A??{},Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(A)):y(Object(A)).forEach(function(M){Object.defineProperty(_,M,Object.getOwnPropertyDescriptor(A,M))}),_}function p(_,A){if(_==null)return{};var M=v(_,A),T,C;if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(_);for(C=0;C<E.length;C++)T=E[C],!(A.indexOf(T)>=0)&&Object.prototype.propertyIsEnumerable.call(_,T)&&(M[T]=_[T])}return M}function v(_,A){if(_==null)return{};var M={},T=Object.keys(_),C,E;for(E=0;E<T.length;E++)C=T[E],!(A.indexOf(C)>=0)&&(M[C]=_[C]);return M}var b=r.default.forwardRef(function(_,A){var M=_.children,T=_.className,C=p(_,["children","className"]),E=(0,l.useTheme)().popover,D=E.defaultProps,I=E.styles.base,k=(0,u.usePopover)(),L=k.open,U=k.strategy,W=k.x,G=k.y,z=k.context,V=k.floating,j=k.getFloatingProps,H=k.appliedAnimation,Y=k.labelId,Q=k.descriptionId;T=T??D.className;var $=(0,a.twMerge)((0,o.default)((0,s.default)(I)),T),ne=(0,n.useMergeRefs)([A,V]),Z=i.AnimatePresence;return r.default.createElement(i.LazyMotion,{features:i.domAnimation},r.default.createElement(n.FloatingPortal,null,r.default.createElement(Z,null,L&&r.default.createElement(n.FloatingFocusManager,{context:z},r.default.createElement(i.m.div,h({},j(m(g({},C),{ref:ne,className:$,style:{position:U,top:G??"",left:W??""},"aria-labelledby":Y,"aria-describedby":Q})),{initial:"unmount",exit:"unmount",animate:L?"mount":"unmount",variants:H}),M)))))});b.propTypes={className:d.propTypesClassName,children:d.propTypesChildren},b.displayName="MaterialTailwind.PopoverContent";var x=b})(ype);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,_){for(var A in _)Object.defineProperty(x,A,{enumerable:!0,get:_[A]})}t(e,{Popover:function(){return v},PopoverHandler:function(){return u.PopoverHandler},PopoverContent:function(){return d.PopoverContent},usePopover:function(){return s.usePopover},default:function(){return b}});var r=f(te),n=f(Kt),i=fo,o=f(jo),a=jt,s=HI,l=B1,u=vpe,d=ype;function c(x,_){(_==null||_>x.length)&&(_=x.length);for(var A=0,M=new Array(_);A<_;A++)M[A]=x[A];return M}function h(x){if(Array.isArray(x))return x}function f(x){return x&&x.__esModule?x:{default:x}}function g(x,_){var A=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(A!=null){var M=[],T=!0,C=!1,E,D;try{for(A=A.call(x);!(T=(E=A.next()).done)&&(M.push(E.value),!(_&&M.length===_));T=!0);}catch(I){C=!0,D=I}finally{try{!T&&A.return!=null&&A.return()}finally{if(C)throw D}}return M}}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(x,_){return h(x)||g(x,_)||p(x,_)||y()}function p(x,_){if(x){if(typeof x=="string")return c(x,_);var A=Object.prototype.toString.call(x).slice(8,-1);if(A==="Object"&&x.constructor&&(A=x.constructor.name),A==="Map"||A==="Set")return Array.from(A);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return c(x,_)}}var v=function(x){var _=x.open,A=x.handler,M=x.placement,T=x.offset,C=x.dismiss,E=x.animate,D=x.children,I=(0,a.useTheme)().popover,k=I.defaultProps,L=m(r.default.useState(!1),2),U=L[0],W=L[1];_=_??U,A=A??W,M=M??k.placement,T=T??k.offset,C=C??k.dismiss,E=E??k.animate;var G={unmount:{opacity:0},mount:{opacity:1}},z=(0,o.default)(G,E),V=(0,i.useFloating)({open:_,onOpenChange:A,middleware:[(0,i.offset)(T),(0,i.flip)(),(0,i.shift)()],placement:M}),j=V.x,H=V.y,Y=V.reference,Q=V.floating,$=V.strategy,ne=V.refs,Z=V.update,ce=V.context,ae=(0,i.useId)(),ie="".concat(ae,"-label"),le="".concat(ae,"-description"),se=(0,i.useInteractions)([(0,i.useClick)(ce),(0,i.useRole)(ce),(0,i.useDismiss)(ce,C)]),re=se.getReferenceProps,ye=se.getFloatingProps;r.default.useEffect(function(){if(ne.reference.current&&ne.floating.current&&_)return(0,i.autoUpdate)(ne.reference.current,ne.floating.current,Z)},[_,Z,ne.reference,ne.floating]);var be=r.default.useMemo(function(){return{open:_,strategy:$,x:j,y:H,context:ce,reference:Y,floating:Q,getReferenceProps:re,getFloatingProps:ye,appliedAnimation:z,labelId:ie,descriptionId:le}},[_,$,j,H,ce,Y,Q,ye,re,z,ie,le]);return r.default.createElement(s.PopoverContextProvider,{value:be},D)};v.propTypes={open:l.propTypesOpen,handler:l.propTypesHandler,placement:n.default.oneOf(l.propTypesPlacement),offset:l.propTypesOffset,dismiss:l.propTypesDismiss,animate:l.propTypesAnimate,children:l.propTypesChildren},v.displayName="MaterialTailwind.Popover";var b=Object.assign(v,{Handler:u.PopoverHandler,Content:d.PopoverContent})})(gpe);var bpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{Progress:function(){return y},default:function(){return m}});var r=h(te),n=h(Kt),i=h(gr),o=Qt,a=h(qn),s=h(Yt),l=jt,u=VH;function d(p,v,b){return v in p?Object.defineProperty(p,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):p[v]=b,p}function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.variant,x=p.color,_=p.size,A=p.value,M=p.label,T=p.className,C=p.barProps,E=f(p,["variant","color","size","value","label","className","barProps"]),D=(0,l.useTheme)().progress,I=D.defaultProps,k=D.valid,L=D.styles,U=L.base,W=L.variants,G=L.sizes;b=b??I.variant,x=x??I.color,_=_??I.size,M=M??I.label,T=T??I.className,C=C??I.barProps;var z=(0,s.default)(W[(0,a.default)(k.variants,b,"filled")][(0,a.default)(k.colors,x,"gray")]),V=(0,s.default)(G[(0,a.default)(k.sizes,_,"md")].container.initial),j=(0,i.default)((0,s.default)(U.container.initial),V),H=(0,s.default)(G[(0,a.default)(k.sizes,_,"md")].container.withLabel),Y=(0,i.default)((0,s.default)(U.container.withLabel),H),Q=(0,s.default)(G[(0,a.default)(k.sizes,_,"md")].bar),$=(0,i.default)((0,s.default)(U.bar),Q),ne=(0,o.twMerge)((0,i.default)(j,d({},Y,M)),T),Z=(0,o.twMerge)((0,i.default)($,z),C==null?void 0:C.className);return r.default.createElement("div",c({},E,{ref:v,className:ne}),r.default.createElement("div",c({},C,{className:Z,style:{width:"".concat(A,"%")}}),M&&"".concat(A,"% ").concat(typeof M=="string"?M:"")))});y.propTypes={variant:n.default.oneOf(u.propTypesVariant),color:n.default.oneOf(u.propTypesColor),size:n.default.oneOf(u.propTypesSize),value:u.propTypesValue,label:u.propTypesLabel,barProps:u.propTypesBarProps,className:u.propTypesClassName},y.displayName="MaterialTailwind.Progress";var m=y})(bpe);var xpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Radio:function(){return m},default:function(){return p}});var r=f(te),n=f(Kt),i=f(O1),o=f(gr),a=Qt,s=f(qn),l=f(Yt),u=jt,d=V0;function c(v,b,x){return b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.color,_=v.label,A=v.icon,M=v.ripple,T=v.className,C=v.disabled,E=v.containerProps,D=v.labelProps,I=v.iconProps,k=v.inputRef,L=g(v,["color","label","icon","ripple","className","disabled","containerProps","labelProps","iconProps","inputRef"]),U=(0,u.useTheme)().radio,W=U.defaultProps,G=U.valid,z=U.styles,V=z.base,j=z.colors,H=r.default.useId();x=x??W.color,_=_??W.label,A=A??W.icon,M=M??W.ripple,T=T??W.className,C=C??W.disabled,E=E??W.containerProps,D=D??W.labelProps,I=I??W.iconProps;var Y=M!==void 0&&new i.default,Q=(0,o.default)((0,l.default)(V.root),c({},(0,l.default)(V.disabled),C)),$=(0,a.twMerge)((0,o.default)((0,l.default)(V.container)),E==null?void 0:E.className),ne=(0,a.twMerge)((0,o.default)((0,l.default)(V.input),(0,l.default)(j[(0,s.default)(G.colors,x,"gray")])),T),Z=(0,a.twMerge)((0,o.default)((0,l.default)(V.label)),D==null?void 0:D.className),ce=(0,o.default)((0,o.default)((0,l.default)(V.icon)),j[(0,s.default)(G.colors,x,"gray")].color,I==null?void 0:I.className);return r.default.createElement("div",{ref:b,className:Q},r.default.createElement("label",h({},E,{className:$,htmlFor:L.id||H,onMouseDown:function(ae){var ie=E==null?void 0:E.onMouseDown;return M&&Y.create(ae,"dark"),typeof ie=="function"&&ie(ae)}}),r.default.createElement("input",h({},L,{ref:k,type:"radio",disabled:C,className:ne,id:L.id||H})),r.default.createElement("span",{className:ce},A||r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"currentColor"},r.default.createElement("circle",{"data-name":"ellipse",cx:"8",cy:"8",r:"8"})))),_&&r.default.createElement("label",h({},D,{className:Z,htmlFor:L.id||H}),_))});m.propTypes={color:n.default.oneOf(d.propTypesColor),label:d.propTypesLabel,icon:d.propTypesIcon,ripple:d.propTypesRipple,className:d.propTypesClassName,disabled:d.propTypesDisabled,containerProps:d.propTypesObject,labelProps:d.propTypesObject},m.displayName="MaterialTailwind.Radio";var p=m})(xpe);var wpe={},TG={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(d,c){for(var h in c)Object.defineProperty(d,h,{enumerable:!0,get:c[h]})}t(e,{SelectContext:function(){return a},useSelect:function(){return s},usePrevious:function(){return l},SelectContextProvider:function(){return u}});var r=o(te),n=Do,i=WM;function o(d){return d&&d.__esModule?d:{default:d}}var a=r.default.createContext(null);a.displayName="MaterialTailwind.SelectContext";function s(){var d=r.default.useContext(a);if(d===null)throw new Error("useSelect() must be used within a Select. It happens when you use SelectOption component outside the Select component.");return d}function l(d){var c=r.default.useRef();return(0,n.useIsomorphicLayoutEffect)(function(){c.current=d},[d]),c.current}var u=function(d){var c=d.value,h=d.children;return r.default.createElement(a.Provider,{value:c},h)};u.propTypes={value:i.propTypesContextValue,children:i.propTypesChildren},u.displayName="MaterialTailwind.SelectContextProvider"})(TG);var _pe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{SelectOption:function(){return g},default:function(){return y}});var r=c(te),n=c(gr),i=Qt,o=c(Yt),a=jt,s=TG,l=WM;function u(m,p,v){return p in m?Object.defineProperty(m,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[p]=v,m}function d(){return d=Object.assign||function(m){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},d.apply(this,arguments)}function c(m){return m&&m.__esModule?m:{default:m}}function h(m,p){if(m==null)return{};var v=f(m,p),b,x;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);for(x=0;x<_.length;x++)b=_[x],!(p.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(v[b]=m[b])}return v}function f(m,p){if(m==null)return{};var v={},b=Object.keys(m),x,_;for(_=0;_<b.length;_++)x=b[_],!(p.indexOf(x)>=0)&&(v[x]=m[x]);return v}var g=function(m){var p=function(){z(A),H(x),j(!1),Q(null)},v=function(re){(re.key==="Enter"||re.key===" "&&!ne.current.typing)&&(re.preventDefault(),p())},b=m.value,x=b===void 0?"":b,_=m.index,A=_===void 0?0:_,M=m.disabled,T=M===void 0?!1:M,C=m.className,E=C===void 0?"":C,D=m.children,I=h(m,["value","index","disabled","className","children"]),k=(0,a.useTheme)().select,L=k.styles,U=L.base,W=(0,s.useSelect)(),G=W.selectedIndex,z=W.setSelectedIndex,V=W.listRef,j=W.setOpen,H=W.onChange,Y=W.activeIndex,Q=W.setActiveIndex,$=W.getItemProps,ne=W.dataRef,Z=(0,o.default)(U.option.initial),ce=(0,o.default)(U.option.active),ae=(0,o.default)(U.option.disabled),ie,le=(0,i.twMerge)((0,n.default)(Z,(ie={},u(ie,ce,G===A),u(ie,ae,T),ie)),E??"");return r.default.createElement("li",d({},I,{role:"option",ref:function(se){return V.current[A]=se},className:le,disabled:T,tabIndex:Y===A?0:1,"aria-selected":Y===A&&G===A,"data-selected":G===A},$({onClick:function(se){var re=I==null?void 0:I.onClick;typeof re=="function"&&(re(se),p()),p()},onKeyDown:function(se){var re=I==null?void 0:I.onKeyDown;typeof re=="function"&&(re(se),v(se)),v(se)}})),D)};g.propTypes={value:l.propTypesValue,index:l.propTypesIndex,disabled:l.propTypesDisabled,className:l.propTypesClassName,children:l.propTypesChildren},g.displayName="MaterialTailwind.SelectOption";var y=g})(_pe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(V,j){for(var H in j)Object.defineProperty(V,H,{enumerable:!0,get:j[H]})}t(e,{Select:function(){return G},Option:function(){return g.SelectOption},useSelect:function(){return h.useSelect},usePrevious:function(){return h.usePrevious},default:function(){return z}});var r=x(te),n=x(Kt),i=fo,o=Do,a=x(gr),s=Qt,l=x(jo),u=x(qn),d=x(Yt),c=jt,h=TG,f=WM,g=_pe;function y(V,j){(j==null||j>V.length)&&(j=V.length);for(var H=0,Y=new Array(j);H<j;H++)Y[H]=V[H];return Y}function m(V){if(Array.isArray(V))return V}function p(V){if(Array.isArray(V))return y(V)}function v(V,j,H){return j in V?Object.defineProperty(V,j,{value:H,enumerable:!0,configurable:!0,writable:!0}):V[j]=H,V}function b(){return b=Object.assign||function(V){for(var j=1;j<arguments.length;j++){var H=arguments[j];for(var Y in H)Object.prototype.hasOwnProperty.call(H,Y)&&(V[Y]=H[Y])}return V},b.apply(this,arguments)}function x(V){return V&&V.__esModule?V:{default:V}}function _(V){if(typeof Symbol<"u"&&V[Symbol.iterator]!=null||V["@@iterator"]!=null)return Array.from(V)}function A(V,j){var H=V==null?null:typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(H!=null){var Y=[],Q=!0,$=!1,ne,Z;try{for(H=H.call(V);!(Q=(ne=H.next()).done)&&(Y.push(ne.value),!(j&&Y.length===j));Q=!0);}catch(ce){$=!0,Z=ce}finally{try{!Q&&H.return!=null&&H.return()}finally{if($)throw Z}}return Y}}function M(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(V){for(var j=1;j<arguments.length;j++){var H=arguments[j]!=null?arguments[j]:{},Y=Object.keys(H);typeof Object.getOwnPropertySymbols=="function"&&(Y=Y.concat(Object.getOwnPropertySymbols(H).filter(function(Q){return Object.getOwnPropertyDescriptor(H,Q).enumerable}))),Y.forEach(function(Q){v(V,Q,H[Q])})}return V}function E(V,j){var H=Object.keys(V);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(V);j&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(V,Q).enumerable})),H.push.apply(H,Y)}return H}function D(V,j){return j=j??{},Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(j)):E(Object(j)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(j,H))}),V}function I(V,j){if(V==null)return{};var H=k(V,j),Y,Q;if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(V);for(Q=0;Q<$.length;Q++)Y=$[Q],!(j.indexOf(Y)>=0)&&Object.prototype.propertyIsEnumerable.call(V,Y)&&(H[Y]=V[Y])}return H}function k(V,j){if(V==null)return{};var H={},Y=Object.keys(V),Q,$;for($=0;$<Y.length;$++)Q=Y[$],!(j.indexOf(Q)>=0)&&(H[Q]=V[Q]);return H}function L(V,j){return m(V)||A(V,j)||W(V,j)||M()}function U(V){return p(V)||_(V)||W(V)||T()}function W(V,j){if(V){if(typeof V=="string")return y(V,j);var H=Object.prototype.toString.call(V).slice(8,-1);if(H==="Object"&&V.constructor&&(H=V.constructor.name),H==="Map"||H==="Set")return Array.from(H);if(H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return y(V,j)}}var G=r.default.forwardRef(function(V,j){var H=V.variant,Y=V.color,Q=V.size,$=V.label,ne=V.error,Z=V.success,ce=V.arrow,ae=V.value,ie=V.onChange,le=V.selected,se=V.offset,re=V.dismiss,ye=V.animate,be=V.lockScroll,_e=V.labelProps,Se=V.menuProps,Fe=V.className,Re=V.disabled,Le=V.name,rt=V.children,st=V.containerProps,he=I(V,["variant","color","size","label","error","success","arrow","value","onChange","selected","offset","dismiss","animate","lockScroll","labelProps","menuProps","className","disabled","name","children","containerProps"]),q,J=(0,c.useTheme)().select,ge=J.defaultProps,Pe=J.valid,De=J.styles,Ve=De.base,et=De.variants,Ce=L(r.default.useState("close"),2),Je=Ce[0],ut=Ce[1];H=H??ge.variant,Y=Y??ge.color,Q=Q??ge.size,$=$??ge.label,ne=ne??ge.error,Z=Z??ge.success,ce=ce??ge.arrow,ae=ae??ge.value,ie=ie??ge.onChange,le=le??ge.selected,se=se??ge.offset,re=re??ge.dismiss,ye=ye??ge.animate,_e=_e??ge.labelProps,Se=Se??ge.menuProps;var pt;st=(pt=(0,l.default)(st,(ge==null?void 0:ge.containerProps)||{}))!==null&&pt!==void 0?pt:ge.containerProps,Fe=Fe??ge.className;var Ke=r.default.useRef([]),gt,we=r.default.useRef(U((gt=r.default.Children.map(rt,function(mr){var Vr=mr.props;return Vr==null?void 0:Vr.value}))!==null&&gt!==void 0?gt:[])),Xe=L(r.default.useState(!1),2),nt=Xe[0],fe=Xe[1],Be=L(r.default.useState(null),2),de=Be[0],Ye=Be[1],$e=L(r.default.useState(0),2),ze=$e[0],ct=$e[1],At=L(r.default.useState(!1),2),rr=At[0],Gt=At[1],Lr=(0,h.usePrevious)(de),nr=(0,i.useFloating)({placement:"bottom-start",open:nt,onOpenChange:fe,whileElementsMounted:i.autoUpdate,middleware:[(0,i.offset)(5),(0,i.flip)({padding:10}),(0,i.size)({apply:function(Vr){var kr=Vr.rects,cn=Vr.elements,sn,Xi;Object.assign(cn==null||(sn=cn.floating)===null||sn===void 0?void 0:sn.style,{width:"".concat(kr==null||(Xi=kr.reference)===null||Xi===void 0?void 0:Xi.width,"px"),zIndex:99})},padding:20})]}),on=nr.x,bi=nr.y,dl=nr.strategy,Ka=nr.refs,me=nr.context;r.default.useEffect(function(){ct(Math.max(0,we.current.indexOf(ae)+1))},[ae]);var qe=Ka.floating,it=(0,i.useInteractions)([(0,i.useClick)(me),(0,i.useRole)(me,{role:"listbox"}),(0,i.useDismiss)(me,C({},re)),(0,i.useListNavigation)(me,{listRef:Ke,activeIndex:de,selectedIndex:ze,onNavigate:Ye,loop:!0}),(0,i.useTypeahead)(me,{listRef:we,activeIndex:de,selectedIndex:ze,onMatch:nt?Ye:ct})]),je=it.getReferenceProps,at=it.getFloatingProps,Ft=it.getItemProps;(0,o.useIsomorphicLayoutEffect)(function(){var mr=qe.current;if(nt&&rr&&mr){var Vr=de!=null?Ke.current[de]:ze!=null?Ke.current[ze]:null;if(Vr&&Lr!=null){var kr,cn,sn=(cn=(kr=Ke.current[Lr])===null||kr===void 0?void 0:kr.offsetHeight)!==null&&cn!==void 0?cn:0,Xi=mr.offsetHeight,hl=Vr.offsetTop,ii=hl+sn;hl<mr.scrollTop?mr.scrollTop-=mr.scrollTop-hl+5:ii>Xi+mr.scrollTop&&(mr.scrollTop+=ii-Xi-mr.scrollTop+5)}}},[nt,rr,Lr,de]);var ur=r.default.useMemo(function(){return{selectedIndex:ze,setSelectedIndex:ct,listRef:Ke,setOpen:fe,onChange:ie||function(){},activeIndex:de,setActiveIndex:Ye,getItemProps:Ft,dataRef:me.dataRef}},[ze,ie,de,Ft,me.dataRef]);r.default.useEffect(function(){ut(nt?"open":!nt&&ze||!nt&&ae?"withValue":"close")},[nt,ae,ze,le]);var er=et[(0,u.default)(Pe.variants,H,"outlined")],ue=er.sizes[(0,u.default)(Pe.sizes,Q,"md")],Ie=er.error.select,Ne=er.success.select,Ue=er.colors.select[(0,u.default)(Pe.colors,Y,"gray")],Ge=er.error.label,yt=er.success.label,It=er.colors.label[(0,u.default)(Pe.colors,Y,"gray")],Ut=er.states[Je],Ot=(0,a.default)((0,d.default)(Ve.container),(0,d.default)(ue.container),st==null?void 0:st.className),xt=(0,s.twMerge)((0,a.default)((0,d.default)(Ve.select),(0,d.default)(er.base.select),(0,d.default)(Ut.select),(0,d.default)(ue.select),v({},(0,d.default)(Ue[Je]),!ne&&!Z),v({},(0,d.default)(Ie.initial),ne),v({},(0,d.default)(Ie.states[Je]),ne),v({},(0,d.default)(Ne.initial),Z),v({},(0,d.default)(Ne.states[Je]),Z)),Fe),qt,ar=(0,s.twMerge)((0,a.default)((0,d.default)(Ve.label),(0,d.default)(er.base.label),(0,d.default)(Ut.label),(0,d.default)(ue.label.initial),(0,d.default)(ue.label.states[Je]),v({},(0,d.default)(It[Je]),!ne&&!Z),v({},(0,d.default)(Ge.initial),ne),v({},(0,d.default)(Ge.states[Je]),ne),v({},(0,d.default)(yt.initial),Z),v({},(0,d.default)(yt.states[Je]),Z)),(qt=_e.className)!==null&&qt!==void 0?qt:""),zr=(0,a.default)((0,d.default)(Ve.arrow.initial),v({},(0,d.default)(Ve.arrow.active),nt)),an,Ur=(0,s.twMerge)((0,a.default)((0,d.default)(Ve.menu)),(an=Se.className)!==null&&an!==void 0?an:""),tn=(0,a.default)("absolute top-2/4 -translate-y-2/4",H==="outlined"?"left-3 pt-0.5":"left-0 pt-3"),Bt={unmount:{opacity:0,transformOrigin:"top",transform:"scale(0.95)",transition:{duration:.2,times:[.4,0,.2,1]}},mount:{opacity:1,transformOrigin:"top",transform:"scale(1)",transition:{duration:.2,times:[.4,0,.2,1]}}},Tt=(0,l.default)(Bt,ye),Ii=o.AnimatePresence;r.default.useEffect(function(){ae&&!ie&&console.error("Warning: You provided a `value` prop to a select component without an `onChange` handler. This will render a read-only select. If the field should be mutable use `onChange` handler with `value` together.")},[ae,ie]);var Xt=r.default.createElement(i.FloatingFocusManager,{context:me,modal:!1},r.default.createElement(o.m.ul,b({},at(D(C({},Se),{ref:Ka.setFloating,role:"listbox",className:Ur,style:{position:dl,top:bi??0,left:on??0,overflow:"auto"},onPointerEnter:function(Vr){var kr=Se==null?void 0:Se.onPointerEnter;typeof kr=="function"&&(kr(Vr),Gt(!1)),Gt(!1)},onPointerMove:function(Vr){var kr=Se==null?void 0:Se.onPointerMove;typeof kr=="function"&&(kr(Vr),Gt(!1)),Gt(!1)},onKeyDown:function(Vr){var kr=Se==null?void 0:Se.onKeyDown;typeof kr=="function"&&(kr(Vr),Gt(!0)),Gt(!0)}})),{initial:"unmount",exit:"unmount",animate:nt?"mount":"unmount",variants:Tt}),r.default.Children.map(rt,function(mr,Vr){var kr;return r.default.isValidElement(mr)&&r.default.cloneElement(mr,D(C({},mr.props),{index:((kr=mr.props)===null||kr===void 0?void 0:kr.index)||Vr+1,id:"material-tailwind-select-".concat(Vr)}))})));return r.default.createElement(h.SelectContextProvider,{value:ur},r.default.createElement("div",b({},st,{ref:j,className:Ot}),r.default.createElement("button",b({type:"button"},je(D(C({},he),{ref:Ka.setReference,className:xt,disabled:Re,name:Le}))),typeof le=="function"?r.default.createElement("span",{className:tn},le(rt[ze-1],ze-1)):ae&&!ie?r.default.createElement("span",{className:tn},ae):r.default.createElement("span",b({},(q=rt[ze-1])===null||q===void 0?void 0:q.props,{className:tn})),r.default.createElement("div",{className:zr},ce??r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.default.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})))),r.default.createElement("label",b({},_e,{className:ar}),$),r.default.createElement(o.LazyMotion,{features:o.domAnimation},r.default.createElement(Ii,null,nt&&r.default.createElement(r.default.Fragment,null,be?r.default.createElement(i.FloatingOverlay,{lockScroll:!0},Xt):Xt)))))});G.propTypes={variant:n.default.oneOf(f.propTypesVariant),color:n.default.oneOf(f.propTypesColor),size:n.default.oneOf(f.propTypesSize),label:f.propTypesLabel,error:f.propTypesError,success:f.propTypesSuccess,arrow:f.propTypesArrow,value:f.propTypesValue,onChange:f.propTypesOnChange,selected:f.propTypesSelected,offset:f.propTypesOffset,dismiss:f.propTypesDismiss,animate:f.propTypesAnimate,lockScroll:f.propTypesLockScroll,labelProps:f.propTypesLabelProps,menuProps:f.propTypesMenuProps,className:f.propTypesClassName,disabled:f.propTypesDisabled,name:f.propTypesName,children:f.propTypesChildren,containerProps:f.propTypesContainerProps},G.displayName="MaterialTailwind.Select";var z=Object.assign(G,{Option:g.SelectOption})})(wpe);var Spe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Switch:function(){return m},default:function(){return p}});var r=f(te),n=f(Kt),i=f(O1),o=f(gr),a=Qt,s=f(qn),l=f(Yt),u=jt,d=V0;function c(v,b,x){return b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.color,_=v.label,A=v.ripple,M=v.className,T=v.disabled,C=v.containerProps,E=v.circleProps,D=v.labelProps,I=v.inputRef,k=g(v,["color","label","ripple","className","disabled","containerProps","circleProps","labelProps","inputRef"]),L=(0,u.useTheme)(),U=L.switch,W=U.defaultProps,G=U.valid,z=U.styles,V=z.base,j=z.colors,H=r.default.useId();x=x??W.color,A=A??W.ripple,M=M??W.className,T=T??W.disabled,C=C??W.containerProps,D=D??W.labelProps,E=E??W.circleProps;var Y=A!==void 0&&new i.default,Q=(0,o.default)((0,l.default)(V.root),c({},(0,l.default)(V.disabled),T)),$=(0,a.twMerge)((0,o.default)((0,l.default)(V.container)),C==null?void 0:C.className),ne=(0,a.twMerge)((0,o.default)((0,l.default)(V.input),(0,l.default)(j[(0,s.default)(G.colors,x,"gray")])),M),Z=(0,a.twMerge)((0,o.default)((0,l.default)(V.circle),j[(0,s.default)(G.colors,x,"gray")].circle,j[(0,s.default)(G.colors,x,"gray")].before),E==null?void 0:E.className),ce=(0,o.default)((0,l.default)(V.ripple)),ae=(0,a.twMerge)((0,o.default)((0,l.default)(V.label)),D==null?void 0:D.className);return r.default.createElement("div",{ref:b,className:Q},r.default.createElement("div",h({},C,{className:$}),r.default.createElement("input",h({},k,{ref:I,type:"checkbox",disabled:T,id:k.id||H,className:ne})),r.default.createElement("label",h({},E,{htmlFor:k.id||H,className:Z}),A&&r.default.createElement("div",{className:ce,onMouseDown:function(ie){var le=C==null?void 0:C.onMouseDown;return A&&Y.create(ie,"dark"),typeof le=="function"&&le(ie)}}))),_&&r.default.createElement("label",h({},D,{htmlFor:k.id||H,className:ae}),_))});m.propTypes={color:n.default.oneOf(d.propTypesColor),label:d.propTypesLabel,ripple:d.propTypesRipple,className:d.propTypesClassName,disabled:d.propTypesDisabled,containerProps:d.propTypesObject,labelProps:d.propTypesObject,circleProps:d.propTypesObject},m.displayName="MaterialTailwind.Switch";var p=m})(Spe);var Ape={},N1={},W0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{propTypesId:function(){return o},propTypesValue:function(){return a},propTypesAnimate:function(){return s},propTypesDisabled:function(){return l},propTypesClassName:function(){return u},propTypesOrientation:function(){return d},propTypesIndicator:function(){return c},propTypesChildren:function(){return h}});var r=i(Kt),n=Un;function i(f){return f&&f.__esModule?f:{default:f}}var o=r.default.string,a=r.default.oneOfType([r.default.string,r.default.number]).isRequired,s=n.propTypesAnimation,l=r.default.bool,u=r.default.string,d=r.default.oneOf(["horizontal","vertical"]),c=r.default.instanceOf(Object),h=r.default.node.isRequired})(W0);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(C,E){for(var D in E)Object.defineProperty(C,D,{enumerable:!0,get:E[D]})}t(e,{TabsContext:function(){return m},useTabs:function(){return p},TabsContextProvider:function(){return v},setId:function(){return b},setActive:function(){return x},setAnimation:function(){return _},setIndicator:function(){return A},setIsInitial:function(){return M},setOrientation:function(){return T}});var r=s(te),n=W0;function i(C,E){(E==null||E>C.length)&&(E=C.length);for(var D=0,I=new Array(E);D<E;D++)I[D]=C[D];return I}function o(C){if(Array.isArray(C))return C}function a(C,E,D){return E in C?Object.defineProperty(C,E,{value:D,enumerable:!0,configurable:!0,writable:!0}):C[E]=D,C}function s(C){return C&&C.__esModule?C:{default:C}}function l(C,E){var D=C==null?null:typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(D!=null){var I=[],k=!0,L=!1,U,W;try{for(D=D.call(C);!(k=(U=D.next()).done)&&(I.push(U.value),!(E&&I.length===E));k=!0);}catch(G){L=!0,W=G}finally{try{!k&&D.return!=null&&D.return()}finally{if(L)throw W}}return I}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(C){for(var E=1;E<arguments.length;E++){var D=arguments[E]!=null?arguments[E]:{},I=Object.keys(D);typeof Object.getOwnPropertySymbols=="function"&&(I=I.concat(Object.getOwnPropertySymbols(D).filter(function(k){return Object.getOwnPropertyDescriptor(D,k).enumerable}))),I.forEach(function(k){a(C,k,D[k])})}return C}function c(C,E){var D=Object.keys(C);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(C);E&&(I=I.filter(function(k){return Object.getOwnPropertyDescriptor(C,k).enumerable})),D.push.apply(D,I)}return D}function h(C,E){return E=E??{},Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(E)):c(Object(E)).forEach(function(D){Object.defineProperty(C,D,Object.getOwnPropertyDescriptor(E,D))}),C}function f(C,E){return o(C)||l(C,E)||g(C,E)||u()}function g(C,E){if(C){if(typeof C=="string")return i(C,E);var D=Object.prototype.toString.call(C).slice(8,-1);if(D==="Object"&&C.constructor&&(D=C.constructor.name),D==="Map"||D==="Set")return Array.from(D);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return i(C,E)}}function y(C,E){switch(E.type){case"SET_ID":return h(d({},C),{id:E.value});case"SET_ACTIVE":return h(d({},C),{active:E.value});case"SET_ANIMATION":return h(d({},C),{appliedAnimation:E.value});case"SET_INDICATOR":return h(d({},C),{indicatorProps:E.value});case"SET_IS_INITIAL":return h(d({},C),{isInitial:E.value});case"SET_ORIENTATION":return h(d({},C),{orientation:E.value});default:throw new Error("Unhandled action type: ".concat(E.type))}}var m=r.default.createContext(null);m.displayName="MaterialTailwind.TabsContext";function p(){var C=r.default.useContext(m);if(!C)throw new Error("useTabs() must be used within a Tabs. It happens when you use TabsHeader, TabsBody, Tab or TabPanel outside the Tabs component.");return C}var v=function(C){var E=C.id,D=C.value,I=C.orientation,k=C.children,L=r.default.useMemo(function(){return{id:E??"indicator",active:D,orientation:I,isInitial:!0,appliedAnimation:{initial:{},unmount:{},mount:{}},indicatorProps:void 0}},[E,D,I]),U=f(r.default.useReducer(y,L),2),W=U[0],G=U[1],z=r.default.useMemo(function(){return{state:W,dispatch:G}},[W]);return r.default.createElement(m.Provider,{value:z},k)},b=function(C,E){return C({type:"SET_ID",value:E})},x=function(C,E){return C({type:"SET_ACTIVE",value:E})},_=function(C,E){return C({type:"SET_ANIMATION",value:E})},A=function(C,E){return C({type:"SET_INDICATOR",value:E})},M=function(C,E){return C({type:"SET_IS_INITIAL",value:E})},T=function(C,E){return C({type:"SET_ORIENTATION",value:E})};v.propTypes={id:n.propTypesId,value:n.propTypesValue,orientation:n.propTypesOrientation,children:n.propTypesChildren},v.displayName="MaterialTailwind.TabsContextProvider"})(N1);var Mpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{Tab:function(){return y},default:function(){return m}});var r=h(te),n=Do,i=h(gr),o=Qt,a=h(Yt),s=jt,l=N1,u=W0;function d(p,v,b){return v in p?Object.defineProperty(p,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):p[v]=b,p}function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.value,x=p.className,_=p.activeClassName,A=p.disabled,M=p.children,T=f(p,["value","className","activeClassName","disabled","children"]),C=(0,s.useTheme)(),E=C.tab,D=E.defaultProps,I=E.styles.base,k=(0,l.useTabs)(),L=k.state,U=k.dispatch,W=L.id,G=L.active,z=L.indicatorProps;x=x??D.className,_=_??D.activeClassName,A=A??D.disabled;var V,j=(0,o.twMerge)((0,i.default)((0,a.default)(I.tab.initial),(V={},d(V,(0,a.default)(I.tab.disabled),A),d(V,_,G===b),V)),x),H,Y=(0,o.twMerge)((0,i.default)((0,a.default)(I.indicator)),(H=z==null?void 0:z.className)!==null&&H!==void 0?H:"");return r.default.createElement("li",c({},T,{ref:v,role:"tab",className:j,onClick:function(Q){var $=T==null?void 0:T.onClick;typeof $=="function"&&((0,l.setActive)(U,b),(0,l.setIsInitial)(U,!1),$(Q)),(0,l.setIsInitial)(U,!1),(0,l.setActive)(U,b)},"data-value":b}),r.default.createElement("div",{className:"z-20 text-inherit"},M),G===b&&r.default.createElement(n.motion.div,c({},z,{transition:{duration:.5},className:Y,layoutId:W})))});y.propTypes={value:u.propTypesValue,className:u.propTypesClassName,disabled:u.propTypesDisabled,children:u.propTypesChildren},y.displayName="MaterialTailwind.Tab";var m=y})(Mpe);var Cpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{TabsBody:function(){return y},default:function(){return m}});var r=h(te),n=Do,i=h(jo),o=h(gr),a=Qt,s=h(Yt),l=jt,u=N1,d=W0;function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.animate,x=p.className,_=p.children,A=f(p,["animate","className","children"]),M=(0,l.useTheme)().tabsBody,T=M.defaultProps,C=M.styles.base,E=(0,u.useTabs)().dispatch;x=x??T.className,b=b??T.animate;var D=(0,a.twMerge)((0,o.default)((0,s.default)(C)),x),I=r.default.useMemo(function(){return{initial:{opacity:0,position:"absolute",top:"0",left:"0",zIndex:1,transition:{duration:0}},unmount:{opacity:0,position:"absolute",top:"0",left:"0",zIndex:1,transition:{duration:.5,times:[.4,0,.2,1]}},mount:{opacity:1,position:"relative",zIndex:2,transition:{duration:.5,times:[.4,0,.2,1]}}}},[]),k=r.default.useMemo(function(){return(0,i.default)(I,b)},[b,I]);return(0,n.useIsomorphicLayoutEffect)(function(){(0,u.setAnimation)(E,k)},[k,E]),r.default.createElement("div",c({},A,{ref:v,className:D}),_)});y.propTypes={animate:d.propTypesAnimate,className:d.propTypesClassName,children:d.propTypesChildren},y.displayName="MaterialTailwind.TabsBody";var m=y})(Cpe);var Tpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{TabsHeader:function(){return g},default:function(){return y}});var r=c(te),n=c(gr),i=Qt,o=c(Yt),a=jt,s=N1,l=W0;function u(m,p,v){return p in m?Object.defineProperty(m,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[p]=v,m}function d(){return d=Object.assign||function(m){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},d.apply(this,arguments)}function c(m){return m&&m.__esModule?m:{default:m}}function h(m,p){if(m==null)return{};var v=f(m,p),b,x;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);for(x=0;x<_.length;x++)b=_[x],!(p.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(v[b]=m[b])}return v}function f(m,p){if(m==null)return{};var v={},b=Object.keys(m),x,_;for(_=0;_<b.length;_++)x=b[_],!(p.indexOf(x)>=0)&&(v[x]=m[x]);return v}var g=r.default.forwardRef(function(m,p){var v=m.indicatorProps,b=m.className,x=m.children,_=h(m,["indicatorProps","className","children"]),A=(0,a.useTheme)().tabsHeader,M=A.defaultProps,T=A.styles,C=(0,s.useTabs)(),E=C.state,D=C.dispatch,I=E.orientation;r.default.useEffect(function(){(0,s.setIndicator)(D,v)},[D,v]),b=b??M.className;var k=(0,i.twMerge)((0,n.default)((0,o.default)(T.base),u({},T[I]&&(0,o.default)(T[I]),I)),b);return r.default.createElement("nav",null,r.default.createElement("ul",d({},_,{ref:p,role:"tablist",className:k}),x))});g.propTypes={indicatorProps:l.propTypesIndicator,className:l.propTypesClassName,children:l.propTypesChildren},g.displayName="MaterialTailwind.TabsHeader";var y=g})(Tpe);var Epe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{TabPanel:function(){return g},default:function(){return y}});var r=c(te),n=Do,i=c(gr),o=Qt,a=c(Yt),s=jt,l=N1,u=W0;function d(){return d=Object.assign||function(m){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},d.apply(this,arguments)}function c(m){return m&&m.__esModule?m:{default:m}}function h(m,p){if(m==null)return{};var v=f(m,p),b,x;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);for(x=0;x<_.length;x++)b=_[x],!(p.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(v[b]=m[b])}return v}function f(m,p){if(m==null)return{};var v={},b=Object.keys(m),x,_;for(_=0;_<b.length;_++)x=b[_],!(p.indexOf(x)>=0)&&(v[x]=m[x]);return v}var g=r.default.forwardRef(function(m,p){var v=m.value,b=m.className,x=m.children,_=h(m,["value","className","children"]),A=(0,s.useTheme)().tabPanel,M=A.defaultProps,T=A.styles.base,C=(0,l.useTabs)().state,E=C.active,D=C.appliedAnimation,I=C.isInitial;b=b??M.className;var k=(0,o.twMerge)((0,i.default)((0,a.default)(T)),b),L=n.AnimatePresence;return r.default.createElement(n.LazyMotion,{features:n.domAnimation},r.default.createElement(L,{exitBeforeEnter:!0},r.default.createElement(n.m.div,d({},_,{ref:p,role:"tabpanel",className:k,initial:"unmount",exit:"unmount",animate:E===v?"mount":I?"initial":"unmount",variants:D,"data-value":v}),x)))});g.propTypes={value:u.propTypesValue,className:u.propTypesClassName,children:u.propTypesChildren},g.displayName="MaterialTailwind.TabPanel";var y=g})(Epe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,_){for(var A in _)Object.defineProperty(x,A,{enumerable:!0,get:_[A]})}t(e,{Tabs:function(){return v},Tab:function(){return l.Tab},TabsBody:function(){return u.TabsBody},TabsHeader:function(){return d.TabsHeader},TabPanel:function(){return c.TabPanel},useTabs:function(){return s.useTabs},default:function(){return b}});var r=y(te),n=y(gr),i=Qt,o=y(Yt),a=jt,s=N1,l=Mpe,u=Cpe,d=Tpe,c=Epe,h=W0;function f(x,_,A){return _ in x?Object.defineProperty(x,_,{value:A,enumerable:!0,configurable:!0,writable:!0}):x[_]=A,x}function g(){return g=Object.assign||function(x){for(var _=1;_<arguments.length;_++){var A=arguments[_];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(x[M]=A[M])}return x},g.apply(this,arguments)}function y(x){return x&&x.__esModule?x:{default:x}}function m(x,_){if(x==null)return{};var A=p(x,_),M,T;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(x);for(T=0;T<C.length;T++)M=C[T],!(_.indexOf(M)>=0)&&Object.prototype.propertyIsEnumerable.call(x,M)&&(A[M]=x[M])}return A}function p(x,_){if(x==null)return{};var A={},M=Object.keys(x),T,C;for(C=0;C<M.length;C++)T=M[C],!(_.indexOf(T)>=0)&&(A[T]=x[T]);return A}var v=r.default.forwardRef(function(x,_){var A=x.value,M=x.className,T=x.orientation,C=x.children,E=m(x,["value","className","orientation","children"]),D=(0,a.useTheme)().tabs,I=D.defaultProps,k=D.styles,L=r.default.useId();M=M??I.className,T=T??I.orientation;var U=(0,i.twMerge)((0,n.default)((0,o.default)(k.base),f({},k[T]&&(0,o.default)(k[T]),T)),M);return r.default.createElement(s.TabsContextProvider,{id:L,value:A,orientation:T},r.default.createElement("div",g({},E,{ref:_,className:U}),C))});v.propTypes={id:h.propTypesId,value:h.propTypesValue,className:h.propTypesClassName,orientation:h.propTypesOrientation,children:h.propTypesChildren},v.displayName="MaterialTailwind.Tabs";var b=Object.assign(v,{Tab:l.Tab,Body:u.TabsBody,Header:d.TabsHeader,Panel:c.TabPanel})})(Ape);var Ppe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{Textarea:function(){return g},default:function(){return y}});var r=c(te),n=c(Kt),i=c(gr),o=c(qn),a=c(Yt),s=jt,l=GM;function u(m,p,v){return p in m?Object.defineProperty(m,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[p]=v,m}function d(){return d=Object.assign||function(m){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},d.apply(this,arguments)}function c(m){return m&&m.__esModule?m:{default:m}}function h(m,p){if(m==null)return{};var v=f(m,p),b,x;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);for(x=0;x<_.length;x++)b=_[x],!(p.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(v[b]=m[b])}return v}function f(m,p){if(m==null)return{};var v={},b=Object.keys(m),x,_;for(_=0;_<b.length;_++)x=b[_],!(p.indexOf(x)>=0)&&(v[x]=m[x]);return v}var g=r.default.forwardRef(function(m,p){var v=m.variant,b=m.color,x=m.size,_=m.label,A=m.error,M=m.success,T=m.resize,C=m.labelProps,E=m.containerProps,D=m.shrink,I=m.className,k=h(m,["variant","color","size","label","error","success","resize","labelProps","containerProps","shrink","className"]),L=(0,s.useTheme)().textarea,U=L.defaultProps,W=L.valid,G=L.styles,z=G.base,V=G.variants;v=v??U.variant,x=x??U.size,b=b??U.color,_=_??U.label,C=C??U.labelProps,E=E??U.containerProps,D=D??U.shrink,I=I??U.className;var j=V[(0,o.default)(W.variants,v,"outlined")],H=(0,a.default)(j.error.textarea),Y=(0,a.default)(j.success.textarea),Q=(0,a.default)(j.shrink.textarea),$=(0,a.default)(j.colors.textarea[(0,o.default)(W.colors,b,"gray")]),ne=(0,a.default)(j.error.label),Z=(0,a.default)(j.success.label),ce=(0,a.default)(j.shrink.label),ae=(0,a.default)(j.colors.label[(0,o.default)(W.colors,b,"gray")]),ie=(0,i.default)((0,a.default)(z.container),E==null?void 0:E.className),le=(0,i.default)((0,a.default)(z.textarea),(0,a.default)(j.base.textarea),(0,a.default)(j.sizes[(0,o.default)(W.sizes,x,"md")].textarea),u({},$,!A&&!M),u({},H,A),u({},Y,M),u({},Q,D),T?"":"!resize-none",I),se=(0,i.default)((0,a.default)(z.label),(0,a.default)(j.base.label),(0,a.default)(j.sizes[(0,o.default)(W.sizes,x,"md")].label),u({},ae,!A&&!M),u({},ne,A),u({},Z,M),u({},ce,D),C==null?void 0:C.className);return r.default.createElement("div",{ref:p,className:ie},r.default.createElement("textarea",d({},k,{className:le,placeholder:(k==null?void 0:k.placeholder)||" "})),r.default.createElement("label",{className:se},_))});g.propTypes={variant:n.default.oneOf(l.propTypesVariant),size:n.default.oneOf(l.propTypesSize),color:n.default.oneOf(l.propTypesColor),label:l.propTypesLabel,error:l.propTypesError,success:l.propTypesSuccess,resize:l.propTypesResize,labelProps:l.propTypesLabelProps,containerProps:l.propTypesContainerProps,shrink:l.propTypesShrink,className:l.propTypesClassName},g.displayName="MaterialTailwind.Textarea";var y=g})(Ppe);var Dpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(I,k){for(var L in k)Object.defineProperty(I,L,{enumerable:!0,get:k[L]})}t(e,{Tooltip:function(){return E},default:function(){return D}});var r=m(te),n=m(Kt),i=fo,o=Do,a=m(gr),s=Qt,l=m(jo),u=m(Yt),d=jt,c=B1;function h(I,k){(k==null||k>I.length)&&(k=I.length);for(var L=0,U=new Array(k);L<k;L++)U[L]=I[L];return U}function f(I){if(Array.isArray(I))return I}function g(I,k,L){return k in I?Object.defineProperty(I,k,{value:L,enumerable:!0,configurable:!0,writable:!0}):I[k]=L,I}function y(){return y=Object.assign||function(I){for(var k=1;k<arguments.length;k++){var L=arguments[k];for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(I[U]=L[U])}return I},y.apply(this,arguments)}function m(I){return I&&I.__esModule?I:{default:I}}function p(I,k){var L=I==null?null:typeof Symbol<"u"&&I[Symbol.iterator]||I["@@iterator"];if(L!=null){var U=[],W=!0,G=!1,z,V;try{for(L=L.call(I);!(W=(z=L.next()).done)&&(U.push(z.value),!(k&&U.length===k));W=!0);}catch(j){G=!0,V=j}finally{try{!W&&L.return!=null&&L.return()}finally{if(G)throw V}}return U}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(I){for(var k=1;k<arguments.length;k++){var L=arguments[k]!=null?arguments[k]:{},U=Object.keys(L);typeof Object.getOwnPropertySymbols=="function"&&(U=U.concat(Object.getOwnPropertySymbols(L).filter(function(W){return Object.getOwnPropertyDescriptor(L,W).enumerable}))),U.forEach(function(W){g(I,W,L[W])})}return I}function x(I,k){var L=Object.keys(I);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(I);k&&(U=U.filter(function(W){return Object.getOwnPropertyDescriptor(I,W).enumerable})),L.push.apply(L,U)}return L}function _(I,k){return k=k??{},Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(k)):x(Object(k)).forEach(function(L){Object.defineProperty(I,L,Object.getOwnPropertyDescriptor(k,L))}),I}function A(I,k){if(I==null)return{};var L=M(I,k),U,W;if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(I);for(W=0;W<G.length;W++)U=G[W],!(k.indexOf(U)>=0)&&Object.prototype.propertyIsEnumerable.call(I,U)&&(L[U]=I[U])}return L}function M(I,k){if(I==null)return{};var L={},U=Object.keys(I),W,G;for(G=0;G<U.length;G++)W=U[G],!(k.indexOf(W)>=0)&&(L[W]=I[W]);return L}function T(I,k){return f(I)||p(I,k)||C(I,k)||v()}function C(I,k){if(I){if(typeof I=="string")return h(I,k);var L=Object.prototype.toString.call(I).slice(8,-1);if(L==="Object"&&I.constructor&&(L=I.constructor.name),L==="Map"||L==="Set")return Array.from(L);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return h(I,k)}}var E=r.default.forwardRef(function(I,k){var L=I.open,U=I.handler,W=I.content,G=I.interactive,z=I.placement,V=I.offset,j=I.dismiss,H=I.animate,Y=I.className,Q=I.children,$=A(I,["open","handler","content","interactive","placement","offset","dismiss","animate","className","children"]),ne=(0,d.useTheme)().tooltip,Z=ne.defaultProps,ce=ne.styles.base,ae=T(r.default.useState(!1),2),ie=ae[0],le=ae[1];L=L??ie,U=U??le,G=G??Z.interactive,z=z??Z.placement,V=V??Z.offset,j=j??Z.dismiss,H=H??Z.animate,Y=Y??Z.className;var se=(0,s.twMerge)((0,a.default)((0,u.default)(ce)),Y),re={unmount:{opacity:0},mount:{opacity:1}},ye=(0,l.default)(re,H),be=(0,i.useFloating)({open:L,onOpenChange:U,middleware:[(0,i.offset)(V),(0,i.flip)(),(0,i.shift)()],placement:z}),_e=be.x,Se=be.y,Fe=be.reference,Re=be.floating,Le=be.strategy,rt=be.refs,st=be.update,he=be.context,q=(0,i.useInteractions)([(0,i.useClick)(he,{enabled:G}),(0,i.useFocus)(he),(0,i.useHover)(he),(0,i.useRole)(he,{role:"tooltip"}),(0,i.useDismiss)(he,j)]),J=q.getReferenceProps,ge=q.getFloatingProps;r.default.useEffect(function(){if(rt.reference.current&&rt.floating.current&&L)return(0,i.autoUpdate)(rt.reference.current,rt.floating.current,st)},[L,st,rt.reference,rt.floating]);var Pe=(0,i.useMergeRefs)([k,Re]),De=(0,i.useMergeRefs)([k,Fe]),Ve=o.AnimatePresence;return r.default.createElement(r.default.Fragment,null,typeof Q=="string"?r.default.createElement("span",y({},J({ref:De})),Q):r.default.cloneElement(Q,b({},J(_(b({},Q==null?void 0:Q.props),{ref:De})))),r.default.createElement(o.LazyMotion,{features:o.domAnimation},r.default.createElement(i.FloatingPortal,null,r.default.createElement(Ve,null,L&&r.default.createElement(o.m.div,y({},ge(_(b({},$),{ref:Pe,className:se,style:{position:Le,top:Se??"",left:_e??""}})),{initial:"unmount",exit:"unmount",animate:L?"mount":"unmount",variants:ye}),W)))))});E.propTypes={open:c.propTypesOpen,handler:c.propTypesHandler,content:c.propTypesContent,interactive:c.propTypesInteractive,placement:n.default.oneOf(c.propTypesPlacement),offset:c.propTypesOffset,dismiss:c.propTypesDismiss,animate:c.propTypesAnimate,className:c.propTypesClassName,children:c.propTypesChildren},E.displayName="MaterialTailwind.Tooltip";var D=E})(Dpe);var Ope={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(b,x){for(var _ in x)Object.defineProperty(b,_,{enumerable:!0,get:x[_]})}t(e,{Typography:function(){return p},default:function(){return v}});var r=c(te),n=c(Kt),i=c(gr),o=Qt,a=c(qn),s=c(Yt),l=jt,u=jH;function d(b,x,_){return x in b?Object.defineProperty(b,x,{value:_,enumerable:!0,configurable:!0,writable:!0}):b[x]=_,b}function c(b){return b&&b.__esModule?b:{default:b}}function h(b){for(var x=1;x<arguments.length;x++){var _=arguments[x]!=null?arguments[x]:{},A=Object.keys(_);typeof Object.getOwnPropertySymbols=="function"&&(A=A.concat(Object.getOwnPropertySymbols(_).filter(function(M){return Object.getOwnPropertyDescriptor(_,M).enumerable}))),A.forEach(function(M){d(b,M,_[M])})}return b}function f(b,x){var _=Object.keys(b);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(b);x&&(A=A.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),_.push.apply(_,A)}return _}function g(b,x){return x=x??{},Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):f(Object(x)).forEach(function(_){Object.defineProperty(b,_,Object.getOwnPropertyDescriptor(x,_))}),b}function y(b,x){if(b==null)return{};var _=m(b,x),A,M;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(b);for(M=0;M<T.length;M++)A=T[M],!(x.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(b,A)&&(_[A]=b[A])}return _}function m(b,x){if(b==null)return{};var _={},A=Object.keys(b),M,T;for(T=0;T<A.length;T++)M=A[T],!(x.indexOf(M)>=0)&&(_[M]=b[M]);return _}var p=r.default.forwardRef(function(b,x){var _=b.variant,A=b.color,M=b.textGradient,T=b.as,C=b.className,E=b.children,D=y(b,["variant","color","textGradient","as","className","children"]),I=(0,l.useTheme)().typography,k=I.defaultProps,L=I.valid,U=I.styles,W=U.variants,G=U.colors,z=U.textGradient;_=_??k.variant,A=A??k.color,M=M||k.textGradient,T=T??void 0,C=C??k.className;var V=(0,s.default)(W[(0,a.default)(L.variants,_,"paragraph")]),j=G[(0,a.default)(L.colors,A,"inherit")],H=(0,s.default)(z),Y=(0,o.twMerge)((0,i.default)(V,d({},j.color,!M),d({},H,M),d({},j.gradient,M)),C),Q;switch(_){case"h1":Q=r.default.createElement(T||"h1",g(h({},D),{ref:x,className:Y}),E);break;case"h2":Q=r.default.createElement(T||"h2",g(h({},D),{ref:x,className:Y}),E);break;case"h3":Q=r.default.createElement(T||"h3",g(h({},D),{ref:x,className:Y}),E);break;case"h4":Q=r.default.createElement(T||"h4",g(h({},D),{ref:x,className:Y}),E);break;case"h5":Q=r.default.createElement(T||"h5",g(h({},D),{ref:x,className:Y}),E);break;case"h6":Q=r.default.createElement(T||"h6",g(h({},D),{ref:x,className:Y}),E);break;case"lead":Q=r.default.createElement(T||"p",g(h({},D),{ref:x,className:Y}),E);break;case"paragraph":Q=r.default.createElement(T||"p",g(h({},D),{ref:x,className:Y}),E);break;case"small":Q=r.default.createElement(T||"p",g(h({},D),{ref:x,className:Y}),E);break;default:Q=r.default.createElement(T||"p",g(h({},D),{ref:x,className:Y}),E);break}return Q});p.propTypes={variant:n.default.oneOf(u.propTypesVariant),color:n.default.oneOf(u.propTypesColor),as:u.propTypesAs,textGradient:u.propTypesTextGradient,className:u.propTypesClassName,children:u.propTypesChildren},p.displayName="MaterialTailwind.Typography";var v=p})(Ope);var Rpe={},Ipe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){for(var c in d)Object.defineProperty(u,c,{enumerable:!0,get:d[c]})}t(e,{propTypesClassName:function(){return o},propTypesChildren:function(){return a},propTypesOpen:function(){return s},propTypesAnimate:function(){return l}});var r=i(Kt),n=Un;function i(u){return u&&u.__esModule?u:{default:u}}var o=r.default.string,a=r.default.node.isRequired,s=r.default.bool.isRequired,l=n.propTypesAnimation})(Ipe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{Collapse:function(){return y},default:function(){return m}});var r=h(te),n=Do,i=fo,o=h(jo),a=h(gr),s=Qt,l=h(Yt),u=jt,d=Ipe;function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.open,x=p.animate,_=p.className,A=p.children,M=f(p,["open","animate","className","children"]),T=r.default.useRef(null),C=(0,u.useTheme)().collapse,E=C.styles,D=E.base;x=x??{},_=_??"";var I=(0,s.twMerge)((0,a.default)((0,l.default)(D)),_),k={unmount:{height:"0px",transition:{duration:.3,times:[.4,0,.2,1]}},mount:{height:"auto",transition:{duration:.3,times:[.4,0,.2,1]}}},L=(0,o.default)(k,x),U=n.AnimatePresence,W=(0,i.useMergeRefs)([v,T]);return r.default.createElement(n.LazyMotion,{features:n.domAnimation},r.default.createElement(U,null,r.default.createElement(n.m.div,c({},M,{ref:W,className:I,initial:"unmount",exit:"unmount",animate:b?"mount":"unmount",variants:L}),A)))});y.displayName="MaterialTailwind.Collapse",y.propTypes={open:d.propTypesOpen,animate:d.propTypesAnimate,className:d.propTypesClassName,children:d.propTypesChildren};var m=y})(Rpe);var Lpe={},tC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){for(var c in d)Object.defineProperty(u,c,{enumerable:!0,get:d[c]})}t(e,{propTypesClassName:function(){return i},propTypesDisabled:function(){return o},propTypesSelected:function(){return a},propTypesRipple:function(){return s},propTypesChildren:function(){return l}});var r=n(Kt);function n(u){return u&&u.__esModule?u:{default:u}}var i=r.default.string,o=r.default.bool,a=r.default.bool,s=r.default.bool,l=r.default.node.isRequired})(tC);var Bpe={},EG={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,y){for(var m in y)Object.defineProperty(g,m,{enumerable:!0,get:y[m]})}t(e,{ListItemPrefix:function(){return h},default:function(){return f}});var r=u(te),n=jt,i=u(gr),o=Qt,a=u(Yt),s=tC;function l(){return l=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var m=arguments[y];for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(g[p]=m[p])}return g},l.apply(this,arguments)}function u(g){return g&&g.__esModule?g:{default:g}}function d(g,y){if(g==null)return{};var m=c(g,y),p,v;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(g);for(v=0;v<b.length;v++)p=b[v],!(y.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(g,p)&&(m[p]=g[p])}return m}function c(g,y){if(g==null)return{};var m={},p=Object.keys(g),v,b;for(b=0;b<p.length;b++)v=p[b],!(y.indexOf(v)>=0)&&(m[v]=g[v]);return m}var h=r.default.forwardRef(function(g,y){var m=g.className,p=g.children,v=d(g,["className","children"]),b=(0,n.useTheme)().list,x=b.styles.base,_=(0,o.twMerge)((0,i.default)((0,a.default)(x.itemPrefix)),m);return r.default.createElement("div",l({},v,{ref:y,className:_}),p)});h.propTypes={className:s.propTypesClassName,children:s.propTypesChildren},h.displayName="MaterialTailwind.ListItemPrefix";var f=h})(EG);var PG={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,y){for(var m in y)Object.defineProperty(g,m,{enumerable:!0,get:y[m]})}t(e,{ListItemSuffix:function(){return h},default:function(){return f}});var r=u(te),n=jt,i=u(gr),o=Qt,a=u(Yt),s=tC;function l(){return l=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var m=arguments[y];for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(g[p]=m[p])}return g},l.apply(this,arguments)}function u(g){return g&&g.__esModule?g:{default:g}}function d(g,y){if(g==null)return{};var m=c(g,y),p,v;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(g);for(v=0;v<b.length;v++)p=b[v],!(y.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(g,p)&&(m[p]=g[p])}return m}function c(g,y){if(g==null)return{};var m={},p=Object.keys(g),v,b;for(b=0;b<p.length;b++)v=p[b],!(y.indexOf(v)>=0)&&(m[v]=g[v]);return m}var h=r.default.forwardRef(function(g,y){var m=g.className,p=g.children,v=d(g,["className","children"]),b=(0,n.useTheme)().list,x=b.styles.base,_=(0,o.twMerge)((0,i.default)((0,a.default)(x.itemSuffix)),m);return r.default.createElement("div",l({},v,{ref:y,className:_}),p)});h.propTypes={className:s.propTypesClassName,children:s.propTypesChildren},h.displayName="MaterialTailwind.ListItemSuffix";var f=h})(PG);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{ListItem:function(){return m},ListItemPrefix:function(){return u.ListItemPrefix},ListItemSuffix:function(){return d.ListItemSuffix},default:function(){return p}});var r=f(te),n=jt,i=f(O1),o=f(gr),a=Qt,s=f(Yt),l=tC,u=EG,d=PG;function c(v,b,x){return b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.className,_=v.disabled,A=v.selected,M=v.ripple,T=v.children,C=g(v,["className","disabled","selected","ripple","children"]),E=(0,n.useTheme)().list,D=E.defaultProps,I=E.styles.base;M=M??D.ripple;var k=M!==void 0&&new i.default,L,U=(0,a.twMerge)((0,o.default)((0,s.default)(I.item.initial),(L={},c(L,(0,s.default)(I.item.disabled),_),c(L,(0,s.default)(I.item.selected),A&&!_),L)),x);return r.default.createElement("div",h({},C,{ref:b,role:"button",tabIndex:0,className:U,onMouseDown:function(W){var G=C==null?void 0:C.onMouseDown;return M&&k.create(W,"dark"),typeof G=="function"&&G(W)}}),T)});m.propTypes={className:l.propTypesClassName,selected:l.propTypesSelected,disabled:l.propTypesDisabled,ripple:l.propTypesRipple,children:l.propTypesChildren},m.displayName="MaterialTailwind.ListItem";var p=Object.assign(m,{Prefix:u.ListItemPrefix,Suffix:d.ListItemSuffix})})(Bpe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{List:function(){return y},ListItem:function(){return l.ListItem},ListItemPrefix:function(){return u.ListItemPrefix},ListItemSuffix:function(){return d.ListItemSuffix},default:function(){return m}});var r=h(te),n=jt,i=h(gr),o=Qt,a=h(Yt),s=tC,l=Bpe,u=EG,d=PG;function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.className,x=p.children,_=f(p,["className","children"]),A=(0,n.useTheme)().list,M=A.defaultProps,T=A.styles.base;b=b??M.className;var C=(0,o.twMerge)((0,i.default)((0,a.default)(T.list)),b);return r.default.createElement("nav",c({},_,{ref:v,className:C}),x)});y.propTypes={className:s.propTypesClassName,children:s.propTypesChildren},y.displayName="MaterialTailwind.List";var m=Object.assign(y,{Item:l.ListItem,ItemPrefix:u.ListItemPrefix,ItemSuffix:d.ListItemSuffix})})(Lpe);var Npe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(p,v){for(var b in v)Object.defineProperty(p,b,{enumerable:!0,get:v[b]})}t(e,{ButtonGroup:function(){return y},default:function(){return m}});var r=h(te),n=h(Kt),i=h(gr),o=Qt,a=h(qn),s=h(Yt),l=jt,u=z0;function d(p,v,b){return v in p?Object.defineProperty(p,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):p[v]=b,p}function c(){return c=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(p[x]=b[x])}return p},c.apply(this,arguments)}function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(p==null)return{};var b=g(p,v),x,_;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);for(_=0;_<A.length;_++)x=A[_],!(v.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(p,x)&&(b[x]=p[x])}return b}function g(p,v){if(p==null)return{};var b={},x=Object.keys(p),_,A;for(A=0;A<x.length;A++)_=x[A],!(v.indexOf(_)>=0)&&(b[_]=p[_]);return b}var y=r.default.forwardRef(function(p,v){var b=p.variant,x=p.size,_=p.color,A=p.fullWidth,M=p.ripple,T=p.className,C=p.children,E=f(p,["variant","size","color","fullWidth","ripple","className","children"]),D=(0,l.useTheme)().buttonGroup,I=D.defaultProps,k=D.styles,L=D.valid,U=k.base,W=k.dividerColor;b=b??I.variant,x=x??I.size,_=_??I.color,M=M??I.ripple,A=A??I.fullWidth,T=T??I.className;var G,z=(0,o.twMerge)((0,i.default)((0,s.default)(U.initial),(G={},d(G,(0,s.default)(U.fullWidth),A),d(G,"divide-x",b!=="outlined"),d(G,(0,s.default)(W[(0,a.default)(L.colors,_,"gray")]),b!=="outlined"),G)),T);return r.default.createElement("div",c({},E,{ref:v,className:z}),r.default.Children.map(C,function(V,j){var H;return r.default.isValidElement(V)&&r.default.cloneElement(V,{variant:b,size:x,color:_,ripple:M,fullWidth:A,className:(0,o.twMerge)((0,i.default)({"rounded-r-none":j!==r.default.Children.count(C)-1,"border-r-0":j!==r.default.Children.count(C)-1,"rounded-l-none":j!==0}),(H=V.props)===null||H===void 0?void 0:H.className)})}))});y.propTypes={variant:n.default.oneOf(u.propTypesVariant),size:n.default.oneOf(u.propTypesSize),color:n.default.oneOf(u.propTypesColor),fullWidth:u.propTypesFullWidth,ripple:u.propTypesRipple,className:u.propTypesClassName,children:u.propTypesChildren},y.displayName="MaterialTailwind.ButtonGroup";var m=y})(Npe);var kpe={},Fpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,y){for(var m in y)Object.defineProperty(g,m,{enumerable:!0,get:y[m]})}t(e,{propTypesClassName:function(){return i},propTypesPrevArrow:function(){return o},propTypesNextArrow:function(){return a},propTypesNavigation:function(){return s},propTypesAutoplay:function(){return l},propTypesAutoplayDelay:function(){return u},propTypesTransition:function(){return d},propTypesLoop:function(){return c},propTypesChildren:function(){return h},propTypesSlideRef:function(){return f}});var r=n(Kt);function n(g){return g&&g.__esModule?g:{default:g}}var i=r.default.string,o=r.default.func,a=r.default.func,s=r.default.func,l=r.default.bool,u=r.default.number,d=r.default.object,c=r.default.bool,h=r.default.node.isRequired,f=r.default.oneOfType([r.default.func,r.default.shape({current:r.default.any})])})(Fpe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(A,M){for(var T in M)Object.defineProperty(A,T,{enumerable:!0,get:M[T]})}t(e,{Carousel:function(){return x},default:function(){return _}});var r=f(te),n=Do,i=fo,o=f(gr),a=Qt,s=f(Yt),l=jt,u=Fpe;function d(A,M){(M==null||M>A.length)&&(M=A.length);for(var T=0,C=new Array(M);T<M;T++)C[T]=A[T];return C}function c(A){if(Array.isArray(A))return A}function h(){return h=Object.assign||function(A){for(var M=1;M<arguments.length;M++){var T=arguments[M];for(var C in T)Object.prototype.hasOwnProperty.call(T,C)&&(A[C]=T[C])}return A},h.apply(this,arguments)}function f(A){return A&&A.__esModule?A:{default:A}}function g(A,M){var T=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(T!=null){var C=[],E=!0,D=!1,I,k;try{for(T=T.call(A);!(E=(I=T.next()).done)&&(C.push(I.value),!(M&&C.length===M));E=!0);}catch(L){D=!0,k=L}finally{try{!E&&T.return!=null&&T.return()}finally{if(D)throw k}}return C}}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(A,M){if(A==null)return{};var T=p(A,M),C,E;if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(A);for(E=0;E<D.length;E++)C=D[E],!(M.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(A,C)&&(T[C]=A[C])}return T}function p(A,M){if(A==null)return{};var T={},C=Object.keys(A),E,D;for(D=0;D<C.length;D++)E=C[D],!(M.indexOf(E)>=0)&&(T[E]=A[E]);return T}function v(A,M){return c(A)||g(A,M)||b(A,M)||y()}function b(A,M){if(A){if(typeof A=="string")return d(A,M);var T=Object.prototype.toString.call(A).slice(8,-1);if(T==="Object"&&A.constructor&&(T=A.constructor.name),T==="Map"||T==="Set")return Array.from(T);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return d(A,M)}}var x=r.default.forwardRef(function(A,M){var T=A.children,C=A.prevArrow,E=A.nextArrow,D=A.navigation,I=A.autoplay,k=A.autoplayDelay,L=A.transition,U=A.loop,W=A.className,G=A.slideRef,z=m(A,["children","prevArrow","nextArrow","navigation","autoplay","autoplayDelay","transition","loop","className","slideRef"]),V=(0,l.useTheme)().carousel,j=V.defaultProps,H=V.styles.base,Y=(0,n.useMotionValue)(0),Q=r.default.useRef(null),$=v(r.default.useState(0),2),ne=$[0],Z=$[1],ce=r.default.Children.toArray(T);W=W??j.className,C=C??j.prevArrow,E=E??j.nextArrow,D=D??j.navigation,I=I??j.autoplay,k=k??j.autoplayDelay,L=L??j.transition,U=U??j.loop;var ae=(0,a.twMerge)((0,o.default)((0,s.default)(H.carousel)),W),ie=(0,a.twMerge)((0,o.default)((0,s.default)(H.slide))),le=r.default.useCallback(function(){var be;return-ne*(((be=Q.current)===null||be===void 0?void 0:be.clientWidth)||0)},[ne]),se=r.default.useCallback(function(){var be=U?0:ne;Z(ne+1===ce.length?be:ne+1)},[ne,U,ce.length]),re=function(){var be=U?ce.length-1:0;Z(ne-1<0?be:ne-1)};r.default.useEffect(function(){var be=(0,n.animate)(Y,le(),L);return be.stop},[le,ne,Y,L]),r.default.useEffect(function(){window.addEventListener("resize",function(){(0,n.animate)(Y,le(),L)})},[le,L,Y]),r.default.useEffect(function(){if(I){var be=setInterval(function(){return se()},k);return function(){return clearInterval(be)}}},[I,se,k]);var ye=(0,i.useMergeRefs)([Q,M]);return r.default.createElement("div",h({},z,{ref:ye,className:ae}),ce.map(function(be,_e){return r.default.createElement(n.LazyMotion,{key:_e,features:n.domAnimation},r.default.createElement(n.m.div,{ref:G,className:ie,style:{x:Y,left:"".concat(_e*100,"%"),right:"".concat(_e*100,"%")}},be))}),C&&C({loop:U,handlePrev:re,activeIndex:ne,firstIndex:ne===0}),E&&E({loop:U,handleNext:se,activeIndex:ne,lastIndex:ne===ce.length-1}),D&&D({setActiveIndex:Z,activeIndex:ne,length:ce.length}))});x.propTypes={className:u.propTypesClassName,children:u.propTypesChildren,nextArrow:u.propTypesNextArrow,prevArrow:u.propTypesPrevArrow,navigation:u.propTypesNavigation,autoplay:u.propTypesAutoplay,autoplayDelay:u.propTypesAutoplayDelay,transition:u.propTypesTransition,loop:u.propTypesLoop,slideRef:u.propTypesSlideRef},x.displayName="MaterialTailwind.Carousel";var _=x})(kpe);var zpe={},Upe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{propTypesOpen:function(){return o},propTypesSize:function(){return a},propTypesOverlay:function(){return s},propTypesChildren:function(){return l},propTypesPlacement:function(){return u},propTypesOverlayProps:function(){return d},propTypesClassName:function(){return c},propTypesOnClose:function(){return h},propTypesDismiss:function(){return f},propTypesTransition:function(){return g},propTypesOverlayRef:function(){return y}});var r=i(Kt),n=Un;function i(m){return m&&m.__esModule?m:{default:m}}var o=r.default.bool.isRequired,a=r.default.number,s=r.default.bool,l=r.default.node.isRequired,u=["top","right","bottom","left"],d=r.default.object,c=r.default.string,h=r.default.func,f=n.propTypesDismissType,g=r.default.object,y=r.default.oneOfType([r.default.func,r.default.shape({current:r.default.any})])})(Upe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,_){for(var A in _)Object.defineProperty(x,A,{enumerable:!0,get:_[A]})}t(e,{Drawer:function(){return v},default:function(){return b}});var r=g(te),n=g(Kt),i=Do,o=fo,a=g(jo),s=g(gr),l=Qt,u=g(Yt),d=jt,c=Upe;function h(x,_,A){return _ in x?Object.defineProperty(x,_,{value:A,enumerable:!0,configurable:!0,writable:!0}):x[_]=A,x}function f(){return f=Object.assign||function(x){for(var _=1;_<arguments.length;_++){var A=arguments[_];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(x[M]=A[M])}return x},f.apply(this,arguments)}function g(x){return x&&x.__esModule?x:{default:x}}function y(x){for(var _=1;_<arguments.length;_++){var A=arguments[_]!=null?arguments[_]:{},M=Object.keys(A);typeof Object.getOwnPropertySymbols=="function"&&(M=M.concat(Object.getOwnPropertySymbols(A).filter(function(T){return Object.getOwnPropertyDescriptor(A,T).enumerable}))),M.forEach(function(T){h(x,T,A[T])})}return x}function m(x,_){if(x==null)return{};var A=p(x,_),M,T;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(x);for(T=0;T<C.length;T++)M=C[T],!(_.indexOf(M)>=0)&&Object.prototype.propertyIsEnumerable.call(x,M)&&(A[M]=x[M])}return A}function p(x,_){if(x==null)return{};var A={},M=Object.keys(x),T,C;for(C=0;C<M.length;C++)T=M[C],!(_.indexOf(T)>=0)&&(A[T]=x[T]);return A}var v=r.default.forwardRef(function(x,_){var A=x.open,M=x.size,T=x.overlay,C=x.children,E=x.placement,D=x.overlayProps,I=x.className,k=x.onClose,L=x.dismiss,U=x.transition,W=x.overlayRef,G=m(x,["open","size","overlay","children","placement","overlayProps","className","onClose","dismiss","transition","overlayRef"]),z=(0,d.useTheme)().drawer,V=z.defaultProps,j=z.styles.base,H=(0,i.useAnimation)();M=M??V.size,T=T??V.overlay,E=E??V.placement,I=I??V.className,D=D??V.overlayProps,k=k??V.onClose;var Y;L=(Y=(0,a.default)(V.dismiss,L||{}))!==null&&Y!==void 0?Y:V.dismiss,U=U??V.transition;var Q=(0,l.twMerge)((0,s.default)((0,u.default)(j.drawer),{"top-0 right-0":E==="right","bottom-0 left-0":E==="bottom","top-0 left-0":E==="top"||E==="left"}),I),$=(0,l.twMerge)((0,s.default)((0,u.default)(j.overlay)),D==null?void 0:D.className),ne=(0,o.useFloating)({open:A,onOpenChange:k}).context,Z=(0,o.useInteractions)([(0,o.useDismiss)(ne,L)]).getFloatingProps;r.default.useEffect(function(){H.start(A?"open":"close")},[A,H,E]);var ce={open:{x:0,y:0},close:{x:E==="left"?-M:E==="right"?M:0,y:E==="top"?-M:E==="bottom"?M:0}},ae={unmount:{opacity:0,transition:{delay:.3}},mount:{opacity:1}};return r.default.createElement(r.default.Fragment,null,r.default.createElement(i.LazyMotion,{features:i.domAnimation},r.default.createElement(i.AnimatePresence,null,T&&A&&r.default.createElement(i.m.div,{ref:W,className:$,initial:"unmount",exit:"unmount",animate:A?"mount":"unmount",variants:ae,transition:{duration:.3}})),r.default.createElement(i.m.div,f({},Z(y({ref:_},G)),{className:Q,style:{maxWidth:E==="left"||E==="right"?M:"100%",maxHeight:E==="top"||E==="bottom"?M:"100%",height:E==="left"||E==="right"?"100vh":"100%"},initial:"close",animate:H,variants:ce,transition:U}),C)))});v.propTypes={open:c.propTypesOpen,size:c.propTypesSize,overlay:c.propTypesOverlay,children:c.propTypesChildren,placement:n.default.oneOf(c.propTypesPlacement),overlayProps:c.propTypesOverlayProps,className:c.propTypesClassName,onClose:c.propTypesOnClose,dismiss:c.propTypesDismiss,transition:c.propTypesTransition,overlayRef:c.propTypesOverlayRef},v.displayName="MaterialTailwind.Drawer";var b=v})(zpe);var Vpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Badge:function(){return m},default:function(){return p}});var r=f(te),n=f(Kt),i=f(jo),o=f(gr),a=Qt,s=f(qn),l=f(Yt),u=jt,d=HH;function c(v,b,x){return b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.color,_=v.invisible,A=v.withBorder,M=v.overlap,T=v.placement,C=v.className,E=v.content,D=v.children,I=v.containerProps,k=v.containerRef,L=g(v,["color","invisible","withBorder","overlap","placement","className","content","children","containerProps","containerRef"]),U=(0,u.useTheme)().badge,W=U.valid,G=U.defaultProps,z=U.styles,V=z.base,j=z.placements,H=z.colors;x=x??G.color,_=_??G.invisible,A=A??G.withBorder,M=M??G.overlap,T=T??G.placement;var Y;C=(Y=(0,o.default)(C,G.className))!==null&&Y!==void 0?Y:G.className;var Q;I=(Q=(0,i.default)(I,G.containerProps||{}))!==null&&Q!==void 0?Q:G.containerProps;var $=(0,l.default)(V.badge.initial),ne=(0,l.default)(V.badge.withBorder),Z=(0,l.default)(V.badge.withContent),ce=(0,l.default)(H[(0,s.default)(W.colors,x,"red")]),ae=(0,l.default)(j[(0,s.default)(W.placements,T,"top-end")][(0,s.default)(W.overlaps,M,"square")]),ie,le=(0,a.twMerge)((0,o.default)($,ae,ce,(ie={},c(ie,ne,A),c(ie,Z,E),ie)),C),se=(0,a.twMerge)((0,o.default)((0,l.default)(V.container),I==null?void 0:I.className));return r.default.createElement("div",h({ref:k},I,{className:se}),D,!_&&r.default.createElement("span",h({},L,{ref:b,className:le}),E))});m.propTypes={color:n.default.oneOf(d.propTypesColor),invisible:d.propTypesInvisible,withBorder:d.propTypesWithBorder,overlap:n.default.oneOf(d.propTypesOverlap),className:d.propTypesClassName,content:d.propTypesContent,children:d.propTypesChildren,placement:n.default.oneOf(d.propTypesPlacement),containerProps:d.propTypesContainerProps,containerRef:d.propTypesContainerRef},m.displayName="MaterialTailwind.Badge";var p=m})(Vpe);var jpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(E,D){for(var I in D)Object.defineProperty(E,I,{enumerable:!0,get:D[I]})}t(e,{Rating:function(){return T},default:function(){return C}});var r=g(te),n=g(Kt),i=g(gr),o=Qt,a=g(qn),s=g(Yt),l=jt,u=GH;function d(E,D){(D==null||D>E.length)&&(D=E.length);for(var I=0,k=new Array(D);I<D;I++)k[I]=E[I];return k}function c(E){if(Array.isArray(E))return E}function h(E){if(Array.isArray(E))return d(E)}function f(){return f=Object.assign||function(E){for(var D=1;D<arguments.length;D++){var I=arguments[D];for(var k in I)Object.prototype.hasOwnProperty.call(I,k)&&(E[k]=I[k])}return E},f.apply(this,arguments)}function g(E){return E&&E.__esModule?E:{default:E}}function y(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}function m(E,D){var I=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(I!=null){var k=[],L=!0,U=!1,W,G;try{for(I=I.call(E);!(L=(W=I.next()).done)&&(k.push(W.value),!(D&&k.length===D));L=!0);}catch(z){U=!0,G=z}finally{try{!L&&I.return!=null&&I.return()}finally{if(U)throw G}}return k}}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(E,D){if(E==null)return{};var I=x(E,D),k,L;if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(E);for(L=0;L<U.length;L++)k=U[L],!(D.indexOf(k)>=0)&&Object.prototype.propertyIsEnumerable.call(E,k)&&(I[k]=E[k])}return I}function x(E,D){if(E==null)return{};var I={},k=Object.keys(E),L,U;for(U=0;U<k.length;U++)L=k[U],!(D.indexOf(L)>=0)&&(I[L]=E[L]);return I}function _(E,D){return c(E)||m(E,D)||M(E,D)||p()}function A(E){return h(E)||y(E)||M(E)||v()}function M(E,D){if(E){if(typeof E=="string")return d(E,D);var I=Object.prototype.toString.call(E).slice(8,-1);if(I==="Object"&&E.constructor&&(I=E.constructor.name),I==="Map"||I==="Set")return Array.from(I);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return d(E,D)}}var T=r.default.forwardRef(function(E,D){var I=E.count,k=E.value,L=E.ratedIcon,U=E.unratedIcon,W=E.ratedColor,G=E.unratedColor,z=E.className,V=E.onChange,j=E.readonly,H=b(E,["count","value","ratedIcon","unratedIcon","ratedColor","unratedColor","className","onChange","readonly"]),Y,Q,$=(0,l.useTheme)().rating,ne=$.valid,Z=$.defaultProps,ce=$.styles,ae=ce.base,ie=ce.colors;I=I??Z.count,k=k??Z.value,L=L??Z.ratedIcon,L=L??Z.ratedIcon,U=U??Z.unratedIcon,W=W??Z.ratedColor,G=G??Z.unratedColor,z=z??Z.className,V=V??Z.onChange,j=j??Z.readonly;var le=_(r.default.useState(function(){return A(Array(k).fill("rated")).concat(A(Array(I-k).fill("un_rated")))}),2),se=le[0],re=le[1],ye=_(r.default.useState(function(){return A(Array(I).fill("un_rated"))}),2),be=ye[0],_e=ye[1],Se=_(r.default.useState(!1),2),Fe=Se[0],Re=Se[1],Le=(0,s.default)(ie[(0,a.default)(ne.colors,W,"yellow")]),rt=(0,s.default)(ie[(0,a.default)(ne.colors,G,"blue-gray")]),st=(0,o.twMerge)((0,i.default)((0,s.default)(ae.rating),z)),he=(0,s.default)(ae.icon),q=L,J=U,ge=r.default.isValidElement(L)&&r.default.cloneElement(q,{className:(0,o.twMerge)((0,i.default)(he,Le,q==null||(Y=q.props)===null||Y===void 0?void 0:Y.className))}),Pe=r.default.isValidElement(L)&&r.default.cloneElement(J,{className:(0,o.twMerge)((0,i.default)(he,rt,J==null||(Q=J.props)===null||Q===void 0?void 0:Q.className))}),De=!r.default.isValidElement(L)&&r.default.createElement(L,{className:(0,o.twMerge)((0,i.default)(he,Le))}),Ve=!r.default.isValidElement(L)&&r.default.createElement(U,{className:(0,o.twMerge)((0,i.default)(he,rt))}),et=function(Ce){return Ce.map(function(Je,ut){return r.default.createElement("span",{key:ut,onClick:function(){if(!j){var pt=se.map(function(Ke,gt){return gt<=ut?"rated":"un_rated"});re(pt),V&&typeof V=="function"&&V(pt.filter(function(Ke){return Ke==="rated"}).length)}},onMouseEnter:function(){if(!j){var pt=be.map(function(Ke,gt){return gt<=ut?"rated":"un_rated"});Re(!0),_e(pt)}},onMouseLeave:function(){return!j&&Re(!1)}},r.default.isValidElement(Je==="rated"?L:U)?Je==="rated"?ge:Pe:Je==="rated"?De:Ve)})};return r.default.createElement("div",f({},H,{ref:D,className:st}),et(Fe?be:se))});T.propTypes={count:u.propTypesCount,value:u.propTypesValue,ratedIcon:u.propTypesRatedIcon,unratedIcon:u.propTypesUnratedIcon,ratedColor:n.default.oneOf(u.propTypesColor),unratedColor:n.default.oneOf(u.propTypesColor),className:u.propTypesClassName,onChange:u.propTypesOnChange,readonly:u.propTypesReadonly},T.displayName="MaterialTailwind.Rating";var C=T})(jpe);var Hpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(M,T){for(var C in T)Object.defineProperty(M,C,{enumerable:!0,get:T[C]})}t(e,{Slider:function(){return _},default:function(){return A}});var r=g(te),n=g(Kt),i=g(jo),o=g(gr),a=Qt,s=g(qn),l=g(Yt),u=jt,d=WH;function c(M,T){(T==null||T>M.length)&&(T=M.length);for(var C=0,E=new Array(T);C<T;C++)E[C]=M[C];return E}function h(M){if(Array.isArray(M))return M}function f(){return f=Object.assign||function(M){for(var T=1;T<arguments.length;T++){var C=arguments[T];for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(M[E]=C[E])}return M},f.apply(this,arguments)}function g(M){return M&&M.__esModule?M:{default:M}}function y(M,T){var C=M==null?null:typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(C!=null){var E=[],D=!0,I=!1,k,L;try{for(C=C.call(M);!(D=(k=C.next()).done)&&(E.push(k.value),!(T&&E.length===T));D=!0);}catch(U){I=!0,L=U}finally{try{!D&&C.return!=null&&C.return()}finally{if(I)throw L}}return E}}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(M,T){if(M==null)return{};var C=v(M,T),E,D;if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(M);for(D=0;D<I.length;D++)E=I[D],!(T.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(M,E)&&(C[E]=M[E])}return C}function v(M,T){if(M==null)return{};var C={},E=Object.keys(M),D,I;for(I=0;I<E.length;I++)D=E[I],!(T.indexOf(D)>=0)&&(C[D]=M[D]);return C}function b(M,T){return h(M)||y(M,T)||x(M,T)||m()}function x(M,T){if(M){if(typeof M=="string")return c(M,T);var C=Object.prototype.toString.call(M).slice(8,-1);if(C==="Object"&&M.constructor&&(C=M.constructor.name),C==="Map"||C==="Set")return Array.from(C);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return c(M,T)}}var _=r.default.forwardRef(function(M,T){var C=M.color,E=M.size,D=M.className,I=M.trackClassName,k=M.thumbClassName,L=M.barClassName,U=M.value,W=M.defaultValue,G=M.onChange,z=M.min,V=M.max,j=M.step,H=M.inputRef,Y=M.inputProps,Q=p(M,["color","size","className","trackClassName","thumbClassName","barClassName","value","defaultValue","onChange","min","max","step","inputRef","inputProps"]),$=(0,u.useTheme)().slider,ne=$.valid,Z=$.defaultProps,ce=$.styles,ae=ce.base,ie=ce.sizes,le=ce.colors,se=b(r.default.useState(W||0),2),re=se[0],ye=se[1];r.default.useMemo(function(){W&&ye(W)},[W]),C=C??Z.color,E=E??Z.size,z=z??Z.min,V=V??Z.max,j=j??Z.step;var be;D=(be=(0,o.default)(Z.className,D))!==null&&be!==void 0?be:Z.className;var _e;k=(_e=(0,o.default)(Z.thumbClassName,k))!==null&&_e!==void 0?_e:Z.thumbClassName;var Se;I=(Se=(0,o.default)(Z.trackClassName,I))!==null&&Se!==void 0?Se:Z.trackClassName;var Fe;L=(Fe=(0,o.default)(Z.barClassName,L))!==null&&Fe!==void 0?Fe:Z.barClassName;var Re;Y=(Re=(0,i.default)(Y,(Z==null?void 0:Z.inputProps)||{}))!==null&&Re!==void 0?Re:Z.inputProps;var Le=(0,a.twMerge)((0,o.default)((0,l.default)(ae.container),(0,l.default)(le[(0,s.default)(ne.colors,C,"gray")]),(0,l.default)(ie[(0,s.default)(ne.sizes,E,"md")].container),D)),rt=(0,a.twMerge)((0,o.default)((0,l.default)(ae.bar),L)),st=(0,o.default)((0,l.default)(ae.track),(0,l.default)(ie[(0,s.default)(ne.sizes,E,"md")].track)),he=(0,o.default)((0,l.default)(ae.thumb),(0,l.default)(ie[(0,s.default)(ne.sizes,E,"md")].thumb)),q=(0,o.default)((0,l.default)(ae.slider),(0,a.twMerge)(st,I),(0,a.twMerge)(he,k));return r.default.createElement("div",f({},Q,{ref:T,className:Le}),r.default.createElement("label",{className:rt,style:{width:"".concat(U||re,"%")}}),r.default.createElement("input",f({ref:H,type:"range",max:V,min:z,step:j,className:q},U?{value:U}:null,{defaultValue:W,onChange:function(J){return G?G(J):ye(Number(J.target.value))}})))});_.propTypes={color:n.default.oneOf(d.propTypesColor),size:n.default.oneOf(d.propTypesSize),className:d.propTypesClassName,trackClassName:d.propTypesTrackClassName,thumbClassName:d.propTypesThumbClassName,barClassName:d.propTypesBarClassName,defaultValue:d.propTypesDefaultValue,value:d.propTypesValue,onChange:d.propTypesOnChange,min:d.propTypesMin,max:d.propTypesMax,step:d.propTypesStep,inputRef:d.propTypesInputRef,inputProps:d.propTypesInputProps},_.displayName="MaterialTailwind.Slider";var A=_})(Hpe);var Gpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Spinner:function(){return m},default:function(){return p}});var r=c(Kt),n=f(te),i=c(gr),o=Qt,a=c(qn),s=c(Yt),l=jt,u=qH;function d(){return d=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},d.apply(this,arguments)}function c(v){return v&&v.__esModule?v:{default:v}}function h(v){if(typeof WeakMap!="function")return null;var b=new WeakMap,x=new WeakMap;return(h=function(_){return _?x:b})(v)}function f(v,b){if(!b&&v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var x=h(b);if(x&&x.has(v))return x.get(v);var _={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in v)if(M!=="default"&&Object.prototype.hasOwnProperty.call(v,M)){var T=A?Object.getOwnPropertyDescriptor(v,M):null;T&&(T.get||T.set)?Object.defineProperty(_,M,T):_[M]=v[M]}return _.default=v,x&&x.set(v,_),_}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=(0,n.forwardRef)(function(v,b){var x=v.color,_=v.className,A=g(v,["color","className"]),M=(0,l.useTheme)().spinner,T=M.defaultProps,C=M.valid,E=M.styles,D=E.base,I=E.colors;x=x??T.color;var k;_=(k=(0,i.default)(T.className,_))!==null&&k!==void 0?k:T.className;var L=(0,s.default)(I[(0,a.default)(C.colors,x,"gray")]),U=(0,o.twMerge)((0,i.default)((0,s.default)(D)),_),W,G;return n.default.createElement("svg",d({},A,{ref:b,className:U,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:(W=A==null?void 0:A.width)!==null&&W!==void 0?W:24,height:(G=A==null?void 0:A.height)!==null&&G!==void 0?G:24}),n.default.createElement("path",{d:"M32 3C35.8083 3 39.5794 3.75011 43.0978 5.20749C46.6163 6.66488 49.8132 8.80101 52.5061 11.4939C55.199 14.1868 57.3351 17.3837 58.7925 20.9022C60.2499 24.4206 61 28.1917 61 32C61 35.8083 60.2499 39.5794 58.7925 43.0978C57.3351 46.6163 55.199 49.8132 52.5061 52.5061C49.8132 55.199 46.6163 57.3351 43.0978 58.7925C39.5794 60.2499 35.8083 61 32 61C28.1917 61 24.4206 60.2499 20.9022 58.7925C17.3837 57.3351 14.1868 55.199 11.4939 52.5061C8.801 49.8132 6.66487 46.6163 5.20749 43.0978C3.7501 39.5794 3 35.8083 3 32C3 28.1917 3.75011 24.4206 5.2075 20.9022C6.66489 17.3837 8.80101 14.1868 11.4939 11.4939C14.1868 8.80099 17.3838 6.66487 20.9022 5.20749C24.4206 3.7501 28.1917 3 32 3L32 3Z",stroke:"currentColor",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round"}),n.default.createElement("path",{d:"M32 3C36.5778 3 41.0906 4.08374 45.1692 6.16256C49.2477 8.24138 52.7762 11.2562 55.466 14.9605C58.1558 18.6647 59.9304 22.9531 60.6448 27.4748C61.3591 31.9965 60.9928 36.6232 59.5759 40.9762",stroke:"currentColor",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",className:L}))});m.propTypes={color:r.default.oneOf(u.propTypesColor),className:u.propTypesClassName},m.displayName="MaterialTailwind.Spinner";var p=m})(Gpe);var Wpe={},rC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,A){for(var M in A)Object.defineProperty(_,M,{enumerable:!0,get:A[M]})}t(e,{useTimelineItem:function(){return v},TimelineItem:function(){return b},default:function(){return x}});var r=d(te),n=Qt,i=d(Yt),o=jt,a=jh;function s(_,A){(A==null||A>_.length)&&(A=_.length);for(var M=0,T=new Array(A);M<A;M++)T[M]=_[M];return T}function l(_){if(Array.isArray(_))return _}function u(){return u=Object.assign||function(_){for(var A=1;A<arguments.length;A++){var M=arguments[A];for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(_[T]=M[T])}return _},u.apply(this,arguments)}function d(_){return _&&_.__esModule?_:{default:_}}function c(_,A){var M=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(M!=null){var T=[],C=!0,E=!1,D,I;try{for(M=M.call(_);!(C=(D=M.next()).done)&&(T.push(D.value),!(A&&T.length===A));C=!0);}catch(k){E=!0,I=k}finally{try{!C&&M.return!=null&&M.return()}finally{if(E)throw I}}return T}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(_,A){if(_==null)return{};var M=g(_,A),T,C;if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(_);for(C=0;C<E.length;C++)T=E[C],!(A.indexOf(T)>=0)&&Object.prototype.propertyIsEnumerable.call(_,T)&&(M[T]=_[T])}return M}function g(_,A){if(_==null)return{};var M={},T=Object.keys(_),C,E;for(E=0;E<T.length;E++)C=T[E],!(A.indexOf(C)>=0)&&(M[C]=_[C]);return M}function y(_,A){return l(_)||c(_,A)||m(_,A)||h()}function m(_,A){if(_){if(typeof _=="string")return s(_,A);var M=Object.prototype.toString.call(_).slice(8,-1);if(M==="Object"&&_.constructor&&(M=_.constructor.name),M==="Map"||M==="Set")return Array.from(M);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return s(_,A)}}var p=r.default.createContext(0);p.displayName="MaterialTailwind.TimelineItemContext";function v(){var _=r.default.useContext(p);if(!_)throw new Error("useTimelineItemContext() must be used within a TimelineItem. It happens when you use TimelineIcon, TimelineConnector or TimelineBody components outside the TimelineItem component.");return _}var b=r.default.forwardRef(function(_,A){var M=_.className,T=_.children,C=f(_,["className","children"]),E=(0,o.useTheme)().timelineItem,D=E.styles,I=D.base,k=y(r.default.useState(0),2),L=k[0],U=k[1],W=r.default.useMemo(function(){return[L,U]},[L,U]),G=(0,n.twMerge)((0,i.default)(I),M);return r.default.createElement(p.Provider,{value:W},r.default.createElement("li",u({ref:A},C,{className:G}),T))});b.propTypes={className:a.propTypeClassName,children:a.propTypeChildren.isRequired},b.displayName="MaterialTailwind.TimelineItem";var x=b})(rC);var qpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(M,T){for(var C in T)Object.defineProperty(M,C,{enumerable:!0,get:T[C]})}t(e,{TimelineIcon:function(){return _},default:function(){return A}});var r=g(te),n=g(Kt),i=fo,o=Qt,a=g(qn),s=g(Yt),l=jt,u=rC,d=jh;function c(M,T){(T==null||T>M.length)&&(T=M.length);for(var C=0,E=new Array(T);C<T;C++)E[C]=M[C];return E}function h(M){if(Array.isArray(M))return M}function f(){return f=Object.assign||function(M){for(var T=1;T<arguments.length;T++){var C=arguments[T];for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(M[E]=C[E])}return M},f.apply(this,arguments)}function g(M){return M&&M.__esModule?M:{default:M}}function y(M,T){var C=M==null?null:typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(C!=null){var E=[],D=!0,I=!1,k,L;try{for(C=C.call(M);!(D=(k=C.next()).done)&&(E.push(k.value),!(T&&E.length===T));D=!0);}catch(U){I=!0,L=U}finally{try{!D&&C.return!=null&&C.return()}finally{if(I)throw L}}return E}}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(M,T){if(M==null)return{};var C=v(M,T),E,D;if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(M);for(D=0;D<I.length;D++)E=I[D],!(T.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(M,E)&&(C[E]=M[E])}return C}function v(M,T){if(M==null)return{};var C={},E=Object.keys(M),D,I;for(I=0;I<E.length;I++)D=E[I],!(T.indexOf(D)>=0)&&(C[D]=M[D]);return C}function b(M,T){return h(M)||y(M,T)||x(M,T)||m()}function x(M,T){if(M){if(typeof M=="string")return c(M,T);var C=Object.prototype.toString.call(M).slice(8,-1);if(C==="Object"&&M.constructor&&(C=M.constructor.name),C==="Map"||C==="Set")return Array.from(C);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return c(M,T)}}var _=r.default.forwardRef(function(M,T){var C=M.color,E=M.variant,D=M.className,I=M.children,k=p(M,["color","variant","className","children"]),L=(0,l.useTheme)().timelineIcon,U=L.styles,W=L.valid,G=U.base,z=U.variants,V=b((0,u.useTimelineItem)(),2),j=V[1],H=r.default.useRef(null),Y=(0,i.useMergeRefs)([T,H]);r.default.useEffect(function(){var ne=H.current;if(ne){var Z=ne.getBoundingClientRect().width;return j(Z),function(){j(0)}}},[j,D,I]);var Q=(0,s.default)(z[(0,a.default)(W.variants,E,"filled")][(0,a.default)(W.colors,C,"gray")]),$=(0,o.twMerge)((0,s.default)(G),Q,D);return r.default.createElement("span",f({ref:Y},k,{className:$}),I)});_.propTypes={children:d.propTypeChildren,className:d.propTypeClassName,color:n.default.oneOf(d.propTypeColor),variant:n.default.oneOf(d.propTypeVariant)},_.displayName="MaterialTailwind.TimelineIcon";var A=_})(qpe);var Xpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,_){for(var A in _)Object.defineProperty(x,A,{enumerable:!0,get:_[A]})}t(e,{TimelineHeader:function(){return v},default:function(){return b}});var r=c(te),n=Qt,i=c(Yt),o=jt,a=rC,s=jh;function l(x,_){(_==null||_>x.length)&&(_=x.length);for(var A=0,M=new Array(_);A<_;A++)M[A]=x[A];return M}function u(x){if(Array.isArray(x))return x}function d(){return d=Object.assign||function(x){for(var _=1;_<arguments.length;_++){var A=arguments[_];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(x[M]=A[M])}return x},d.apply(this,arguments)}function c(x){return x&&x.__esModule?x:{default:x}}function h(x,_){var A=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(A!=null){var M=[],T=!0,C=!1,E,D;try{for(A=A.call(x);!(T=(E=A.next()).done)&&(M.push(E.value),!(_&&M.length===_));T=!0);}catch(I){C=!0,D=I}finally{try{!T&&A.return!=null&&A.return()}finally{if(C)throw D}}return M}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(x,_){if(x==null)return{};var A=y(x,_),M,T;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(x);for(T=0;T<C.length;T++)M=C[T],!(_.indexOf(M)>=0)&&Object.prototype.propertyIsEnumerable.call(x,M)&&(A[M]=x[M])}return A}function y(x,_){if(x==null)return{};var A={},M=Object.keys(x),T,C;for(C=0;C<M.length;C++)T=M[C],!(_.indexOf(T)>=0)&&(A[T]=x[T]);return A}function m(x,_){return u(x)||h(x,_)||p(x,_)||f()}function p(x,_){if(x){if(typeof x=="string")return l(x,_);var A=Object.prototype.toString.call(x).slice(8,-1);if(A==="Object"&&x.constructor&&(A=x.constructor.name),A==="Map"||A==="Set")return Array.from(A);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return l(x,_)}}var v=r.default.forwardRef(function(x,_){var A=x.className,M=x.children,T=g(x,["className","children"]),C=(0,o.useTheme)().timelineBody,E=C.styles,D=E.base,I=m((0,a.useTimelineItem)(),1),k=I[0],L=(0,n.twMerge)((0,i.default)(D),A);return r.default.createElement("div",d({},T,{ref:_,className:L}),r.default.createElement("span",{className:"pointer-events-none invisible h-full flex-shrink-0",style:{width:"".concat(k,"px")}}),r.default.createElement("div",null,M))});v.propTypes={children:s.propTypeChildren,className:s.propTypeClassName},v.displayName="MaterialTailwind.TimelineHeader";var b=v})(Xpe);var Ype={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{TimelineHeader:function(){return c},default:function(){return h}});var r=l(te),n=Qt,i=l(Yt),o=jt,a=jh;function s(){return s=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(f[m]=y[m])}return f},s.apply(this,arguments)}function l(f){return f&&f.__esModule?f:{default:f}}function u(f,g){if(f==null)return{};var y=d(f,g),m,p;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(f);for(p=0;p<v.length;p++)m=v[p],!(g.indexOf(m)>=0)&&Object.prototype.propertyIsEnumerable.call(f,m)&&(y[m]=f[m])}return y}function d(f,g){if(f==null)return{};var y={},m=Object.keys(f),p,v;for(v=0;v<m.length;v++)p=m[v],!(g.indexOf(p)>=0)&&(y[p]=f[p]);return y}var c=r.default.forwardRef(function(f,g){var y=f.className,m=f.children,p=u(f,["className","children"]),v=(0,o.useTheme)().timelineHeader,b=v.styles,x=b.base,_=(0,n.twMerge)((0,i.default)(x),y);return r.default.createElement("div",s({},p,{ref:g,className:_}),m)});c.propTypes={children:a.propTypeChildren,className:a.propTypeClassName},c.displayName="MaterialTailwind.TimelineHeader";var h=c})(Ype);var Kpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,_){for(var A in _)Object.defineProperty(x,A,{enumerable:!0,get:_[A]})}t(e,{TimelineConnector:function(){return v},default:function(){return b}});var r=c(te),n=Qt,i=c(Yt),o=jt,a=rC,s=jh;function l(x,_){(_==null||_>x.length)&&(_=x.length);for(var A=0,M=new Array(_);A<_;A++)M[A]=x[A];return M}function u(x){if(Array.isArray(x))return x}function d(){return d=Object.assign||function(x){for(var _=1;_<arguments.length;_++){var A=arguments[_];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(x[M]=A[M])}return x},d.apply(this,arguments)}function c(x){return x&&x.__esModule?x:{default:x}}function h(x,_){var A=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(A!=null){var M=[],T=!0,C=!1,E,D;try{for(A=A.call(x);!(T=(E=A.next()).done)&&(M.push(E.value),!(_&&M.length===_));T=!0);}catch(I){C=!0,D=I}finally{try{!T&&A.return!=null&&A.return()}finally{if(C)throw D}}return M}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(x,_){if(x==null)return{};var A=y(x,_),M,T;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(x);for(T=0;T<C.length;T++)M=C[T],!(_.indexOf(M)>=0)&&Object.prototype.propertyIsEnumerable.call(x,M)&&(A[M]=x[M])}return A}function y(x,_){if(x==null)return{};var A={},M=Object.keys(x),T,C;for(C=0;C<M.length;C++)T=M[C],!(_.indexOf(T)>=0)&&(A[T]=x[T]);return A}function m(x,_){return u(x)||h(x,_)||p(x,_)||f()}function p(x,_){if(x){if(typeof x=="string")return l(x,_);var A=Object.prototype.toString.call(x).slice(8,-1);if(A==="Object"&&x.constructor&&(A=x.constructor.name),A==="Map"||A==="Set")return Array.from(A);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return l(x,_)}}var v=r.default.forwardRef(function(x,_){var A=x.className,M=x.children,T=g(x,["className","children"]),C,E=(0,o.useTheme)().timelineConnector,D=E.styles,I=D.base,k=m((0,a.useTimelineItem)(),1),L=k[0],U=(0,i.default)(I.line),W=(0,n.twMerge)((0,i.default)(I.container),A);return r.default.createElement("span",d({},T,{ref:_,className:W,style:{top:"".concat(L,"px"),width:"".concat(L,"px"),opacity:L?1:0,height:"calc(100% - ".concat(L,"px)")}}),M&&r.default.isValidElement(M)?r.default.cloneElement(M,{className:(0,n.twMerge)(U,(C=M.props)===null||C===void 0?void 0:C.className)}):r.default.createElement("span",{className:U}))});v.propTypes={children:s.propTypeChildren,className:s.propTypeClassName},v.displayName="MaterialTailwind.TimelineConnector";var b=v})(Kpe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,b){for(var x in b)Object.defineProperty(v,x,{enumerable:!0,get:b[x]})}t(e,{Timeline:function(){return m},TimelineItem:function(){return s.default},TimelineIcon:function(){return l.default},TimelineBody:function(){return u.default},TimelineHeader:function(){return d.default},TimelineConnector:function(){return c.default},default:function(){return p}});var r=f(te),n=Qt,i=f(Yt),o=jt,a=jh,s=f(rC),l=f(qpe),u=f(Xpe),d=f(Ype),c=f(Kpe);function h(){return h=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},h.apply(this,arguments)}function f(v){return v&&v.__esModule?v:{default:v}}function g(v,b){if(v==null)return{};var x=y(v,b),_,A;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);for(A=0;A<M.length;A++)_=M[A],!(b.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(v,_)&&(x[_]=v[_])}return x}function y(v,b){if(v==null)return{};var x={},_=Object.keys(v),A,M;for(M=0;M<_.length;M++)A=_[M],!(b.indexOf(A)>=0)&&(x[A]=v[A]);return x}var m=r.default.forwardRef(function(v,b){var x=v.className,_=v.children,A=g(v,["className","children"]),M=(0,o.useTheme)().timeline,T=M.styles,C=T.base,E=(0,n.twMerge)((0,i.default)(C),x);return r.default.createElement("ul",h({ref:b},A,{className:E}),_)});m.propTypes={className:a.propTypeClassName,children:a.propTypeChildren},m.displayName="MaterialTailwind.Timeline";var p=Object.assign(m,{Item:s.default,Icon:l.default,Header:d.default,Body:u.default,Connector:c.default})})(Wpe);var Jpe={},Qpe={},DG={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){for(var c in d)Object.defineProperty(u,c,{enumerable:!0,get:d[c]})}t(e,{propTypesActiveStep:function(){return i},propTypesIsLastStep:function(){return o},propTypesIsFirstStep:function(){return a},propTypesChildren:function(){return s},propTypesClassName:function(){return l}});var r=n(Kt);function n(u){return u&&u.__esModule?u:{default:u}}var i=r.default.number,o=r.default.func,a=r.default.func,s=r.default.node,l=r.default.string})(DG);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{Step:function(){return c},default:function(){return h}});var r=l(te),n=Qt,i=l(Yt),o=jt,a=DG;function s(){return s=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(f[m]=y[m])}return f},s.apply(this,arguments)}function l(f){return f&&f.__esModule?f:{default:f}}function u(f,g){if(f==null)return{};var y=d(f,g),m,p;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(f);for(p=0;p<v.length;p++)m=v[p],!(g.indexOf(m)>=0)&&Object.prototype.propertyIsEnumerable.call(f,m)&&(y[m]=f[m])}return y}function d(f,g){if(f==null)return{};var y={},m=Object.keys(f),p,v;for(v=0;v<m.length;v++)p=m[v],!(g.indexOf(p)>=0)&&(y[p]=f[p]);return y}var c=r.default.forwardRef(function(f,g){var y=f.className;f.activeClassName,f.completedClassName;var m=f.children,p=u(f,["className","activeClassName","completedClassName","children"]),v=(0,o.useTheme)().step,b=v.styles.base,x=(0,n.twMerge)((0,i.default)(b.initial),y);return r.default.createElement("div",s({},p,{ref:g,className:x}),m)});c.propTypes={className:a.propTypesClassName,activeClassName:a.propTypesClassName,completedClassName:a.propTypesClassName,children:a.propTypesChildren},c.displayName="MaterialTailwind.Step";var h=c})(Qpe);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(C,E){for(var D in E)Object.defineProperty(C,D,{enumerable:!0,get:E[D]})}t(e,{Stepper:function(){return M},Step:function(){return s.default},default:function(){return T}});var r=f(te),n=fo,i=Qt,o=f(Yt),a=jt,s=f(Qpe),l=DG;function u(C,E){(E==null||E>C.length)&&(E=C.length);for(var D=0,I=new Array(E);D<E;D++)I[D]=C[D];return I}function d(C){if(Array.isArray(C))return C}function c(C,E,D){return E in C?Object.defineProperty(C,E,{value:D,enumerable:!0,configurable:!0,writable:!0}):C[E]=D,C}function h(){return h=Object.assign||function(C){for(var E=1;E<arguments.length;E++){var D=arguments[E];for(var I in D)Object.prototype.hasOwnProperty.call(D,I)&&(C[I]=D[I])}return C},h.apply(this,arguments)}function f(C){return C&&C.__esModule?C:{default:C}}function g(C,E){var D=C==null?null:typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(D!=null){var I=[],k=!0,L=!1,U,W;try{for(D=D.call(C);!(k=(U=D.next()).done)&&(I.push(U.value),!(E&&I.length===E));k=!0);}catch(G){L=!0,W=G}finally{try{!k&&D.return!=null&&D.return()}finally{if(L)throw W}}return I}}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(C){for(var E=1;E<arguments.length;E++){var D=arguments[E]!=null?arguments[E]:{},I=Object.keys(D);typeof Object.getOwnPropertySymbols=="function"&&(I=I.concat(Object.getOwnPropertySymbols(D).filter(function(k){return Object.getOwnPropertyDescriptor(D,k).enumerable}))),I.forEach(function(k){c(C,k,D[k])})}return C}function p(C,E){var D=Object.keys(C);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(C);E&&(I=I.filter(function(k){return Object.getOwnPropertyDescriptor(C,k).enumerable})),D.push.apply(D,I)}return D}function v(C,E){return E=E??{},Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(E)):p(Object(E)).forEach(function(D){Object.defineProperty(C,D,Object.getOwnPropertyDescriptor(E,D))}),C}function b(C,E){if(C==null)return{};var D=x(C,E),I,k;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(C);for(k=0;k<L.length;k++)I=L[k],!(E.indexOf(I)>=0)&&Object.prototype.propertyIsEnumerable.call(C,I)&&(D[I]=C[I])}return D}function x(C,E){if(C==null)return{};var D={},I=Object.keys(C),k,L;for(L=0;L<I.length;L++)k=I[L],!(E.indexOf(k)>=0)&&(D[k]=C[k]);return D}function _(C,E){return d(C)||g(C,E)||A(C,E)||y()}function A(C,E){if(C){if(typeof C=="string")return u(C,E);var D=Object.prototype.toString.call(C).slice(8,-1);if(D==="Object"&&C.constructor&&(D=C.constructor.name),D==="Map"||D==="Set")return Array.from(D);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return u(C,E)}}var M=r.default.forwardRef(function(C,E){var D=C.activeStep,I=C.isFirstStep,k=C.isLastStep,L=C.className,U=C.lineClassName,W=C.activeLineClassName,G=C.children,z=b(C,["activeStep","isFirstStep","isLastStep","className","lineClassName","activeLineClassName","children"]),V=(0,a.useTheme)(),j=V.stepper,H=V.step,Y=j.styles.base,Q=H.styles,$=Q.base,ne=r.default.useRef(null),Z=_(r.default.useState(0),2),ce=Z[0],ae=Z[1],ie=D===0,le=Array.isArray(G)&&D===G.length-1,se=Array.isArray(G)&&D>G.length-1;r.default.useEffect(function(){if(ne.current){var Re=G,Le=ne.current.getBoundingClientRect().width,rt=Le/(Re.length-1);ae(rt)}},[G]);var re=r.default.useMemo(function(){if(!se)return ce*D},[D,se,ce]);(0,n.useMergeRefs)([E,ne]);var ye=(0,i.twMerge)((0,o.default)(Y.stepper),L),be=(0,i.twMerge)((0,o.default)(Y.line.initial),U),_e=(0,i.twMerge)(be,(0,o.default)(Y.line.active),W),Se=(0,o.default)($.active),Fe=(0,o.default)($.completed);return r.default.useEffect(function(){k&&typeof k=="function"&&k(le),I&&typeof I=="function"&&I(ie)},[I,ie,k,le]),r.default.createElement("div",h({},z,{ref:ne,className:ye}),r.default.createElement("div",{className:be}),r.default.createElement("div",{className:_e,style:{width:"".concat(re,"px")}}),Array.isArray(G)?G.map(function(Re,Le){var rt,st;return r.default.cloneElement(Re,v(m({key:Le},Re.props),{className:(0,i.twMerge)(Re.props.className,Le===D?(0,i.twMerge)(Se,(rt=Re.props)===null||rt===void 0?void 0:rt.activeClassName):Le<D?(0,i.twMerge)(Fe,(st=Re.props)===null||st===void 0?void 0:st.completedClassName):"")}))}):G)});M.propTypes={activeStep:l.propTypesActiveStep,isFirstStep:l.propTypesIsFirstStep,isLastStep:l.propTypesIsLastStep,className:l.propTypesClassName,lineClassName:l.propTypesClassName,activeLineClassName:l.propTypesClassName,children:l.propTypesChildren},M.displayName="MaterialTailwind.Stepper";var T=Object.assign(M,{Step:s.default})})(Jpe);var ck={},nC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{propTypesOpen:function(){return o},propTypesHanlder:function(){return a},propTypesPlacement:function(){return s},propTypesOffset:function(){return l},propTypesDismiss:function(){return u},propTypesChildren:function(){return d},propTypesAnimate:function(){return c},propTypesClassName:function(){return h}});var r=i(Kt),n=Un;function i(f){return f&&f.__esModule?f:{default:f}}var o=r.default.bool,a=r.default.func,s=r.default.oneOf(n.propTypesPlacements),l=n.propTypesOffsetType,u=n.propTypesDismissType,d=r.default.node.isRequired,c=n.propTypesAnimation,h=r.default.string})(nC);var dk={},KQ;function Dnt(){return KQ||(KQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{SpeedDialHandler:function(){return g},default:function(){return y}});var r=l(te),n=fo,i=OG(),o=Qt,a=nC;function s(m,p,v){return p in m?Object.defineProperty(m,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[p]=v,m}function l(m){return m&&m.__esModule?m:{default:m}}function u(m){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?arguments[p]:{},b=Object.keys(v);typeof Object.getOwnPropertySymbols=="function"&&(b=b.concat(Object.getOwnPropertySymbols(v).filter(function(x){return Object.getOwnPropertyDescriptor(v,x).enumerable}))),b.forEach(function(x){s(m,x,v[x])})}return m}function d(m,p){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(m);p&&(b=b.filter(function(x){return Object.getOwnPropertyDescriptor(m,x).enumerable})),v.push.apply(v,b)}return v}function c(m,p){return p=p??{},Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(p)):d(Object(p)).forEach(function(v){Object.defineProperty(m,v,Object.getOwnPropertyDescriptor(p,v))}),m}function h(m,p){if(m==null)return{};var v=f(m,p),b,x;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);for(x=0;x<_.length;x++)b=_[x],!(p.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(v[b]=m[b])}return v}function f(m,p){if(m==null)return{};var v={},b=Object.keys(m),x,_;for(_=0;_<b.length;_++)x=b[_],!(p.indexOf(x)>=0)&&(v[x]=m[x]);return v}var g=r.default.forwardRef(function(m,p){var v=m.children,b=h(m,["children"]),x,_=(0,i.useSpeedDial)(),A=_.getReferenceProps,M=_.refs,T=(0,n.useMergeRefs)([p,M.setReference]);return r.default.cloneElement(v,u({},A(c(u({},b),{ref:T,className:(0,o.twMerge)(v==null||(x=v.props)===null||x===void 0?void 0:x.className,b==null?void 0:b.className)}))))});g.propTypes={children:a.propTypesChildren},g.displayName="MaterialTailwind.SpeedDialHandler";var y=g}(dk)),dk}var hk={},JQ;function Ont(){return JQ||(JQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(m,p){for(var v in p)Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}t(e,{SpeedDialContent:function(){return g},default:function(){return y}});var r=c(te),n=Do,i=fo,o=OG(),a=jt,s=Qt,l=c(Yt),u=nC;function d(){return d=Object.assign||function(m){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(m[b]=v[b])}return m},d.apply(this,arguments)}function c(m){return m&&m.__esModule?m:{default:m}}function h(m,p){if(m==null)return{};var v=f(m,p),b,x;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);for(x=0;x<_.length;x++)b=_[x],!(p.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(v[b]=m[b])}return v}function f(m,p){if(m==null)return{};var v={},b=Object.keys(m),x,_;for(_=0;_<b.length;_++)x=b[_],!(p.indexOf(x)>=0)&&(v[x]=m[x]);return v}var g=r.default.forwardRef(function(m,p){var v=m.children,b=m.className,x=h(m,["children","className"]),_=(0,a.useTheme)(),A=_.speedDialContent.styles,M=(0,o.useSpeedDial)(),T=M.x,C=M.y,E=M.refs,D=M.open,I=M.strategy,k=M.getFloatingProps,L=M.animation,U=(0,i.useMergeRefs)([p,E.setFloating]),W=(0,s.twMerge)((0,l.default)(A),b),G=n.AnimatePresence;return r.default.createElement(n.LazyMotion,{features:n.domAnimation},r.default.createElement(G,null,D&&r.default.createElement("div",d({},x,{ref:U,className:W,style:{position:I,top:C??0,left:T??0}},k()),r.default.Children.map(v,function(z){return r.default.createElement(n.m.div,{initial:"unmount",exit:"unmount",animate:D?"mount":"unmount",variants:L},z)}))))});g.propTypes={children:u.propTypesChildren,className:u.propTypesClassName},g.displayName="MaterialTailwind.SpeedDialContent";var y=g}(hk)),hk}var Zpe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(f,g){for(var y in g)Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}t(e,{SpeedDialAction:function(){return c},default:function(){return h}});var r=l(te),n=jt,i=Qt,o=l(Yt),a=nC;function s(){return s=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(f[m]=y[m])}return f},s.apply(this,arguments)}function l(f){return f&&f.__esModule?f:{default:f}}function u(f,g){if(f==null)return{};var y=d(f,g),m,p;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(f);for(p=0;p<v.length;p++)m=v[p],!(g.indexOf(m)>=0)&&Object.prototype.propertyIsEnumerable.call(f,m)&&(y[m]=f[m])}return y}function d(f,g){if(f==null)return{};var y={},m=Object.keys(f),p,v;for(v=0;v<m.length;v++)p=m[v],!(g.indexOf(p)>=0)&&(y[p]=f[p]);return y}var c=r.default.forwardRef(function(f,g){var y=f.className,m=f.children,p=u(f,["className","children"]),v=(0,n.useTheme)(),b=v.speedDialAction.styles,x=(0,i.twMerge)((0,o.default)(b),y);return r.default.createElement("button",s({},p,{ref:g,className:x}),m)});c.propTypes={children:a.propTypesChildren,className:a.propTypesClassName},c.displayName="SpeedDialAction";var h=c})(Zpe);var QQ;function OG(){return QQ||(QQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,A){for(var M in A)Object.defineProperty(_,M,{enumerable:!0,get:A[M]})}t(e,{SpeedDialContext:function(){return p},useSpeedDial:function(){return v},SpeedDial:function(){return b},SpeedDialHandler:function(){return s.default},SpeedDialContent:function(){return l.default},SpeedDialAction:function(){return u.default},default:function(){return x}});var r=h(te),n=fo,i=jt,o=h(jo),a=nC,s=h(Dnt()),l=h(Ont()),u=h(Zpe);function d(_,A){(A==null||A>_.length)&&(A=_.length);for(var M=0,T=new Array(A);M<A;M++)T[M]=_[M];return T}function c(_){if(Array.isArray(_))return _}function h(_){return _&&_.__esModule?_:{default:_}}function f(_,A){var M=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(M!=null){var T=[],C=!0,E=!1,D,I;try{for(M=M.call(_);!(C=(D=M.next()).done)&&(T.push(D.value),!(A&&T.length===A));C=!0);}catch(k){E=!0,I=k}finally{try{!C&&M.return!=null&&M.return()}finally{if(E)throw I}}return T}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(_,A){return c(_)||f(_,A)||m(_,A)||g()}function m(_,A){if(_){if(typeof _=="string")return d(_,A);var M=Object.prototype.toString.call(_).slice(8,-1);if(M==="Object"&&_.constructor&&(M=_.constructor.name),M==="Map"||M==="Set")return Array.from(M);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return d(_,A)}}var p=r.default.createContext(null);function v(){var _=r.default.useContext(p);if(!_)throw new Error("useSpeedDial must be used within a <SpeedDial />.");return _}function b(_){var A=_.open,M=_.handler,T=_.placement,C=_.offset,E=_.dismiss,D=_.animate,I=_.children,k=(0,i.useTheme)(),L=k.speedDial.defaultProps,U=y(r.default.useState(!1),2),W=U[0],G=U[1];A=A??W,M=M??G,T=T??L.placement,C=C??L.offset,E=E??L.dismiss,D=D??L.animate;var z={unmount:{opacity:0,transform:"scale(0.5)",transition:{duration:.2,times:[.4,0,.2,1]}},mount:{opacity:1,transform:"scale(1)",transition:{duration:.2,times:[.4,0,.2,1]}}},V=(0,o.default)(z,D),j=(0,n.useFloatingNodeId)(),H=(0,n.useFloating)({open:A,nodeId:j,placement:T,onOpenChange:M,whileElementsMounted:n.autoUpdate,middleware:[(0,n.offset)(C),(0,n.flip)(),(0,n.shift)()]}),Y=H.x,Q=H.y,$=H.strategy,ne=H.refs,Z=H.context,ce=(0,n.useInteractions)([(0,n.useHover)(Z,{handleClose:(0,n.safePolygon)()}),(0,n.useDismiss)(Z,E)]),ae=ce.getReferenceProps,ie=ce.getFloatingProps,le=r.default.useMemo(function(){return{x:Y,y:Q,strategy:$,refs:ne,open:A,context:Z,getReferenceProps:ae,getFloatingProps:ie,animation:V}},[Z,ie,ae,ne,$,Y,Q,A,V]);return r.default.createElement(p.Provider,{value:le},r.default.createElement("div",{className:"group"},r.default.createElement(n.FloatingNode,{id:j},I)))}b.propTypes={open:a.propTypesOpen,handler:a.propTypesHanlder,placement:a.propTypesPlacement,offset:a.propTypesOffset,dismiss:a.propTypesDismiss,className:a.propTypesClassName,children:a.propTypesChildren,animate:a.propTypesAnimate},b.displayName="MaterialTailwind.SpeedDial";var x=Object.assign(b,{Handler:s.default,Content:l.default,Action:u.default})}(ck)),ck}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),t(_ue,e),t(hfe,e),t(ffe,e),t(pfe,e),t(gfe,e),t(vfe,e),t(wfe,e),t(_fe,e),t(Sfe,e),t(kI,e),t(lpe,e),t(upe,e),t(ppe,e),t(gpe,e),t(bpe,e),t(xpe,e),t(wpe,e),t(Spe,e),t(Ape,e),t(Ppe,e),t(Dpe,e),t(Ope,e),t(Rpe,e),t(Lpe,e),t(Npe,e),t(kpe,e),t(zpe,e),t(Vpe,e),t(jpe,e),t(Hpe,e),t(Gpe,e),t(Wpe,e),t(Jpe,e),t(OG(),e),t(jt,e),t(OH,e);function t(r,n){return Object.keys(r).forEach(function(i){i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[i]}})}),r}})(wue);function Rnt(){return Qe.jsx("footer",{className:"w-full flex-row items-center justify-center gap-y-6 gap-x-12 py-10 px-10 text-center md:justify-between",children:Qe.jsx(wue.Typography,{color:"blue-gray",className:"font-normal",children:" 2023 Yaopu Wang - Build with React and ThreeJS"})})}function Int(){return Qe.jsx(Qe.Fragment,{children:Qe.jsx(q0e,{children:Qe.jsxs("div",{className:"relative z-0 bg-primary",children:[Qe.jsxs("div",{className:"bg-hero-pattern bg-cover bg-no-repeat bg-center",children:[Qe.jsx(rQe,{}),Qe.jsx(RJe,{})]}),Qe.jsx(dQe,{}),Qe.jsx(PQe,{}),Qe.jsx(RQe,{}),Qe.jsx(zQe,{}),Qe.jsx(Rnt,{}),Qe.jsx(QMe,{})]})})})}fk.createRoot(document.getElementById("root")).render(Qe.jsx(i1.StrictMode,{children:Qe.jsx(Int,{})}))});export default Lnt();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}